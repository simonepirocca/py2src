{"total_count": 242, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/947", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/947/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/947/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/947/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/947", "id": 681641488, "node_id": "MDU6SXNzdWU2ODE2NDE0ODg=", "number": 947, "title": "Azure Metrics Exporter data point namespace handling", "user": {"login": "gxtaillon", "id": 567119, "node_id": "MDQ6VXNlcjU2NzExOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/567119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gxtaillon", "html_url": "https://github.com/gxtaillon", "followers_url": "https://api.github.com/users/gxtaillon/followers", "following_url": "https://api.github.com/users/gxtaillon/following{/other_user}", "gists_url": "https://api.github.com/users/gxtaillon/gists{/gist_id}", "starred_url": "https://api.github.com/users/gxtaillon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gxtaillon/subscriptions", "organizations_url": "https://api.github.com/users/gxtaillon/orgs", "repos_url": "https://api.github.com/users/gxtaillon/repos", "events_url": "https://api.github.com/users/gxtaillon/events{/privacy}", "received_events_url": "https://api.github.com/users/gxtaillon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-08-19T08:15:13Z", "updated_at": "2020-08-27T17:13:15Z", "closed_at": "2020-08-27T17:13:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "@izchen @reyang The code mentions a todo in one of your commits but I didn't see an issue to deal with it on the repo here. \r\n\r\nOn the Azure metrics exporter, the namespace is set to the same value as the name of the metric, this creates UX unfriendly bits in Azure App Insight when dealing with many custom metrics (eg: 50+). Has there been a conversation started on how to handle this todo? I'd like to make/get a fix for it.\r\n\r\nhttps://github.com/census-instrumentation/opencensus-python/blob/8401a4542173a7bcc5dc794e607fd4165f0de66a/contrib/opencensus-ext-azure/opencensus/ext/azure/metrics_exporter/__init__.py#L103-L106\r\n\r\nBest", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/941", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/941/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/941/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/941/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/941", "id": 667519224, "node_id": "MDU6SXNzdWU2Njc1MTkyMjQ=", "number": 941, "title": "AttributeError: module 'opencensus.stats.stats' has no attribute 'Stats'", "user": {"login": "zyxue", "id": 527862, "node_id": "MDQ6VXNlcjUyNzg2Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/527862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyxue", "html_url": "https://github.com/zyxue", "followers_url": "https://api.github.com/users/zyxue/followers", "following_url": "https://api.github.com/users/zyxue/following{/other_user}", "gists_url": "https://api.github.com/users/zyxue/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyxue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyxue/subscriptions", "organizations_url": "https://api.github.com/users/zyxue/orgs", "repos_url": "https://api.github.com/users/zyxue/repos", "events_url": "https://api.github.com/users/zyxue/events{/privacy}", "received_events_url": "https://api.github.com/users/zyxue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-29T03:27:36Z", "updated_at": "2020-07-29T17:15:30Z", "closed_at": "2020-07-29T17:15:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm following the Python example on https://opencensus.io/stats/view/#2\r\n\r\n```\r\n>>> from opencensus.stats import stats\r\n>>> view_manager = stats.Stats().view_manager\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nAttributeError: module 'opencensus.stats.stats' has no attribute 'Stats'\r\n```\r\n\r\nReading https://github.com/census-instrumentation/opencensus-python/blob/f4d8ec36cada8b385821a16795f27fe322694a1a/opencensus/stats/stats.py#L22,\r\n\r\n`Stats` seems to have been protected as `_Stats`, what's the current recommended way to start a view manager, please?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/937", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/937/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/937/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/937/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/937", "id": 665638506, "node_id": "MDU6SXNzdWU2NjU2Mzg1MDY=", "number": 937, "title": "PR #930 causes infinite hang", "user": {"login": "tiloc", "id": 16414047, "node_id": "MDQ6VXNlcjE2NDE0MDQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/16414047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiloc", "html_url": "https://github.com/tiloc", "followers_url": "https://api.github.com/users/tiloc/followers", "following_url": "https://api.github.com/users/tiloc/following{/other_user}", "gists_url": "https://api.github.com/users/tiloc/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiloc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiloc/subscriptions", "organizations_url": "https://api.github.com/users/tiloc/orgs", "repos_url": "https://api.github.com/users/tiloc/repos", "events_url": "https://api.github.com/users/tiloc/events{/privacy}", "received_events_url": "https://api.github.com/users/tiloc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-25T19:05:55Z", "updated_at": "2020-07-30T14:56:52Z", "closed_at": "2020-07-30T14:56:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** Django 2.2 with OpenCensus middleware from master branch\r\nopencensus                            0.8.dev0 \r\nopencensus-context                    0.2.dev0\r\nopencensus-ext-azure                  1.0.dev0\r\nopencensus-ext-django                 0.8.dev0\r\nopencensus-ext-logging                0.2.dev0 \r\n\r\nRunning in an on-premise environment, trying to log to Azure. \r\n\r\n**Steps to reproduce.**\r\nAdd OpenCensus Middleware to settings.py\r\nRun Django\r\n\r\n**What is the expected behavior?**\r\nServer starts up\r\n\r\n**What is the actual behavior?**\r\nServer hangs indefinitely\r\n\r\n**Additional context.**\r\nRoot cause seems to be an attempt to reach an unreachable hard-coded IP address. \r\n_AIMS_URI = \"http://169.254.169.254/metadata/instance/compute\"\r\n\r\nThe request.get call to this address does not specify any timeout parameter, which ultimately leads to the hang. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/931", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/931/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/931/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/931/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/931", "id": 660300473, "node_id": "MDU6SXNzdWU2NjAzMDA0NzM=", "number": 931, "title": "opencensus 0.7.10 depends == on opencensus-context 0.1.1 (not 0.1.2)", "user": {"login": "allanlw", "id": 1410954, "node_id": "MDQ6VXNlcjE0MTA5NTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1410954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allanlw", "html_url": "https://github.com/allanlw", "followers_url": "https://api.github.com/users/allanlw/followers", "following_url": "https://api.github.com/users/allanlw/following{/other_user}", "gists_url": "https://api.github.com/users/allanlw/gists{/gist_id}", "starred_url": "https://api.github.com/users/allanlw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allanlw/subscriptions", "organizations_url": "https://api.github.com/users/allanlw/orgs", "repos_url": "https://api.github.com/users/allanlw/repos", "events_url": "https://api.github.com/users/allanlw/events{/privacy}", "received_events_url": "https://api.github.com/users/allanlw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-18T18:25:00Z", "updated_at": "2020-08-01T06:28:03Z", "closed_at": "2020-08-01T06:28:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Steps to reproduce.**\r\n```\r\npython3 -m venv test_opencensus\r\npip install --no-cache-dir opencensus opencensus-context\r\npip check\r\n```\r\n\r\n**What is the expected behavior?**\r\nNo errors with `pip check`\r\n\r\n**What is the actual behavior?**\r\nOutput:\r\n```\r\nERROR: opencensus 0.7.10 has requirement opencensus-context==0.1.1, but you'll have opencensus-context 0.1.2 which is incompatible.\r\n```\r\n\r\n**Additional context.**\r\nopencensus 0.7.10 was released 3 weeks ago: https://github.com/census-instrumentation/opencensus-python/releases/tag/v0.7.10\r\n\r\nMetadata in the wheel from pypi pins the version directly:\r\n```\r\ngrep 'opencensus-context' ./test_opencensus/lib/python3.8/site-packages/opencensus-0.7.10.dist-info/METADATA\r\nRequires-Dist: opencensus-context (==0.1.1)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/927", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/927/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/927/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/927/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/927", "id": 655270632, "node_id": "MDU6SXNzdWU2NTUyNzA2MzI=", "number": 927, "title": "Adding atexit handler to stackdriver exporter", "user": {"login": "aravinsiva", "id": 34178459, "node_id": "MDQ6VXNlcjM0MTc4NDU5", "avatar_url": "https://avatars1.githubusercontent.com/u/34178459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aravinsiva", "html_url": "https://github.com/aravinsiva", "followers_url": "https://api.github.com/users/aravinsiva/followers", "following_url": "https://api.github.com/users/aravinsiva/following{/other_user}", "gists_url": "https://api.github.com/users/aravinsiva/gists{/gist_id}", "starred_url": "https://api.github.com/users/aravinsiva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aravinsiva/subscriptions", "organizations_url": "https://api.github.com/users/aravinsiva/orgs", "repos_url": "https://api.github.com/users/aravinsiva/repos", "events_url": "https://api.github.com/users/aravinsiva/events{/privacy}", "received_events_url": "https://api.github.com/users/aravinsiva/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "aravinsiva", "id": 34178459, "node_id": "MDQ6VXNlcjM0MTc4NDU5", "avatar_url": "https://avatars1.githubusercontent.com/u/34178459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aravinsiva", "html_url": "https://github.com/aravinsiva", "followers_url": "https://api.github.com/users/aravinsiva/followers", "following_url": "https://api.github.com/users/aravinsiva/following{/other_user}", "gists_url": "https://api.github.com/users/aravinsiva/gists{/gist_id}", "starred_url": "https://api.github.com/users/aravinsiva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aravinsiva/subscriptions", "organizations_url": "https://api.github.com/users/aravinsiva/orgs", "repos_url": "https://api.github.com/users/aravinsiva/repos", "events_url": "https://api.github.com/users/aravinsiva/events{/privacy}", "received_events_url": "https://api.github.com/users/aravinsiva/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aravinsiva", "id": 34178459, "node_id": "MDQ6VXNlcjM0MTc4NDU5", "avatar_url": "https://avatars1.githubusercontent.com/u/34178459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aravinsiva", "html_url": "https://github.com/aravinsiva", "followers_url": "https://api.github.com/users/aravinsiva/followers", "following_url": "https://api.github.com/users/aravinsiva/following{/other_user}", "gists_url": "https://api.github.com/users/aravinsiva/gists{/gist_id}", "starred_url": "https://api.github.com/users/aravinsiva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aravinsiva/subscriptions", "organizations_url": "https://api.github.com/users/aravinsiva/orgs", "repos_url": "https://api.github.com/users/aravinsiva/repos", "events_url": "https://api.github.com/users/aravinsiva/events{/privacy}", "received_events_url": "https://api.github.com/users/aravinsiva/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-07-11T20:04:45Z", "updated_at": "2020-08-27T16:34:37Z", "closed_at": "2020-08-27T16:34:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is needed such that SIGTERM's can be handled in OpenCensus in order to publish any remaining telemetry data to the GCP backend. Currently this exists in the azure exporter but not in the stackdriver exporter.\r\n\r\n\r\n**Describe the solution you'd like.**\r\nAdd an atexit handler to the stackdriver expoter such that remaining telemetry is flushed upon SIGTERM being handled.\r\n\r\n**Describe alternatives you've considered.**\r\nCurrently exists in Opentelemetry however since support for OpenCensus will continue for some time it would be advantageous to include this in OpenCensus. \r\n\r\nThe following need to be done:\r\n\r\n- Use Async transporter as the default transporter for Stackdriver trace exporter such that the atexit handler is used by default and main thread is not blocked (Update README).\r\n\r\n- Create atexit handler for Stackdriver metrics exporter \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/920", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/920/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/920/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/920/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/920", "id": 643999131, "node_id": "MDU6SXNzdWU2NDM5OTkxMzE=", "number": 920, "title": "Please publish the sdist of opencensus-context ", "user": {"login": "skinamdar", "id": 4870764, "node_id": "MDQ6VXNlcjQ4NzA3NjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4870764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skinamdar", "html_url": "https://github.com/skinamdar", "followers_url": "https://api.github.com/users/skinamdar/followers", "following_url": "https://api.github.com/users/skinamdar/following{/other_user}", "gists_url": "https://api.github.com/users/skinamdar/gists{/gist_id}", "starred_url": "https://api.github.com/users/skinamdar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skinamdar/subscriptions", "organizations_url": "https://api.github.com/users/skinamdar/orgs", "repos_url": "https://api.github.com/users/skinamdar/repos", "events_url": "https://api.github.com/users/skinamdar/events{/privacy}", "received_events_url": "https://api.github.com/users/skinamdar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-06-23T16:58:32Z", "updated_at": "2020-07-13T15:56:23Z", "closed_at": "2020-07-13T15:56:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently opencensus-context only publishes wheels, can it please be published as an sdist as well?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/918", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/918/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/918/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/918/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/918", "id": 641929833, "node_id": "MDU6SXNzdWU2NDE5Mjk4MzM=", "number": 918, "title": "Stackdriver exporter bug in distribution metric", "user": {"login": "marianhromiak", "id": 62988885, "node_id": "MDQ6VXNlcjYyOTg4ODg1", "avatar_url": "https://avatars0.githubusercontent.com/u/62988885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marianhromiak", "html_url": "https://github.com/marianhromiak", "followers_url": "https://api.github.com/users/marianhromiak/followers", "following_url": "https://api.github.com/users/marianhromiak/following{/other_user}", "gists_url": "https://api.github.com/users/marianhromiak/gists{/gist_id}", "starred_url": "https://api.github.com/users/marianhromiak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marianhromiak/subscriptions", "organizations_url": "https://api.github.com/users/marianhromiak/orgs", "repos_url": "https://api.github.com/users/marianhromiak/repos", "events_url": "https://api.github.com/users/marianhromiak/events{/privacy}", "received_events_url": "https://api.github.com/users/marianhromiak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-19T12:20:26Z", "updated_at": "2020-06-26T08:28:48Z", "closed_at": "2020-06-26T08:28:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\nwhen I tried example for Cloud Monitoring exporter for OpenTelemetry it doesn't work.\r\n\r\n**Describe your environment**\r\nPlatform: 'Linux-5.3.0-53-generic-x86_64-with-Ubuntu-18.04-bionic'\r\nVersion: Python 3.6.9\r\nInstalled packages:\r\n```\r\nPackage                                 Version\r\n--------------------------------------- ----------\r\naiocontextvars                          0.2.2\r\ncachetools                              4.1.0\r\ncertifi                                 2020.4.5.2\r\nchardet                                 3.0.4\r\nclick                                   7.1.2\r\ncontextvars                             2.4\r\nddtrace                                 0.38.1\r\nddtrace-aiomisc                         1.0.3\r\nFlask                                   1.1.2\r\ngoogle-api-core                         1.19.1\r\ngoogle-auth                             1.16.1\r\ngoogle-cloud-core                       1.3.0\r\ngoogle-cloud-monitoring                 0.36.0\r\ngoogle-cloud-trace                      0.23.0\r\ngoogleapis-common-protos                1.52.0\r\ngrpcio                                  1.29.0\r\nidna                                    2.9\r\nimmutables                              0.14\r\nitsdangerous                            1.1.0\r\nJinja2                                  2.11.2\r\nkubernetes                              11.0.0\r\nMarkupSafe                              1.1.1\r\nmsgpack                                 1.0.0\r\noauthlib                                3.1.0\r\nopencensus                              0.7.7\r\nopencensus-context                      0.1.1\r\nopencensus-ext-flask                    0.7.3\r\nopencensus-ext-httplib                  0.7.3\r\nopencensus-ext-postgresql               0.1.2\r\nopencensus-ext-requests                 0.7.3\r\nopencensus-ext-stackdriver              0.7.2\r\nopencensus-ext-threading                0.1.2\r\nopentelemetry-api                       0.9b0\r\nopentelemetry-exporter-cloud-monitoring 0.9b0\r\nopentelemetry-ext-datadog               0.9b0\r\nopentelemetry-sdk                       0.9b0\r\npip                                     20.1.1\r\nprotobuf                                3.12.2\r\npsycopg2                                2.8.5\r\npsycopg2-binary                         2.8.5\r\npyasn1                                  0.4.8\r\npyasn1-modules                          0.2.8\r\npython-dateutil                         2.8.1\r\npytz                                    2020.1\r\nPyYAML                                  5.3.1\r\nrequests                                2.23.0\r\nrequests-oauthlib                       1.3.0\r\nrsa                                     4.0\r\nsetuptools                              46.4.0\r\nsix                                     1.15.0\r\nurllib3                                 1.25.9\r\nwebsocket-client                        0.57.0\r\nWerkzeug                                1.0.1\r\nwheel                                   0.34.2\r\nwrapt                                   1.12.1\r\n```\r\n\r\n**Steps to reproduce.**\r\nUse distribution aggregation for metric. Push some data for export to SD/Cloud monitoring\r\n\r\n\r\n**What is the expected behavior?**\r\nYou can see mean value for distributed metric in Metric explorer.\r\n\r\n**What is the actual behavior?**\r\nYou see constant 0 as mean value in Metric explorer.\r\n\r\n**Additional context.**\r\nIt seems missing mean field assigment in _convert_point method in StackDriver exporter.\r\nhttps://github.com/census-instrumentation/opencensus-python/blob/master/contrib/opencensus-ext-stackdriver/opencensus/ext/stackdriver/stats_exporter/__init__.py#L203\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/914", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/914/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/914/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/914/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/914", "id": 640741034, "node_id": "MDU6SXNzdWU2NDA3NDEwMzQ=", "number": 914, "title": "v0.7.8 includes a missing import in common/transports/sync.py", "user": {"login": "cranti", "id": 7569441, "node_id": "MDQ6VXNlcjc1Njk0NDE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7569441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cranti", "html_url": "https://github.com/cranti", "followers_url": "https://api.github.com/users/cranti/followers", "following_url": "https://api.github.com/users/cranti/following{/other_user}", "gists_url": "https://api.github.com/users/cranti/gists{/gist_id}", "starred_url": "https://api.github.com/users/cranti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cranti/subscriptions", "organizations_url": "https://api.github.com/users/cranti/orgs", "repos_url": "https://api.github.com/users/cranti/repos", "events_url": "https://api.github.com/users/cranti/events{/privacy}", "received_events_url": "https://api.github.com/users/cranti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-17T21:04:07Z", "updated_at": "2020-06-29T20:54:12Z", "closed_at": "2020-06-29T20:54:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** \r\n* Python 3.7.7\r\n* Platform: `Darwin-19.2.0-x86_64-i386-64bit`\r\n* v0.7.8\r\n\r\n**Steps to reproduce.**\r\nThe source in PyPI for v0.7.8 is missing an import line in `common/transports/sync.py`:\r\n\r\n```python\r\nfrom opencensus.trace import execution_context\r\n```\r\n\r\nIt is present on [master](https://github.com/census-instrumentation/opencensus-python/blob/master/opencensus/common/transports/sync.py#L16). \r\n\r\n**What is the actual behavior?**\r\nA `NameError` when `end_span` is called:\r\n```\r\n  File \"/Users/cranti/.venv/lib/python3.7/site-packages/opencensus/trace/span.py\", line 392, in __exit__\r\n    self.context_tracer.end_span()\r\n  File \"/Users/cranti/.venv/lib/python3.7/site-packages/opencensus/trace/tracers/context_tracer.py\", line 123, in end_span\r\n    self.exporter.export(span_datas)\r\n  File \"/Users/cranti/.venv/lib/python3.7/site-packages/opencensus/trace/logging_exporter.py\", line 86, in export\r\n    self.transport.export(span_datas)\r\n  File \"/Users/cranti/.venv/lib/python3.7/site-packages/opencensus/common/transports/sync.py\", line 24, in export\r\n    execution_context.set_is_exporter(True)\r\nNameError: name 'execution_context' is not defined\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/908", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/908/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/908/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/908/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/908", "id": 638456222, "node_id": "MDU6SXNzdWU2Mzg0NTYyMjI=", "number": 908, "title": "**The program runs on a Kubernetes cluster. Logs when run on local,they work. But they don't go to AppInsights Azure**", "user": {"login": "SanthoshMedide", "id": 16350223, "node_id": "MDQ6VXNlcjE2MzUwMjIz", "avatar_url": "https://avatars2.githubusercontent.com/u/16350223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SanthoshMedide", "html_url": "https://github.com/SanthoshMedide", "followers_url": "https://api.github.com/users/SanthoshMedide/followers", "following_url": "https://api.github.com/users/SanthoshMedide/following{/other_user}", "gists_url": "https://api.github.com/users/SanthoshMedide/gists{/gist_id}", "starred_url": "https://api.github.com/users/SanthoshMedide/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SanthoshMedide/subscriptions", "organizations_url": "https://api.github.com/users/SanthoshMedide/orgs", "repos_url": "https://api.github.com/users/SanthoshMedide/repos", "events_url": "https://api.github.com/users/SanthoshMedide/events{/privacy}", "received_events_url": "https://api.github.com/users/SanthoshMedide/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-06-14T23:49:39Z", "updated_at": "2020-06-15T22:18:19Z", "closed_at": "2020-06-15T22:18:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "**The program runs on a Kubernetes cluster. Logs work on local but not sent to AppInsights Azure**\r\n----------------------------------logging.yaml--------------------------------------\r\n```\r\nversion: 1\r\ndisable_existing_loggers: False\r\nformatters:\r\nstandard:\r\nformat: \"%(asctime)s - %(name)s - %(levelname)s - %(message)s\"\r\nerror:\r\nformat: \"%(asctime)s- %(levelname)s <PID %(process)d:%(processName)s> %(name)s.%(funcName)s(): %(message)s\"\r\n\r\nhandlers:\r\nconsole:\r\nclass: logging.StreamHandler\r\nlevel: DEBUG\r\nformatter: standard\r\nstream: ext://sys.stdout\r\n\r\nnull_handler:\r\nclass: logging.NullHandler\r\nlevel: INFO\r\n\r\ninfo_file_handler:\r\nclass: logging.handlers.RotatingFileHandler\r\nlevel: INFO\r\nformatter: standard\r\nfilename: info.log\r\nmaxBytes: 10485760 # 10MB\r\nbackupCount: 20\r\nencoding: utf8\r\n\r\nerror_file_handler:\r\nclass: logging.handlers.RotatingFileHandler\r\nlevel: ERROR\r\nformatter: error\r\nfilename: logs/errors.log\r\nmaxBytes: 10485760 # 10MB\r\nbackupCount: 20\r\nencoding: utf8\r\n\r\nazure_handler:\r\nclass: opencensus.ext.azure.log_exporter.AzureLogHandler\r\nlevel: INFO\r\nformatter: standard\r\nbackupCount: 20\r\nencoding: utf8\r\nconnection_string: 'instrumentation_key_here'\r\ntimeout: 30\r\n\r\nloggers:\r\ndata_repo:\r\nlevel: DEBUG\r\nhandlers: [console,info_file_handler, error_file_handler,azure_handler]\r\npropagate: no\r\ndata_controller:\r\nlevel: DEBUG\r\nhandlers: [console,info_file_handler, error_file_handler,azure_handler]\r\npropagate: no\r\n\r\nroot:\r\nlevel: DEBUG\r\nhandlers: [console, info_file_handler, error_file_handler,azure_handler]\r\n```\r\n-------------------------------**setting the logging(set_logging.py)**----------------------------\r\n\r\n```\r\ndef setup_logging(\r\n    default_path='logging.yaml',\r\n    default_level=logging.DEBUG\r\n):\r\n    path = default_path\r\n    print(\"set logging\")\r\n    if os.path.exists(path):\r\n        with open(path, 'rt') as f:\r\n            config = yaml.safe_load(f.read())\r\n            config['handlers']['azure_handler']['connection_string']=cfg.APP_INSIGHTS_CONNECTION\r\n        logging.config.dictConfig(config)\r\n    else:\r\n        logging.basicConfig(level=default_level)\r\n\r\n```\r\n----------------------------**my program python file**---------------------------------------\r\n```\r\nimport traceback\r\nimport logging\r\n\r\nlogger = logging.getLogger(__name__)\r\ndef run():\r\n   logger.info(\"Run started\")\r\n   try:\r\n       access data \r\n   except Exception as e:\r\n            params = {_some information in dict format_}\r\n            logger.error(\"Failed to pull the data required \"+str(e),exc_info=True, extra=params)\r\n        \r\n```\r\n------------------------Here is the possible **ERROR**-----------------------------------------\r\n```\r\n2020-06-14 02:00:43,118 - data_repo - ERROR - Failed to pull the data required 'NoneType' object is not subscriptable\r\n2020-06-14 02:43:40,986 - azure.storage.common.storageclient - INFO - Client-Request-ID=c2393a78-ae0c-11ea-9f4c-a683e7151156 \r\nOutgoing request: Method=HEAD, Path=, Query={'snapshot': None, 'timeout': None, 'restype': None}, Headers={'x-ms-version': '2018-03-28', \r\n'User-Agent': 'Azure-Storage/1.4.2-1.5.0 (Python CPython 3.6.0; Darwin 18.7.0)',\r\n 'x-ms-client-request-id': 'c2393a78-ae0c-11ea-9f4c-a683e7151156', 'x-ms-date': 'Sun, 14 Jun 2020 07:00:40 GMT', 'Authorization': 'REDACTED'}.```\r\n\r\nAll logs are working when I run them on local.\r\nI am running application on Kubernetes \r\nLogs from the main file are going to ApplicationInsights (Main file runs on a pod)\r\nWhile logs from the rest of the files are not going to AppInsights (All these files are on diff pod)\r\nThere's no config difference between these pods\r\n\r\n_Originally posted by @SanthoshMedide in https://github.com/census-instrumentation/opencensus-python/issues/900#issuecomment-643732989_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/905", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/905/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/905/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/905/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/905", "id": 637313391, "node_id": "MDU6SXNzdWU2MzczMTMzOTE=", "number": 905, "title": "Stackdriver tests failing and blocking build", "user": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "aabmass", "id": 1510004, "node_id": "MDQ6VXNlcjE1MTAwMDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1510004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aabmass", "html_url": "https://github.com/aabmass", "followers_url": "https://api.github.com/users/aabmass/followers", "following_url": "https://api.github.com/users/aabmass/following{/other_user}", "gists_url": "https://api.github.com/users/aabmass/gists{/gist_id}", "starred_url": "https://api.github.com/users/aabmass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aabmass/subscriptions", "organizations_url": "https://api.github.com/users/aabmass/orgs", "repos_url": "https://api.github.com/users/aabmass/repos", "events_url": "https://api.github.com/users/aabmass/events{/privacy}", "received_events_url": "https://api.github.com/users/aabmass/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aabmass", "id": 1510004, "node_id": "MDQ6VXNlcjE1MTAwMDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1510004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aabmass", "html_url": "https://github.com/aabmass", "followers_url": "https://api.github.com/users/aabmass/followers", "following_url": "https://api.github.com/users/aabmass/following{/other_user}", "gists_url": "https://api.github.com/users/aabmass/gists{/gist_id}", "starred_url": "https://api.github.com/users/aabmass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aabmass/subscriptions", "organizations_url": "https://api.github.com/users/aabmass/orgs", "repos_url": "https://api.github.com/users/aabmass/repos", "events_url": "https://api.github.com/users/aabmass/events{/privacy}", "received_events_url": "https://api.github.com/users/aabmass/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-06-11T20:54:00Z", "updated_at": "2020-06-24T21:32:03Z", "closed_at": "2020-06-24T21:32:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See [build](https://travis-ci.org/github/census-instrumentation/opencensus-python/jobs/697381561).\r\nFails for Python 2.7, Python 3.4.\r\n\r\nRemoving these tests for now to unblock build.\r\n\r\n@c24t ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/901", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/901/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/901/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/901/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/901", "id": 634508501, "node_id": "MDU6SXNzdWU2MzQ1MDg1MDE=", "number": 901, "title": "Duplicated messages in Azure Application Insights", "user": {"login": "ahzarkie", "id": 29734934, "node_id": "MDQ6VXNlcjI5NzM0OTM0", "avatar_url": "https://avatars1.githubusercontent.com/u/29734934?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahzarkie", "html_url": "https://github.com/ahzarkie", "followers_url": "https://api.github.com/users/ahzarkie/followers", "following_url": "https://api.github.com/users/ahzarkie/following{/other_user}", "gists_url": "https://api.github.com/users/ahzarkie/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahzarkie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahzarkie/subscriptions", "organizations_url": "https://api.github.com/users/ahzarkie/orgs", "repos_url": "https://api.github.com/users/ahzarkie/repos", "events_url": "https://api.github.com/users/ahzarkie/events{/privacy}", "received_events_url": "https://api.github.com/users/ahzarkie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-08T10:57:56Z", "updated_at": "2020-06-09T07:40:50Z", "closed_at": "2020-06-09T07:40:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Environment:\r\n- Python 3.6.9 (64-bit, installed as part of ArcGIS pro)\r\n- Version 1.2 of opencensus-ext-azure\r\n- Using Azure application insights\r\n\r\n## Steps\r\nIn the code we try to run a function (optimizeRastersRunner) and if there is an eception it will trigger our `msg_azure` function\r\n\r\n![image](https://user-images.githubusercontent.com/29734934/84022320-f2ef5a00-a97d-11ea-9497-eef676cd31b6.png)\r\n\r\nThis uses the Handler function to post the message with some custom dimensions, up to azure insights using\r\n![image](https://user-images.githubusercontent.com/29734934/84038452-df50ed00-a997-11ea-8dd3-85614ec67fcf.png)\r\n\r\n\r\nWe also write the message to our local .txt logs for debugging purposes (all the logs go here rather than specific ones). While we get single messages in our own text logs, we are getting duplicate messages in app insights (as shown below)\r\n\r\n![image](https://user-images.githubusercontent.com/29734934/84022118-ac016480-a97d-11ea-91c0-2e096fb824fb.png)\r\n\r\n## What we expect\r\nWe expected to see 1 message per call of this function in application insights, and we have confirmed it is only being called once through stepping through the code\r\n\r\n## What we see\r\nMultiples of the same message\r\n\r\n## Addition info\r\nIt looks like we are seeing a similar issue to this [stack overflow post](https://stackoverflow.com/questions/62073445/pypi-opencensus-ext-azure-not-functioning-properly-sends-the-same-data-multiple)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/900", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/900/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/900/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/900/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/900", "id": 631607050, "node_id": "MDU6SXNzdWU2MzE2MDcwNTA=", "number": 900, "title": "AzureLogHandler does not seem to work from Celery tasks", "user": {"login": "Bastien-Brd", "id": 5479654, "node_id": "MDQ6VXNlcjU0Nzk2NTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/5479654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bastien-Brd", "html_url": "https://github.com/Bastien-Brd", "followers_url": "https://api.github.com/users/Bastien-Brd/followers", "following_url": "https://api.github.com/users/Bastien-Brd/following{/other_user}", "gists_url": "https://api.github.com/users/Bastien-Brd/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bastien-Brd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bastien-Brd/subscriptions", "organizations_url": "https://api.github.com/users/Bastien-Brd/orgs", "repos_url": "https://api.github.com/users/Bastien-Brd/repos", "events_url": "https://api.github.com/users/Bastien-Brd/events{/privacy}", "received_events_url": "https://api.github.com/users/Bastien-Brd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-05T13:49:26Z", "updated_at": "2020-06-29T20:54:34Z", "closed_at": "2020-06-29T20:54:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nPython 3.5.2\r\nDjango 2.2.10\r\ncelery==4.2.2\r\nopencensus==0.7.7\r\nopencensus-context==0.1.1\r\nopencensus-ext-azure==1.0.2\r\nopencensus-ext-django==0.7.2\r\nopencensus-ext-logging==0.1.0\r\n```\r\n\r\nAfter a loooong investigation and many experiments with various ways of configuring logging in Celery tasks and django, I am pretty sure that **for some reason, the AzureLogHandler does not send any log to Azure from a task running in a Celery worker**.\r\n\r\nTo make sure of that, in my django project, I setup Celery logging by discarding the default Celery logging behaviour (_the default is misleading because it overrides the root logger_) and instead I use the django logging configuration (from django's `settings.py`), and in addition I manually make sure the `celery` logger has both a local file log handler (making sure I capture all log messages locally for debugging this issue) and a AzureLogHandler. You can see how this is configuring in the code snippet below:\r\n\r\n```python\r\nimport os\r\nimport logging\r\n\r\nfrom celery import Celery\r\nfrom celery.signals import setup_logging\r\nfrom opencensus.ext.azure.log_exporter import AzureLogHandler\r\n\r\nfrom django.conf import settings\r\n\r\n\r\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"edgefolio.settings\")\r\n\r\n# Create the Celery app (called \"api\")\r\napp = Celery('api')\r\napp.config_from_object('django.conf:settings', namespace='CELERY')\r\napp.autodiscover_tasks(lambda: settings.INSTALLED_APPS)\r\n\r\n\r\ndef add_azure_log_handler_to_logger(logger, propagate=True):\r\n    \"\"\"\r\n    Given a logger, add a AzureLogHandler to it\r\n    :param logger:\r\n    :param propagate:\r\n    :return:\r\n    \"\"\"\r\n    if settings.AZURE_APP_INSIGHTS_INSTR_KEY:\r\n        formatter = logging.Formatter(\"[Celery/%(processName)s] %(message)s\")\r\n        # Azure Handler:\r\n        azure_log_handler = AzureLogHandler(\r\n            connection_string='InstrumentationKey=%s' % settings.AZURE_APP_INSIGHTS_INSTR_KEY)\r\n        azure_log_handler.setFormatter(formatter)\r\n        azure_log_handler.setLevel(logging.INFO)\r\n        logger.addHandler(azure_log_handler)\r\n        logger.setLevel(logging.INFO)\r\n        logger.propagate = propagate\r\n    return logger\r\n\r\n\r\n@setup_logging.connect\r\ndef setup_loggers(*args, **kwargs):\r\n    \"\"\"\r\n    Using the celery \"setup_logging\" signal to override and fully define the logging configuration for Celery\r\n    :param args:\r\n    :param kwargs:\r\n    :return:\r\n    \"\"\"\r\n    # Configure Celery logging from the Django settings' logging configuration\r\n    from logging.config import dictConfig\r\n    from django.conf import settings\r\n    dictConfig(settings.LOGGING)\r\n\r\n    # Test the root logger (configured in django settings to log to Azure as well\r\n    logger = logging.getLogger('root')\r\n    logger.warning('TRYING LOGGING FROM [%s]' % logger.name)\r\n\r\n    # Configure the Celery top level logger\r\n    logger = logging.getLogger('celery')\r\n    # Add a local file log handler to make sure we capture every message locally\r\n    logger.addHandler(logging.FileHandler(\"/data/log/worker/importer.log\"))\r\n    # In addition, also manually add a AzureLogHandler to it (duplicate with the root's handler)\r\n    logger = add_azure_log_handler_to_logger(logger, propagate=False)\r\n    # Log a test warning message\r\n    logger.warning('TRYING LOGGING FROM [%s]' % logger.name)\r\n\r\n    # Log a test warning message from a lower-level celery logger\r\n    logger = logging.getLogger('celery.task')\r\n    logger.warning('TRYING LOGGING FROM [%s]' % logger.name)\r\n\r\n    # Log a test warning message from a specific django app task logger\r\n    logger = logging.getLogger('etl.tasks')\r\n    logger.warning('TRYING LOGGING FROM [%s]' % logger.name)\r\n```\r\n\r\nThe result of this setup is that the log messages logged from the main celery process are all sent to both the local file and to Azure Monitor without problem, however **log messages generated from inside the celery tasks are sent to the local file** (proving that the logging configuration above is used in the tasks as well) **but NOT to Azure Monitor.** It appears only logs from the main Celery process are sent to Azure, but none from the Celery Worker processes.\r\n\r\nI wonder if this has to do with the way AzureLogHandler is implemented (using threading and similar wizardry) and the way Celery worker processes run.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/897", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/897/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/897/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/897/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/897", "id": 629499146, "node_id": "MDU6SXNzdWU2Mjk0OTkxNDY=", "number": 897, "title": "how to add cloudRoleName and cloudInstanceName to python appinsights", "user": {"login": "chetanku", "id": 10711779, "node_id": "MDQ6VXNlcjEwNzExNzc5", "avatar_url": "https://avatars0.githubusercontent.com/u/10711779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chetanku", "html_url": "https://github.com/chetanku", "followers_url": "https://api.github.com/users/chetanku/followers", "following_url": "https://api.github.com/users/chetanku/following{/other_user}", "gists_url": "https://api.github.com/users/chetanku/gists{/gist_id}", "starred_url": "https://api.github.com/users/chetanku/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chetanku/subscriptions", "organizations_url": "https://api.github.com/users/chetanku/orgs", "repos_url": "https://api.github.com/users/chetanku/repos", "events_url": "https://api.github.com/users/chetanku/events{/privacy}", "received_events_url": "https://api.github.com/users/chetanku/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-02T20:40:08Z", "updated_at": "2020-06-29T20:54:53Z", "closed_at": "2020-06-29T20:54:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Before opening a feature request against this repo, consider whether the feature should/could be implemented in the [other OpenCensus client libraries](https://github.com/census-instrumentation). If so, please [open an issue on opencensus-specs](https://github.com/census-instrumentation/opencensus-specs/issues/new) first.\r\n\r\n**Is your feature request related to a problem?**\r\nIf so, provide a concise description of the problem.\r\nYes, in .net and js libraries for appinsights you can add custom telemetry of cloudRolename and cloudInstancename, I don't see documentation around it for python from Microsoft.\r\n\r\n**Describe the solution you'd like.**\r\nWhat do you want to happen instead? What is the expected behavior?\r\nAddin cloudRoleName and cloudInstanceName helps filtering different containers/vms running python microservices.\r\n**Describe alternatives you've considered.**\r\nWhich alternative solutions or features have you considered?\r\n\r\n**Additional context.**\r\nAdd any other context about the feature request here.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/896", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/896/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/896/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/896/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/896", "id": 627492814, "node_id": "MDU6SXNzdWU2Mjc0OTI4MTQ=", "number": 896, "title": "Initializing with the \"proxy\" option passed in doesn't appear to work when initializaing AzureLogHandler and AzureExporter", "user": {"login": "skinamdar", "id": 4870764, "node_id": "MDQ6VXNlcjQ4NzA3NjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4870764?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skinamdar", "html_url": "https://github.com/skinamdar", "followers_url": "https://api.github.com/users/skinamdar/followers", "following_url": "https://api.github.com/users/skinamdar/following{/other_user}", "gists_url": "https://api.github.com/users/skinamdar/gists{/gist_id}", "starred_url": "https://api.github.com/users/skinamdar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skinamdar/subscriptions", "organizations_url": "https://api.github.com/users/skinamdar/orgs", "repos_url": "https://api.github.com/users/skinamdar/repos", "events_url": "https://api.github.com/users/skinamdar/events{/privacy}", "received_events_url": "https://api.github.com/users/skinamdar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-05-29T19:30:54Z", "updated_at": "2020-06-12T18:13:00Z", "closed_at": "2020-06-12T18:13:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/census-instrumentation/opencensus-python/blob/99821a0b826445cecce0881a01790c8cc6958ceb/contrib/opencensus-ext-azure/opencensus/ext/azure/common/__init__.py#L98\r\n\r\nSee partial sample invocation below where the proxy is passed in. \r\n```\r\nfrom opencensus.ext.azure.log_exporter import AzureLogHandler\r\nfrom opencensus.ext.azure.trace_exporter import AzureExporter\r\nnon_azure_https_proxy = {\"https\": \"https://www.google.com\"} # to test that the command fails\r\napp_insights_connection_string = \"insert_here\"\r\nazure_logger = AzureLogHandler(connection_string=app_insights_connection_string, proxy=azure_https_proxy)\r\nazure_exporter = AzureExporter(connection_string=app_insights_connection_string, proxy=azure_https_proxy)\r\n```\r\n\r\nRunning a similar command over curl \r\n```\r\ncurl -d '{\"name\": \"MetricData\", \"time\":\"2020-05-29T00:18:28.9586379Z\",\"iKey\":\"{insert_i_key_here}\",\"data\":{\"baseType\":\"MetricData\",\"baseData\":{\"metrics\":[{\"name\":\"Custom metric\",\"value\":2,\"count\":1}]}}}' https://dc.services.visualstudio.com/v2/track -x https://www.google.com -v\r\n```\r\nresults in a curl address error (which we expect as we want to make sure the requests passed via opencensus are routed to a proxy which we've defined)\r\n\r\nCan you please update the code to make sure it works with a custom proxy passed in?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/894", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/894/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/894/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/894/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/894", "id": 626145136, "node_id": "MDU6SXNzdWU2MjYxNDUxMzY=", "number": 894, "title": "AWS Lambda Error using the Azure Monitor", "user": {"login": "Ramachillara", "id": 6544923, "node_id": "MDQ6VXNlcjY1NDQ5MjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6544923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ramachillara", "html_url": "https://github.com/Ramachillara", "followers_url": "https://api.github.com/users/Ramachillara/followers", "following_url": "https://api.github.com/users/Ramachillara/following{/other_user}", "gists_url": "https://api.github.com/users/Ramachillara/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ramachillara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ramachillara/subscriptions", "organizations_url": "https://api.github.com/users/Ramachillara/orgs", "repos_url": "https://api.github.com/users/Ramachillara/repos", "events_url": "https://api.github.com/users/Ramachillara/events{/privacy}", "received_events_url": "https://api.github.com/users/Ramachillara/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-28T01:30:22Z", "updated_at": "2020-06-29T14:18:12Z", "closed_at": "2020-06-28T16:04:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Team, \r\n\r\nI tried to deployed an AWS lambda(python based) using opencensus-ext-azure. \r\nBut when i try to invoke the lambda i am getting the following error. \r\n\r\nNot sure if the module is supported on AWS lambda for python ?, i am able to run the same program fine locally/with out AWS lambda.\r\n\r\nAppreciate your response. \r\n========================================\r\n\r\nError.\r\n===============================================\r\n[ERROR] OSError: [Errno 30] Read-only file system: '/home/sbx_user1051'\r\nTraceback (most recent call last):\r\n\u00a0\u00a0File \"/var/task/handler.py\", line 11, in lambda_handler\r\n\u00a0\u00a0\u00a0\u00a0exporter=AzureExporter(\r\n\u00a0\u00a0File \"/var/task/opencensus/ext/azure/trace_exporter/__init__.py\", line 50, in __init__\r\n\u00a0\u00a0\u00a0\u00a0self.storage = LocalFileStorage(\r\n\u00a0\u00a0File \"/var/task/opencensus/ext/azure/common/storage.py\", line 90, in __init__\r\n\u00a0\u00a0\u00a0\u00a0self._maintenance_routine(silent=False)\r\n\u00a0\u00a0File \"/var/task/opencensus/ext/azure/common/storage.py\", line 112, in _maintenance_routine\r\n\u00a0\u00a0\u00a0\u00a0os.makedirs(self.path)\r\n\u00a0\u00a0File \"/var/lang/lib/python3.8/os.py\", line 213, in makedirs\r\n\u00a0\u00a0\u00a0\u00a0makedirs(head, exist_ok=exist_ok)\r\n\u00a0\u00a0File \"/var/lang/lib/python3.8/os.py\", line 213, in makedirs\r\n\u00a0\u00a0\u00a0\u00a0makedirs(head, exist_ok=exist_ok)\r\n\u00a0\u00a0File \"/var/lang/lib/python3.8/os.py\", line 213, in makedirs\r\n\u00a0\u00a0\u00a0\u00a0makedirs(head, exist_ok=exist_ok)\r\n\u00a0\u00a0File \"/var/lang/lib/python3.8/os.py\", line 223, in makedirs\r\n\u00a0\u00a0\u00a0\u00a0mkdir(name, mode)END RequestId: 85daef1a-6da1-4b4d-ae70-0006faba240a\r\n\r\nThanks \r\nRam", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/892", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/892/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/892/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/892/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/892", "id": 624445475, "node_id": "MDU6SXNzdWU2MjQ0NDU0NzU=", "number": 892, "title": "AsyncTransport and request integration don't work together", "user": {"login": "AndrewAXue", "id": 25035666, "node_id": "MDQ6VXNlcjI1MDM1NjY2", "avatar_url": "https://avatars3.githubusercontent.com/u/25035666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndrewAXue", "html_url": "https://github.com/AndrewAXue", "followers_url": "https://api.github.com/users/AndrewAXue/followers", "following_url": "https://api.github.com/users/AndrewAXue/following{/other_user}", "gists_url": "https://api.github.com/users/AndrewAXue/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndrewAXue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndrewAXue/subscriptions", "organizations_url": "https://api.github.com/users/AndrewAXue/orgs", "repos_url": "https://api.github.com/users/AndrewAXue/repos", "events_url": "https://api.github.com/users/AndrewAXue/events{/privacy}", "received_events_url": "https://api.github.com/users/AndrewAXue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-25T19:02:17Z", "updated_at": "2020-06-16T22:39:01Z", "closed_at": "2020-06-16T22:39:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Python version 3.7\r\n\r\n**Steps to reproduce.**\r\n```\r\n#!/usr/bin/env python\r\n\r\nimport os\r\n\r\nfrom opencensus.common.transports.async_ import AsyncTransport\r\nfrom opencensus.ext.stackdriver.trace_exporter import StackdriverExporter\r\nfrom opencensus.trace.tracer import Tracer\r\nfrom opencensus.trace import samplers\r\nfrom opencensus.trace import config_integration\r\nfrom opencensus.trace.print_exporter import PrintExporter\r\nimport requests\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    config_integration.trace_integrations(['requests'])\r\n\r\n    sde = StackdriverExporter(\r\n        project_id=os.environ.get(\"gcloud-project\"),\r\n        transport=AsyncTransport)\r\n\r\n    tracer = Tracer(exporter=PrintExporter(),\r\n                    sampler=samplers.AlwaysOnSampler())\r\n    response = requests.get(url='https://www.wikipedia.org/wiki/Rabbit')\r\n```\r\n\r\n**What is the expected behavior?**\r\nThe request to be instrumented and trace + span data to be printed to console\r\n\r\n**What is the actual behavior?**\r\nNothing printed\r\n\r\n**Additional context.**\r\nNote that the StackDriverExporter is CREATED, but is not the one thats used. This is just for clarity, the bug still happens if we use sde as our exporter.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/882", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/882/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/882/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/882/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/882", "id": 603531855, "node_id": "MDU6SXNzdWU2MDM1MzE4NTU=", "number": 882, "title": "Fast processes don't log everything to application insights", "user": {"login": "jelther", "id": 4515493, "node_id": "MDQ6VXNlcjQ1MTU0OTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/4515493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jelther", "html_url": "https://github.com/jelther", "followers_url": "https://api.github.com/users/jelther/followers", "following_url": "https://api.github.com/users/jelther/following{/other_user}", "gists_url": "https://api.github.com/users/jelther/gists{/gist_id}", "starred_url": "https://api.github.com/users/jelther/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jelther/subscriptions", "organizations_url": "https://api.github.com/users/jelther/orgs", "repos_url": "https://api.github.com/users/jelther/repos", "events_url": "https://api.github.com/users/jelther/events{/privacy}", "received_events_url": "https://api.github.com/users/jelther/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-04-20T21:00:02Z", "updated_at": "2020-04-21T21:39:56Z", "closed_at": "2020-04-21T21:39:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** Python 3.6 with opencensus-ext-azure and logging integrations\r\n\r\n**Steps to reproduce.**\r\nLog several messages at once and kill the process after\r\n\r\n**What is the expected behavior?**\r\nHave all messages on Application Insights\r\n\r\n**What is the actual behavior?**\r\nSome messages are not logged due to execution time.\r\n\r\n**Additional context.**\r\nTried to add a `time.sleep(60)` but it's not enough.\r\n\r\nIs there a way to guarantee that all the telemetry was sent before killing the process instead of just using a time.sleep ?\r\nAlready tried to set `handler = AzureLogHandler(export_interval=1.0)` but it wasn't enough.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/881", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/881/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/881/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/881/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/881", "id": 600302955, "node_id": "MDU6SXNzdWU2MDAzMDI5NTU=", "number": 881, "title": "Python session halts because of AzureLogHandler thread.", "user": {"login": "lakhotiaharshit", "id": 18750964, "node_id": "MDQ6VXNlcjE4NzUwOTY0", "avatar_url": "https://avatars2.githubusercontent.com/u/18750964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lakhotiaharshit", "html_url": "https://github.com/lakhotiaharshit", "followers_url": "https://api.github.com/users/lakhotiaharshit/followers", "following_url": "https://api.github.com/users/lakhotiaharshit/following{/other_user}", "gists_url": "https://api.github.com/users/lakhotiaharshit/gists{/gist_id}", "starred_url": "https://api.github.com/users/lakhotiaharshit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lakhotiaharshit/subscriptions", "organizations_url": "https://api.github.com/users/lakhotiaharshit/orgs", "repos_url": "https://api.github.com/users/lakhotiaharshit/repos", "events_url": "https://api.github.com/users/lakhotiaharshit/events{/privacy}", "received_events_url": "https://api.github.com/users/lakhotiaharshit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-15T13:35:10Z", "updated_at": "2020-04-17T08:04:36Z", "closed_at": "2020-04-17T08:04:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Environment**\r\n\r\nPython version:  3.8.2 \r\n\r\n```\r\nopencensus==0.7.7\r\nopencensus-context==0.1.1\r\nopencensus-ext-azure==1.0.2\r\n```\r\n\r\n\r\n**Steps to reproduce.**\r\n\r\n```python\r\nimport logging\r\nimport atexit\r\nimport logging.handlers\r\nfrom opencensus.ext.azure.log_exporter import AzureLogHandler\r\n\r\nlog = logging.getLogger(__name__)\r\n\r\nroot_logger = logging.getLogger()\r\n\r\ntelemetry_handler = AzureLogHandler(\r\n    connection_string='InstrumentationKey=0000-000-00000')\r\ntelemetry_handler.setLevel(logging.INFO)\r\nroot_logger.addHandler(telemetry_handler)\r\n\r\n\r\ndef close_everything():\r\n    log.info('closing everything')\r\n    try:\r\n        some_error\r\n    except:\r\n        log.exception('some exception', exc_info=False)\r\n        pass\r\n\r\n\r\natexit.register(close_everything)\r\natexit.register(logging.shutdown)\r\n\r\nexit()\r\n```\r\n**What is the expected behavior?**\r\n\r\nProcess finished with exit code 0\r\n\r\n**What is the actual behavior?**\r\nProcess never finished and has to killed, giving  \r\nProcess finished with exit code -1\r\n\r\n**Additional context.**\r\nPython session does not exit() because AzureLogHandler thread somehow blocks it. The line which halts exit() is atexit.register(close_everything). Specifically log.exception('some exception', exc_info=False) creates the problem. Changing .exception to .info fixes the issue and python session terminates properly.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/880", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/880/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/880/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/880/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/880", "id": 599602069, "node_id": "MDU6SXNzdWU1OTk2MDIwNjk=", "number": 880, "title": "Stackdriver Trace Annotations not showing label values", "user": {"login": "pselden", "id": 709282, "node_id": "MDQ6VXNlcjcwOTI4Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/709282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pselden", "html_url": "https://github.com/pselden", "followers_url": "https://api.github.com/users/pselden/followers", "following_url": "https://api.github.com/users/pselden/following{/other_user}", "gists_url": "https://api.github.com/users/pselden/gists{/gist_id}", "starred_url": "https://api.github.com/users/pselden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pselden/subscriptions", "organizations_url": "https://api.github.com/users/pselden/orgs", "repos_url": "https://api.github.com/users/pselden/repos", "events_url": "https://api.github.com/users/pselden/events{/privacy}", "received_events_url": "https://api.github.com/users/pselden/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-14T14:08:44Z", "updated_at": "2020-04-14T14:22:08Z", "closed_at": "2020-04-14T14:22:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.**\r\nPython Version: Python 3.7.7\r\n\r\nRequirements.txt:\r\nopencensus==0.7.7\r\ngoogle-cloud-trace==0.23.0\r\nopencensus-ext-grpc==0.7.1\r\nopencensus-ext-stackdriver==0.7.2\r\n\r\n**Steps to reproduce.**\r\n\r\nCreate a stracer with a stackdriver exporter:\r\n```py\r\ndef create_exporter():\r\n    return stackdriver_exporter.StackdriverExporter()\r\n\r\ndef create_server_tracer(sampling_rate):\r\n    exporter = create_exporter()\r\n    tracer = server_interceptor.OpenCensusServerInterceptor(\r\n        ProbabilitySampler(rate=sampling_rate), exporter\r\n    )\r\n    return tracer\r\n```\r\n\r\nSend an annotation with additional attributes:\r\n```py\r\n    with tracer.span(name='Terminator Service') as span:\r\n        span.add_annotation('Reques', failed=True, name='Caching')\r\n```\r\n\r\n**What is the expected behavior?**\r\nAnnotations should show the value you sent in in the value field.\r\n\r\n**What is the actual behavior?**\r\nThe keys show up as labels, but no values.\r\n\r\n![Screen Shot 2020-04-14 at 10 02 22 AM](https://user-images.githubusercontent.com/709282/79233574-104cef80-7e37-11ea-813c-1d5955fe6eb3.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/875", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/875/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/875/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/875/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/875", "id": 590327576, "node_id": "MDU6SXNzdWU1OTAzMjc1NzY=", "number": 875, "title": "When run froma running Job in databricks it is not login anything", "user": {"login": "AntonioJDios", "id": 29458335, "node_id": "MDQ6VXNlcjI5NDU4MzM1", "avatar_url": "https://avatars1.githubusercontent.com/u/29458335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AntonioJDios", "html_url": "https://github.com/AntonioJDios", "followers_url": "https://api.github.com/users/AntonioJDios/followers", "following_url": "https://api.github.com/users/AntonioJDios/following{/other_user}", "gists_url": "https://api.github.com/users/AntonioJDios/gists{/gist_id}", "starred_url": "https://api.github.com/users/AntonioJDios/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AntonioJDios/subscriptions", "organizations_url": "https://api.github.com/users/AntonioJDios/orgs", "repos_url": "https://api.github.com/users/AntonioJDios/repos", "events_url": "https://api.github.com/users/AntonioJDios/events{/privacy}", "received_events_url": "https://api.github.com/users/AntonioJDios/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-03-30T14:16:18Z", "updated_at": "2020-04-02T04:51:10Z", "closed_at": "2020-04-02T04:51:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** \r\nIf I run the the notebook step by step  I get the loggin. However if I run the complete notebook as a job triggered from databrick API it finishes before sending any log. It looks like it has not flushed. However with the applicationinsight libray I get the logged when I do manually tc.flush()\r\n\r\n**Steps to reproduce.**\r\n properties = {\r\n              'ApplicationName':application,                                \r\n              'CustomerId': customer_id,\r\n              'Entity_name':'Memory-Consumption',\r\n              'Period':period, \r\n              'memory':str(memory),\r\n              'Time':str(time),\r\n              'Status_code' : str(status_code['statusCode']),\r\n              'CalculationDate':readings_name[1], \r\n              'Job_id': jobId\r\n             }\r\n\r\n  \r\n  extra = {'custom_dimensions': properties}\r\n  logger.setLevel(logging.INFO)\r\n  logger.info(info+\": Run statusCode \"+ str(status_code['statusCode'])+\": \" +customer_id, extra=extra)\r\n**What is the expected behavior?**\r\nWhat did you expect to see?\r\nlog in app insight\r\n**What is the actual behavior?**\r\nWhat did you see instead?\r\nno log\r\n**Additional context.**\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/874", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/874/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/874/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/874/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/874", "id": 587874181, "node_id": "MDU6SXNzdWU1ODc4NzQxODE=", "number": 874, "title": "Investigate telemetry behaviour with Databricks/Azure Databricks", "user": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-25T17:43:00Z", "updated_at": "2020-03-31T17:22:30Z", "closed_at": "2020-03-31T17:22:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See https://github.com/census-instrumentation/opencensus-python/issues/870.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/871", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/871/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/871/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/871/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/871", "id": 585156933, "node_id": "MDU6SXNzdWU1ODUxNTY5MzM=", "number": 871, "title": "[opencensus-ext-azure] logger.info() and logger.debug() not being sent to App Insights", "user": {"login": "snobu", "id": 6472374, "node_id": "MDQ6VXNlcjY0NzIzNzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/6472374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snobu", "html_url": "https://github.com/snobu", "followers_url": "https://api.github.com/users/snobu/followers", "following_url": "https://api.github.com/users/snobu/following{/other_user}", "gists_url": "https://api.github.com/users/snobu/gists{/gist_id}", "starred_url": "https://api.github.com/users/snobu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snobu/subscriptions", "organizations_url": "https://api.github.com/users/snobu/orgs", "repos_url": "https://api.github.com/users/snobu/repos", "events_url": "https://api.github.com/users/snobu/events{/privacy}", "received_events_url": "https://api.github.com/users/snobu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-20T15:44:41Z", "updated_at": "2020-03-20T21:12:19Z", "closed_at": "2020-03-20T21:12:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using\r\n```\r\nPython 3.7.7 on macOS 10.15.3\r\n \r\nopencensus-context==0.1.1\r\nopencensus-ext-azure==1.0.2\r\n```\r\n\r\n`logger.info(...)` and `logger.debug(...)` do not get sent to Azure Application Insights.\r\nAm i doing it wrong or is this a known issue?\r\n\r\n`logger.warning(...)` for example produces the expected events in Application Insights.\r\n\r\nTo reproduce:\r\n\r\n```python\r\nfrom opencensus.ext.azure.log_exporter import AzureLogHandler\r\n\r\nlogger = logging.getLogger(__name__)\r\nlogger.addHandler(AzureLogHandler(\r\n    connection_string=\"InstrumentationKey=X-X-X-X\")\r\n)\r\n\r\nlogger.info(\"this is info\")\r\nlogger.warning(\"this is a warning\")\r\nlogger.debug(\"this is debug\")\r\nlogger.error(\"this is an error\")\r\n```\r\nNot filtering any traces:\r\n\r\n![image](https://user-images.githubusercontent.com/6472374/77180282-5e89ff80-6ad2-11ea-89e8-976084221ca7.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/870", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/870/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/870/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/870/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/870", "id": 584181287, "node_id": "MDU6SXNzdWU1ODQxODEyODc=", "number": 870, "title": "Multiple log entry in AppInsight", "user": {"login": "sharmapriyanka1502", "id": 62370963, "node_id": "MDQ6VXNlcjYyMzcwOTYz", "avatar_url": "https://avatars1.githubusercontent.com/u/62370963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sharmapriyanka1502", "html_url": "https://github.com/sharmapriyanka1502", "followers_url": "https://api.github.com/users/sharmapriyanka1502/followers", "following_url": "https://api.github.com/users/sharmapriyanka1502/following{/other_user}", "gists_url": "https://api.github.com/users/sharmapriyanka1502/gists{/gist_id}", "starred_url": "https://api.github.com/users/sharmapriyanka1502/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sharmapriyanka1502/subscriptions", "organizations_url": "https://api.github.com/users/sharmapriyanka1502/orgs", "repos_url": "https://api.github.com/users/sharmapriyanka1502/repos", "events_url": "https://api.github.com/users/sharmapriyanka1502/events{/privacy}", "received_events_url": "https://api.github.com/users/sharmapriyanka1502/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-03-19T05:56:47Z", "updated_at": "2020-04-08T02:49:37Z", "closed_at": "2020-04-08T02:49:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using this sample code for testing exception log entry in the log table. \r\n\r\nCode\r\n-------------------------------------------------------------------------------\r\nimport logging\r\nfrom opencensus.ext.azure.log_exporter import AzureLogHandler\r\nimport uuid\r\n\r\nlogger = logging.getLogger(__name__)\r\n\r\nlogger.addHandler(AzureLogHandler(\r\n    connection_string='InstrumentationKey=*******************')\r\n)\r\n\r\npipelineName = 'Sample Pipeline 2'\r\nrunId = uuid.uuid1()\r\n\r\nproperties = {'custom_dimensions': {'PipelineName': f'{pipelineName}', 'runId': f'{runId}', 'AlertType': 'PriyankaTesting1803Test10'}}\r\n\r\ntry:\r\n  a = 2\r\n  b = 'abc'\r\n  c = a + b\r\nexcept Exception:\r\n  logger.exception('Exception example.', extra=properties) \r\n\r\n-----------------------------------------------------------------------------------\r\nObservations:\r\n\r\nWhen I try to dump exception logs into the table at a gap of 30 seconds, I found logs been inserted correctly. \r\n\r\n![correct](https://user-images.githubusercontent.com/62370963/77036132-5d72a880-69d4-11ea-93ec-ad388480d10b.png)\r\n\r\n\r\nAs soon as I started triggering the logs one after the other, I see multiple entries been dumped for the same log. Though the entry numbers i see being limited to 2 or 3 unlike last testing which maxed till 7 entries. \r\n![1](https://user-images.githubusercontent.com/62370963/77036155-6c595b00-69d4-11ea-8306-efb1c7ddd0ab.png)\r\n![2](https://user-images.githubusercontent.com/62370963/77036156-6e231e80-69d4-11ea-8c06-4a7c5aa9ec33.png)\r\n![3](https://user-images.githubusercontent.com/62370963/77036158-6ebbb500-69d4-11ea-97c6-278c3daf6e39.png)\r\n![4](https://user-images.githubusercontent.com/62370963/77036160-6f544b80-69d4-11ea-844b-98509fc01609.png)\r\n![5](https://user-images.githubusercontent.com/62370963/77036162-6f544b80-69d4-11ea-8183-23615e77045c.png)\r\n\r\n-----------------------------------------------------------------------------------------------------------\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/869", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/869/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/869/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/869/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/869", "id": 580820819, "node_id": "MDU6SXNzdWU1ODA4MjA4MTk=", "number": 869, "title": "Custom Properties not working", "user": {"login": "davidychow87", "id": 22185727, "node_id": "MDQ6VXNlcjIyMTg1NzI3", "avatar_url": "https://avatars1.githubusercontent.com/u/22185727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidychow87", "html_url": "https://github.com/davidychow87", "followers_url": "https://api.github.com/users/davidychow87/followers", "following_url": "https://api.github.com/users/davidychow87/following{/other_user}", "gists_url": "https://api.github.com/users/davidychow87/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidychow87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidychow87/subscriptions", "organizations_url": "https://api.github.com/users/davidychow87/orgs", "repos_url": "https://api.github.com/users/davidychow87/repos", "events_url": "https://api.github.com/users/davidychow87/events{/privacy}", "received_events_url": "https://api.github.com/users/davidychow87/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-13T20:11:32Z", "updated_at": "2020-04-14T15:56:58Z", "closed_at": "2020-03-16T18:10:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've followed the example for adding custom dimensions exactly as is:\r\n\r\nhttps://github.com/census-instrumentation/opencensus-python/tree/master/contrib/opencensus-ext-azure#custom-properties\r\n\r\nbut, I don't see any of the custom keys (key_1, key_2 under the customDimensions field (under traces) in Application insights. I do see the messages, just not the custom properties.\r\n\r\nIDE: Visual Studio Code\r\nPython environment: 3.7.5 (.venv)\r\n\r\nDoes any one have any idea how to fix this? Thanks.\r\n\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/866", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/866/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/866/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/866/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/866", "id": 575696951, "node_id": "MDU6SXNzdWU1NzU2OTY5NTE=", "number": 866, "title": "Only warning, error, and exceptions logged; info and other loglevels not appearing in AppInsights", "user": {"login": "mcb0035", "id": 8672657, "node_id": "MDQ6VXNlcjg2NzI2NTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/8672657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcb0035", "html_url": "https://github.com/mcb0035", "followers_url": "https://api.github.com/users/mcb0035/followers", "following_url": "https://api.github.com/users/mcb0035/following{/other_user}", "gists_url": "https://api.github.com/users/mcb0035/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcb0035/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcb0035/subscriptions", "organizations_url": "https://api.github.com/users/mcb0035/orgs", "repos_url": "https://api.github.com/users/mcb0035/repos", "events_url": "https://api.github.com/users/mcb0035/events{/privacy}", "received_events_url": "https://api.github.com/users/mcb0035/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-04T19:25:54Z", "updated_at": "2020-03-12T00:41:51Z", "closed_at": "2020-03-12T00:41:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** \r\nLocal, Python 3.7.3\r\n\r\n**Steps to reproduce.**\r\n```\r\nimport logging\r\nfrom opencensus.ext.azure.log_exporter import AzureLogHandler\r\nlogger = logging.getLogger(__name__)\r\nhandler = AzureLogHandler(connection_string='InstrumentationKey=xxxx')\r\nlogger.addHandler(handler)\r\n\r\nlogger.log(logging.INFO, 'test log')\r\nlogger.info('test info')\r\nlogger.warning('test warning')\r\nlogger.error('test error')\r\nlogger.debug('test debug')\r\n```\r\n\r\n**What is the expected behavior?**\r\nAll five logs appear in AppInsights\r\n\r\n**What is the actual behavior?**\r\nOnly warning and error appear in AppInsights\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/865", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/865/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/865/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/865/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/865", "id": 574502832, "node_id": "MDU6SXNzdWU1NzQ1MDI4MzI=", "number": 865, "title": "Databricks sending multiple entries to app insight", "user": {"login": "rwforest", "id": 13447846, "node_id": "MDQ6VXNlcjEzNDQ3ODQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/13447846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rwforest", "html_url": "https://github.com/rwforest", "followers_url": "https://api.github.com/users/rwforest/followers", "following_url": "https://api.github.com/users/rwforest/following{/other_user}", "gists_url": "https://api.github.com/users/rwforest/gists{/gist_id}", "starred_url": "https://api.github.com/users/rwforest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rwforest/subscriptions", "organizations_url": "https://api.github.com/users/rwforest/orgs", "repos_url": "https://api.github.com/users/rwforest/repos", "events_url": "https://api.github.com/users/rwforest/events{/privacy}", "received_events_url": "https://api.github.com/users/rwforest/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-03T08:39:16Z", "updated_at": "2020-03-13T19:53:00Z", "closed_at": "2020-03-13T19:53:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** Databricks runtime 6.4 ML\r\n**Steps to reproduce.**\r\nlog.warning()\r\n\r\n**What is the expected behavior?**\r\nWhat did you expect to see?\r\nlog one entry\r\n\r\n**What is the actual behavior?**\r\nWhat did you see instead?\r\n\r\nmultiple entries are being logged\r\n\r\n**Additional context.**\r\n\r\nAll logging would result in multiple entries, sometimes 4 or more dups with exactly same everything.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/863", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/863/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/863/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/863/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/863", "id": 572779278, "node_id": "MDU6SXNzdWU1NzI3NzkyNzg=", "number": 863, "title": "Azure Exporter and AsyncIO (Starlette)", "user": {"login": "victoraugustolls", "id": 7843637, "node_id": "MDQ6VXNlcjc4NDM2Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/7843637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victoraugustolls", "html_url": "https://github.com/victoraugustolls", "followers_url": "https://api.github.com/users/victoraugustolls/followers", "following_url": "https://api.github.com/users/victoraugustolls/following{/other_user}", "gists_url": "https://api.github.com/users/victoraugustolls/gists{/gist_id}", "starred_url": "https://api.github.com/users/victoraugustolls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victoraugustolls/subscriptions", "organizations_url": "https://api.github.com/users/victoraugustolls/orgs", "repos_url": "https://api.github.com/users/victoraugustolls/repos", "events_url": "https://api.github.com/users/victoraugustolls/events{/privacy}", "received_events_url": "https://api.github.com/users/victoraugustolls/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-28T14:11:06Z", "updated_at": "2020-05-26T01:34:21Z", "closed_at": "2020-05-26T01:34:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I was wondering if using the Azure Exporter would be considered safe when working with asyncio / starlette (fast api). I know it has blocking calls like file system and using the request library, so was wondering if those can block the event loop when used by the exporter. \r\n\r\n@lzchen ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/862", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/862/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/862/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/862/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/862", "id": 569238178, "node_id": "MDU6SXNzdWU1NjkyMzgxNzg=", "number": 862, "title": "Azure Monitor exporter timing out and throwing errors", "user": {"login": "MaxTaggart", "id": 16192899, "node_id": "MDQ6VXNlcjE2MTkyODk5", "avatar_url": "https://avatars2.githubusercontent.com/u/16192899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaxTaggart", "html_url": "https://github.com/MaxTaggart", "followers_url": "https://api.github.com/users/MaxTaggart/followers", "following_url": "https://api.github.com/users/MaxTaggart/following{/other_user}", "gists_url": "https://api.github.com/users/MaxTaggart/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaxTaggart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaxTaggart/subscriptions", "organizations_url": "https://api.github.com/users/MaxTaggart/orgs", "repos_url": "https://api.github.com/users/MaxTaggart/repos", "events_url": "https://api.github.com/users/MaxTaggart/events{/privacy}", "received_events_url": "https://api.github.com/users/MaxTaggart/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-02-21T23:41:21Z", "updated_at": "2020-06-11T18:14:42Z", "closed_at": "2020-04-07T17:55:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Problem\r\nI am using the OpenCensus Azure extension to try to write trace information to App Insights. However, of the 2-3 dozen requests I have made to my server only one is showing up in App Insights and I keep getting timeout errors on my end and 500 errors from IIS on the other end. I am assuming that I'm just doing something wrong, but I can't figure out what it is. \r\n\r\n## Environment\r\nI am on macOS. \r\nPython version:\r\n```\r\n3.8.0 (default, Jan  8 2020, 13:35:00)\r\n[Clang 10.0.1 (clang-1001.0.46.4)]\r\n```\r\n\r\nPackage Versions:\r\n```\r\nopencensus==0.7.7\r\nopencensus-context==0.1.1\r\nopencensus-ext-azure==1.0.2\r\nFlask==1.1.1\r\nFlask-Cors==3.0.8\r\n```\r\n\r\n## To Reproduce\r\nServer code:\r\n``` python\r\nimport os\r\nimport time\r\nimport random\r\n\r\nfrom flask import Flask, jsonify, request\r\nfrom flask_cors import CORS\r\nfrom opencensus.ext.azure.trace_exporter import AzureExporter\r\nfrom opencensus.trace.samplers import ProbabilitySampler\r\nfrom opencensus.trace.tracer import Tracer\r\n\r\nazure_exporter = AzureExporter(connection_string='InstrumentationKey=************')\r\ntracer = Tracer(exporter=azure_exporter, sampler=ProbabilitySampler(1.0))\r\n\r\napp = Flask(__name__)\r\nCORS(app)\r\n\r\n@app.route('/')\r\ndef handle_request():\r\n    with tracer.span(name=\"handler.respond\"):\r\n        to_sleep = random.random() * 2\r\n        time.sleep(to_sleep)\r\n    return \"done\"\r\n\r\nif __name__ == \"__main__\":\r\n    app.run(debug=True, host='0.0.0.0', port=int(os.environ.get('PORT', 8080)))\r\n```\r\n\r\nclient code:\r\n``` bash\r\n$ curl localhost:8080\r\n```\r\n\r\n## Expected Behaivor\r\nNo timeouts or 500 errors and every request producing a new trace in App Insights (since I am using a probability sampler with probability=1).\r\n\r\n## Actual Behaivor\r\nI am seeing this error every few seconds:\r\n```\r\nTransient client side error HTTPSConnectionPool(host='dc.services.visualstudio.com', port=443): Read timed out. (read timeout=10.0).\r\n```\r\n\r\nand when I send a request I get this html back:\r\n\r\n![Screen Shot 2020-02-21 at 4 19 29 PM](https://user-images.githubusercontent.com/16192899/75080024-fee70700-54c7-11ea-8d37-056ca08f40db.png)\r\n\r\nMaybe this is just an app insights server outage, but I'm guessing that I'm doing something wrong. Let me know if there is other info that would be helpful.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/857", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/857/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/857/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/857/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/857", "id": 559928975, "node_id": "MDU6SXNzdWU1NTk5Mjg5NzU=", "number": 857, "title": "please publish 0.7.7 to pypi", "user": {"login": "ctaggart", "id": 80104, "node_id": "MDQ6VXNlcjgwMTA0", "avatar_url": "https://avatars2.githubusercontent.com/u/80104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ctaggart", "html_url": "https://github.com/ctaggart", "followers_url": "https://api.github.com/users/ctaggart/followers", "following_url": "https://api.github.com/users/ctaggart/following{/other_user}", "gists_url": "https://api.github.com/users/ctaggart/gists{/gist_id}", "starred_url": "https://api.github.com/users/ctaggart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ctaggart/subscriptions", "organizations_url": "https://api.github.com/users/ctaggart/orgs", "repos_url": "https://api.github.com/users/ctaggart/repos", "events_url": "https://api.github.com/users/ctaggart/events{/privacy}", "received_events_url": "https://api.github.com/users/ctaggart/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-04T19:25:50Z", "updated_at": "2020-02-04T22:11:07Z", "closed_at": "2020-02-04T22:11:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "We were excited to see [0.7.7 tagged](https://github.com/census-instrumentation/opencensus-python/releases/tag/v0.7.7 ), but it is still not available at\r\nhttps://pypi.org/project/opencensus/ . It still has 0.7.6 published on Nov 26th. Could you please publish 0.7.7 to pypi.org? We want to update to the new version because https://github.com/census-instrumentation/opencensus-python/issues/834 is fixed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/834", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/834/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/834/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/834/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/834", "id": 541049690, "node_id": "MDU6SXNzdWU1NDEwNDk2OTA=", "number": 834, "title": "Custom Properties/Dimensions Design Discussion", "user": {"login": "xinyi-joffre", "id": 20933017, "node_id": "MDQ6VXNlcjIwOTMzMDE3", "avatar_url": "https://avatars2.githubusercontent.com/u/20933017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xinyi-joffre", "html_url": "https://github.com/xinyi-joffre", "followers_url": "https://api.github.com/users/xinyi-joffre/followers", "following_url": "https://api.github.com/users/xinyi-joffre/following{/other_user}", "gists_url": "https://api.github.com/users/xinyi-joffre/gists{/gist_id}", "starred_url": "https://api.github.com/users/xinyi-joffre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xinyi-joffre/subscriptions", "organizations_url": "https://api.github.com/users/xinyi-joffre/orgs", "repos_url": "https://api.github.com/users/xinyi-joffre/repos", "events_url": "https://api.github.com/users/xinyi-joffre/events{/privacy}", "received_events_url": "https://api.github.com/users/xinyi-joffre/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}, {"id": 642440895, "node_id": "MDU6TGFiZWw2NDI0NDA4OTU=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/up-for-grabs", "name": "up-for-grabs", "color": "128A0C", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-12-20T15:25:20Z", "updated_at": "2020-01-22T19:03:13Z", "closed_at": "2020-01-15T23:17:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm happy to help contribute the code, but wanted to share design first and discuss to see if it is right approach.\r\n\r\n**Is your feature request related to a problem?**\r\n\r\nSupport for custom properties/dimensions was recently added for logging messages using args.\r\n\r\n```python\r\nlogger.info(\"my message\", {\"customProperty\": \"myValue\"})\r\n```\r\n\r\nThere were a few concerns with the current approach when applying it to existing code:\r\n\r\n1) Current approach with *args breaks existing logging functionality for other registered logging handlers, which are using args for lazy string interpolation. We would need to go back and change existing log calls to remove existing args (interpolate strings first) and change arg type to dictionary, if we wanted to log custom properties.\r\n2) It breaks LoggerAdapter and filter patterns for passing contextual information to all messages. For LoggerAdapter pattern, we cannot modify args at all. For filter pattern, we would currently need to overwrite the args there. \r\n3) We need to pass the custom dimensions into every call to the logger because of concern number 2.\r\n3) It only supports messages and not metrics/exceptions, so approach is not consistent.\r\n\r\n**Describe the solution you'd like.**\r\n\r\nInstead of using the *args as a dict, I would suggest using the **kwargs approach.\r\n\r\nFor the logging library, **kwargs are added to the __dict__ of LoggerRecord. When we process the record, we could look for customDimensions to be present on the record as an attribute. If it is there, then add it to the properties to be sent to Application Insights.\r\n\r\nThis solution would leave in place existing behavior, since end users can still use kwargs for storing other important attributes as long as it does not conflict with customDimensions (which is very application insights specific term).\r\n\r\nAs part of this request, it would also be great to have consistency across messages, exceptions, events, etc, instead of only supporting custom properties for messages.\r\n\r\nBelow are examples of logging use cases with the suggested approach:\r\n\r\n**Example 1: Simple Case for Adding Properties Once**\r\n\r\n```python\r\nproperties = {\u2018customDimensions\u2019: {\u2018testKey\u2019: \u2018testValue\u2019}}\r\nlogger.warning(\u201cStarting retry %s\u201d, retries, properties)\r\n```\r\n\r\n**Example 2: Pass Custom Properties as Context with LoggerAdaptor pattern**\r\n\r\n```python\r\n# FYI, just quickly sketching out code for explaining, more checking is needed for nulls, etc.\r\nclass CustomAdapter(logging.LoggerAdapter):\r\n    def process(self, msg, kwargs):\r\n\tkwargs['customDimensions'].update(self.extra[\u2018customDimensions\u2019])\r\n        return msg, kwargs\r\n\r\nlogger = logging.getLogger(__name__)\r\nadapter = CustomAdapter(logger, {\u2018customDimensions\u2019: {\u2018testKey\u2019: \u2018testValue\u2019}})\r\nadapter.warning(\u2018hello\u2019)\r\nadapter.info(\u2018hello %s\u2019, name, {\u2018customDimensions\u2019: {\u2018optionalExtraKey\u2019: \u2018optionalExtraValue\u2019}})\r\n```\r\n\r\n**Example 3: Pass Custom Properties as Context with LoggerFilter pattern**\r\n```python\r\n# FYI, just quickly sketching out code for explaining, more checking is needed for nulls, etc.\r\n\r\nclass ContextFilter(logging.Filter):\r\n\r\n    CUSTOM_DIMENSIONS = {\u2018testKey\u2019: \u2018testValue\u2019}\r\n\r\n    def filter(self, record):\r\n        setattr(record, \u2018customDimensions\u2019, CUSTOM_DIMENSIONS)\r\n\treturn True\r\n\r\nlogger = logging.getLogger(__name__)\r\nf = ContextFilter()\r\nlogger.addFilter(f)\r\n\r\nlogger.warning(\u2018hello\u2019)\r\nlogger.info(\u2018hello %s\u2019, name, {\u2018customDimensions\u2019: {\u2018optionalExtraKey\u2019: \u2018optionalExtraValue\u2019}})\r\n```\r\n**Describe alternatives you've considered.**\r\n\r\nWe tried the new approach with adding properties as args, but it required too much change to existing logs and required passing args to every call. We hope to instead use existing patterns for contextual logging. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/832", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/832/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/832/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/832/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/832", "id": 536105469, "node_id": "MDU6SXNzdWU1MzYxMDU0Njk=", "number": 832, "title": "Azure monitor exporter: no need to support old ID format", "user": {"login": "lmolkova", "id": 2347409, "node_id": "MDQ6VXNlcjIzNDc0MDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2347409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmolkova", "html_url": "https://github.com/lmolkova", "followers_url": "https://api.github.com/users/lmolkova/followers", "following_url": "https://api.github.com/users/lmolkova/following{/other_user}", "gists_url": "https://api.github.com/users/lmolkova/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmolkova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmolkova/subscriptions", "organizations_url": "https://api.github.com/users/lmolkova/orgs", "repos_url": "https://api.github.com/users/lmolkova/repos", "events_url": "https://api.github.com/users/lmolkova/events{/privacy}", "received_events_url": "https://api.github.com/users/lmolkova/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-11T02:36:22Z", "updated_at": "2020-03-13T20:10:42Z", "closed_at": "2020-03-13T20:10:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Azure Monitor required to report parentId and Id in the format of `|traceId.parentSpanId` and `|traceId.spanId` respecively.\r\n\r\nThis is not needed anymore even for backward compatibility reasons. Compatibility with old versions of Application Insights SDK is handled by ingestion.\r\n\r\n**Is your feature request related to a problem?**\r\nno\r\n\r\n**Describe the solution you'd like.**\r\n\r\n- parentId should now match parentSpanId\r\n- request/dependency.Id should match spanId\r\n- link id should match linked context span id\r\n\r\n\r\n**Describe alternatives you've considered.**\r\n\r\n**Additional context.**\r\nthe same issue for OTel https://github.com/microsoft/opentelemetry-exporters-python/issues/22\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/831", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/831/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/831/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/831/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/831", "id": 536009376, "node_id": "MDU6SXNzdWU1MzYwMDkzNzY=", "number": 831, "title": "Azure Monitor exporter does not set resultCode or success if there is no http.status_code attribute", "user": {"login": "lmolkova", "id": 2347409, "node_id": "MDQ6VXNlcjIzNDc0MDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2347409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmolkova", "html_url": "https://github.com/lmolkova", "followers_url": "https://api.github.com/users/lmolkova/followers", "following_url": "https://api.github.com/users/lmolkova/following{/other_user}", "gists_url": "https://api.github.com/users/lmolkova/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmolkova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmolkova/subscriptions", "organizations_url": "https://api.github.com/users/lmolkova/orgs", "repos_url": "https://api.github.com/users/lmolkova/repos", "events_url": "https://api.github.com/users/lmolkova/events{/privacy}", "received_events_url": "https://api.github.com/users/lmolkova/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-10T21:39:08Z", "updated_at": "2020-03-13T20:10:29Z", "closed_at": "2020-03-13T20:10:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Steps to reproduce.**\r\ncreate span with non-success status and export to azure monitor.\r\n\r\n**What is the expected behavior?**\r\nRequestTelemetry or DepednendcyTelemetry success and resultCode are populated according to the status\r\n\r\n**What is the actual behavior?**\r\nRequests are always failed, dependencies are always successful\r\n\r\n**Additional context.**\r\n\r\nIf there is no http.status_code or another recognizable status in attributes, the exporter should use Status.\r\nUse Status.CanonicalCode for resultCode. Success = CanonicalCode == OK (or status.IsOk)\r\n\r\nExactly the same issue for OpenTelemetry: https://github.com/microsoft/opentelemetry-exporters-python/issues/21\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/826", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/826/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/826/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/826/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/826", "id": 527369930, "node_id": "MDU6SXNzdWU1MjczNjk5MzA=", "number": 826, "title": "Azure Monitor exporter  does not populate HTTP dependency properties correctly", "user": {"login": "lmolkova", "id": 2347409, "node_id": "MDQ6VXNlcjIzNDc0MDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2347409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmolkova", "html_url": "https://github.com/lmolkova", "followers_url": "https://api.github.com/users/lmolkova/followers", "following_url": "https://api.github.com/users/lmolkova/following{/other_user}", "gists_url": "https://api.github.com/users/lmolkova/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmolkova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmolkova/subscriptions", "organizations_url": "https://api.github.com/users/lmolkova/orgs", "repos_url": "https://api.github.com/users/lmolkova/repos", "events_url": "https://api.github.com/users/lmolkova/events{/privacy}", "received_events_url": "https://api.github.com/users/lmolkova/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-22T19:17:26Z", "updated_at": "2020-03-13T20:10:36Z", "closed_at": "2020-03-13T20:10:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See the similar issue for OpenTelemtery https://github.com/microsoft/opentelemetry-exporters-python/issues/14\r\n\r\n**Steps to reproduce**\r\n\r\n* Enable requests integration.\r\n* Make outgoing HTTP call\r\n\r\n**What is the expected behavior?**\r\nDependency telemetry is populated properly with Data, Target and name:\r\n\r\n* Data matches URL\r\n* Target matches target url's authority (host:port) \r\n* name is \"METHOD /path\"\r\n\r\n**What is the actual behavior?**\r\n\r\n* Data not set\r\n* Target not set\r\n* name not correct\r\n\r\n**Additional context**\r\nhttps://github.com/census-instrumentation/opencensus-python/blob/master/contrib/opencensus-ext-azure/opencensus/ext/azure/trace_exporter/__init__.py#L109..L123", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/825", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/825/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/825/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/825/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/825", "id": 527367791, "node_id": "MDU6SXNzdWU1MjczNjc3OTE=", "number": 825, "title": "Azure Monitor exporter always sets  dependency.type to HTTP for client spans", "user": {"login": "lmolkova", "id": 2347409, "node_id": "MDQ6VXNlcjIzNDc0MDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2347409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmolkova", "html_url": "https://github.com/lmolkova", "followers_url": "https://api.github.com/users/lmolkova/followers", "following_url": "https://api.github.com/users/lmolkova/following{/other_user}", "gists_url": "https://api.github.com/users/lmolkova/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmolkova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmolkova/subscriptions", "organizations_url": "https://api.github.com/users/lmolkova/orgs", "repos_url": "https://api.github.com/users/lmolkova/repos", "events_url": "https://api.github.com/users/lmolkova/events{/privacy}", "received_events_url": "https://api.github.com/users/lmolkova/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-22T19:12:18Z", "updated_at": "2020-03-13T20:10:50Z", "closed_at": "2020-03-13T20:10:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/census-instrumentation/opencensus-python/blob/master/contrib/opencensus-ext-azure/opencensus/ext/azure/trace_exporter/__init__.py#L109\r\n\r\nHTTP type should only be set in the presence of http.* attribute", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/813", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/813/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/813/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/813/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/813", "id": 520726002, "node_id": "MDU6SXNzdWU1MjA3MjYwMDI=", "number": 813, "title": "What is the right way to use Flask ", "user": {"login": "varunarora", "id": 629203, "node_id": "MDQ6VXNlcjYyOTIwMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/629203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varunarora", "html_url": "https://github.com/varunarora", "followers_url": "https://api.github.com/users/varunarora/followers", "following_url": "https://api.github.com/users/varunarora/following{/other_user}", "gists_url": "https://api.github.com/users/varunarora/gists{/gist_id}", "starred_url": "https://api.github.com/users/varunarora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varunarora/subscriptions", "organizations_url": "https://api.github.com/users/varunarora/orgs", "repos_url": "https://api.github.com/users/varunarora/repos", "events_url": "https://api.github.com/users/varunarora/events{/privacy}", "received_events_url": "https://api.github.com/users/varunarora/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-11T03:55:55Z", "updated_at": "2020-04-22T07:57:14Z", "closed_at": "2020-04-22T07:57:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\nSince the code for `opencensus-ext-azure` is hosted in this repo, posting this issue here.\r\n\r\n**Is your feature request related to a problem?**\r\nI have a Flask web app (which will run in a Docker container, behind `gunicorn`), and am using the Azure ecosystem. My current problem is that I am unable to capture/see the stack traces in the **Samples** interface on Azure for failures in the requests made.\r\n\r\n![image](https://user-images.githubusercontent.com/629203/68559951-bf524e80-03f3-11ea-8c31-91b095e93ef6.png)\r\n\r\n\r\n**Describe the solution you'd like.**\r\nI wish to capture the request/response status AND GET and POST params. I also wish to capture and \"export\" the stack trace when uncaught errors happen. I wish to capture these in the Azure Application Insights / Monitor.\r\n\r\n**Describe alternatives you've considered.**\r\nI have configured both the `AzureExporter` (with the `FlaskMiddleware`) and `AzureLogHandler`. Requests show up with their error/success status, but none of the traces OR more detailed bodies of the requests.\r\n\r\n**Additional context.**\r\nI have seen documentation for Python applications on some pages, and for Flask on others. Haven't seen something that combines everything for the Azure integration, so I am just guessing things.\r\n\r\nMy code is as follows:\r\n\r\n```python\r\nimport logging\r\n\r\nfrom flask import Flask, jsonify\r\nfrom opencensus.ext.azure.trace_exporter import AzureExporter\r\nfrom opencensus.ext.azure.log_exporter import AzureLogHandler\r\nfrom opencensus.trace import config_integration\r\nfrom opencensus.ext.flask.flask_middleware import FlaskMiddleware\r\nfrom opencensus.trace.samplers import ProbabilitySampler, AlwaysOnSampler\r\n\r\napplication = Flask(__name__)\r\nconnection_string = \"InstrumentationKey=\" + os.environ['AZ_INSTRUMENTATION_KEY']\r\nconfig_integration.trace_integrations(['logging'])\r\n\r\nmiddleware = FlaskMiddleware(\r\n    application,\r\n    exporter=AzureExporter(connection_string=connection_string),\r\n    sampler=AlwaysOnSampler()\r\n)\r\n\r\nlogger = logging.getLogger(__name__)\r\nhandler = AzureLogHandler(connection_string=connection_string)\r\nhandler.setFormatter(logging.Formatter('%(traceId)s %(spanId)s %(message)s'))\r\nlogger.addHandler(handler)\r\n\r\n\r\n@application.route('/', methods=['POST'])\r\ndef index():\r\n    # An application whose code fails for dumb miscellaneous reasons.\r\n    return jsonify({})\r\n\r\nif __name__ == \"__main__\":\r\n    application.run(host=\"0.0.0.0\", debug='DEBUG' in os.environ, port=1337)\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/805", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/805/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/805/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/805/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/805", "id": 511688609, "node_id": "MDU6SXNzdWU1MTE2ODg2MDk=", "number": 805, "title": "why use export rather than export_metrics", "user": {"login": "lee3164", "id": 8246969, "node_id": "MDQ6VXNlcjgyNDY5Njk=", "avatar_url": "https://avatars3.githubusercontent.com/u/8246969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lee3164", "html_url": "https://github.com/lee3164", "followers_url": "https://api.github.com/users/lee3164/followers", "following_url": "https://api.github.com/users/lee3164/following{/other_user}", "gists_url": "https://api.github.com/users/lee3164/gists{/gist_id}", "starred_url": "https://api.github.com/users/lee3164/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lee3164/subscriptions", "organizations_url": "https://api.github.com/users/lee3164/orgs", "repos_url": "https://api.github.com/users/lee3164/repos", "events_url": "https://api.github.com/users/lee3164/events{/privacy}", "received_events_url": "https://api.github.com/users/lee3164/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-24T03:44:39Z", "updated_at": "2019-11-15T02:32:39Z", "closed_at": "2019-11-15T02:32:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "```py\r\n    # TODO: deprecate\r\n    def export(self, view_datas):\r\n        \"\"\"export view datas to registered exporters\"\"\"\r\n        view_datas_copy = \\\r\n            [self.copy_and_finalize_view_data(vd) for vd in view_datas]\r\n        if len(self.exporters) > 0:\r\n            for e in self.exporters:\r\n                try:\r\n                    e.export(view_datas_copy)\r\n                except AttributeError:\r\n                    pass\r\n```\r\nthis is the export method in measure_to_view_map.py, and it calls e.export, but the ocagent.stats_exporter.StatsExporter has no method export, why? below is the code of ocagent.stats_exporter.StatsExporter\r\n\r\n```py\r\nclass StatsExporter(object):\r\n    \"\"\"Stats exporter for an opencensus metrics grpc service.\r\n\r\n    :type rpc_handler: ExportRpcHandler\r\n    :param rpc_handler: export rpc handler\r\n    \"\"\"\r\n\r\n    def __init__(self, rpc_handler):\r\n        self._rpc_handler = rpc_handler\r\n\r\n    def export_metrics(self, metrics):\r\n        \"\"\" Exports given metrics to target metric service.\r\n        \"\"\"\r\n        metric_protos = []\r\n        for metric in metrics:\r\n            metric_protos.append(_get_metric_proto(metric))\r\n\r\n        self._rpc_handler.send(\r\n            metrics_service_pb2.ExportMetricsServiceRequest(\r\n                metrics=metric_protos))\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/791", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/791/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/791/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/791/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/791", "id": 498025305, "node_id": "MDU6SXNzdWU0OTgwMjUzMDU=", "number": 791, "title": "New release", "user": {"login": "victoraugustolls", "id": 7843637, "node_id": "MDQ6VXNlcjc4NDM2Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/7843637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victoraugustolls", "html_url": "https://github.com/victoraugustolls", "followers_url": "https://api.github.com/users/victoraugustolls/followers", "following_url": "https://api.github.com/users/victoraugustolls/following{/other_user}", "gists_url": "https://api.github.com/users/victoraugustolls/gists{/gist_id}", "starred_url": "https://api.github.com/users/victoraugustolls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victoraugustolls/subscriptions", "organizations_url": "https://api.github.com/users/victoraugustolls/orgs", "repos_url": "https://api.github.com/users/victoraugustolls/repos", "events_url": "https://api.github.com/users/victoraugustolls/events{/privacy}", "received_events_url": "https://api.github.com/users/victoraugustolls/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-25T03:21:53Z", "updated_at": "2019-10-01T23:33:44Z", "closed_at": "2019-10-01T23:33:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Isn't it time for a new release? We have a bunch of new fixes merged into master, including `requests` exception propagation and `flask` middleware not crashing when rule is none.\r\n\r\nTagging @reyang @c24t ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/786", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/786/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/786/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/786/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/786", "id": 492527698, "node_id": "MDU6SXNzdWU0OTI1Mjc2OTg=", "number": 786, "title": "Local Storage for metrics exporter in Azure", "user": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 1088008016, "node_id": "MDU6TGFiZWwxMDg4MDA4MDE2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/exporters", "name": "exporters", "color": "418ac6", "default": false, "description": ""}, {"id": 1134865059, "node_id": "MDU6TGFiZWwxMTM0ODY1MDU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/ext", "name": "ext", "color": "bfd4f2", "default": false, "description": ""}, {"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-09-12T00:33:00Z", "updated_at": "2020-04-06T16:51:16Z", "closed_at": "2020-04-06T16:51:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Similar to trace exporter, we need a local file storage for data in metrics exporter.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/785", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/785/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/785/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/785/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/785", "id": 491951377, "node_id": "MDU6SXNzdWU0OTE5NTEzNzc=", "number": 785, "title": "Data not sent to App Insights when run on Docker", "user": {"login": "madelineliao", "id": 8398251, "node_id": "MDQ6VXNlcjgzOTgyNTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/8398251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelineliao", "html_url": "https://github.com/madelineliao", "followers_url": "https://api.github.com/users/madelineliao/followers", "following_url": "https://api.github.com/users/madelineliao/following{/other_user}", "gists_url": "https://api.github.com/users/madelineliao/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelineliao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelineliao/subscriptions", "organizations_url": "https://api.github.com/users/madelineliao/orgs", "repos_url": "https://api.github.com/users/madelineliao/repos", "events_url": "https://api.github.com/users/madelineliao/events{/privacy}", "received_events_url": "https://api.github.com/users/madelineliao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-09-10T23:59:28Z", "updated_at": "2020-06-15T03:51:29Z", "closed_at": "2020-06-15T03:51:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "When running a Python module on Docker while using the Azure Monitor metrics exporter, I get an SSL error, and no data is sent to App Insights. When running the module locally, the data gets sent just fine. Not sure if it's related to [this Python issue](https://bugs.python.org/issue36137), but the workaround listed there didn't work for me.\r\n\r\nThis is the main function of the code I'm running:\r\n```\r\ndef main():\r\n    RUNTIME_MEASURE = measure_module.MeasureFloat(\"runtime\", \"Test runtime\", \"seconds\")\r\n    RUNTIME_VIEW = view_module.View(\"runtime_view\", \"Test runtime\", [], RUNTIME_MEASURE, aggregation_module.LastValueAggregation())\r\n\r\n    exporter = metrics_exporter.new_metrics_exporter(export_interval=0.5, instrumentation_key=APPINSIGHTS_INSTRUMENTATIONKEY)\r\n    view_manager.register_exporter(exporter)\r\n\r\n    view_manager.register_view(RUNTIME_VIEW)\r\n    mmap = stats_recorder.new_measurement_map()\r\n    tmap = tag_map_module.TagMap()\r\n\r\n\r\n    \"\"\"Generate the HLD for the cluster.\"\"\"\r\n    args = parse_args(sys.argv[1:])\r\n\r\n    start_time = default_timer()\r\n\r\n    # Generates HLD and manifests directory.\r\n    hydrator = HLD_Generator(args)\r\n    hydrator.generate()\r\n\r\n    runtime = default_timer() - start_time\r\n    mmap.measure_float_put(RUNTIME_MEASURE, runtime)\r\n    mmap.record(tmap)\r\n    time.sleep(0.5)\r\n    print(f\"Hydrate runtime: {runtime}\")\r\n```\r\nThis is the output I get after running `docker run` (SSL errors, followed by the normal output of the module, followed by more SSL errors):\r\n\r\n```\r\ndocker run -v /c/Users/t-maliao/Downloads/config:/config -v /c/Users/t-maliao:/app/out hydrate.azurecr.io/hydrate:test -k /config -n hi -d -v -t\r\n\r\nTransient client side error HTTPSConnectionPool(host='dc.services.visualstudio.com', port=443): Max retries exceeded with url: /v2/track (Caused by SSLError(SSLError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:852)'),)).\r\nTransient client side error HTTPSConnectionPool(host='dc.services.visualstudio.com', port=443): Max retries exceeded with url: /v2/track (Caused by SSLError(SSLError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:852)'),)).\r\nTransient client side error HTTPSConnectionPool(host='dc.services.visualstudio.com', port=443): Max retries exceeded with url: /v2/track (Caused by SSLError(SSLError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:852)'),)).\r\n\r\n< normal output from the module (deleted for the sake of conciseness) >\r\n\r\n\r\nTransient client side error HTTPSConnectionPool(host='dc.services.visualstudio.com', port=443): Max retries exceeded with url: /v2/track (Caused by SSLError(SSLError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:852)'),)).\r\nHydrate runtime: 1.8845756000373513\r\n```\r\n\r\nAny insight into this issue would be much appreciated! Thanks!\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/784", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/784/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/784/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/784/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/784", "id": 491412811, "node_id": "MDU6SXNzdWU0OTE0MTI4MTE=", "number": 784, "title": "Application Insights - Application Map", "user": {"login": "victoraugustolls", "id": 7843637, "node_id": "MDQ6VXNlcjc4NDM2Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/7843637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victoraugustolls", "html_url": "https://github.com/victoraugustolls", "followers_url": "https://api.github.com/users/victoraugustolls/followers", "following_url": "https://api.github.com/users/victoraugustolls/following{/other_user}", "gists_url": "https://api.github.com/users/victoraugustolls/gists{/gist_id}", "starred_url": "https://api.github.com/users/victoraugustolls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victoraugustolls/subscriptions", "organizations_url": "https://api.github.com/users/victoraugustolls/orgs", "repos_url": "https://api.github.com/users/victoraugustolls/repos", "events_url": "https://api.github.com/users/victoraugustolls/events{/privacy}", "received_events_url": "https://api.github.com/users/victoraugustolls/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-09-10T02:17:18Z", "updated_at": "2020-02-10T20:00:44Z", "closed_at": "2020-02-10T19:14:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Is your feature request related to a problem?**\r\nNo.\r\n\r\n**Describe the solution you'd like.**\r\nOther Applications (for example, dotNET ones) that have application insights, when they make a http request to a python app with Application Insights, the application map is globally visible. Currently the application map is not shown.\r\n\r\n**Describe alternatives you've considered.**\r\nNone.\r\n\r\n**Additional context.**\r\nNone.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/777", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/777/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/777/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/777/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/777", "id": 487277256, "node_id": "MDU6SXNzdWU0ODcyNzcyNTY=", "number": 777, "title": "Flask middleware raises AttributeError for 404 routes", "user": {"login": "jtbeach", "id": 12853460, "node_id": "MDQ6VXNlcjEyODUzNDYw", "avatar_url": "https://avatars0.githubusercontent.com/u/12853460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtbeach", "html_url": "https://github.com/jtbeach", "followers_url": "https://api.github.com/users/jtbeach/followers", "following_url": "https://api.github.com/users/jtbeach/following{/other_user}", "gists_url": "https://api.github.com/users/jtbeach/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtbeach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtbeach/subscriptions", "organizations_url": "https://api.github.com/users/jtbeach/orgs", "repos_url": "https://api.github.com/users/jtbeach/repos", "events_url": "https://api.github.com/users/jtbeach/events{/privacy}", "received_events_url": "https://api.github.com/users/jtbeach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-30T04:17:25Z", "updated_at": "2019-09-03T15:07:48Z", "closed_at": "2019-09-03T15:07:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe your environment.** \r\nPython 3.7, Flask 1.1, OpenCensus 0.7.3\r\n\r\n**Steps to reproduce.**\r\n1. Run opencensus with the Flask middleware enabled with any Flask app\r\n2. Hit a URL that does not map to a rule (ie. `/foo`)\r\n\r\n**What is the expected behavior?**\r\nDon't expect exceptions thrown for 404 routes\r\n\r\n**What is the actual behavior?**\r\nEvery 404 route is generating exceptions\r\n\r\n**Additional context.**\r\n\r\nThe problem is caused by the following PR: https://github.com/census-instrumentation/opencensus-python/pull/759\r\n\r\nIt assumes that the url_rule is not None -- if you hit any non-existent URL (ie. a 404-triggering URL), then `request.url_rule` will be None and code will raise an `AttributeError` \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/772", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/772/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/772/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/772/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/772", "id": 484207669, "node_id": "MDU6SXNzdWU0ODQyMDc2Njk=", "number": 772, "title": "AzureLogHandler Crashes Python Interpreter", "user": {"login": "SinfulPhantom", "id": 12258958, "node_id": "MDQ6VXNlcjEyMjU4OTU4", "avatar_url": "https://avatars0.githubusercontent.com/u/12258958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SinfulPhantom", "html_url": "https://github.com/SinfulPhantom", "followers_url": "https://api.github.com/users/SinfulPhantom/followers", "following_url": "https://api.github.com/users/SinfulPhantom/following{/other_user}", "gists_url": "https://api.github.com/users/SinfulPhantom/gists{/gist_id}", "starred_url": "https://api.github.com/users/SinfulPhantom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SinfulPhantom/subscriptions", "organizations_url": "https://api.github.com/users/SinfulPhantom/orgs", "repos_url": "https://api.github.com/users/SinfulPhantom/repos", "events_url": "https://api.github.com/users/SinfulPhantom/events{/privacy}", "received_events_url": "https://api.github.com/users/SinfulPhantom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1325516365, "node_id": "MDU6TGFiZWwxMzI1NTE2MzY1", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P0", "name": "P0", "color": "b60205", "default": false, "description": ""}, {"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-22T20:44:41Z", "updated_at": "2019-08-26T19:07:58Z", "closed_at": "2019-08-26T19:07:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** \r\nPython 3.7.4\r\nopencensus 0.7.1\r\nopencensus-ext-azure 0.7.0\r\n\r\n**Steps to reproduce.**\r\nUsing an external class' instance of logging, use AzureLogHandler\r\n\r\n**What is the expected behavior?**\r\nApplication Insights receiving trace\r\n\r\n**What is the actual behavior?**\r\nA trace, but the Python Interpreter crashes\r\n\r\n**Additional context.**\r\nI have a trace file, but it is 80MB+\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/769", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/769/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/769/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/769/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/769", "id": 483017814, "node_id": "MDU6SXNzdWU0ODMwMTc4MTQ=", "number": 769, "title": "CI blocked due to stackdriver quota limit", "user": {"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1325621912, "node_id": "MDU6TGFiZWwxMzI1NjIxOTEy", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/blocked", "name": "blocked", "color": "d93f0b", "default": false, "description": ""}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-08-20T18:35:34Z", "updated_at": "2019-08-20T23:33:38Z", "closed_at": "2019-08-20T23:33:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Current the system tests are failing which block the PRs.\r\nWe need another change similar like #571.\r\n\r\n@c24t @songy23 need your help.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/766", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/766/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/766/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/766/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/766", "id": 482363655, "node_id": "MDU6SXNzdWU0ODIzNjM2NTU=", "number": 766, "title": "Logging django unhandled exceptions to azure, the right way", "user": {"login": "arkataev", "id": 11923414, "node_id": "MDQ6VXNlcjExOTIzNDE0", "avatar_url": "https://avatars2.githubusercontent.com/u/11923414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arkataev", "html_url": "https://github.com/arkataev", "followers_url": "https://api.github.com/users/arkataev/followers", "following_url": "https://api.github.com/users/arkataev/following{/other_user}", "gists_url": "https://api.github.com/users/arkataev/gists{/gist_id}", "starred_url": "https://api.github.com/users/arkataev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arkataev/subscriptions", "organizations_url": "https://api.github.com/users/arkataev/orgs", "repos_url": "https://api.github.com/users/arkataev/repos", "events_url": "https://api.github.com/users/arkataev/events{/privacy}", "received_events_url": "https://api.github.com/users/arkataev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 1258866992, "node_id": "MDU6TGFiZWwxMjU4ODY2OTky", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/logging", "name": "logging", "color": "47e8aa", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-19T14:59:30Z", "updated_at": "2019-08-19T20:10:19Z", "closed_at": "2019-08-19T20:10:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have the following method within django middleware instance:\r\n\r\n```\r\n    def process_exception(self, request, \r\n        tracer = execution_context.get_opencensus_tracer()\r\n              with tracer.span():\r\n                   azure_logger.exception(exception.message)\r\n```\r\n\r\nthis is intended to log unhandled django exceptions during request handling to `azure monitor`. The problem is that **log entities are created with `operation_Id` and `operation_ParentId` filled with `00000000000000000000000000000000`**. \r\n\r\nAre there any docs or the right way I can log unhandled exception and relate it to processed request? \r\n\r\nI have expected that **exception** `operation_ParentId` may be logged in a way to relate to **request** `operation_Id` in order to use `join`  while making query in Azure Monitor", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/764", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/764/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/764/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/764/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/764", "id": 481618958, "node_id": "MDU6SXNzdWU0ODE2MTg5NTg=", "number": 764, "title": "opencensus-ext-azure trace_exported request.success value is always False on Python2 ", "user": {"login": "arkataev", "id": 11923414, "node_id": "MDQ6VXNlcjExOTIzNDE0", "avatar_url": "https://avatars2.githubusercontent.com/u/11923414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arkataev", "html_url": "https://github.com/arkataev", "followers_url": "https://api.github.com/users/arkataev/followers", "following_url": "https://api.github.com/users/arkataev/following{/other_user}", "gists_url": "https://api.github.com/users/arkataev/gists{/gist_id}", "starred_url": "https://api.github.com/users/arkataev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arkataev/subscriptions", "organizations_url": "https://api.github.com/users/arkataev/orgs", "repos_url": "https://api.github.com/users/arkataev/repos", "events_url": "https://api.github.com/users/arkataev/events{/privacy}", "received_events_url": "https://api.github.com/users/arkataev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-08-16T13:49:59Z", "updated_at": "2019-08-26T20:22:22Z", "closed_at": "2019-08-21T05:32:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "* Python 2.7.13\r\n* django==1.11.20\r\n* opencensus == 0.7.1\r\n* opencensus-ext-django == 0.7.0\r\n* opencensus-ext-azure == 0.7.0\r\n\r\n\r\nLooks like on Python2 exported request success status is wrong, because of objects comparison on [`this line`](https://github.com/census-instrumentation/opencensus-python/blob/daecc37ea3ec821b36c5a9da4094200f5a01b021/contrib/opencensus-ext-azure/opencensus/ext/azure/trace_exporter/__init__.py#L88)\r\n\r\n**Steps to reproduce.**\r\n`data.success = (status_code >= 200 and status_code <= 399)`\r\n\r\nif `status_code` type is string, than:\r\n\r\n`>>> (\"200\" >= 200 and \"200\" <= 399)`\r\n`>>> False `\r\n\r\nsince in python2 `int` is always less than `str`\r\n\r\nOtherwise:\r\n`>>> (200 >= 200 and 200 <= 399)`\r\n`>>> True`\r\n\r\nThis mainly affects all requests `success` status displayed in Azure Monitor Log which is set to `False`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/745", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/745/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/745/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/745/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/745", "id": 476547890, "node_id": "MDU6SXNzdWU0NzY1NDc4OTA=", "number": 745, "title": "opencensus-ext-python (==0.4.0) is shipped with broken StackdriverStatsExporter.", "user": {"login": "moriyoshi", "id": 18755, "node_id": "MDQ6VXNlcjE4NzU1", "avatar_url": "https://avatars1.githubusercontent.com/u/18755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moriyoshi", "html_url": "https://github.com/moriyoshi", "followers_url": "https://api.github.com/users/moriyoshi/followers", "following_url": "https://api.github.com/users/moriyoshi/following{/other_user}", "gists_url": "https://api.github.com/users/moriyoshi/gists{/gist_id}", "starred_url": "https://api.github.com/users/moriyoshi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moriyoshi/subscriptions", "organizations_url": "https://api.github.com/users/moriyoshi/orgs", "repos_url": "https://api.github.com/users/moriyoshi/repos", "events_url": "https://api.github.com/users/moriyoshi/events{/privacy}", "received_events_url": "https://api.github.com/users/moriyoshi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-04T12:26:31Z", "updated_at": "2019-08-06T19:07:10Z", "closed_at": "2019-08-06T19:07:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Environment\r\n\r\nPython 3.7.3 on Linux x86_64 w/glibc 2.29.\r\n(These should be irrelevant.)\r\n\r\n## Problem description\r\n\r\n`TypeError: '_Stats' object is not iterable` occurs during the call to `get_exporter_thread()`,\r\n\r\n`opencensus/ext/stackdriver/stats_exporter/__init__.py`:404\r\n```\r\n    transport.get_exporter_thread(stats.stats, exporter, interval=interval)\r\n```\r\n\r\nwhere get_exporter_thread expects an iterable of metrics_producers.\r\n\r\nIt actually passes a metric producer (a.k.a. an instance of _Stats) itself.  This is fixed in 0.7.x branch but not released yet.  Please get it out the door.\r\n\r\n### What is the expected behavior?\r\n\r\nNo exceptions raised.\r\n\r\n### What is the actual behavior?\r\n\r\nI see the following traceback.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"hello.py\", line 6, in <module>\r\n    new_stats_exporter()\r\n  File \"/tmp/test/venv/lib/python3.7/site-packages/opencensus/ext/stackdriver/stats_exporter/__init__.py\", line 404, in new_stats_exporter\r\n    transport.get_exporter_thread(stats.stats, exporter, interval=interval)\r\n  File \"/tmp/test/venv/lib/python3.7/site-packages/opencensus/metrics/transport.py\", line 99, in get_exporter_thread\r\n    for producer in metric_producers]\r\nTypeError: '_Stats' object is not iterable\r\n```\r\n\r\nhello.py\r\n```python\r\n# pip install opencensus==0.7.0 opencensus-ext-stackdriver==0.4.0\r\nfrom opencensus.ext.stackdriver.stats_exporter import new_stats_exporter\r\nfrom opencensus.stats.view import View\r\nfrom opencensus.stats import stats, measure, aggregation, view\r\n\r\n\r\nnew_stats_exporter()\r\n\r\nm = measure.MeasureInt('count', 'count', '1')\r\nv = View('count', 'count', [], m, aggregation.SumAggregation())\r\nstats.stats.view_manager.register_view(v)\r\n\r\nmmap = stats.stats.stats_recorder.new_measurement_map()\r\nmmap.measure_int_put(m, 1)\r\nmmap.record()\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/730", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/730/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/730/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/730/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/730", "id": 473048384, "node_id": "MDU6SXNzdWU0NzMwNDgzODQ=", "number": 730, "title": "Azure Exporter performance endpoints not showing", "user": {"login": "victoraugustolls", "id": 7843637, "node_id": "MDQ6VXNlcjc4NDM2Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/7843637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victoraugustolls", "html_url": "https://github.com/victoraugustolls", "followers_url": "https://api.github.com/users/victoraugustolls/followers", "following_url": "https://api.github.com/users/victoraugustolls/following{/other_user}", "gists_url": "https://api.github.com/users/victoraugustolls/gists{/gist_id}", "starred_url": "https://api.github.com/users/victoraugustolls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victoraugustolls/subscriptions", "organizations_url": "https://api.github.com/users/victoraugustolls/orgs", "repos_url": "https://api.github.com/users/victoraugustolls/repos", "events_url": "https://api.github.com/users/victoraugustolls/events{/privacy}", "received_events_url": "https://api.github.com/users/victoraugustolls/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1325516759, "node_id": "MDU6TGFiZWwxMzI1NTE2NzU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P2", "name": "P2", "color": "e99695", "default": false, "description": ""}, {"id": 1369854898, "node_id": "MDU6TGFiZWwxMzY5ODU0ODk4", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/azure", "name": "azure", "color": "87f2dc", "default": false, "description": "Microsoft Azure"}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-25T20:09:54Z", "updated_at": "2019-07-26T22:55:19Z", "closed_at": "2019-07-26T22:55:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe your environment.**\r\n\r\nPython 3.6 inside docker image ubuntu:16.04\r\nRunning with gunicorn\r\n\r\n**Steps to reproduce.**\r\n\r\nserver.py\r\n```\r\nimport os\r\n\r\nfrom flask import Flask\r\nfrom flask_cors import CORS\r\n\r\nfrom api.bp1 import setup_blueprint as bp1_blueprint\r\nfrom api.bp2 import setup_blueprint as bp2_blueprint\r\nfrom helpers import CustomJSONEncoder\r\n\r\nfrom logger import new\r\n\r\nfrom opencensus.ext.flask.flask_middleware import FlaskMiddleware\r\nfrom opencensus.ext.azure.trace_exporter import AzureExporter\r\nfrom opencensus.trace.samplers import ProbabilitySampler\r\nfrom opencensus.trace import config_integration\r\n\r\nLOG = new(__name__)\r\n\r\nconfig_integration.trace_integrations(['requests'])\r\n\r\napp = Flask(__name__)\r\napp.json_encoder = CustomJSONEncoder\r\nCORS(app)\r\nmiddleware = FlaskMiddleware(\r\n    app,\r\n    exporter=AzureExporter(),\r\n    sampler=ProbabilitySampler(rate=1.0),\r\n)\r\n\r\n\r\ndef register_blueprints(app):\r\n    LOG.info(\"Registering blueprints\")\r\n    app.register_blueprint(bp1_blueprint())\r\n    app.register_blueprint(bp2_blueprint())\r\n    LOG.info(\"Blueprints registered\")\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    port = int(os.environ.get(\"PORT\"))\r\n\r\n    register_blueprints(app)\r\n\r\n    LOG.info(\"Starting app\")\r\n    app.run(host='0.0.0.0', threaded=False, port=port)\r\n```\r\n\r\nwsgi.py\r\n```\r\nfrom server import app, register_blueprints\r\n\r\nregister_blueprints(app)\r\n\r\nif __name__ == \"__main__\":\r\n    app.run()\r\n```\r\n\r\nRunning with command: `gunicorn --bind 0.0.0.0:$PORT --timeout 600 --chdir src wsgi:app`\r\n\r\n**What is the expected behavior?**\r\nAzure app insights to show each endpoint inside the performance tab.\r\n\r\n**What is the actual behavior?**\r\n\r\n![image](https://user-images.githubusercontent.com/7843637/61905090-9bc7ce80-aefe-11e9-99d7-f5c64d15f3f8.png)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/717", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/717/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/717/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/717/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/717", "id": 467522376, "node_id": "MDU6SXNzdWU0Njc1MjIzNzY=", "number": 717, "title": "children not being added when tracer.start_span", "user": {"login": "SuyogSoti", "id": 13604256, "node_id": "MDQ6VXNlcjEzNjA0MjU2", "avatar_url": "https://avatars1.githubusercontent.com/u/13604256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SuyogSoti", "html_url": "https://github.com/SuyogSoti", "followers_url": "https://api.github.com/users/SuyogSoti/followers", "following_url": "https://api.github.com/users/SuyogSoti/following{/other_user}", "gists_url": "https://api.github.com/users/SuyogSoti/gists{/gist_id}", "starred_url": "https://api.github.com/users/SuyogSoti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SuyogSoti/subscriptions", "organizations_url": "https://api.github.com/users/SuyogSoti/orgs", "repos_url": "https://api.github.com/users/SuyogSoti/repos", "events_url": "https://api.github.com/users/SuyogSoti/events{/privacy}", "received_events_url": "https://api.github.com/users/SuyogSoti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-12T17:28:18Z", "updated_at": "2019-07-12T17:40:33Z", "closed_at": "2019-07-12T17:40:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** Describe any aspect of your environment relevant to the problem, including your Python version, [platform]\r\npython 3.7 windows\r\n\r\n**Steps to reproduce.**\r\nDescribe exactly how to reproduce the error. Include a code sample if applicable.\r\n```python\r\nfrom opencensus.trace.tracer import Tracer\r\nfrom opencensus.trace import execution_context\r\nfrom opencensus.trace.samplers import AlwaysOnSampler\r\nimport time\r\n\r\n# Initialize a tracer, by default using the `PrintExporter`\r\ntracer = Tracer(sampler=AlwaysOnSampler())\r\n\r\n# Example for creating nested spans\r\nparent = tracer.start_span(name=\"parent\")\r\nch1 = tracer.start_span(\"child\")\r\nprint(ch1.parent_span.name)\r\nprint(len(parent.children))\r\nch1.finish()\r\nparent.finish()\r\n```\r\n\r\n**What is the expected behavior?**\r\nI expect the following to be printed.\r\n```\r\nparent\r\n1\r\n```\r\n\r\n**What is the actual behavior?**\r\n```\r\nparent\r\n0\r\n```\r\n\r\n**Additional context.**\r\nNone", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/716", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/716/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/716/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/716/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/716", "id": 467166788, "node_id": "MDU6SXNzdWU0NjcxNjY3ODg=", "number": 716, "title": "Execution context not being updated in nested context", "user": {"login": "SuyogSoti", "id": 13604256, "node_id": "MDQ6VXNlcjEzNjA0MjU2", "avatar_url": "https://avatars1.githubusercontent.com/u/13604256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SuyogSoti", "html_url": "https://github.com/SuyogSoti", "followers_url": "https://api.github.com/users/SuyogSoti/followers", "following_url": "https://api.github.com/users/SuyogSoti/following{/other_user}", "gists_url": "https://api.github.com/users/SuyogSoti/gists{/gist_id}", "starred_url": "https://api.github.com/users/SuyogSoti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SuyogSoti/subscriptions", "organizations_url": "https://api.github.com/users/SuyogSoti/orgs", "repos_url": "https://api.github.com/users/SuyogSoti/repos", "events_url": "https://api.github.com/users/SuyogSoti/events{/privacy}", "received_events_url": "https://api.github.com/users/SuyogSoti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1325516759, "node_id": "MDU6TGFiZWwxMzI1NTE2NzU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P2", "name": "P2", "color": "e99695", "default": false, "description": ""}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-07-12T00:41:26Z", "updated_at": "2019-07-26T15:47:30Z", "closed_at": "2019-07-26T15:47:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** Describe any aspect of your environment relevant to the problem, including your Python version, [platform]\r\nI am running python 3.7 on windows.\r\n\r\n**Steps to reproduce.**\r\nDescribe exactly how to reproduce the error. Include a code sample if applicable.\r\n```python\r\nfrom opencensus.trace.tracer import Tracer\r\nfrom opencensus.trace import execution_context\r\nfrom opencensus.trace.samplers import AlwaysOnSampler\r\nimport time\r\n\r\n# Initialize a tracer, by default using the `PrintExporter`\r\ntracer = Tracer(sampler=AlwaysOnSampler())\r\n\r\ndef do():\r\n    time.sleep(0.05)\r\n\r\n# Example for creating nested spans\r\nwith tracer.span(name='span1') as span1:\r\n    with span1.span(name='span1_child1') as span1_child1:\r\n        do()\r\n    with span1.span(name='span1_child2') as span1_child2:\r\n        print(execution_context.get_current_span().name)\r\n        do()\r\nwith tracer.span(name='span2') as span2:\r\n    do()\r\n```\r\n\r\n**What is the expected behavior?**\r\nI expect it to print span1_child2\r\n\r\n**What is the actual behavior?**\r\nIt prints span1\r\n\r\n**Additional context.**\r\nNot Really.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/712", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/712/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/712/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/712/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/712", "id": 463925637, "node_id": "MDU6SXNzdWU0NjM5MjU2Mzc=", "number": 712, "title": "Support redactions in span annotations", "user": {"login": "tmc", "id": 3977, "node_id": "MDQ6VXNlcjM5Nzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmc", "html_url": "https://github.com/tmc", "followers_url": "https://api.github.com/users/tmc/followers", "following_url": "https://api.github.com/users/tmc/following{/other_user}", "gists_url": "https://api.github.com/users/tmc/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmc/subscriptions", "organizations_url": "https://api.github.com/users/tmc/orgs", "repos_url": "https://api.github.com/users/tmc/repos", "events_url": "https://api.github.com/users/tmc/events{/privacy}", "received_events_url": "https://api.github.com/users/tmc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-03T19:51:30Z", "updated_at": "2019-07-03T19:56:43Z", "closed_at": "2019-07-03T19:56:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Having a means of redacting span annotation contents would be useful.\r\n\r\nUse case: A url contains a token that could be sensitive.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/702", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/702/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/702/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/702/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/702", "id": 462441751, "node_id": "MDU6SXNzdWU0NjI0NDE3NTE=", "number": 702, "title": "trace/propagation/trace_context_http_header_format: crash when span_context doesn't have trace_options", "user": {"login": "odeke-em", "id": 4898263, "node_id": "MDQ6VXNlcjQ4OTgyNjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/4898263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odeke-em", "html_url": "https://github.com/odeke-em", "followers_url": "https://api.github.com/users/odeke-em/followers", "following_url": "https://api.github.com/users/odeke-em/following{/other_user}", "gists_url": "https://api.github.com/users/odeke-em/gists{/gist_id}", "starred_url": "https://api.github.com/users/odeke-em/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odeke-em/subscriptions", "organizations_url": "https://api.github.com/users/odeke-em/orgs", "repos_url": "https://api.github.com/users/odeke-em/repos", "events_url": "https://api.github.com/users/odeke-em/events{/privacy}", "received_events_url": "https://api.github.com/users/odeke-em/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-30T20:12:47Z", "updated_at": "2019-06-30T22:07:56Z", "closed_at": "2019-06-30T22:07:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://github.com/census-instrumentation/opencensus-python/blob/ed286275b8a854ca4b7cd496e789697d4422dfd9/opencensus/trace/propagation/trace_context_http_header_format.py#L98\r\n\r\ndereferences `span_context.trace_options.enabled` but when running my local tests in an unrelated project that uses OpenCensus-Python, I get\r\n```shell\r\n  File \"<REDACTED>/__init__.py\", line 70, in <REDACTED>\r\n    as_headers = w3C_trace_ctx.to_headers(span_ctx)\r\n  File \"<REDACTED>/.tox/py37-django21/lib/python3.7/site-packages/opencensus/trace/propagation/trace_context_http_header_format.py\", line 98, in to_headers\r\n    trace_options = span_context.trace_options.enabled\r\nAttributeError: 'Context' object has no attribute 'trace_options'\r\n```\r\n\r\nI think that perhaps we should make a fallback when trace_options is none i.e.\r\n```python\r\ntrace_options = span_context.trace_options.enabled if span_context.trace_options else None\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/695", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/695/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/695/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/695/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/695", "id": 460572532, "node_id": "MDU6SXNzdWU0NjA1NzI1MzI=", "number": 695, "title": "Implement \"out-of-the-box\" (OOTB) metrics for exporters", "user": {"login": "lzchen", "id": 11580155, "node_id": "MDQ6VXNlcjExNTgwMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/11580155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzchen", "html_url": "https://github.com/lzchen", "followers_url": "https://api.github.com/users/lzchen/followers", "following_url": "https://api.github.com/users/lzchen/following{/other_user}", "gists_url": "https://api.github.com/users/lzchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzchen/subscriptions", "organizations_url": "https://api.github.com/users/lzchen/orgs", "repos_url": "https://api.github.com/users/lzchen/repos", "events_url": "https://api.github.com/users/lzchen/events{/privacy}", "received_events_url": "https://api.github.com/users/lzchen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-25T18:23:08Z", "updated_at": "2019-08-30T22:25:15Z", "closed_at": "2019-08-30T22:25:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It will be valuable for users to automatically send \"out-of-the-box\" (OOTB) metrics easily as soon as they instrument their applications with a metrics exporter. The SDK can expose a simple way to turn these on. Necessary measures and views will be created automatically depending on the specific metric required.\r\n\r\nWe need to first define which OOTB metrics we are going to implement. IMO a good place to start would be with CPU related, memory related and requests related metrics. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/679", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/679/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/679/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/679/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/679", "id": 453253707, "node_id": "MDU6SXNzdWU0NTMyNTM3MDc=", "number": 679, "title": "Invalid point value type error. MeasureInts being silently converted to ValueDouble", "user": {"login": "mcnamam", "id": 6516287, "node_id": "MDQ6VXNlcjY1MTYyODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/6516287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcnamam", "html_url": "https://github.com/mcnamam", "followers_url": "https://api.github.com/users/mcnamam/followers", "following_url": "https://api.github.com/users/mcnamam/following{/other_user}", "gists_url": "https://api.github.com/users/mcnamam/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcnamam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcnamam/subscriptions", "organizations_url": "https://api.github.com/users/mcnamam/orgs", "repos_url": "https://api.github.com/users/mcnamam/repos", "events_url": "https://api.github.com/users/mcnamam/events{/privacy}", "received_events_url": "https://api.github.com/users/mcnamam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1079824889, "node_id": "MDU6TGFiZWwxMDc5ODI0ODg5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/metrics", "name": "metrics", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-06T21:51:16Z", "updated_at": "2019-07-17T22:49:24Z", "closed_at": "2019-07-17T22:49:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** Describe any aspect of your environment relevant to the problem, including your Python version, [platform]\r\nLinux, Python 2.7, opencensus 0.6.0, opencensus-ext-stackdriver 0.4.0\r\n\r\nI recently upgraded my opencensus client from 0.3.1 to 0.6.0 to get the fix for https://github.com/census-instrumentation/opencensus-python/issues/350\r\nNow I am encountering the following error when running my script that publishes metrics via opencensus:\r\nERROR:opencensus.metrics.transport:Error handling metric export\r\nTraceback (most recent call last):\r\n  File \"/python_venv/local/lib/python2.7/site-packages/opencensus/metrics/transport.py\", line 57, in func\r\n    return self.func(*aa, **kw)\r\n  File \"/python_venv/local/lib/python2.7/site-packages/opencensus/metrics/transport.py\", line 98, in export_all\r\n    export(get())\r\n  File \"/python_venv/local/lib/python2.7/site-packages/opencensus/ext/stackdriver/stats_exporter/__init__.py\", line 156, in export_metrics\r\n    metrics = list(metrics)\r\n  File \"/python_venv/local/lib/python2.7/site-packages/opencensus/stats/measure_to_view_map.py\", line 152, in get_metrics\r\n    metric = metric_utils.view_data_to_metric(vd, timestamp)\r\n  File \"/python_venv/local/lib/python2.7/site-packages/opencensus/stats/metric_utils.py\", line 132, in view_data_to_metric\r\n    return metric.Metric(md, ts_list)\r\n  File \"/python_venv/local/lib/python2.7/site-packages/opencensus/metrics/export/metric.py\", line 43, in __init__\r\n    self._check_type()\r\n  File \"/python_venv/local/lib/python2.7/site-packages/opencensus/metrics/export/metric.py\", line 69, in _check_type\r\n    raise ValueError(\"Invalid point value type\")\r\nValueError: Invalid point value type\r\n\r\nI added some print lines to metric.py to get a better idea of what type mismatch it was encountering and here's what I see:\r\nview bytes_avail_view has metric desc MetricDescriptor(name=\"bytes_avail_view\", description=\"bytes available under /storage across all hosts\", unit=By, type=ValueLong)\r\nts is TimeSeries([ValueDouble(1.22790525338e+12)], label_values=(), start_timestamp=2019-06-06T21:28:29.757175Z)\r\ncheck type is <class 'opencensus.metrics.export.value.ValueLong'>\r\n\r\nThis is my declaration for my bytes_avail measure and view:\r\nBYTES_AVAIL_MEASURE = measure.MeasureInt(\"bytes_avail\", \"number of bytes available under /storage\", Unit.BYTE)\r\nBYTES_AVAIL_VIEW = view.View('bytes_avail_view', \"bytes available under /storage across all hosts\", [], BYTES_AVAIL_MEASURE, aggregation.SumAggregation())\r\n\r\nIt seems that somewhere my measure is being converted to ValueDouble resulting in the type mismatch error. I've tried paring down my script to just publish this measure once like so \r\nmeasure_map.measure_int_put(BYTES_AVAIL_MEASURE, 1) \r\nand I still get this type mismatch error.\r\n\r\n**Steps to reproduce.**\r\nDeclare a MeasureInt using a sum aggregation (and maybe other types of aggregations) then try to publish it to Stackdriver.\r\n\r\n**What is the expected behavior?**\r\nNo error thrown, type should be ValueLong at all times\r\n\r\n**What is the actual behavior?**\r\nThe measure is being converted from ValueLong to ValueDouble at some point", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/677", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/677/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/677/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/677/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/677", "id": 452626832, "node_id": "MDU6SXNzdWU0NTI2MjY4MzI=", "number": 677, "title": "opencensus.ext.grpc has no \"trace\" module", "user": {"login": "allenjohnashton", "id": 558814, "node_id": "MDQ6VXNlcjU1ODgxNA==", "avatar_url": "https://avatars3.githubusercontent.com/u/558814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenjohnashton", "html_url": "https://github.com/allenjohnashton", "followers_url": "https://api.github.com/users/allenjohnashton/followers", "following_url": "https://api.github.com/users/allenjohnashton/following{/other_user}", "gists_url": "https://api.github.com/users/allenjohnashton/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenjohnashton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenjohnashton/subscriptions", "organizations_url": "https://api.github.com/users/allenjohnashton/orgs", "repos_url": "https://api.github.com/users/allenjohnashton/repos", "events_url": "https://api.github.com/users/allenjohnashton/events{/privacy}", "received_events_url": "https://api.github.com/users/allenjohnashton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1325516606, "node_id": "MDU6TGFiZWwxMzI1NTE2NjA2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P1", "name": "P1", "color": "d93f0b", "default": false, "description": ""}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1019875050, "node_id": "MDU6TGFiZWwxMDE5ODc1MDUw", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/docs", "name": "docs", "color": "85fcdc", "default": false, "description": ""}, {"id": 1134865059, "node_id": "MDU6TGFiZWwxMTM0ODY1MDU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/ext", "name": "ext", "color": "bfd4f2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-05T17:31:36Z", "updated_at": "2019-06-17T22:00:28Z", "closed_at": "2019-06-17T21:49:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** Python 2.7\r\n\r\n```  'opencensus==0.6.0' \\                                                                                                                                                                                                                                                              \r\n  'opencensus-ext-flask==0.3.1' \\                                                                                                                                                                                                                                                     \r\n  'opencensus-ext-gevent==0.1.0' \\                                                                                                                                                                                                                                                    \r\n  'opencensus-ext-google-cloud-clientlibs==0.1.2' \\                                                                                                                                                                                                                                   \r\n  'opencensus-ext-grpc==0.3.0' \\                                                                                                                                                                                                                                                      \r\n  'opencensus-ext-logging==0.1.0' \\                                                                                                                                                                                                                                                   \r\n  'opencensus-ext-postgresql==0.1.2' \\                                                                                                                                                                                                                                                \r\n  'opencensus-ext-stackdriver==0.4.0' \\                                                                                                                                                                                                                                               \r\n  'opencensus-ext-requests==0.1.2' \\                                                                                                                                                                                                                                                  \r\n  'opencensus-ext-sqlalchemy==0.1.2' \\                                                                                                                                                                                                                                                \r\n  'opencensus-ext-threading==0.1.2' \\  ```\r\n\r\n**Steps to reproduce.**\r\nFollow instructions for trace integration.\r\n\r\n**What is the expected behavior?**\r\nTrace integration working\r\n\r\n**What is the actual behavior?**\r\n trace_sampled=False Failed to integrate module: opencensus.ext.grpc.trace\r\nNo module named trace\r\n\r\n**Additional context.**\r\nLooking at other modules I see a trace.py.  Looks like grpc does not have one for now.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/675", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/675/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/675/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/675/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/675", "id": 451995611, "node_id": "MDU6SXNzdWU0NTE5OTU2MTE=", "number": 675, "title": "opencensus-ext-flask .30 no longer working with opencensus 0.6.0", "user": {"login": "allenjohnashton", "id": 558814, "node_id": "MDQ6VXNlcjU1ODgxNA==", "avatar_url": "https://avatars3.githubusercontent.com/u/558814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenjohnashton", "html_url": "https://github.com/allenjohnashton", "followers_url": "https://api.github.com/users/allenjohnashton/followers", "following_url": "https://api.github.com/users/allenjohnashton/following{/other_user}", "gists_url": "https://api.github.com/users/allenjohnashton/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenjohnashton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenjohnashton/subscriptions", "organizations_url": "https://api.github.com/users/allenjohnashton/orgs", "repos_url": "https://api.github.com/users/allenjohnashton/repos", "events_url": "https://api.github.com/users/allenjohnashton/events{/privacy}", "received_events_url": "https://api.github.com/users/allenjohnashton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1325516606, "node_id": "MDU6TGFiZWwxMzI1NTE2NjA2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P1", "name": "P1", "color": "d93f0b", "default": false, "description": ""}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-06-04T13:24:54Z", "updated_at": "2019-06-05T17:19:22Z", "closed_at": "2019-06-04T16:28:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.**\r\nPython 2.7\r\n```\r\nopencensus==0.6.0                                                                                                                                                                                                                                                                     \r\nopencensus-context==0.1.1                                                                                                                                                                                                                                                             \r\nopencensus-ext-flask==0.3.0                                                                                                                                                                                                                                                           \r\nopencensus-ext-gevent==0.1.0                                                                                                                                                                                                                                                          \r\nopencensus-ext-google-cloud-clientlibs==0.1.2                                                                                                                                                                                                                                         \r\nopencensus-ext-grpc==0.3.0                                                                                                                                                                                                                                                            \r\nopencensus-ext-logging==0.1.0                                                                                                                                                                                                                                                         \r\nopencensus-ext-postgresql==0.1.2                                                                                                                                                                                                                                                      \r\nopencensus-ext-requests==0.1.2                                                                                                                                                                                                                                                        \r\nopencensus-ext-sqlalchemy==0.1.2                                                                                                                                                                                                                                                      \r\nopencensus-ext-stackdriver==0.4.0                                                                                                                                                                                                                                                     \r\nopencensus-ext-threading==0.1.2  \r\n```\r\n**Steps to reproduce.**\r\n ```from opencensus.ext.flask.flask_middleware import FlaskMiddleware\r\n  File \"/usr/local/lib/python2.7/site-packages/opencensus/ext/flask/flask_middleware.py\", line 32, in <module>\r\n    from opencensus.trace.samplers import always_on\r\nImportError: cannot import name always_on```\r\n\r\n**What is the expected behavior?**\r\nImport works\r\n\r\n**What is the actual behavior?**\r\nImport Error\r\n\r\n**Additional context.**\r\nLooks like it just need to be released to Pypi.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/650", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/650/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/650/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/650/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/650", "id": 442432115, "node_id": "MDU6SXNzdWU0NDI0MzIxMTU=", "number": 650, "title": "Azure exporter examples are out of date ", "user": {"login": "lmolkova", "id": 2347409, "node_id": "MDQ6VXNlcjIzNDc0MDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2347409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmolkova", "html_url": "https://github.com/lmolkova", "followers_url": "https://api.github.com/users/lmolkova/followers", "following_url": "https://api.github.com/users/lmolkova/following{/other_user}", "gists_url": "https://api.github.com/users/lmolkova/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmolkova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmolkova/subscriptions", "organizations_url": "https://api.github.com/users/lmolkova/orgs", "repos_url": "https://api.github.com/users/lmolkova/repos", "events_url": "https://api.github.com/users/lmolkova/events{/privacy}", "received_events_url": "https://api.github.com/users/lmolkova/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-05-09T21:01:55Z", "updated_at": "2019-05-15T00:57:11Z", "closed_at": "2019-05-15T00:57:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "[Readme example](https://github.com/census-instrumentation/opencensus-python/blob/master/contrib/opencensus-ext-azure/README.rst#trace)\r\n\r\n```python\r\ntracer = Tracer(\r\n    exporter=AzureExporter(\r\n        # TODO: replace this with your own instrumentation key.\r\n        instrumentation_key='00000000-0000-0000-0000-000000000000',\r\n        timeout=29.9,\r\n    ),\r\n```\r\ndoes not compile\r\n\r\ninstrumentation_key should be set via options flag https://github.com/census-instrumentation/opencensus-python/blob/master/contrib/opencensus-ext-azure/opencensus/ext/azure/trace_exporter/__init__.py#L45\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/647", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/647/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/647/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/647/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/647", "id": 441687035, "node_id": "MDU6SXNzdWU0NDE2ODcwMzU=", "number": 647, "title": "k8s container attributes not included when exporting to Stackdriver", "user": {"login": "james-tisato-kortical", "id": 48439327, "node_id": "MDQ6VXNlcjQ4NDM5MzI3", "avatar_url": "https://avatars0.githubusercontent.com/u/48439327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/james-tisato-kortical", "html_url": "https://github.com/james-tisato-kortical", "followers_url": "https://api.github.com/users/james-tisato-kortical/followers", "following_url": "https://api.github.com/users/james-tisato-kortical/following{/other_user}", "gists_url": "https://api.github.com/users/james-tisato-kortical/gists{/gist_id}", "starred_url": "https://api.github.com/users/james-tisato-kortical/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/james-tisato-kortical/subscriptions", "organizations_url": "https://api.github.com/users/james-tisato-kortical/orgs", "repos_url": "https://api.github.com/users/james-tisato-kortical/repos", "events_url": "https://api.github.com/users/james-tisato-kortical/events{/privacy}", "received_events_url": "https://api.github.com/users/james-tisato-kortical/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1325516759, "node_id": "MDU6TGFiZWwxMzI1NTE2NzU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P2", "name": "P2", "color": "e99695", "default": false, "description": ""}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1088008016, "node_id": "MDU6TGFiZWwxMDg4MDA4MDE2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/exporters", "name": "exporters", "color": "418ac6", "default": false, "description": ""}, {"id": 1134865059, "node_id": "MDU6TGFiZWwxMTM0ODY1MDU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/ext", "name": "ext", "color": "bfd4f2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-05-08T11:27:50Z", "updated_at": "2019-09-27T17:45:39Z", "closed_at": "2019-05-16T20:32:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe your environment.** \r\n- Python 3.6.7, opencensus 0.5.0, opencensus-ext-stackdriver 0.3.0\r\n- Instrumenting code running in a GKE Kubernetes cluster\r\n\r\n**Steps to reproduce.**\r\nExecute any tracing or stats collection code that exports to Stackdriver - the k8s metadata attributes will be missing from the results.\r\n\r\n**What is the expected behavior?**\r\nResults exported to Stackdriver should have associated attribute labels for project id, cluster name, pod name etc.\r\n\r\n**What is the actual behavior?**\r\nAll k8s attributes are missing from the results I see in Stackdriver.\r\n\r\n**Additional context.**\r\nI think there is a bug in `contrib/opencensus-ext-stackdriver/opencensus/ext/stackdriver/trace_exporter/__init__.py` within `set_monitored_resource_attributes`:\r\n```py\r\ndef set_monitored_resource_attributes(span):\r\n    \"\"\"Set labels to span that can be used for tracing.\r\n    :param span: Span object\r\n    \"\"\"\r\n    resource = monitored_resource.get_instance()\r\n    if resource is not None:\r\n        resource_type = resource.get_type()\r\n        resource_labels = resource.get_labels()\r\n\r\n        if resource_type == 'gke_container':\r\n            resource_type = 'k8s_container'\r\n            ...\r\n```\r\nThis code is still checking for resources of type `gke_container`, whereas `opencensus/common/monitored_resource/monitored_resource.py` now uses `k8s_container` when populating the resources to be automatically added to the Stackdriver results. Therefore, the above if block is entirely skipped and no k8s attributes are included.\r\n\r\nThe same bug appears to be present in the equivalent file for Stackdriver stats exporting (`gke_container` is also present there).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/645", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/645/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/645/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/645/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/645", "id": 440853396, "node_id": "MDU6SXNzdWU0NDA4NTMzOTY=", "number": 645, "title": "Enable Threading integration ", "user": {"login": "kiarashplusplus", "id": 1780945, "node_id": "MDQ6VXNlcjE3ODA5NDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1780945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kiarashplusplus", "html_url": "https://github.com/kiarashplusplus", "followers_url": "https://api.github.com/users/kiarashplusplus/followers", "following_url": "https://api.github.com/users/kiarashplusplus/following{/other_user}", "gists_url": "https://api.github.com/users/kiarashplusplus/gists{/gist_id}", "starred_url": "https://api.github.com/users/kiarashplusplus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kiarashplusplus/subscriptions", "organizations_url": "https://api.github.com/users/kiarashplusplus/orgs", "repos_url": "https://api.github.com/users/kiarashplusplus/repos", "events_url": "https://api.github.com/users/kiarashplusplus/events{/privacy}", "received_events_url": "https://api.github.com/users/kiarashplusplus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-06T19:37:24Z", "updated_at": "2019-05-06T20:02:00Z", "closed_at": "2019-05-06T20:02:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "The documentation says 'threading' integration is supported but it's not in 0.1.4.\r\n\r\nWARNING:opencensus.trace.config_integration:Failed to integrate module: threading, supported integrations are httplib, mysql, postgresql, pymysql, requests, sqlalchemy, google_cloud_clientlibs\r\n\r\nhttps://github.com/census-instrumentation/opencensus-python/tree/master/contrib/opencensus-ext-threading\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/628", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/628/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/628/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/628/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/628", "id": 436043167, "node_id": "MDU6SXNzdWU0MzYwNDMxNjc=", "number": 628, "title": "Not compatible with gevent", "user": {"login": "aberres", "id": 20811121, "node_id": "MDQ6VXNlcjIwODExMTIx", "avatar_url": "https://avatars1.githubusercontent.com/u/20811121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aberres", "html_url": "https://github.com/aberres", "followers_url": "https://api.github.com/users/aberres/followers", "following_url": "https://api.github.com/users/aberres/following{/other_user}", "gists_url": "https://api.github.com/users/aberres/gists{/gist_id}", "starred_url": "https://api.github.com/users/aberres/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aberres/subscriptions", "organizations_url": "https://api.github.com/users/aberres/orgs", "repos_url": "https://api.github.com/users/aberres/repos", "events_url": "https://api.github.com/users/aberres/events{/privacy}", "received_events_url": "https://api.github.com/users/aberres/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1325516759, "node_id": "MDU6TGFiZWwxMzI1NTE2NzU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P2", "name": "P2", "color": "e99695", "default": false, "description": ""}, {"id": 642440894, "node_id": "MDU6TGFiZWw2NDI0NDA4OTQ=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-04-23T07:40:25Z", "updated_at": "2020-01-29T05:42:44Z", "closed_at": "2019-05-03T18:54:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Depending on the availability of the `contextvars` module either a `_ThreadLocalRuntimeContext` or a `_AsyncRuntimeContext` is created. The former uses `threading.local` while the latter uses `contextvars.ContextVar` to store data.\r\n\r\n[gevent](http://www.gevent.org/) only supports `threading.local` properly. The contexts are not switched when `contextvars.ContextVar` is used. This results in side effects when requests are executed in parallel.\r\n\r\nAn extended writeup can be found in this issue: https://github.com/elastic/apm-agent-python/issues/451\r\n\r\nA solution to this problem is to try to detect if running under gevent and then using `_ThreadLocalRuntimeContext` even if `contextvars` are available. An implementation could be heavily inspired by this one: https://github.com/elastic/apm-agent-python/commit/090b938c967469d5833cf41b13b1aba1a2b72464", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/609", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/609/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/609/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/609/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/609", "id": 431092311, "node_id": "MDU6SXNzdWU0MzEwOTIzMTE=", "number": 609, "title": "Override default Stackdriver monitoring labels", "user": {"login": "mcnamam", "id": 6516287, "node_id": "MDQ6VXNlcjY1MTYyODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/6516287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcnamam", "html_url": "https://github.com/mcnamam", "followers_url": "https://api.github.com/users/mcnamam/followers", "following_url": "https://api.github.com/users/mcnamam/following{/other_user}", "gists_url": "https://api.github.com/users/mcnamam/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcnamam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcnamam/subscriptions", "organizations_url": "https://api.github.com/users/mcnamam/orgs", "repos_url": "https://api.github.com/users/mcnamam/repos", "events_url": "https://api.github.com/users/mcnamam/events{/privacy}", "received_events_url": "https://api.github.com/users/mcnamam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-09T17:38:23Z", "updated_at": "2019-04-17T01:40:06Z", "closed_at": "2019-04-17T01:40:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to override the default labels published to Stackdriver. \r\nIn StackdriverStatsExporter, the exporter is initialized with Options including ``defaut_monitoring_labels``. The comments for this option say: ``\r\nIf unset, this defaults to a single label with key \"opencensus_task\" and value \"py-<pid>@<hostname>\".``\r\nLater on in the function ``new_label_descriptors``, it appears that it always adds in the ``opencensus_task`` info to the label descriptors even if ``defaut_monitoring_labels`` is set:\r\n```python\r\ndef new_label_descriptors(defaults, keys):\r\n    \"\"\" create labels for the metric_descriptor\r\n        that will be sent to Stackdriver Monitoring\r\n    \"\"\"\r\n    label_descriptors = []\r\n    for key, lbl in defaults.items():\r\n        label = {}\r\n        label[\"key\"] = sanitize_label(key)\r\n        label[\"description\"] = lbl\r\n        label_descriptors.append(label)\r\n\r\n    for label_key in keys:\r\n        label = {}\r\n        label[\"key\"] = sanitize_label(label_key.key)\r\n        label[\"description\"] = sanitize_label(label_key.description)\r\n        label_descriptors.append(label)\r\n    label_descriptors.append({\"key\": OPENCENSUS_TASK,\r\n                              \"description\": OPENCENSUS_TASK_DESCRIPTION})\r\n    return label_descriptors\r\n```\r\nThis function is called with the defaults set to default_monitoring_labels option:\r\n```python\r\n    default_labels = self.options.default_monitoring_labels\r\n    if default_labels is None:\r\n        default_labels = {}\r\n    desc_labels = new_label_descriptors(default_labels, oc_md.label_keys)\r\n```\r\nAm I misunderstanding this or is this the desired behavior? Overall I am just looking for a way to avoid publishing a label to Stackdriver with potential for very high cardinality", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/608", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/608/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/608/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/608/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/608", "id": 430732902, "node_id": "MDU6SXNzdWU0MzA3MzI5MDI=", "number": 608, "title": "Add usage examples for ext packages", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1019875050, "node_id": "MDU6TGFiZWwxMDE5ODc1MDUw", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/docs", "name": "docs", "color": "85fcdc", "default": false, "description": ""}, {"id": 642440895, "node_id": "MDU6TGFiZWw2NDI0NDA4OTU=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/up-for-grabs", "name": "up-for-grabs", "color": "128A0C", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-09T02:07:17Z", "updated_at": "2019-04-22T19:30:09Z", "closed_at": "2019-04-22T19:30:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "With the [move to separate distributions for ext packages](https://github.com/census-instrumentation/opencensus-python/issues/445), many of our packages have \"TBD\" in their README files. See e.g. https://pypi.org/project/opencensus-ext-zipkin/.\r\n\r\n@reyang added some docs in #541. This issue is for the rest of the packages.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/600", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/600/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/600/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/600/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/600", "id": 428939810, "node_id": "MDU6SXNzdWU0Mjg5Mzk4MTA=", "number": 600, "title": "Update register views to suppress errors and not block.", "user": {"login": "prateekr", "id": 1359273, "node_id": "MDQ6VXNlcjEzNTkyNzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1359273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prateekr", "html_url": "https://github.com/prateekr", "followers_url": "https://api.github.com/users/prateekr/followers", "following_url": "https://api.github.com/users/prateekr/following{/other_user}", "gists_url": "https://api.github.com/users/prateekr/gists{/gist_id}", "starred_url": "https://api.github.com/users/prateekr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prateekr/subscriptions", "organizations_url": "https://api.github.com/users/prateekr/orgs", "repos_url": "https://api.github.com/users/prateekr/repos", "events_url": "https://api.github.com/users/prateekr/events{/privacy}", "received_events_url": "https://api.github.com/users/prateekr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1088008016, "node_id": "MDU6TGFiZWwxMDg4MDA4MDE2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/exporters", "name": "exporters", "color": "418ac6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-03T19:37:52Z", "updated_at": "2019-04-03T21:50:13Z", "closed_at": "2019-04-03T21:50:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "version=0.3.1\r\n\r\nAt the moment, even though Stackdriver is initialized with its default async transport:\r\nhttps://github.com/census-instrumentation/opencensus-python/blob/bebc50846934f93d33ef53896989e576ff73b638/opencensus/stats/exporters/stackdriver_exporter.py#L113-L124\r\n\r\nthe `view_manager.register_view` is synchronous and is not resilient to errors.  When stackdriver was momentarily down, our service failed to initialize with the following exception:\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/opencensus/stats/view_manager.py\", line 37, in register_view\r\n    self.measure_to_view_map.register_view(view=view, timestamp=self.time)\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/opencensus/stats/measure_to_view_map.py\", line 80, in register_view\r\n    e.on_register_view(view)\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/opencensus/stats/exporters/stackdriver_exporter.py\", line 148, in on_register_view\r\n    self.create_metric_descriptor(view)\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/opencensus/stats/exporters/stackdriver_exporter.py\", line 335, in create_metric_descriptor\r\n    descriptor = client.create_metric_descriptor(project_name, descriptor)\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/google/cloud/monitoring_v3/gapic/metric_service_client.py\", line 622, in create_metric_descriptor\r\n    request, retry=retry, timeout=timeout, metadata=metadata\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/google/api_core/gapic_v1/method.py\", line 143, in __call__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/google/api_core/retry.py\", line 270, in retry_wrapped_func\r\n    on_error=on_error,\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/google/api_core/retry.py\", line 179, in retry_target\r\n    return target()\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/google/api_core/timeout.py\", line 214, in func_with_timeout\r\n    return func(*args, **kwargs)\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/google/api_core/grpc_helpers.py\", line 59, in error_remapped_callable\r\n    six.raise_from(exceptions.from_grpc_error(exc), exc)\r\n  File \"/home/dropcam/labs/python/lib/python2.7/site-packages/six.py\", line 737, in raise_from\r\n    raise value\r\ngoogle.api_core.exceptions.ServiceUnavailable: 503 Deadline Exceeded\r\n```\r\n\r\nSimilar to the Java version and the python create time series export(https://github.com/census-instrumentation/opencensus-python/pull/297) , I'd expect the register_views call to not block and to suppress all errors with a log statement to record it happened.\r\n\r\nhttps://github.com/census-instrumentation/opencensus-java/blob/538d77e4eeb18df592b04f794a400e981bb1b649/exporters/stats/stackdriver/src/main/java/io/opencensus/exporter/stats/stackdriver/CreateMetricDescriptorExporter.java#L129-L149\r\nThe java stackdriver exporter maintains a map of all seen descriptors and will attempt to create a descriptor only when it receives a create time series request for a new descriptor.  I.e. it doesn't create the descriptor on the register view call.  This has several advantages:\r\n\r\n1. Cheap initialization\r\n2. Smoother request rate across the fleet (it's more randomized as it happens on the first request/instance of an event rather than at service boot time)\r\n\r\nWe have thousands of servers and there are situations (AZ failures, bad kernel update, etc) we have to restart a couple hundred at once.  This is a risk here that we blow our create metric descriptor quota and fail to initialize opencensus appropriately, making points 1 and 2 important\r\n\r\n3. Easier in large code bases.  Right now, my understanding is that all exporters need to be initialized before any view is registered.  It can become a bit painful to ensure the setup procedure is strictly followed.\r\n4. Alignment with opencensus-java reducing the required context for teams operating in a multi-service/multi-language world.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/597", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/597/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/597/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/597/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/597", "id": 428490340, "node_id": "MDU6SXNzdWU0Mjg0OTAzNDA=", "number": 597, "title": "Release stackdriver stats and context changes", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1196594386, "node_id": "MDU6TGFiZWwxMTk2NTk0Mzg2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/GA-Effort", "name": "GA-Effort", "color": "4ebadb", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-04-02T23:27:35Z", "updated_at": "2019-04-09T22:12:17Z", "closed_at": "2019-04-09T22:12:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We've got two large breaking unreleased changes on master: making the stackdriver stats exporter consume stats as metrics (#593) and adding a context API that replaces threadlocals with contextvars on recent python versions (#588).\r\n\r\nWe'll have to release versions `0.4.0` of the core library, `0.3.0` of `opencensus-ext-stackdriver`, and `0.1.0` of `opencensus-context`. We can continue to release ext packages from the same release branch as the main library (in this case the new `v0.4.x` branch), or start using separate release branches for each package.\r\n\r\ncc @reyang ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/590", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/590/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/590/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/590/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/590", "id": 427564664, "node_id": "MDU6SXNzdWU0Mjc1NjQ2NjQ=", "number": 590, "title": "Memory increase due to too many traces", "user": {"login": "ChrisTerBeke", "id": 1134120, "node_id": "MDQ6VXNlcjExMzQxMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1134120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisTerBeke", "html_url": "https://github.com/ChrisTerBeke", "followers_url": "https://api.github.com/users/ChrisTerBeke/followers", "following_url": "https://api.github.com/users/ChrisTerBeke/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisTerBeke/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisTerBeke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisTerBeke/subscriptions", "organizations_url": "https://api.github.com/users/ChrisTerBeke/orgs", "repos_url": "https://api.github.com/users/ChrisTerBeke/repos", "events_url": "https://api.github.com/users/ChrisTerBeke/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisTerBeke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1088008016, "node_id": "MDU6TGFiZWwxMDg4MDA4MDE2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/exporters", "name": "exporters", "color": "418ac6", "default": false, "description": ""}, {"id": 1079824889, "node_id": "MDU6TGFiZWwxMDc5ODI0ODg5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/metrics", "name": "metrics", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-01T08:02:42Z", "updated_at": "2019-05-02T20:25:35Z", "closed_at": "2019-05-02T20:24:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nWe're using this lib in several APIs running on GKE and using StackDriver. We noticed that when sending all traces to StackDriver, the amount of traces collected grows faster than the amount that can be exported to StackDriver. Because of this, a list containing all trace spans that still need to be sent grows over time, to the point where Kubernetes kills our pod because it uses too much memory.\r\n\r\nWhile this is expected behavior from the current code, I wonder if there would be a cleaner way to do this. For example by dropping the spans when the list reaches a maximum and then logging a warning or error? This will prevent apps from 'leaking' memory.\r\n\r\nWhat are your thoughts about this?\r\n\r\np.s. this is probably the same as reported on https://github.com/census-instrumentation/opencensus-python/issues/334, but it's not really resolved there.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/586", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/586/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/586/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/586/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/586", "id": 426224333, "node_id": "MDU6SXNzdWU0MjYyMjQzMzM=", "number": 586, "title": "Metrics: Add Cumulative APIs", "user": {"login": "mayurkale22", "id": 6525361, "node_id": "MDQ6VXNlcjY1MjUzNjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/6525361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mayurkale22", "html_url": "https://github.com/mayurkale22", "followers_url": "https://api.github.com/users/mayurkale22/followers", "following_url": "https://api.github.com/users/mayurkale22/following{/other_user}", "gists_url": "https://api.github.com/users/mayurkale22/gists{/gist_id}", "starred_url": "https://api.github.com/users/mayurkale22/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mayurkale22/subscriptions", "organizations_url": "https://api.github.com/users/mayurkale22/orgs", "repos_url": "https://api.github.com/users/mayurkale22/repos", "events_url": "https://api.github.com/users/mayurkale22/events{/privacy}", "received_events_url": "https://api.github.com/users/mayurkale22/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1196594386, "node_id": "MDU6TGFiZWwxMTk2NTk0Mzg2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/GA-Effort", "name": "GA-Effort", "color": "4ebadb", "default": false, "description": ""}, {"id": 1325516606, "node_id": "MDU6TGFiZWwxMzI1NTE2NjA2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P1", "name": "P1", "color": "d93f0b", "default": false, "description": ""}, {"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-27T23:17:36Z", "updated_at": "2019-04-23T19:50:57Z", "closed_at": "2019-04-23T19:50:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Specs tracking issue: census-instrumentation/opencensus-specs#241.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/584", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/584/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/584/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/584/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/584", "id": 426197564, "node_id": "MDU6SXNzdWU0MjYxOTc1NjQ=", "number": 584, "title": "Adjust ViewData end_time breaks Stackdriver stats export", "user": {"login": "rsalmond", "id": 4367945, "node_id": "MDQ6VXNlcjQzNjc5NDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4367945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsalmond", "html_url": "https://github.com/rsalmond", "followers_url": "https://api.github.com/users/rsalmond/followers", "following_url": "https://api.github.com/users/rsalmond/following{/other_user}", "gists_url": "https://api.github.com/users/rsalmond/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsalmond/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsalmond/subscriptions", "organizations_url": "https://api.github.com/users/rsalmond/orgs", "repos_url": "https://api.github.com/users/rsalmond/repos", "events_url": "https://api.github.com/users/rsalmond/events{/privacy}", "received_events_url": "https://api.github.com/users/rsalmond/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1088008016, "node_id": "MDU6TGFiZWwxMDg4MDA4MDE2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/exporters", "name": "exporters", "color": "418ac6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-03-27T21:44:50Z", "updated_at": "2019-03-28T01:28:12Z", "closed_at": "2019-03-28T01:28:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Getting this exception while trying to export metrics to stackdriver.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/google/api_core/grpc_helpers.py\", line 57, in error_remapped_callable\r\n    return callable_(*args, **kwargs)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/grpc/_channel.py\", line 549, in __call__\r\n    return _end_unary_response_blocking(state, call, False, None)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/grpc/_channel.py\", line 466, in _end_unary_response_blocking\r\n    raise _Rendezvous(state, None, None, deadline)\r\ngrpc._channel._Rendezvous: <_Rendezvous of RPC that terminated with:\r\n        status = StatusCode.INVALID_ARGUMENT\r\n        details = \"Field timeSeries[0].points[0].interval.start had an invalid value of \"2019-03-27T14:35:55.669958-07:00\": The start time must be equal to the end time (2019-03-27T14:37:33.72174-07:00) for the gauge metric 'custom.googleapis.com/opencensus/rsatesting_agglast/request_count'.\"\r\n        debug_error_string = \"{\"created\":\"@1553722655.800461000\",\"description\":\"Error received from peer\",\"file\":\"src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"Field timeSeries[0].points[0].interval.start had an invalid value of \"2019-03-27T14:35:55.669958-07:00\": The start time must be equal to the end time (2019-03-27T14:37:33.72174-07:00) for the gauge metric 'custom.googleapis.com/opencensus/rsatesting_agglast/request_count'.\",\"grpc_status\":3}\"\r\n>\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"bunk.py\", line 5, in <module>\r\n    bunk.record(1, {'http_verb': 'GET', 'response_code': '200'})\r\n  File \"/Users/rsa/dev/metrics/metrics.py\", line 114, in record\r\n    mm.record(tagmap)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/opencensus/stats/measurement_map.py\", line 118, in record\r\n    attachments=self.attachments\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/opencensus/stats/measure_to_view_map.py\", line 123, in record\r\n    self.export(view_datas)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/opencensus/stats/measure_to_view_map.py\", line 134, in export\r\n    e.export(view_datas_copy)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/opencensus/ext/stackdriver/stats_exporter/__init__.py\", line 158, in export\r\n    self.transport.export(view_data)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/opencensus/common/transports/sync.py\", line 23, in export\r\n    self.exporter.emit(datas)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/opencensus/ext/stackdriver/stats_exporter/__init__.py\", line 153, in emit\r\n    self.handle_upload(view_data)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/opencensus/ext/stackdriver/stats_exporter/__init__.py\", line 165, in handle_upload\r\n    self.upload_stats(view_data)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/opencensus/ext/stackdriver/stats_exporter/__init__.py\", line 177, in upload_stats\r\n    time_series_batch)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/google/cloud/monitoring_v3/gapic/metric_service_client.py\", line 897, in create_time_series\r\n    request, retry=retry, timeout=timeout, metadata=metadata\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/google/api_core/gapic_v1/method.py\", line 143, in __call__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/google/api_core/retry.py\", line 270, in retry_wrapped_func\r\n    on_error=on_error,\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/google/api_core/retry.py\", line 179, in retry_target\r\n    return target()\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/google/api_core/timeout.py\", line 214, in func_with_timeout\r\n    return func(*args, **kwargs)\r\n  File \"/Users/rsa/dev/metrics/.venv/lib/python3.7/site-packages/google/api_core/grpc_helpers.py\", line 59, in error_remapped_callable\r\n    six.raise_from(exceptions.from_grpc_error(exc), exc)\r\n  File \"<string>\", line 3, in raise_from\r\ngoogle.api_core.exceptions.InvalidArgument: 400 Field timeSeries[0].points[0].interval.start had an invalid value of \"2019-03-27T14:35:55.669958-07:00\": The start time must be equal to the end time (2019-03-27T14:37:33.72174-07:00) for the gauge metric 'custom.googleapis.com/opencensus/rsatesting_agglast/request_count'.\r\n```\r\n\r\nI have tracked it down to the [end method](https://github.com/census-instrumentation/opencensus-python/blob/master/opencensus/stats/view_data.py#L68) being called on the ViewData during [this copy operation](https://github.com/census-instrumentation/opencensus-python/blob/master/opencensus/stats/measure_to_view_map.py#L152).\r\n\r\nWhen I comment out the call to that method my metrics are emitted successfully.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/583", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/583/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/583/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/583/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/583", "id": 426092924, "node_id": "MDU6SXNzdWU0MjYwOTI5MjQ=", "number": 583, "title": "400 Errors From Stackdriver Stats Exporter ", "user": {"login": "samn", "id": 174850, "node_id": "MDQ6VXNlcjE3NDg1MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/174850?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samn", "html_url": "https://github.com/samn", "followers_url": "https://api.github.com/users/samn/followers", "following_url": "https://api.github.com/users/samn/following{/other_user}", "gists_url": "https://api.github.com/users/samn/gists{/gist_id}", "starred_url": "https://api.github.com/users/samn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samn/subscriptions", "organizations_url": "https://api.github.com/users/samn/orgs", "repos_url": "https://api.github.com/users/samn/repos", "events_url": "https://api.github.com/users/samn/events{/privacy}", "received_events_url": "https://api.github.com/users/samn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1088008016, "node_id": "MDU6TGFiZWwxMDg4MDA4MDE2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/exporters", "name": "exporters", "color": "418ac6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-27T17:30:09Z", "updated_at": "2019-04-02T23:14:51Z", "closed_at": "2019-04-02T23:14:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Running the [opencensus-ext-stackdriver example](https://github.com/census-instrumentation/opencensus-python/blob/49e4cb30414295f04980f96a565e9f234c96cce6/contrib/opencensus-ext-stackdriver/examples/stackdriver.py) results in errors when writing timeseries to Stackdriver. I was able to reproduce this in a fresh venv even when recording only two metrics.\r\n\r\nEnvironment:\r\n```\r\nPython 3.6\r\n$ pip freeze\r\ncachetools==3.1.0\r\ncertifi==2019.3.9\r\nchardet==3.0.4\r\ngoogle-api-core==1.8.2\r\ngoogle-auth==1.6.3\r\ngoogle-cloud-core==0.29.1\r\ngoogle-cloud-monitoring==0.31.1\r\ngoogle-cloud-trace==0.20.2\r\ngoogleapis-common-protos==1.5.9\r\ngrpcio==1.19.0\r\nidna==2.8\r\nopencensus==0.3.1\r\nopencensus-ext-stackdriver==0.1.1\r\nprotobuf==3.7.1\r\npyasn1==0.4.5\r\npyasn1-modules==0.2.4\r\npytz==2018.9\r\nrequests==2.21.0\r\nrsa==4.0\r\nsix==1.12.0\r\nurllib3==1.24.1\r\n```\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \".venv/lib/python3.6/site-packages/opencensus/common/transports/async_.py\", line 105, in _thread_main\r\n    self.exporter.emit(data)\r\n  File \".venv/lib/python3.6/site-packages/opencensus/ext/stackdriver/stats_exporter/__init__.py\", line 153, in emit\r\n    self.handle_upload(view_data)\r\n  File \".venv/lib/python3.6/site-packages/opencensus/ext/stackdriver/stats_exporter/__init__.py\", line 165, in handle_upload\r\n    self.upload_stats(view_data)\r\n  File \".venv/lib/python3.6/site-packages/opencensus/ext/stackdriver/stats_exporter/__init__.py\", line 177, in upload_stats\r\n    time_series_batch)\r\n  File \".venv/lib/python3.6/site-packages/google/cloud/monitoring_v3/gapic/metric_service_client.py\", line 897, in create_time_series\r\n    request, retry=retry, timeout=timeout, metadata=metadata\r\n  File \".venv/lib/python3.6/site-packages/google/api_core/gapic_v1/method.py\", line 143, in __call__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \".venv/lib/python3.6/site-packages/google/api_core/retry.py\", line 270, in retry_wrapped_func\r\n    on_error=on_error,\r\n  File \".venv/lib/python3.6/site-packages/google/api_core/retry.py\", line 179, in retry_target\r\n    return target()\r\n  File \".venv/lib/python3.6/site-packages/google/api_core/timeout.py\", line 214, in func_with_timeout\r\n    return func(*args, **kwargs)\r\n  File \".venv/lib/python3.6/site-packages/google/api_core/grpc_helpers.py\", line 59, in error_remapped_callable\r\n    six.raise_from(exceptions.from_grpc_error(exc), exc)\r\n  File \"<string>\", line 3, in raise_from\r\ngoogle.api_core.exceptions.InvalidArgument: 400 One or more TimeSeries could not be written: One or more points were written more frequently than the maximum sampling period configured for the metric. {Metric: custom.googleapis.com/opencensus/task_latency_distribution, Timestamps: {Youngest Existing: '2019/03/27-10:27:48.522', New: '2019/03/27-10:27:49.523'}}: timeSeries[0]\r\n```\r\n\r\nDo you have any advice on how to proceed? Thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/580", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/580/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/580/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/580/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/580", "id": 425577438, "node_id": "MDU6SXNzdWU0MjU1Nzc0Mzg=", "number": 580, "title": "Stats exporter missing from stackdriver-ext 0.1.0 release", "user": {"login": "rsalmond", "id": 4367945, "node_id": "MDQ6VXNlcjQzNjc5NDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4367945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsalmond", "html_url": "https://github.com/rsalmond", "followers_url": "https://api.github.com/users/rsalmond/followers", "following_url": "https://api.github.com/users/rsalmond/following{/other_user}", "gists_url": "https://api.github.com/users/rsalmond/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsalmond/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsalmond/subscriptions", "organizations_url": "https://api.github.com/users/rsalmond/orgs", "repos_url": "https://api.github.com/users/rsalmond/repos", "events_url": "https://api.github.com/users/rsalmond/events{/privacy}", "received_events_url": "https://api.github.com/users/rsalmond/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1088008016, "node_id": "MDU6TGFiZWwxMDg4MDA4MDE2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/exporters", "name": "exporters", "color": "418ac6", "default": false, "description": ""}, {"id": 1134865059, "node_id": "MDU6TGFiZWwxMTM0ODY1MDU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/ext", "name": "ext", "color": "bfd4f2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-03-26T18:19:34Z", "updated_at": "2019-03-27T20:18:09Z", "closed_at": "2019-03-27T20:18:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It looks like the stats exporter didn't make it into the release.\r\n\r\n```\r\n(.venv) pip freeze\r\ncachetools==3.1.0\r\ncertifi==2019.3.9\r\nchardet==3.0.4\r\ngoogle-api-core==1.8.2\r\ngoogle-auth==1.6.3\r\ngoogle-cloud-core==0.29.1\r\ngoogle-cloud-monitoring==0.31.1\r\ngoogle-cloud-trace==0.20.2\r\ngoogleapis-common-protos==1.5.9\r\ngrpcio==1.19.0\r\nidna==2.8\r\nopencensus==0.3.1\r\nopencensus-ext-stackdriver==0.1.0\r\nprotobuf==3.7.0\r\npyasn1==0.4.5\r\npyasn1-modules==0.2.4\r\npytz==2018.9\r\nrequests==2.21.0\r\nrsa==4.0\r\nsix==1.12.0\r\nurllib3==1.24.1\r\n\r\n(.venv)  python\r\nPython 3.7.2 (default, Feb 12 2019, 08:16:38)\r\n[Clang 10.0.0 (clang-1000.11.45.5)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from opencensus.ext.stackdriver import stats_exporter as stackdriver\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nImportError: cannot import name 'stats_exporter' from 'opencensus.ext.stackdriver' \r\n(/.venv/lib/python3.7/site-packages/opencensus/ext/stackdriver/__init__.py)\r\n>>>\r\n\r\n(.venv)  ls -al /.venv/lib/python3.7/site-packages/opencensus/ext/stackdriver/\r\ntotal 8\r\ndrwxr-xr-x  5 rsa  staff  160 Mar 26 11:49 .\r\ndrwxr-xr-x  5 rsa  staff  160 Mar 26 11:49 ..\r\n-rw-r--r--  1 rsa  staff   65 Mar 26 11:49 __init__.py\r\ndrwxr-xr-x  3 rsa  staff   96 Mar 26 11:49 __pycache__\r\ndrwxr-xr-x  4 rsa  staff  128 Mar 26 11:49 trace_exporter\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/578", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/578/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/578/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/578/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/578", "id": 425273967, "node_id": "MDU6SXNzdWU0MjUyNzM5Njc=", "number": 578, "title": "wrong import for stackdriver stats exporter in readme.rst", "user": {"login": "yoavMoon", "id": 36665648, "node_id": "MDQ6VXNlcjM2NjY1NjQ4", "avatar_url": "https://avatars3.githubusercontent.com/u/36665648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yoavMoon", "html_url": "https://github.com/yoavMoon", "followers_url": "https://api.github.com/users/yoavMoon/followers", "following_url": "https://api.github.com/users/yoavMoon/following{/other_user}", "gists_url": "https://api.github.com/users/yoavMoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yoavMoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yoavMoon/subscriptions", "organizations_url": "https://api.github.com/users/yoavMoon/orgs", "repos_url": "https://api.github.com/users/yoavMoon/repos", "events_url": "https://api.github.com/users/yoavMoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yoavMoon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-26T08:00:13Z", "updated_at": "2019-03-26T18:16:23Z", "closed_at": "2019-03-26T18:10:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Wrong import in the readme example.\r\nIn opencensus-python/contrib/opencensus-ext-stackdriver/readme.rst importing stackdriver stats exporter should be:\r\n\r\nfrom opencensus.stats.exporters import stackdriver_exporter as stackdriver", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/565", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/565/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/565/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/565/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/565", "id": 422983520, "node_id": "MDU6SXNzdWU0MjI5ODM1MjA=", "number": 565, "title": "Support int export for sum and lastvalue aggregations", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1196594386, "node_id": "MDU6TGFiZWwxMTk2NTk0Mzg2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/GA-Effort", "name": "GA-Effort", "color": "4ebadb", "default": false, "description": ""}, {"id": 1325516606, "node_id": "MDU6TGFiZWwxMzI1NTE2NjA2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P1", "name": "P1", "color": "d93f0b", "default": false, "description": ""}, {"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}, {"id": 1079824889, "node_id": "MDU6TGFiZWwxMDc5ODI0ODg5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/metrics", "name": "metrics", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-03-19T22:31:20Z", "updated_at": "2019-07-20T10:06:45Z", "closed_at": "2019-07-17T22:45:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`LastValueAggregationData` and `SumAggregationDataFloat` are always converted to a float-valued metrics. This makes metric conversion impossible for views with `MeasureInt` measures.\r\n\r\nThe java client uses multiple classes (e.g. [`MutableSumLong` and `MutableSumDouble`](https://github.com/c24t/opencensus-java/blob/master/impl_core/src/main/java/io/opencensus/implcore/stats/MutableAggregation.java)) to solve this problem.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/561", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/561/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/561/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/561/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/561", "id": 422797256, "node_id": "MDU6SXNzdWU0MjI3OTcyNTY=", "number": 561, "title": "Python stackdriver_exporter missing", "user": {"login": "zdenulo", "id": 1787723, "node_id": "MDQ6VXNlcjE3ODc3MjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/1787723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zdenulo", "html_url": "https://github.com/zdenulo", "followers_url": "https://api.github.com/users/zdenulo/followers", "following_url": "https://api.github.com/users/zdenulo/following{/other_user}", "gists_url": "https://api.github.com/users/zdenulo/gists{/gist_id}", "starred_url": "https://api.github.com/users/zdenulo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zdenulo/subscriptions", "organizations_url": "https://api.github.com/users/zdenulo/orgs", "repos_url": "https://api.github.com/users/zdenulo/repos", "events_url": "https://api.github.com/users/zdenulo/events{/privacy}", "received_events_url": "https://api.github.com/users/zdenulo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-19T15:26:44Z", "updated_at": "2019-03-19T19:44:46Z", "closed_at": "2019-03-19T19:39:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Today I wanted for first time to use Opencensus in Python and export traces to Stackdriver (from Cloud Functions). Maybe is not my day today, but I can't run even the simplest code example from documentation https://opencensus.io/exporters/supported-exporters/python/stackdriver/\r\n\r\nproblem is with line `from opencensus.trace.exporters import stackdriver_exporter` because stackdriver_exporter is not there.\r\n\r\nSearching further I came to this https://github.com/census-instrumentation/opencensus-python/tree/master/contrib/opencensus-ext-stackdriver but pip install can't find that library, so I admit I am confused how it should be used.\r\n\r\nI would be grateful for guidance / explanation.\r\n\r\nI'm using Python 3.7.0 and following libraries in virtualenv:\r\ncachetools==3.1.0\r\ncertifi==2019.3.9\r\nchardet==3.0.4\r\ngoogle-api-core==1.8.1\r\ngoogle-auth==1.6.3\r\ngoogle-cloud-core==0.29.1\r\ngoogle-cloud-trace==0.20.2\r\ngoogleapis-common-protos==1.5.8\r\nidna==2.8\r\nopencensus==0.3.0\r\nprotobuf==3.7.0\r\npyasn1==0.4.5\r\npyasn1-modules==0.2.4\r\npytz==2018.9\r\nrequests==2.21.0\r\nrsa==4.0\r\nsix==1.12.0\r\nurllib3==1.24.1\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/558", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/558/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/558/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/558/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/558", "id": 421185139, "node_id": "MDU6SXNzdWU0MjExODUxMzk=", "number": 558, "title": "Experimental: extend span APIs to support callbacks and access to spancontext", "user": {"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-14T18:42:21Z", "updated_at": "2019-03-14T19:00:29Z", "closed_at": "2019-03-14T19:00:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/547", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/547/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/547/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/547/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/547", "id": 418214227, "node_id": "MDU6SXNzdWU0MTgyMTQyMjc=", "number": 547, "title": "datetime parsing in tracer fails sometimes", "user": {"login": "peick", "id": 503214, "node_id": "MDQ6VXNlcjUwMzIxNA==", "avatar_url": "https://avatars0.githubusercontent.com/u/503214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peick", "html_url": "https://github.com/peick", "followers_url": "https://api.github.com/users/peick/followers", "following_url": "https://api.github.com/users/peick/following{/other_user}", "gists_url": "https://api.github.com/users/peick/gists{/gist_id}", "starred_url": "https://api.github.com/users/peick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peick/subscriptions", "organizations_url": "https://api.github.com/users/peick/orgs", "repos_url": "https://api.github.com/users/peick/repos", "events_url": "https://api.github.com/users/peick/events{/privacy}", "received_events_url": "https://api.github.com/users/peick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-07T09:42:38Z", "updated_at": "2019-03-12T18:35:03Z", "closed_at": "2019-03-11T22:50:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Stacktrace:\r\n\r\n```\r\n  File \"/env/local/lib/python2.7/site-packages/opencensus/trace/tracers/context_tracer.py\", line 123, in end_span\r\n    self.exporter.export(span_datas)\r\n  File \"/env/local/lib/python2.7/site-packages/opencensus/trace/exporters/jaeger_exporter.py\", line 158, in export\r\n    self.transport.export(span_datas)\r\n  File \"/env/local/lib/python2.7/site-packages/opencensus/trace/exporters/transports/sync.py\", line 23, in export \r\n    self.exporter.emit(span_datas)\r\n  File \"/env/local/lib/python2.7/site-packages/opencensus/trace/exporters/jaeger_exporter.py\", line 138, in emit\r\n    jaeger_spans = self.translate_to_jaeger(span_datas)\r\n  File \"/env/local/lib/python2.7/site-packages/opencensus/trace/exporters/jaeger_exporter.py\", line 177, in translate_to_jaeger\r\n    start_timestamp_ms = timestamp_to_microseconds(span.start_time)\r\n  File \"/env/local/lib/python2.7/site-packages/opencensus/trace/utils.py\", line 71, in timestamp_to_microseconds\r\n    timestamp_str = datetime.datetime.strptime(timestamp, ISO_DATETIME_REGEX)\r\n  File \"/usr/lib/python2.7/_strptime.py\", line 332, in _strptime\r\n    (data_string, format))\r\nValueError: time data '2019-03-07T09:24:40Z' does not match format '%Y-%m-%dT%H:%M:%S.%fZ'\r\n```\r\n\r\nThe problem is python's standard library module `datetime.datetime`. The `isoformat()` method generates a formatted datetime string _without_ milliseconds if milliseconds is `0`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/538", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/538/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/538/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/538/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/538", "id": 417384121, "node_id": "MDU6SXNzdWU0MTczODQxMjE=", "number": 538, "title": "Support the latest version of Django", "user": {"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1325516759, "node_id": "MDU6TGFiZWwxMzI1NTE2NzU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P2", "name": "P2", "color": "e99695", "default": false, "description": ""}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 642440895, "node_id": "MDU6TGFiZWw2NDI0NDA4OTU=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/up-for-grabs", "name": "up-for-grabs", "color": "128A0C", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-03-05T16:25:32Z", "updated_at": "2019-06-28T02:47:22Z", "closed_at": "2019-06-28T02:47:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Py3.6 system test would fail with the latest version of Django, need to get it fixed.\r\n\r\n```\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.6.0, pytest-3.2.2, py-1.8.0, pluggy-0.4.0\r\nrootdir: /root/repo, inifile:\r\nplugins: cov-2.5.1\r\ncollected 14 items                                                              \r\n\r\ntests/system/stats/prometheus/prometheus_stats_test.py .\r\ntests/system/stats/stackdriver/stackdriver_stats_test.py Dropping 1 non-positive bucket boundaries\r\n.Dropping 1 non-positive bucket boundaries\r\n.\r\ntests/system/trace/basic_trace/basic_trace_system_test.py Test simple tracing...\r\nTest simple tracing...\r\n.\r\ntests/system/trace/django/django_system_test.py 95ba383f898c4fc1abf49ccc23f50ad9/a226ee08ca664278;o=1\r\n--2019-03-04 22:55:31--  http://localhost:8000/\r\nResolving localhost (localhost)... 127.0.0.1, 127.0.0.1, ::1\r\nConnecting to localhost (localhost)|127.0.0.1|:8000... failed: Connection refused.\r\nConnecting to localhost (localhost)|127.0.0.1|:8000... failed: Connection refused.\r\nConnecting to localhost (localhost)|::1|:8000... failed: Cannot assign requested address.\r\nRetrying.\r\n\r\nUnhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x7f148153fa60>\r\nTraceback (most recent call last):\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/urls/conf.py\", line 17, in include\r\n    urlconf_module, app_name = arg\r\nValueError: too many values to unpack (expected 2)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/utils/autoreload.py\", line 225, in wrapper\r\n    fn(*args, **kwargs)\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/core/management/commands/runserver.py\", line 117, in inner_run\r\n    self.check(display_num_errors=True)\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/core/management/base.py\", line 379, in check\r\n    include_deployment_checks=include_deployment_checks,\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/core/management/base.py\", line 366, in _run_checks\r\n    return checks.run_checks(**kwargs)\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/core/checks/registry.py\", line 71, in run_checks\r\n    new_errors = check(app_configs=app_configs)\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/core/checks/urls.py\", line 40, in check_url_namespaces_unique\r\n    all_namespaces = _load_all_namespaces(resolver)\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/core/checks/urls.py\", line 57, in _load_all_namespaces\r\n    url_patterns = getattr(resolver, 'url_patterns', [])\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/utils/functional.py\", line 37, in __get__\r\n    res = instance.__dict__[self.name] = self.func(instance)\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/urls/resolvers.py\", line 533, in url_patterns\r\n    patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/utils/functional.py\", line 37, in __get__\r\n    res = instance.__dict__[self.name] = self.func(instance)\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/urls/resolvers.py\", line 526, in urlconf_module\r\n    return import_module(self.urlconf_name)\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 978, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 961, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 950, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 655, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 205, in _call_with_frames_removed\r\n  File \"/root/repo/tests/system/trace/django/app/urls.py\", line 37, in <module>\r\n    url(r'^admin/', include(admin.site.urls)),\r\n  File \"/root/repo/.nox/sys-3-6/lib/python3.6/site-packages/django/urls/conf.py\", line 27, in include\r\n    'provide the namespace argument to include() instead.' % len(arg)\r\ndjango.core.exceptions.ImproperlyConfigured: Passing a 3-tuple to include() is not supported. Pass a 2-tuple containing the list of patterns and app_name, and provide the namespace argument to include() instead.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/537", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/537/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/537/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/537/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/537", "id": 417290084, "node_id": "MDU6SXNzdWU0MTcyOTAwODQ=", "number": 537, "title": "Subspans not exported for stackdriver exporter and print exporter", "user": {"login": "int8", "id": 13486617, "node_id": "MDQ6VXNlcjEzNDg2NjE3", "avatar_url": "https://avatars0.githubusercontent.com/u/13486617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/int8", "html_url": "https://github.com/int8", "followers_url": "https://api.github.com/users/int8/followers", "following_url": "https://api.github.com/users/int8/following{/other_user}", "gists_url": "https://api.github.com/users/int8/gists{/gist_id}", "starred_url": "https://api.github.com/users/int8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/int8/subscriptions", "organizations_url": "https://api.github.com/users/int8/orgs", "repos_url": "https://api.github.com/users/int8/repos", "events_url": "https://api.github.com/users/int8/events{/privacy}", "received_events_url": "https://api.github.com/users/int8/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-05T13:09:00Z", "updated_at": "2019-03-07T02:26:31Z", "closed_at": "2019-03-07T02:26:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "When running the code below I am not able to see **subspans** in google stackdriver trace. I am only able to see root span `span1` but no `span2` \r\n\r\nopencensus version is `0.2.0` (installed with pip)\r\n\r\n```python\r\nfrom opencensus.trace import tracer as tracer_module\r\nfrom opencensus.trace.exporters import stackdriver_exporter\r\nfrom opencensus.trace import execution_context\r\nfrom opencensus.trace.samplers.probability import ProbabilitySampler\r\n\r\nexporter = stackdriver_exporter.StackdriverExporter(project_id=\"myprojectid\")\r\nsampler = ProbabilitySampler(rate=1.0)\r\ntracer = tracer_module.Tracer(sampler=sampler, exporter=exporter)\r\n\r\n\r\nwith tracer.span(name='span1') as span1:\r\n    x = 1\r\n    with execution_context.get_current_span().span(name=\"span2\") as span2:\r\n        y = 1\r\n```\r\n\r\nsame code will produce correct results (`span1` -> `span2` visible) when using `opencensus==0.1.5`\r\n\r\n\r\nit also occurs when using default exporter:\r\n\r\n```python \r\nfrom opencensus.trace import tracer as tracer_module\r\ntracer = tracer_module.Tracer()\r\n\r\nwith tracer.span(name='root') as root:\r\n    (lambda x: x)(1)\r\n    with root.span(name=\"child\") as child:\r\n        (lambda x: x)(1)\r\n```\r\n\r\noutputs:\r\n\r\n```python\r\n[SpanData(name='root',...), SpanData(name='root', ...)]\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/533", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/533/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/533/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/533/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/533", "id": 416960930, "node_id": "MDU6SXNzdWU0MTY5NjA5MzA=", "number": 533, "title": "exporter/stackdriver: reports zone as fully qualified resource", "user": {"login": "colincadams", "id": 3762913, "node_id": "MDQ6VXNlcjM3NjI5MTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3762913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colincadams", "html_url": "https://github.com/colincadams", "followers_url": "https://api.github.com/users/colincadams/followers", "following_url": "https://api.github.com/users/colincadams/following{/other_user}", "gists_url": "https://api.github.com/users/colincadams/gists{/gist_id}", "starred_url": "https://api.github.com/users/colincadams/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colincadams/subscriptions", "organizations_url": "https://api.github.com/users/colincadams/orgs", "repos_url": "https://api.github.com/users/colincadams/repos", "events_url": "https://api.github.com/users/colincadams/events{/privacy}", "received_events_url": "https://api.github.com/users/colincadams/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-04T19:39:58Z", "updated_at": "2019-03-05T06:04:18Z", "closed_at": "2019-03-05T06:04:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When running an app engine flex app, open census defaults reporting to the `gce_instance` monitored resource (seems fine) with `zone` set to the fully qualified zone returned from [the metadata api](https://cloud.google.com/compute/docs/storing-retrieving-metadata#default):\r\n\r\n```\r\nOpenCensus monitored resource: \"{'type': 'gce_instance', 'labels': {'instance_id': '[instance-id]', 'project_id': '[project-id]', 'zone': 'projects/[numeric-project-id]/zones/us-east1-c'}}\"\r\n```\r\n\r\nThis causes all points to fail like this:\r\n\r\n```\r\nasync_/_thread_main : StackdriverStatsExporter failed to emit data.Dropping 1 objects from queue.\r\nTraceback (most recent call last):\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.7/site-packages/google/api_core/grpc_helpers.py\", line 57, in error_remapped_callable\r\n    return callable_(*args, **kwargs)\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.7/site-packages/grpc/_channel.py\", line 550, in __call__\r\n    return _end_unary_response_blocking(state, call, False, None)\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.7/site-packages/grpc/_channel.py\", line 467, in _end_unary_response_blocking\r\n    raise _Rendezvous(state, None, None, deadline)\r\ngrpc._channel._Rendezvous: <_Rendezvous of RPC that terminated with:\r\n\tstatus = StatusCode.INVALID_ARGUMENT\r\n\tdetails = \"One or more TimeSeries could not be written: Unrecognized region or location.: timeSeries[0]\"\r\n\tdebug_error_string = \"{\"created\":\"@1551716760.822772067\",\"description\":\"Error received from peer\",\"file\":\"src/core/lib/surface/call.cc\",\"file_line\":1036,\"grpc_message\":\"One or more TimeSeries could not be written: Unrecognized region or location.: timeSeries[0]\",\"grpc_status\":3}\"\r\n>\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/src/opencensus/opencensus/common/transports/async_.py\", line 105, in _thread_main\r\n    self.exporter.emit(data)\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/src/opencensus/opencensus/stats/exporters/stackdriver_exporter.py\", line 153, in emit\r\n    self.handle_upload(view_data)\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/src/opencensus/opencensus/stats/exporters/stackdriver_exporter.py\", line 165, in handle_upload\r\n    self.upload_stats(view_data)\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/src/opencensus/opencensus/stats/exporters/stackdriver_exporter.py\", line 177, in upload_stats\r\n    time_series_batch)\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.7/site-packages/google/cloud/monitoring_v3/gapic/metric_service_client.py\", line 897, in create_time_series\r\n    request, retry=retry, timeout=timeout, metadata=metadata\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.7/site-packages/google/api_core/gapic_v1/method.py\", line 143, in __call__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.7/site-packages/google/api_core/retry.py\", line 270, in retry_wrapped_func\r\n    on_error=on_error,\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.7/site-packages/google/api_core/retry.py\", line 179, in retry_target\r\n    return target()\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.7/site-packages/google/api_core/timeout.py\", line 214, in func_with_timeout\r\n    return func(*args, **kwargs)\r\n  File \"/root/.local/share/virtualenvs/app-4PlAip0Q/lib/python3.7/site-packages/google/api_core/grpc_helpers.py\", line 59, in error_remapped_callable\r\n    six.raise_from(exceptions.from_grpc_error(exc), exc)\r\n  File \"<string>\", line 3, in raise_from\r\ngoogle.api_core.exceptions.InvalidArgument: 400 One or more TimeSeries could not be written: Unrecognized region or location.: timeSeries[0]\r\n```\r\n\r\nI have a sample app that runs into this issue: https://github.com/colincadams/opencensus-example", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/525", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/525/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/525/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/525/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/525", "id": 414547136, "node_id": "MDU6SXNzdWU0MTQ1NDcxMzY=", "number": 525, "title": "stats/exporters/ocagent: implement exporter ", "user": {"login": "odeke-em", "id": 4898263, "node_id": "MDQ6VXNlcjQ4OTgyNjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/4898263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odeke-em", "html_url": "https://github.com/odeke-em", "followers_url": "https://api.github.com/users/odeke-em/followers", "following_url": "https://api.github.com/users/odeke-em/following{/other_user}", "gists_url": "https://api.github.com/users/odeke-em/gists{/gist_id}", "starred_url": "https://api.github.com/users/odeke-em/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odeke-em/subscriptions", "organizations_url": "https://api.github.com/users/odeke-em/orgs", "repos_url": "https://api.github.com/users/odeke-em/repos", "events_url": "https://api.github.com/users/odeke-em/events{/privacy}", "received_events_url": "https://api.github.com/users/odeke-em/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1088008016, "node_id": "MDU6TGFiZWwxMDg4MDA4MDE2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/exporters", "name": "exporters", "color": "418ac6", "default": false, "description": ""}, {"id": 909693870, "node_id": "MDU6TGFiZWw5MDk2OTM4NzA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/feature-request", "name": "feature-request", "color": "b3f28e", "default": false, "description": ""}, {"id": 1079824889, "node_id": "MDU6TGFiZWwxMDc5ODI0ODg5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/metrics", "name": "metrics", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-26T10:47:55Z", "updated_at": "2019-05-02T20:30:48Z", "closed_at": "2019-05-02T20:30:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently we've only got the ocagent trace exporter. It would be nice to have once for stats too so that we can start to use the OpenCensus Agent.\r\n\r\nI see https://github.com/census-instrumentation/opencensus-python/issues/454 open but that issue will involve doing a bunch of double work since it is almost rewriting those exporters. With the ocagent exporter converts stats aka view_data to OpenCensus Proto Metrics, folks can then switch over to just using the agent.\r\n\r\nI am coming here as I am currently writing the guide for the new OpenCensus Redis-Py wrapper https://pypi.org/project/ocredis/ and it works great with the Trace exporter i.e.\r\n```python\r\n#!/usr/bin/env python\r\n\r\nimport ocredis\r\n\r\nfrom opencensus.trace.tracer import Tracer\r\nfrom opencensus.trace.exporters.ocagent.trace_exporter import TraceExporter\r\nfrom opencensus.trace.samplers import always_on\r\nfrom opencensus.common.transports import async_\r\n\r\ndef create_opencensus_exporters_and_tracer():\r\n    # Create the ocagent-exporter that'll upload our traces\r\n    # to the OpenCensus Agent.\r\n    octe = TraceExporter(service_name='pysearch', transport=async_.AsyncTransport)\r\n\r\n    tracer_init_args = dict(exporter=octe,\r\n            # Always sampling for demo purposes.\r\n            sampler=always_on.AlwaysOnSampler())\r\n\r\n    return tracer_init_args\r\n\r\ndef main():\r\n    r = ocredis.OcRedis(host='localhost', port=6379, db=10)\r\n    tracer_init_args = create_opencensus_exporters_and_tracer()\r\n    while True:\r\n        query = raw_input('$ ')\r\n        response = do_search(r, query, **tracer_init_args)\r\n        print('> ' + response + '\\n')\r\n\r\ndef do_search(client, query, **tracer_init_kwargs):\r\n    tracer = Tracer(**tracer_init_kwargs)\r\n    with tracer.span('Search') as span:\r\n        span.add_annotation('Searching', query=query)\r\n\r\n        # Check Redis if we've already memoized the response.\r\n        response = client.get(query)\r\n\r\n        if response is not None: # Cache hit\r\n            span.add_annotation('Cache hit', store='redis', client='redis-py')\r\n            print('Cache hit! Now deleting it to make for a cache miss later')\r\n            # Clear the response so that the next search will return a cache-miss.\r\n            client.delete(query)\r\n\r\n        else:  # Cache miss\r\n            span.add_annotation('Cache miss', store='redis', client='redis-py')\r\n            print('Cache miss! Now processing and memoizing it to make for a cache hit later')\r\n\r\n            # Now process the result and memoize it.\r\n            response = query.upper()\r\n            client.set(query, response)\r\n\r\n        span.finish()\r\n        return response\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\nbut after writing that, I came over to use the ocagent-stats exporter but didn't find any.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/520", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/520/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/520/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/520/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/520", "id": 413903436, "node_id": "MDU6SXNzdWU0MTM5MDM0MzY=", "number": 520, "title": "stats: invalid usage of for enumerate and else clause unconditionally logs \"Negative bucket boundaries\" and trims off 0 boundary values", "user": {"login": "odeke-em", "id": 4898263, "node_id": "MDQ6VXNlcjQ4OTgyNjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/4898263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odeke-em", "html_url": "https://github.com/odeke-em", "followers_url": "https://api.github.com/users/odeke-em/followers", "following_url": "https://api.github.com/users/odeke-em/following{/other_user}", "gists_url": "https://api.github.com/users/odeke-em/gists{/gist_id}", "starred_url": "https://api.github.com/users/odeke-em/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odeke-em/subscriptions", "organizations_url": "https://api.github.com/users/odeke-em/orgs", "repos_url": "https://api.github.com/users/odeke-em/repos", "events_url": "https://api.github.com/users/odeke-em/events{/privacy}", "received_events_url": "https://api.github.com/users/odeke-em/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-25T02:09:43Z", "updated_at": "2019-03-07T00:20:56Z", "closed_at": "2019-03-07T00:20:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently in this code there is code\r\nhttps://github.com/census-instrumentation/opencensus-python/blob/f814904b8656b4a4e9d1d423e908796798549ae3/opencensus/stats/aggregation.py#L140-L149\r\n\r\nthat uses `for/else` but we mistakenly assume that the else will ONLY be executed if we encounter a break. However as per https://docs.python.org/3/tutorial/controlflow.html\r\n<img width=\"959\" alt=\"screen shot 2019-02-25 at 3 07 51 am\" src=\"https://user-images.githubusercontent.com/4898263/53309883-91030200-38aa-11e9-9a94-3dd27565580e.png\">\r\n\r\n\r\nI believe tries to ensure that the bucket boundaries are > 0. However, there are two subtle bugs:\r\na) if a bucket boundary starts at 0 e.g. [0, 5, 10, 200], it will always falsely trim the list to [5, 10, 200] but 0 isn't a negative value\r\nb) for and then else will ALWAYS run the else clause whenever the for loop terminates so still we falsely report that 1 value is getting dropped\r\n\r\n### Illustration of the 2 bugs\r\nTo illustrate please take a look at this code below:\r\n```python\r\n#!/usr/bin/env python\r\n\r\ndef trim(boundaries):\r\n for ii, bb in enumerate(boundaries):\r\n     if bb > 0:\r\n         break\r\n else:\r\n     ii += 1\r\n\r\n if ii <= 0:\r\n     return None, boundaries\r\n     \r\n return boundaries[:ii], boundaries[ii:]\r\n\r\ndef main():\r\n    samples = [\r\n            [0, 10, 5],\r\n            [1, 2, 5],\r\n            [-1, -2, -5],\r\n    ]\r\n\r\n    for sample in samples:\r\n        with_negatives, without_negatives = trim(sample)\r\n        print(\"original: %s\\nwith_negatives:    %s\\nwithout_negatives: %s\\n\\n\"%(\r\n            sample, with_negatives, without_negatives))\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\nwhich produces\r\n```shell\r\noriginal: [0, 10, 5]\r\nwith_negatives:    [0]\r\nwithout_negatives: [10, 5]\r\n\r\n\r\noriginal: [1, 2, 5]\r\nwith_negatives:    None\r\nwithout_negatives: [1, 2, 5]\r\n\r\n\r\noriginal: [-1, -2, -5]\r\nwith_negatives:    [-1, -2, -5]\r\nwithout_negatives: []\r\n```\r\n\r\nI think we can definitely fix this code with clarity and less else magic\r\n```python\r\nfirst_non_negative_elem_index = -1\r\nfor i, boundary in enumerate(boundaries): \r\n     if boundary >= 0: \r\n         first_non_negative_elem_index = i\r\n         break\r\n\r\nif first_non_negative_elem_index > 0:\r\n     logger.warning(\"Dropping {} negative bucket boundaries, the \" \r\n                    \"values must be strictly > 0\" \r\n                    .format(first_non_negative_elem_index)) \r\n     boundaries = boundaries[first_non_negative_elem_index:] \r\n```\r\n\r\n### Full illustration\r\n```python\r\n#!/usr/bin/env python\r\n\r\ndef proper_trim(boundaries):\r\n first_non_negative_index = -1\r\n for ii, bb in enumerate(boundaries):\r\n     if bb >= 0:\r\n         first_non_negative_index = ii\r\n         break\r\n\r\n if first_non_negative_index < 0:\r\n     return boundaries, None\r\n     \r\n ii = first_non_negative_index\r\n return boundaries[:ii], boundaries[ii:]\r\n\r\ndef trim(boundaries):\r\n for ii, bb in enumerate(boundaries):\r\n     if bb > 0:\r\n         break\r\n else:\r\n     ii += 1\r\n\r\n if ii <= 0:\r\n     return None, boundaries\r\n     \r\n return boundaries[:ii], boundaries[ii:]\r\n\r\ndef main():\r\n    samples = [\r\n            [0, 10, 5],\r\n            [1, 2, 5],\r\n            [-1, -2, -5],\r\n    ]\r\n\r\n    fns = [('buggy_trim', trim), ('fixed_trim', proper_trim)]\r\n    for sample in samples:\r\n        for name, fn in fns:\r\n            with_negatives, without_negatives = fn(sample)\r\n            print(\"%s        (%s)\\nwith_negatives:    %s\\nwithout_negatives: %s\\n\"%(\r\n                name, sample, with_negatives, without_negatives))\r\n\r\n        print(\"\\n\")\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\nwhich gives\r\n```shell\r\n$ python foo.py \r\nbuggy_trim        ([0, 10, 5])\r\nwith_negatives:    [0]\r\nwithout_negatives: [10, 5]\r\n\r\nfixed_trim        ([0, 10, 5])\r\nwith_negatives:    []\r\nwithout_negatives: [0, 10, 5]\r\n\r\n\r\n\r\nbuggy_trim        ([1, 2, 5])\r\nwith_negatives:    None\r\nwithout_negatives: [1, 2, 5]\r\n\r\nfixed_trim        ([1, 2, 5])\r\nwith_negatives:    []\r\nwithout_negatives: [1, 2, 5]\r\n\r\n\r\n\r\nbuggy_trim        ([-1, -2, -5])\r\nwith_negatives:    [-1, -2, -5]\r\nwithout_negatives: []\r\n\r\nfixed_trim        ([-1, -2, -5])\r\nwith_negatives:    [-1, -2, -5]\r\nwithout_negatives: None\r\n```\r\n\r\nI no longer seem to have access to this repo so I'll just /cc @c24t @mayurkale22 @songy23 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/519", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/519/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/519/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/519/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/519", "id": 413819532, "node_id": "MDU6SXNzdWU0MTM4MTk1MzI=", "number": 519, "title": "README: add OpenCensus pypi version badge", "user": {"login": "odeke-em", "id": 4898263, "node_id": "MDQ6VXNlcjQ4OTgyNjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/4898263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odeke-em", "html_url": "https://github.com/odeke-em", "followers_url": "https://api.github.com/users/odeke-em/followers", "following_url": "https://api.github.com/users/odeke-em/following{/other_user}", "gists_url": "https://api.github.com/users/odeke-em/gists{/gist_id}", "starred_url": "https://api.github.com/users/odeke-em/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odeke-em/subscriptions", "organizations_url": "https://api.github.com/users/odeke-em/orgs", "repos_url": "https://api.github.com/users/odeke-em/repos", "events_url": "https://api.github.com/users/odeke-em/events{/privacy}", "received_events_url": "https://api.github.com/users/odeke-em/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133638102, "node_id": "MDU6TGFiZWwxMTMzNjM4MTAy", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/meta", "name": "meta", "color": "a5e4ef", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-02-24T13:07:02Z", "updated_at": "2019-03-07T00:49:36Z", "closed_at": "2019-03-07T00:49:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently finding the latest version of OpenCensus that's released on PyPi involves manually having to go to PyPi homepage and looking for it.\r\n\r\nIt would be very useful if the README for this project bore a PyPi version badge such as by `https://badge.fury.io/py/opencensus.svg` whose URL would be https://pypi.org/project/opencensus/ which would then produce\r\n![https://pypi.org/project/opencensus/](https://badge.fury.io/py/opencensus.svg)\r\n\r\nand then users could easily ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/517", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/517/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/517/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/517/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/517", "id": 413603858, "node_id": "MDU6SXNzdWU0MTM2MDM4NTg=", "number": 517, "title": "Tracing: Add Double/Float64 Attribute.", "user": {"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1196594386, "node_id": "MDU6TGFiZWwxMTk2NTk0Mzg2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/GA-Effort", "name": "GA-Effort", "color": "4ebadb", "default": false, "description": ""}, {"id": 948604010, "node_id": "MDU6TGFiZWw5NDg2MDQwMTA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/trace", "name": "trace", "color": "cbe83a", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-22T22:27:15Z", "updated_at": "2019-02-25T21:13:19Z", "closed_at": "2019-02-25T21:13:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Proto change: https://github.com/census-instrumentation/opencensus-proto/pull/98.\r\n\r\nCounterpart in Go: https://github.com/census-instrumentation/opencensus-go/issues/900\r\nJava: https://github.com/census-instrumentation/opencensus-java/pull/1442. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/514", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/514/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/514/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/514/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/514", "id": 413170809, "node_id": "MDU6SXNzdWU0MTMxNzA4MDk=", "number": 514, "title": "Set k8s resource labels for GCE, AWS", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1243422130, "node_id": "MDU6TGFiZWwxMjQzNDIyMTMw", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/resources", "name": "resources", "color": "0052cc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-21T23:22:31Z", "updated_at": "2019-05-02T20:31:39Z", "closed_at": "2019-05-02T20:31:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Resource labels for containers on kubernetes (previously \"GKE\") aren't mutually exclusive with labels for GCE and AWS environments. Resources created for these containers should also include GCE/AWS labels if we detect the environment.\r\n\r\nSee [`ResourceUtils` in the java client](https://github.com/census-instrumentation/opencensus-java/blob/4125599ad34e074eb604428e09c8468020f84054/contrib/resource_util/src/main/java/io/opencensus/contrib/resource/util/ResourceUtils.java#L45-L54).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/510", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/510/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/510/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/510/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/510", "id": 412575943, "node_id": "MDU6SXNzdWU0MTI1NzU5NDM=", "number": 510, "title": "Replace gke_container resource with k8s_container", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1243422130, "node_id": "MDU6TGFiZWwxMjQzNDIyMTMw", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/resources", "name": "resources", "color": "0052cc", "default": false, "description": ""}, {"id": 642440895, "node_id": "MDU6TGFiZWw2NDI0NDA4OTU=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/up-for-grabs", "name": "up-for-grabs", "color": "128A0C", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-20T18:52:24Z", "updated_at": "2019-03-04T19:53:43Z", "closed_at": "2019-03-04T19:53:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From https://github.com/census-instrumentation/opencensus-python/pull/508#pullrequestreview-205548636:\r\n\r\n> Note that `gke_container` resource is now replaced with `k8s_containter` resource, and it needs to be updated in the following PRs.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/509", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/509/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/509/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/509/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/509", "id": 412512626, "node_id": "MDU6SXNzdWU0MTI1MTI2MjY=", "number": 509, "title": "Stats: Timestamps not updated when new measurement is recorded", "user": {"login": "colincadams", "id": 3762913, "node_id": "MDQ6VXNlcjM3NjI5MTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3762913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colincadams", "html_url": "https://github.com/colincadams", "followers_url": "https://api.github.com/users/colincadams/followers", "following_url": "https://api.github.com/users/colincadams/following{/other_user}", "gists_url": "https://api.github.com/users/colincadams/gists{/gist_id}", "starred_url": "https://api.github.com/users/colincadams/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colincadams/subscriptions", "organizations_url": "https://api.github.com/users/colincadams/orgs", "repos_url": "https://api.github.com/users/colincadams/repos", "events_url": "https://api.github.com/users/colincadams/events{/privacy}", "received_events_url": "https://api.github.com/users/colincadams/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 642440897, "node_id": "MDU6TGFiZWw2NDI0NDA4OTc=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}, {"id": 948327953, "node_id": "MDU6TGFiZWw5NDgzMjc5NTM=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/stats", "name": "stats", "color": "bfdadc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-02-20T16:23:15Z", "updated_at": "2019-02-21T23:42:43Z", "closed_at": "2019-02-21T23:42:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A call to `MeasurementMap.record` creates a timestamp and then passes that through `MeasureToViewMap.record` -> `ViewData.record` -> `AggregationData.add_sample` but is never persisted anywhere.\r\n\r\nThis means that the timestamp of when the view is registered is used whenever measurements are exported. For stackdriver this means that the first time the time series are sent from a particular instance it succeeds, but any subsequent call fails because the timestamp is too close to the prior timestamp or if the instance has been up for more than a day it fails as the timestamp is too old.\r\n\r\nI would expect the `_end_time` of `ViewData` to be updated when a new measurement is recorded, which would fix this problem for cumulative metrics. Depending on how `_start_time` and `_end_time` are used when exporting, this may be the correct solution for gauges as well.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/502", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/502/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/502/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/502/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/502", "id": 409490608, "node_id": "MDU6SXNzdWU0MDk0OTA2MDg=", "number": 502, "title": "Standardize timestamps", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440895, "node_id": "MDU6TGFiZWw2NDI0NDA4OTU=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/up-for-grabs", "name": "up-for-grabs", "color": "128A0C", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-02-12T20:41:07Z", "updated_at": "2019-03-11T22:50:58Z", "closed_at": "2019-03-11T22:50:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Right now we use three types of timestamp internally: tz-naive `datetime`s (`datetime.now()`), UTC `datetimes` (`datetime.utcnow()`), and UTC date strings (`datetime.utcnow().isoformat() + 'Z'`).\r\n\r\nWe should pick a single internal timestamp type. I suggest that we use `int` nanoseconds or milliseconds since the UTC epoch.\r\n\r\nEpoch times are still affected by leap seconds -- there are timestamps that describe two separate actual times during positive leap seconds, and (theoretically) timestamps that don't correspond to any actual time because of negative leap seconds. This poses a problem for tracing because we may report spans that end before they start, or are otherwise nonsensical or out of order. This is an edge case for sure, but one that we need to consider.\r\n\r\nThe java client solves this (and other problems) by passing around a [monotonic `Clock`](https://github.com/census-instrumentation/opencensus-java/blob/4125599ad34e074eb604428e09c8468020f84054/impl_core/src/main/java/io/opencensus/implcore/trace/SpanBuilderImpl.java#L100-L108). We should consider doing something similar in python.\r\n\r\nAnother option is the [\"leap smear\"](https://developers.google.com/time/smear). Google's NTP and [AWS](https://aws.amazon.com/blogs/aws/look-before-you-leap-the-coming-leap-second-and-aws/) take this approach, but this is likely to cause problems for clients.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/489", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/489/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/489/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/489/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/489", "id": 407032757, "node_id": "MDU6SXNzdWU0MDcwMzI3NTc=", "number": 489, "title": "Build: Fix test coverage.", "user": {"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-06T00:23:04Z", "updated_at": "2019-02-06T02:42:38Z", "closed_at": "2019-02-06T02:42:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Test session `cover` failed even on master branch:\r\n```bash\r\n$ git checkout master\r\n$ nox -s \"cover\"\r\n...\r\nTOTAL                                                                   4069      3   1010     17    99%\r\nnox > Command coverage report --show-missing --fail-under=100 failed with exit code 2\r\nnox > Session cover failed.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/481", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/481/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/481/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/481/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/481", "id": 406946683, "node_id": "MDU6SXNzdWU0MDY5NDY2ODM=", "number": 481, "title": "Override trace sampling decision", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1196594386, "node_id": "MDU6TGFiZWwxMTk2NTk0Mzg2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/GA-Effort", "name": "GA-Effort", "color": "4ebadb", "default": false, "description": ""}, {"id": 948604010, "node_id": "MDU6TGFiZWw5NDg2MDQwMTA=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/trace", "name": "trace", "color": "cbe83a", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-05T19:49:42Z", "updated_at": "2019-05-01T20:07:25Z", "closed_at": "2019-05-01T20:07:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It should be possible to override the sampling decision for a given span by setting the span's sampler. Currently we always sample a span if the sampling bit is set in the span's `TraceOptions`. This bit indicates that the parent span was sampled.\r\n\r\nFor example, setting the sampler to `AlwaysOffSampler` should cause the span never to be sampled, even if the parent span was sampled. This isn't the case now because we [short-circuit the sampler](https://github.com/census-instrumentation/opencensus-python/blob/520a64b1bb3e296af917fe7a51e4779fe0a0396e/opencensus/trace/tracer.py#L76-L77) if the sampling bit is set.\r\n\r\nCompare to the java client which sets the sampler in the [SpanBuilder](https://github.com/census-instrumentation/opencensus-java/blob/e8cba95228e9f104b325a99b3499d0da4be84e8d/api/src/main/java/io/opencensus/trace/SpanBuilder.java#L332-L335). In java we pass the span context to the sampler, which ultimately makes the sampling decision.\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/480", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/480/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/480/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/480/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/480", "id": 406513211, "node_id": "MDU6SXNzdWU0MDY1MTMyMTE=", "number": 480, "title": "Exporters/Prometheus: Unable to record metrics ", "user": {"login": "PikBot", "id": 35295607, "node_id": "MDQ6VXNlcjM1Mjk1NjA3", "avatar_url": "https://avatars2.githubusercontent.com/u/35295607?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PikBot", "html_url": "https://github.com/PikBot", "followers_url": "https://api.github.com/users/PikBot/followers", "following_url": "https://api.github.com/users/PikBot/following{/other_user}", "gists_url": "https://api.github.com/users/PikBot/gists{/gist_id}", "starred_url": "https://api.github.com/users/PikBot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PikBot/subscriptions", "organizations_url": "https://api.github.com/users/PikBot/orgs", "repos_url": "https://api.github.com/users/PikBot/repos", "events_url": "https://api.github.com/users/PikBot/events{/privacy}", "received_events_url": "https://api.github.com/users/PikBot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1088008016, "node_id": "MDU6TGFiZWwxMDg4MDA4MDE2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/exporters", "name": "exporters", "color": "418ac6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-04T20:49:25Z", "updated_at": "2019-02-06T04:16:32Z", "closed_at": "2019-02-06T02:40:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "On running the following [code](https://gist.github.com/PikBot/3c46d5d74a110de55595ba6f4110584a), I get the following error: \r\n```\r\nException happened during processing of request from ('127.0.0.1', 50691)\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/socketserver.py\", line 625, in process_request_thread\r\n    self.finish_request(request, client_address)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/socketserver.py\", line 354, in finish_request\r\n    self.RequestHandlerClass(request, client_address, self)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/socketserver.py\", line 681, in __init__\r\n    self.handle()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/http/server.py\", line 422, in handle\r\n    self.handle_one_request()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/http/server.py\", line 410, in handle_one_request\r\n    method()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/prometheus_client/exposition.py\", line 146, in do_GET\r\n    output = encoder(registry)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/prometheus_client/openmetrics/exposition.py\", line 26, in generate_latest\r\n    for k, v in sorted(s.labels.items())]))\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/prometheus_client/openmetrics/exposition.py\", line 26, in <listcomp>\r\n    for k, v in sorted(s.labels.items())]))\r\nAttributeError: 'NoneType' object has no attribute 'replace'\r\n```\r\nI have tried running the example for Prometheus exporter as well (that doesn't seem to work for me either).\r\nNot sure whether it is related to [this](https://github.com/prometheus/client_python/issues/18)? \r\nAny suggestions on as to what could be wrong, would be helpful! \r\n@odeke-em ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/470", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/470/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/470/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/470/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/470", "id": 404042472, "node_id": "MDU6SXNzdWU0MDQwNDI0NzI=", "number": 470, "title": "Don't expose mutable view data", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-28T22:49:19Z", "updated_at": "2020-02-06T08:18:01Z", "closed_at": "2019-04-02T23:14:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`MeasureToViewMap` exposes mutable `ViewData`s to exporters. Consider exporting a immutable view of `ViewData` instead. \r\n\r\nSee https://github.com/census-instrumentation/opencensus-python/pull/469#discussion_r251619805 for some context.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/468", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/468/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/468/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/468/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/468", "id": 403295657, "node_id": "MDU6SXNzdWU0MDMyOTU2NTc=", "number": 468, "title": "exporter/stats/prometheus: apply sanitization for metric names replacing \"/\" with \"_\"", "user": {"login": "PikBot", "id": 35295607, "node_id": "MDQ6VXNlcjM1Mjk1NjA3", "avatar_url": "https://avatars2.githubusercontent.com/u/35295607?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PikBot", "html_url": "https://github.com/PikBot", "followers_url": "https://api.github.com/users/PikBot/followers", "following_url": "https://api.github.com/users/PikBot/following{/other_user}", "gists_url": "https://api.github.com/users/PikBot/gists{/gist_id}", "starred_url": "https://api.github.com/users/PikBot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PikBot/subscriptions", "organizations_url": "https://api.github.com/users/PikBot/orgs", "repos_url": "https://api.github.com/users/PikBot/repos", "events_url": "https://api.github.com/users/PikBot/events{/privacy}", "received_events_url": "https://api.github.com/users/PikBot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "songy23", "id": 10536136, "node_id": "MDQ6VXNlcjEwNTM2MTM2", "avatar_url": "https://avatars3.githubusercontent.com/u/10536136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songy23", "html_url": "https://github.com/songy23", "followers_url": "https://api.github.com/users/songy23/followers", "following_url": "https://api.github.com/users/songy23/following{/other_user}", "gists_url": "https://api.github.com/users/songy23/gists{/gist_id}", "starred_url": "https://api.github.com/users/songy23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songy23/subscriptions", "organizations_url": "https://api.github.com/users/songy23/orgs", "repos_url": "https://api.github.com/users/songy23/repos", "events_url": "https://api.github.com/users/songy23/events{/privacy}", "received_events_url": "https://api.github.com/users/songy23/received_events", "type": "User", "site_admin": false}, {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-25T19:11:55Z", "updated_at": "2019-01-31T16:41:51Z", "closed_at": "2019-01-31T16:41:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "When metrics have \"/\" or any other unpleasant character, this Prometheus exporter crashes e.g.\r\n```python\r\nlatency_view = view_module.View(\"demo/latency\", \"The distribution of the latencies\",\r\n                                [key_method],\r\n                                m_latency_ms,\r\n                                # Latency in buckets:\r\n                                # [>=0ms, >=25ms, >=50ms, >=75ms, >=100ms, >=200ms, >=400ms, >=600ms, >=800ms, >=1s, >=2s, >=4s, >=6s]\r\n                                aggregation_module.DistributionAggregation([0, 25, 50, 75, 100, 200, 400, 600, 800, 1000, 2000, 4000, 6000]))\r\n```\r\n\r\nOther languages handle this gracefully and provide sanitization to translate such characters into \"_\" such as with OpenCensus Go https://github.com/census-instrumentation/opencensus-go/blob/4baeb639308e8502f1bd4d713236b7978ab8f125/exporter/prometheus/prometheus.go#L253\r\n\r\nwhose code is in https://github.com/census-instrumentation/opencensus-go/blob/4baeb639308e8502f1bd4d713236b7978ab8f125/internal/sanitize.go#L22-L50\r\n```go\r\nconst labelKeySizeLimit = 100\r\n\r\n// Sanitize returns a string that is trunacated to 100 characters if it's too\r\n// long, and replaces non-alphanumeric characters to underscores.\r\nfunc Sanitize(s string) string {\r\n\tif len(s) == 0 {\r\n\t\treturn s\r\n\t}\r\n\tif len(s) > labelKeySizeLimit {\r\n\t\ts = s[:labelKeySizeLimit]\r\n\t}\r\n\ts = strings.Map(sanitizeRune, s)\r\n\tif unicode.IsDigit(rune(s[0])) {\r\n\t\ts = \"key_\" + s\r\n\t}\r\n\tif s[0] == '_' {\r\n\t\ts = \"key\" + s\r\n\t}\r\n\treturn s\r\n}\r\n\r\n// converts anything that is not a letter or digit to an underscore\r\nfunc sanitizeRune(r rune) rune {\r\n\tif unicode.IsLetter(r) || unicode.IsDigit(r) {\r\n\t\treturn r\r\n\t}\r\n\t// Everything else turns into an underscore\r\n\treturn '_'\r\n}\r\n```\r\n\r\nFor a full error stack, given the source code in this gist https://gist.github.com/PikBot/902bd205d53081d373334d0e1430e772\r\nplease see:\r\n```\r\nException happened during processing of request from ('127.0.0.1', 64332)\r\nTraceback (most recent call last):\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/SocketServer.py\", line 596, in process_request_thread\r\n    self.finish_request(request, client_address)\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/SocketServer.py\", line 331, in finish_request\r\n    self.RequestHandlerClass(request, client_address, self)\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/SocketServer.py\", line 652, in __init__\r\n    self.handle()\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/BaseHTTPServer.py\", line 340, in handle\r\n    self.handle_one_request()\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/BaseHTTPServer.py\", line 328, in handle_one_request\r\n    method()\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/site-packages/prometheus_client/exposition.py\", line 146, in do_GET\r\n    output = encoder(registry)\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/site-packages/prometheus_client/exposition.py\", line 89, in generate_latest\r\n    for metric in registry.collect():\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/site-packages/prometheus_client/registry.py\", line 75, in collect\r\n    for metric in collector.collect():\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/site-packages/opencensus/stats/exporters/prometheus_exporter.py\", line 226, in collect\r\n    metric = self.to_metric(desc, tag_values, agg_data)\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/site-packages/opencensus/stats/exporters/prometheus_exporter.py\", line 186, in to_metric\r\n    labels=label_keys)\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/site-packages/prometheus_client/metrics_core.py\", line 185, in __init__\r\n    Metric.__init__(self, name, documentation, 'histogram', unit)\r\n  File \"/Users/prakritibansal/anaconda2/lib/python2.7/site-packages/prometheus_client/metrics_core.py\", line 27, in __init__\r\n    raise ValueError('Invalid metric name: ' + name)\r\nValueError: Invalid metric name: oc_python_demo/latency\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/457", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/457/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/457/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/457/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/457", "id": 400478382, "node_id": "MDU6SXNzdWU0MDA0NzgzODI=", "number": 457, "title": "Implement Resources", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1196594386, "node_id": "MDU6TGFiZWwxMTk2NTk0Mzg2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/GA-Effort", "name": "GA-Effort", "color": "4ebadb", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-17T21:50:50Z", "updated_at": "2019-03-08T23:24:41Z", "closed_at": "2019-03-08T23:24:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Implement the [Resources spec](https://github.com/census-instrumentation/opencensus-specs/blob/ed99dcbaf689afbf3195908bb107fc835d6bb0e3/resource/Resource.md), including:\r\n- setting resources for custom environments\r\n- encoding and decoding resources\r\n- merging resources\r\n\r\nSee also the existing [`MonitoredResource` classes](https://github.com/census-instrumentation/opencensus-python/blob/989470edce8fa7a82813e3846f774fd4927b5b07/opencensus/common/monitored_resource_util/monitored_resource.py).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/456", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/456/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/456/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/456/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/456", "id": 400476045, "node_id": "MDU6SXNzdWU0MDA0NzYwNDU=", "number": 456, "title": "Allow MetricProducers to be added and removed", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1196594386, "node_id": "MDU6TGFiZWwxMTk2NTk0Mzg2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/GA-Effort", "name": "GA-Effort", "color": "4ebadb", "default": false, "description": ""}, {"id": 1079824889, "node_id": "MDU6TGFiZWwxMDc5ODI0ODg5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/metrics", "name": "metrics", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-17T21:44:08Z", "updated_at": "2019-02-05T18:03:34Z", "closed_at": "2019-02-05T18:03:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Depends on #335.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/455", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/455/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/455/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/455/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/455", "id": 400474849, "node_id": "MDU6SXNzdWU0MDA0NzQ4NDk=", "number": 455, "title": "Add Gauges", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1196594386, "node_id": "MDU6TGFiZWwxMTk2NTk0Mzg2", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/GA-Effort", "name": "GA-Effort", "color": "4ebadb", "default": false, "description": ""}, {"id": 1079824889, "node_id": "MDU6TGFiZWwxMDc5ODI0ODg5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/metrics", "name": "metrics", "color": "d4c5f9", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-01-17T21:40:43Z", "updated_at": "2019-02-22T21:46:19Z", "closed_at": "2019-02-22T21:46:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The [metrics data model](https://github.com/census-instrumentation/opencensus-proto/blob/master/src/opencensus/proto/metrics/v1/metrics.proto) includes _gauges_ for instantaneous measurements of values that increase and decrease over time.\r\n\r\nSee e.g. [gauges examples in the java client](https://github.com/census-instrumentation/opencensus-java/pull/1511/files).\r\n\r\nDepends on #335.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/451", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/451/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/451/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/451/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/451", "id": 400046475, "node_id": "MDU6SXNzdWU0MDAwNDY0NzU=", "number": 451, "title": "Replace references to django MIDDLEWARE_CLASSES", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1325516759, "node_id": "MDU6TGFiZWwxMzI1NTE2NzU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/P2", "name": "P2", "color": "e99695", "default": false, "description": ""}, {"id": 642440892, "node_id": "MDU6TGFiZWw2NDI0NDA4OTI=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1134865059, "node_id": "MDU6TGFiZWwxMTM0ODY1MDU5", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/ext", "name": "ext", "color": "bfd4f2", "default": false, "description": ""}, {"id": 642440895, "node_id": "MDU6TGFiZWw2NDI0NDA4OTU=", "url": "https://api.github.com/repos/census-instrumentation/opencensus-python/labels/up-for-grabs", "name": "up-for-grabs", "color": "128A0C", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-16T23:37:33Z", "updated_at": "2019-09-03T15:02:10Z", "closed_at": "2019-09-03T15:02:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`MIDDLEWARE_CLASSES` has been [deprecated in favor of `MIDDLEWARE` ](https://docs.djangoproject.com/en/2.0/topics/http/middleware/#upgrading-pre-django-1-10-style-middleware) since django 2.0. We need to scrub it from the docs, tests, and examples.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/446", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/446/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/446/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/446/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/446", "id": 399092741, "node_id": "MDU6SXNzdWUzOTkwOTI3NDE=", "number": 446, "title": "Add `pending` status for bonds", "user": {"login": "colincadams", "id": 3762913, "node_id": "MDQ6VXNlcjM3NjI5MTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3762913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colincadams", "html_url": "https://github.com/colincadams", "followers_url": "https://api.github.com/users/colincadams/followers", "following_url": "https://api.github.com/users/colincadams/following{/other_user}", "gists_url": "https://api.github.com/users/colincadams/gists{/gist_id}", "starred_url": "https://api.github.com/users/colincadams/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colincadams/subscriptions", "organizations_url": "https://api.github.com/users/colincadams/orgs", "repos_url": "https://api.github.com/users/colincadams/repos", "events_url": "https://api.github.com/users/colincadams/events{/privacy}", "received_events_url": "https://api.github.com/users/colincadams/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-14T22:01:33Z", "updated_at": "2019-01-14T22:02:11Z", "closed_at": "2019-01-14T22:01:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This should be used when the bond has yet to be set ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/445", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/445/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/445/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/445/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/445", "id": 399089780, "node_id": "MDU6SXNzdWUzOTkwODk3ODA=", "number": 445, "title": "Refactor package distribution", "user": {"login": "reyang", "id": 17327289, "node_id": "MDQ6VXNlcjE3MzI3Mjg5", "avatar_url": "https://avatars1.githubusercontent.com/u/17327289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reyang", "html_url": "https://github.com/reyang", "followers_url": "https://api.github.com/users/reyang/followers", "following_url": "https://api.github.com/users/reyang/following{/other_user}", "gists_url": "https://api.github.com/users/reyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/reyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reyang/subscriptions", "organizations_url": "https://api.github.com/users/reyang/orgs", "repos_url": "https://api.github.com/users/reyang/repos", "events_url": "https://api.github.com/users/reyang/events{/privacy}", "received_events_url": "https://api.github.com/users/reyang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-01-14T21:53:05Z", "updated_at": "2019-03-13T19:15:28Z", "closed_at": "2019-03-13T19:15:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently OpenCensus Python is released as a monolithic package ```pip install opencensus``` which has the following disadvantages:\r\n1. One will have to install all the dependencies even if most of them are not being used. This also adds concerns on deployment time/size and security.\r\n2. Some of the exporters / integration with 3rd party libraries have to bind with the core OpenCensus Python release schedule. This is problematic for both the core OpenCensus Python and 3rd party integrations when it comes to the release / hotfix schedule.\r\n\r\nThe proposal is to refactor the current monolithic package using the namespace packaging approach https://packaging.python.org/guides/packaging-namespace-packages/.\r\nSpecifically, https://packaging.python.org/guides/packaging-namespace-packages/#pkgutil-style-namespace-packages will be used given we need to support both Python 2.x and 3.x.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/444", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/444/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/444/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/444/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/444", "id": 399074645, "node_id": "MDU6SXNzdWUzOTkwNzQ2NDU=", "number": 444, "title": "server_interceptor exception logging", "user": {"login": "akefeli", "id": 38741009, "node_id": "MDQ6VXNlcjM4NzQxMDA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38741009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akefeli", "html_url": "https://github.com/akefeli", "followers_url": "https://api.github.com/users/akefeli/followers", "following_url": "https://api.github.com/users/akefeli/following{/other_user}", "gists_url": "https://api.github.com/users/akefeli/gists{/gist_id}", "starred_url": "https://api.github.com/users/akefeli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akefeli/subscriptions", "organizations_url": "https://api.github.com/users/akefeli/orgs", "repos_url": "https://api.github.com/users/akefeli/repos", "events_url": "https://api.github.com/users/akefeli/events{/privacy}", "received_events_url": "https://api.github.com/users/akefeli/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-14T21:10:14Z", "updated_at": "2019-02-12T22:30:25Z", "closed_at": "2019-02-12T22:30:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "What is the reason for logging the exceptions in server_interceptor when calling the original behavior? This is causing exception logs to be duplicated. GRPC server already logs the exceptions properly.\r\n\r\nIt also does not play well with `context.abort`, which raises an Exception internally. \r\n\r\nI don't want to disable logging for the whole module in case there are exceptions caused by the module itself, but I don't see any other way. Also would it not be better if it used `logging.getLogger(__name__)` instead of root logger?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/441", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/441/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/441/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/441/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/441", "id": 398121258, "node_id": "MDU6SXNzdWUzOTgxMjEyNTg=", "number": 441, "title": "Release 0.1.11 with stackdriver trace exporter fixes", "user": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "c24t", "id": 43799105, "node_id": "MDQ6VXNlcjQzNzk5MTA1", "avatar_url": "https://avatars3.githubusercontent.com/u/43799105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c24t", "html_url": "https://github.com/c24t", "followers_url": "https://api.github.com/users/c24t/followers", "following_url": "https://api.github.com/users/c24t/following{/other_user}", "gists_url": "https://api.github.com/users/c24t/gists{/gist_id}", "starred_url": "https://api.github.com/users/c24t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c24t/subscriptions", "organizations_url": "https://api.github.com/users/c24t/orgs", "repos_url": "https://api.github.com/users/c24t/repos", "events_url": "https://api.github.com/users/c24t/events{/privacy}", "received_events_url": "https://api.github.com/users/c24t/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-11T03:50:59Z", "updated_at": "2019-01-17T00:09:37Z", "closed_at": "2019-01-17T00:09:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This should include the fix for #425. See #439.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/439", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/439/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/439/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/439/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/439", "id": 397634331, "node_id": "MDU6SXNzdWUzOTc2MzQzMzE=", "number": 439, "title": "Release 0.1.10 is missing commits", "user": {"login": "davewalkexpel", "id": 41913205, "node_id": "MDQ6VXNlcjQxOTEzMjA1", "avatar_url": "https://avatars0.githubusercontent.com/u/41913205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davewalkexpel", "html_url": "https://github.com/davewalkexpel", "followers_url": "https://api.github.com/users/davewalkexpel/followers", "following_url": "https://api.github.com/users/davewalkexpel/following{/other_user}", "gists_url": "https://api.github.com/users/davewalkexpel/gists{/gist_id}", "starred_url": "https://api.github.com/users/davewalkexpel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davewalkexpel/subscriptions", "organizations_url": "https://api.github.com/users/davewalkexpel/orgs", "repos_url": "https://api.github.com/users/davewalkexpel/repos", "events_url": "https://api.github.com/users/davewalkexpel/events{/privacy}", "received_events_url": "https://api.github.com/users/davewalkexpel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-10T01:24:56Z", "updated_at": "2019-01-11T03:49:07Z", "closed_at": "2019-01-11T03:49:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm not sure how this happened, but tag/release 0.1.10 is missing commits, for example the ones between 11/29-12/15/18.\r\n\r\nThe most important one to us is #425. For the past few weeks we've been blowing through our Stackdriver Trace quota and I finally realized that it was because of this (we had to upgrade to 0.1.10 to get the #429 which fixed another problem that we had). When I hot-fixed it in our app, our usage immediately went down over 90%.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/437", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/437/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/437/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/437/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/437", "id": 397093332, "node_id": "MDU6SXNzdWUzOTcwOTMzMzI=", "number": 437, "title": "Int metric with SumAggregation fails to export to SD", "user": {"login": "colincadams", "id": 3762913, "node_id": "MDQ6VXNlcjM3NjI5MTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3762913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colincadams", "html_url": "https://github.com/colincadams", "followers_url": "https://api.github.com/users/colincadams/followers", "following_url": "https://api.github.com/users/colincadams/following{/other_user}", "gists_url": "https://api.github.com/users/colincadams/gists{/gist_id}", "starred_url": "https://api.github.com/users/colincadams/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colincadams/subscriptions", "organizations_url": "https://api.github.com/users/colincadams/orgs", "repos_url": "https://api.github.com/users/colincadams/repos", "events_url": "https://api.github.com/users/colincadams/events{/privacy}", "received_events_url": "https://api.github.com/users/colincadams/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-08T21:28:28Z", "updated_at": "2019-01-15T20:10:30Z", "closed_at": "2019-01-15T20:10:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The metric is [created as `MetricDescriptorType.CUMULATIVE_INT64`](https://github.com/census-instrumentation/opencensus-python/blob/d0409fceed79c206fdb27847aeb1176ce372cefe/opencensus/stats/metric_utils.py#L53), but a [float value is set on the point](https://github.com/census-instrumentation/opencensus-python/blob/d0409fceed79c206fdb27847aeb1176ce372cefe/opencensus/stats/exporters/stackdriver_exporter.py#L234).\r\n\r\nIt looks like there is some implementation missing in the stackdriver exporter. It seems like we keep breaking out the conditional based on the types of the aggregations, as was done for `DistributionAggregationData`. This will tell us what property we need to access on the aggregation object to get the result. \r\n\r\n(Right now it looks to me like it decides the value to send, for aggregations other than distributions, by looking at the value of the first tag column? If it can be converted to a float then sends that tag value as a float, otherwise it sends it as a string. Was this just a temporary solution early on? Given that the test only uses distribution, this seems like the most likely answer to me?)\r\n\r\nThe odd thing is that for sums `SumAggregationDataFloat` is always used, whether or not it is an `int` or a `float`. It does look like the same implementation can be used for both, so the `Float` suffix should likely just be stripped.\r\n\r\nThen we can decide which field to set on value either by the type of the aggregated data, or by looking at `v_data.view.measure`, as is done in `create_metric_descriptor`.\r\n\r\n*I'm happy to take this work on, as long as my reasoning makes sense and I'm not missing something big!*\r\n\r\nThe error returned is this:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/env/lib/python3.7/site-packages/opencensus/common/transports/async_.py\", line 105, in _thread_main\r\n    self.exporter.emit(data)\r\n  File \"/env/lib/python3.7/site-packages/opencensus/stats/exporters/stackdriver_exporter.py\", line 145, in emit\r\n    self.handle_upload(view_data)\r\n  File \"/env/lib/python3.7/site-packages/opencensus/stats/exporters/stackdriver_exporter.py\", line 157, in handle_upload\r\n    self.upload_stats(view_data)\r\n  File \"/env/lib/python3.7/site-packages/opencensus/stats/exporters/stackdriver_exporter.py\", line 166, in upload_stats\r\n    request[CONS_TIME_SERIES])\r\n  File \"/env/lib/python3.7/site-packages/google/cloud/monitoring_v3/gapic/metric_service_client.py\", line 897, in create_time_series\r\n    request, retry=retry, timeout=timeout, metadata=metadata\r\n  File \"/env/lib/python3.7/site-packages/google/api_core/gapic_v1/method.py\", line 143, in __call__\r\n    return wrapped_func(*args, **kwargs)\r\n  File \"/env/lib/python3.7/site-packages/google/api_core/retry.py\", line 270, in retry_wrapped_func\r\n    on_error=on_error,\r\n  File \"/env/lib/python3.7/site-packages/google/api_core/retry.py\", line 179, in retry_target\r\n    return target()\r\n  File \"/env/lib/python3.7/site-packages/google/api_core/timeout.py\", line 214, in func_with_timeout\r\n    return func(*args, **kwargs)\r\n  File \"/env/lib/python3.7/site-packages/google/api_core/grpc_helpers.py\", line 59, in error_remapped_callable\r\n    six.raise_from(exceptions.from_grpc_error(exc), exc)\r\n  File \"<string>\", line 3, in raise_from\r\ngoogle.api_core.exceptions.InvalidArgument: 400 Request was missing field timeSeries[0].points[0].int64Value.\r\n```\r\n\r\nbased on this:\r\n```\r\nm = measure.MeasureInt(\"m/m\", \"example\", \"1\")\r\nv = view.View(\"v/v\", \"example\", [TagKey.REGION], m, aggregation.SumAggregation())\r\nmonitoring.register_views([m])\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/433", "repository_url": "https://api.github.com/repos/census-instrumentation/opencensus-python", "labels_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/433/labels{/name}", "comments_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/433/comments", "events_url": "https://api.github.com/repos/census-instrumentation/opencensus-python/issues/433/events", "html_url": "https://github.com/census-instrumentation/opencensus-python/issues/433", "id": 393777602, "node_id": "MDU6SXNzdWUzOTM3Nzc2MDI=", "number": 433, "title": "Allow for pluggable execution_context implementations", "user": {"login": "ewhauser", "id": 131389, "node_id": "MDQ6VXNlcjEzMTM4OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/131389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ewhauser", "html_url": "https://github.com/ewhauser", "followers_url": "https://api.github.com/users/ewhauser/followers", "following_url": "https://api.github.com/users/ewhauser/following{/other_user}", "gists_url": "https://api.github.com/users/ewhauser/gists{/gist_id}", "starred_url": "https://api.github.com/users/ewhauser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ewhauser/subscriptions", "organizations_url": "https://api.github.com/users/ewhauser/orgs", "repos_url": "https://api.github.com/users/ewhauser/repos", "events_url": "https://api.github.com/users/ewhauser/events{/privacy}", "received_events_url": "https://api.github.com/users/ewhauser/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-12-23T20:14:10Z", "updated_at": "2019-04-01T22:24:03Z", "closed_at": "2019-04-01T22:24:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The current `execution_context` implementation is hardcoded to use a thread local implementation. Applications running under different threading paradigms, such as `asyncio` or `tornado, require a different context implementation. The only current option available to extend is to monkeypatch the `execution_context`.\r\n\r\nIn order to provide for extensibility, the `execution_context` could delegate it's method calls to a pluggable implementation, i.e.:\r\n\r\n```python\r\n_execution_context_delegate = ThreadLocalExecutionContextDelegate()\r\n\r\ndef get_opencensus_tracer():\r\n    \"\"\"Get the opencensus tracer from thread local.\"\"\"\r\n    return _execution_context_manager.get_opencensus_tracer()\r\n```\r\n\r\nwhere the `ThreadLocalExecutionContextDelegate` is just an implementation of the existing `execution_context` methods. The configuration for the delegate class could either be set directly on the `execution_context` object (although having a stateful configuration method on the class seems like an anti-pattern) or by introducing a global configuration object like `config_integration`.\r\n\r\nHappy to submit a PR with feedback on the approach.\r\n", "performed_via_github_app": null, "score": 1.0}]}