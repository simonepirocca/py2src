{"total_count": 54, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/135", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/135/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/135/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/135", "id": 673231682, "node_id": "MDU6SXNzdWU2NzMyMzE2ODI=", "number": 135, "title": "\u5f53\u8fd4\u56de\u5bf9\u8c61\u662f\u4e00\u4e2amap<SkuPairKey, DefectQueryResDto>\u65f6\uff0c\u63a5\u53e3\u89e3\u6790\u5931\u8d25", "user": {"login": "taomin1", "id": 37476576, "node_id": "MDQ6VXNlcjM3NDc2NTc2", "avatar_url": "https://avatars0.githubusercontent.com/u/37476576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taomin1", "html_url": "https://github.com/taomin1", "followers_url": "https://api.github.com/users/taomin1/followers", "following_url": "https://api.github.com/users/taomin1/following{/other_user}", "gists_url": "https://api.github.com/users/taomin1/gists{/gist_id}", "starred_url": "https://api.github.com/users/taomin1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taomin1/subscriptions", "organizations_url": "https://api.github.com/users/taomin1/orgs", "repos_url": "https://api.github.com/users/taomin1/repos", "events_url": "https://api.github.com/users/taomin1/events{/privacy}", "received_events_url": "https://api.github.com/users/taomin1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-08-05T03:50:30Z", "updated_at": "2020-08-18T09:35:31Z", "closed_at": "2020-08-12T06:10:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u5f00\u53d1\u7684\u63a5\u53e3\u5b9a\u4e49\u5982\u4e0b\uff1a\r\npublic ResultDto<Map<SkuPairKey, DefectQueryResDto>> batchGetInventoryDefectSku4MultiWareHouse(\r\n           List<DefectQueryReqDto> queryDtos) throws TException\r\n\r\n\u62a5\u9519\u4fe1\u606f\u5982\u4e0b\uff1a\r\nError\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/unittest/case.py\", line 59, in testPartExecutor\r\n    yield\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/unittest/case.py\", line 601, in run\r\n    testMethod()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/ddt.py\", line 145, in wrapper\r\n    return func(self, *args, **kwargs)\r\n  File \"/Users/caixia/PycharmProjects/newPythonProject/b2b_api_case_core/monitor_tools/case_listener.py\", line 24, in __deco\r\n    func(*args, **kwargs)\r\n  File \"/Users/caixia/PycharmProjects/newPythonProject/b2b_api_inventory_case_suite/testcase/test_inventory_thrift/test_query/test_TDefectQueryService/test_batchGetInventoryDefectSku.py\", line 29, in test_batchGetInventoryDefectSku\r\n    res = self.client.batchGetInventoryDefectSku(**kwargs[\"request\"])\r\n  File \"/Users/caixia/PycharmProjects/newPythonProject/b2b_api_case_center/wizard/thrift_api/inventory_api/TDefectQueryService.py\", line 22, in batchGetInventoryDefectSku\r\n    return self.thriftclientfactory.call(\"batchGetInventoryDefectSku\", params_dict)\r\n  File \"/Users/caixia/PycharmProjects/newPythonProject/b2b_api_case_core/object/tool/thriftClientFactoryV2.py\", line 90, in call\r\n    res = fun(*args)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/thriftpy2/thrift.py\", line 203, in _req\r\n    return self._recv(_api)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/thriftpy2/thrift.py\", line 222, in _recv\r\n    result.read(self._iprot)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/thriftpy2/thrift.py\", line 150, in read\r\n    iprot.read_struct(self)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/thriftpy2/protocol/binary.py\", line 386, in read_struct\r\n    return read_struct(self.trans, obj, self.decode_response)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/thriftpy2/protocol/binary.py\", line 315, in read_struct\r\n    read_val(inbuf, f_type, f_container_spec, decode_response))\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/thriftpy2/protocol/binary.py\", line 288, in read_val\r\n    read_struct(inbuf, obj, decode_response)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/thriftpy2/protocol/binary.py\", line 315, in read_struct\r\n    read_val(inbuf, f_type, f_container_spec, decode_response))\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/thriftpy2/protocol/binary.py\", line 282, in read_val\r\n    result[k_val] = v_val\r\nTypeError: unhashable type: 'SkuPairKey'\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/134", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/134/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/134/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/134/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/134", "id": 671092918, "node_id": "MDU6SXNzdWU2NzEwOTI5MTg=", "number": 134, "title": "Unable to use thriftpy2 on AWS lambda", "user": {"login": "liamschn", "id": 57731583, "node_id": "MDQ6VXNlcjU3NzMxNTgz", "avatar_url": "https://avatars3.githubusercontent.com/u/57731583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liamschn", "html_url": "https://github.com/liamschn", "followers_url": "https://api.github.com/users/liamschn/followers", "following_url": "https://api.github.com/users/liamschn/following{/other_user}", "gists_url": "https://api.github.com/users/liamschn/gists{/gist_id}", "starred_url": "https://api.github.com/users/liamschn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liamschn/subscriptions", "organizations_url": "https://api.github.com/users/liamschn/orgs", "repos_url": "https://api.github.com/users/liamschn/repos", "events_url": "https://api.github.com/users/liamschn/events{/privacy}", "received_events_url": "https://api.github.com/users/liamschn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-01T18:33:59Z", "updated_at": "2020-08-03T02:33:18Z", "closed_at": "2020-08-01T18:42:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "[ERROR] Runtime.ImportModuleError: Unable to import module '[modulename]': cannot import name 'TCyBinaryProtocol' from 'thriftpy2.protocol.cybin' (unknown location)\r\n\r\n[modulename] is the name of the module I am creating.\r\n\r\nI have already tried what is listed in [Import issue on AWS Lambda #36](https://github.com/Thriftpy/thriftpy2/issues/36)\r\nLast comment in the above issue mentions \"...C extensions require GCC or LLVM for installation, try to install it with GCC on Linux...\", however, AWS lambda does not allow you to \"install it with GCC on linux\"...but that would have been accomplished with the fact that I set all of this up on an AWS linux instance and copied it from there (after confirming that it worked)\r\nThe code runs without problems at all on a regular AWS linux instance, but when uploaded to AWS lambda, it throws the error above.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/131", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/131/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/131/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/131", "id": 595311868, "node_id": "MDU6SXNzdWU1OTUzMTE4Njg=", "number": 131, "title": "Thriftpy2 hangs while decoding string", "user": {"login": "carloVentrella", "id": 3150603, "node_id": "MDQ6VXNlcjMxNTA2MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/3150603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carloVentrella", "html_url": "https://github.com/carloVentrella", "followers_url": "https://api.github.com/users/carloVentrella/followers", "following_url": "https://api.github.com/users/carloVentrella/following{/other_user}", "gists_url": "https://api.github.com/users/carloVentrella/gists{/gist_id}", "starred_url": "https://api.github.com/users/carloVentrella/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carloVentrella/subscriptions", "organizations_url": "https://api.github.com/users/carloVentrella/orgs", "repos_url": "https://api.github.com/users/carloVentrella/repos", "events_url": "https://api.github.com/users/carloVentrella/events{/privacy}", "received_events_url": "https://api.github.com/users/carloVentrella/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-06T17:56:32Z", "updated_at": "2020-05-28T03:11:55Z", "closed_at": "2020-05-28T03:11:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nwhile using impyla to fetch results from impala, we faced a problem that seems related to the decode phase in thriftpy.\r\n\r\nWe're using version 0.4.11\r\n\r\nWhen using the default batch_size (but we also tried with smaller ones), we see that thriftpy gets stuck while parsing the input buffer. I report the snippet from `binary.py`, enriched with some prints, useful during troubleshooting.\r\n\r\n```\r\nelif ttype == TType.STRING:\r\n        print(\"reading string\")\r\n        sz = unpack_i32(inbuf.read(4))\r\n        byte_payload = inbuf.read(sz)        \r\n        print(\"sz: %s\", sz)\r\n        print(\"byte_payload: %s\", byte_payload)\r\n\r\n```\r\n\r\nWe did some troubleshooting.\r\nThe impala query is very simple:\r\n\r\n```\r\nSELECT col FROM default.mytable where date=\"20200120\" order by col2 limit 300\r\n```\r\n\r\nWe can see that thriftpy is able to decode many rows, then it blocks into `inbuf.read(sz)`.\r\nInterstingly, we noticed that the last payload reports some bytes that are not present in the original column.\r\n\r\n```\r\nbyte_payload: %s b'44444|A1|11111|20200120|980e417f-4773-4d30-7703-5821420ac5eb'\r\nreading string\r\nsz: %s 45\r\nbyte_payload: %s b'c6c6c|AXXX_YYY|11111111|20200120|689541623112'\r\nreading string\r\nsz: %s 60\r\nbyte_payload: %s b'55555|A1|00000|20200120|2d8638d7-f5f6-4b51-ba58e1a0b15cb\\x00\\x00\\x00='\r\nreading string\r\n<--- stuck on input.read(sz) of the next row ---> \r\n```\r\nWe see that  a `\\x00\\x00\\x00=` is being added to the original value.\r\n\r\nThis is not a problem of the value itself, because the following query returns it correctly:\r\n\r\n```\r\nSELECT *  from default.mytable where col like '55555|A1|00000|20200120|2d8638d7-f5f6-4b51-ba58e1a0b15cb' limit 1\r\n```\r\n\r\nWe also tried to run similar queries, but we got similar issue. I report the most significant.\r\nBefore getting stuck we get:\r\n\r\n```\r\nbyte_payload: %s b'15155|A1|81500|20200120|2d8638d7-f5f6-4b51-ba58e1a0b15cb'\r\n```\r\nHere there are no strange characters, but the value is not correct. In impala the value is the following:\r\n\r\n```\r\n15155|A1|81500|20200120|2d8638d7-f5f6-4b51-baa5-858e1a0b15cb\r\n```\r\nIt's not immediate, but in the print added inside thriftpy, there's a `a5-8` which is not present in the database.\r\n\r\nDo you have any idea of what can be the problem?\r\n\r\nThank you!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/130", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/130/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/130/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/130/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/130", "id": 584162420, "node_id": "MDU6SXNzdWU1ODQxNjI0MjA=", "number": 130, "title": "\u8fde\u63a5\u8d85\u65f6\u540e\uff0c\u5c06\u8d85\u65f6\u5f53\u6b21\u7684thrift server\u7ed3\u679c\u8986\u76d6\u7ed9\u4e0b\u6b21\u6b63\u5e38\u8bbf\u95ee\u7684\u7ed3\u679c", "user": {"login": "accjiyun", "id": 13925761, "node_id": "MDQ6VXNlcjEzOTI1NzYx", "avatar_url": "https://avatars1.githubusercontent.com/u/13925761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/accjiyun", "html_url": "https://github.com/accjiyun", "followers_url": "https://api.github.com/users/accjiyun/followers", "following_url": "https://api.github.com/users/accjiyun/following{/other_user}", "gists_url": "https://api.github.com/users/accjiyun/gists{/gist_id}", "starred_url": "https://api.github.com/users/accjiyun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/accjiyun/subscriptions", "organizations_url": "https://api.github.com/users/accjiyun/orgs", "repos_url": "https://api.github.com/users/accjiyun/repos", "events_url": "https://api.github.com/users/accjiyun/events{/privacy}", "received_events_url": "https://api.github.com/users/accjiyun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821642, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQy", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}, {"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1069821645, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ1", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-19T04:57:08Z", "updated_at": "2020-05-07T04:48:27Z", "closed_at": "2020-04-05T14:17:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u7248\u672c\u53f7\uff1a0.4.10\r\n\r\n\u5f53thrift client\u8fde\u63a5\u65f6\u95f4\u8d85\u8fc7\u8bbe\u7f6e\u7684\u8d85\u65f6\u9608\u503c\u540e\uff0c\u8fde\u63a5\u5e76\u6ca1\u6709\u65ad\u5f00\uff0c\u800c\u662f\u5c06\u672c\u6b21\u7684\u8d85\u65f6\u7ed3\u679c\u6570\u636e\u653e\u5230\u4e86\u7f13\u5b58\u4e2d\uff0c\u5e76\u4e14\u8986\u76d6\u4e86\u4e0b\u6b21\u8bbf\u95eethrift server\u7684\u8fd4\u56de\u7ed3\u679c\u3002\r\n\r\n-----------------------------------------\r\n\r\n\u4e3e\u4e2a\u4f8b\u5b50\uff1a\r\nthrift server:\r\n```\r\ndef get(msg):\r\n    return msg\r\n```\r\n\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u4f9d\u6b21\u8bbf\u95ee\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff1a\r\nclient.get(1) \u5f97\u5230\u7684\u7ed3\u679c\u662f1\r\nclient.get(2) \u5f97\u5230\u7684\u7ed3\u679c\u662f2\r\n\r\n\u5982\u679c\u5728\u7b2c\u4e00\u6b65client.get(1) \u8d85\u65f6\u8fd4\u56de\u7ed3\u679c\u4e3a\u7a7a\uff0c\u7b2c\u4e8c\u6b21\u8bbf\u95eeclient.get(2) \u5f97\u5230\u7684\u662f1\r\n\r\n--------------------------------------------\r\n\r\n\u6211\u7684\u8fde\u63a5\u65b9\u5f0f\u548c\u8d85\u65f6\u9519\u8bef\u5982\u4e0b\uff1a\r\n\r\n```python\r\n            self._client = make_client(getattr(self.service_thrift, self.service),\r\n                                       host, int(port),\r\n                                       trans_factory=TFramedTransportFactory(),\r\n                                       timeout=100\r\n                                       )\r\n```\r\n\r\n```python\r\n    fname, mtype, rseqid = self._iprot.read_message_begin()\r\n  File \"thriftpy2/protocol/cybin/cybin.pyx\", line 429, in cybin.TCyBinaryProtocol.read_message_begin\r\n    size = read_i32(self.trans)\r\n  File \"thriftpy2/protocol/cybin/cybin.pyx\", line 60, in cybin.read_i32\r\n    buf.c_read(4, data)\r\n  File \"thriftpy2/transport/framed/cyframed.pyx\", line 48, in thriftpy2.transport.framed.cyframed.TCyFramedTransport.c_read\r\n    self.read_frame()\r\n  File \"thriftpy2/transport/framed/cyframed.pyx\", line 68, in thriftpy2.transport.framed.cyframed.TCyFramedTransport.read_frame\r\n    self.read_trans(4, frame_len)\r\n  File \"thriftpy2/transport/framed/cyframed.pyx\", line 31, in thriftpy2.transport.framed.cyframed.TCyFramedTransport.read_trans\r\n    cdef int i = self.rbuf.read_trans(self.trans, sz, out)\r\n  File \"thriftpy2/transport/cybase.pyx\", line 61, in thriftpy2.transport.cybase.TCyBuffer.read_trans\r\n    new_data = trans.read(cap)\r\n  File \"/home/jiyun/.pyenv/versions/XXX/lib/python2.7/site-packages/thriftpy2/transport/socket.py\", line 110, in read\r\n    buff = self.sock.recv(sz)\r\ntimeout: timed out\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/127", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/127/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/127/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/127/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/127", "id": 577369075, "node_id": "MDU6SXNzdWU1NzczNjkwNzU=", "number": 127, "title": "How to close a server?", "user": {"login": "danieljfarrell", "id": 112847, "node_id": "MDQ6VXNlcjExMjg0Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/112847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danieljfarrell", "html_url": "https://github.com/danieljfarrell", "followers_url": "https://api.github.com/users/danieljfarrell/followers", "following_url": "https://api.github.com/users/danieljfarrell/following{/other_user}", "gists_url": "https://api.github.com/users/danieljfarrell/gists{/gist_id}", "starred_url": "https://api.github.com/users/danieljfarrell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danieljfarrell/subscriptions", "organizations_url": "https://api.github.com/users/danieljfarrell/orgs", "repos_url": "https://api.github.com/users/danieljfarrell/repos", "events_url": "https://api.github.com/users/danieljfarrell/events{/privacy}", "received_events_url": "https://api.github.com/users/danieljfarrell/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-03-07T16:57:37Z", "updated_at": "2020-03-09T16:49:51Z", "closed_at": "2020-03-09T16:49:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I want to start and stop a thriftpy2 service from inside a running desktop application. However, calling `close` on the server does not terminate it\u2019s thread and the application hangs.\r\n\r\nFor example,\r\n\r\n```python\r\ndef start_button_clicked(self):\r\n    self.server = make_server(...)\r\n    self.thd = threading.Thread(target=server.serve)\r\n\r\ndef stop_button_clicked(self):\r\n    self.server.close()\r\n    self.thd.join() # <\u2014 hangs \r\n    self.server = None\r\n    self.thd = None\r\n```\r\n\r\nMaybe I am doing something wrong?\r\n\r\nI\u2019m using Python 3.6.9 and thriftpy2 0.4.10 on Windows 10.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/126", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/126/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/126/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/126/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/126", "id": 575326752, "node_id": "MDU6SXNzdWU1NzUzMjY3NTI=", "number": 126, "title": "exceptions defined in idls and included by other idl does not work if thrift file loaded by import hook", "user": {"login": "shuoli84", "id": 3402035, "node_id": "MDQ6VXNlcjM0MDIwMzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3402035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shuoli84", "html_url": "https://github.com/shuoli84", "followers_url": "https://api.github.com/users/shuoli84/followers", "following_url": "https://api.github.com/users/shuoli84/following{/other_user}", "gists_url": "https://api.github.com/users/shuoli84/gists{/gist_id}", "starred_url": "https://api.github.com/users/shuoli84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shuoli84/subscriptions", "organizations_url": "https://api.github.com/users/shuoli84/orgs", "repos_url": "https://api.github.com/users/shuoli84/repos", "events_url": "https://api.github.com/users/shuoli84/events{/privacy}", "received_events_url": "https://api.github.com/users/shuoli84/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-03-04T11:25:33Z", "updated_at": "2020-03-11T08:35:14Z", "closed_at": "2020-03-11T08:35:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "two idls:\r\n\r\ncommon.thrift:\r\n```thrift\r\nexception CommonEx {\r\n    1 i32 code,\r\n}\r\n```\r\n\r\napp.thrift\r\n\r\n```thrift\r\ninclude \"common.thrift\"\r\n\r\nservice AppService {\r\n    i64 do_something() (1: common.CommonEx ex)\r\n}\r\n```\r\n\r\nif import them by import hook\r\n\r\n```python\r\nfrom common_thrift import CommonEx   # CommonExA\r\nfrom app_thrift import AppService  # The CommonEx in AppService as CommonExB\r\n\r\n# this assert will fail.\r\nassert isinstance(CommonEx(code=1), AppService.do_something_result.ex) \r\n```\r\n\r\nReason: CommonExA's module is \"common_thrift\", CommonExB's module is \"common\"", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/121", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/121/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/121/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/121", "id": 573987673, "node_id": "MDU6SXNzdWU1NzM5ODc2NzM=", "number": 121, "title": "include with dot in string", "user": {"login": "aisk", "id": 699636, "node_id": "MDQ6VXNlcjY5OTYzNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/699636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aisk", "html_url": "https://github.com/aisk", "followers_url": "https://api.github.com/users/aisk/followers", "following_url": "https://api.github.com/users/aisk/following{/other_user}", "gists_url": "https://api.github.com/users/aisk/gists{/gist_id}", "starred_url": "https://api.github.com/users/aisk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aisk/subscriptions", "organizations_url": "https://api.github.com/users/aisk/orgs", "repos_url": "https://api.github.com/users/aisk/repos", "events_url": "https://api.github.com/users/aisk/events{/privacy}", "received_events_url": "https://api.github.com/users/aisk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821638, "node_id": "MDU6TGFiZWwxMDY5ODIxNjM4", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-02T13:50:03Z", "updated_at": "2020-08-19T09:00:34Z", "closed_at": "2020-08-19T09:00:34Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "animal.people.thrift:\r\n\r\n```thift\r\nstruct People {\r\n       1: i32 age,\r\n       2: string name,\r\n}\r\n```\r\n\r\ntest.thrift:\r\n\r\n```thrift\r\ninclude \"animal.people.thrift\"\r\n\r\ntypedef animal.people.People People\r\n```\r\n\r\nmain.py:\r\n\r\n```python\r\nimport thriftpy2\r\n\r\n\r\nthriftpy2.load('./test.thrift')\r\n```\r\n\r\n---\r\n\r\nRun it:\r\n\r\n```\r\n$ python main.py\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 4, in <module>\r\n    thriftpy2.load('./test.thrift')\r\n  File \"/Users/asaka/Codes/thriftpy2/thriftpy2/parser/__init__.py\", line 33, in load\r\n    include_dir=include_dir)\r\n  File \"/Users/asaka/Codes/thriftpy2/thriftpy2/parser/parser.py\", line 588, in parse\r\n    parser.parse(data)\r\n  File \"/Users/asaka/Codes/thriftpy2/venv/lib/python3.7/site-packages/ply/yacc.py\", line 333, in parse\r\n    return self.parseopt_notrack(input, lexer, debug, tracking, tokenfunc)\r\n  File \"/Users/asaka/Codes/thriftpy2/venv/lib/python3.7/site-packages/ply/yacc.py\", line 1120, in parseopt_notrack\r\n    p.callable(pslice)\r\n  File \"/Users/asaka/Codes/thriftpy2/thriftpy2/parser/parser.py\", line 399, in p_ref_type\r\n    (p[1], p.lineno(1)))\r\nthriftpy2.parser.exc.ThriftParserError: No type found: 'people.People', at line 3\r\n```\r\n\r\nThe original thrift can parse this style's thrift but thriftpy2 does not. I think this should be a bug in thriftpy2.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/120", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/120/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/120/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/120", "id": 570425906, "node_id": "MDU6SXNzdWU1NzA0MjU5MDY=", "number": 120, "title": "why it happen? thanks!", "user": {"login": "dmax678", "id": 53040003, "node_id": "MDQ6VXNlcjUzMDQwMDAz", "avatar_url": "https://avatars1.githubusercontent.com/u/53040003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmax678", "html_url": "https://github.com/dmax678", "followers_url": "https://api.github.com/users/dmax678/followers", "following_url": "https://api.github.com/users/dmax678/following{/other_user}", "gists_url": "https://api.github.com/users/dmax678/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmax678/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmax678/subscriptions", "organizations_url": "https://api.github.com/users/dmax678/orgs", "repos_url": "https://api.github.com/users/dmax678/repos", "events_url": "https://api.github.com/users/dmax678/events{/privacy}", "received_events_url": "https://api.github.com/users/dmax678/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-25T09:24:27Z", "updated_at": "2020-02-26T04:12:42Z", "closed_at": "2020-02-26T04:12:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "from thriftpy2.protocol import TCyBinaryProtocolFactory\r\nImportError: cannot import name 'TCyBinaryProtocolFactory' from 'thriftpy2.protocol'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/118", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/118/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/118/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/118", "id": 565560492, "node_id": "MDU6SXNzdWU1NjU1NjA0OTI=", "number": 118, "title": "composite services", "user": {"login": "thoward27", "id": 15902840, "node_id": "MDQ6VXNlcjE1OTAyODQw", "avatar_url": "https://avatars3.githubusercontent.com/u/15902840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thoward27", "html_url": "https://github.com/thoward27", "followers_url": "https://api.github.com/users/thoward27/followers", "following_url": "https://api.github.com/users/thoward27/following{/other_user}", "gists_url": "https://api.github.com/users/thoward27/gists{/gist_id}", "starred_url": "https://api.github.com/users/thoward27/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thoward27/subscriptions", "organizations_url": "https://api.github.com/users/thoward27/orgs", "repos_url": "https://api.github.com/users/thoward27/repos", "events_url": "https://api.github.com/users/thoward27/events{/privacy}", "received_events_url": "https://api.github.com/users/thoward27/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-14T21:18:21Z", "updated_at": "2020-02-17T03:06:34Z", "closed_at": "2020-02-17T03:06:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "does anyone know how to create composite services with this? \r\n\r\nI'm considering using thrift for a project, but would need this functionality, trying to avoid using the thrift compiler itself if I can", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/117", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/117/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/117/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/117/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/117", "id": 561005601, "node_id": "MDU6SXNzdWU1NjEwMDU2MDE=", "number": 117, "title": "os.path.samfile patch craches shutil.copy2 under python 2.7.15", "user": {"login": "Josef-A", "id": 19255921, "node_id": "MDQ6VXNlcjE5MjU1OTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/19255921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Josef-A", "html_url": "https://github.com/Josef-A", "followers_url": "https://api.github.com/users/Josef-A/followers", "following_url": "https://api.github.com/users/Josef-A/following{/other_user}", "gists_url": "https://api.github.com/users/Josef-A/gists{/gist_id}", "starred_url": "https://api.github.com/users/Josef-A/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Josef-A/subscriptions", "organizations_url": "https://api.github.com/users/Josef-A/orgs", "repos_url": "https://api.github.com/users/Josef-A/repos", "events_url": "https://api.github.com/users/Josef-A/events{/privacy}", "received_events_url": "https://api.github.com/users/Josef-A/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821642, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQy", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-06T13:15:39Z", "updated_at": "2020-02-13T12:25:52Z", "closed_at": "2020-02-13T12:25:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "The patch https://github.com/Thriftpy/thriftpy/pull/172 changes the behavior of os.path.\r\nThe function os.path.samefile is not available for Python 2 under windows. The patch adds that function. Unfortunately it doesn't work as expected.\r\n\r\nI have some code that copies one file to another:\r\n\r\n``` python\r\nsrc = u'D:\\\\tmp\\\\source.txt'\r\ndst = u'D:\\\\tmp\\\\destination.txt'\r\nshutil.copy2(src, dst)\r\n```\r\n\r\nIf the files are identical it will crash.\r\n\r\nMy workaround is:\r\n``` python\r\nif sys.version_info.major == 2 and hasattr(os.path, 'samefile'):\r\n    # Run with hack\r\n    backupfcn = os.path.samefile\r\n    del os.path.samefile\r\n    shutil.copy2(src, src)\r\n    os.path.samefile = backupfcn\r\nelse:\r\n    shutil.copy2(src, src)\r\n```\r\n\r\nI can live with it. I am in the process of migrating to Python 3, and then this patch will not be used if I understand it correct.\r\n\r\nI just wanted to indicate that the patch has impacts that may not have been intended\r\n\r\nRegards\r\n     Josef\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/116", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/116/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/116/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/116", "id": 560863888, "node_id": "MDU6SXNzdWU1NjA4NjM4ODg=", "number": 116, "title": "ImportError: cannot import name 'TCyBinaryProtocol'", "user": {"login": "HelloTan", "id": 34239334, "node_id": "MDQ6VXNlcjM0MjM5MzM0", "avatar_url": "https://avatars2.githubusercontent.com/u/34239334?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HelloTan", "html_url": "https://github.com/HelloTan", "followers_url": "https://api.github.com/users/HelloTan/followers", "following_url": "https://api.github.com/users/HelloTan/following{/other_user}", "gists_url": "https://api.github.com/users/HelloTan/gists{/gist_id}", "starred_url": "https://api.github.com/users/HelloTan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HelloTan/subscriptions", "organizations_url": "https://api.github.com/users/HelloTan/orgs", "repos_url": "https://api.github.com/users/HelloTan/repos", "events_url": "https://api.github.com/users/HelloTan/events{/privacy}", "received_events_url": "https://api.github.com/users/HelloTan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1180811177, "node_id": "MDU6TGFiZWwxMTgwODExMTc3", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/need%20more%20info", "name": "need more info", "color": "0daa32", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-06T08:52:21Z", "updated_at": "2020-02-10T15:11:54Z", "closed_at": "2020-02-10T15:11:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Python 3.5\r\n\r\n    from api.lib import *\r\n  File \"/root/protect/api/lib/__init__.py\", line 2, in <module>\r\n    from .client import LineClient\r\n  File \"/root/protect/api/lib/client.py\", line 3, in <module>\r\n    from .api import LineAPI\r\n  File \"/root/protect/api/lib/api.py\", line 8, in <module>\r\n    from api.thriftpy2.protocol import TCompactProtocol\r\n  File \"/root/protect/api/thriftpy2/protocol/__init__.py\", line 15, in <module>\r\n    from .cybin import TCyBinaryProtocol, TCyBinaryProtocolFactory\r\nImportError: cannot import name 'TCyBinaryProtocol'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/113", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/113/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/113/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/113", "id": 546237982, "node_id": "MDU6SXNzdWU1NDYyMzc5ODI=", "number": 113, "title": "Missing tags for 0.4.8 and newer releases", "user": {"login": "scarabeusiv", "id": 1055830, "node_id": "MDQ6VXNlcjEwNTU4MzA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1055830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarabeusiv", "html_url": "https://github.com/scarabeusiv", "followers_url": "https://api.github.com/users/scarabeusiv/followers", "following_url": "https://api.github.com/users/scarabeusiv/following{/other_user}", "gists_url": "https://api.github.com/users/scarabeusiv/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarabeusiv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarabeusiv/subscriptions", "organizations_url": "https://api.github.com/users/scarabeusiv/orgs", "repos_url": "https://api.github.com/users/scarabeusiv/repos", "events_url": "https://api.github.com/users/scarabeusiv/events{/privacy}", "received_events_url": "https://api.github.com/users/scarabeusiv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-07T11:42:18Z", "updated_at": "2020-01-14T07:20:38Z", "closed_at": "2020-01-14T07:20:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Could you please publish the tags.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/112", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/112/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/112/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/112/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/112", "id": 544819272, "node_id": "MDU6SXNzdWU1NDQ4MTkyNzI=", "number": 112, "title": "will it block when I make a rpc request on my client server?", "user": {"login": "Friday21", "id": 10892548, "node_id": "MDQ6VXNlcjEwODkyNTQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/10892548?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Friday21", "html_url": "https://github.com/Friday21", "followers_url": "https://api.github.com/users/Friday21/followers", "following_url": "https://api.github.com/users/Friday21/following{/other_user}", "gists_url": "https://api.github.com/users/Friday21/gists{/gist_id}", "starred_url": "https://api.github.com/users/Friday21/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Friday21/subscriptions", "organizations_url": "https://api.github.com/users/Friday21/orgs", "repos_url": "https://api.github.com/users/Friday21/repos", "events_url": "https://api.github.com/users/Friday21/events{/privacy}", "received_events_url": "https://api.github.com/users/Friday21/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-03T01:44:03Z", "updated_at": "2020-01-21T11:03:54Z", "closed_at": "2020-01-21T11:03:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use flask providing web api, above flask, I use gunicorn <gevent workder> to patch all block I/O such as pymongo and requests, but I think it will block on rpc client request, because rpc use tcp to communicate, and gunicorn don't patch it. so, how can I make the client request not blocking?\r\n\r\n\u6211\u7528flask\u6846\u67b6\u6765\u505a\u670d\u52a1\u7aef\uff0c \u9879\u76ee\u542f\u52a8\u7684\u65f6\u5019\u7528gunicorn\u7684gevent\u7684worker\u6a21\u5f0f\uff0c \u636e\u6211\u6240\u77e5\uff0c gevent\u4f1a\u628aPython\u6807\u51c6\u5e93\u4ee5\u53ca\u5e38\u7528\u7684pymongo\u7b49\u6570\u636e\u5e93\u8bf7\u6c42\u4ee5\u53carequests\u7b49\u5e93patch\u6210\u975e\u963b\u585e\u7684\uff0c\u8fd9\u6837\u6211\u7684\u670d\u52a1\u5c31\u53ef\u4ee5\u6709\u5f88\u5927\u7684\u5e76\u53d1\u80fd\u529b\uff0c\u4f46\u6211\u4eec\u73b0\u5728\u7528\u4e86thrift rpc\u4e4b\u540e\uff0c \u6211\u6000\u7591\u5728\u505arpc\u8bf7\u6c42\u65f6\uff08\u672c\u670d\u52a1\u5411\u53e6\u4e00\u4e2a\u5fae\u670d\u52a1\u8bf7\u6c42\uff09\uff0c I/O \u4f1a\u963b\u585e\u6389\uff0c \u8bf7\u95ee\u6709\u4ec0\u4e48\u597d\u65b9\u6cd5\u6765\u89e3\u51b3\u5462\uff1f \u8bf7\u6c42\u8c03\u7528\u6539\u6210asyncio\u80fd\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5417\uff08\u6211\u4e0d\u786e\u5b9athriftpy\u91cc\u8fb9\u5b9e\u9645\u7684tcp\u8fc7\u7a0b\u662f\u5426\u4f1a\u7ee7\u7eed\u963b\u585e\u7684\uff09\uff1f", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/105", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/105/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/105/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/105/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/105", "id": 532491057, "node_id": "MDU6SXNzdWU1MzI0OTEwNTc=", "number": 105, "title": "Invalid thrift_spec if type is used before define", "user": {"login": "aisk", "id": 699636, "node_id": "MDQ6VXNlcjY5OTYzNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/699636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aisk", "html_url": "https://github.com/aisk", "followers_url": "https://api.github.com/users/aisk/followers", "following_url": "https://api.github.com/users/aisk/following{/other_user}", "gists_url": "https://api.github.com/users/aisk/gists{/gist_id}", "starred_url": "https://api.github.com/users/aisk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aisk/subscriptions", "organizations_url": "https://api.github.com/users/aisk/orgs", "repos_url": "https://api.github.com/users/aisk/repos", "events_url": "https://api.github.com/users/aisk/events{/privacy}", "received_events_url": "https://api.github.com/users/aisk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821638, "node_id": "MDU6TGFiZWwxMDY5ODIxNjM4", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-04T07:04:14Z", "updated_at": "2019-12-07T15:09:34Z", "closed_at": "2019-12-07T15:09:34Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Codes to reproduce this:\r\n\r\ntest.thrift\r\n\r\n```thrift\r\nstruct Container {\r\n    1: A field1;\r\n    2: list<A> field2;\r\n    3: list<map<string, A>> field3;\r\n}\r\n\r\nstruct A {\r\n    1: string value\r\n}\r\n```\r\n\r\ntest.py\r\n\r\n```python\r\nimport thriftpy2\r\nfrom pprint import pprint\r\n\r\ntest_thrift = thriftpy2.load('./test.thrift')\r\n\r\npprint(test_thrift.Container.thrift_spec)\r\n```\r\n\r\noutput:\r\n\r\n```\r\n{1: (12, 'field1', <class 'test.A'>, False),\r\n 2: (15, 'field2', (12, <class 'test.A'>), False),\r\n 3: (15, 'field3', (13, (11, -3)), False)}\r\n```\r\n\r\nNotice the `field3`, it's spec is expected to be `(15, 'field3', (13, (11, <class 'test.A'>)), False)` like `field2`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/104", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/104/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/104/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/104", "id": 531136000, "node_id": "MDU6SXNzdWU1MzExMzYwMDA=", "number": 104, "title": "TProtocolException message is omitted in repr", "user": {"login": "a-shkarupin", "id": 2952020, "node_id": "MDQ6VXNlcjI5NTIwMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/2952020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a-shkarupin", "html_url": "https://github.com/a-shkarupin", "followers_url": "https://api.github.com/users/a-shkarupin/followers", "following_url": "https://api.github.com/users/a-shkarupin/following{/other_user}", "gists_url": "https://api.github.com/users/a-shkarupin/gists{/gist_id}", "starred_url": "https://api.github.com/users/a-shkarupin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a-shkarupin/subscriptions", "organizations_url": "https://api.github.com/users/a-shkarupin/orgs", "repos_url": "https://api.github.com/users/a-shkarupin/repos", "events_url": "https://api.github.com/users/a-shkarupin/events{/privacy}", "received_events_url": "https://api.github.com/users/a-shkarupin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821638, "node_id": "MDU6TGFiZWwxMDY5ODIxNjM4", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-02T13:41:45Z", "updated_at": "2019-12-23T01:45:26Z", "closed_at": "2019-12-23T01:45:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "When getting `TProtocolException` in stack trace, I see no message:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/site-packages/happybase/table.py\", line 418, in scan\r\n    raise e\r\n  File \"/usr/local/lib/python3.8/site-packages/happybase/table.py\", line 415, in scan\r\n    items = self.connection.client.scannerGetList(scan_id, how_many)\r\n  File \"/usr/local/lib/python3.8/site-packages/thriftpy2/thrift.py\", line 219, in _req\r\n    return self._recv(_api)\r\n  File \"/usr/local/lib/python3.8/site-packages/thriftpy2/thrift.py\", line 231, in _recv\r\n    fname, mtype, rseqid = self._iprot.read_message_begin()\r\n  File \"/usr/local/lib/python3.8/site-packages/thriftpy2/protocol/compact.py\", line 145, in read_message_begin\r\n    raise TProtocolException(TProtocolException.BAD_VERSION,\r\nthriftpy2.protocol.exc.TProtocolException: TProtocolException(type=4)\r\n``` \r\n\r\nConsider the following snippet:\r\n\r\n```\r\nPython 3.8.0 (default, Nov 23 2019, 05:36:56) \r\n[GCC 8.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from thriftpy2.protocol.exc import TProtocolException\r\n>>> x = TProtocolException(TProtocolException.BAD_VERSION, 'message please')\r\n>>> x\r\nTProtocolException(type=4)\r\n>>> x.message\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nAttributeError: 'TProtocolException' object has no attribute 'message'\r\n>>> x.args\r\n('message please',)\r\n>>> x.__dict__\r\n{'type': 4}\r\n\r\n```\r\nLooks like this is caused by overriding the default `__str__()` in `TPayload`: https://github.com/Thriftpy/thriftpy2/blob/master/thriftpy2/thrift.py#L169\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/97", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/97/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/97/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/97", "id": 523929517, "node_id": "MDU6SXNzdWU1MjM5Mjk1MTc=", "number": 97, "title": " Why is __thrift_meta__.consts  a list?  ", "user": {"login": "nhywieza", "id": 8528287, "node_id": "MDQ6VXNlcjg1MjgyODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8528287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nhywieza", "html_url": "https://github.com/nhywieza", "followers_url": "https://api.github.com/users/nhywieza/followers", "following_url": "https://api.github.com/users/nhywieza/following{/other_user}", "gists_url": "https://api.github.com/users/nhywieza/gists{/gist_id}", "starred_url": "https://api.github.com/users/nhywieza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nhywieza/subscriptions", "organizations_url": "https://api.github.com/users/nhywieza/orgs", "repos_url": "https://api.github.com/users/nhywieza/repos", "events_url": "https://api.github.com/users/nhywieza/events{/privacy}", "received_events_url": "https://api.github.com/users/nhywieza/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-17T03:29:40Z", "updated_at": "2019-11-17T04:11:28Z", "closed_at": "2019-11-17T04:11:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "How do I get its identity?\r\n\r\n**IDL**\r\n`const A = 1`\r\n\r\n**Parsed**\r\n`__thrift_meta__.consts = [1]`\r\n\r\n`__thrift_meta__.consts = {\"A\": 1}` Is this reasonable? or add const_names into __thrift_meta__\r\n\r\n#98 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/96", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/96/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/96/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/96/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/96", "id": 521574792, "node_id": "MDU6SXNzdWU1MjE1NzQ3OTI=", "number": 96, "title": "Default timeout in thriftpy2.rpc.make_client() is different from thriftpy.rpc.make_client()", "user": {"login": "lexa", "id": 80391, "node_id": "MDQ6VXNlcjgwMzkx", "avatar_url": "https://avatars3.githubusercontent.com/u/80391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lexa", "html_url": "https://github.com/lexa", "followers_url": "https://api.github.com/users/lexa/followers", "following_url": "https://api.github.com/users/lexa/following{/other_user}", "gists_url": "https://api.github.com/users/lexa/gists{/gist_id}", "starred_url": "https://api.github.com/users/lexa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lexa/subscriptions", "organizations_url": "https://api.github.com/users/lexa/orgs", "repos_url": "https://api.github.com/users/lexa/repos", "events_url": "https://api.github.com/users/lexa/events{/privacy}", "received_events_url": "https://api.github.com/users/lexa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-12T14:11:19Z", "updated_at": "2019-11-15T10:19:37Z", "closed_at": "2019-11-15T10:19:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI've noticed that the default timeout in thriftpy2.rpc.make_client() differs in the old thriftpy:\r\n\r\n```\r\nthriftpy2.rpc.make_client(service, host='localhost', port=9090, unix_socket=None, proto_factory=<cybin.TCyBinaryProtocolFactory object at 0x7fc655ef3400>, trans_factory=<thriftpy2.transport.buffered.cybuffered.TCyBufferedTransportFactory object at 0x7fc655ef3240>, timeout=3000, cafile=None, ssl_context=None, certfile=None, keyfile=None, url='')\r\n\r\nthriftpy.rpc.make_client(service, host='localhost', port=9090, unix_socket=None, proto_factory=<cybin.TCyBinaryProtocolFactory object at 0x7fc656bf9ba8>, trans_factory=<thriftpy.transport.buffered.cybuffered.TCyBufferedTransportFactory object at 0x7fc65b171a90>, timeout=None, cafile=None, ssl_context=None, certfile=None, keyfile=None)\r\n```\r\n\r\nThe timeout was introduced in #60 which broke compatibility with the old thriftpy.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/93", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/93/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/93/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/93", "id": 512523469, "node_id": "MDU6SXNzdWU1MTI1MjM0Njk=", "number": 93, "title": "NoneType TypeError happened when calling method `struct_to_obj`", "user": {"login": "liyp", "id": 4084780, "node_id": "MDQ6VXNlcjQwODQ3ODA=", "avatar_url": "https://avatars0.githubusercontent.com/u/4084780?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyp", "html_url": "https://github.com/liyp", "followers_url": "https://api.github.com/users/liyp/followers", "following_url": "https://api.github.com/users/liyp/following{/other_user}", "gists_url": "https://api.github.com/users/liyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyp/subscriptions", "organizations_url": "https://api.github.com/users/liyp/orgs", "repos_url": "https://api.github.com/users/liyp/repos", "events_url": "https://api.github.com/users/liyp/events{/privacy}", "received_events_url": "https://api.github.com/users/liyp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821638, "node_id": "MDU6TGFiZWwxMDY5ODIxNjM4", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1180811177, "node_id": "MDU6TGFiZWwxMTgwODExMTc3", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/need%20more%20info", "name": "need more info", "color": "0daa32", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-25T13:40:56Z", "updated_at": "2019-10-27T09:05:40Z", "closed_at": "2019-10-27T09:05:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, i have met a problem when calling method `thriftpy2.protocol.json.struct_to_obj`. NoneType TypeError happened as follows.\r\n```\r\n...\r\n  File \"/xxx/venv/lib/python3.7/site-packages/thriftpy2/protocol/json.py\", line 147, in struct_to_obj\r\n    obj_value(field_type, val[field_name], field_type_spec))\r\n  File \"/xxx/venv/lib/python3.7/site-packages/thriftpy2/protocol/json.py\", line 48, in obj_value\r\n    func, args = TTYPE_TO_OBJFUNC_MAP.get(ttype)\r\nTypeError: cannot unpack non-iterable NoneType object\r\n```\r\nVersion thriftpy2==0.4.7 \r\n\r\nThe error was due to missing key`TType.STRUCT` in dict `TTYPE_TO_OBJFUNC_MAP`.\r\nhttps://github.com/Thriftpy/thriftpy2/blob/f4789af747d34c7c5f152a0de6edecc6fd108092/thriftpy2/protocol/json.py#L35-L57\r\n\r\nI think of a solution as follows\r\n```python\r\nfunc, args = TTYPE_TO_OBJFUNC_MAP.get(ttype) or (None, None)\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/92", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/92/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/92/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/92", "id": 510824261, "node_id": "MDU6SXNzdWU1MTA4MjQyNjE=", "number": 92, "title": "Can't pickle TMemoryBuffer class for Pyspark Spark-Submit", "user": {"login": "tinder-davidkawashima", "id": 29381678, "node_id": "MDQ6VXNlcjI5MzgxNjc4", "avatar_url": "https://avatars0.githubusercontent.com/u/29381678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tinder-davidkawashima", "html_url": "https://github.com/tinder-davidkawashima", "followers_url": "https://api.github.com/users/tinder-davidkawashima/followers", "following_url": "https://api.github.com/users/tinder-davidkawashima/following{/other_user}", "gists_url": "https://api.github.com/users/tinder-davidkawashima/gists{/gist_id}", "starred_url": "https://api.github.com/users/tinder-davidkawashima/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tinder-davidkawashima/subscriptions", "organizations_url": "https://api.github.com/users/tinder-davidkawashima/orgs", "repos_url": "https://api.github.com/users/tinder-davidkawashima/repos", "events_url": "https://api.github.com/users/tinder-davidkawashima/events{/privacy}", "received_events_url": "https://api.github.com/users/tinder-davidkawashima/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821645, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ1", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-22T18:15:15Z", "updated_at": "2019-10-24T01:35:29Z", "closed_at": "2019-10-24T01:35:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm havign trouble pickling TMemoryBuffer so I can use the object within a spark-submit pyspark job. Has anyone seen this before/found a good workaround?\r\n\r\nPickling error:\r\n```\r\n>>> transportIn = TMemoryBuffer(bytes_l)\r\n>>> pickle.dumps(transportIn)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib64/python2.7/pickle.py\", line 1380, in dumps\r\n    Pickler(file, protocol).dump(obj)\r\n  File \"/usr/lib64/python2.7/pickle.py\", line 224, in dump\r\n    self.save(obj)\r\n  File \"/usr/lib64/python2.7/pickle.py\", line 331, in save\r\n    self.save_reduce(obj=obj, *rv)\r\n  File \"/usr/lib64/python2.7/pickle.py\", line 425, in save_reduce\r\n    save(state)\r\n  File \"/usr/lib64/python2.7/pickle.py\", line 286, in save\r\n    f(self, obj) # Call unbound method with explicit self\r\n  File \"/usr/lib64/python2.7/pickle.py\", line 568, in save_tuple\r\n    save(element)\r\n  File \"/usr/lib64/python2.7/pickle.py\", line 306, in save\r\n    rv = reduce(self.proto)\r\n  File \"stringsource\", line 2, in thriftpy2.transport.cybase.TCyBuffer.__reduce_cython__\r\nTypeError: no default __reduce__ due to non-trivial __cinit__\r\n```\r\n\r\nSpark-Submit error:\r\n```\r\nCaused by: org.apache.spark.api.python.PythonException: Traceback (most recent call last):\r\n  File \"/mnt/yarn/usercache/hadoop/appcache/application_1570742233522_0318/container_1570742233522_0318_01_000003/pyspark.zip/pyspark/worker.py\", line 216, in main\r\n    func, profiler, deserializer, serializer = read_command(pickleSer, infile)\r\n  File \"/mnt/yarn/usercache/hadoop/appcache/application_1570742233522_0318/container_1570742233522_0318_01_000003/pyspark.zip/pyspark/worker.py\", line 58, in read_command\r\n    command = serializer._read_with_length(file)\r\n  File \"/mnt/yarn/usercache/hadoop/appcache/application_1570742233522_0318/container_1570742233522_0318_01_000003/pyspark.zip/pyspark/serializers.py\", line 170, in _read_with_length\r\n    return self.loads(obj)\r\n  File \"/mnt/yarn/usercache/hadoop/appcache/application_1570742233522_0318/container_1570742233522_0318_01_000003/pyspark.zip/pyspark/serializers.py\", line 562, in loads\r\n    return pickle.loads(obj)\r\nImportError: No module named thriftpy2.transport.memory.cymemory\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/90", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/90/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/90/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/90", "id": 503351166, "node_id": "MDU6SXNzdWU1MDMzNTExNjY=", "number": 90, "title": "Parser error when downloading thrift file from network", "user": {"login": "starhel", "id": 8440636, "node_id": "MDQ6VXNlcjg0NDA2MzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/8440636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/starhel", "html_url": "https://github.com/starhel", "followers_url": "https://api.github.com/users/starhel/followers", "following_url": "https://api.github.com/users/starhel/following{/other_user}", "gists_url": "https://api.github.com/users/starhel/gists{/gist_id}", "starred_url": "https://api.github.com/users/starhel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/starhel/subscriptions", "organizations_url": "https://api.github.com/users/starhel/orgs", "repos_url": "https://api.github.com/users/starhel/repos", "events_url": "https://api.github.com/users/starhel/events{/privacy}", "received_events_url": "https://api.github.com/users/starhel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1180811177, "node_id": "MDU6TGFiZWwxMTgwODExMTc3", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/need%20more%20info", "name": "need more info", "color": "0daa32", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-07T10:02:55Z", "updated_at": "2019-10-10T06:48:50Z", "closed_at": "2019-10-10T06:48:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've tried using thriftpy2.load with url instead of file path. \r\n```python\r\nbackend_thrift = thriftpy2.load(\"http://host/backend.thrift\", module_name=\"backend_thrift\")\r\n```\r\n\r\nWhen file is read from local file everything is fine, but from url I recived error:\r\n```python\r\nTraceback (most recent call last):\r\n...\r\n  File \"/.../venv/lib/python3.6/site-packages/ply/lex.py\", line 314, in token\r\n    if lexdata[lexpos] in lexignore:\r\nTypeError: 'in <string>' requires string as left operand, not int\r\n```\r\n\r\nFast fix in `venv/lib/python3.6/site-packages/thriftpy2/parser/parser.py:567`:\r\n```python\r\n    elif url_scheme in ('http', 'https'):\r\n        data = urlopen(path).read().decode()", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/82", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/82/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/82/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/82", "id": 488543141, "node_id": "MDU6SXNzdWU0ODg1NDMxNDE=", "number": 82, "title": "is it support THttpClient?", "user": {"login": "naah69", "id": 25682169, "node_id": "MDQ6VXNlcjI1NjgyMTY5", "avatar_url": "https://avatars3.githubusercontent.com/u/25682169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naah69", "html_url": "https://github.com/naah69", "followers_url": "https://api.github.com/users/naah69/followers", "following_url": "https://api.github.com/users/naah69/following{/other_user}", "gists_url": "https://api.github.com/users/naah69/gists{/gist_id}", "starred_url": "https://api.github.com/users/naah69/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naah69/subscriptions", "organizations_url": "https://api.github.com/users/naah69/orgs", "repos_url": "https://api.github.com/users/naah69/repos", "events_url": "https://api.github.com/users/naah69/events{/privacy}", "received_events_url": "https://api.github.com/users/naah69/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-03T11:14:51Z", "updated_at": "2019-09-09T11:20:10Z", "closed_at": "2019-09-09T11:20:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "is it support THttpClient?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/79", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/79/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/79/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/79", "id": 487378122, "node_id": "MDU6SXNzdWU0ODczNzgxMjI=", "number": 79, "title": "Remote connection hbase error ", "user": {"login": "chaojiwudishuai", "id": 22782627, "node_id": "MDQ6VXNlcjIyNzgyNjI3", "avatar_url": "https://avatars3.githubusercontent.com/u/22782627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chaojiwudishuai", "html_url": "https://github.com/chaojiwudishuai", "followers_url": "https://api.github.com/users/chaojiwudishuai/followers", "following_url": "https://api.github.com/users/chaojiwudishuai/following{/other_user}", "gists_url": "https://api.github.com/users/chaojiwudishuai/gists{/gist_id}", "starred_url": "https://api.github.com/users/chaojiwudishuai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chaojiwudishuai/subscriptions", "organizations_url": "https://api.github.com/users/chaojiwudishuai/orgs", "repos_url": "https://api.github.com/users/chaojiwudishuai/repos", "events_url": "https://api.github.com/users/chaojiwudishuai/events{/privacy}", "received_events_url": "https://api.github.com/users/chaojiwudishuai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-08-30T09:15:57Z", "updated_at": "2020-07-06T08:54:48Z", "closed_at": "2019-09-09T14:10:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "thriftpy2.thrift.TApplicationException: <exception str() failed>", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/77", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/77/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/77/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/77", "id": 483744470, "node_id": "MDU6SXNzdWU0ODM3NDQ0NzA=", "number": 77, "title": "thriftpy2.load(path=url) \u5f53\u901a\u8fc7url\u7684\u65b9\u5f0f\u83b7\u53d6\u52a0\u8f7dthrift\u6587\u4ef6\u65f6\u4f1a\u62a5\u9519", "user": {"login": "taomin1", "id": 37476576, "node_id": "MDQ6VXNlcjM3NDc2NTc2", "avatar_url": "https://avatars0.githubusercontent.com/u/37476576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taomin1", "html_url": "https://github.com/taomin1", "followers_url": "https://api.github.com/users/taomin1/followers", "following_url": "https://api.github.com/users/taomin1/following{/other_user}", "gists_url": "https://api.github.com/users/taomin1/gists{/gist_id}", "starred_url": "https://api.github.com/users/taomin1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taomin1/subscriptions", "organizations_url": "https://api.github.com/users/taomin1/orgs", "repos_url": "https://api.github.com/users/taomin1/repos", "events_url": "https://api.github.com/users/taomin1/events{/privacy}", "received_events_url": "https://api.github.com/users/taomin1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1180811177, "node_id": "MDU6TGFiZWwxMTgwODExMTc3", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/need%20more%20info", "name": "need more info", "color": "0daa32", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-08-22T03:04:35Z", "updated_at": "2019-10-04T06:16:39Z", "closed_at": "2019-10-04T06:16:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "thriftpy2.load(path=url) \u5f53\u901a\u8fc7url\u7684\u65b9\u5f0f\u83b7\u53d6\u52a0\u8f7dthrift\u6587\u4ef6\u65f6\u4f1a\u62a5\u9519\r\nTypeError: 'in <string>' requires string as left operand, not int\r\n\u56e0\u4e3a\u5728thriftpy2.parser.parser\u6587\u4ef6line 567 data = urlopen(path).read()\uff0cdata\u7684type\u662fbytes\uff0c\u4e0d\u662fstring\r\n\u5f53\u6539\u6210data = urlopen(path).read().decode('utf-8')\u65f6\u95ee\u9898\u5c31\u89e3\u51b3\u4e86\r\n\u8bf7\u95ee\u662f\u5426\u6709\u8ba1\u5212\u5b8c\u5584\u8fd9\u90e8\u5206\uff1f", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/76", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/76/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/76/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/76/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/76", "id": 476115202, "node_id": "MDU6SXNzdWU0NzYxMTUyMDI=", "number": 76, "title": "how to parse multiple file object", "user": {"login": "CharellKing", "id": 1913489, "node_id": "MDQ6VXNlcjE5MTM0ODk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1913489?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CharellKing", "html_url": "https://github.com/CharellKing", "followers_url": "https://api.github.com/users/CharellKing/followers", "following_url": "https://api.github.com/users/CharellKing/following{/other_user}", "gists_url": "https://api.github.com/users/CharellKing/gists{/gist_id}", "starred_url": "https://api.github.com/users/CharellKing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CharellKing/subscriptions", "organizations_url": "https://api.github.com/users/CharellKing/orgs", "repos_url": "https://api.github.com/users/CharellKing/repos", "events_url": "https://api.github.com/users/CharellKing/events{/privacy}", "received_events_url": "https://api.github.com/users/CharellKing/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-02T10:37:23Z", "updated_at": "2019-09-09T14:10:33Z", "closed_at": "2019-09-09T14:10:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "because multiple thrift files contents in memory, how to analyze theme.\r\n\r\nparse_fp, seem to analyze single file ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/75", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/75/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/75/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/75", "id": 475964005, "node_id": "MDU6SXNzdWU0NzU5NjQwMDU=", "number": 75, "title": "some times thriftpy2 parse thrift error when run", "user": {"login": "CharellKing", "id": 1913489, "node_id": "MDQ6VXNlcjE5MTM0ODk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1913489?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CharellKing", "html_url": "https://github.com/CharellKing", "followers_url": "https://api.github.com/users/CharellKing/followers", "following_url": "https://api.github.com/users/CharellKing/following{/other_user}", "gists_url": "https://api.github.com/users/CharellKing/gists{/gist_id}", "starred_url": "https://api.github.com/users/CharellKing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CharellKing/subscriptions", "organizations_url": "https://api.github.com/users/CharellKing/orgs", "repos_url": "https://api.github.com/users/CharellKing/repos", "events_url": "https://api.github.com/users/CharellKing/events{/privacy}", "received_events_url": "https://api.github.com/users/CharellKing/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-08-02T02:14:26Z", "updated_at": "2019-10-04T04:25:45Z", "closed_at": "2019-10-04T04:25:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "![123](https://user-images.githubusercontent.com/1913489/62339305-1fd91200-b50e-11e9-8469-fdacb161ce55.jpg)\r\n\r\nBaseResp is a class, but analyze as a string.\r\n\r\n\r\nsometimes it's ok and parse as a TMetaPayload class, but some times analyze a string.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/74", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/74/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/74/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/74", "id": 474985421, "node_id": "MDU6SXNzdWU0NzQ5ODU0MjE=", "number": 74, "title": "Installation Error", "user": {"login": "skylinetux", "id": 46027760, "node_id": "MDQ6VXNlcjQ2MDI3NzYw", "avatar_url": "https://avatars0.githubusercontent.com/u/46027760?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skylinetux", "html_url": "https://github.com/skylinetux", "followers_url": "https://api.github.com/users/skylinetux/followers", "following_url": "https://api.github.com/users/skylinetux/following{/other_user}", "gists_url": "https://api.github.com/users/skylinetux/gists{/gist_id}", "starred_url": "https://api.github.com/users/skylinetux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skylinetux/subscriptions", "organizations_url": "https://api.github.com/users/skylinetux/orgs", "repos_url": "https://api.github.com/users/skylinetux/repos", "events_url": "https://api.github.com/users/skylinetux/events{/privacy}", "received_events_url": "https://api.github.com/users/skylinetux/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-31T07:39:08Z", "updated_at": "2019-08-01T03:05:43Z", "closed_at": "2019-08-01T03:05:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "# pip install thriftpy2\r\nDEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won't be maintained after that date. A future version of pip will drop support for Python 2.7. More details about Python 2 support in pip, can be found at https://pip.pypa.io/en/latest/development/release-process/#python-2-support\r\nCollecting thriftpy2\r\n  Using cached https://files.pythonhosted.org/packages/b1/6e/ee0400c5d25babf1426b20fc75192f723c693915e81d251056097206a161/thriftpy2-0.4.4.tar.gz\r\nRequirement already satisfied: ply<4.0,>=3.4 in /usr/lib/python2.7/site-packages (from thriftpy2) (3.4)\r\nInstalling collected packages: thriftpy2\r\n  Running setup.py install for thriftpy2 ... error\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /usr/bin/python2 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-install-68ikMM/thriftpy2/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-install-68ikMM/thriftpy2/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record /tmp/pip-record-sXHwhY/install-record.txt --single-version-externally-managed --compile\r\n         cwd: /tmp/pip-install-68ikMM/thriftpy2/\r\n    Complete output (91 lines):\r\n    /usr/lib64/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'python_requires'\r\n      warnings.warn(msg)\r\n    running install\r\n    running build\r\n    running build_py\r\n    creating build\r\n    creating build/lib.linux-x86_64-2.7\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2\r\n    copying thriftpy2/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2\r\n    copying thriftpy2/_compat.py -> build/lib.linux-x86_64-2.7/thriftpy2\r\n    copying thriftpy2/hook.py -> build/lib.linux-x86_64-2.7/thriftpy2\r\n    copying thriftpy2/http.py -> build/lib.linux-x86_64-2.7/thriftpy2\r\n    copying thriftpy2/rpc.py -> build/lib.linux-x86_64-2.7/thriftpy2\r\n    copying thriftpy2/server.py -> build/lib.linux-x86_64-2.7/thriftpy2\r\n    copying thriftpy2/thrift.py -> build/lib.linux-x86_64-2.7/thriftpy2\r\n    copying thriftpy2/tornado.py -> build/lib.linux-x86_64-2.7/thriftpy2\r\n    copying thriftpy2/utils.py -> build/lib.linux-x86_64-2.7/thriftpy2\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/contrib\r\n    copying thriftpy2/contrib/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/parser\r\n    copying thriftpy2/parser/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/parser\r\n    copying thriftpy2/parser/exc.py -> build/lib.linux-x86_64-2.7/thriftpy2/parser\r\n    copying thriftpy2/parser/lexer.py -> build/lib.linux-x86_64-2.7/thriftpy2/parser\r\n    copying thriftpy2/parser/parser.py -> build/lib.linux-x86_64-2.7/thriftpy2/parser\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/protocol\r\n    copying thriftpy2/protocol/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/protocol\r\n    copying thriftpy2/protocol/binary.py -> build/lib.linux-x86_64-2.7/thriftpy2/protocol\r\n    copying thriftpy2/protocol/compact.py -> build/lib.linux-x86_64-2.7/thriftpy2/protocol\r\n    copying thriftpy2/protocol/exc.py -> build/lib.linux-x86_64-2.7/thriftpy2/protocol\r\n    copying thriftpy2/protocol/json.py -> build/lib.linux-x86_64-2.7/thriftpy2/protocol\r\n    copying thriftpy2/protocol/multiplex.py -> build/lib.linux-x86_64-2.7/thriftpy2/protocol\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/transport\r\n    copying thriftpy2/transport/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/transport\r\n    copying thriftpy2/transport/_ssl.py -> build/lib.linux-x86_64-2.7/thriftpy2/transport\r\n    copying thriftpy2/transport/socket.py -> build/lib.linux-x86_64-2.7/thriftpy2/transport\r\n    copying thriftpy2/transport/sslsocket.py -> build/lib.linux-x86_64-2.7/thriftpy2/transport\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio\r\n    copying thriftpy2/contrib/aio/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio\r\n    copying thriftpy2/contrib/aio/client.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio\r\n    copying thriftpy2/contrib/aio/processor.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio\r\n    copying thriftpy2/contrib/aio/rpc.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio\r\n    copying thriftpy2/contrib/aio/server.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio\r\n    copying thriftpy2/contrib/aio/socket.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/contrib/tracking\r\n    copying thriftpy2/contrib/tracking/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/tracking\r\n    copying thriftpy2/contrib/tracking/tracker.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/tracking\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/transport/buffered\r\n    copying thriftpy2/transport/buffered/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/transport/buffered\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/transport/framed\r\n    copying thriftpy2/transport/framed/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/transport/framed\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/transport/memory\r\n    copying thriftpy2/transport/memory/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/transport/memory\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio/protocol\r\n    copying thriftpy2/contrib/aio/protocol/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio/protocol\r\n    copying thriftpy2/contrib/aio/protocol/binary.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio/protocol\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio/transport\r\n    copying thriftpy2/contrib/aio/transport/__init__.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio/transport\r\n    copying thriftpy2/contrib/aio/transport/buffered.py -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/aio/transport\r\n    running egg_info\r\n    writing requirements to thriftpy2.egg-info/requires.txt\r\n    writing thriftpy2.egg-info/PKG-INFO\r\n    writing top-level names to thriftpy2.egg-info/top_level.txt\r\n    writing dependency_links to thriftpy2.egg-info/dependency_links.txt\r\n    reading manifest file 'thriftpy2.egg-info/SOURCES.txt'\r\n    reading manifest template 'MANIFEST.in'\r\n    writing manifest file 'thriftpy2.egg-info/SOURCES.txt'\r\n    creating build/lib.linux-x86_64-2.7/thriftpy2/protocol/cybin\r\n    copying thriftpy2/protocol/cybin/cybin.c -> build/lib.linux-x86_64-2.7/thriftpy2/protocol/cybin\r\n    copying thriftpy2/protocol/cybin/cybin.pyx -> build/lib.linux-x86_64-2.7/thriftpy2/protocol/cybin\r\n    copying thriftpy2/protocol/cybin/endian_port.h -> build/lib.linux-x86_64-2.7/thriftpy2/protocol/cybin\r\n    copying thriftpy2/transport/cybase.c -> build/lib.linux-x86_64-2.7/thriftpy2/transport\r\n    copying thriftpy2/transport/cybase.pxd -> build/lib.linux-x86_64-2.7/thriftpy2/transport\r\n    copying thriftpy2/transport/cybase.pyx -> build/lib.linux-x86_64-2.7/thriftpy2/transport\r\n    copying thriftpy2/contrib/tracking/tracking.thrift -> build/lib.linux-x86_64-2.7/thriftpy2/contrib/tracking\r\n    copying thriftpy2/transport/buffered/cybuffered.c -> build/lib.linux-x86_64-2.7/thriftpy2/transport/buffered\r\n    copying thriftpy2/transport/buffered/cybuffered.pyx -> build/lib.linux-x86_64-2.7/thriftpy2/transport/buffered\r\n    copying thriftpy2/transport/framed/cyframed.c -> build/lib.linux-x86_64-2.7/thriftpy2/transport/framed\r\n    copying thriftpy2/transport/framed/cyframed.pyx -> build/lib.linux-x86_64-2.7/thriftpy2/transport/framed\r\n    copying thriftpy2/transport/memory/cymemory.c -> build/lib.linux-x86_64-2.7/thriftpy2/transport/memory\r\n    copying thriftpy2/transport/memory/cymemory.pyx -> build/lib.linux-x86_64-2.7/thriftpy2/transport/memory\r\n    running build_ext\r\n    building 'thriftpy2.transport.cybase' extension\r\n    creating build/temp.linux-x86_64-2.7\r\n    creating build/temp.linux-x86_64-2.7/thriftpy2\r\n    creating build/temp.linux-x86_64-2.7/thriftpy2/transport\r\n    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python2.7 -c thriftpy2/transport/cybase.c -o build/temp.linux-x86_64-2.7/thriftpy2/transport/cybase.o\r\n    thriftpy2/transport/cybase.c:17:20: fatal error: Python.h: No such file or directory\r\n     #include \"Python.h\"\r\n                        ^\r\n    compilation terminated.\r\n    error: command 'gcc' failed with exit status 1\r\n    ----------------------------------------\r\nERROR: Command errored out with exit status 1: /usr/bin/python2 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-install-68ikMM/thriftpy2/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-install-68ikMM/thriftpy2/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record /tmp/pip-record-sXHwhY/install-record.txt --single-version-externally-managed --compile Check the logs for full command output.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/73", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/73/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/73/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/73/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/73", "id": 472731689, "node_id": "MDU6SXNzdWU0NzI3MzE2ODk=", "number": 73, "title": "RecursionError: maximum recursion depth exceeded", "user": {"login": "JackYangzg", "id": 5477562, "node_id": "MDQ6VXNlcjU0Nzc1NjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5477562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JackYangzg", "html_url": "https://github.com/JackYangzg", "followers_url": "https://api.github.com/users/JackYangzg/followers", "following_url": "https://api.github.com/users/JackYangzg/following{/other_user}", "gists_url": "https://api.github.com/users/JackYangzg/gists{/gist_id}", "starred_url": "https://api.github.com/users/JackYangzg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JackYangzg/subscriptions", "organizations_url": "https://api.github.com/users/JackYangzg/orgs", "repos_url": "https://api.github.com/users/JackYangzg/repos", "events_url": "https://api.github.com/users/JackYangzg/events{/privacy}", "received_events_url": "https://api.github.com/users/JackYangzg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1180811177, "node_id": "MDU6TGFiZWwxMTgwODExMTc3", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/need%20more%20info", "name": "need more info", "color": "0daa32", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-25T08:25:53Z", "updated_at": "2019-07-25T08:40:26Z", "closed_at": "2019-07-25T08:38:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "windows is raise exception and linux is ok.\r\nwhen I use rpc client in subprocess [using multiprocess.Process start]\r\nRaise Exception\uff1a\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\spawn.py\", line 105, in spawn_main\r\n    exitcode = _main(fd)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\spawn.py\", line 115, in _main\r\n    self = reduction.pickle.load(from_parent)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\thriftpy2\\thrift.py\", line 180, in __getattr__\r\n    print(self._service.thrift_services)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\thriftpy2\\thrift.py\", line 180, in __getattr__\r\n    print(self._service.thrift_services)\r\n  File \"D:\\ProgramData\\Anaconda3\\lib\\site-packages\\thriftpy2\\thrift.py\", line 180, in __getattr__\r\n    print(self._service.thrift_services)\r\n  [Previous line repeated 328 more times]\r\nRecursionError: maximum recursion depth exceeded while calling a Python object", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/72", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/72/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/72/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/72", "id": 468811799, "node_id": "MDU6SXNzdWU0Njg4MTE3OTk=", "number": 72, "title": "Thriftpy should enforce required arguments", "user": {"login": "adambom", "id": 294597, "node_id": "MDQ6VXNlcjI5NDU5Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/294597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adambom", "html_url": "https://github.com/adambom", "followers_url": "https://api.github.com/users/adambom/followers", "following_url": "https://api.github.com/users/adambom/following{/other_user}", "gists_url": "https://api.github.com/users/adambom/gists{/gist_id}", "starred_url": "https://api.github.com/users/adambom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adambom/subscriptions", "organizations_url": "https://api.github.com/users/adambom/orgs", "repos_url": "https://api.github.com/users/adambom/repos", "events_url": "https://api.github.com/users/adambom/events{/privacy}", "received_events_url": "https://api.github.com/users/adambom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821640, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQw", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-16T18:55:47Z", "updated_at": "2019-09-01T09:51:40Z", "closed_at": "2019-09-01T09:51:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that thriftpy is not enforcing required parameters to service calls. Instead of the client raising an exception, the request is serialized with `None` in place of the missing arguments. I could see this being reasonable for optional arguments, but required arguments should be required.\r\n\r\nFor the example service:\r\n\r\n```thrift\r\nservice HelloService {\r\n    string greet(1: required string greeting);\r\n}\r\n```\r\n\r\nCalling `client.greet()` will send `None` as the value for `greeting`. I would expect this to throw an exception.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/71", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/71/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/71/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/71", "id": 464827643, "node_id": "MDU6SXNzdWU0NjQ4Mjc2NDM=", "number": 71, "title": "Follow Strict Data Type in TJsonProtocol", "user": {"login": "not94", "id": 30224079, "node_id": "MDQ6VXNlcjMwMjI0MDc5", "avatar_url": "https://avatars0.githubusercontent.com/u/30224079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/not94", "html_url": "https://github.com/not94", "followers_url": "https://api.github.com/users/not94/followers", "following_url": "https://api.github.com/users/not94/following{/other_user}", "gists_url": "https://api.github.com/users/not94/gists{/gist_id}", "starred_url": "https://api.github.com/users/not94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/not94/subscriptions", "organizations_url": "https://api.github.com/users/not94/orgs", "repos_url": "https://api.github.com/users/not94/repos", "events_url": "https://api.github.com/users/not94/events{/privacy}", "received_events_url": "https://api.github.com/users/not94/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821640, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQw", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-06T07:28:02Z", "updated_at": "2019-09-24T02:33:03Z", "closed_at": "2019-09-24T02:33:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, I hava met a problem about using TJsonProtocol to serialize thrift obejct.\r\n\r\nThere is a double field defined in my thrift struct but assigned with a decimal object, which can not be serialized with TJsonProtocol.\r\n\r\nI found the json_value function just return the value if it is a double field.\r\n\r\n    def json_value(ttype, val, spec=None):\r\n        if ttype in INTEGER or ttype in FLOAT or ttype == TType.STRING:\r\n            return val\r\n    \r\n        if ttype == TType.BOOL:\r\n            return True if val else False\r\n    \r\n        if ttype == TType.STRUCT:\r\n            return struct_to_json(val)\r\n    \r\n        if ttype in (TType.SET, TType.LIST):\r\n            return list_to_json(val, spec)\r\n    \r\n        if ttype == TType.MAP:\r\n            return map_to_json(val, spec)\r\n\r\nI know the easiest way is to change the decimal object to float object, but it is possible to follow the strict data type in json value? such as:\r\n\r\n    def json_value(ttype, val, spec=None):\r\n        if ttype in INTEGER:\r\n    \t   return int(val)\r\n\r\n        if ttype in FLOAT:\r\n    \t   return float(val)\r\n\r\n        if ttype == TType.STRING:\r\n    \t   return str(val)\r\n    \r\n        if ttype == TType.BOOL:\r\n            return True if val else False\r\n    \r\n        if ttype == TType.STRUCT:\r\n            return struct_to_json(val)\r\n    \r\n        if ttype in (TType.SET, TType.LIST):\r\n            return list_to_json(val, spec)\r\n    \r\n        if ttype == TType.MAP:\r\n            return map_to_json(val, spec)\r\n\r\nThanks a lot!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/70", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/70/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/70/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/70", "id": 458994288, "node_id": "MDU6SXNzdWU0NTg5OTQyODg=", "number": 70, "title": "Python 3.8 support", "user": {"login": "Eric-Arellano", "id": 14852634, "node_id": "MDQ6VXNlcjE0ODUyNjM0", "avatar_url": "https://avatars3.githubusercontent.com/u/14852634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Eric-Arellano", "html_url": "https://github.com/Eric-Arellano", "followers_url": "https://api.github.com/users/Eric-Arellano/followers", "following_url": "https://api.github.com/users/Eric-Arellano/following{/other_user}", "gists_url": "https://api.github.com/users/Eric-Arellano/gists{/gist_id}", "starred_url": "https://api.github.com/users/Eric-Arellano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Eric-Arellano/subscriptions", "organizations_url": "https://api.github.com/users/Eric-Arellano/orgs", "repos_url": "https://api.github.com/users/Eric-Arellano/repos", "events_url": "https://api.github.com/users/Eric-Arellano/events{/privacy}", "received_events_url": "https://api.github.com/users/Eric-Arellano/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821640, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQw", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-06-21T03:48:56Z", "updated_at": "2019-10-08T03:36:55Z", "closed_at": "2019-10-08T03:36:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there, thank you for this project!\r\n\r\nI'm opening this issue to track support for Python 3.8, in case you all hadn't had a chance to look into it yet.\r\n\r\nCurrently, the sdist fails to install on macOS and 3.8.0b1 installed via pyenv . I have not tried on Linux.\r\n\r\n```\r\n$ pip3.8 install thriftpy2\r\n\r\nCollecting thriftpy2\r\n  Using cached https://files.pythonhosted.org/packages/b1/6e/ee0400c5d25babf1426b20fc75192f723c693915e81d251056097206a161/thriftpy2-0.4.4.tar.gz\r\nCollecting ply<4.0,>=3.4 (from thriftpy2)\r\n  Using cached https://files.pythonhosted.org/packages/a3/58/35da89ee790598a0700ea49b2a66594140f44dec458c07e8e3d4979137fc/ply-3.11-py2.py3-none-any.whl\r\nInstalling collected packages: ply, thriftpy2\r\n  Running setup.py install for thriftpy2 ... error\r\n    Complete output from command /Users/eric/.pyenv/versions/3.8-dev/bin/python3.8 -u -c \"import setuptools, tokenize;__file__='/private/var/folders/sx/pdpbqz4x5cscn9hhfpbsbqvm0000gn/T/pip-install-hu1_p_gv/thriftpy2/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /private/var/folders/sx/pdpbqz4x5cscn9hhfpbsbqvm0000gn/T/pip-record-ngyw_g3u/install-record.txt --single-version-externally-managed --compile:\r\n    running install\r\n    running build\r\n    running build_py\r\n    creating build\r\n    creating build/lib.macosx-10.14-x86_64-3.8\r\n    creating build/lib.macosx-10.14-x86_64-3.8/thriftpy2\r\n    copying thriftpy2/server.py -> build/lib.macosx-10.14-x86_64-3.8/thriftpy2\r\n    ...\r\n    copying thriftpy2/contrib/aio/protocol/__init__.py -> build/lib.macosx-10.14-x86_64-3.8/thriftpy2/contrib/aio/protocol\r\n    running egg_info\r\n    writing thriftpy2.egg-info/PKG-INFO\r\n    writing dependency_links to thriftpy2.egg-info/dependency_links.txt\r\n    writing requirements to thriftpy2.egg-info/requires.txt\r\n    writing top-level names to thriftpy2.egg-info/top_level.txt\r\n    reading manifest file 'thriftpy2.egg-info/SOURCES.txt'\r\n    reading manifest template 'MANIFEST.in'\r\n    writing manifest file 'thriftpy2.egg-info/SOURCES.txt'\r\n    copying thriftpy2/transport/cybase.c -> build/lib.macosx-10.14-x86_64-3.8/thriftpy2/transport\r\n   ...\r\n    copying thriftpy2/contrib/tracking/tracking.thrift -> build/lib.macosx-10.14-x86_64-3.8/thriftpy2/contrib/tracking\r\n    running build_ext\r\n    building 'thriftpy2.transport.cybase' extension\r\n    creating build/temp.macosx-10.14-x86_64-3.8\r\n    creating build/temp.macosx-10.14-x86_64-3.8/thriftpy2\r\n    creating build/temp.macosx-10.14-x86_64-3.8/thriftpy2/transport\r\n    clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -I/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include -I/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/include -I/usr/local/opt/openssl/include -I/Users/eric/.pyenv/versions/3.8-dev/include/python3.8 -c thriftpy2/transport/cybase.c -o build/temp.macosx-10.14-x86_64-3.8/thriftpy2/transport/cybase.o\r\n    thriftpy2/transport/cybase.c:4007:33: error: too few arguments to function call, expected 16, have 15\r\n      __pyx_codeobj__4 = (PyObject*)__Pyx_PyCode_New(3, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__3, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_stringsource, __pyx_n_s_pyx_unpickle_CyTransportBase, 1, __pyx_empty_bytes); if (unlikely(!__pyx_codeobj__4)) __PYX_ERR(0, 1, __pyx_L1_error)\r\n                                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    thriftpy2/transport/cybase.c:327:83: note: expanded from macro '__Pyx_PyCode_New'\r\n              PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\r\n              ~~~~~~~~~~                                                              ^\r\n    /Users/eric/.pyenv/versions/3.8-dev/include/python3.8/code.h:122:12: note: 'PyCode_New' declared here\r\n    PyAPI_FUNC(PyCodeObject *) PyCode_New(\r\n               ^\r\n    thriftpy2/transport/cybase.c:4069:54: error: no member named 'tp_print' in 'struct _typeobject'\r\n      __pyx_type_9thriftpy2_9transport_6cybase_TCyBuffer.tp_print = 0;\r\n      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^\r\n    thriftpy2/transport/cybase.c:4083:60: error: no member named 'tp_print' in 'struct _typeobject'\r\n      __pyx_type_9thriftpy2_9transport_6cybase_CyTransportBase.tp_print = 0;\r\n      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^\r\n    thriftpy2/transport/cybase.c:5803:15: error: too few arguments to function call, expected 16, have 15\r\n        py_code = __Pyx_PyCode_New(\r\n                  ^~~~~~~~~~~~~~~~~\r\n    thriftpy2/transport/cybase.c:327:83: note: expanded from macro '__Pyx_PyCode_New'\r\n              PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\r\n              ~~~~~~~~~~                                                              ^\r\n    /Users/eric/.pyenv/versions/3.8-dev/include/python3.8/code.h:122:12: note: 'PyCode_New' declared here\r\n    PyAPI_FUNC(PyCodeObject *) PyCode_New(\r\n               ^\r\n    4 errors generated.\r\n    error: command 'clang' failed with exit status 1\r\n\r\n    ----------------------------------------\r\nCommand \"/Users/eric/.pyenv/versions/3.8-dev/bin/python3.8 -u -c \"import setuptools, tokenize;__file__='/private/var/folders/sx/pdpbqz4x5cscn9hhfpbsbqvm0000gn/T/pip-install-hu1_p_gv/thriftpy2/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /private/var/folders/sx/pdpbqz4x5cscn9hhfpbsbqvm0000gn/T/pip-record-ngyw_g3u/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /private/var/folders/sx/pdpbqz4x5cscn9hhfpbsbqvm0000gn/T/pip-install-hu1_p_gv/thriftpy2/\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/69", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/69/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/69/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/69", "id": 458747342, "node_id": "MDU6SXNzdWU0NTg3NDczNDI=", "number": 69, "title": "Question about connecting to an Apache Thrift server with thrifpy2 client", "user": {"login": "danieljfarrell", "id": 112847, "node_id": "MDQ6VXNlcjExMjg0Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/112847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danieljfarrell", "html_url": "https://github.com/danieljfarrell", "followers_url": "https://api.github.com/users/danieljfarrell/followers", "following_url": "https://api.github.com/users/danieljfarrell/following{/other_user}", "gists_url": "https://api.github.com/users/danieljfarrell/gists{/gist_id}", "starred_url": "https://api.github.com/users/danieljfarrell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danieljfarrell/subscriptions", "organizations_url": "https://api.github.com/users/danieljfarrell/orgs", "repos_url": "https://api.github.com/users/danieljfarrell/repos", "events_url": "https://api.github.com/users/danieljfarrell/events{/privacy}", "received_events_url": "https://api.github.com/users/danieljfarrell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1180811177, "node_id": "MDU6TGFiZWwxMTgwODExMTc3", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/need%20more%20info", "name": "need more info", "color": "0daa32", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-06-20T16:10:00Z", "updated_at": "2019-11-12T01:45:53Z", "closed_at": "2019-11-12T01:45:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I know that Apache Thrift does not work if the client and server are not same versions.\r\n\r\nI would like to use thriftpy2 to connect to a Apache Thift sever (version 0.9.1), do you see any problems with this or is this within the scope of thriftpy2?\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/68", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/68/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/68/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/68", "id": 457866590, "node_id": "MDU6SXNzdWU0NTc4NjY1OTA=", "number": 68, "title": "docker server no response", "user": {"login": "zyzhang-aibee", "id": 45031968, "node_id": "MDQ6VXNlcjQ1MDMxOTY4", "avatar_url": "https://avatars1.githubusercontent.com/u/45031968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyzhang-aibee", "html_url": "https://github.com/zyzhang-aibee", "followers_url": "https://api.github.com/users/zyzhang-aibee/followers", "following_url": "https://api.github.com/users/zyzhang-aibee/following{/other_user}", "gists_url": "https://api.github.com/users/zyzhang-aibee/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyzhang-aibee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyzhang-aibee/subscriptions", "organizations_url": "https://api.github.com/users/zyzhang-aibee/orgs", "repos_url": "https://api.github.com/users/zyzhang-aibee/repos", "events_url": "https://api.github.com/users/zyzhang-aibee/events{/privacy}", "received_events_url": "https://api.github.com/users/zyzhang-aibee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1180811177, "node_id": "MDU6TGFiZWwxMTgwODExMTc3", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/need%20more%20info", "name": "need more info", "color": "0daa32", "default": false, "description": ""}, {"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-19T08:07:58Z", "updated_at": "2019-07-25T08:42:20Z", "closed_at": "2019-07-25T08:42:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "i use the pingpong demo server in docker,but the client could not get any response,can you help me ?\r\n\r\n\r\nthriftpy2.transport.TTransportException: TTransportException(type=4, message='TSocket read 0 bytes')", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/65", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/65/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/65/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/65", "id": 455038714, "node_id": "MDU6SXNzdWU0NTUwMzg3MTQ=", "number": 65, "title": "Double const failed to be parsed if leading zeros gets ommitted", "user": {"login": "Angelbear", "id": 611967, "node_id": "MDQ6VXNlcjYxMTk2Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/611967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Angelbear", "html_url": "https://github.com/Angelbear", "followers_url": "https://api.github.com/users/Angelbear/followers", "following_url": "https://api.github.com/users/Angelbear/following{/other_user}", "gists_url": "https://api.github.com/users/Angelbear/gists{/gist_id}", "starred_url": "https://api.github.com/users/Angelbear/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Angelbear/subscriptions", "organizations_url": "https://api.github.com/users/Angelbear/orgs", "repos_url": "https://api.github.com/users/Angelbear/repos", "events_url": "https://api.github.com/users/Angelbear/events{/privacy}", "received_events_url": "https://api.github.com/users/Angelbear/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-12T06:45:36Z", "updated_at": "2019-06-12T14:53:35Z", "closed_at": "2019-06-12T14:53:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently the parser fails when parsing \r\n```\r\nconst SOME_DOUBLE_CONST = .15;\r\n```\r\n\r\nThis is valid double const in thrift definition and needs to be supported.\r\n\r\n```\r\n  File \"/usr/local/lib/python2.7/site-packages/thriftpy2/parser/parser.py\", line 585, in parse\r\n    parser.parse(data)\r\n  File \"/usr/local/lib/python2.7/site-packages/ply/yacc.py\", line 333, in parse\r\n    return self.parseopt_notrack(input, lexer, debug, tracking, tokenfunc)\r\n  File \"/usr/local/lib/python2.7/site-packages/ply/yacc.py\", line 1063, in parseopt_notrack\r\n    lookahead = get_token()     # Get the next token\r\n  File \"/usr/local/lib/python2.7/site-packages/ply/lex.py\", line 386, in token\r\n    newtok = self.lexerrorf(tok)\r\n  File \"/usr/local/lib/python2.7/site-packages/thriftpy2/parser/lexer.py\", line 165, in t_error\r\n    (t.value[0], t.lineno))\r\nthriftpy2.parser.exc.ThriftLexerError: Illegal character '.' at line 88\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/61", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/61/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/61/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/61", "id": 450817383, "node_id": "MDU6SXNzdWU0NTA4MTczODM=", "number": 61, "title": "Parse error on empty set field value", "user": {"login": "danieljfarrell", "id": 112847, "node_id": "MDQ6VXNlcjExMjg0Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/112847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danieljfarrell", "html_url": "https://github.com/danieljfarrell", "followers_url": "https://api.github.com/users/danieljfarrell/followers", "following_url": "https://api.github.com/users/danieljfarrell/following{/other_user}", "gists_url": "https://api.github.com/users/danieljfarrell/gists{/gist_id}", "starred_url": "https://api.github.com/users/danieljfarrell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danieljfarrell/subscriptions", "organizations_url": "https://api.github.com/users/danieljfarrell/orgs", "repos_url": "https://api.github.com/users/danieljfarrell/repos", "events_url": "https://api.github.com/users/danieljfarrell/events{/privacy}", "received_events_url": "https://api.github.com/users/danieljfarrell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821638, "node_id": "MDU6TGFiZWwxMDY5ODIxNjM4", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-31T14:08:12Z", "updated_at": "2019-06-01T17:20:44Z", "closed_at": "2019-06-01T07:14:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following thift file,\r\n\r\n(**NB** that the file can be parsed correctly using the Thrift executable from https://thrift.apache.org/download,  tested with the latest version at the time of writing 0.12.0)\r\n\r\n```thrift\r\nstruct Status {\r\n\t1: string state,\r\n\t2: optional set<string> info={},  # <-- problem line\r\n}\r\n\t\r\nservice EchoService {\r\n    string echo(1: string param),\r\n    Status get_status(),\r\n}\r\n```\r\n\r\ncauses a parse error,\r\n```python\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\daniel.farrell\\AppData\\Local\\Continuum\\anaconda3\\envs\\porosity_env\\lib\\site-packages\\thriftpy2\\parser\\parser.py\", line 341, in p_simple_field\r\n    val = _cast(p[3])(p[6])\r\n  File \"C:\\Users\\daniel.farrell\\AppData\\Local\\Continuum\\anaconda3\\envs\\porosity_env\\lib\\site-packages\\thriftpy2\\parser\\parser.py\", line 753, in __cast_set\r\n    assert isinstance(v, (list, set))\r\nAssertionError\r\n```\r\n\r\n\r\nThe parse error is because Python does not have a literal for an empty set. The string `{}` in the thrift file is interpreted as a dict which generates the assertion error.\r\n\r\nhttps://github.com/Thriftpy/thriftpy2/blob/cbc250d0d4473c20e9de08c3eea6cc44cf01c393/thriftpy2/parser/parser.py#L751\r\n\r\nA potential fix is to check for empty dict values and force the return value to be a set:\r\n\r\n```python\r\ndef _cast_set(t):\r\n    assert t[0] == TType.SET\r\n\r\n    def __cast_set(v):\r\n        if len(v) == 0 and isinstance(v, dict):\r\n            v = set()\r\n        assert isinstance(v, (list, set))\r\n        map(_cast(t[1]), v)\r\n        if not isinstance(v, set):\r\n            return set(v)\r\n        return v\r\n    return __cast_set\r\n```\r\n\r\nI'm working on a pull request and adding tests etc.\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/59", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/59/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/59/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/59", "id": 449581700, "node_id": "MDU6SXNzdWU0NDk1ODE3MDA=", "number": 59, "title": "How to close socket connection when using make_client?", "user": {"login": "collinmazb", "id": 27282357, "node_id": "MDQ6VXNlcjI3MjgyMzU3", "avatar_url": "https://avatars2.githubusercontent.com/u/27282357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/collinmazb", "html_url": "https://github.com/collinmazb", "followers_url": "https://api.github.com/users/collinmazb/followers", "following_url": "https://api.github.com/users/collinmazb/following{/other_user}", "gists_url": "https://api.github.com/users/collinmazb/gists{/gist_id}", "starred_url": "https://api.github.com/users/collinmazb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/collinmazb/subscriptions", "organizations_url": "https://api.github.com/users/collinmazb/orgs", "repos_url": "https://api.github.com/users/collinmazb/repos", "events_url": "https://api.github.com/users/collinmazb/events{/privacy}", "received_events_url": "https://api.github.com/users/collinmazb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-29T03:34:53Z", "updated_at": "2019-05-29T04:37:17Z", "closed_at": "2019-05-29T04:37:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n import thriftpy2\r\n\r\n pingpong_thrift` = thriftpy2.load(\"pingpong.thrift\", module_name=\"pingpong_thrift\")\r\n\r\nfrom thriftpy2.rpc import make_client\r\n\r\nclient = make_client(pingpong_thrift.PingPong, '127.0.0.1', 6000)\r\nprint(client.ping())\r\n```\r\n\r\nfor the client code example as showed in homepage, how and when to close socket connection?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/53", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/53/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/53/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/53", "id": 444271692, "node_id": "MDU6SXNzdWU0NDQyNzE2OTI=", "number": 53, "title": "is this thread-safe", "user": {"login": "zeyu203", "id": 5253434, "node_id": "MDQ6VXNlcjUyNTM0MzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/5253434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zeyu203", "html_url": "https://github.com/zeyu203", "followers_url": "https://api.github.com/users/zeyu203/followers", "following_url": "https://api.github.com/users/zeyu203/following{/other_user}", "gists_url": "https://api.github.com/users/zeyu203/gists{/gist_id}", "starred_url": "https://api.github.com/users/zeyu203/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zeyu203/subscriptions", "organizations_url": "https://api.github.com/users/zeyu203/orgs", "repos_url": "https://api.github.com/users/zeyu203/repos", "events_url": "https://api.github.com/users/zeyu203/events{/privacy}", "received_events_url": "https://api.github.com/users/zeyu203/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1180811177, "node_id": "MDU6TGFiZWwxMTgwODExMTc3", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/need%20more%20info", "name": "need more info", "color": "0daa32", "default": false, "description": ""}, {"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-15T07:08:42Z", "updated_at": "2019-05-21T06:27:44Z", "closed_at": "2019-05-21T06:27:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to run some examples under multithreading environment\uff0cbut I but I got a lot of exceptions.\r\njust like:\r\n\r\n```\r\n  File \"D:\\Workspace\\work\\pypi_packages\\thriftpy2src\\thriftpy2\\protocol\\binary.py\", line 386, in read_struct\r\n    return read_struct(self.trans, obj, self.decode_response)\r\n  File \"D:\\Workspace\\work\\pypi_packages\\thriftpy2src\\thriftpy2\\protocol\\binary.py\", line 294, in read_struct\r\n    f_type, fid = read_field_begin(inbuf)\r\n  File \"D:\\Workspace\\work\\pypi_packages\\thriftpy2src\\thriftpy2\\protocol\\binary.py\", line 189, in read_field_begin\r\n    f_type = unpack_i8(inbuf.read(1))\r\n  File \"D:\\Workspace\\work\\pypi_packages\\thriftpy2src\\thriftpy2\\transport\\__init__.py\", line 32, in read\r\n    return readall(self._read, sz)\r\n  File \"D:\\Workspace\\work\\pypi_packages\\thriftpy2src\\thriftpy2\\transport\\__init__.py\", line 14, in readall\r\n    chunk = read_fn(sz - have)\r\n  File \"D:\\Workspace\\work\\pypi_packages\\thriftpy2src\\thriftpy2\\transport\\buffered\\__init__.py\", line 39, in _read\r\n    self._rbuf = BytesIO(self._trans.read(max(sz, self._buf_size)))\r\n  File \"D:\\Workspace\\work\\pypi_packages\\thriftpy2src\\thriftpy2\\transport\\socket.py\", line 109, in read\r\n    buff = self.sock.recv(sz)\r\nAttributeError: 'NoneType' object has no attribute 'recv'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/52", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/52/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/52/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/52", "id": 443879551, "node_id": "MDU6SXNzdWU0NDM4Nzk1NTE=", "number": 52, "title": "Service method named 'close' in thrift file seems to be incorrectly translated in client", "user": {"login": "flboudet", "id": 8023588, "node_id": "MDQ6VXNlcjgwMjM1ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/8023588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flboudet", "html_url": "https://github.com/flboudet", "followers_url": "https://api.github.com/users/flboudet/followers", "following_url": "https://api.github.com/users/flboudet/following{/other_user}", "gists_url": "https://api.github.com/users/flboudet/gists{/gist_id}", "starred_url": "https://api.github.com/users/flboudet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flboudet/subscriptions", "organizations_url": "https://api.github.com/users/flboudet/orgs", "repos_url": "https://api.github.com/users/flboudet/repos", "events_url": "https://api.github.com/users/flboudet/events{/privacy}", "received_events_url": "https://api.github.com/users/flboudet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821638, "node_id": "MDU6TGFiZWwxMDY5ODIxNjM4", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-14T12:12:06Z", "updated_at": "2019-06-04T07:04:38Z", "closed_at": "2019-05-24T04:13:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI am implementing a Python client using thriftpy2 to a thrift C++ server.\r\nOne of the method from a service is called 'close'.\r\nIt seems that the thriftpy client fails to implement it correctly.\r\n\r\nI have written a minimalist python script that reproduces the issue.\r\nThe script loads the following thrift file:\r\n<pre>\r\nservice File {\r\n    void close(1: i32 idfile, 2: string anything);\r\n    void close2(1: i32 idfile, 2: string anything);\r\n}\r\n</pre>\r\n\r\nIt then prints the signature of the close and close2 methods, as loaded by the thriftpy client:\r\n<pre>\r\n#!/usr/bin/python3\r\n\r\nimport thriftpy2\r\nfrom thriftpy2.rpc import client_context\r\nfrom thriftpy2.rpc import make_client\r\nfrom thriftpy2.protocol import (\r\n    TBinaryProtocolFactory,\r\n    TMultiplexedProtocolFactory\r\n)\r\n\r\nimport inspect\r\n\r\nfile_thrift = thriftpy2.load(\"File.thrift\", module_name=\"file_thrift\")\r\nbinary_factory = TBinaryProtocolFactory()\r\nclient = make_client(file_thrift.File, '192.168.57.2', 9090,\r\n                     proto_factory=binary_factory)\r\n\r\nprint(\"Signature of the close method:\")\r\nprint(inspect.signature(client.close))\r\nprint(\"Signature of the close2 method:\")\r\nprint(inspect.signature(client.close2))\r\n</pre>\r\n\r\nHere is the output I get:\r\n\r\n<pre>\r\nSignature of the close method:\r\n()\r\nSignature of the close2 method:\r\n(*args, **kwargs)\r\n</pre>\r\n\r\nIt seems that thriftpy has some conflict with the name 'close'.\r\nEventually, is there a way to aliase the thrift service method name? (I cannot change it in the server implementation)\r\n\r\nRegards,\r\nFlorent\r\n[thriftpy2_close_bug.zip](https://github.com/Thriftpy/thriftpy2/files/3177512/thriftpy2_close_bug.zip)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/51", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/51/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/51/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/51", "id": 429031837, "node_id": "MDU6SXNzdWU0MjkwMzE4Mzc=", "number": 51, "title": "convert thrift to pyi", "user": {"login": "nhywieza", "id": 8528287, "node_id": "MDQ6VXNlcjg1MjgyODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8528287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nhywieza", "html_url": "https://github.com/nhywieza", "followers_url": "https://api.github.com/users/nhywieza/followers", "following_url": "https://api.github.com/users/nhywieza/following{/other_user}", "gists_url": "https://api.github.com/users/nhywieza/gists{/gist_id}", "starred_url": "https://api.github.com/users/nhywieza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nhywieza/subscriptions", "organizations_url": "https://api.github.com/users/nhywieza/orgs", "repos_url": "https://api.github.com/users/nhywieza/repos", "events_url": "https://api.github.com/users/nhywieza/events{/privacy}", "received_events_url": "https://api.github.com/users/nhywieza/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-04T00:36:10Z", "updated_at": "2019-11-20T09:47:02Z", "closed_at": "2019-04-17T08:52:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u5199\u4e86\u4e00\u4e2a\u901a\u8fc7 thrift \u751f\u6210 pyi \u7684\u5c0f\u5de5\u5177\uff0c\u7ed3\u5408 thriftpy2 \u633a\u597d\u7528\u7684\u3002\r\nhttps://github.com/nhywieza/thrift2pyi", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/50", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/50/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/50/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/50", "id": 425828611, "node_id": "MDU6SXNzdWU0MjU4Mjg2MTE=", "number": 50, "title": "thriftpy2/parser/parser.py raise an error", "user": {"login": "duyue9522", "id": 29563323, "node_id": "MDQ6VXNlcjI5NTYzMzIz", "avatar_url": "https://avatars1.githubusercontent.com/u/29563323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duyue9522", "html_url": "https://github.com/duyue9522", "followers_url": "https://api.github.com/users/duyue9522/followers", "following_url": "https://api.github.com/users/duyue9522/following{/other_user}", "gists_url": "https://api.github.com/users/duyue9522/gists{/gist_id}", "starred_url": "https://api.github.com/users/duyue9522/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duyue9522/subscriptions", "organizations_url": "https://api.github.com/users/duyue9522/orgs", "repos_url": "https://api.github.com/users/duyue9522/repos", "events_url": "https://api.github.com/users/duyue9522/events{/privacy}", "received_events_url": "https://api.github.com/users/duyue9522/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-03-27T08:42:44Z", "updated_at": "2019-03-31T03:15:42Z", "closed_at": "2019-03-31T03:15:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "  File \"/data/www/envs/flask/lib/python2.7/site-packages/happybase/__init__.py\", line 10, in <module>\r\n    'Hbase_thrift')\r\n  File \"/data/www/envs/flask/lib/python2.7/site-packages/thriftpy2/parser/__init__.py\", line 33, in load\r\n    include_dir=include_dir)\r\n  File \"/data/www/envs/flask/lib/python2.7/site-packages/thriftpy2/parser/parser.py\", line 545, in parse\r\n    lexer = lex.lex()\r\n  File \"/data/www/envs/flask/lib/python2.7/site-packages/ply/lex.py\", line 910, in lex\r\n    raise SyntaxError(\"Can't build lexer\")\r\nSyntaxError: Can't build lexer", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/49", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/49/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/49/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/49", "id": 425278029, "node_id": "MDU6SXNzdWU0MjUyNzgwMjk=", "number": 49, "title": "\u662f\u5426\u53ef\u4ee5\u589e\u52a0\u591a\u4e2aidl\u6587\u4ef6\u76f8\u4e92 include \u7684\u4f7f\u7528\u4ee3\u7801\u793a\u4f8b\u5462\uff1f\u8c22\u8c22", "user": {"login": "zeyu203", "id": 5253434, "node_id": "MDQ6VXNlcjUyNTM0MzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/5253434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zeyu203", "html_url": "https://github.com/zeyu203", "followers_url": "https://api.github.com/users/zeyu203/followers", "following_url": "https://api.github.com/users/zeyu203/following{/other_user}", "gists_url": "https://api.github.com/users/zeyu203/gists{/gist_id}", "starred_url": "https://api.github.com/users/zeyu203/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zeyu203/subscriptions", "organizations_url": "https://api.github.com/users/zeyu203/orgs", "repos_url": "https://api.github.com/users/zeyu203/repos", "events_url": "https://api.github.com/users/zeyu203/events{/privacy}", "received_events_url": "https://api.github.com/users/zeyu203/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-26T08:13:03Z", "updated_at": "2019-03-27T06:30:49Z", "closed_at": "2019-03-27T06:30:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u662f\u5426\u53ef\u4ee5\u589e\u52a0\u591a\u4e2aidl\u6587\u4ef6\u76f8\u4e92 include \u7684\u4f7f\u7528\u4ee3\u7801\u793a\u4f8b\u5462\uff1f\u8c22\u8c22", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/48", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/48/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/48/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/48", "id": 419680589, "node_id": "MDU6SXNzdWU0MTk2ODA1ODk=", "number": 48, "title": "Add URL parsing to make_client/client_context", "user": {"login": "dmulter", "id": 411993, "node_id": "MDQ6VXNlcjQxMTk5Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/411993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmulter", "html_url": "https://github.com/dmulter", "followers_url": "https://api.github.com/users/dmulter/followers", "following_url": "https://api.github.com/users/dmulter/following{/other_user}", "gists_url": "https://api.github.com/users/dmulter/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmulter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmulter/subscriptions", "organizations_url": "https://api.github.com/users/dmulter/orgs", "repos_url": "https://api.github.com/users/dmulter/repos", "events_url": "https://api.github.com/users/dmulter/events{/privacy}", "received_events_url": "https://api.github.com/users/dmulter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821640, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQw", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-03-11T20:58:20Z", "updated_at": "2019-09-01T11:17:21Z", "closed_at": "2019-09-01T11:17:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently you must pass in `host`, `scheme`, and `path` when using the `HTTPClient`. It would be a nice feature to take a `url` parameter, and have the client method use `urllib.parse` to extract out these values for the caller.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/47", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/47/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/47/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/47/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/47", "id": 418144827, "node_id": "MDU6SXNzdWU0MTgxNDQ4Mjc=", "number": 47, "title": "how to use multi and gunicorn at the same time?", "user": {"login": "GTKK", "id": 20642774, "node_id": "MDQ6VXNlcjIwNjQyNzc0", "avatar_url": "https://avatars3.githubusercontent.com/u/20642774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GTKK", "html_url": "https://github.com/GTKK", "followers_url": "https://api.github.com/users/GTKK/followers", "following_url": "https://api.github.com/users/GTKK/following{/other_user}", "gists_url": "https://api.github.com/users/GTKK/gists{/gist_id}", "starred_url": "https://api.github.com/users/GTKK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GTKK/subscriptions", "organizations_url": "https://api.github.com/users/GTKK/orgs", "repos_url": "https://api.github.com/users/GTKK/repos", "events_url": "https://api.github.com/users/GTKK/events{/privacy}", "received_events_url": "https://api.github.com/users/GTKK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-07T06:07:54Z", "updated_at": "2019-03-26T10:06:11Z", "closed_at": "2019-03-26T10:06:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "how can i run multiplexer by gunicorn", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/41", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/41/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/41/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/41/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/41", "id": 413521825, "node_id": "MDU6SXNzdWU0MTM1MjE4MjU=", "number": 41, "title": "Types used in lists must be declared beforehand", "user": {"login": "zhaakhi", "id": 9449576, "node_id": "MDQ6VXNlcjk0NDk1NzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/9449576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhaakhi", "html_url": "https://github.com/zhaakhi", "followers_url": "https://api.github.com/users/zhaakhi/followers", "following_url": "https://api.github.com/users/zhaakhi/following{/other_user}", "gists_url": "https://api.github.com/users/zhaakhi/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhaakhi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhaakhi/subscriptions", "organizations_url": "https://api.github.com/users/zhaakhi/orgs", "repos_url": "https://api.github.com/users/zhaakhi/repos", "events_url": "https://api.github.com/users/zhaakhi/events{/privacy}", "received_events_url": "https://api.github.com/users/zhaakhi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821638, "node_id": "MDU6TGFiZWwxMDY5ODIxNjM4", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-22T18:21:22Z", "updated_at": "2019-02-23T13:01:07Z", "closed_at": "2019-02-23T13:01:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If you have a field with a type like `list<T>`, `T` must already have been declared, or the field will be serialized wrong.\r\n\r\nHow to reproduce:\r\nIn `tests/container.thrift`, move ListStruct to the top of the file, before ListItem,\r\nRun the tests and `test_container.py` will fail:\r\n```\r\n    def test_list_struct():\r\n        l_item = container.ListItem()\r\n        l_item.list_string = ['foo', 'bar'] * 100\r\n        l_item.list_list_string = [['foo', 'bar']] * 100\r\n    \r\n        l_struct = container.ListStruct()\r\n        l_struct.list_items = [l_item] * 100\r\n    \r\n        b = serialize(l_struct)\r\n        l_struct2 = deserialize(container.ListStruct(), b)\r\n>       assert l_struct == l_struct2\r\nE       AssertionError: assert ListStruct(list_items=[ListItem(list_string=['foo', 'bar', 'foo', 'bar', 'foo', 'bar', 'foo', 'bar', 'foo', 'bar', 'fo...r'], ['foo', 'bar'], ['foo', 'bar'], ['foo', 'bar'], ['foo', 'bar'], ['foo', 'bar'], ['foo', 'bar'], ['foo', 'bar']])])\r\n== ListStruct(list_items=[None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None,...one, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None, None])\r\n\r\ntest_container.py:55: AssertionError\r\n```\r\n\r\nIt looks like `fill_incomplete_ttype` should deal with declaration order, but misses the list field. I would also expect serializing or deserializing incomplete types to fail instead of silently substituting 'None', since this makes bugs hard to debug.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/40", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/40/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/40/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/40", "id": 413196044, "node_id": "MDU6SXNzdWU0MTMxOTYwNDQ=", "number": 40, "title": "Installing thriftpy2 on pypy breaks installing it on CPython", "user": {"login": "drolando", "id": 3317638, "node_id": "MDQ6VXNlcjMzMTc2Mzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/3317638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drolando", "html_url": "https://github.com/drolando", "followers_url": "https://api.github.com/users/drolando/followers", "following_url": "https://api.github.com/users/drolando/following{/other_user}", "gists_url": "https://api.github.com/users/drolando/gists{/gist_id}", "starred_url": "https://api.github.com/users/drolando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drolando/subscriptions", "organizations_url": "https://api.github.com/users/drolando/orgs", "repos_url": "https://api.github.com/users/drolando/repos", "events_url": "https://api.github.com/users/drolando/events{/privacy}", "received_events_url": "https://api.github.com/users/drolando/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1180811177, "node_id": "MDU6TGFiZWwxMTgwODExMTc3", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/need%20more%20info", "name": "need more info", "color": "0daa32", "default": false, "description": ""}, {"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-02-22T01:09:38Z", "updated_at": "2019-02-26T08:05:45Z", "closed_at": "2019-02-26T08:05:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "If you run `pip install thriftpy2` in  a pypy virtualenv, pip generates a `thriftpy2-0.4.1-py2.py3-none-any.whl` wheel which won't work in CPython. `pip` also saves these wheels in your home folder cache, which means that if you try to install it in any other virtualenv afterwards it'll just use that cached wheel.\r\n\r\nIf you now install it in a CPython virtualenv and try to import `from thriftpy2.protocol.binary import read_list_begin` you'll get an error like `ModuleNotFoundError: No module named 'thriftpy2.protocol.cybin'`.\r\n\r\nFrom what I understand, when we're running in pypy we don't compile some modules with cython. Which is why it generates a universal wheel. However when running in CPython the code somehow understands that you should have compiled those modules, so it tries to import the .so files. And fails since the wheel was built in pypy.\r\n\r\nThis is very annoying since I have to either always specify `--no-binary thriftpy2` in every pip install or wipe my local cache every time I run the tests.\r\n\r\nI'm not sure what the best solution is here, but if we made the code resistant to those modules being missing that'd already help.\r\n\r\n--------------\r\n\r\nTo reproduce just create a Dockerfile with this content:\r\n```Dockerfile\r\nFROM ubuntu:bionic\r\n\r\nRUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \\\r\n    build-essential \\\r\n    pypy \\\r\n    python3-dev \\\r\n    virtualenv\r\n\r\nRUN virtualenv -p pypy venv_pypy\r\nRUN venv_pypy/bin/pip install -v thriftpy2\r\nRUN venv_pypy/bin/python -c 'from thriftpy2.protocol.binary import read_list_begin'\r\n\r\nRUN virtualenv -p python3 venv_py3\r\nRUN venv_py3/bin/pip install -v thriftpy2\r\nRUN venv_py3/bin/python -c 'from thriftpy2.protocol.binary import read_list_begin'\r\n```\r\nand then run `docker build .`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/36", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/36/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/36/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/36", "id": 401755546, "node_id": "MDU6SXNzdWU0MDE3NTU1NDY=", "number": 36, "title": "Import issue on AWS Lambda", "user": {"login": "springcoil", "id": 983944, "node_id": "MDQ6VXNlcjk4Mzk0NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/983944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/springcoil", "html_url": "https://github.com/springcoil", "followers_url": "https://api.github.com/users/springcoil/followers", "following_url": "https://api.github.com/users/springcoil/following{/other_user}", "gists_url": "https://api.github.com/users/springcoil/gists{/gist_id}", "starred_url": "https://api.github.com/users/springcoil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/springcoil/subscriptions", "organizations_url": "https://api.github.com/users/springcoil/orgs", "repos_url": "https://api.github.com/users/springcoil/repos", "events_url": "https://api.github.com/users/springcoil/events{/privacy}", "received_events_url": "https://api.github.com/users/springcoil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-01-22T13:05:33Z", "updated_at": "2019-07-24T18:07:14Z", "closed_at": "2019-02-14T08:23:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to get Thriftpy2 to work with AWS Lambda. AWS Lambda depends on an AWS Linux which I think is based on RHEL/centos. \r\nhttps://docs.aws.amazon.com/lambda/latest/dg/current-supported-versions.html \r\n\r\nI get the following error:\r\n```(aws) bash-4.2# python lambda_func.py\r\nTraceback (most recent call last):\r\n  File \"lambda_func.py\", line 3, in <module>\r\n    from thriftpy2.protocol import TCyBinaryProtocolFactory\r\n  File \"/var/task/thriftpy2/protocol/__init__.py\", line 14, in <module>\r\n    from .cybin import TCyBinaryProtocol, TCyBinaryProtocolFactory\r\nModuleNotFoundError: No module named 'thriftpy2.protocol.cybin'``` \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/31", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/31/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/31/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/31", "id": 395912241, "node_id": "MDU6SXNzdWUzOTU5MTIyNDE=", "number": 31, "title": "TApplicationException: Missing result", "user": {"login": "zyi1992", "id": 12459874, "node_id": "MDQ6VXNlcjEyNDU5ODc0", "avatar_url": "https://avatars3.githubusercontent.com/u/12459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyi1992", "html_url": "https://github.com/zyi1992", "followers_url": "https://api.github.com/users/zyi1992/followers", "following_url": "https://api.github.com/users/zyi1992/following{/other_user}", "gists_url": "https://api.github.com/users/zyi1992/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyi1992/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyi1992/subscriptions", "organizations_url": "https://api.github.com/users/zyi1992/orgs", "repos_url": "https://api.github.com/users/zyi1992/repos", "events_url": "https://api.github.com/users/zyi1992/events{/privacy}", "received_events_url": "https://api.github.com/users/zyi1992/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1180811177, "node_id": "MDU6TGFiZWwxMTgwODExMTc3", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/need%20more%20info", "name": "need more info", "color": "0daa32", "default": false, "description": ""}, {"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-01-04T12:39:30Z", "updated_at": "2019-01-11T02:52:00Z", "closed_at": "2019-01-11T02:52:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got the same problem as this [issue](https://github.com/Thriftpy/thriftpy/issues/235), I run my server with gunicorn_thrift and thriftpy_gevent, it work well all the time but raise \"Missing result\"  suddenly.  ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/28", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/28/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/28/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/28", "id": 394380255, "node_id": "MDU6SXNzdWUzOTQzODAyNTU=", "number": 28, "title": "What's the difference between v1 and v2?", "user": {"login": "torpedoallen", "id": 4771351, "node_id": "MDQ6VXNlcjQ3NzEzNTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/4771351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/torpedoallen", "html_url": "https://github.com/torpedoallen", "followers_url": "https://api.github.com/users/torpedoallen/followers", "following_url": "https://api.github.com/users/torpedoallen/following{/other_user}", "gists_url": "https://api.github.com/users/torpedoallen/gists{/gist_id}", "starred_url": "https://api.github.com/users/torpedoallen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/torpedoallen/subscriptions", "organizations_url": "https://api.github.com/users/torpedoallen/orgs", "repos_url": "https://api.github.com/users/torpedoallen/repos", "events_url": "https://api.github.com/users/torpedoallen/events{/privacy}", "received_events_url": "https://api.github.com/users/torpedoallen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-27T12:17:55Z", "updated_at": "2018-12-28T02:49:33Z", "closed_at": "2018-12-28T02:49:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can you provide some background information about the migration? We used the thriftpy v1 in production environment perfectly and someday my colleague told me v2 had come out. We prefer to do the migration after having enough background knowledge.\r\n\r\nThank in advance.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/27", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/27/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/27/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/27", "id": 393286864, "node_id": "MDU6SXNzdWUzOTMyODY4NjQ=", "number": 27, "title": "\u662f\u5426\u6709\u76f8\u5173\u8ba8\u8bba\u6e20\u9053", "user": {"login": "usedev", "id": 3711148, "node_id": "MDQ6VXNlcjM3MTExNDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/3711148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/usedev", "html_url": "https://github.com/usedev", "followers_url": "https://api.github.com/users/usedev/followers", "following_url": "https://api.github.com/users/usedev/following{/other_user}", "gists_url": "https://api.github.com/users/usedev/gists{/gist_id}", "starred_url": "https://api.github.com/users/usedev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/usedev/subscriptions", "organizations_url": "https://api.github.com/users/usedev/orgs", "repos_url": "https://api.github.com/users/usedev/repos", "events_url": "https://api.github.com/users/usedev/events{/privacy}", "received_events_url": "https://api.github.com/users/usedev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-21T02:20:00Z", "updated_at": "2019-01-10T02:40:50Z", "closed_at": "2019-01-10T02:40:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u5fae\u4fe1/\u9489\u9489/QQ\u7b49\u7fa4", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/26", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/26/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/26/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/26/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/26", "id": 390986693, "node_id": "MDU6SXNzdWUzOTA5ODY2OTM=", "number": 26, "title": "bug", "user": {"login": "zyzhang-aibee", "id": 45031968, "node_id": "MDQ6VXNlcjQ1MDMxOTY4", "avatar_url": "https://avatars1.githubusercontent.com/u/45031968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyzhang-aibee", "html_url": "https://github.com/zyzhang-aibee", "followers_url": "https://api.github.com/users/zyzhang-aibee/followers", "following_url": "https://api.github.com/users/zyzhang-aibee/following{/other_user}", "gists_url": "https://api.github.com/users/zyzhang-aibee/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyzhang-aibee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyzhang-aibee/subscriptions", "organizations_url": "https://api.github.com/users/zyzhang-aibee/orgs", "repos_url": "https://api.github.com/users/zyzhang-aibee/repos", "events_url": "https://api.github.com/users/zyzhang-aibee/events{/privacy}", "received_events_url": "https://api.github.com/users/zyzhang-aibee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821638, "node_id": "MDU6TGFiZWwxMDY5ODIxNjM4", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1161182888, "node_id": "MDU6TGFiZWwxMTYxMTgyODg4", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/examples", "name": "examples", "color": "fbca04", "default": false, "description": ""}, {"id": 1069821642, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQy", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-14T06:47:12Z", "updated_at": "2019-01-10T04:10:01Z", "closed_at": "2019-01-10T04:10:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "example/multiplexer/server.py   forgot the host and port", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/17", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/17/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/17/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/17", "id": 380037012, "node_id": "MDU6SXNzdWUzODAwMzcwMTI=", "number": 17, "title": "about log request parameters", "user": {"login": "better629", "id": 7869691, "node_id": "MDQ6VXNlcjc4Njk2OTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/7869691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/better629", "html_url": "https://github.com/better629", "followers_url": "https://api.github.com/users/better629/followers", "following_url": "https://api.github.com/users/better629/following{/other_user}", "gists_url": "https://api.github.com/users/better629/gists{/gist_id}", "starred_url": "https://api.github.com/users/better629/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/better629/subscriptions", "organizations_url": "https://api.github.com/users/better629/orgs", "repos_url": "https://api.github.com/users/better629/repos", "events_url": "https://api.github.com/users/better629/events{/privacy}", "received_events_url": "https://api.github.com/users/better629/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}, {"id": 1069821645, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ1", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-13T02:57:36Z", "updated_at": "2019-01-10T02:40:28Z", "closed_at": "2019-01-10T02:40:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n    How to get the request parameters for logging, is there any example to check.\r\n    Which I mean define a method as below:\r\n          string ping(1:i32 a, 2:i32 b)\r\n    can I catch the parameters of ping(1, 2, 3). It seems that it only print (1,2)\r\n\r\nThx.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/16", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/16/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/16/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/16", "id": 379125178, "node_id": "MDU6SXNzdWUzNzkxMjUxNzg=", "number": 16, "title": "\u5bf9\u652f\u6301\u7684thrift\u7248\u672c\u6709\u9650\u5236\u5417\uff1f", "user": {"login": "albzcj", "id": 6976271, "node_id": "MDQ6VXNlcjY5NzYyNzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/6976271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albzcj", "html_url": "https://github.com/albzcj", "followers_url": "https://api.github.com/users/albzcj/followers", "following_url": "https://api.github.com/users/albzcj/following{/other_user}", "gists_url": "https://api.github.com/users/albzcj/gists{/gist_id}", "starred_url": "https://api.github.com/users/albzcj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albzcj/subscriptions", "organizations_url": "https://api.github.com/users/albzcj/orgs", "repos_url": "https://api.github.com/users/albzcj/repos", "events_url": "https://api.github.com/users/albzcj/events{/privacy}", "received_events_url": "https://api.github.com/users/albzcj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-09T11:27:14Z", "updated_at": "2019-01-10T02:43:36Z", "closed_at": "2019-01-10T02:43:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/15", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/15/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/15/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/15", "id": 376815152, "node_id": "MDU6SXNzdWUzNzY4MTUxNTI=", "number": 15, "title": "No protocol version header ", "user": {"login": "naah69", "id": 25682169, "node_id": "MDQ6VXNlcjI1NjgyMTY5", "avatar_url": "https://avatars3.githubusercontent.com/u/25682169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naah69", "html_url": "https://github.com/naah69", "followers_url": "https://api.github.com/users/naah69/followers", "following_url": "https://api.github.com/users/naah69/following{/other_user}", "gists_url": "https://api.github.com/users/naah69/gists{/gist_id}", "starred_url": "https://api.github.com/users/naah69/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naah69/subscriptions", "organizations_url": "https://api.github.com/users/naah69/orgs", "repos_url": "https://api.github.com/users/naah69/repos", "events_url": "https://api.github.com/users/naah69/events{/privacy}", "received_events_url": "https://api.github.com/users/naah69/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-11-02T13:43:14Z", "updated_at": "2018-11-05T07:37:00Z", "closed_at": "2018-11-05T07:36:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "when i use java client to invok my python server,it errors\r\n\r\n```\r\n2018-11-02 21:37:01 ERROR    thriftpy.server  - No protocol version header\r\nTraceback (most recent call last):\r\n  File \"/root/anaconda3/envs/rasa/lib/python3.6/site-packages/thriftpy/server.py\", line 95, in handle\r\n    self.processor.process(iprot, oprot)\r\n  File \"/root/anaconda3/envs/rasa/lib/python3.6/site-packages/thriftpy/thrift.py\", line 294, in process\r\n    api, seqid, result, call = self.process_in(iprot)\r\n  File \"/root/anaconda3/envs/rasa/lib/python3.6/site-packages/thriftpy/thrift.py\", line 250, in process_in\r\n    api, type, seqid = iprot.read_message_begin()\r\n  File \"thriftpy/protocol/cybin/cybin.pyx\", line 439, in cybin.TCyBinaryProtocol.read_message_begin\r\ncybin.ProtocolError: No protocol version header\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/14", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/14/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/14/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/14", "id": 376646436, "node_id": "MDU6SXNzdWUzNzY2NDY0MzY=", "number": 14, "title": "how to use multi server with its own port", "user": {"login": "better629", "id": 7869691, "node_id": "MDQ6VXNlcjc4Njk2OTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/7869691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/better629", "html_url": "https://github.com/better629", "followers_url": "https://api.github.com/users/better629/followers", "following_url": "https://api.github.com/users/better629/following{/other_user}", "gists_url": "https://api.github.com/users/better629/gists{/gist_id}", "starred_url": "https://api.github.com/users/better629/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/better629/subscriptions", "organizations_url": "https://api.github.com/users/better629/orgs", "repos_url": "https://api.github.com/users/better629/repos", "events_url": "https://api.github.com/users/better629/events{/privacy}", "received_events_url": "https://api.github.com/users/better629/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1069821644, "node_id": "MDU6TGFiZWwxMDY5ODIxNjQ0", "url": "https://api.github.com/repos/Thriftpy/thriftpy2/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-02T02:40:11Z", "updated_at": "2019-01-10T02:40:39Z", "closed_at": "2019-01-10T02:40:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi ,\r\n     I want to know how to use multi server with its own port in a program. For example, PingPing.ping use 127.0.0.1:80\uff1bPingDong.dong use 127.0.0.1:8080 as server address.\r\n     It seems that TThreadedServer supports multi server with same port in a program.\r\n\r\nThx!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/12", "repository_url": "https://api.github.com/repos/Thriftpy/thriftpy2", "labels_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/12/comments", "events_url": "https://api.github.com/repos/Thriftpy/thriftpy2/issues/12/events", "html_url": "https://github.com/Thriftpy/thriftpy2/issues/12", "id": 372285799, "node_id": "MDU6SXNzdWUzNzIyODU3OTk=", "number": 12, "title": "client can not connect to remote server with the pingpong demo", "user": {"login": "xinglinyin", "id": 26497032, "node_id": "MDQ6VXNlcjI2NDk3MDMy", "avatar_url": "https://avatars2.githubusercontent.com/u/26497032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xinglinyin", "html_url": "https://github.com/xinglinyin", "followers_url": "https://api.github.com/users/xinglinyin/followers", "following_url": "https://api.github.com/users/xinglinyin/following{/other_user}", "gists_url": "https://api.github.com/users/xinglinyin/gists{/gist_id}", "starred_url": "https://api.github.com/users/xinglinyin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xinglinyin/subscriptions", "organizations_url": "https://api.github.com/users/xinglinyin/orgs", "repos_url": "https://api.github.com/users/xinglinyin/repos", "events_url": "https://api.github.com/users/xinglinyin/events{/privacy}", "received_events_url": "https://api.github.com/users/xinglinyin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-21T06:55:29Z", "updated_at": "2018-11-07T08:25:19Z", "closed_at": "2018-10-21T07:30:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "@ethe  \r\nwhen  I run the demo such as, raise exception can not conect demo server.\r\nit ok for client and server run the same machine\r\nbut not worked for two different machine.   \r\nThank you very much for any help.\r\n![image](https://user-images.githubusercontent.com/26497032/47264060-efa52180-d540-11e8-90ed-f90055fca311.png)\r\n", "performed_via_github_app": null, "score": 1.0}]}