{"total_count": 21, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/99", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/99/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/99/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/99", "id": 650512207, "node_id": "MDU6SXNzdWU2NTA1MTIyMDc=", "number": 99, "title": "Cannot read property 'build' of null - aws-kinesis-agg/lib/common.js", "user": {"login": "Strydom", "id": 2946828, "node_id": "MDQ6VXNlcjI5NDY4Mjg=", "avatar_url": "https://avatars2.githubusercontent.com/u/2946828?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Strydom", "html_url": "https://github.com/Strydom", "followers_url": "https://api.github.com/users/Strydom/followers", "following_url": "https://api.github.com/users/Strydom/following{/other_user}", "gists_url": "https://api.github.com/users/Strydom/gists{/gist_id}", "starred_url": "https://api.github.com/users/Strydom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Strydom/subscriptions", "organizations_url": "https://api.github.com/users/Strydom/orgs", "repos_url": "https://api.github.com/users/Strydom/repos", "events_url": "https://api.github.com/users/Strydom/events{/privacy}", "received_events_url": "https://api.github.com/users/Strydom/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-03T10:41:56Z", "updated_at": "2020-07-08T10:05:23Z", "closed_at": "2020-07-08T10:05:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI'm having issues using this library in a Typescript project that is being webpacked.\r\nI'm able to run the code in the TS package (`blacksmith-kinesis-mapper`) where i use the `aws-kinesis-agg` library and when I run my integration tests before packaging the Node Lambda (`blacksmith-foundry-dynamo-listener`) that pulls in the TS package.\r\n\r\nThe issue arrises when I package the lambda code up using webpack.\r\nI get the error in AWS and when i run the code locally with `lambda-local`.\r\n\r\n```\r\nerror: {\r\n\t\"errorMessage\": \"Cannot read property 'build' of null\",\r\n\t\"errorType\": \"TypeError\",\r\n\t\"stackTrace\": [\r\n\t\t\"loadBuilder (/Users/chstrydom/Documents/GitHub/blacksmith-foundry-dynamo-listener/build/index.js:5779:17)\",\r\n\t\t\"Object.<anonymous> (/Users/chstrydom/Documents/GitHub/blacksmith-foundry-dynamo-listener/build/index.js:5787:26)\",\r\n\t\t\"Object../node_modules/aws-kinesis-agg/lib/common.js (/Users/chstrydom/Documents/GitHub/blacksmith-foundry-dynamo-listener/build/index.js:5797:30)\",\r\n\t\t\"__webpack_require__ (/Users/chstrydom/Documents/GitHub/blacksmith-foundry-dynamo-listener/build/index.js:20:30)\",\r\n\t\t\"Object../node_modules/aws-kinesis-agg/lib/kpl-deagg.js (/Users/chstrydom/Documents/GitHub/blacksmith-foundry-dynamo-listener/build/index.js:6316:16)\",\r\n\t\t\"__webpack_require__ (/Users/chstrydom/Documents/GitHub/blacksmith-foundry-dynamo-listener/build/index.js:20:30)\",\r\n\t\t\"Object../node_modules/aws-kinesis-agg/index.js (/Users/chstrydom/Documents/GitHub/blacksmith-foundry-dynamo-listener/build/index.js:5719:34)\",\r\n\t\t\"__webpack_require__ (/Users/chstrydom/Documents/GitHub/blacksmith-foundry-dynamo-listener/build/index.js:20:30)\",\r\n\t\t\"Object../node_modules/blacksmith-kinesis-mapper/lib/deaggregate.js (/Users/chstrydom/Documents/GitHub/blacksmith-foundry-dynamo-listener/build/index.js:23714:43)\",\r\n\t\t\"__webpack_require__ (/Users/chstrydom/Documents/GitHub/blacksmith-foundry-dynamo-listener/build/index.js:20:30)\"\r\n\t]\r\n}\r\n```\r\n\r\nThe stack trace seems to point to https://github.com/awslabs/kinesis-aggregation/blob/master/node/lib/common.js#L43\r\n\r\nI'm not sure If it's an issue with my project or if you need to do something to prevent webpack from treeshaking needed files etc?\r\n\r\n- webpack: 4.43.0\r\n- typescript: 3.7.5\r\n- serverless-webpack: 5.3.2", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/84", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/84/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/84/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/84", "id": 559565358, "node_id": "MDU6SXNzdWU1NTk1NjUzNTg=", "number": 84, "title": "Add support for deaggregation in Firehose python \u03bb", "user": {"login": "a3lk4i", "id": 52095198, "node_id": "MDQ6VXNlcjUyMDk1MTk4", "avatar_url": "https://avatars3.githubusercontent.com/u/52095198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a3lk4i", "html_url": "https://github.com/a3lk4i", "followers_url": "https://api.github.com/users/a3lk4i/followers", "following_url": "https://api.github.com/users/a3lk4i/following{/other_user}", "gists_url": "https://api.github.com/users/a3lk4i/gists{/gist_id}", "starred_url": "https://api.github.com/users/a3lk4i/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a3lk4i/subscriptions", "organizations_url": "https://api.github.com/users/a3lk4i/orgs", "repos_url": "https://api.github.com/users/a3lk4i/repos", "events_url": "https://api.github.com/users/a3lk4i/events{/privacy}", "received_events_url": "https://api.github.com/users/a3lk4i/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-04T08:39:08Z", "updated_at": "2020-02-04T09:02:52Z", "closed_at": "2020-02-04T09:02:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Issue:\r\nDeaggregation fails in kinesis firehose transform lambda(python) as the record metadata is under `kinesisRecordMetadata` and not `kinesisStreamRecordMetadata` (like in case of Kinesis analytics preprocess lambda).\r\n\r\nSolution:\r\nHandle this as a special case just like how kinesis analytics records are handled.\r\n\r\nPR:\r\nhttps://github.com/awslabs/kinesis-aggregation/pull/83", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/73", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/73/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/73/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/73/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/73", "id": 475392746, "node_id": "MDU6SXNzdWU0NzUzOTI3NDY=", "number": 73, "title": "Missing index.d.ts within files option of package.json", "user": {"login": "Toltar", "id": 6003536, "node_id": "MDQ6VXNlcjYwMDM1MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/6003536?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Toltar", "html_url": "https://github.com/Toltar", "followers_url": "https://api.github.com/users/Toltar/followers", "following_url": "https://api.github.com/users/Toltar/following{/other_user}", "gists_url": "https://api.github.com/users/Toltar/gists{/gist_id}", "starred_url": "https://api.github.com/users/Toltar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Toltar/subscriptions", "organizations_url": "https://api.github.com/users/Toltar/orgs", "repos_url": "https://api.github.com/users/Toltar/repos", "events_url": "https://api.github.com/users/Toltar/events{/privacy}", "received_events_url": "https://api.github.com/users/Toltar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-31T22:56:51Z", "updated_at": "2019-08-29T14:07:45Z", "closed_at": "2019-08-29T14:07:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi guys,\r\n\r\nI was recently working with this library in node/typescript but could not import the types. I noticed you added the `index.d.ts` file within #57, but did not add it to the files option in `package.json`. I would be glad to open a PR to fix this.\r\n\r\nThanks,\r\nMatt", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/64", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/64/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/64/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/64", "id": 437226588, "node_id": "MDU6SXNzdWU0MzcyMjY1ODg=", "number": 64, "title": "Add support for Kinesis Analytics", "user": {"login": "dovy", "id": 890963, "node_id": "MDQ6VXNlcjg5MDk2Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/890963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dovy", "html_url": "https://github.com/dovy", "followers_url": "https://api.github.com/users/dovy/followers", "following_url": "https://api.github.com/users/dovy/following{/other_user}", "gists_url": "https://api.github.com/users/dovy/gists{/gist_id}", "starred_url": "https://api.github.com/users/dovy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dovy/subscriptions", "organizations_url": "https://api.github.com/users/dovy/orgs", "repos_url": "https://api.github.com/users/dovy/repos", "events_url": "https://api.github.com/users/dovy/events{/privacy}", "received_events_url": "https://api.github.com/users/dovy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-25T14:20:31Z", "updated_at": "2019-07-09T09:47:47Z", "closed_at": "2019-07-09T09:47:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Tried and tried as I may, this would not function with Kinesis Analytics so I had to modify the object as follows:\r\n```python\r\n    for key, record in enumerate(event['records']):\r\n\r\n        decode = record\r\n        decode.update(decode['kinesisStreamRecordMetadata'])\r\n        decode['kinesisSchemaVersion'] = '1.0'\r\n        decode = {'kinesis': record}\r\n\r\n        decode = deaggregate_records(decode)\r\n```\r\n\r\nOnce the object was correct then it worked, however, I am still having an issue splitting records up, but that's an issue for another support forum.\r\n\r\nMy suggestion is to add support internally so this doesn't have to occur since Kinesis Analytics is still Kinesis...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/53", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/53/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/53/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/53", "id": 327927657, "node_id": "MDU6SXNzdWUzMjc5Mjc2NTc=", "number": 53, "title": "Feature request: better KCL integration", "user": {"login": "xutingz", "id": 39781081, "node_id": "MDQ6VXNlcjM5NzgxMDgx", "avatar_url": "https://avatars3.githubusercontent.com/u/39781081?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xutingz", "html_url": "https://github.com/xutingz", "followers_url": "https://api.github.com/users/xutingz/followers", "following_url": "https://api.github.com/users/xutingz/following{/other_user}", "gists_url": "https://api.github.com/users/xutingz/gists{/gist_id}", "starred_url": "https://api.github.com/users/xutingz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xutingz/subscriptions", "organizations_url": "https://api.github.com/users/xutingz/orgs", "repos_url": "https://api.github.com/users/xutingz/repos", "events_url": "https://api.github.com/users/xutingz/events{/privacy}", "received_events_url": "https://api.github.com/users/xutingz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-30T22:54:47Z", "updated_at": "2018-06-25T22:29:50Z", "closed_at": "2018-06-25T22:29:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n   We are currently looking for a java alternative of KPL and the aggregation seems to be a good start. However the current aggregation solution doesn't seem to be compatible well with KCL solution (#11 ). Can we add more feature support into KCL integration? including:\r\n\r\n   1. shard level aggregation and retry logic:\r\n      Similar to #11 , KCL has validation on whether the aggregated data belongs to the correct shard and will skip to process batches that fail the validation. In order to support KCL integration, we need to parse the partition key of each record at producer level, map it to a specific shard and aggregated records for each shard.\r\n\r\n   2. split/merge shards support:\r\n       Since the producer data is aggregated based on shard, if the stream shards got splited/merged, the producer needs to detect the shard changes and re-shuffle the record based on the new shard-hashkey mappings. This is an additional bonus feature that could be supported based on 1.\r\n\r\n   3. shard level rate limiting:\r\n     Aggregation is a great way of reducing the throughputException. However in the case of large throughput and multiple kinesis producers, it would be ideal to have producer side rate limiting that monitoring the write traffic for each shard. This could help improve the producer performance and have the producer request failed at an early stage rather than fail at the sending stage.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/52", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/52/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/52/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/52", "id": 317311633, "node_id": "MDU6SXNzdWUzMTczMTE2MzM=", "number": 52, "title": "Unable to import module 'lambda_function': bad magic number in 'google.protobuf': b'\\x03\\xf3\\r\\n'", "user": {"login": "bobdemp", "id": 38502893, "node_id": "MDQ6VXNlcjM4NTAyODkz", "avatar_url": "https://avatars3.githubusercontent.com/u/38502893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobdemp", "html_url": "https://github.com/bobdemp", "followers_url": "https://api.github.com/users/bobdemp/followers", "following_url": "https://api.github.com/users/bobdemp/following{/other_user}", "gists_url": "https://api.github.com/users/bobdemp/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobdemp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobdemp/subscriptions", "organizations_url": "https://api.github.com/users/bobdemp/orgs", "repos_url": "https://api.github.com/users/bobdemp/repos", "events_url": "https://api.github.com/users/bobdemp/events{/privacy}", "received_events_url": "https://api.github.com/users/bobdemp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-04-24T16:53:09Z", "updated_at": "2018-07-04T22:01:33Z", "closed_at": "2018-07-04T22:01:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nWhen trying to build for python 3.6 I get the following message\r\n\r\nUnable to import module 'lambda_function': bad magic number in 'google.protobuf': b'\\x03\\xf3\\r\\n'\r\n\r\nIs this because protobuf is only for Python :: 3.4\r\n\r\nThanks\r\n\r\nRob", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/43", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/43/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/43/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/43", "id": 293567548, "node_id": "MDU6SXNzdWUyOTM1Njc1NDg=", "number": 43, "title": "AggRecord.java", "user": {"login": "NewstHet", "id": 9034134, "node_id": "MDQ6VXNlcjkwMzQxMzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/9034134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NewstHet", "html_url": "https://github.com/NewstHet", "followers_url": "https://api.github.com/users/NewstHet/followers", "following_url": "https://api.github.com/users/NewstHet/following{/other_user}", "gists_url": "https://api.github.com/users/NewstHet/gists{/gist_id}", "starred_url": "https://api.github.com/users/NewstHet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NewstHet/subscriptions", "organizations_url": "https://api.github.com/users/NewstHet/orgs", "repos_url": "https://api.github.com/users/NewstHet/repos", "events_url": "https://api.github.com/users/NewstHet/events{/privacy}", "received_events_url": "https://api.github.com/users/NewstHet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-02-01T15:16:26Z", "updated_at": "2020-06-14T13:11:47Z", "closed_at": "2020-06-14T13:11:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "change\r\norg.apache.commons.lang.StringUtils\r\nto\r\norg.apache.commons.lang3.StringUtils\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/35", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/35/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/35/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/35", "id": 261607419, "node_id": "MDU6SXNzdWUyNjE2MDc0MTk=", "number": 35, "title": "Update Node.js NPM module to version 3.0.0", "user": {"login": "shimont", "id": 2613168, "node_id": "MDQ6VXNlcjI2MTMxNjg=", "avatar_url": "https://avatars1.githubusercontent.com/u/2613168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shimont", "html_url": "https://github.com/shimont", "followers_url": "https://api.github.com/users/shimont/followers", "following_url": "https://api.github.com/users/shimont/following{/other_user}", "gists_url": "https://api.github.com/users/shimont/gists{/gist_id}", "starred_url": "https://api.github.com/users/shimont/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shimont/subscriptions", "organizations_url": "https://api.github.com/users/shimont/orgs", "repos_url": "https://api.github.com/users/shimont/repos", "events_url": "https://api.github.com/users/shimont/events{/privacy}", "received_events_url": "https://api.github.com/users/shimont/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-29T11:05:39Z", "updated_at": "2017-09-29T14:22:19Z", "closed_at": "2017-09-29T14:22:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The latest module version on [NPM](https://www.npmjs.com/package/aws-kinesis-agg) is 2.2.2 - Could you please update to version 3.0.0 @IanMeyers ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/33", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/33/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/33/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/33", "id": 258314660, "node_id": "MDU6SXNzdWUyNTgzMTQ2NjA=", "number": 33, "title": "Failed to forward Kinesis records to destination stream", "user": {"login": "AEKurt", "id": 11842084, "node_id": "MDQ6VXNlcjExODQyMDg0", "avatar_url": "https://avatars3.githubusercontent.com/u/11842084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AEKurt", "html_url": "https://github.com/AEKurt", "followers_url": "https://api.github.com/users/AEKurt/followers", "following_url": "https://api.github.com/users/AEKurt/following{/other_user}", "gists_url": "https://api.github.com/users/AEKurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/AEKurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AEKurt/subscriptions", "organizations_url": "https://api.github.com/users/AEKurt/orgs", "repos_url": "https://api.github.com/users/AEKurt/repos", "events_url": "https://api.github.com/users/AEKurt/events{/privacy}", "received_events_url": "https://api.github.com/users/AEKurt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-09-17T16:21:18Z", "updated_at": "2019-10-30T07:52:30Z", "closed_at": "2017-09-18T10:51:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "I cannot write aggregated data to my kinesis stream. My lambda function and kinesis stream are in the same account. My lambda can read data from a-stream however cannot write b-stream.\r\nIm getting this error,\r\nERROR: Failed to forward Kinesis records to destination stream: Unable to execute HTTP request: Connect to kinesis.us-east-1.amazonaws.com:443 [kinesis.us-east-1.amazonaws.com/54.239.22.11] failed: connect timed out\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/32", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/32/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/32/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/32", "id": 256552382, "node_id": "MDU6SXNzdWUyNTY1NTIzODI=", "number": 32, "title": "Potential incompatibility with KPL", "user": {"login": "behrangsa", "id": 18451, "node_id": "MDQ6VXNlcjE4NDUx", "avatar_url": "https://avatars0.githubusercontent.com/u/18451?v=4", "gravatar_id": "", "url": "https://api.github.com/users/behrangsa", "html_url": "https://github.com/behrangsa", "followers_url": "https://api.github.com/users/behrangsa/followers", "following_url": "https://api.github.com/users/behrangsa/following{/other_user}", "gists_url": "https://api.github.com/users/behrangsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/behrangsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/behrangsa/subscriptions", "organizations_url": "https://api.github.com/users/behrangsa/orgs", "repos_url": "https://api.github.com/users/behrangsa/repos", "events_url": "https://api.github.com/users/behrangsa/events{/privacy}", "received_events_url": "https://api.github.com/users/behrangsa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-11T00:17:43Z", "updated_at": "2017-09-11T08:48:36Z", "closed_at": "2017-09-11T08:48:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "As @pfifer has mentioned in [amazon-kinesis-producer#128](https://github.com/awslabs/amazon-kinesis-producer/issues/128#issuecomment-326633228) (emphasis mine):\r\n\r\n> In addition to this the KPL publishes to a stream, and not a specific shard. _**If two user records are destined for different shards they will never be aggregated together**_.\r\n\r\nHowever kinesis-aggregation seems to aggregate user records into an `AggRecord` and then a `PutRecordRequest` even if they must end up in different shards. This could break KPL compatible clients (e.g. those using KCL).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/29", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/29/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/29/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/29", "id": 255166409, "node_id": "MDU6SXNzdWUyNTUxNjY0MDk=", "number": 29, "title": "createExplicitHashKey could create keys that fail validation with validateExplicitHashKey", "user": {"login": "behrangsa", "id": 18451, "node_id": "MDQ6VXNlcjE4NDUx", "avatar_url": "https://avatars0.githubusercontent.com/u/18451?v=4", "gravatar_id": "", "url": "https://api.github.com/users/behrangsa", "html_url": "https://github.com/behrangsa", "followers_url": "https://api.github.com/users/behrangsa/followers", "following_url": "https://api.github.com/users/behrangsa/following{/other_user}", "gists_url": "https://api.github.com/users/behrangsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/behrangsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/behrangsa/subscriptions", "organizations_url": "https://api.github.com/users/behrangsa/orgs", "repos_url": "https://api.github.com/users/behrangsa/repos", "events_url": "https://api.github.com/users/behrangsa/events{/privacy}", "received_events_url": "https://api.github.com/users/behrangsa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-05T05:51:35Z", "updated_at": "2017-09-06T08:03:54Z", "closed_at": "2017-09-06T08:03:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If we don't pass an explicit hash key to `addUserRecord` it will try to generate one from the partition key:\r\n\r\n```java\r\n    public boolean addUserRecord(String partitionKey, String explicitHashKey, byte[] data) {\r\n        validatePartitionKey(partitionKey);\r\n        partitionKey = partitionKey.trim();\r\n\r\n        explicitHashKey = explicitHashKey != null ? explicitHashKey.trim() : createExplicitHashKey(partitionKey);\r\n```\r\n\r\nFor some partition keys, the generated hash key could be invalid. For example if my partition key is:\r\n\r\n```\r\nString pk = new String(new byte[] {\r\n                66,\r\n                69,\r\n                84,\r\n                0,\r\n                0,\r\n                0,\r\n                0,\r\n                46,\r\n                69,\r\n                -17,\r\n                -65,\r\n                -67,\r\n                -17,\r\n                -65,\r\n                -67\r\n        });\r\n```\r\n\r\nThen `createExplicitHashKey(pk)` will generate: `-123`. To reproduce:\r\n\r\n```java\r\npublic class Main {\r\n\r\n    public static void main(String[] args) throws NoSuchAlgorithmException {\r\n        String pk = new String(new byte[]{\r\n                66,\r\n                69,\r\n                84,\r\n                0,\r\n                0,\r\n                0,\r\n                0,\r\n                46,\r\n                69,\r\n                -17,\r\n                -65,\r\n                -67,\r\n                -17,\r\n                -65,\r\n                -67\r\n        });\r\n\r\n        AggRecord record = new AggRecord();\r\n        record.addUserRecord(pk, null, new byte[]{1, 2, 3});\r\n    }\r\n\r\n}\r\n```\r\n\r\nwhich throws:\r\n\r\n```\r\njava.lang.IllegalArgumentException: Invalid explicitHashKey, must be greater or equal to zero and less than or equal to (2^128 - 1), got -123\r\n\tat com.amazonaws.kinesis.agg.AggRecord.validateExplicitHashKey(AggRecord.java:464)\r\n\tat com.amazonaws.kinesis.agg.AggRecord.addUserRecord(AggRecord.java:329)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/26", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/26/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/26/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/26/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/26", "id": 246651501, "node_id": "MDU6SXNzdWUyNDY2NTE1MDE=", "number": 26, "title": "Fix name of Handler in Readme", "user": {"login": "davidrosenstark", "id": 5966369, "node_id": "MDQ6VXNlcjU5NjYzNjk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5966369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidrosenstark", "html_url": "https://github.com/davidrosenstark", "followers_url": "https://api.github.com/users/davidrosenstark/followers", "following_url": "https://api.github.com/users/davidrosenstark/following{/other_user}", "gists_url": "https://api.github.com/users/davidrosenstark/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidrosenstark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidrosenstark/subscriptions", "organizations_url": "https://api.github.com/users/davidrosenstark/orgs", "repos_url": "https://api.github.com/users/davidrosenstark/repos", "events_url": "https://api.github.com/users/davidrosenstark/events{/privacy}", "received_events_url": "https://api.github.com/users/davidrosenstark/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-31T05:53:52Z", "updated_at": "2017-09-06T08:44:05Z", "closed_at": "2017-09-06T08:44:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See PR#25", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/24", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/24/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/24/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/24", "id": 246583306, "node_id": "MDU6SXNzdWUyNDY1ODMzMDY=", "number": 24, "title": "Versions incorrect in pom -- see PR", "user": {"login": "davidrosenstark", "id": 5966369, "node_id": "MDQ6VXNlcjU5NjYzNjk=", "avatar_url": "https://avatars3.githubusercontent.com/u/5966369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidrosenstark", "html_url": "https://github.com/davidrosenstark", "followers_url": "https://api.github.com/users/davidrosenstark/followers", "following_url": "https://api.github.com/users/davidrosenstark/following{/other_user}", "gists_url": "https://api.github.com/users/davidrosenstark/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidrosenstark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidrosenstark/subscriptions", "organizations_url": "https://api.github.com/users/davidrosenstark/orgs", "repos_url": "https://api.github.com/users/davidrosenstark/repos", "events_url": "https://api.github.com/users/davidrosenstark/events{/privacy}", "received_events_url": "https://api.github.com/users/davidrosenstark/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-30T13:17:42Z", "updated_at": "2017-09-06T08:39:18Z", "closed_at": "2017-09-06T08:39:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "PR #23 -- solves problem when cloning", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/22", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/22/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/22/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/22", "id": 242620011, "node_id": "MDU6SXNzdWUyNDI2MjAwMTE=", "number": 22, "title": "python lib is not maintained (no python3 support)", "user": {"login": "itamarla", "id": 3613199, "node_id": "MDQ6VXNlcjM2MTMxOTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/3613199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itamarla", "html_url": "https://github.com/itamarla", "followers_url": "https://api.github.com/users/itamarla/followers", "following_url": "https://api.github.com/users/itamarla/following{/other_user}", "gists_url": "https://api.github.com/users/itamarla/gists{/gist_id}", "starred_url": "https://api.github.com/users/itamarla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itamarla/subscriptions", "organizations_url": "https://api.github.com/users/itamarla/orgs", "repos_url": "https://api.github.com/users/itamarla/repos", "events_url": "https://api.github.com/users/itamarla/events{/privacy}", "received_events_url": "https://api.github.com/users/itamarla/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 30, "created_at": "2017-07-13T08:13:40Z", "updated_at": "2018-03-30T19:02:17Z", "closed_at": "2018-03-30T19:02:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a reason for the python part not being available for python3.x?\r\nThere is lambda support for python 3.6 yet we will not be able to use it if this lib is not updated.\r\n\r\nThanks,\r\nItamar", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/14", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/14/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/14/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/14", "id": 186631991, "node_id": "MDU6SXNzdWUxODY2MzE5OTE=", "number": 14, "title": "constants.js sets undeclared globals", "user": {"login": "pushplay", "id": 3812880, "node_id": "MDQ6VXNlcjM4MTI4ODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3812880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pushplay", "html_url": "https://github.com/pushplay", "followers_url": "https://api.github.com/users/pushplay/followers", "following_url": "https://api.github.com/users/pushplay/following{/other_user}", "gists_url": "https://api.github.com/users/pushplay/gists{/gist_id}", "starred_url": "https://api.github.com/users/pushplay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pushplay/subscriptions", "organizations_url": "https://api.github.com/users/pushplay/orgs", "repos_url": "https://api.github.com/users/pushplay/repos", "events_url": "https://api.github.com/users/pushplay/events{/privacy}", "received_events_url": "https://api.github.com/users/pushplay/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2016-11-01T20:02:42Z", "updated_at": "2017-09-06T08:40:01Z", "closed_at": "2017-09-06T08:40:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Inside `node/node_modules/aws-kinesis-agg/constants.js` a series of global variables are set by assigning to undeclared names.  This is two problems: setting global variables is considered [bad practice](http://stackoverflow.com/questions/10525582/why-are-global-variables-considered-bad-practice) in JavaScript; and setting via undeclared variables is disallowed when the use [strict directive](http://www.w3schools.com/js/js_strict.asp) is used, which compilers like WebPack will do automatically.\r\n\r\nThe fix is easy, just export the constants as an object and use that instead.  I'll submit a PR for this shortly.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/13", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/13/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/13/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/13", "id": 179615742, "node_id": "MDU6SXNzdWUxNzk2MTU3NDI=", "number": 13, "title": "Unable to get the Node Aggregation code to work", "user": {"login": "mfulleratlassian", "id": 3432067, "node_id": "MDQ6VXNlcjM0MzIwNjc=", "avatar_url": "https://avatars1.githubusercontent.com/u/3432067?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mfulleratlassian", "html_url": "https://github.com/mfulleratlassian", "followers_url": "https://api.github.com/users/mfulleratlassian/followers", "following_url": "https://api.github.com/users/mfulleratlassian/following{/other_user}", "gists_url": "https://api.github.com/users/mfulleratlassian/gists{/gist_id}", "starred_url": "https://api.github.com/users/mfulleratlassian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mfulleratlassian/subscriptions", "organizations_url": "https://api.github.com/users/mfulleratlassian/orgs", "repos_url": "https://api.github.com/users/mfulleratlassian/repos", "events_url": "https://api.github.com/users/mfulleratlassian/events{/privacy}", "received_events_url": "https://api.github.com/users/mfulleratlassian/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-09-27T21:14:13Z", "updated_at": "2017-09-06T08:43:55Z", "closed_at": "2017-09-06T08:43:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have tried so many permutations of requires etc I cannot get the RecordAggregator to work in my code.\n\nThe README says:\n`var agg = require('aws-kinesis-agg');`\n`var aggregator = new RecordAggregator();`\n\nbut that gives me error: \"RecordAggregator is not defined\"\n\nLooking at the package.json its main is \"./kpl-deagg.js\" which has nothing to do with the Aggregation code. Looking around I can only find examples of people using this module for the DeAgg code.\n\nIt would be great to get a working sample that works from the npm installed aws-kinesis-agg module.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/10", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/10/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/10/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/10", "id": 173035850, "node_id": "MDU6SXNzdWUxNzMwMzU4NTA=", "number": 10, "title": "Publish to Maven", "user": {"login": "cosmincatalin", "id": 525590, "node_id": "MDQ6VXNlcjUyNTU5MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/525590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cosmincatalin", "html_url": "https://github.com/cosmincatalin", "followers_url": "https://api.github.com/users/cosmincatalin/followers", "following_url": "https://api.github.com/users/cosmincatalin/following{/other_user}", "gists_url": "https://api.github.com/users/cosmincatalin/gists{/gist_id}", "starred_url": "https://api.github.com/users/cosmincatalin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cosmincatalin/subscriptions", "organizations_url": "https://api.github.com/users/cosmincatalin/orgs", "repos_url": "https://api.github.com/users/cosmincatalin/repos", "events_url": "https://api.github.com/users/cosmincatalin/events{/privacy}", "received_events_url": "https://api.github.com/users/cosmincatalin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 26, "created_at": "2016-08-24T19:20:25Z", "updated_at": "2017-12-22T00:11:30Z", "closed_at": "2017-12-22T00:11:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\n\nIt would be great if the Java classes will also be made available on Maven.\nI have this project [https://github.com/audienceproject/kinesis-writer](https://github.com/audienceproject/kinesis-writer) which I have made available in Maven Central that depends on this.\n\nBest regards,\nCosmin\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/6", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/6/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/6/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/6", "id": 135426355, "node_id": "MDU6SXNzdWUxMzU0MjYzNTU=", "number": 6, "title": "individual records ack - java", "user": {"login": "nishabhatia7", "id": 17187621, "node_id": "MDQ6VXNlcjE3MTg3NjIx", "avatar_url": "https://avatars2.githubusercontent.com/u/17187621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nishabhatia7", "html_url": "https://github.com/nishabhatia7", "followers_url": "https://api.github.com/users/nishabhatia7/followers", "following_url": "https://api.github.com/users/nishabhatia7/following{/other_user}", "gists_url": "https://api.github.com/users/nishabhatia7/gists{/gist_id}", "starred_url": "https://api.github.com/users/nishabhatia7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nishabhatia7/subscriptions", "organizations_url": "https://api.github.com/users/nishabhatia7/orgs", "repos_url": "https://api.github.com/users/nishabhatia7/repos", "events_url": "https://api.github.com/users/nishabhatia7/events{/privacy}", "received_events_url": "https://api.github.com/users/nishabhatia7/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2016-02-22T14:06:57Z", "updated_at": "2016-03-16T00:07:50Z", "closed_at": "2016-03-16T00:05:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \n\nWhat can be done to provide individual records acknowledgement in the java module, similar to what is provided in node.js ? What about checkpointing ? Thanks. \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/5", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/5/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/5/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/5", "id": 134430127, "node_id": "MDU6SXNzdWUxMzQ0MzAxMjc=", "number": 5, "title": "When no explicit has keys, deaggregation throws an IndexError", "user": {"login": "billletson", "id": 2702341, "node_id": "MDQ6VXNlcjI3MDIzNDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/2702341?v=4", "gravatar_id": "", "url": "https://api.github.com/users/billletson", "html_url": "https://github.com/billletson", "followers_url": "https://api.github.com/users/billletson/followers", "following_url": "https://api.github.com/users/billletson/following{/other_user}", "gists_url": "https://api.github.com/users/billletson/gists{/gist_id}", "starred_url": "https://api.github.com/users/billletson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/billletson/subscriptions", "organizations_url": "https://api.github.com/users/billletson/orgs", "repos_url": "https://api.github.com/users/billletson/repos", "events_url": "https://api.github.com/users/billletson/events{/privacy}", "received_events_url": "https://api.github.com/users/billletson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-02-17T23:14:40Z", "updated_at": "2016-02-18T18:18:54Z", "closed_at": "2016-02-18T18:18:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "PR here: https://github.com/awslabs/kinesis-deaggregation/pull/4\n\nIf there are no explicit hash keys, attempting to index the ehks object fails with an IndexError:\n\nlist index out of range: IndexError Traceback (most recent call last): File \"/var/task/function.py\", line 38, in lambda_handler records = data_pipeline.extract_records_from_kinesis_event(lambda_event) File \"/var/task/data_pipeline/utils.py\", line 29, in extract_records_from_kinesis_event ret = [base64.b64decode(x['kinesis']['data']) for x in iter_deaggregate_records(event['Records'])] File \"/var/task/aws_kpl_deagg/deaggregator.py\", line 178, in iter_deaggregate_records error_string = _get_error_string(r, message_data, ehks, pks, ar) File \"/var/task/aws_kpl_deagg/deaggregator.py\", line 88, in _get_error_string (ehks[mr.explicit_hash_key_index] is not None, File \"/var/task/google/protobuf/internal/containers.py\", line 64, in __getitem__ return self._values[key] IndexError: list index out of range\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/3", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/3/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/3/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/3", "id": 134364141, "node_id": "MDU6SXNzdWUxMzQzNjQxNDE=", "number": 3, "title": "JS deaggregation error due to reuse of hash", "user": {"login": "jeremywall", "id": 1005490, "node_id": "MDQ6VXNlcjEwMDU0OTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1005490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremywall", "html_url": "https://github.com/jeremywall", "followers_url": "https://api.github.com/users/jeremywall/followers", "following_url": "https://api.github.com/users/jeremywall/following{/other_user}", "gists_url": "https://api.github.com/users/jeremywall/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremywall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremywall/subscriptions", "organizations_url": "https://api.github.com/users/jeremywall/orgs", "repos_url": "https://api.github.com/users/jeremywall/repos", "events_url": "https://api.github.com/users/jeremywall/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremywall/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-02-17T18:43:14Z", "updated_at": "2016-02-19T17:11:28Z", "closed_at": "2016-02-19T17:11:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the JS code there's an MD5 hash that's used during deaggregation. It's reused on line 70 here https://github.com/awslabs/kinesis-deaggregation/blob/master/node/node_modules/kpl-deagg/kpl-deagg.js#L70\n\nBut crypto objects are not reusable and when the update method is called the second time it fails with a \"HashUpdate fail\" error message.\n\nIt's a simple fix to just instantiate the md5 crypto object before each call to update. I submitted a pull request with the fix here https://github.com/awslabs/kinesis-deaggregation/pull/1\n\nCan this fix be incorporated and rolled out to NPM?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/2", "repository_url": "https://api.github.com/repos/awslabs/kinesis-aggregation", "labels_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/2/comments", "events_url": "https://api.github.com/repos/awslabs/kinesis-aggregation/issues/2/events", "html_url": "https://github.com/awslabs/kinesis-aggregation/issues/2", "id": 129951845, "node_id": "MDU6SXNzdWUxMjk5NTE4NDU=", "number": 2, "title": "Error deaggregating messages with Lambda", "user": {"login": "t-pascal", "id": 11443531, "node_id": "MDQ6VXNlcjExNDQzNTMx", "avatar_url": "https://avatars3.githubusercontent.com/u/11443531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/t-pascal", "html_url": "https://github.com/t-pascal", "followers_url": "https://api.github.com/users/t-pascal/followers", "following_url": "https://api.github.com/users/t-pascal/following{/other_user}", "gists_url": "https://api.github.com/users/t-pascal/gists{/gist_id}", "starred_url": "https://api.github.com/users/t-pascal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/t-pascal/subscriptions", "organizations_url": "https://api.github.com/users/t-pascal/orgs", "repos_url": "https://api.github.com/users/t-pascal/repos", "events_url": "https://api.github.com/users/t-pascal/events{/privacy}", "received_events_url": "https://api.github.com/users/t-pascal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "brentnash", "id": 1693718, "node_id": "MDQ6VXNlcjE2OTM3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brentnash", "html_url": "https://github.com/brentnash", "followers_url": "https://api.github.com/users/brentnash/followers", "following_url": "https://api.github.com/users/brentnash/following{/other_user}", "gists_url": "https://api.github.com/users/brentnash/gists{/gist_id}", "starred_url": "https://api.github.com/users/brentnash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brentnash/subscriptions", "organizations_url": "https://api.github.com/users/brentnash/orgs", "repos_url": "https://api.github.com/users/brentnash/repos", "events_url": "https://api.github.com/users/brentnash/events{/privacy}", "received_events_url": "https://api.github.com/users/brentnash/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2016-01-30T07:16:12Z", "updated_at": "2016-02-16T23:44:27Z", "closed_at": "2016-02-11T23:57:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am getting the following error. I appears that 'google' is not defined for the exception.\n\n```\nglobal name 'google' is not defined: NameError Traceback (most recent call last):\n File \"/var/task/lambda-firehose.py\", line 65, in lambda_handler\nfor record in deaggregate_records(event['Records']):\n File \"/var/task/aws_kpl_deagg/deaggregator.py\", line 108, in deaggregate_records\nreturn_records.extend(iter_deaggregate_records(records))\n File \"/var/task/aws_kpl_deagg/deaggregator.py\", line 180, in iter_deaggregate_records\nexcept google.protobuf.message.DecodeError as de:\n NameError: global name 'google' is not defined\n```\n\nChanging the code to...\n\n```\nexcept:\n    is_aggregated = False\n```\n\n...bypasses the error.\n", "performed_via_github_app": null, "score": 1.0}]}