{"total_count": 28, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/sdispater/tomlkit/issues/101", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/101/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/101/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/101/events", "html_url": "https://github.com/sdispater/tomlkit/issues/101", "id": 668693532, "node_id": "MDU6SXNzdWU2Njg2OTM1MzI=", "number": 101, "title": "Poetry does not work with tomlkit 0.6.0", "user": {"login": "tlc28", "id": 48520046, "node_id": "MDQ6VXNlcjQ4NTIwMDQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/48520046?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tlc28", "html_url": "https://github.com/tlc28", "followers_url": "https://api.github.com/users/tlc28/followers", "following_url": "https://api.github.com/users/tlc28/following{/other_user}", "gists_url": "https://api.github.com/users/tlc28/gists{/gist_id}", "starred_url": "https://api.github.com/users/tlc28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tlc28/subscriptions", "organizations_url": "https://api.github.com/users/tlc28/orgs", "repos_url": "https://api.github.com/users/tlc28/repos", "events_url": "https://api.github.com/users/tlc28/events{/privacy}", "received_events_url": "https://api.github.com/users/tlc28/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-30T12:54:47Z", "updated_at": "2020-07-30T12:59:06Z", "closed_at": "2020-07-30T12:55:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Poetry!\r\n\r\nPoetry is unfortunately broken on Guix (https://guix.gnu.org) since I upgraded tomlkit to version 0.6.0!\r\nThe version required by Poetry is \"^0.5.11\", which translates to \">=0.5.11,<0.6.0\". We only have one version of tomlkit packaged, and it's the latest one, 0.6.0.\r\n\r\nFrom what I understand reading SemVer (https://semver.org), minor versions should only \"add functionality in a backwards compatible manner\", and so the API should be stable. So 0.6.0 should work with Poetry. And, as a matter of fact, when I force it (by modifying the requirements), Poetry seems to be working as expected.\r\n\r\nI have 3 options:\r\n- modify the requirements at build time (quick fix);\r\n- package tomlkit version \"0.5\" alongside the \"latest\" version (long term solution);\r\n- report the problem upstream to see if there's a cleaner solution.\r\n\r\nFor the time being, I'll implement solution 1. I'll implement solution 2 if you don't see it as a problem that should be fixed upstream.\r\n\r\nWDYT?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/93", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/93/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/93/events", "html_url": "https://github.com/sdispater/tomlkit/issues/93", "id": 599115546, "node_id": "MDU6SXNzdWU1OTkxMTU1NDY=", "number": 93, "title": "Serializing OrderedDict (and dict in Python 3) does not preserve order", "user": {"login": "dbohdan", "id": 3179832, "node_id": "MDQ6VXNlcjMxNzk4MzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3179832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbohdan", "html_url": "https://github.com/dbohdan", "followers_url": "https://api.github.com/users/dbohdan/followers", "following_url": "https://api.github.com/users/dbohdan/following{/other_user}", "gists_url": "https://api.github.com/users/dbohdan/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbohdan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbohdan/subscriptions", "organizations_url": "https://api.github.com/users/dbohdan/orgs", "repos_url": "https://api.github.com/users/dbohdan/repos", "events_url": "https://api.github.com/users/dbohdan/events{/privacy}", "received_events_url": "https://api.github.com/users/dbohdan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-13T20:26:24Z", "updated_at": "2020-07-31T09:44:14Z", "closed_at": "2020-07-31T09:44:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following is the case in both Python 2.7 and Python 3.x.\r\n```\r\n>>> import tomlkit, json, collections\r\n>>> json.dumps(collections.OrderedDict([('foo', 1), ('bar', 2), ('baz', 3)]))\r\n'{\"foo\": 1, \"bar\": 2, \"baz\": 3}'\r\n>>> tomlkit.dumps(collections.OrderedDict([('foo', 1), ('bar', 2), ('baz', 3)]))\r\n'bar = 2\\nbaz = 3\\nfoo = 1\\n'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/80", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/80/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/80/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/80/events", "html_url": "https://github.com/sdispater/tomlkit/issues/80", "id": 573118426, "node_id": "MDU6SXNzdWU1NzMxMTg0MjY=", "number": 80, "title": ".get on class OutOfOrderTableProxy now always return None", "user": {"login": "mbelang", "id": 5888932, "node_id": "MDQ6VXNlcjU4ODg5MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5888932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbelang", "html_url": "https://github.com/mbelang", "followers_url": "https://api.github.com/users/mbelang/followers", "following_url": "https://api.github.com/users/mbelang/following{/other_user}", "gists_url": "https://api.github.com/users/mbelang/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbelang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbelang/subscriptions", "organizations_url": "https://api.github.com/users/mbelang/orgs", "repos_url": "https://api.github.com/users/mbelang/repos", "events_url": "https://api.github.com/users/mbelang/events{/privacy}", "received_events_url": "https://api.github.com/users/mbelang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-29T02:34:56Z", "updated_at": "2020-02-29T17:09:17Z", "closed_at": "2020-02-29T17:09:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just updated to poetry 1.0.4 that uses tomlkit 0.5.10 and custom repository are not added anymore.\r\n\r\n```\r\n(Pdb++) local_config.get(\"source\")\r\n(Pdb++) local_config.get(\"name\")\r\n(Pdb++) local_config.get(\"name\", \"potatoes\")\r\n'potatoes'\r\n(Pdb++) local_config[\"name\"]\r\n'test'\r\n(Pdb++) local_config[\"source\"]\r\n<AoT [{'name': 'testrepo', 'url': 'https://test-repo-url'}]>\r\n```\r\n\r\nI'm pretty sure it is related to that change: https://github.com/sdispater/tomlkit/pull/79\r\n\r\nOS: ArchLinux\r\nPython: 3.7, 3.8\r\n\r\nReproduced in docker as well with images python:3.7.x and python:3.8.x\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/78", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/78/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/78/events", "html_url": "https://github.com/sdispater/tomlkit/issues/78", "id": 572873661, "node_id": "MDU6SXNzdWU1NzI4NzM2NjE=", "number": 78, "title": "tomlkit 0.5.9 breaking change?", "user": {"login": "jonapich", "id": 5009356, "node_id": "MDQ6VXNlcjUwMDkzNTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/5009356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonapich", "html_url": "https://github.com/jonapich", "followers_url": "https://api.github.com/users/jonapich/followers", "following_url": "https://api.github.com/users/jonapich/following{/other_user}", "gists_url": "https://api.github.com/users/jonapich/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonapich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonapich/subscriptions", "organizations_url": "https://api.github.com/users/jonapich/orgs", "repos_url": "https://api.github.com/users/jonapich/repos", "events_url": "https://api.github.com/users/jonapich/events{/privacy}", "received_events_url": "https://api.github.com/users/jonapich/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-02-28T16:53:56Z", "updated_at": "2020-02-28T17:49:40Z", "closed_at": "2020-02-28T17:44:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "It was working fine before, but not anymore:\r\n\r\n```\r\n+ poetry install\r\n(...)\r\n[RuntimeError]\r\nThe Poetry configuration is invalid:\r\n  - {...} is not of type 'object'\r\n```\r\n\r\nI have compared the `pip install poetry` outputs of both working and non-working versions. The only difference is tomlkit 0.5.8 -> 0.5.9\r\n\r\nI have changed my CI command line to do `pip install poetry \"tomlkit=0.5.8\"` and it's working fine again.\r\n\r\nLet me know if you need more information about my project setup.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/74", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/74/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/74/events", "html_url": "https://github.com/sdispater/tomlkit/issues/74", "id": 570502857, "node_id": "MDU6SXNzdWU1NzA1MDI4NTc=", "number": 74, "title": "Parsing breaks when adding a closing bracket in a quoted key", "user": {"login": "spapanik", "id": 5006381, "node_id": "MDQ6VXNlcjUwMDYzODE=", "avatar_url": "https://avatars2.githubusercontent.com/u/5006381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spapanik", "html_url": "https://github.com/spapanik", "followers_url": "https://api.github.com/users/spapanik/followers", "following_url": "https://api.github.com/users/spapanik/following{/other_user}", "gists_url": "https://api.github.com/users/spapanik/gists{/gist_id}", "starred_url": "https://api.github.com/users/spapanik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spapanik/subscriptions", "organizations_url": "https://api.github.com/users/spapanik/orgs", "repos_url": "https://api.github.com/users/spapanik/repos", "events_url": "https://api.github.com/users/spapanik/events{/privacy}", "received_events_url": "https://api.github.com/users/spapanik/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-25T11:28:22Z", "updated_at": "2020-02-28T15:50:18Z", "closed_at": "2020-02-28T15:50:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "parsing breaks when the quoted key contains a closing bracket.\r\n\r\n```python\r\n>>> import tomlkit\r\n>>> tomlkit.parse(\"\"\"\r\n... [\"[\"]\r\n... foo = 1\r\n... \"\"\")\r\n{'[': {'foo': 1}}\r\n\r\n>>> tomlkit.parse(\"\"\"\r\n... [\"]\"]\r\n... foo = 1\r\n... \"\"\")\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/stephanos/.local/share/virtualenvs/tomlkit/lib/python3.8/site-packages/tomlkit/api.py\", line 51, in parse\r\n    return Parser(string).parse()\r\n  File \"/home/stephanos/.local/share/virtualenvs/tomlkit/lib/python3.8/site-packages/tomlkit/parser.py\", line 153, in parse\r\n    key, value = self._parse_table()\r\n  File \"/home/stephanos/.local/share/virtualenvs/tomlkit/lib/python3.8/site-packages/tomlkit/parser.py\", line 946, in _parse_table\r\n    cws, comment, trail = self._parse_comment_trail()\r\n  File \"/home/stephanos/.local/share/virtualenvs/tomlkit/lib/python3.8/site-packages/tomlkit/parser.py\", line 314, in _parse_comment_trail\r\n    raise self.parse_error(UnexpectedCharError, c)\r\ntomlkit.exceptions.UnexpectedCharError: Unexpected character: '\"' at line 2 col 3\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/70", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/70/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/70/events", "html_url": "https://github.com/sdispater/tomlkit/issues/70", "id": 558891703, "node_id": "MDU6SXNzdWU1NTg4OTE3MDM=", "number": 70, "title": "Apostrophe (single-quote) in key string causes problems", "user": {"login": "jgriffitts", "id": 246411, "node_id": "MDQ6VXNlcjI0NjQxMQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/246411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgriffitts", "html_url": "https://github.com/jgriffitts", "followers_url": "https://api.github.com/users/jgriffitts/followers", "following_url": "https://api.github.com/users/jgriffitts/following{/other_user}", "gists_url": "https://api.github.com/users/jgriffitts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgriffitts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgriffitts/subscriptions", "organizations_url": "https://api.github.com/users/jgriffitts/orgs", "repos_url": "https://api.github.com/users/jgriffitts/repos", "events_url": "https://api.github.com/users/jgriffitts/events{/privacy}", "received_events_url": "https://api.github.com/users/jgriffitts/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-03T07:22:04Z", "updated_at": "2020-02-03T22:07:22Z", "closed_at": "2020-02-03T22:07:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "This code sequence demonstrates the problem:\r\n```\r\nimport tomlkit\r\n\r\ndat = {\"BJ's Restaurant\": {'account':'dining'}}\r\n\r\ntoml = tomlkit.dumps(dat)\r\nprint(toml)\r\n\r\ndat2 = tomlkit.loads(toml)\r\n```\r\nThis gives me this output (Python 3.7.6):\r\n```\r\n[\"BJ's Restaurant\"]\r\naccount = \"dining\"\r\n\r\nTraceback (most recent call last):\r\n  File \"j:\\tmp.py\", line 17, in <module>\r\n    dat2 = tomlkit.loads(toml)\r\n  File \"c:\\ProgramData\\Miniconda3\\envs\\hledger\\lib\\site-packages\\tomlkit\\api.py\", line 34, in loads\r\n    return parse(string)\r\n  File \"c:\\ProgramData\\Miniconda3\\envs\\hledger\\lib\\site-packages\\tomlkit\\api.py\", line 51, in parse\r\n    return Parser(string).parse()\r\n  File \"c:\\ProgramData\\Miniconda3\\envs\\hledger\\lib\\site-packages\\tomlkit\\parser.py\", line 153, in parse\r\n    key, value = self._parse_table()\r\n  File \"c:\\ProgramData\\Miniconda3\\envs\\hledger\\lib\\site-packages\\tomlkit\\parser.py\", line 927, in _parse_table\r\n    name_parts = tuple(self._split_table_name(name))\r\n  File \"c:\\ProgramData\\Miniconda3\\envs\\hledger\\lib\\site-packages\\tomlkit\\parser.py\", line 227, in _split_table_name\r\n    raise self.parse_error()\r\ntomlkit.exceptions.ParseError: TOML parse error at line 1 col 18\r\n```\r\nThe TOML generated by dumps(dat) shows in the first two lines, and seems correct. However loads() blows up as shown, calling out column 18 which would be the end of the key string. \r\nFor the TOML source below, loads() calls out column 0, which is possibly a different bug:\r\n```\r\n[xyz]\r\n[xyz.\"BJ's Restaurant\"]\r\naccount = \"dining\"\r\n---------------\r\n  File \"c:\\ProgramData\\Miniconda3\\envs\\hledger\\lib\\site-packages\\tomlkit\\parser.py\", line 227, in _split_table_name\r\n    raise self.parse_error()\r\ntomlkit.exceptions.ParseError: TOML parse error at line 2 col 0\r\n```\r\n\r\nI have experimented with work-arounds such as enclosing the string in triple-quotes or escaping the apostrophe with a backslash. So far, I haven't found anything reliable.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/64", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/64/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/64/events", "html_url": "https://github.com/sdispater/tomlkit/issues/64", "id": 513742570, "node_id": "MDU6SXNzdWU1MTM3NDI1NzA=", "number": 64, "title": "Can't set value if sections out of order", "user": {"login": "MrGreenTea", "id": 9407731, "node_id": "MDQ6VXNlcjk0MDc3MzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/9407731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MrGreenTea", "html_url": "https://github.com/MrGreenTea", "followers_url": "https://api.github.com/users/MrGreenTea/followers", "following_url": "https://api.github.com/users/MrGreenTea/following{/other_user}", "gists_url": "https://api.github.com/users/MrGreenTea/gists{/gist_id}", "starred_url": "https://api.github.com/users/MrGreenTea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MrGreenTea/subscriptions", "organizations_url": "https://api.github.com/users/MrGreenTea/orgs", "repos_url": "https://api.github.com/users/MrGreenTea/repos", "events_url": "https://api.github.com/users/MrGreenTea/events{/privacy}", "received_events_url": "https://api.github.com/users/MrGreenTea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-29T07:37:55Z", "updated_at": "2020-01-29T21:25:15Z", "closed_at": "2020-01-29T21:25:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "I stumbled upon this when `poetry version` would not update the `pyproject.toml`. \r\n\r\nThis is the smallest example with which I can reproduce this on master:\r\n\r\n```toml\r\n# tests/examples/out_of_order_write.toml\r\n[a.a]\r\nkey = \"value\"\r\n\r\n[a.b]\r\n\r\n[a.a.a]\r\n```\r\n```python\r\ndef test_write_nested_array(example):\r\n    doc = loads(example(\"out_of_order_write\"))\r\n    doc[\"a\"][\"a\"][\"key\"] = \"new_value\"\r\n    assert doc[\"a\"][\"a\"][\"key\"] == \"new_value\"\r\n```\r\n\r\nThe test succeeds when changing the order in the example document to\r\n```toml\r\n[a.a]\r\nkey = \"value\"\r\n\r\n[a.a.a]\r\n\r\n[a.b]\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/59", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/59/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/59/events", "html_url": "https://github.com/sdispater/tomlkit/issues/59", "id": 475439518, "node_id": "MDU6SXNzdWU0NzU0Mzk1MTg=", "number": 59, "title": "bug report", "user": {"login": "suikastar", "id": 53206264, "node_id": "MDQ6VXNlcjUzMjA2MjY0", "avatar_url": "https://avatars3.githubusercontent.com/u/53206264?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suikastar", "html_url": "https://github.com/suikastar", "followers_url": "https://api.github.com/users/suikastar/followers", "following_url": "https://api.github.com/users/suikastar/following{/other_user}", "gists_url": "https://api.github.com/users/suikastar/gists{/gist_id}", "starred_url": "https://api.github.com/users/suikastar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suikastar/subscriptions", "organizations_url": "https://api.github.com/users/suikastar/orgs", "repos_url": "https://api.github.com/users/suikastar/repos", "events_url": "https://api.github.com/users/suikastar/events{/privacy}", "received_events_url": "https://api.github.com/users/suikastar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-01T02:34:45Z", "updated_at": "2019-08-01T07:35:02Z", "closed_at": "2019-08-01T07:35:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### code\r\n```python\r\nfrom tomlkit import dumps, parse\r\n\r\ndoc = parse(\"\"\"[target.x86_64-pc-windows-gnu]\r\nlinker = \"D:/msys64/mingw64/bin/gcc.exe\"\r\nar = \"D:/msys64/mingw64/bin/ar.exe\"\r\n\"\"\")\r\ndoc.remove(\"target.x86_64-pc-windows-gnu\")\r\nprint(dumps(doc))\r\n```\r\n\r\n#### remove failure\r\n`tomlkit.exceptions.NonExistentKey: 'Key \"\"target.x86_64-pc-windows-gnu\"\" does not exist.'`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/40", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/40/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/40/events", "html_url": "https://github.com/sdispater/tomlkit/issues/40", "id": 417570981, "node_id": "MDU6SXNzdWU0MTc1NzA5ODE=", "number": 40, "title": "Subtracting two dates incorrectly return a Date object", "user": {"login": "dunkmann00", "id": 11963090, "node_id": "MDQ6VXNlcjExOTYzMDkw", "avatar_url": "https://avatars0.githubusercontent.com/u/11963090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dunkmann00", "html_url": "https://github.com/dunkmann00", "followers_url": "https://api.github.com/users/dunkmann00/followers", "following_url": "https://api.github.com/users/dunkmann00/following{/other_user}", "gists_url": "https://api.github.com/users/dunkmann00/gists{/gist_id}", "starred_url": "https://api.github.com/users/dunkmann00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dunkmann00/subscriptions", "organizations_url": "https://api.github.com/users/dunkmann00/orgs", "repos_url": "https://api.github.com/users/dunkmann00/repos", "events_url": "https://api.github.com/users/dunkmann00/events{/privacy}", "received_events_url": "https://api.github.com/users/dunkmann00/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-03-06T00:51:37Z", "updated_at": "2019-07-01T01:56:35Z", "closed_at": "2019-07-01T01:56:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When you subtract two Date objects tomlkit takes the result and makes it into a new Date object:\r\n```python\r\ndef __sub__(self, other):\r\n        result = super(Date, self).__sub__(other)\r\n\r\n        return self._new(result)\r\n```\r\n\r\nThis behavior is incorrect as the value that should get returned is a `timedelta` object as per the [Python Docs](https://docs.python.org/3/library/datetime.html#date-objects). \r\n\r\nThe behavior is implemented correctly for `Datetime` objects in tomlkit, so I'll go ahead and make a pull request with the changes added to the `Date` object as well.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/39", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/39/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/39/events", "html_url": "https://github.com/sdispater/tomlkit/issues/39", "id": 417247267, "node_id": "MDU6SXNzdWU0MTcyNDcyNjc=", "number": 39, "title": "Include unittests in pypi sdist archive", "user": {"login": "scarabeusiv", "id": 1055830, "node_id": "MDQ6VXNlcjEwNTU4MzA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1055830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scarabeusiv", "html_url": "https://github.com/scarabeusiv", "followers_url": "https://api.github.com/users/scarabeusiv/followers", "following_url": "https://api.github.com/users/scarabeusiv/following{/other_user}", "gists_url": "https://api.github.com/users/scarabeusiv/gists{/gist_id}", "starred_url": "https://api.github.com/users/scarabeusiv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scarabeusiv/subscriptions", "organizations_url": "https://api.github.com/users/scarabeusiv/orgs", "repos_url": "https://api.github.com/users/scarabeusiv/repos", "events_url": "https://api.github.com/users/scarabeusiv/events{/privacy}", "received_events_url": "https://api.github.com/users/scarabeusiv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-05T11:18:09Z", "updated_at": "2019-10-22T10:32:28Z", "closed_at": "2019-10-22T10:32:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Could you please add MANIFEST.in and include tests in the sdist archive? In distributions we execute tests on the packages to ensure some sanity checking as othewise python packages are just copying files and we wouldn't know if something broke them.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/38", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/38/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/38/events", "html_url": "https://github.com/sdispater/tomlkit/issues/38", "id": 397149723, "node_id": "MDU6SXNzdWUzOTcxNDk3MjM=", "number": 38, "title": "Refactor", "user": {"login": "njalerikson", "id": 4546435, "node_id": "MDQ6VXNlcjQ1NDY0MzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4546435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njalerikson", "html_url": "https://github.com/njalerikson", "followers_url": "https://api.github.com/users/njalerikson/followers", "following_url": "https://api.github.com/users/njalerikson/following{/other_user}", "gists_url": "https://api.github.com/users/njalerikson/gists{/gist_id}", "starred_url": "https://api.github.com/users/njalerikson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njalerikson/subscriptions", "organizations_url": "https://api.github.com/users/njalerikson/orgs", "repos_url": "https://api.github.com/users/njalerikson/repos", "events_url": "https://api.github.com/users/njalerikson/events{/privacy}", "received_events_url": "https://api.github.com/users/njalerikson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-09T00:13:11Z", "updated_at": "2019-02-21T15:08:21Z", "closed_at": "2019-02-21T15:08:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@sdispater I have been working on a refactored version of [**tomlkit**](https://github.com/njalerikson/tomlkit/tree/0.6.0). This new version addresses many of the outstanding issues of the current implementation as well as making the TOML objects more natural. I found that in some cases having TOML objects are simply problematic so I needed a way to quickly convert TOML objects into Python objects (`pyobj` API).\r\n\r\nI fully understand if you don't want these changes, they are broad. One of the underlying goals of this refactor was to make the parsing more modular to where the same parser could be used to parse several different versions of TOML (a very possible future once TOML specifies a versioning pragma/scheme). One of the choices made in this refactor was to no longer perfectly preserve whitespaces. I found too many whitespace instances to be ridiculous to preserve (e.g. this key `a    .     b .\"foo\"    .c`). ~~Instead, I make sure to preserve the insert order of comments and key-values but let **tomlkit** decide how to lay out the TOML object when flattening into a TOML document (str). Some whitespace preservation can be reimplemented without much difficulty (e.g. newlines).~~ We preserve comments and newlines. Adding block indents (as in the entire table gets indented by X spaces) can be added relatively easily. I do not see value in perfectly preserving inconsistent whitespacing and if any whitespace is perserved I would rather see some amount of whitespace standardization (much like **black** does for Python).\r\n\r\n## Issues Addressed:\r\n#17 \r\n#18 \r\n#19 \r\n#25 \r\n#37 \r\n\r\n## Porcelain API:\r\n- `toml`: converts Python object into TOML object\r\n- `pyobj`: converts TOML object into Python object\r\n- `loads`/`parse`: converts TOML document (str) into TOML object\r\n- `dumps`: converts TOML object (convert into base type first) into TOML document (str)\r\n- `flatten`: converts TOML object (use as is) into TOML document (str)\r\n- `load`: reads TOML document (str) from filehandle, uses loads\r\n- `dump`: uses dumps, writes TOML document (str) to filehandle\r\n\r\n## Other Changes:\r\nThe refactor also introduces the ability for tables and inline tables to be interchangeable, rendering of one versus the other is based on a table's complexity which can either be set to true or is derived based on TOML rules (e.g. if a table contains comments it is complex). This same logic is used to toggle between AoT and \"inline\" AoT.\r\n\r\n## Influences:\r\n- Large chunks of the code are just the original **tomlkit** moved around.\r\n- `Table`s and `Array`s were strongly influenced by `collections.OrderedDict`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/33", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/33/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/33/events", "html_url": "https://github.com/sdispater/tomlkit/issues/33", "id": 382171991, "node_id": "MDU6SXNzdWUzODIxNzE5OTE=", "number": 33, "title": "Parser regression in 0.5.2 in pypy3(6.0.0)", "user": {"login": "extraymond", "id": 707176, "node_id": "MDQ6VXNlcjcwNzE3Ng==", "avatar_url": "https://avatars3.githubusercontent.com/u/707176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/extraymond", "html_url": "https://github.com/extraymond", "followers_url": "https://api.github.com/users/extraymond/followers", "following_url": "https://api.github.com/users/extraymond/following{/other_user}", "gists_url": "https://api.github.com/users/extraymond/gists{/gist_id}", "starred_url": "https://api.github.com/users/extraymond/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/extraymond/subscriptions", "organizations_url": "https://api.github.com/users/extraymond/orgs", "repos_url": "https://api.github.com/users/extraymond/repos", "events_url": "https://api.github.com/users/extraymond/events{/privacy}", "received_events_url": "https://api.github.com/users/extraymond/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-19T11:28:54Z", "updated_at": "2018-11-19T22:06:21Z", "closed_at": "2018-11-19T22:06:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi! I've encountered parser regression in 0.5.2 in pypy3(6.0.0), when trying to use poetry, it says that it have problem parsing the toml file.\r\n\r\nAfter investigation, I've found that in pypy3(6.0.0) this behavior exists while not affecting normal python 3.5 environments.\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/user/.pyenv/versions/toml/site-packages/tomlkit/api.py\", line 51, in parse\r\n    return Parser(string).parse()\r\n  File \"/home/user/.pyenv/versions/toml/site-packages/tomlkit/parser.py\", line 153, in parse\r\n    key, value = self._parse_table()\r\n  File \"/home/user/.pyenv/versions/toml/site-packages/tomlkit/parser.py\", line 975, in _parse_table\r\n    is_aot_next, name_next = self._peek_table()\r\nTypeError: 'NoneType' object is not iterable\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/32", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/32/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/32/events", "html_url": "https://github.com/sdispater/tomlkit/issues/32", "id": 380733328, "node_id": "MDU6SXNzdWUzODA3MzMzMjg=", "number": 32, "title": "Container fails to preserve content on copy", "user": {"login": "uranusjr", "id": 605277, "node_id": "MDQ6VXNlcjYwNTI3Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/605277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uranusjr", "html_url": "https://github.com/uranusjr", "followers_url": "https://api.github.com/users/uranusjr/followers", "following_url": "https://api.github.com/users/uranusjr/following{/other_user}", "gists_url": "https://api.github.com/users/uranusjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/uranusjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uranusjr/subscriptions", "organizations_url": "https://api.github.com/users/uranusjr/orgs", "repos_url": "https://api.github.com/users/uranusjr/repos", "events_url": "https://api.github.com/users/uranusjr/events{/privacy}", "received_events_url": "https://api.github.com/users/uranusjr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-14T14:50:24Z", "updated_at": "2018-11-19T22:06:31Z", "closed_at": "2018-11-19T22:06:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "```pycon\r\n>>> import tomlkit\r\n>>> doc = tomlkit.parse('[foo]\\nbar=1')\r\n>>> doc\r\n{'foo': {'bar': 1}}\r\n>>> import copy\r\n>>> copy.copy(doc)\r\n{}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/30", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/30/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/30/events", "html_url": "https://github.com/sdispater/tomlkit/issues/30", "id": 378998992, "node_id": "MDU6SXNzdWUzNzg5OTg5OTI=", "number": 30, "title": "Convert an table to inline table, the comment is preserved unexpectedly", "user": {"login": "frostming", "id": 16336606, "node_id": "MDQ6VXNlcjE2MzM2NjA2", "avatar_url": "https://avatars3.githubusercontent.com/u/16336606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frostming", "html_url": "https://github.com/frostming", "followers_url": "https://api.github.com/users/frostming/followers", "following_url": "https://api.github.com/users/frostming/following{/other_user}", "gists_url": "https://api.github.com/users/frostming/gists{/gist_id}", "starred_url": "https://api.github.com/users/frostming/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frostming/subscriptions", "organizations_url": "https://api.github.com/users/frostming/orgs", "repos_url": "https://api.github.com/users/frostming/repos", "events_url": "https://api.github.com/users/frostming/events{/privacy}", "received_events_url": "https://api.github.com/users/frostming/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-09T02:34:53Z", "updated_at": "2018-11-09T16:04:34Z", "closed_at": "2018-11-09T16:04:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Suppose we have following toml:\r\n```toml\r\n[site.user]\r\nname = \"John\"  # Inline comment\r\nage = 28\r\n```\r\nI want to convert `site.user` to an inline table:\r\n```python\r\nv = parsed['site']['user']\r\ntable = tomlkit.inline_table()\r\ntable.update(v)\r\nprint(table.as_string())\r\n```\r\n```toml\r\n{age = 21,name = \"John\"# Inline comment}\r\n```\r\nWhat is weird is that even with:\r\n```python\r\ntable.update(dict(v))\r\n```\r\nThe bug still exists.\r\n\r\nThe expected behavior should be dropping all comments of original table.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/29", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/29/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/29/events", "html_url": "https://github.com/sdispater/tomlkit/issues/29", "id": 378993914, "node_id": "MDU6SXNzdWUzNzg5OTM5MTQ=", "number": 29, "title": "Reassign the value of an outline table, the table becomes messy.", "user": {"login": "frostming", "id": 16336606, "node_id": "MDQ6VXNlcjE2MzM2NjA2", "avatar_url": "https://avatars3.githubusercontent.com/u/16336606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frostming", "html_url": "https://github.com/frostming", "followers_url": "https://api.github.com/users/frostming/followers", "following_url": "https://api.github.com/users/frostming/following{/other_user}", "gists_url": "https://api.github.com/users/frostming/gists{/gist_id}", "starred_url": "https://api.github.com/users/frostming/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frostming/subscriptions", "organizations_url": "https://api.github.com/users/frostming/orgs", "repos_url": "https://api.github.com/users/frostming/repos", "events_url": "https://api.github.com/users/frostming/events{/privacy}", "received_events_url": "https://api.github.com/users/frostming/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-09T02:07:21Z", "updated_at": "2018-11-09T17:10:22Z", "closed_at": "2018-11-09T17:10:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Issue\r\nGiven this file:\r\n```toml\r\n[site.user]\r\nname = \"John\"\r\n```\r\nThen re-assign the table to be a string:\r\n```python\r\nparsed = tomlkit.parse(open(\"my.toml\").read())\r\nparsed['site']['user']=\"Tom\"\r\nprint(parsed.as_string())\r\n```\r\ngives:\r\n```toml\r\nuser = \"Tom\"\r\n```\r\nThe table header is missing!\r\ntomlkit version: v0.5.1\r\n\r\n## Workaround\r\nOne needs to reassign the parent:\r\n```python\r\nv = parsed['site']\r\nparsed['site'] = v.copy()\r\nparsed['site']['user']=\"Tom\"\r\nprint(parsed.as_string())\r\n```\r\n```toml\r\n[site]\r\nuser = \"Tom\"\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/28", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/28/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/28/events", "html_url": "https://github.com/sdispater/tomlkit/issues/28", "id": 374268057, "node_id": "MDU6SXNzdWUzNzQyNjgwNTc=", "number": 28, "title": "KeyAlreadyPresent, if sections mix their order", "user": {"login": "vlcinsky", "id": 635911, "node_id": "MDQ6VXNlcjYzNTkxMQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/635911?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vlcinsky", "html_url": "https://github.com/vlcinsky", "followers_url": "https://api.github.com/users/vlcinsky/followers", "following_url": "https://api.github.com/users/vlcinsky/following{/other_user}", "gists_url": "https://api.github.com/users/vlcinsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/vlcinsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vlcinsky/subscriptions", "organizations_url": "https://api.github.com/users/vlcinsky/orgs", "repos_url": "https://api.github.com/users/vlcinsky/repos", "events_url": "https://api.github.com/users/vlcinsky/events{/privacy}", "received_events_url": "https://api.github.com/users/vlcinsky/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-26T07:55:06Z", "updated_at": "2018-11-09T19:04:38Z", "closed_at": "2018-11-09T17:10:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Following test case\r\n```python\r\nimport pytest\r\nimport tomlkit\r\n\r\n\r\n@pytest.fixture\r\ndef toml_content():\r\n    return \"\"\"\r\n[major]\r\nname = \"Charles Bownam\"\r\n\r\n[alien]\r\nname = \"et\"\r\n\r\n[major.clerk]\r\nname = \"John Barradell\"\r\n\"\"\".strip()\r\n\r\n\r\ndef test_parse(toml_content):\r\n    doc = tomlkit.loads(toml_content)\r\n    assert doc\r\n```\r\nraise: ```tomlkit.exceptions.KeyAlreadyPresent: Key \"major\" already exists.```\r\n\r\nAccording to https://www.tomllint.com/ is the content valid TOML.\r\n\r\nAffects https://github.com/sdispater/poetry/issues/563 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/21", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/21/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/21/events", "html_url": "https://github.com/sdispater/tomlkit/issues/21", "id": 373099270, "node_id": "MDU6SXNzdWUzNzMwOTkyNzA=", "number": 21, "title": "This needs commenting or removing", "user": {"login": "njalerikson", "id": 4546435, "node_id": "MDQ6VXNlcjQ1NDY0MzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4546435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njalerikson", "html_url": "https://github.com/njalerikson", "followers_url": "https://api.github.com/users/njalerikson/followers", "following_url": "https://api.github.com/users/njalerikson/following{/other_user}", "gists_url": "https://api.github.com/users/njalerikson/gists{/gist_id}", "starred_url": "https://api.github.com/users/njalerikson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njalerikson/subscriptions", "organizations_url": "https://api.github.com/users/njalerikson/orgs", "repos_url": "https://api.github.com/users/njalerikson/repos", "events_url": "https://api.github.com/users/njalerikson/events{/privacy}", "received_events_url": "https://api.github.com/users/njalerikson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-23T16:52:54Z", "updated_at": "2018-10-23T16:54:57Z", "closed_at": "2018-10-23T16:54:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/sdispater/tomlkit/blob/fa6fe3bbdc0d0dbe8ab578f967df1fe3210c1e87/tomlkit/container.py#L549-L552\r\n\r\n`__setstate__` is unused anywhere in tomlkit so if it exists for other thirdparty tools it needs commenting, other it should be removed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/20", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/20/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/20/events", "html_url": "https://github.com/sdispater/tomlkit/issues/20", "id": 373090588, "node_id": "MDU6SXNzdWUzNzMwOTA1ODg=", "number": 20, "title": "if False?", "user": {"login": "njalerikson", "id": 4546435, "node_id": "MDQ6VXNlcjQ1NDY0MzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4546435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njalerikson", "html_url": "https://github.com/njalerikson", "followers_url": "https://api.github.com/users/njalerikson/followers", "following_url": "https://api.github.com/users/njalerikson/following{/other_user}", "gists_url": "https://api.github.com/users/njalerikson/gists{/gist_id}", "starred_url": "https://api.github.com/users/njalerikson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njalerikson/subscriptions", "organizations_url": "https://api.github.com/users/njalerikson/orgs", "repos_url": "https://api.github.com/users/njalerikson/repos", "events_url": "https://api.github.com/users/njalerikson/events{/privacy}", "received_events_url": "https://api.github.com/users/njalerikson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-23T16:32:18Z", "updated_at": "2018-10-25T23:12:43Z", "closed_at": "2018-10-25T23:12:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/sdispater/tomlkit/blob/5d949e3956e0f78a9497c6b1e8e62676106ff8d4/tomlkit/container.py#L288-L292\r\n\r\nIs this supposed to do something?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/13", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/13/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/13/events", "html_url": "https://github.com/sdispater/tomlkit/issues/13", "id": 369171655, "node_id": "MDU6SXNzdWUzNjkxNzE2NTU=", "number": 13, "title": "Commas consumed as part of a comment?", "user": {"login": "njalerikson", "id": 4546435, "node_id": "MDQ6VXNlcjQ1NDY0MzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4546435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njalerikson", "html_url": "https://github.com/njalerikson", "followers_url": "https://api.github.com/users/njalerikson/followers", "following_url": "https://api.github.com/users/njalerikson/following{/other_user}", "gists_url": "https://api.github.com/users/njalerikson/gists{/gist_id}", "starred_url": "https://api.github.com/users/njalerikson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njalerikson/subscriptions", "organizations_url": "https://api.github.com/users/njalerikson/orgs", "repos_url": "https://api.github.com/users/njalerikson/repos", "events_url": "https://api.github.com/users/njalerikson/events{/privacy}", "received_events_url": "https://api.github.com/users/njalerikson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-11T15:15:30Z", "updated_at": "2018-10-12T16:23:33Z", "closed_at": "2018-10-12T16:23:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/sdispater/tomlkit/blob/07442dcd5e9e9f44092d34f6f4a437316182c79f/tomlkit/parser.py#L342-L344\r\n\r\nWhy are commas being consumed as part of the whitespace before a comma?\r\n\r\n```\r\nimport tomlkit\r\np = tomlkit.parser.Parser(\"hello = 'world'    ,  # this\")\r\ndoc = p.parse()\r\n\r\ndoc\r\n# {'hello': 'world'}\r\ndoc.as_string()\r\n# \"hello = 'world'    ,  # this\"\r\ndoc[\"hello\"]._trivia.indent\r\n# ''\r\ndoc[\"hello\"]._trivia.comment_ws\r\n# '    ,  '\r\ndoc[\"hello\"]._trivia.comment\r\n# '# this'\r\ndoc[\"hello\"]._trivia.trail\r\n# ''\r\n```\r\n\r\nSimply removing the comma from the comment parsing also doesn't break any unittests.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/12", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/12/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/12/events", "html_url": "https://github.com/sdispater/tomlkit/issues/12", "id": 368885489, "node_id": "MDU6SXNzdWUzNjg4ODU0ODk=", "number": 12, "title": "Extending tomlkit", "user": {"login": "njalerikson", "id": 4546435, "node_id": "MDQ6VXNlcjQ1NDY0MzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4546435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njalerikson", "html_url": "https://github.com/njalerikson", "followers_url": "https://api.github.com/users/njalerikson/followers", "following_url": "https://api.github.com/users/njalerikson/following{/other_user}", "gists_url": "https://api.github.com/users/njalerikson/gists{/gist_id}", "starred_url": "https://api.github.com/users/njalerikson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njalerikson/subscriptions", "organizations_url": "https://api.github.com/users/njalerikson/orgs", "repos_url": "https://api.github.com/users/njalerikson/repos", "events_url": "https://api.github.com/users/njalerikson/events{/privacy}", "received_events_url": "https://api.github.com/users/njalerikson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-10T22:48:20Z", "updated_at": "2019-02-21T15:08:00Z", "closed_at": "2019-02-21T15:07:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am interested in extending the TOML syntax to include a handful of changes that simplify my config files (for example I'm looking to make `<value>` and `(condition)` into valid keys without quotes).\r\n\r\nThe cleanest way for this to be done would be to adjust tomlkit to support a plugin design where I can register additional types of keys and additional types of values. This could further mean that users could for example configure tomlkit to disallow keys/values they do not wish to deal with (like inline tables).\r\n\r\nIs this a direction/design change that would be of interest for tomlkit? Or is this outside of the desired scope? In theory this would also make future changes/additions to the TOML syntax easier to implement.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/11", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/11/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/11/events", "html_url": "https://github.com/sdispater/tomlkit/issues/11", "id": 365973755, "node_id": "MDU6SXNzdWUzNjU5NzM3NTU=", "number": 11, "title": "tomlkit.items not picklable", "user": {"login": "nickray", "id": 1092423, "node_id": "MDQ6VXNlcjEwOTI0MjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1092423?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickray", "html_url": "https://github.com/nickray", "followers_url": "https://api.github.com/users/nickray/followers", "following_url": "https://api.github.com/users/nickray/following{/other_user}", "gists_url": "https://api.github.com/users/nickray/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickray/subscriptions", "organizations_url": "https://api.github.com/users/nickray/orgs", "repos_url": "https://api.github.com/users/nickray/repos", "events_url": "https://api.github.com/users/nickray/events{/privacy}", "received_events_url": "https://api.github.com/users/nickray/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-02T16:13:41Z", "updated_at": "2018-10-12T16:23:41Z", "closed_at": "2018-10-12T16:23:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\n```\r\n>>> import tomlkit\r\n>>> import pickle\r\n>>> example = tomlkit.loads(\"foo = 0\")\r\n>>> pickle.loads(pickle.dumps(example))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: __new__() missing 2 required positional arguments: 'trivia' and 'raw'\r\n```\r\n\r\nThis is very unexpected from a library that claims that a TOMLDocument \"behaves like a standard dictionary\".\r\n\r\nIt's the Integers (and Floats) that cause this issue.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/10", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/10/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/10/events", "html_url": "https://github.com/sdispater/tomlkit/issues/10", "id": 356088935, "node_id": "MDU6SXNzdWUzNTYwODg5MzU=", "number": 10, "title": "Parsing large files is slow", "user": {"login": "jacebrowning", "id": 939501, "node_id": "MDQ6VXNlcjkzOTUwMQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/939501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jacebrowning", "html_url": "https://github.com/jacebrowning", "followers_url": "https://api.github.com/users/jacebrowning/followers", "following_url": "https://api.github.com/users/jacebrowning/following{/other_user}", "gists_url": "https://api.github.com/users/jacebrowning/gists{/gist_id}", "starred_url": "https://api.github.com/users/jacebrowning/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jacebrowning/subscriptions", "organizations_url": "https://api.github.com/users/jacebrowning/orgs", "repos_url": "https://api.github.com/users/jacebrowning/repos", "events_url": "https://api.github.com/users/jacebrowning/events{/privacy}", "received_events_url": "https://api.github.com/users/jacebrowning/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 988970262, "node_id": "MDU6TGFiZWw5ODg5NzAyNjI=", "url": "https://api.github.com/repos/sdispater/tomlkit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-08-31T18:51:35Z", "updated_at": "2018-09-02T02:17:34Z", "closed_at": "2018-09-01T15:35:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Parsing large TOML files is prohibitively slow. On a large Django application with 230 dependencies, Poetry has generated a 4145 line, 5 KB `pyproject.lock` file that takes more than 4 minutes to parse on my iMac:\r\n\r\n```\r\n$ time .venv/bin/python -c \"import tomlkit; tomlkit.parse(open('pyproject.lock').read())\"\r\n250.63s user 2.00s system 99% cpu 4:13.40 total\r\n```\r\n\r\nIf I break early, it always seems to be stuck in `_restore_idx`:\r\n\r\n```\r\n>>> tomlkit.parse(text)\r\n^CTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \".../.venv/lib/python2.7/site-packages/tomlkit/api.py\", line 51, in parse\r\n    return Parser(string).parse()\r\n  File \".../.venv/lib/python2.7/site-packages/tomlkit/parser.py\", line 144, in parse\r\n    key, value = self._parse_table()\r\n  File \".../.venv/lib/python2.7/site-packages/tomlkit/parser.py\", line 959, in _parse_table\r\n    result = self._parse_aot(result, name)\r\n  File \".../.venv/lib/python2.7/site-packages/tomlkit/parser.py\", line 1008, in _parse_aot\r\n    _, table = self._parse_table(name_first)\r\n  File \".../.venv/lib/python2.7/site-packages/tomlkit/parser.py\", line 927, in _parse_table\r\n    key_next, table_next = self._parse_table(name)\r\n  File \".../.venv/lib/python2.7/site-packages/tomlkit/parser.py\", line 924, in _parse_table\r\n    is_aot_next, name_next = self._peek_table()\r\n  File \".../.venv/lib/python2.7/site-packages/tomlkit/parser.py\", line 993, in _peek_table\r\n    self._restore_idx(*idx)\r\n  File \".../.venv/lib/python2.7/site-packages/tomlkit/parser.py\", line 301, in _restore_idx\r\n    [(i + idx, TOMLChar(c)) for i, c in enumerate(self._src[idx:])]\r\n  File \".../.venv/lib/python2.7/site-packages/tomlkit/toml_char.py\", line 8, in __init__\r\n    super(TOMLChar, self).__init__()\r\nKeyboardInterrupt\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/9", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/9/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/9/events", "html_url": "https://github.com/sdispater/tomlkit/issues/9", "id": 355568366, "node_id": "MDU6SXNzdWUzNTU1NjgzNjY=", "number": 9, "title": "'tomlkit.items.Key.__eq__()' should return 'NotImplemented' when comparing objects without a 'key' attribute", "user": {"login": "cosmicspacedragon", "id": 33467962, "node_id": "MDQ6VXNlcjMzNDY3OTYy", "avatar_url": "https://avatars2.githubusercontent.com/u/33467962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cosmicspacedragon", "html_url": "https://github.com/cosmicspacedragon", "followers_url": "https://api.github.com/users/cosmicspacedragon/followers", "following_url": "https://api.github.com/users/cosmicspacedragon/following{/other_user}", "gists_url": "https://api.github.com/users/cosmicspacedragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/cosmicspacedragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cosmicspacedragon/subscriptions", "organizations_url": "https://api.github.com/users/cosmicspacedragon/orgs", "repos_url": "https://api.github.com/users/cosmicspacedragon/repos", "events_url": "https://api.github.com/users/cosmicspacedragon/events{/privacy}", "received_events_url": "https://api.github.com/users/cosmicspacedragon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 988970264, "node_id": "MDU6TGFiZWw5ODg5NzAyNjQ=", "url": "https://api.github.com/repos/sdispater/tomlkit/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-30T12:44:16Z", "updated_at": "2018-10-12T16:23:55Z", "closed_at": "2018-10-12T16:23:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "The current comparison method does not take into account the possibility that an object without a `key` attribute could be passed in as `other`.\r\n\r\nWhat follows is some slightly obfuscated output from one of my pytest runs.\r\n```\r\nself = <Key \"a\\lovely\\key\">\r\nother = 'a\\\\lovely\\\\key'\r\n\r\n    def __eq__(self, other):  # type: (Key) -> bool\r\n>       return self.key == other.key\r\nE       AttributeError: 'str' object has no attribute 'key'\r\n\r\n..\\..\\.virtualenvs\\<virtualenv>\\lib\\site-packages\\tomlkit\\items.py:164: AttributeError\r\n```\r\nAs you can see, I tried comparing a 'tomlkit.items.Key' against a regular string which failed spectacularly.\r\nIf I'm not mistaken, the worst that should happen when doing a comparison is getting `False`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/8", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/8/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/8/events", "html_url": "https://github.com/sdispater/tomlkit/issues/8", "id": 352358361, "node_id": "MDU6SXNzdWUzNTIzNTgzNjE=", "number": 8, "title": "update() for Table and InlineTable yield surprising result", "user": {"login": "uranusjr", "id": 605277, "node_id": "MDQ6VXNlcjYwNTI3Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/605277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uranusjr", "html_url": "https://github.com/uranusjr", "followers_url": "https://api.github.com/users/uranusjr/followers", "following_url": "https://api.github.com/users/uranusjr/following{/other_user}", "gists_url": "https://api.github.com/users/uranusjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/uranusjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uranusjr/subscriptions", "organizations_url": "https://api.github.com/users/uranusjr/orgs", "repos_url": "https://api.github.com/users/uranusjr/repos", "events_url": "https://api.github.com/users/uranusjr/events{/privacy}", "received_events_url": "https://api.github.com/users/uranusjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 988970262, "node_id": "MDU6TGFiZWw5ODg5NzAyNjI=", "url": "https://api.github.com/repos/sdispater/tomlkit/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-21T02:06:26Z", "updated_at": "2018-08-30T14:14:53Z", "closed_at": "2018-08-30T14:14:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "```pycon\r\n>>> import tomlkit\r\n>>> t = tomlkit.table()\r\n>>> t.update({'a': 1})\r\n>>> t\r\n{'a': 1}\r\n>>> t.as_string()\r\n''\r\n```\r\n\r\nI think the solution is to implement them to update `_value`? I\u2019d be interested to work on this (and probably some other inherited methods when I find them) if they are considered acceptable additions.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/6", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/6/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/6/events", "html_url": "https://github.com/sdispater/tomlkit/issues/6", "id": 347270396, "node_id": "MDU6SXNzdWUzNDcyNzAzOTY=", "number": 6, "title": "Dotted keys are not turned into nested dicts", "user": {"login": "jfemiani", "id": 2800407, "node_id": "MDQ6VXNlcjI4MDA0MDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/2800407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jfemiani", "html_url": "https://github.com/jfemiani", "followers_url": "https://api.github.com/users/jfemiani/followers", "following_url": "https://api.github.com/users/jfemiani/following{/other_user}", "gists_url": "https://api.github.com/users/jfemiani/gists{/gist_id}", "starred_url": "https://api.github.com/users/jfemiani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jfemiani/subscriptions", "organizations_url": "https://api.github.com/users/jfemiani/orgs", "repos_url": "https://api.github.com/users/jfemiani/repos", "events_url": "https://api.github.com/users/jfemiani/events{/privacy}", "received_events_url": "https://api.github.com/users/jfemiani/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-03T06:05:43Z", "updated_at": "2018-08-03T23:28:23Z", "closed_at": "2018-08-03T23:28:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dotted key names are not converted into nested tables.\r\nSee https://github.com/toml-lang/toml/tree/v0.5.0#keys\r\n\r\nAccording to the 5.0 standard, this:\r\n```\r\n[VOLUME]\r\nFILE = 'data/interim/volume.tif'\r\nCRS = 'epsg:26949'\r\n\r\nZ.MIN = -0.3048\r\nZ.MAX = 1.524\r\nZ.STEPS = 6\r\n```\r\nshould produce (indented for readability)\r\n```\r\n{ 'VOLUME': { \r\n        'FILE': 'data/interim/volume.tif',\r\n        'CRS': 'epsg:26949',\r\n        'Z': { \r\n            'MIN': -0.3048,\r\n            'MAX': 1.524,\r\n            'STEPS': 6\r\n        }\r\n     }\r\n}\r\n```\r\n\r\nBut it produces\r\n```\r\n{'VOLUME': {\r\n    'FILE': 'data/interim/volume.tif',\r\n    'CRS': 'epsg:26949',\r\n    'Z.MIN': -0.3048,\r\n    'Z.MAX': 1.524,\r\n    'Z.STEPS': 6\r\n    }\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/5", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/5/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/5/events", "html_url": "https://github.com/sdispater/tomlkit/issues/5", "id": 346540985, "node_id": "MDU6SXNzdWUzNDY1NDA5ODU=", "number": 5, "title": "invalid tomlkit.dumps() output", "user": {"login": "lmna", "id": 19609023, "node_id": "MDQ6VXNlcjE5NjA5MDIz", "avatar_url": "https://avatars1.githubusercontent.com/u/19609023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmna", "html_url": "https://github.com/lmna", "followers_url": "https://api.github.com/users/lmna/followers", "following_url": "https://api.github.com/users/lmna/following{/other_user}", "gists_url": "https://api.github.com/users/lmna/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmna/subscriptions", "organizations_url": "https://api.github.com/users/lmna/orgs", "repos_url": "https://api.github.com/users/lmna/repos", "events_url": "https://api.github.com/users/lmna/events{/privacy}", "received_events_url": "https://api.github.com/users/lmna/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-01T10:27:49Z", "updated_at": "2018-08-03T18:05:57Z", "closed_at": "2018-08-03T18:05:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "    >>> from tomlkit import dumps\r\n    >>> from tomlkit import parse\r\n    >>> doc = parse(\"foo=10\")\r\n    >>> doc[\"bar\"]=11\r\n    >>> dumps(doc)\r\n    'foo=10bar = 11\\n'\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/4", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/4/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/4/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/4/events", "html_url": "https://github.com/sdispater/tomlkit/issues/4", "id": 343776466, "node_id": "MDU6SXNzdWUzNDM3NzY0NjY=", "number": 4, "title": "KeyAlreadyPresent raised when it should be valid", "user": {"login": "batisteo", "id": 2727048, "node_id": "MDQ6VXNlcjI3MjcwNDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/2727048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/batisteo", "html_url": "https://github.com/batisteo", "followers_url": "https://api.github.com/users/batisteo/followers", "following_url": "https://api.github.com/users/batisteo/following{/other_user}", "gists_url": "https://api.github.com/users/batisteo/gists{/gist_id}", "starred_url": "https://api.github.com/users/batisteo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/batisteo/subscriptions", "organizations_url": "https://api.github.com/users/batisteo/orgs", "repos_url": "https://api.github.com/users/batisteo/repos", "events_url": "https://api.github.com/users/batisteo/events{/privacy}", "received_events_url": "https://api.github.com/users/batisteo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-23T20:06:32Z", "updated_at": "2018-07-23T20:44:36Z", "closed_at": "2018-07-23T20:44:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```python\r\n# Python 3.6.5\r\ntoml_file = \"\"\"\r\n[[patterns]]\r\n[patterns.start.0]\r\nname = \"name 0\"\r\n[patterns.start.1]\r\nname = \"name 1\"\r\n\"\"\"\r\n\r\nimport toml, tomlkit\r\n\r\ntoml.loads(toml_file)\r\n# {'patterns': [{'start': {'0': {'name': 'name 0'}, '1': {'name': 'name 1'}}}]}\r\n\r\n\r\ntomlkit.loads(toml_file)\r\n\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\n    tomlkit.loads(toml_file)\r\n  File \"/~/.venv/lib64/python3.6/site-packages/tomlkit/api.py\", line 38, in loads\r\n    return parse(string)\r\n  File \"/~/.venv/lib64/python3.6/site-packages/tomlkit/api.py\", line 52, in parse\r\n    return Parser(string).parse()\r\n  File \"/~/.venv/lib64/python3.6/site-packages/tomlkit/parser.py\", line 170, in parse\r\n    key, value = self._parse_table()\r\n  File \"/~/.venv/lib64/python3.6/site-packages/tomlkit/parser.py\", line 935, in _parse_table\r\n    values.append(key_next, table_next)\r\n  File \"/~/.venv/lib64/python3.6/site-packages/tomlkit/container.py\", line 103, in append\r\n    raise KeyAlreadyPresent(key)\r\ntomlkit.exceptions.KeyAlreadyPresent: Key \"start\" already exists.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/sdispater/tomlkit/issues/2", "repository_url": "https://api.github.com/repos/sdispater/tomlkit", "labels_url": "https://api.github.com/repos/sdispater/tomlkit/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/sdispater/tomlkit/issues/2/comments", "events_url": "https://api.github.com/repos/sdispater/tomlkit/issues/2/events", "html_url": "https://github.com/sdispater/tomlkit/issues/2", "id": 341639509, "node_id": "MDU6SXNzdWUzNDE2Mzk1MDk=", "number": 2, "title": "What version of the TOML spec does TOML Kit support?", "user": {"login": "nchammas", "id": 1039369, "node_id": "MDQ6VXNlcjEwMzkzNjk=", "avatar_url": "https://avatars0.githubusercontent.com/u/1039369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nchammas", "html_url": "https://github.com/nchammas", "followers_url": "https://api.github.com/users/nchammas/followers", "following_url": "https://api.github.com/users/nchammas/following{/other_user}", "gists_url": "https://api.github.com/users/nchammas/gists{/gist_id}", "starred_url": "https://api.github.com/users/nchammas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nchammas/subscriptions", "organizations_url": "https://api.github.com/users/nchammas/orgs", "repos_url": "https://api.github.com/users/nchammas/repos", "events_url": "https://api.github.com/users/nchammas/events{/privacy}", "received_events_url": "https://api.github.com/users/nchammas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-16T19:03:39Z", "updated_at": "2018-07-19T05:22:45Z", "closed_at": "2018-07-19T05:22:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "TOML has a few versions. The latest version, 0.5.0, was [released a week ago](https://github.com/toml-lang/toml/releases/tag/v0.5.0).\r\n\r\nIt would be good if TOML Kit's README specified what version of the spec it supported.", "performed_via_github_app": null, "score": 1.0}]}