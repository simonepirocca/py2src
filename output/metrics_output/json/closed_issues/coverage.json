{"total_count": 733, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/nedbat/coveragepy/issues/1015", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1015/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1015/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1015/events", "html_url": "https://github.com/nedbat/coveragepy/issues/1015", "id": 669295764, "node_id": "MDU6SXNzdWU2NjkyOTU3NjQ=", "number": 1015, "title": "Exclusions may not work depending on the working directory", "user": {"login": "altendky", "id": 543719, "node_id": "MDQ6VXNlcjU0MzcxOQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/543719?v=4", "gravatar_id": "", "url": "https://api.github.com/users/altendky", "html_url": "https://github.com/altendky", "followers_url": "https://api.github.com/users/altendky/followers", "following_url": "https://api.github.com/users/altendky/following{/other_user}", "gists_url": "https://api.github.com/users/altendky/gists{/gist_id}", "starred_url": "https://api.github.com/users/altendky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/altendky/subscriptions", "organizations_url": "https://api.github.com/users/altendky/orgs", "repos_url": "https://api.github.com/users/altendky/repos", "events_url": "https://api.github.com/users/altendky/events{/privacy}", "received_events_url": "https://api.github.com/users/altendky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-31T00:18:05Z", "updated_at": "2020-07-31T02:09:09Z", "closed_at": "2020-07-31T02:09:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nExclusions may not work depending on the working directory from which `coverage run` is launched.\r\n\r\n**To Reproduce**\r\nOS: Ubuntu Linux 20.04\r\nPython: 3.8.3\r\ncoverage: 5.2.1\r\n\r\nExample repository:\r\nhttps://github.com/altendky/covtest/tree/1071c7f999a9ed51154a48148819a01ebc5cdd11\r\n\r\n```bash\r\ngit clone https://github.com/altendky/covtest\r\ncd covtest\r\ngit checkout 1071c7f999a9ed51154a48148819a01ebc5cdd11\r\nbash go.sh\r\n```\r\n\r\n<details> <summary>Complete run with diagnostic info</summary>\r\n\r\n```bash\r\naltendky@p1:~/repos/covtest/blue$ git clone https://github.com/altendky/covtest\r\nCloning into 'covtest'...\r\nremote: Enumerating objects: 11, done.\r\nremote: Counting objects: 100% (11/11), done.\r\nremote: Compressing objects: 100% (7/7), done.\r\nremote: Total 11 (delta 2), reused 11 (delta 2), pack-reused 0\r\nUnpacking objects: 100% (11/11), 1.11 KiB | 228.00 KiB/s, done.\r\naltendky@p1:~/repos/covtest/blue$ cd covtest\r\naltendky@p1:~/repos/covtest/blue/covtest$ git checkout 1071c7f999a9ed51154a48148819a01ebc5cdd11\r\nNote: switching to '1071c7f999a9ed51154a48148819a01ebc5cdd11'.\r\n\r\nYou are in 'detached HEAD' state. You can look around, make experimental\r\nchanges and commit them, and you can discard any commits you make in this\r\nstate without impacting any branches by switching back to a branch.\r\n\r\nIf you want to create a new branch to retain commits you create, you may\r\ndo so (now or later) by using -c with the switch command. Example:\r\n\r\n  git switch -c <new-branch-name>\r\n\r\nOr undo this operation with:\r\n\r\n  git switch -\r\n\r\nTurn off this advice by setting config variable advice.detachedHead to false\r\n\r\nHEAD is now at 1071c7f more info\r\naltendky@p1:~/repos/covtest/blue/covtest$ bash go.sh\r\n\r\nrm -rf venv\r\n+ rm -rf venv\r\npython3 -m venv venv\r\n+ python3 -m venv venv\r\nvenv/bin/pip install --upgrade pip setuptools wheel\r\n+ venv/bin/pip install --upgrade pip setuptools wheel\r\nCollecting pip\r\n  Using cached https://files.pythonhosted.org/packages/36/74/38c2410d688ac7b48afa07d413674afc1f903c1c1f854de51dc8eb2367a5/pip-20.2-py2.py3-none-any.whl\r\nCollecting setuptools\r\n  Using cached https://files.pythonhosted.org/packages/8e/11/9e10f1cad4518cb307b484c255cae61e97f05b82f6d536932b1714e01b47/setuptools-49.2.0-py3-none-any.whl\r\nCollecting wheel\r\n  Using cached https://files.pythonhosted.org/packages/8c/23/848298cccf8e40f5bbb59009b32848a4c38f4e7f3364297ab3c3e2e2cd14/wheel-0.34.2-py2.py3-none-any.whl\r\nInstalling collected packages: pip, setuptools, wheel\r\n  Found existing installation: pip 19.2.3\r\n    Uninstalling pip-19.2.3:\r\n      Successfully uninstalled pip-19.2.3\r\n  Found existing installation: setuptools 41.2.0\r\n    Uninstalling setuptools-41.2.0:\r\n      Successfully uninstalled setuptools-41.2.0\r\nSuccessfully installed pip-20.2 setuptools-49.2.0 wheel-0.34.2\r\nvenv/bin/pip install .\r\n+ venv/bin/pip install .\r\nProcessing /home/altendky/repos/covtest/blue/covtest\r\nCollecting coverage\r\n  Using cached coverage-5.2.1-cp38-cp38-manylinux1_x86_64.whl (231 kB)\r\nBuilding wheels for collected packages: covtest\r\n  Building wheel for covtest (setup.py) ... done\r\n  Created wheel for covtest: filename=covtest-0.0.0-py3-none-any.whl size=1393 sha256=3105c0587d6e21f6130dee46d99e475af34ef24bcfd9af4f3ec6265a03cab417\r\n  Stored in directory: /tmp/pip-ephem-wheel-cache-0eb7ph9w/wheels/db/d9/36/53374d0c3d6fbc08d9281d3236f942159b62b3b821efa6ebc8\r\nSuccessfully built covtest\r\nInstalling collected packages: coverage, covtest\r\nSuccessfully installed coverage-5.2.1 covtest-0.0.0\r\n\r\necho\r\n+ echo\r\n\r\n\r\nvenv/bin/python --version --version\r\n+ venv/bin/python --version --version\r\nPython 3.8.3 (default, Jun  4 2020, 17:51:25) \r\n[GCC 9.3.0]\r\ngit show --no-patch HEAD\r\n+ git show --no-patch HEAD\r\ncommit 1071c7f999a9ed51154a48148819a01ebc5cdd11 (HEAD, origin/main, origin/HEAD, main)\r\nAuthor: Kyle Altendorf <sda@fstab.net>\r\nDate:   Thu Jul 30 20:01:07 2020 -0400\r\n\r\n    more info\r\nvenv/bin/pip freeze --all\r\n+ venv/bin/pip freeze --all\r\ncoverage==5.2.1\r\ncovtest @ file:///home/altendky/repos/covtest/blue/covtest\r\npip==20.2\r\nsetuptools==49.2.0\r\nwheel==0.34.2\r\nvenv/bin/coverage debug sys\r\n+ venv/bin/coverage debug sys\r\n-- sys -------------------------------------------------------\r\n                        version: 5.2.1\r\n                       coverage: /home/altendky/repos/covtest/blue/covtest/venv/lib/python3.8/site-packages/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: available\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                   configs_read: /home/altendky/repos/covtest/blue/covtest/.coveragerc\r\n                    config_file: /home/altendky/repos/covtest/blue/covtest/.coveragerc\r\n                config_contents: b'[report]\\nexclude_lines =\\n  typing\\\\.overload\\n'\r\n                      data_file: -none-\r\n                         python: 3.8.3 (default, Jun  4 2020, 17:51:25) [GCC 9.3.0]\r\n                       platform: Linux-5.4.0-40-generic-x86_64-with-glibc2.2.5\r\n                 implementation: CPython\r\n                     executable: /home/altendky/repos/covtest/blue/covtest/venv/bin/python3\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n                            pid: 846734\r\n                            cwd: /home/altendky/repos/covtest/blue/covtest\r\n                           path: /home/altendky/repos/covtest/blue/covtest/venv/bin\r\n                                 /home/altendky/.pyenv/versions/3.8.3/lib/python38.zip\r\n                                 /home/altendky/.pyenv/versions/3.8.3/lib/python3.8\r\n                                 /home/altendky/.pyenv/versions/3.8.3/lib/python3.8/lib-dynload\r\n                                 /home/altendky/repos/covtest/blue/covtest/venv/lib/python3.8/site-packages\r\n                    environment: PYENV_ROOT = /home/altendky/.pyenv\r\n                                 PYENV_SHELL = fish\r\n                                 PYENV_VIRTUALENV_INIT = 1\r\n                                 PYTHONDONTWRITEBYTECODE = 1\r\n                                 PYTHON_CONFIGURE_OPTS = --enable-shared\r\n                   command_line: venv/bin/coverage debug sys\r\n                sqlite3_version: 2.6.0\r\n         sqlite3_sqlite_version: 3.31.1\r\n             sqlite3_temp_store: 0\r\n        sqlite3_compile_options: COMPILER=gcc-9.3.0\r\n                                 ENABLE_COLUMN_METADATA\r\n                                 ENABLE_DBSTAT_VTAB\r\n                                 ENABLE_FTS3\r\n                                 ENABLE_FTS3_PARENTHESIS\r\n                                 ENABLE_FTS3_TOKENIZER\r\n                                 ENABLE_FTS4\r\n                                 ENABLE_FTS5\r\n                                 ENABLE_JSON1\r\n                                 ENABLE_LOAD_EXTENSION\r\n                                 ENABLE_PREUPDATE_HOOK\r\n                                 ENABLE_RTREE\r\n                                 ENABLE_SESSION\r\n                                 ENABLE_STMTVTAB\r\n                                 ENABLE_UNLOCK_NOTIFY\r\n                                 ENABLE_UPDATE_DELETE_LIMIT\r\n                                 HAVE_ISNAN\r\n                                 LIKE_DOESNT_MATCH_BLOBS\r\n                                 MAX_SCHEMA_RETRY=25\r\n                                 MAX_VARIABLE_NUMBER=250000\r\n                                 OMIT_LOOKASIDE\r\n                                 SECURE_DELETE\r\n                                 SOUNDEX\r\n                                 TEMP_STORE=1\r\n                                 THREADSAFE=1\r\n                                 USE_URI\r\n\r\nvenv/bin/coverage erase\r\n+ venv/bin/coverage erase\r\nrm -rf htmlcov\r\n+ rm -rf htmlcov\r\nvenv/bin/coverage run --rcfile .coveragerc -m covtest\r\n+ venv/bin/coverage run --rcfile .coveragerc -m covtest\r\nvenv/bin/coverage html\r\n+ venv/bin/coverage html\r\necho ------- root\r\n+ echo ------- root\r\n------- root\r\nvenv/bin/coverage report\r\n+ venv/bin/coverage report\r\nName                  Stmts   Miss  Cover\r\n-----------------------------------------\r\ncovtest/__init__.py       0      0   100%\r\ncovtest/__main__.py       4      0   100%\r\n-----------------------------------------\r\nTOTAL                     4      0   100%\r\necho\r\n+ echo\r\n\r\ngrep -r missing htmlcov/*__main__*\r\n+ grep -r missing htmlcov/covtest___main___py.html\r\n            <button type=\"button\" class=\"mis show_mis shortkey_m button_toggle_mis\" title=\"Toggle lines missing\">0 missing</button>\r\n\r\necho\r\n+ echo\r\n\r\necho\r\n+ echo\r\n\r\n\r\nrm -rf empty\r\n+ rm -rf empty\r\nmkdir empty\r\n+ mkdir empty\r\ncd empty\r\n+ cd empty\r\n../venv/bin/coverage erase\r\n+ ../venv/bin/coverage erase\r\nrm -rf htmlcov\r\n+ rm -rf htmlcov\r\n../venv/bin/coverage run --rcfile ../.coveragerc -m covtest\r\n+ ../venv/bin/coverage run --rcfile ../.coveragerc -m covtest\r\n../venv/bin/coverage html\r\n+ ../venv/bin/coverage html\r\necho ------- empty/\r\n+ echo ------- empty/\r\n------- empty/\r\n../venv/bin/coverage report\r\n+ ../venv/bin/coverage report\r\nName                                                                                             Stmts   Miss  Cover\r\n--------------------------------------------------------------------------------------------------------------------\r\n/home/altendky/repos/covtest/blue/covtest/venv/lib/python3.8/site-packages/covtest/__init__.py       0      0   100%\r\n/home/altendky/repos/covtest/blue/covtest/venv/lib/python3.8/site-packages/covtest/__main__.py       7      1    86%\r\n--------------------------------------------------------------------------------------------------------------------\r\nTOTAL                                                                                                7      1    86%\r\necho\r\n+ echo\r\n\r\ngrep -r missing htmlcov/*__main__*\r\n+ grep -r missing htmlcov/_home_altendky_repos_covtest_blue_covtest_venv_lib_python3_8_site-packages_covtest___main___py.html\r\n            <button type=\"button\" class=\"mis show_mis shortkey_m button_toggle_mis\" title=\"Toggle lines missing\">1 missing</button>\r\ncd -\r\n+ cd -\r\n/home/altendky/repos/covtest/blue/covtest\r\n```\r\n\r\n</details>\r\n\r\n**Expected behavior**\r\nThe `...` lines in the `@typing.overload` function are excluded rather than missing.\r\n\r\n**Additional context**\r\nThis was observed while working on QTrio.  Also reported to Codecov before deciding it seemed to be a `coverage` issue.  Given that Codecov was reporting the lines as missed that suggests to me that all tested platforms (Windows, macOS, Linux) and all tested Python versions (3.6, 3.7, and 3.8) are affected.\r\n\r\nhttps://github.com/altendky/qtrio/pull/105\r\nhttps://community.codecov.io/t/codecov-reporting-old-coverage-data-for-new-builds-in-a-pr/1814\r\n\r\nI'll throw my guess here that there are paths associated with the coverage measurement and separate paths associated with the exclusions and that in the case of running from the `empty/` directory these end up not agreeing and so the excluded lines are not considered present in the coverage results and thus not excluded.  But, that's only based on the HTML reports showing different paths for the same `covtest` files.\r\n\r\nI'll try to take a look at this and see what I can learn about `coverage`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/1009", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1009/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1009/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1009/events", "html_url": "https://github.com/nedbat/coveragepy/issues/1009", "id": 651705709, "node_id": "MDU6SXNzdWU2NTE3MDU3MDk=", "number": 1009, "title": "context on dark theme blends in", "user": {"login": "gaborbernat", "id": 690238, "node_id": "MDQ6VXNlcjY5MDIzOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/690238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gaborbernat", "html_url": "https://github.com/gaborbernat", "followers_url": "https://api.github.com/users/gaborbernat/followers", "following_url": "https://api.github.com/users/gaborbernat/following{/other_user}", "gists_url": "https://api.github.com/users/gaborbernat/gists{/gist_id}", "starred_url": "https://api.github.com/users/gaborbernat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gaborbernat/subscriptions", "organizations_url": "https://api.github.com/users/gaborbernat/orgs", "repos_url": "https://api.github.com/users/gaborbernat/repos", "events_url": "https://api.github.com/users/gaborbernat/events{/privacy}", "received_events_url": "https://api.github.com/users/gaborbernat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}, {"id": 973387345, "node_id": "MDU6TGFiZWw5NzMzODczNDU=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/html", "name": "html", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-06T17:27:35Z", "updated_at": "2020-07-24T12:23:56Z", "closed_at": "2020-07-06T18:54:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Reading the contexts on the dark theme is hard:\r\n![Screenshot 2020-07-06 at 18 26 14459](https://user-images.githubusercontent.com/690238/86621569-51781a00-bfb6-11ea-93d4-550c1c2de926.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/1006", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1006/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1006/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1006/events", "html_url": "https://github.com/nedbat/coveragepy/issues/1006", "id": 648277048, "node_id": "MDU6SXNzdWU2NDgyNzcwNDg=", "number": 1006, "title": "AttributeError: 'Coverage' object has no attribute 'source'", "user": {"login": "elfarsaouiomar", "id": 31247741, "node_id": "MDQ6VXNlcjMxMjQ3NzQx", "avatar_url": "https://avatars0.githubusercontent.com/u/31247741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elfarsaouiomar", "html_url": "https://github.com/elfarsaouiomar", "followers_url": "https://api.github.com/users/elfarsaouiomar/followers", "following_url": "https://api.github.com/users/elfarsaouiomar/following{/other_user}", "gists_url": "https://api.github.com/users/elfarsaouiomar/gists{/gist_id}", "starred_url": "https://api.github.com/users/elfarsaouiomar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elfarsaouiomar/subscriptions", "organizations_url": "https://api.github.com/users/elfarsaouiomar/orgs", "repos_url": "https://api.github.com/users/elfarsaouiomar/repos", "events_url": "https://api.github.com/users/elfarsaouiomar/events{/privacy}", "received_events_url": "https://api.github.com/users/elfarsaouiomar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1784642395, "node_id": "MDU6TGFiZWwxNzg0NjQyMzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/not-our-bug", "name": "not-our-bug", "color": "b997e5", "default": false, "description": "The problem was elsewhere"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-30T15:34:49Z", "updated_at": "2020-07-06T12:48:40Z", "closed_at": "2020-07-06T12:48:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nhi ,\r\nit's my first time used this tools, it's a great . but i have problem when i run \r\n`python3 manage.py jenkins --enable-coverage`\r\n```\r\nTraceback (most recent call last):\r\n  File \"manage.py\", line 22, in <module>\r\n    execute_from_command_line(sys.argv)\r\n  File \"/home/omar/git/ecommerce/venv/lib/python3.8/site-packages/django/core/management/__init__.py\", line 381, in execute_from_command_line\r\n    utility.execute()\r\n  File \"/home/omar/git/ecommerce/venv/lib/python3.8/site-packages/django/core/management/__init__.py\", line 375, in execute\r\n    self.fetch_command(subcommand).run_from_argv(self.argv)\r\n  File \"/home/omar/git/ecommerce/venv/lib/python3.8/site-packages/django_jenkins/management/commands/jenkins.py\", line 47, in run_from_argv\r\n    super(Command, self).run_from_argv(argv)\r\n  File \"/home/omar/git/ecommerce/venv/lib/python3.8/site-packages/django/core/management/commands/test.py\", line 23, in run_from_argv\r\n    super().run_from_argv(argv)\r\n  File \"/home/omar/git/ecommerce/venv/lib/python3.8/site-packages/django/core/management/base.py\", line 323, in run_from_argv\r\n    self.execute(*args, **cmd_options)\r\n  File \"/home/omar/git/ecommerce/venv/lib/python3.8/site-packages/django/core/management/base.py\", line 364, in execute\r\n    output = self.handle(*args, **options)\r\n  File \"/home/omar/git/ecommerce/venv/lib/python3.8/site-packages/django_jenkins/management/commands/jenkins.py\", line 109, in handle\r\n    tested_locations = self.get_tested_locations(test_labels)\r\n  File \"/home/omar/git/ecommerce/venv/lib/python3.8/site-packages/django_jenkins/management/commands/jenkins.py\", line 135, in get_tested_locations\r\n    elif coverage and coverage.coverage.source:\r\nAttributeError: 'Coverage' object has no attribute 'source'\r\n```\r\npython version : Python 3.8.3\r\ndjango version : 3.0\r\ndjango_jenkins: django-jenkins==0.110.0\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/1003", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1003/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1003/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1003/events", "html_url": "https://github.com/nedbat/coveragepy/issues/1003", "id": 645339013, "node_id": "MDU6SXNzdWU2NDUzMzkwMTM=", "number": 1003, "title": "wrong exit status for Windows CI", "user": {"login": "Borda", "id": 6035284, "node_id": "MDQ6VXNlcjYwMzUyODQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/6035284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Borda", "html_url": "https://github.com/Borda", "followers_url": "https://api.github.com/users/Borda/followers", "following_url": "https://api.github.com/users/Borda/following{/other_user}", "gists_url": "https://api.github.com/users/Borda/gists{/gist_id}", "starred_url": "https://api.github.com/users/Borda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Borda/subscriptions", "organizations_url": "https://api.github.com/users/Borda/orgs", "repos_url": "https://api.github.com/users/Borda/repos", "events_url": "https://api.github.com/users/Borda/events{/privacy}", "received_events_url": "https://api.github.com/users/Borda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321136, "node_id": "MDU6TGFiZWw5NzMzMjExMzY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/question", "name": "question", "color": "bbaaff", "default": true, "description": "Further information is requested"}, {"id": 1191924489, "node_id": "MDU6TGFiZWwxMTkxOTI0NDg5", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/windows", "name": "windows", "color": "9fd5f4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-25T08:39:19Z", "updated_at": "2020-07-01T06:37:51Z", "closed_at": "2020-07-01T06:37:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWe are running Github Action on multiple OS and for all, we follow a common pipeline to test python code and collect coverage\r\nhttps://github.com/PyTorchLightning/pytorch-lightning/blob/b6ab7ca1215d32924beb76f6b214171e4e9c5869/.github/workflows/ci-testing.yml#L125\r\nNow we got to case that some tests are failing on Windows but for some reason, it was not coughed by CI, see here block \"Test\"\r\nhttps://github.com/PyTorchLightning/pytorch-lightning/pull/2356/checks?check_run_id=805809911\r\nWhen I remove `coverage` and keep only `pytest` it marks the CI test correctly as failing, see https://github.com/PyTorchLightning/pytorch-lightning/pull/2358\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*. Don't just link to a failing CI job. Answer the questions below:\r\n1. What version of Python are you using?\r\n   - Python 3.7\r\n1. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n   - coverage                  5.1\r\n1. What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\n   - pytest                    5.4.3\r\n   - pytest-cov                2.10.0\r\n   - pytest-flake8             1.0.6\r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\n1. What commands did you run?\r\n   - `coverage run --source pytorch_lightning -m py.test pytorch_lightning tests -v`\r\n\r\n**Expected behavior**\r\n\r\nmarked the CI check as falling if pytest fails\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/1001", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1001/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1001/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/1001/events", "html_url": "https://github.com/nedbat/coveragepy/issues/1001", "id": 642651180, "node_id": "MDU6SXNzdWU2NDI2NTExODA=", "number": 1001, "title": "Tests use contracts which is not in tox requirements", "user": {"login": "vstinner", "id": 194129, "node_id": "MDQ6VXNlcjE5NDEyOQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/194129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vstinner", "html_url": "https://github.com/vstinner", "followers_url": "https://api.github.com/users/vstinner/followers", "following_url": "https://api.github.com/users/vstinner/following{/other_user}", "gists_url": "https://api.github.com/users/vstinner/gists{/gist_id}", "starred_url": "https://api.github.com/users/vstinner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vstinner/subscriptions", "organizations_url": "https://api.github.com/users/vstinner/orgs", "repos_url": "https://api.github.com/users/vstinner/repos", "events_url": "https://api.github.com/users/vstinner/events{/privacy}", "received_events_url": "https://api.github.com/users/vstinner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 991685361, "node_id": "MDU6TGFiZWw5OTE2ODUzNjE=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/cant-reproduce", "name": "cant-reproduce", "color": "c6313e", "default": false, "description": ""}, {"id": 973321136, "node_id": "MDU6TGFiZWw5NzMzMjExMzY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/question", "name": "question", "color": "bbaaff", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-06-21T22:17:20Z", "updated_at": "2020-07-06T12:47:44Z", "closed_at": "2020-07-06T12:47:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I run coverage 5.1 tests with `python3.8 -m tox -e py`, a test fails on missing `contracts` module. But this test requirement is not in tox.ini. I found COVERAGE_NO_CONTRACTS env var in the code, but it doesn't seem to be set by tox neither:\r\n\r\n```\r\n# Environment COVERAGE_NO_CONTRACTS=1 can turn off contracts while debugging\r\n# tests to remove noise from stack traces.\r\n# $set_env.py: COVERAGE_NO_CONTRACTS - Disable PyContracts to simplify stack traces.\r\nUSE_CONTRACTS = env.TESTING and not bool(int(os.environ.get(\"COVERAGE_NO_CONTRACTS\", 0)))\r\n```\r\n\r\nFailing test: <tests.test_summary.SummaryTest testMethod=test_report_show_missing_branches_and_lines>\r\n\r\nError:\r\n\r\n```\r\nE       AssertionError: 'Error processing line 1 of /home/vstinner[1377 chars]ny\\n' != 'x\\ny\\n'\r\nE       - Error processing line 1 of /home/vstinner/myprojects/pythonci/work/cpython-3.8.3_coverage-5.1/coverage-5.1/.tox/py/lib64/python3.8/site-packages/subcover_gw1.pth:\r\nE       - \r\nE       -   Traceback (most recent call last):\r\nE       -     File \"/usr/lib64/python3.8/site.py\", line 169, in addpackage\r\nE       -       exec(line)\r\nE       -     File \"<string>\", line 1, in <module>\r\nE       -     File \"/home/vstinner/myprojects/pythonci/work/cpython-3.8.3_coverage-5.1/coverage-5.1/coverage/__init__.py\", line 15, in <module>\r\nE       -       from coverage.control import Coverage, process_startup\r\nE       -     File \"/home/vstinner/myprojects/pythonci/work/cpython-3.8.3_coverage-5.1/coverage-5.1/coverage/control.py\", line 15, in <module>\r\nE       -       from coverage.annotate import AnnotateReporter\r\nE       -     File \"/home/vstinner/myprojects/pythonci/work/cpython-3.8.3_coverage-5.1/coverage-5.1/coverage/annotate.py\", line 10, in <module>\r\nE       -       from coverage.files import flat_rootname\r\nE       -     File \"/home/vstinner/myprojects/pythonci/work/cpython-3.8.3_coverage-5.1/coverage-5.1/coverage/files.py\", line 17, in <module>\r\nE       -       from coverage.misc import contract, CoverageException, join_regex, isolate_module\r\nE       -     File \"/home/vstinner/myprojects/pythonci/work/cpython-3.8.3_coverage-5.1/coverage-5.1/coverage/misc.py\", line 60, in <module>\r\nE       -       from contracts import contract              # pylint: disable=unused-import\r\nE       -   ModuleNotFoundError: No module named 'contracts'\r\nE       - \r\nE       - Remainder of file ignored\r\nE         x\r\nE         y\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/997", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/997/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/997/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/997/events", "html_url": "https://github.com/nedbat/coveragepy/issues/997", "id": 635158149, "node_id": "MDU6SXNzdWU2MzUxNTgxNDk=", "number": 997, "title": "Support pyproject.toml for configuration", "user": {"login": "supakeen", "id": 39536295, "node_id": "MDQ6VXNlcjM5NTM2Mjk1", "avatar_url": "https://avatars2.githubusercontent.com/u/39536295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/supakeen", "html_url": "https://github.com/supakeen", "followers_url": "https://api.github.com/users/supakeen/followers", "following_url": "https://api.github.com/users/supakeen/following{/other_user}", "gists_url": "https://api.github.com/users/supakeen/gists{/gist_id}", "starred_url": "https://api.github.com/users/supakeen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/supakeen/subscriptions", "organizations_url": "https://api.github.com/users/supakeen/orgs", "repos_url": "https://api.github.com/users/supakeen/repos", "events_url": "https://api.github.com/users/supakeen/events{/privacy}", "received_events_url": "https://api.github.com/users/supakeen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-09T06:47:13Z", "updated_at": "2020-06-09T11:52:49Z", "closed_at": "2020-06-09T11:52:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\ncoverage-py currently uses its own configuration format in a .ini file. More and more projects are moving to support both, if the initial configuration doesn't exist then there is a check for a section in pyproject.toml. See for example the new implementation for pytest: https://docs.pytest.org/en/latest/customize.html#pyproject-toml\r\n\r\n**Describe the solution you'd like**\r\nI'd like to provide a PR if I can get @nedbat's blessing that this is a good idea:\r\n\r\n- Use .coveragerc if it exists\r\n- Check for a section called **tool.coveragepy.ini_options**\r\n- Use the values from there if it exists.\r\n- If not, default.\r\n\r\n**Additional context**\r\nThe **ini_options** is there for the same reasoning as pytest mentions in their documentation, if you ever, in the future wish to add toml-only configuration options and drop support for .coveragerc they could be added at the tool.coveragepy level.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/995", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/995/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/995/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/995/events", "html_url": "https://github.com/nedbat/coveragepy/issues/995", "id": 630844486, "node_id": "MDU6SXNzdWU2MzA4NDQ0ODY=", "number": 995, "title": "\"Relative path\" doesn't work with multiple packages mapped in Docker", "user": {"login": "eplodn", "id": 32124903, "node_id": "MDQ6VXNlcjMyMTI0OTAz", "avatar_url": "https://avatars0.githubusercontent.com/u/32124903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eplodn", "html_url": "https://github.com/eplodn", "followers_url": "https://api.github.com/users/eplodn/followers", "following_url": "https://api.github.com/users/eplodn/following{/other_user}", "gists_url": "https://api.github.com/users/eplodn/gists{/gist_id}", "starred_url": "https://api.github.com/users/eplodn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eplodn/subscriptions", "organizations_url": "https://api.github.com/users/eplodn/orgs", "repos_url": "https://api.github.com/users/eplodn/repos", "events_url": "https://api.github.com/users/eplodn/events{/privacy}", "received_events_url": "https://api.github.com/users/eplodn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-04T13:51:46Z", "updated_at": "2020-06-04T17:57:26Z", "closed_at": "2020-06-04T17:57:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nSince \"relative path\" assumes one-to-many relationship between source files in the reporting station and source files in the collecting station[s], this does not work in certain scenarios.\r\nIn my [example repo](https://github.com/eplodn/coverage_test), I use Coverage API in the main module to collect coverage from tests that are done using `curl`.\r\n\r\nNo matter what I write later in `.coveragerc`, it won't work easily because of a specific mappings inside `docker`. In my example, `./py_packages/` has two packages, `app` and `infra`. The code for `app` resides in `./py_packages/app/app` and the code for infra resides in `./py_packages/infra/infra`. I map these two as `/eplodn/app` and `/eplodn/infra`. \r\n\r\nAs per documentation:\r\n```\r\nThe first value must be an actual file path on the machine where the reporting \r\nwill happen, so that source code can be found. \r\n```\r\nIf in the first value I use `./py_packages/app/app/`, `coverage` won't find the source code for `infra`. If I use `./py_packages/infra/infra/`, `coverage` won't find the source code for `app`.\r\n\r\nThis however is how we (and most, to the best of my understanding) are organizing their packages, so after `pip install` -ling them one can use `from infra import utils` and not `from infra.infra import utils`. Mapping the folders inside docker container is useful so you can just update the code outside and re-run the app inside, and not need to rebuild/redeploy the containers. \r\n\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n```\r\ngit clone git@github.com:eplodn/coverage_test.git\r\ncd coverage_test\r\n./1_docker_build.sh\r\n./2_docker_run.sh\r\n./3_test.sh\r\n./4_docker_stop.sh\r\n./5_coverage.sh\r\n```\r\n\"docker build\" is using [`dumb-init`](https://github.com/Yelp/dumb-init) to pass signals to other processes so these can react.\r\n\r\n Don't just link to a failing CI job. Answer the questions below:\r\n1. What version of Python are you using?\r\n    Using `FROM python:3` so latest python (3.8.3)\r\n1. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n    Using `pip install coverage` so latest (5.1)\r\n1. What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\n    See the repo.\r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\n    As above.\r\n1. What commands did you run?\r\n    See the repo.\r\n\r\n**Expected behavior**\r\nExpected to get a coverage report :-\\\r\n\r\n**Additional context**\r\nIn our scenario, multiple containers are going up, all having these package installed, and these (and other) containers are invoking the code inside. For a better reproduction, imagine having three containers with `app`, each answering one `curl` call; I however left that out for simplicity sake.\r\n\r\nAnother question that rises: is there a way to leave un-combined coverage files where they were afer `coverage combine`, so that I may explore a possibility of combining them several times using a different `.coveragerc` each time.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/994", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/994/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/994/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/994/events", "html_url": "https://github.com/nedbat/coveragepy/issues/994", "id": 628546571, "node_id": "MDU6SXNzdWU2Mjg1NDY1NzE=", "number": 994, "title": "Coverage Report not generated Python3.6 ", "user": {"login": "nikul-serpentcs", "id": 17664321, "node_id": "MDQ6VXNlcjE3NjY0MzIx", "avatar_url": "https://avatars1.githubusercontent.com/u/17664321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikul-serpentcs", "html_url": "https://github.com/nikul-serpentcs", "followers_url": "https://api.github.com/users/nikul-serpentcs/followers", "following_url": "https://api.github.com/users/nikul-serpentcs/following{/other_user}", "gists_url": "https://api.github.com/users/nikul-serpentcs/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikul-serpentcs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikul-serpentcs/subscriptions", "organizations_url": "https://api.github.com/users/nikul-serpentcs/orgs", "repos_url": "https://api.github.com/users/nikul-serpentcs/repos", "events_url": "https://api.github.com/users/nikul-serpentcs/events{/privacy}", "received_events_url": "https://api.github.com/users/nikul-serpentcs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321136, "node_id": "MDU6TGFiZWw5NzMzMjExMzY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/question", "name": "question", "color": "bbaaff", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-01T15:53:36Z", "updated_at": "2020-07-06T18:56:23Z", "closed_at": "2020-07-06T18:56:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI installed paython3.6 and Successfully installed coverage-5.1 version\r\n\r\nWhenever I run the python test file with **coverage run**\r\nlike. **python3.6 -m coverage run test_code.py**\r\n\r\n**Error** \r\nCouldn't read data from '/home/.coverage': CoverageException: Doesn't seem to be a coverage.py data file\r\n\r\n\r\nHow to solve this issue??", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/990", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/990/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/990/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/990/events", "html_url": "https://github.com/nedbat/coveragepy/issues/990", "id": 623121983, "node_id": "MDU6SXNzdWU2MjMxMjE5ODM=", "number": 990, "title": "Analysis fail on unicode characters on pyproject.toml ON WINDOWS only", "user": {"login": "staticdev", "id": 1446633, "node_id": "MDQ6VXNlcjE0NDY2MzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/1446633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/staticdev", "html_url": "https://github.com/staticdev", "followers_url": "https://api.github.com/users/staticdev/followers", "following_url": "https://api.github.com/users/staticdev/following{/other_user}", "gists_url": "https://api.github.com/users/staticdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/staticdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/staticdev/subscriptions", "organizations_url": "https://api.github.com/users/staticdev/orgs", "repos_url": "https://api.github.com/users/staticdev/repos", "events_url": "https://api.github.com/users/staticdev/events{/privacy}", "received_events_url": "https://api.github.com/users/staticdev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-22T10:45:44Z", "updated_at": "2020-07-06T15:06:14Z", "closed_at": "2020-05-23T17:44:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nIf you add coverage with toml extra and have unicode characters on your pyproject.toml you get enconding error on coverage analysis on Windows only.\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  \r\n1. What version of Python are you using? 3.8.2\r\n1. What version of coverage.py are you using?\r\n\r\n```\r\n# coverage debug sys\r\n-- sys -------------------------------------------------------\r\n                        version: 5.1\r\n                       coverage: /home/static/.cache/pypoetry/virtualenvs/toml-validator-zr_HNKMd-py3.8/lib/python3.8/site-packages/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: available\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                                 setup.cfg\r\n                                 tox.ini\r\n                                 pyproject.toml\r\n                   configs_read: /home/static/workspace/toml-validator/pyproject.toml\r\n                    config_file: /home/static/workspace/toml-validator/pyproject.toml\r\n                config_contents: '[tool.poetry]\\nname = \"toml-validator\"\\nversion = \"1.3.1\"\\ndescription = \"Simple TOML file validator using Python.\"\\nauthors = [\"Thiago Carvalho D\\'\u00c1vila <thiagocavila@gmail.com>\"]\\nlicense = \"MIT\"\\nreadme = \"README.md\"\\nrepository = \"https://github.com/staticdev/toml-validator\"\\nhomepage = \"https://github.com/staticdev/toml-validator\"\\n\\n[tool.poetry.dependencies]\\npython = \"^3.7\"\\ntomlkit = \">=0.5.9,<0.7.0\"\\nclick = \"^7.0\"\\nimportlib_metadata = {version = \"^1.6.0\", python = \"<3.8\"}\\n\\n[tool.poetry.dev-dependencies]\\npytest = \"^5.4.2\"\\ncoverage = {extras = [\"toml\"], version = \"^5.0.3\"}\\nblack = \"^19.10b0\"\\nflake8 = \"^3.8.1\"\\nflake8-bandit = \"^2.1.2\"\\nflake8-black = \"^0.2.0\"\\nflake8-bugbear = \"^20.1.4\"\\nsafety = \"^1.8.5\"\\nmypy = \"^0.770\"\\ncodecov = \"^2.1.1\"\\npytest-mock = \"^3.0.0\"\\ntypeguard = \"^2.7.1\"\\npre-commit = \"^2.4.0\"\\n\\n[tool.poetry.scripts]\\ntoml-validator = \"toml_validator.__main__:main\"\\n\\n[tool.coverage.paths]\\nsource = [\"src\", \"*/site-packages\"] # configure source tree layout\\n\\n[tool.coverage.run]\\nbranch = true # enable branch analysis\\nsource = [\"toml_validator\"] # configure package name\\n\\n[tool.coverage.report]\\nshow_missing = true\\nfail_under = 100\\n\\n[build-system]\\nrequires = [\"poetry>=0.12\"]\\nbuild-backend = \"poetry.masonry.api\"\\n'\r\n                      data_file: -none-\r\n                         python: 3.8.2 (default, Apr  5 2020, 18:58:01) [GCC 9.2.1 20191008]\r\n                       platform: Linux-5.4.0-31-generic-x86_64-with-glibc2.29\r\n                 implementation: CPython\r\n                     executable: /home/static/.cache/pypoetry/virtualenvs/toml-validator-zr_HNKMd-py3.8/bin/python\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n                            pid: 6371\r\n                            cwd: /home/static/workspace/toml-validator\r\n                           path: /home/static/.cache/pypoetry/virtualenvs/toml-validator-zr_HNKMd-py3.8/bin\r\n                                 /home/static/.pyenv/versions/3.8.2/lib/python38.zip\r\n                                 /home/static/.pyenv/versions/3.8.2/lib/python3.8\r\n                                 /home/static/.pyenv/versions/3.8.2/lib/python3.8/lib-dynload\r\n                                 /home/static/.cache/pypoetry/virtualenvs/toml-validator-zr_HNKMd-py3.8/lib/python3.8/site-packages\r\n                                 /home/static/workspace/toml-validator/src\r\n                    environment: PYENV_DIR = /home/static/.poetry/bin\r\n                                 PYENV_HOOK_PATH = /home/static/.pyenv/pyenv.d:/usr/local/etc/pyenv.d:/etc/pyenv.d:/usr/lib/pyenv/hooks:/home/static/.pyenv/plugins/pyenv-virtualenv/etc/pyenv.d:/home/static/.pyenv/plugins/pyenv-which-ext/etc/pyenv.d\r\n                                 PYENV_ROOT = /home/static/.pyenv\r\n                                 PYENV_SHELL = bash\r\n                                 PYENV_VERSION = 3.8.2:3.7.6\r\n                                 PYENV_VIRTUALENV_INIT = 1\r\n                   command_line: /home/static/.cache/pypoetry/virtualenvs/toml-validator-zr_HNKMd-py3.8/bin/coverage debug sys\r\n                sqlite3_version: 2.6.0\r\n         sqlite3_sqlite_version: 3.31.1\r\n             sqlite3_temp_store: 0\r\n        sqlite3_compile_options: COMPILER=gcc-9.3.0\r\n                                 ENABLE_COLUMN_METADATA\r\n                                 ENABLE_DBSTAT_VTAB\r\n                                 ENABLE_FTS3\r\n                                 ENABLE_FTS3_PARENTHESIS\r\n                                 ENABLE_FTS3_TOKENIZER\r\n                                 ENABLE_FTS4\r\n                                 ENABLE_FTS5\r\n                                 ENABLE_JSON1\r\n                                 ENABLE_LOAD_EXTENSION\r\n                                 ENABLE_PREUPDATE_HOOK\r\n                                 ENABLE_RTREE\r\n                                 ENABLE_SESSION\r\n                                 ENABLE_STMTVTAB\r\n                                 ENABLE_UNLOCK_NOTIFY\r\n                                 ENABLE_UPDATE_DELETE_LIMIT\r\n                                 HAVE_ISNAN\r\n                                 LIKE_DOESNT_MATCH_BLOBS\r\n                                 MAX_SCHEMA_RETRY=25\r\n                                 MAX_VARIABLE_NUMBER=250000\r\n                                 OMIT_LOOKASIDE\r\n                                 SECURE_DELETE\r\n                                 SOUNDEX\r\n                                 TEMP_STORE=1\r\n                                 THREADSAFE=1\r\n                                 USE_URI\r\n\r\n```\r\n\r\n1. What versions of what packages do you have installed? \r\n\r\n```\r\n# pip freeze\r\nappdirs==1.4.4\r\nattrs==19.3.0\r\nbandit==1.6.2\r\nblack==19.10b0\r\ncertifi==2020.4.5.1\r\ncfgv==3.1.0\r\nchardet==3.0.4\r\nclick==7.1.2\r\ncodecov==2.1.1\r\ncoverage==5.1\r\ndistlib==0.3.0\r\ndparse==0.5.1\r\nentrypoints==0.3\r\nfilelock==3.0.12\r\nflake8==3.8.1\r\nflake8-bandit==2.1.2\r\nflake8-black==0.2.0\r\nflake8-bugbear==20.1.4\r\nflake8-polyfill==1.0.2\r\ngitdb==4.0.5\r\nGitPython==3.1.2\r\nidentify==1.4.15\r\nidna==2.9\r\nmccabe==0.6.1\r\nmore-itertools==8.3.0\r\nmypy==0.770\r\nmypy-extensions==0.4.3\r\nnodeenv==1.3.5\r\npackaging==20.4\r\npathspec==0.8.0\r\npbr==5.4.5\r\npipenv==2018.11.26\r\npluggy==0.13.1\r\npre-commit==2.4.0\r\npy==1.8.1\r\npycodestyle==2.6.0\r\npyflakes==2.2.0\r\npyparsing==2.4.7\r\npytest==5.4.2\r\npytest-mock==3.1.0\r\nPyYAML==5.3.1\r\nregex==2020.5.14\r\nrequests==2.23.0\r\nsafety==1.9.0\r\nsix==1.14.0\r\nsmmap==3.0.4\r\nstevedore==1.32.0\r\ntoml==0.10.1\r\n-e git+https://github.com/staticdev/toml-validator.git@85ed311bc393956045316d7857470956d3e338ed#egg=toml_validator\r\ntomlkit==0.6.0\r\ntyped-ast==1.4.1\r\ntypeguard==2.7.1\r\ntyping-extensions==3.7.4.2\r\nurllib3==1.25.9\r\nvirtualenv==20.0.21\r\nvirtualenv-clone==0.5.4\r\nwcwidth==0.1.9\r\n\r\n```\r\n1. What code are you running?  \r\nSee Github actions output from this pull request: https://github.com/staticdev/toml-validator/pull/51\r\n\r\n1. What commands did you run?\r\n`coverage run --parallel -m pytest`\r\n\r\n### Please note that if you change the author name that has the character \u00c1 in \u00c1vila from pyproject.toml, the error goes away!\r\n\r\n**Expected behavior**\r\nNo error at all.\r\n\r\n**Additional context**\r\nAnother package that had exactly the same [issue](https://github.com/pre-commit/pre-commit-hooks/issues/474) has the following fix: https://github.com/pre-commit/pre-commit-hooks/pull/479/files\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/988", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/988/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/988/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/988/events", "html_url": "https://github.com/nedbat/coveragepy/issues/988", "id": 615813315, "node_id": "MDU6SXNzdWU2MTU4MTMzMTU=", "number": 988, "title": "coverage run fails with a `re.error` with Python 3.9a6+", "user": {"login": "pquentin", "id": 42327, "node_id": "MDQ6VXNlcjQyMzI3", "avatar_url": "https://avatars1.githubusercontent.com/u/42327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pquentin", "html_url": "https://github.com/pquentin", "followers_url": "https://api.github.com/users/pquentin/followers", "following_url": "https://api.github.com/users/pquentin/following{/other_user}", "gists_url": "https://api.github.com/users/pquentin/gists{/gist_id}", "starred_url": "https://api.github.com/users/pquentin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pquentin/subscriptions", "organizations_url": "https://api.github.com/users/pquentin/orgs", "repos_url": "https://api.github.com/users/pquentin/repos", "events_url": "https://api.github.com/users/pquentin/events{/privacy}", "received_events_url": "https://api.github.com/users/pquentin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1784642395, "node_id": "MDU6TGFiZWwxNzg0NjQyMzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/not-our-bug", "name": "not-our-bug", "color": "b997e5", "default": false, "description": "The problem was elsewhere"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-11T11:32:09Z", "updated_at": "2020-05-12T11:04:15Z", "closed_at": "2020-05-12T11:02:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "`coverage run` fails with a `re.error` in Python nightly\r\n\r\n**To Reproduce**\r\n\r\n1. Python version: 3.9.0a6+ (heads/master:85bdec1, May 10 2020, 05:50:51) \r\n1. coverage 5.1\r\n1. This failed in the CI build of urllib3 (https://github.com/urllib3/urllib3/blob/master/.travis.yml) which runs `nox -s test-3.9`\r\n1. `coverage run --parallel-mode -m pytest -r a --tb=native --no-success-flaky-report test/`\r\n\r\nSorry, I did not try this outside of a failing CI job: https://travis-ci.org/github/urllib3/urllib3/jobs/685596004\r\n\r\nBy comparing the last known good build, I can tell that the problem has been introduced in one of those commits: https://github.com/python/cpython/compare/f01d1be97d740ea0369379ca305646a26694236e...85bdec1def789cdb60ab7ffe115e426267b00a60\r\n\r\n**Expected behavior**\r\n\r\nI would expect the tests to run.\r\n\r\n**Additional context**\r\n\r\nInstead, I get the following traceback:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/travis/build/urllib3/urllib3/.nox/test-3-9/bin/coverage\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/home/travis/build/urllib3/urllib3/.nox/test-3-9/lib/python3.9/site-packages/coverage/cmdline.py\", line 827, in main\r\n    status = CoverageScript().command_line(argv)\r\n  File \"/home/travis/build/urllib3/urllib3/.nox/test-3-9/lib/python3.9/site-packages/coverage/cmdline.py\", line 555, in command_line\r\n    return self.do_run(options, args)\r\n  File \"/home/travis/build/urllib3/urllib3/.nox/test-3-9/lib/python3.9/site-packages/coverage/cmdline.py\", line 700, in do_run\r\n    self.coverage.start()\r\n  File \"/home/travis/build/urllib3/urllib3/.nox/test-3-9/lib/python3.9/site-packages/coverage/control.py\", line 525, in start\r\n    self._init_for_start()\r\n  File \"/home/travis/build/urllib3/urllib3/.nox/test-3-9/lib/python3.9/site-packages/coverage/control.py\", line 487, in _init_for_start\r\n    self._inorout.configure(self.config)\r\n  File \"/home/travis/build/urllib3/urllib3/.nox/test-3-9/lib/python3.9/site-packages/coverage/inorout.py\", line 192, in configure\r\n    self.omit_match = FnmatchMatcher(self.omit)\r\n  File \"/home/travis/build/urllib3/urllib3/.nox/test-3-9/lib/python3.9/site-packages/coverage/files.py\", line 273, in __init__\r\n    self.re = fnmatches_to_regex(self.pats, case_insensitive=env.WINDOWS)\r\n  File \"/home/travis/build/urllib3/urllib3/.nox/test-3-9/li/python3.9/site-packages/coverage/files.py\", line 325, in fnmatches_to_regex\r\n    compiled = re.compile(join_regex(regexes), flags=flags)\r\n  File \"/opt/python/3.9-dev/lib/python3.9/re.py\", line 252, in compile\r\n    return _compile(pattern, flags)\r\n  File \"/opt/python/3.9-dev/lib/python3.9/re.py\", line 304, in _compile\r\n    p = sre_compile.compile(pattern, flags)\r\n  File \"/opt/python/3.9-dev/lib/python3.9/sre_compile.py\", line 764, in compile\r\n    p = sre_parse.parse(p, flags)\r\n  File \"/opt/python/3.9-dev/lib/python3.9/sre_parse.py\", line 948, in parse\r\n    p = _parse_sub(source, state, flags & SRE_FLAG_VERBOSE, 0)\r\n  File \"/opt/python/3.9-dev/lib/python3.9/sre_parse.py\", line 443, in _parse_sub\r\n    itemsappend(_parse(source, state, verbose, nested + 1,\r\n  File \"/opt/python/3.9-dev/lib/python3.9/sre_parse.py\", line 834, in _parse\r\n    p = _parse_sub(source, state, sub_verbose, nested + 1)\r\n  File \"/opt/python/3.9-dev/lib/python3.9/sre_parse.py\", line 443, in _parse_sub\r\n    itemsappend(_parse(source, state, verbose, nested + 1,\r\n  File \"/opt/python/3.9-dev/lib/python3.9/sre_parse.py\", line 834, in _parse\r\n    p = _parse_sub(source, state, sub_verbose, nested + 1)\r\n  File \"/opt/python/3.9-dev/lib/python3.9/sre_parse.py\", line 443, in _parse_sub\r\n    itemsappend(_parse(source, state, verbose, nested + 1,\r\n  File \"/opt/python/3.9-dev/lib/python3.9/sre_parse.py\", line 754, in _parse\r\n    p = _parse_sub(source, state, verbose, nested + 1)\r\n  File \"/opt/python/3.9-dev/lib/python3.9/sre_parse.py\", line 443, in _parse_sub\r\n    itemsappend(_parse(source, state, verbose, nested + 1,\r\n  File \"/opt/python/3.9-dev/lib/python3.9/sre_parse.py\", line 831, in _parse\r\n    raise source.error(err.msg, len(name) + 1) from None\r\nre.error: redefinition of group name 'g1' as group 2; was group 1 at position 284\r\n```\r\n\r\nSince the traceback is fully in coverage.py, I expect that the details about urllib3 are irrelevant.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/987", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/987/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/987/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/987/events", "html_url": "https://github.com/nedbat/coveragepy/issues/987", "id": 615463957, "node_id": "MDU6SXNzdWU2MTU0NjM5NTc=", "number": 987, "title": "Missing line should be considered", "user": {"login": "staticdev", "id": 1446633, "node_id": "MDQ6VXNlcjE0NDY2MzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/1446633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/staticdev", "html_url": "https://github.com/staticdev", "followers_url": "https://api.github.com/users/staticdev/followers", "following_url": "https://api.github.com/users/staticdev/following{/other_user}", "gists_url": "https://api.github.com/users/staticdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/staticdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/staticdev/subscriptions", "organizations_url": "https://api.github.com/users/staticdev/orgs", "repos_url": "https://api.github.com/users/staticdev/repos", "events_url": "https://api.github.com/users/staticdev/events{/privacy}", "received_events_url": "https://api.github.com/users/staticdev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321126, "node_id": "MDU6TGFiZWw5NzMzMjExMjY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-10T19:53:40Z", "updated_at": "2020-05-10T20:17:50Z", "closed_at": "2020-05-10T20:17:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI have a simple method that receives a list of trades (descriptions and ids) and return the id of selected ones. If none is selected, you are asked to confirm that. I've made two tests that covers the basic functionality and it says one line is missing that shouldn't.\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*. Don't just link to a failing CI job. Answer the questions below:\r\n1. What version of Python are you using? 3.8.2.\r\n1. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n```\r\n-- sys -------------------------------------------------------\r\n                        version: 5.0.3\r\n                       coverage: /home/static/.local/lib/python3.8/site-packages/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: available\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                                 setup.cfg\r\n                                 tox.ini\r\n                                 pyproject.toml\r\n                   configs_read: -none-\r\n                    config_file: None\r\n                config_contents: -none-\r\n                      data_file: -none-\r\n                         python: 3.8.2 (default, Apr 27 2020, 15:53:34) [GCC 9.3.0]\r\n                       platform: Linux-5.4.0-29-generic-x86_64-with-glibc2.29\r\n                 implementation: CPython\r\n                     executable: /usr/bin/python3\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n                            pid: 23395\r\n                            cwd: /home/static/workspace/stackoverflow\r\n                           path: /home/static/.local/bin\r\n                                 /usr/lib/python38.zip\r\n                                 /usr/lib/python3.8\r\n                                 /usr/lib/python3.8/lib-dynload\r\n                                 /home/static/.local/lib/python3.8/site-packages\r\n                                 /usr/local/lib/python3.8/dist-packages\r\n                                 /usr/lib/python3/dist-packages\r\n                    environment: PYENV_SHELL = bash\r\n                                 PYENV_VIRTUALENV_INIT = 1\r\n                   command_line: /home/static/.local/bin/coverage debug sys\r\n                sqlite3_version: 2.6.0\r\n         sqlite3_sqlite_version: 3.31.1\r\n        sqlite3_compile_options: COMPILER=gcc-9.3.0\r\n                                 ENABLE_COLUMN_METADATA\r\n                                 ENABLE_DBSTAT_VTAB\r\n                                 ENABLE_FTS3\r\n                                 ENABLE_FTS3_PARENTHESIS\r\n                                 ENABLE_FTS3_TOKENIZER\r\n                                 ENABLE_FTS4\r\n                                 ENABLE_FTS5\r\n                                 ENABLE_JSON1\r\n                                 ENABLE_LOAD_EXTENSION\r\n                                 ENABLE_PREUPDATE_HOOK\r\n                                 ENABLE_RTREE\r\n                                 ENABLE_SESSION\r\n                                 ENABLE_STMTVTAB\r\n                                 ENABLE_UNLOCK_NOTIFY\r\n                                 ENABLE_UPDATE_DELETE_LIMIT\r\n                                 HAVE_ISNAN\r\n                                 LIKE_DOESNT_MATCH_BLOBS\r\n                                 MAX_SCHEMA_RETRY=25\r\n                                 MAX_VARIABLE_NUMBER=250000\r\n                                 OMIT_LOOKASIDE\r\n                                 SECURE_DELETE\r\n                                 SOUNDEX\r\n                                 TEMP_STORE=1\r\n                                 THREADSAFE=1\r\n                                 USE_URI\r\n```\r\n1. What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\n```\r\nalabaster==0.7.12\r\nappdirs==1.4.3\r\nargcomplete==1.11.1\r\nargh==0.26.2\r\nastroid==2.3.3\r\nattrs==19.3.0\r\nBabel==2.8.0\r\nblessings==1.7\r\ncertifi==2020.4.5.1\r\ncfgv==3.1.0\r\nchardet==3.0.4\r\nclick==7.1.1\r\ncodecov==2.0.15\r\ncolorlog==4.1.0\r\ncoverage==5.0.3\r\ndecorator==4.4.1\r\ndistlib==0.3.0\r\ndocutils==0.16\r\nfilelock==3.0.12\r\ngrpc-tools==0.0.1\r\ngrpcio==1.27.2\r\ngrpcio-tools==1.27.2\r\nidentify==1.4.15\r\nidna==2.9\r\nimagesize==1.2.0\r\nimportlab==0.5.1\r\ninquirer==2.6.3\r\nisort==4.3.21\r\nJinja2==2.11.2\r\nlazy-object-proxy==1.4.3\r\nlivereload==2.6.1\r\nMarkupSafe==1.1.1\r\nmccabe==0.6.1\r\nmore-itertools==8.2.0\r\nnetworkx==2.4\r\nninja==1.9.0.post1\r\nnodeenv==1.3.5\r\nnox==2019.11.9\r\nnumpy==1.18.2\r\npackaging==20.3\r\npandas==1.0.3\r\npathtools==0.1.2\r\npluggy==0.13.1\r\nport-for==0.3.1\r\npre-commit==2.3.0\r\nprotobuf==3.11.3\r\npy==1.8.1\r\npycodestyle==2.5.0\r\nPygments==2.6.1\r\npylint==2.4.4\r\npyparsing==2.4.7\r\npytest==5.4.2\r\npytest-mock==3.0.0\r\npython-dateutil==2.8.1\r\npython-editor==1.0.4\r\npytz==2019.3\r\nPyYAML==5.3.1\r\nreadchar==2.0.1\r\nrequests==2.23.0\r\nrope==0.16.0\r\nrstcheck==3.3.1\r\nsix==1.14.0\r\nsnowballstemmer==2.0.0\r\nSphinx==3.0.3\r\nsphinx-autobuild==0.7.1\r\nsphinxcontrib-applehelp==1.0.2\r\nsphinxcontrib-devhelp==1.0.2\r\nsphinxcontrib-htmlhelp==1.0.3\r\nsphinxcontrib-jsmath==1.0.1\r\nsphinxcontrib-qthelp==1.0.3\r\nsphinxcontrib-serializinghtml==1.1.4\r\ntoml==0.10.0\r\ntomlkit==0.5.11\r\ntornado==6.0.4\r\ntyped-ast==1.4.1\r\nurllib3==1.25.9\r\nvirtualenv==20.0.20\r\nwatchdog==0.10.2\r\nwcwidth==0.1.9\r\nwrapt==1.11.2\r\nxlrd==1.2.0\r\n```\r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\n```python\r\n# question.py\r\nfrom typing import List, Tuple\r\nimport inquirer\r\n\r\ndef select_trades(trades: List[Tuple[str, int]]) -> List[int]:\r\n    while True:\r\n        selection = inquirer.prompt(\r\n            [\r\n                inquirer.Checkbox(\r\n                    \"trades\",\r\n                    message=(\r\n                        \"Select auction trades? \"\r\n                        \"(press space to select and enter to finish)\"\r\n                    ),\r\n                    choices=trades,\r\n                )\r\n            ]\r\n        )[\"trades\"]\r\n        if len(selection) == 0:\r\n            answer = inquirer.prompt(\r\n                [\r\n                    inquirer.List(\r\n                        \"\",\r\n                        message=\"No trade selected.\\nDo you confirm?\",\r\n                        choices=[\"Yes\", \"No\"],\r\n                    )\r\n                ]\r\n            )[\"\"]\r\n            if answer == \"Yes\":\r\n                return []\r\n        else:\r\n            break\r\n    return selection\r\n```\r\nTest code:\r\n```python\r\n# test_problem.py\r\nfrom unittest.mock import patch\r\n\r\nfrom problem import select_trades\r\n\r\n@patch(\r\n    \"inquirer.prompt\",\r\n    side_effect=[{\"trades\": []}, {\"\": \"No\"}, {\"trades\": []}, {\"\": \"Yes\"}],\r\n)\r\ndef test_select_trades_empty(mock_inquirer_prompt) -> None:\r\n    trades = [(\"trade 1\", 0), (\"trade 2\", 1)]\r\n    assert select_trades(trades) == []\r\n\r\n\r\n@patch(\"inquirer.prompt\", return_value={\"trades\": [1]})\r\ndef test_select_trades_some_selected(mock_inquirer_prompt) -> None:\r\n    trades = [(\"trade 1\", 0), (\"trade 2\", 1)]\r\n    assert select_trades(trades) == [1]\r\n```\r\n\r\n1. What commands did you run?\r\n```\r\ncoverage run --source=. -m pytest\r\ncoverage report\r\ncoverage html\r\n```\r\n\r\n**Expected behavior**\r\n100% test coverage.\r\n\r\n**Additional context**\r\nFor some reason, coverage is saying that the `break` like is not covered, but in the second test case, the `while True` breaks and return the expected value for the test. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/983", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/983/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/983/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/983/events", "html_url": "https://github.com/nedbat/coveragepy/issues/983", "id": 611209914, "node_id": "MDU6SXNzdWU2MTEyMDk5MTQ=", "number": 983, "title": "tests/gold/html/Makefile uses bashism", "user": {"login": "rillig", "id": 3233724, "node_id": "MDQ6VXNlcjMyMzM3MjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/3233724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rillig", "html_url": "https://github.com/rillig", "followers_url": "https://api.github.com/users/rillig/followers", "following_url": "https://api.github.com/users/rillig/following{/other_user}", "gists_url": "https://api.github.com/users/rillig/gists{/gist_id}", "starred_url": "https://api.github.com/users/rillig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rillig/subscriptions", "organizations_url": "https://api.github.com/users/rillig/orgs", "repos_url": "https://api.github.com/users/rillig/repos", "events_url": "https://api.github.com/users/rillig/events{/privacy}", "received_events_url": "https://api.github.com/users/rillig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-05-02T15:09:40Z", "updated_at": "2020-06-28T20:52:56Z", "closed_at": "2020-06-28T20:52:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe `[[` keyword only exists in bash, not in other shells.\r\nIt should be replaced with a simple `[`, and the filename should be enclosed in double quotes.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/980", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/980/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/980/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/980/events", "html_url": "https://github.com/nedbat/coveragepy/issues/980", "id": 608483053, "node_id": "MDU6SXNzdWU2MDg0ODMwNTM=", "number": 980, "title": "fail_under in .coveragerc does not raise error django 3.0.4", "user": {"login": "prausinski", "id": 37984034, "node_id": "MDQ6VXNlcjM3OTg0MDM0", "avatar_url": "https://avatars1.githubusercontent.com/u/37984034?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prausinski", "html_url": "https://github.com/prausinski", "followers_url": "https://api.github.com/users/prausinski/followers", "following_url": "https://api.github.com/users/prausinski/following{/other_user}", "gists_url": "https://api.github.com/users/prausinski/gists{/gist_id}", "starred_url": "https://api.github.com/users/prausinski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prausinski/subscriptions", "organizations_url": "https://api.github.com/users/prausinski/orgs", "repos_url": "https://api.github.com/users/prausinski/repos", "events_url": "https://api.github.com/users/prausinski/events{/privacy}", "received_events_url": "https://api.github.com/users/prausinski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-28T17:18:47Z", "updated_at": "2020-04-29T01:49:03Z", "closed_at": "2020-04-29T01:49:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "HI!\r\n**Describe the bug**\r\nI configure the coverage.py through .coveragerc file (see below). I can see that coverage does the things I configure in coveragerc accordingly despite fail_under parameter. When defining the fail_under = 99.0 (both int and float does not work) parameter the coverage report command does not exit with a \"fail\" or something. Furthermore, using the option in the command `coverage report --fail-under=99` does not raise a failure or something.\r\n\r\n**To Reproduce**\r\nUnfortunately, I cannot share the code through a repository or something. The thing is that the commands which I'm running do work the way they should do. However, I want the 'coverage report' respectively the `coverage report --fail-under=99` command to fail or exit with failures linked to the threshold via fail_under = 99.0 (that I can use for Jenkins Pipeline later).\r\nHowever, it is a basic Django 3.0.4 project with no extra magic using Django REST Framework 3.11. I did my first steps with django-nose in this project but then realized that django-nose is not properly supported anymore. So I decided to switch to \"pure coverage\" (this is why in pip freeze the django-nose is still listed) \r\n\r\nStructure:\r\n./app\r\n    /app/customer_db\r\n    /app/core\r\n    /app/api\r\n    /app/user\r\n./manage.py\r\n./coveragerc\r\n\r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\n\r\nCommands:\r\n1. `coverage run manage.py test`\r\n```\r\nOUTPUT:\r\nRan 166 tests in 7.632s\r\n\r\nOK\r\nDestroying test database for alias 'default'...\r\n```\r\n\r\n2. `coverage report`\r\nOUTPUT:\r\n```\r\nName                                                                  Stmts   Miss Branch BrPart    Cover   Missing\r\n-------------------------------------------------------------------------------------------------------------------\r\napp/customer_db/validators.py                                            45     21     16      2    49.2%   32->33, 33, 40->50, 50-75, 79-90\r\napp/user/authentication.py                                               34     12      6      1    57.5%   34->35, 35-36, 49-61\r\napp/user/migrations/0002_groups.py                                       24      2      6      1    83.3%   14->28, 28-29\r\napp/customer_db/models.py                                               147     14     16      4    89.0%   36, 57, 87->88, 88, 109, 132, 135->136, 136, 179->180, 180, 190, 214, 224, 275->276, 276, 295, 318, 325\r\n\r\n\r\netc. etc. etc.\r\n\r\n\r\n-------------------------------------------------------------------------------------------------------------------\r\nTOTAL                                                                  1214     79    170     18    92.0%\r\n\r\n14 empty files skipped.\r\n```\r\npython --version:\r\n`Python 3.6.7`\r\n\r\npip freeze: \r\n```\r\nasgiref==3.2.5\r\ncertifi==2019.11.28\r\nclick==7.1.1\r\ncoverage==5.1\r\nDjango==3.0.4\r\ndjango-nose==1.4.6\r\ndjango-simple-history==2.8.0\r\ndjangorestframework==3.11.0\r\nflake8==3.6.0\r\nfuzzywuzzy==0.18.0\r\ngeographiclib==1.50\r\ngeopy==1.21.0\r\ngunicorn==20.0.4\r\njoblib==0.14.1\r\nkph==0.4.1\r\nmccabe==0.6.1\r\nnltk==3.5\r\nnose==1.3.7\r\npsycopg2==2.7.7\r\npsycopg2-binary==2.8.4\r\npycodestyle==2.4.0\r\npyflakes==2.0.0\r\npython-Levenshtein==0.12.0\r\npytz==2019.3\r\nregex==2020.4.4\r\nsentry-sdk==0.14.2\r\nsix==1.14.0\r\nsqlparse==0.3.1\r\ntqdm==4.45.0\r\nurllib3==1.25.8\r\n\r\n```\r\nIn .coveragerc:\r\n```\r\n[run]\r\nbranch = true\r\ninclude =   ./app/api/*\r\n            ./app/core/*\r\n            ./app/customer_db/*\r\n            ./app/user/*\r\n[report]\r\nfail_under = 99.0\r\nomit = */tests/*\r\nprecision = 1\r\nshow_missing = true\r\nskip_empty = true\r\nsort = Cover\r\nignore_errors = true\r\n```\r\ncoverage debug sys:\r\n```\r\n                        version: 5.1\r\n                       coverage: User/dev/git_projects/mdm/mdm-backend/venv/lib/python3.6/site-packages/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: available\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                   configs_read: User/dev/git_projects/mdm/mdm-backend/app/.coveragerc\r\n                    config_file: User/dev/git_projects/mdm/mdm-backend/app/.coveragerc\r\n                config_contents: '# coverage run settings\\n[run]\\nbranch = true\\ninclude =   ./app/api/*\\n            ./app/core/*\\n            ./app/customer_db/*\\n            ./app/user/*\\n# coverage report settings\\n[report]\\nfail_under = 99.0\\nomit = */tests/*\\nprecision = 1\\nshow_missing = true\\nskip_empty = true\\nsort = Cover\\nignore_errors = true'\r\n                      data_file: -none-\r\n                         python: 3.6.7 (v3.6.7:6ec5cf24b7, Oct 20 2018, 00:28:22) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]\r\n                       platform: Darwin-19.3.0-x86_64-i386-64bit\r\n                 implementation: CPython\r\n                     executable: User/dev/git_projects/mdm/mdm-backend/venv/bin/python\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n                            pid: 15778\r\n                            cwd: User/dev/git_projects/mdm/mdm-backend/app\r\n                           path: User/dev/git_projects/mdm/mdm-backend/venv/bin\r\n                                 /Library/Frameworks/Python.framework/Versions/3.6/lib/python36.zip\r\n                                 /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6\r\n                                 /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/lib-dynload\r\n                                 User/dev/git_projects/mdm/mdm-backend/venv/lib/python3.6/site-packages\r\n                    environment: __PYVENV_LAUNCHER__ = User/dev/git_projects/mdm/mdm-backend/venv/bin/python\r\n                   command_line: User/dev/git_projects/mdm/mdm-backend/venv/bin/coverage debug sys\r\n                sqlite3_version: 2.6.0\r\n         sqlite3_sqlite_version: 3.22.0\r\n             sqlite3_temp_store: 0\r\n        sqlite3_compile_options: COMPILER=gcc-4.2.1 (Apple Inc. build 5666) (dot 3)\r\n                                 ENABLE_FTS3\r\n                                 ENABLE_FTS3_PARENTHESIS\r\n                                 ENABLE_FTS4\r\n                                 ENABLE_FTS5\r\n                                 ENABLE_JSON1\r\n                                 ENABLE_RTREE\r\n                                 THREADSAFE=1\r\n\r\n\r\n\r\n```\r\n\r\n**Expected behavior**\r\nWhen running coverage report after printing the list the command should according to the threshold defined through fail_under parameter in .coveragerc as well as in included in the command like coverage report --fail-under=99\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/979", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/979/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/979/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/979/events", "html_url": "https://github.com/nedbat/coveragepy/issues/979", "id": 605196935, "node_id": "MDU6SXNzdWU2MDUxOTY5MzU=", "number": 979, "title": "data_file option in Coverage.py", "user": {"login": "videetparekh", "id": 11225312, "node_id": "MDQ6VXNlcjExMjI1MzEy", "avatar_url": "https://avatars0.githubusercontent.com/u/11225312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/videetparekh", "html_url": "https://github.com/videetparekh", "followers_url": "https://api.github.com/users/videetparekh/followers", "following_url": "https://api.github.com/users/videetparekh/following{/other_user}", "gists_url": "https://api.github.com/users/videetparekh/gists{/gist_id}", "starred_url": "https://api.github.com/users/videetparekh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/videetparekh/subscriptions", "organizations_url": "https://api.github.com/users/videetparekh/orgs", "repos_url": "https://api.github.com/users/videetparekh/repos", "events_url": "https://api.github.com/users/videetparekh/events{/privacy}", "received_events_url": "https://api.github.com/users/videetparekh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-23T02:43:09Z", "updated_at": "2020-04-23T14:31:11Z", "closed_at": "2020-04-23T14:31:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n`coverage run` does not have a `--data_file` option, but it's mentioned in the docs.\r\n\r\n**To Reproduce**\r\n1. What version of Python are you using?\r\n`Python 3.6.9`\r\n2. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n```sh\r\n                        version: 5.0.4\r\n                       coverage: /usr/local/lib/python3.6/dist-packages/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: available\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                                 setup.cfg\r\n                                 tox.ini\r\n                                 pyproject.toml\r\n                   configs_read: -none-\r\n                    config_file: None\r\n                config_contents: -none-\r\n                      data_file: -none-\r\n                         python: 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\n                       platform: Linux-4.19.76-linuxkit-x86_64-with-Ubuntu-18.04-bionic\r\n                 implementation: CPython\r\n                     executable: /usr/bin/python3\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n```\r\n\r\n3. What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\n```\r\nabsl-py==0.9.0\r\nalabaster==0.7.12\r\nantlr4-python3-runtime==4.8\r\nasgiref==3.2.7\r\nasn1crypto==0.24.0\r\nastor==0.8.1\r\nastroid==2.3.3\r\nattrs==19.3.0\r\nBabel==2.8.0\r\nbackcall==0.1.0\r\nbeautifulsoup4==4.8.2\r\nbehave==1.2.6\r\nbleach==3.1.4\r\ncachetools==4.0.0\r\ncertifi==2019.11.28\r\nchardet==3.0.4\r\nClick==7.0\r\nclick-config-file==0.5.0\r\ncobertura-clover-transform==1.1.4.post1\r\ncolorama==0.4.1\r\nconfigobj==5.0.6\r\ncoverage==5.0.4\r\ncrcmod==1.7\r\ncryptography==2.1.4\r\ncycler==0.10.0\r\nCython==0.29.16\r\ndecorator==4.4.2\r\ndefusedxml==0.6.0\r\ndill==0.3.1.1\r\nDjango==3.0.5\r\ndload==0.6\r\ndocutils==0.16\r\nentrypoints==0.3\r\nflake8==3.7.9\r\nflake8-polyfill==1.0.2\r\nfuture==0.18.2\r\ngast==0.2.2\r\ngluoncv==0.6.0\r\ngoogle-auth==1.12.0\r\ngoogle-auth-oauthlib==0.4.1\r\ngoogle-pasta==0.2.0\r\ngrpcio==1.27.2\r\nh5py==2.10.0\r\nhickle==3.4.5\r\nidna==2.6\r\nimage==1.5.28\r\nimageio==2.6.1\r\nimagesize==1.2.0\r\nimportlib-metadata==1.6.0\r\nipykernel==5.2.0\r\nipython==7.13.0\r\nipython-genutils==0.2.0\r\nipywidgets==7.5.1\r\nisort==4.3.21\r\njedi==0.16.0\r\njeepney==0.4.3\r\nJinja2==2.11.1\r\njoblib==0.14.1\r\njsonschema==3.2.0\r\njupyter==1.0.0\r\njupyter-client==6.1.2\r\njupyter-console==6.1.0\r\njupyter-core==4.6.3\r\nKeras==2.3.1\r\nKeras-Applications==1.0.8\r\nKeras-Preprocessing==1.1.0\r\nkeyring==21.2.0\r\nkeyrings.alt==3.4.0\r\nkiwisolver==1.1.0\r\nlatentai-sdk==1.3.0.dev1\r\nlazy-object-proxy==1.4.3\r\nlxml==4.5.0\r\nmando==0.6.4\r\nMarkdown==3.2.1\r\nMarkupSafe==1.1.1\r\nmatplotlib==3.2.1\r\nmccabe==0.6.1\r\nmistune==0.8.4\r\nmore-itertools==8.2.0\r\nnbconvert==5.6.1\r\nnbformat==5.0.5\r\nnose==1.3.7\r\nnose-timer==1.0.0\r\nnotebook==6.0.3\r\nnumpy==1.17.0\r\nnumpydoc==0.9.2\r\noauthlib==3.1.0\r\nopencv-python==4.1.2.30\r\nopt-einsum==3.2.0\r\npackaging==20.3\r\npandocfilters==1.4.2\r\nparse==1.15.0\r\nparse-type==0.5.2\r\nparso==0.6.2\r\npbr==5.4.5\r\npexpect==4.8.0\r\npickleshare==0.7.5\r\nPillow==7.0.0\r\npkginfo==1.5.0.1\r\npluggy==0.13.1\r\nportalocker==1.6.0\r\nprometheus-client==0.7.1\r\nprompt-toolkit==3.0.5\r\nprotobuf==3.11.3\r\npsutil==5.6.7\r\nptyprocess==0.6.0\r\npy==1.8.1\r\npyasn1==0.4.8\r\npyasn1-modules==0.2.8\r\npycodestyle==2.5.0\r\npycrypto==2.6.1\r\npyflakes==2.1.1\r\nPygments==2.6.1\r\npygobject==3.26.1\r\npylint==2.4.4\r\npyparsing==2.4.6\r\npyrsistent==0.16.0\r\npytest==5.4.1\r\npytest-cov==2.8.1\r\npytest-mock==3.0.0\r\npytest-runner==5.2\r\npython-dateutil==2.8.1\r\npytz==2019.3\r\npyxdg==0.25\r\nPyYAML==5.3.1\r\npyzmq==19.0.0\r\nqtconsole==4.7.2\r\nQtPy==1.9.0\r\nradon==4.1.0\r\nreadme-renderer==25.0\r\nrequests==2.23.0\r\nrequests-oauthlib==1.3.0\r\nrequests-toolbelt==0.9.1\r\nrsa==4.0\r\nscikit-learn==0.22.2.post1\r\nscipy==1.4.1\r\nSecretStorage==3.1.2\r\nSend2Trash==1.5.0\r\nsix==1.14.0\r\nsklearn==0.0\r\nsnowballstemmer==2.0.0\r\nsoupsieve==2.0\r\nSphinx==2.3.1\r\nsphinx-autodoc-annotation==1.0.post1\r\nsphinx-click==2.3.1\r\nsphinx-rtd-theme==0.4.3\r\nsphinxcontrib-applehelp==1.0.2\r\nsphinxcontrib-devhelp==1.0.2\r\nsphinxcontrib-htmlhelp==1.0.3\r\nsphinxcontrib-jsmath==1.0.1\r\nsphinxcontrib-qthelp==1.0.3\r\nsphinxcontrib-serializinghtml==1.1.4\r\nsqlparse==0.3.1\r\ntabulate==0.8.6\r\ntensorboard==2.1.1\r\ntensorflow-estimator==2.1.0\r\ntensorflow-gpu==2.1.0\r\ntermcolor==1.1.0\r\nterminado==0.8.3\r\ntestpath==0.4.4\r\ntornado==6.0.4\r\ntqdm==4.44.1\r\ntraitlets==4.3.3\r\ntwine==3.1.1\r\ntyped-ast==1.4.1\r\nurllib3==1.25.8\r\nwcwidth==0.1.9\r\nwebencodings==0.5.1\r\nWerkzeug==1.0.1\r\nwidgetsnbextension==3.5.1\r\nwrapt==1.12.1\r\nxmltodict==0.12.0\r\nzipp==3.1.0\r\n```\r\n4. What commands did you run?\r\n`coverage run --help`\r\n\r\n**Expected behavior**\r\nAn option to specify an output file/directory should be present in the help menu. This is what is currently the output of `coverage run --help`\r\n```\r\nUsage: coverage run [options] <pyfile> [program options]\r\n\r\nRun a Python program, measuring code execution.\r\n\r\nOptions:\r\n  -a, --append          Append coverage data to .coverage, otherwise it starts\r\n                        clean each time.\r\n  --branch              Measure branch coverage in addition to statement\r\n                        coverage.\r\n  --concurrency=LIB     Properly measure code using a concurrency library.\r\n                        Valid values are: thread, gevent, greenlet, eventlet,\r\n                        multiprocessing.\r\n  --context=LABEL       The context label to record for this coverage run.\r\n  --include=PAT1,PAT2,...\r\n                        Include only files whose paths match one of these\r\n                        patterns. Accepts shell-style wildcards, which must be\r\n                        quoted.\r\n  -m, --module          <pyfile> is an importable Python module, not a script\r\n                        path, to be run as 'python -m' would run it.\r\n  --omit=PAT1,PAT2,...  Omit files whose paths match one of these patterns.\r\n                        Accepts shell-style wildcards, which must be quoted.\r\n  -L, --pylib           Measure coverage even inside the Python installed\r\n                        library, which isn't done by default.\r\n  -p, --parallel-mode   Append the machine name, process id and random number\r\n                        to the .coverage data file name to simplify collecting\r\n                        data from many processes.\r\n  --source=SRC1,SRC2,...\r\n                        A list of packages or directories of code to be\r\n                        measured.\r\n  --timid               Use a simpler but slower trace method. Try this if you\r\n                        get seemingly impossible results!\r\n  --debug=OPTS          Debug options, separated by commas. [env:\r\n                        COVERAGE_DEBUG]\r\n  -h, --help            Get help on this command.\r\n  --rcfile=RCFILE       Specify configuration file. By default '.coveragerc',\r\n                        'setup.cfg', 'tox.ini', and 'pyproject.toml' are\r\n                        tried. [env: COVERAGE_RCFILE]\r\n\r\nFull documentation is at https://coverage.readthedocs.io\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/976", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/976/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/976/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/976/events", "html_url": "https://github.com/nedbat/coveragepy/issues/976", "id": 602349554, "node_id": "MDU6SXNzdWU2MDIzNDk1NTQ=", "number": 976, "title": "Make `skip_empty` have an effect on XML reporting", "user": {"login": "ilkecan", "id": 40234257, "node_id": "MDQ6VXNlcjQwMjM0MjU3", "avatar_url": "https://avatars3.githubusercontent.com/u/40234257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilkecan", "html_url": "https://github.com/ilkecan", "followers_url": "https://api.github.com/users/ilkecan/followers", "following_url": "https://api.github.com/users/ilkecan/following{/other_user}", "gists_url": "https://api.github.com/users/ilkecan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilkecan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilkecan/subscriptions", "organizations_url": "https://api.github.com/users/ilkecan/orgs", "repos_url": "https://api.github.com/users/ilkecan/repos", "events_url": "https://api.github.com/users/ilkecan/events{/privacy}", "received_events_url": "https://api.github.com/users/ilkecan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}, {"id": 973388052, "node_id": "MDU6TGFiZWw5NzMzODgwNTI=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/xml", "name": "xml", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-18T01:23:35Z", "updated_at": "2020-07-06T12:12:04Z", "closed_at": "2020-06-30T12:04:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nIt seems setting `skip_empty` to True in `.coveragerc` has no effect on XML reporting.\r\n\r\n**Describe the solution you'd like**\r\nI would like setting `skip_empty` to True to actually skip the empty files during XML reporting. \r\n\r\n**Describe alternatives you've considered**\r\nI can currently omit the empty files, but this not very convenient.\r\n\r\n**Additional context**\r\nI have empty `__init__.py` files in my project (they are actually only created because Coverage.py requires them to include un-tested files in those directories in the report.) and when I generate an XML report while `skip_empty` is set to True, those empty files are also in the report. As a result, [cobertura plug-in in Jenkins](https://plugins.jenkins.io/cobertura/) shows wrong results (this might be unrelated).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/975", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/975/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/975/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/975/events", "html_url": "https://github.com/nedbat/coveragepy/issues/975", "id": 601647415, "node_id": "MDU6SXNzdWU2MDE2NDc0MTU=", "number": 975, "title": "`...` as an exclude_lines causes no data to be collected.", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321134, "node_id": "MDU6TGFiZWw5NzMzMjExMzQ=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-17T01:57:15Z", "updated_at": "2020-04-17T16:47:16Z", "closed_at": "2020-04-17T13:42:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n`...` as an exclude_lines causes no data to be collected.\r\n\r\n**To Reproduce**\r\n```\r\n$ cat 1.py \r\ndef foo():\r\n    ...\r\n\r\ndef bar():\r\n    x = 1\r\n\r\nbar()\r\n$ cat .coveragerc \r\n[run]\r\n\r\n[report]\r\nexclude_lines =\r\n    ...\r\n\r\n[html]\r\ndirectory = docs/build/coverage\r\n$ coverage run 1.py && coverage report\r\nName    Stmts   Miss  Cover\r\n---------------------------\r\n1.py        0      0   100%\r\n```\r\n\r\nthe questions below:\r\n1. What version of Python are you using?\r\n3.8\r\n\r\n1. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n```\r\n$ coverage debug sys\r\n-- sys -------------------------------------------------------\r\n                        version: 5.1\r\n                       coverage: /home/omry/miniconda3/envs/omegaconf38/lib/python3.8/site-packages/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: available\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                   configs_read: /home/omry/dev/1/.coveragerc\r\n                    config_file: /home/omry/dev/1/.coveragerc\r\n                config_contents: '[run]\\n\\n[report]\\nexclude_lines =\\n    ...\\n\\n[html]\\ndirectory = docs/build/coverage\\n'\r\n                      data_file: -none-\r\n                         python: 3.8.2 (default, Mar 26 2020, 15:53:00) [GCC 7.3.0]\r\n                       platform: Linux-4.15.0-96-generic-x86_64-with-glibc2.10\r\n                 implementation: CPython\r\n                     executable: /home/omry/miniconda3/envs/omegaconf38/bin/python\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n                            pid: 8883\r\n                            cwd: /home/omry/dev/1\r\n                           path: /home/omry/miniconda3/envs/omegaconf38/bin\r\n                                 /home/omry/miniconda3/envs/omegaconf38/lib/python38.zip\r\n                                 /home/omry/miniconda3/envs/omegaconf38/lib/python3.8\r\n                                 /home/omry/miniconda3/envs/omegaconf38/lib/python3.8/lib-dynload\r\n                                 /home/omry/miniconda3/envs/omegaconf38/lib/python3.8/site-packages\r\n                                 /home/omry/dev/omegaconf\r\n                    environment: BYOBU_PYTHON = python3\r\n                                 CONDA_PYTHON_EXE = /home/omry/miniconda3/bin/python\r\n                   command_line: /home/omry/miniconda3/envs/omegaconf38/bin/coverage debug sys\r\n                sqlite3_version: 2.6.0\r\n         sqlite3_sqlite_version: 3.31.1\r\n             sqlite3_temp_store: 0\r\n        sqlite3_compile_options: COMPILER=gcc-7.3.0\r\n                                 ENABLE_COLUMN_METADATA\r\n                                 ENABLE_DBSTAT_VTAB\r\n                                 ENABLE_FTS3_TOKENIZER\r\n                                 ENABLE_FTS4\r\n                                 ENABLE_FTS5\r\n                                 ENABLE_GEOPOLY\r\n                                 ENABLE_JSON1\r\n                                 ENABLE_RTREE\r\n                                 ENABLE_UNLOCK_NOTIFY\r\n                                 MAX_EXPR_DEPTH=10000\r\n                                 MAX_VARIABLE_NUMBER=250000\r\n                                 SECURE_DELETE\r\n                                 THREADSAFE=1\r\n\r\n```\r\n1. What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\n```\r\n$ pip freeze \r\ncertifi==2020.4.5.1\r\ncoverage==5.1\r\n```\r\n\r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\nSee description\r\n1. What commands did you run?\r\nSee description\r\n\r\n**Expected behavior**\r\nI want coverage to report 100% coverage for the code snippet.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/968", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/968/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/968/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/968/events", "html_url": "https://github.com/nedbat/coveragepy/issues/968", "id": 592034777, "node_id": "MDU6SXNzdWU1OTIwMzQ3Nzc=", "number": 968, "title": "On Python >= 3.7 running on any OS (Win, macOS, Linux), coverage raises ModuleNotFoundError", "user": {"login": "tysonite", "id": 196535, "node_id": "MDQ6VXNlcjE5NjUzNQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/196535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tysonite", "html_url": "https://github.com/tysonite", "followers_url": "https://api.github.com/users/tysonite/followers", "following_url": "https://api.github.com/users/tysonite/following{/other_user}", "gists_url": "https://api.github.com/users/tysonite/gists{/gist_id}", "starred_url": "https://api.github.com/users/tysonite/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tysonite/subscriptions", "organizations_url": "https://api.github.com/users/tysonite/orgs", "repos_url": "https://api.github.com/users/tysonite/repos", "events_url": "https://api.github.com/users/tysonite/events{/privacy}", "received_events_url": "https://api.github.com/users/tysonite/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321126, "node_id": "MDU6TGFiZWw5NzMzMjExMjY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-04-01T16:11:07Z", "updated_at": "2020-05-10T21:03:20Z", "closed_at": "2020-05-10T20:36:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "\"import\" statement fails with ModuleNotFoundError if running `coverage run` using Python >= 3.7 on any OS. It works correctly without coverage tool, or with coverage tool using Python <= 3.6.\r\n\r\nCoverage version is 5.0.4.\r\n\r\nThis [repo/commit](https://github.com/tysonite/robotframework/commit/f044b786ed8345732244e8988197daab2cd360ef) contains faulty scenario. In order to reproduce, clone it and run following commands from the source root directory:\r\n- `python3.7 -m pip install -r atest/requirements.txt`\r\n- `python3.7 -m pip install coverage`\r\n- `python3.7 atest/run.py \"python3.7 -m coverage run --branch --append\" --exclude no-ci atest/robot/core/filter_by_names.robot`\r\n\r\nAfter that, console output shall have test failures.\r\n\r\nNote that there are 2 Python interpreters in the last command line above, if you change 2nd one to `python3.6` with (or without) coverage, there will be NO failures in the console output.\r\nE.g.\r\n1. `python3.7 atest/run.py \"python3.6 -m coverage run --branch --append\" --exclude no-ci atest/robot/core/filter_by_names.robot`\r\n1. `python3.7 atest/run.py python3.6 --exclude no-ci atest/robot/core/filter_by_names.robot`\r\n1. `python3.7 atest/run.py python3.7 --exclude no-ci atest/robot/core/filter_by_names.robot`\r\n\r\nAdditional info:\r\n```\r\n$ python3.7 -m coverage debug sys\r\n-- sys -------------------------------------------------------\r\n                        version: 5.0.4\r\n                       coverage: /home/tysonite/.local/lib/python3.7/site-packages/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: available\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                                 setup.cfg\r\n                                 tox.ini\r\n                                 pyproject.toml\r\n                   configs_read: -none-\r\n                    config_file: None\r\n                config_contents: -none-\r\n                      data_file: -none-\r\n                         python: 3.7.5 (default, Nov  7 2019, 10:50:52) [GCC 8.3.0]\r\n                       platform: Linux-4.4.0-18362-Microsoft-x86_64-with-Ubuntu-18.04-bionic\r\n                 implementation: CPython\r\n                     executable: /usr/bin/python3.7\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n                            pid: 8083\r\n                            cwd: /home/tysonite/robotframework\r\n                           path: /home/tysonite/robotframework\r\n                                 /usr/lib/python37.zip\r\n                                 /usr/lib/python3.7\r\n                                 /usr/lib/python3.7/lib-dynload\r\n                                 /home/tysonite/.local/lib/python3.7/site-packages\r\n                                 /usr/local/lib/python3.7/dist-packages\r\n                                 /usr/lib/python3/dist-packages\r\n                    environment: -none-\r\n                   command_line: /home/tysonite/.local/lib/python3.7/site-packages/coverage/__main__.py debug sys\r\n                sqlite3_version: 2.6.0\r\n         sqlite3_sqlite_version: 3.22.0\r\n             sqlite3_temp_store: 0\r\n        sqlite3_compile_options: COMPILER=gcc-7.4.0\r\n                                 ENABLE_COLUMN_METADATA\r\n                                 ENABLE_DBSTAT_VTAB\r\n                                 ENABLE_FTS3\r\n                                 ENABLE_FTS3_PARENTHESIS\r\n                                 ENABLE_FTS3_TOKENIZER\r\n                                 ENABLE_FTS4\r\n                                 ENABLE_FTS5\r\n                                 ENABLE_JSON1\r\n                                 ENABLE_LOAD_EXTENSION\r\n                                 ENABLE_PREUPDATE_HOOK\r\n                                 ENABLE_RTREE\r\n                                 ENABLE_SESSION\r\n                                 ENABLE_STMTVTAB\r\n                                 ENABLE_UNLOCK_NOTIFY\r\n                                 ENABLE_UPDATE_DELETE_LIMIT\r\n                                 HAVE_ISNAN\r\n                                 LIKE_DOESNT_MATCH_BLOBS\r\n                                 MAX_SCHEMA_RETRY=25\r\n                                 MAX_VARIABLE_NUMBER=250000\r\n                                 OMIT_LOOKASIDE\r\n                                 SECURE_DELETE\r\n                                 SOUNDEX\r\n                                 TEMP_STORE=1\r\n                                 THREADSAFE=1\r\n```\r\n\r\n```\r\n$ python3.7 -m pip freeze\r\nasn1crypto==0.24.0\r\nattrs==17.4.0\r\nAutomat==0.6.0\r\nblinker==1.4\r\ncertifi==2018.1.18\r\nchardet==3.0.4\r\nclick==6.7\r\ncloud-init==19.4\r\ncolorama==0.3.7\r\ncommand-not-found==0.3\r\nconfigobj==5.0.6\r\nconstantly==15.1.0\r\ncoverage==5.0.4\r\ncryptography==2.1.4\r\ndistro-info===0.18ubuntu0.18.04.1\r\ndocutils==0.16\r\nhttplib2==0.9.2\r\nhyperlink==17.3.1\r\nidna==2.6\r\nincremental==16.10.1\r\nJinja2==2.10\r\njsonpatch==1.16\r\njsonpointer==1.10\r\njsonschema==2.6.0\r\nkeyring==10.6.0\r\nkeyrings.alt==3.0\r\nlanguage-selector==0.1\r\nlxml==4.5.0\r\nMarkupSafe==1.0\r\nnetifaces==0.10.4\r\noauthlib==2.0.6\r\nPAM==0.4.2\r\npyasn1==0.4.2\r\npyasn1-modules==0.2.1\r\npycrypto==2.6.1\r\nPygments==2.6.1\r\npygobject==3.26.1\r\nPyJWT==1.5.3\r\npyOpenSSL==17.5.0\r\npyserial==3.4\r\npython-apt==1.6.5+ubuntu0.2\r\npython-debian==0.1.32\r\npyxdg==0.25\r\nPyYAML==5.3.1\r\nrequests==2.18.4\r\nrequests-unixsocket==0.1.5\r\nSecretStorage==2.3.1\r\nservice-identity==16.0.0\r\nsix==1.11.0\r\nssh-import-id==5.7\r\nsystemd-python==234\r\nTwisted==17.9.0\r\nufw==0.36\r\nunattended-upgrades==0.1\r\nurllib3==1.22\r\nzope.interface==4.3.2\r\n```\r\n\r\nThis [GH run](https://github.com/tysonite/robotframework/actions/runs/67743858) gives more background on failed cases.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/967", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/967/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/967/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/967/events", "html_url": "https://github.com/nedbat/coveragepy/issues/967", "id": 591778835, "node_id": "MDU6SXNzdWU1OTE3Nzg4MzU=", "number": 967, "title": "paths cannot be altered by plugins", "user": {"login": "gaborbernat", "id": 690238, "node_id": "MDQ6VXNlcjY5MDIzOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/690238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gaborbernat", "html_url": "https://github.com/gaborbernat", "followers_url": "https://api.github.com/users/gaborbernat/followers", "following_url": "https://api.github.com/users/gaborbernat/following{/other_user}", "gists_url": "https://api.github.com/users/gaborbernat/gists{/gist_id}", "starred_url": "https://api.github.com/users/gaborbernat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gaborbernat/subscriptions", "organizations_url": "https://api.github.com/users/gaborbernat/orgs", "repos_url": "https://api.github.com/users/gaborbernat/repos", "events_url": "https://api.github.com/users/gaborbernat/events{/privacy}", "received_events_url": "https://api.github.com/users/gaborbernat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-01T09:44:13Z", "updated_at": "2020-04-12T23:37:25Z", "closed_at": "2020-04-11T17:58:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://coverage.readthedocs.io/en/latest/config.html#paths shows how to user can set paths. This cannot be achieved by plugins due to paths not being defined as a set/get option; but rather directly as attribute on the configuration object. Due to https://github.com/nedbat/coveragepy/blob/master/coverage/control.py#L272-L276 the plugin cannot reliably access and extend this.\r\n\r\nCame up while trying to address https://github.com/asottile/covdefaults/issues/3", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/964", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/964/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/964/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/964/events", "html_url": "https://github.com/nedbat/coveragepy/issues/964", "id": 587186949, "node_id": "MDU6SXNzdWU1ODcxODY5NDk=", "number": 964, "title": "python3.8 try-finally-return reports wrong branch coverage with async functions", "user": {"login": "afflux", "id": 768184, "node_id": "MDQ6VXNlcjc2ODE4NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/768184?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afflux", "html_url": "https://github.com/afflux", "followers_url": "https://api.github.com/users/afflux/followers", "following_url": "https://api.github.com/users/afflux/following{/other_user}", "gists_url": "https://api.github.com/users/afflux/gists{/gist_id}", "starred_url": "https://api.github.com/users/afflux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afflux/subscriptions", "organizations_url": "https://api.github.com/users/afflux/orgs", "repos_url": "https://api.github.com/users/afflux/repos", "events_url": "https://api.github.com/users/afflux/events{/privacy}", "received_events_url": "https://api.github.com/users/afflux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-24T18:21:19Z", "updated_at": "2020-04-12T22:09:05Z", "closed_at": "2020-03-26T13:50:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nI'm afraid I have a similar case to #707, although somehow, decorators and coroutine functions are involved.\r\n\r\n**To Reproduce**\r\n\r\n\r\n1. What version of Python are you using? python3.8\r\n1. What version of coverage.py are you using? 5.0.4., [sys.txt](https://github.com/nedbat/coveragepy/files/4376970/sys.txt) attached\r\n1. What versions of what packages do you have installed? [pip-freeze.txt](https://github.com/nedbat/coveragepy/files/4376971/pip-freeze.txt)\r\n1. What commands did you run? `coverage run --branch test.py ; coverage html`\r\n1. What code are you running?\r\n```python\r\nimport asyncio\r\n\r\ndef foo(x):\r\n    return x\r\n\r\n@foo\r\nasync def f1():\r\n    try:\r\n        return 2\r\n    finally:\r\n        print('finally')\r\n\r\nasyncio.run(f1())\r\n```\r\n\r\n\r\n**Expected behavior**\r\nFull branch coverage for `f1()`\r\n\r\n**Additional context**\r\nsystrace has `frame.f_code.co_firstlineno` on the line with the `@foo` decorator.\r\nWhen `f1` is async, `AstArcAnalyzer` finds an arc to the line containing `async def`:\r\n```\r\nAdding arc: (11, -9): \"the return on line {lineno} wasn't executed\", \"didn't return from function 'f1'\"\r\n     _code_object__FunctionDef : /home/kb/repos/pysomeip/.tox/coverage/lib/python3.8/site-packages/coverage/parser.py:1155\r\n                 add_body_arcs : /home/kb/repos/pysomeip/.tox/coverage/lib/python3.8/site-packages/coverage/parser.py:690\r\n                      add_arcs : /home/kb/repos/pysomeip/.tox/coverage/lib/python3.8/site-packages/coverage/parser.py:653\r\n                  _handle__Try : /home/kb/repos/pysomeip/.tox/coverage/lib/python3.8/site-packages/coverage/parser.py:1059\r\n          process_return_exits : /home/kb/repos/pysomeip/.tox/coverage/lib/python3.8/site-packages/coverage/parser.py:843\r\n                       add_arc : /home/kb/repos/pysomeip/.tox/coverage/lib/python3.8/site-packages/coverage/parser.py:563\r\n```\r\n\r\nIf I make `f1` non-async, `AstArcAnalyzer` finds the line with the decorator:\r\n```\r\nAdding arc: (11, -8): \"the return on line {lineno} wasn't executed\", \"didn't return from function 'f1'\"\r\n[same stack]\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/957", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/957/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/957/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/957/events", "html_url": "https://github.com/nedbat/coveragepy/issues/957", "id": 580797478, "node_id": "MDU6SXNzdWU1ODA3OTc0Nzg=", "number": 957, "title": "Condition statatement coverage", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321126, "node_id": "MDU6TGFiZWw5NzMzMjExMjY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-13T19:28:01Z", "updated_at": "2020-03-15T11:39:58Z", "closed_at": "2020-03-15T11:39:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Consider:\r\n\r\n```python\r\ndef foo(c1, c2):\r\n    if c1 or c2:\r\n        print(\"yes\")\r\n    else:\r\n        print(\"no\")\r\n\r\n\r\nfoo(True, False)\r\nfoo(False, False)\r\n```\r\n\r\nThis gives 100% coverage, even with branch prediction.\r\n```\r\n$ coverage run --branch 1.py && coverage report\r\nyes\r\nno\r\nName    Stmts   Miss Branch BrPart  Cover\r\n-----------------------------------------\r\n1.py        6      0      2      0   100%\r\n```\r\n\r\nHowever, the case where c2 is True is never tested.\r\n\r\nThoughts?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/952", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/952/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/952/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/952/events", "html_url": "https://github.com/nedbat/coveragepy/issues/952", "id": 578420677, "node_id": "MDU6SXNzdWU1Nzg0MjA2Nzc=", "number": 952, "title": "How could coverage.py xml report contains \u201cmethods\u201d keyword\uff1f", "user": {"login": "leafonsword", "id": 1754580, "node_id": "MDQ6VXNlcjE3NTQ1ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1754580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leafonsword", "html_url": "https://github.com/leafonsword", "followers_url": "https://api.github.com/users/leafonsword/followers", "following_url": "https://api.github.com/users/leafonsword/following{/other_user}", "gists_url": "https://api.github.com/users/leafonsword/gists{/gist_id}", "starred_url": "https://api.github.com/users/leafonsword/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leafonsword/subscriptions", "organizations_url": "https://api.github.com/users/leafonsword/orgs", "repos_url": "https://api.github.com/users/leafonsword/repos", "events_url": "https://api.github.com/users/leafonsword/events{/privacy}", "received_events_url": "https://api.github.com/users/leafonsword/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 973388052, "node_id": "MDU6TGFiZWw5NzMzODgwNTI=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/xml", "name": "xml", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-10T08:44:32Z", "updated_at": "2020-03-17T04:37:45Z", "closed_at": "2020-03-17T04:37:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use coverage.py's xml report to combine with jenkins and Cobertura to generate code coverage rate, and command is `coverage xml sources/test_calc.py`\r\n\r\nWhile Python and coverage.py's xml report just contains 5 indexes:\r\n![image](https://user-images.githubusercontent.com/1754580/76294717-579f0800-62ee-11ea-9d22-699e60996e8b.png)\r\n\r\n\r\nBut Java and maven's xml report contains 6 indexes:\r\n![image](https://user-images.githubusercontent.com/1754580/76294717-579f0800-62ee-11ea-9d22-699e60996e8b.png)\r\n\r\n\r\n\r\n\r\nSo could coverage.py's xml report contains \u201cmethods\u201d keyword\uff1f", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/950", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/950/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/950/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/950/events", "html_url": "https://github.com/nedbat/coveragepy/issues/950", "id": 576766911, "node_id": "MDU6SXNzdWU1NzY3NjY5MTE=", "number": 950, "title": "coverage fails with no-data-collected when run from tox -p auto, but not when run serially", "user": {"login": "mgedmin", "id": 159967, "node_id": "MDQ6VXNlcjE1OTk2Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/159967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mgedmin", "html_url": "https://github.com/mgedmin", "followers_url": "https://api.github.com/users/mgedmin/followers", "following_url": "https://api.github.com/users/mgedmin/following{/other_user}", "gists_url": "https://api.github.com/users/mgedmin/gists{/gist_id}", "starred_url": "https://api.github.com/users/mgedmin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mgedmin/subscriptions", "organizations_url": "https://api.github.com/users/mgedmin/orgs", "repos_url": "https://api.github.com/users/mgedmin/repos", "events_url": "https://api.github.com/users/mgedmin/events{/privacy}", "received_events_url": "https://api.github.com/users/mgedmin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1784642395, "node_id": "MDU6TGFiZWwxNzg0NjQyMzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/not-our-bug", "name": "not-our-bug", "color": "b997e5", "default": false, "description": "The problem was elsewhere"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-03-06T08:11:04Z", "updated_at": "2020-03-09T23:14:43Z", "closed_at": "2020-03-06T09:14:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nI've this very weird situation:\r\n\r\n- git clone https://github.com/zopefoundation/zope.file && cd zope.file\r\n- tox -e coverage  # works fine!\r\n- tox -p auto  -e py38,coverage  # coverage is shown as 0% and there's a\r\n\r\n```\r\nCoverage.py warning: No data was collected. (no-data-collected)\r\n```\r\n\r\n**To Reproduce**\r\n\r\nHow can we reproduce the problem?  Please *be specific*.\r\n\r\n```\r\ngit clone https://github.com/zopefoundation/zope.file\r\ncd zope.file\r\ntox -p auto -e coverage,py38\r\n```\r\n\r\n- What version of Python are you using?\r\n\r\n3.7.5, but I had the same problem with 2.7.17 (with basepython = python2.7 in the [testenv:coverage] section in tox.ini)\r\n\r\n- What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n\r\n<details>\r\n<summary>5.0.3</summary>\r\n\r\n```\r\n-- sys -------------------------------------------------------\r\n                        version: 5.0.3\r\n                       coverage: /home/mg/src/zopefoundation/zope.file/.tox/coverage/lib/python3.7/site-packages/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: available\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                   configs_read: /home/mg/src/zopefoundation/zope.file/.coveragerc\r\n                    config_file: /home/mg/src/zopefoundation/zope.file/.coveragerc\r\n                config_contents: '[run]\\nsource = src\\n\\n[report]\\nexclude_lines =\\n    pragma: no cover\\n'\r\n                      data_file: -none-\r\n                         python: 3.7.5 (default, Nov 20 2019, 09:21:52) [GCC 9.2.1 20191008]\r\n                       platform: Linux-5.3.0-40-generic-x86_64-with-Ubuntu-19.10-eoan\r\n                 implementation: CPython\r\n                     executable: /home/mg/src/zopefoundation/zope.file/.tox/coverage/bin/python\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n                            pid: 18570\r\n                            cwd: /home/mg/src/zopefoundation/zope.file\r\n                           path: /home/mg/src/zopefoundation/zope.file/.tox/coverage/bin\r\n                                 /usr/lib/python37.zip\r\n                                 /usr/lib/python3.7\r\n                                 /usr/lib/python3.7/lib-dynload\r\n                                 /home/mg/src/zopefoundation/zope.file/.tox/coverage/lib/python3.7/site-packages\r\n                                 /home/mg/src/zopefoundation/zope.file/src\r\n                    environment: PYTHONSTARTUP = /home/mg/.python\r\n                   command_line: .tox/coverage/bin/coverage debug sys\r\n                sqlite3_version: 2.6.0\r\n         sqlite3_sqlite_version: 3.29.0\r\n        sqlite3_compile_options: COMPILER=gcc-9.2.1 20191008\r\n                                 ENABLE_COLUMN_METADATA\r\n                                 ENABLE_DBSTAT_VTAB\r\n                                 ENABLE_FTS3\r\n                                 ENABLE_FTS3_PARENTHESIS\r\n                                 ENABLE_FTS3_TOKENIZER\r\n                                 ENABLE_FTS4\r\n                                 ENABLE_FTS5\r\n                                 ENABLE_JSON1\r\n                                 ENABLE_LOAD_EXTENSION\r\n                                 ENABLE_PREUPDATE_HOOK\r\n                                 ENABLE_RTREE\r\n                                 ENABLE_SESSION\r\n                                 ENABLE_STMTVTAB\r\n                                 ENABLE_UNLOCK_NOTIFY\r\n                                 ENABLE_UPDATE_DELETE_LIMIT\r\n                                 HAVE_ISNAN\r\n                                 LIKE_DOESNT_MATCH_BLOBS\r\n                                 MAX_SCHEMA_RETRY=25\r\n                                 MAX_VARIABLE_NUMBER=250000\r\n                                 OMIT_LOOKASIDE\r\n                                 SECURE_DELETE\r\n                                 SOUNDEX\r\n                                 TEMP_STORE=1\r\n                                 THREADSAFE=1\r\n                                 USE_URI\r\n```\r\n\r\n</details>\r\n\r\n- What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\n\r\n<details>\r\n\r\n```\r\nbeautifulsoup4==4.8.2\r\nBTrees==4.6.1\r\ncffi==1.14.0\r\ncoverage==5.0.3\r\npersistent==4.6.0\r\npycparser==2.20\r\npython-gettext==4.0\r\npytz==2019.3\r\nsix==1.14.0\r\nsoupsieve==2.0\r\ntransaction==3.0.0\r\nwaitress==1.4.3\r\nWebOb==1.8.6\r\nWebTest==2.0.34\r\nWSGIProxy2==0.4.6\r\nzc.lockfile==2.0\r\nZConfig==3.5.0\r\nzdaemon==4.3\r\nZODB==5.5.1\r\nzodbpickle==2.0.0\r\nzope.annotation==4.7.0\r\nzope.app.appsetup==4.1.0\r\nzope.app.basicskin==4.0.0\r\nzope.app.http==4.0.1\r\nzope.app.pagetemplate==4.0.0\r\nzope.app.principalannotation==4.0.0\r\nzope.app.publication==4.3.2\r\nzope.app.wsgi==4.1.0\r\nzope.applicationcontrol==4.2.0\r\nzope.authentication==4.4.0\r\nzope.browser==2.3\r\nzope.browsermenu==4.4\r\nzope.browserpage==4.4.0\r\nzope.browserresource==4.4\r\nzope.cachedescriptors==4.3.1\r\nzope.component==4.6\r\nzope.configuration==4.3.1\r\nzope.container==4.3.0\r\nzope.contenttype==4.5.0\r\nzope.copy==4.2\r\nzope.copypastemove==4.1.0\r\nzope.datetime==4.2.0\r\nzope.deferredimport==4.3.1\r\nzope.deprecation==4.4.0\r\nzope.dottedname==4.3\r\nzope.dublincore==4.2.0\r\nzope.error==4.5.0\r\nzope.event==4.4\r\nzope.exceptions==4.3\r\n-e git+git@github.com:zopefoundation/zope.file.git@2833ea32239f5c0d9e2f8a4f51512a2c67b32457#egg=zope.file\r\nzope.filerepresentation==4.2.0\r\nzope.formlib==4.7.0\r\nzope.hookable==5.0.0\r\nzope.i18n==4.7.0\r\nzope.i18nmessageid==5.0.0\r\nzope.interface==4.7.1\r\nzope.lifecycleevent==4.3\r\nzope.location==4.2\r\nzope.login==2.1.0\r\nzope.mimetype==2.4.0\r\nzope.minmax==2.2.0\r\nzope.pagetemplate==4.5.0\r\nzope.password==4.3.1\r\nzope.principalannotation==4.3.0\r\nzope.principalregistry==4.2.0\r\nzope.processlifetime==2.3.0\r\nzope.proxy==4.3.3\r\nzope.publisher==5.1.1\r\nzope.schema==4.9.3\r\nzope.security==5.1.0\r\nzope.securitypolicy==4.3.1\r\nzope.session==4.3.0\r\nzope.site==4.2.2\r\nzope.size==4.3\r\nzope.tal==4.4\r\nzope.tales==5.0.1\r\nzope.testbrowser==5.5.1\r\nzope.testing==4.7\r\nzope.testrunner==5.1\r\nzope.traversing==4.3.1\r\n```\r\n\r\n</details>\r\n\r\n- What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\n\r\nhttps://github.com/zopefoundation/zope.file/tree/2833ea32239f5c0d9e2f8a4f51512a2c67b32457\r\n\r\n- What commands did you run?\r\n\r\n`tox -p auto`, but limiting the test environments to just two is sufficient to reproduce this, e.g. `tox -e py27,coverage -p auto` or `tox -e py38,coverage -p auto`\r\n\r\n**Expected behavior**\r\n\r\n96% coverage, which is what I get when I run `tox -e coverage`\r\n\r\n**Additional context**\r\n\r\nThere are subprocesses involved in the test script, due to zope.testrunner's feature that can run some tests in a subprocess.  I'm not entirely sure how coverage tracking works with this usually.\r\n\r\nI've tried to see if this might be a race condition due to additional system load from other tests running in parallel, but I couldn't reproduce this by running `tox -e py38 >&/dev/null & tox -e coverage`.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/949", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/949/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/949/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/949/events", "html_url": "https://github.com/nedbat/coveragepy/issues/949", "id": 572823798, "node_id": "MDU6SXNzdWU1NzI4MjM3OTg=", "number": 949, "title": "coverage pip default installation for python 3.8 does not include c extensions", "user": {"login": "andrewgill-dev", "id": 29575507, "node_id": "MDQ6VXNlcjI5NTc1NTA3", "avatar_url": "https://avatars0.githubusercontent.com/u/29575507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewgill-dev", "html_url": "https://github.com/andrewgill-dev", "followers_url": "https://api.github.com/users/andrewgill-dev/followers", "following_url": "https://api.github.com/users/andrewgill-dev/following{/other_user}", "gists_url": "https://api.github.com/users/andrewgill-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewgill-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewgill-dev/subscriptions", "organizations_url": "https://api.github.com/users/andrewgill-dev/orgs", "repos_url": "https://api.github.com/users/andrewgill-dev/repos", "events_url": "https://api.github.com/users/andrewgill-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewgill-dev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-02-28T15:25:11Z", "updated_at": "2020-03-17T00:02:49Z", "closed_at": "2020-02-29T12:45:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen installing coverage via pip install coverage the version available for windows does not have c extensions compiled.\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?\r\n1. What version of Python are you using? 3.8 (works fine in 3.7)\r\n2. What version of coverage.py are you using? 5.0.3\r\n3. What code are you running? coverage --version\r\n\r\nrun `pip install coverage` this works fine under 3.7 but under 3.8 it installs without c extensions making it incredibly slow.\r\n\r\n**Expected behavior**\r\nThe default pip installed version of coverage should be compiled with c extensions.\r\n\r\n**Additional context**\r\nIt is possible to use the compiled wheel from https://www.lfd.uci.edu/~gohlke/pythonlibs/#coverage, however if you have a cicd which runs tox and creates a new virtual environment it will install the without c extensions version and take 6-10 times as long to complete tests.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/948", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/948/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/948/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/948/events", "html_url": "https://github.com/nedbat/coveragepy/issues/948", "id": 571951770, "node_id": "MDU6SXNzdWU1NzE5NTE3NzA=", "number": 948, "title": "Option to use relative file paths in xml report", "user": {"login": "kammala", "id": 4599701, "node_id": "MDQ6VXNlcjQ1OTk3MDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/4599701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kammala", "html_url": "https://github.com/kammala", "followers_url": "https://api.github.com/users/kammala/followers", "following_url": "https://api.github.com/users/kammala/following{/other_user}", "gists_url": "https://api.github.com/users/kammala/gists{/gist_id}", "starred_url": "https://api.github.com/users/kammala/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kammala/subscriptions", "organizations_url": "https://api.github.com/users/kammala/orgs", "repos_url": "https://api.github.com/users/kammala/repos", "events_url": "https://api.github.com/users/kammala/events{/privacy}", "received_events_url": "https://api.github.com/users/kammala/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-27T09:54:12Z", "updated_at": "2020-03-17T00:02:38Z", "closed_at": "2020-03-16T00:55:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nThere is an option for `run` command to store only relative file paths. It is very useful while running your tests inside one environment(e.g. docker) and using results in another one(e.g. on Jenkins node). It is also common to generate cobertura report in the same environment you are running tests, but this report always includes absolute path for sources(I think, because of [this line](https://github.com/nedbat/coveragepy/blob/master/coverage/xmlreport.py#L44)). This way it is impossible for tools like Jenkins Cobertura plugin or Sonarqube to find source files properly(Sonarqube either fails to parse coverage report at all or raises warning, for example).\r\n\r\n\r\n**Describe the solution you'd like**\r\n`json` reports use paths from `.coverage` file and thus respect this `relative_files` setting from `run` section.\r\nIt would be nice either to not canonicalize paths for sources or to have an option which will skip path normalization(this way it may be more backward compatible)\r\n\r\n**Describe alternatives you've considered**\r\nI tried to use `combine` and define sources in `[path]` section of config but it ends up with absolute path in the end report anyway.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/947", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/947/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/947/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/947/events", "html_url": "https://github.com/nedbat/coveragepy/issues/947", "id": 570730378, "node_id": "MDU6SXNzdWU1NzA3MzAzNzg=", "number": 947, "title": "Documentation issue: \u2018ws\u2019 missing from source_token_lines description", "user": {"login": "snoopyjc", "id": 9206213, "node_id": "MDQ6VXNlcjkyMDYyMTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/9206213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snoopyjc", "html_url": "https://github.com/snoopyjc", "followers_url": "https://api.github.com/users/snoopyjc/followers", "following_url": "https://api.github.com/users/snoopyjc/following{/other_user}", "gists_url": "https://api.github.com/users/snoopyjc/gists{/gist_id}", "starred_url": "https://api.github.com/users/snoopyjc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snoopyjc/subscriptions", "organizations_url": "https://api.github.com/users/snoopyjc/orgs", "repos_url": "https://api.github.com/users/snoopyjc/repos", "events_url": "https://api.github.com/users/snoopyjc/events{/privacy}", "received_events_url": "https://api.github.com/users/snoopyjc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-25T17:38:47Z", "updated_at": "2020-03-09T23:15:00Z", "closed_at": "2020-02-26T12:45:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nDocumentation issue: \u2018ws\u2019 missing from source_token_lines description\r\n\r\n**Expected behavior**\r\n\u2018ws\u2019 Is shown in the example but it\u2019s not defined in the list of tokens.  I assume it\u2019s for white space and you put the type and amount of white space in the argument e.g. tabs vs spaces.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/944", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/944/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/944/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/944/events", "html_url": "https://github.com/nedbat/coveragepy/issues/944", "id": 570070447, "node_id": "MDU6SXNzdWU1NzAwNzA0NDc=", "number": 944, "title": "Handle cases without localStorage for sorting", "user": {"login": "AbdealiJK", "id": 2200743, "node_id": "MDQ6VXNlcjIyMDA3NDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2200743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AbdealiJK", "html_url": "https://github.com/AbdealiJK", "followers_url": "https://api.github.com/users/AbdealiJK/followers", "following_url": "https://api.github.com/users/AbdealiJK/following{/other_user}", "gists_url": "https://api.github.com/users/AbdealiJK/gists{/gist_id}", "starred_url": "https://api.github.com/users/AbdealiJK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AbdealiJK/subscriptions", "organizations_url": "https://api.github.com/users/AbdealiJK/orgs", "repos_url": "https://api.github.com/users/AbdealiJK/repos", "events_url": "https://api.github.com/users/AbdealiJK/events{/privacy}", "received_events_url": "https://api.github.com/users/AbdealiJK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}, {"id": 973387345, "node_id": "MDU6TGFiZWw5NzMzODczNDU=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/html", "name": "html", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-24T19:11:26Z", "updated_at": "2020-03-17T00:02:55Z", "closed_at": "2020-02-29T12:55:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nI was recently trying to make my browser more \"secure\" by locking some domains from accessing cookies etc. And I found that somehow I broke coverage's HTML report.\r\nI was surprised, because I didn't expect coverage to need any form of storage ...\r\nOn digging further I saw that localStorage was being used to persist the sorting column\r\n\r\n**Describe the solution you'd like**\r\nIf localStorage was causing an error for some reason - don't save the column that was used for sorting and just sort by the default column\r\n\r\n**Describe alternatives you've considered**\r\nEnabling localStorage for coverage is obviously an option :)\r\nAnd something I'm going to do right now - but I'm not sure if its a good idea for coverage to throw an error in case it was unable to do just sorting ...\r\nNote: If this JS error occurs, I can't do any sorting (even temporarily on this page)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/943", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/943/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/943/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/943/events", "html_url": "https://github.com/nedbat/coveragepy/issues/943", "id": 569548568, "node_id": "MDU6SXNzdWU1Njk1NDg1Njg=", "number": 943, "title": "Unexpectedly missing coverage + strange report format (PyPy3 7.1.1)", "user": {"login": "vytas7", "id": 3430939, "node_id": "MDQ6VXNlcjM0MzA5Mzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/3430939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vytas7", "html_url": "https://github.com/vytas7", "followers_url": "https://api.github.com/users/vytas7/followers", "following_url": "https://api.github.com/users/vytas7/following{/other_user}", "gists_url": "https://api.github.com/users/vytas7/gists{/gist_id}", "starred_url": "https://api.github.com/users/vytas7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vytas7/subscriptions", "organizations_url": "https://api.github.com/users/vytas7/orgs", "repos_url": "https://api.github.com/users/vytas7/repos", "events_url": "https://api.github.com/users/vytas7/events{/privacy}", "received_events_url": "https://api.github.com/users/vytas7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-23T19:56:53Z", "updated_at": "2020-03-17T00:03:16Z", "closed_at": "2020-02-24T01:57:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nCoverage is reportedly missing on one line.\r\nMoreover, that line is reported using a strange format, just: `-96`.\r\nThe mentioned line 96 is whitespace, FWIW.\r\n[The summary docs](https://coverage.readthedocs.io/en/coverage-5.0.3/cmd.html#coverage-summary) don't provide any similar example wrt the observed format.\r\n\r\n**To Reproduce**\r\nRun `tox` for this pull request on PyPy3 7.1.1: https://github.com/vytas7/falcon-sqla/pull/4.\r\nReproduced thrice by rerunning the job.\r\nThis is the original failure: https://travis-ci.org/vytas7/falcon-sqla/jobs/654144248#L285\r\n\r\n**Expected behavior**\r\nExpected 100% coverage.\r\nIf there was a bug in the code and/or the test suite, expecting to get a clear indication what was not covered.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/935", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/935/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/935/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/935/events", "html_url": "https://github.com/nedbat/coveragepy/issues/935", "id": 567158690, "node_id": "MDU6SXNzdWU1NjcxNTg2OTA=", "number": 935, "title": "No coverage for runpy.run_path", "user": {"login": "arcivanov", "id": 5355666, "node_id": "MDQ6VXNlcjUzNTU2NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5355666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arcivanov", "html_url": "https://github.com/arcivanov", "followers_url": "https://api.github.com/users/arcivanov/followers", "following_url": "https://api.github.com/users/arcivanov/following{/other_user}", "gists_url": "https://api.github.com/users/arcivanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arcivanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arcivanov/subscriptions", "organizations_url": "https://api.github.com/users/arcivanov/orgs", "repos_url": "https://api.github.com/users/arcivanov/repos", "events_url": "https://api.github.com/users/arcivanov/events{/privacy}", "received_events_url": "https://api.github.com/users/arcivanov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-18T21:07:43Z", "updated_at": "2020-02-19T00:33:14Z", "closed_at": "2020-02-19T00:33:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Coverage is not capturing anything executed via `runpy.run_path`:\r\n\r\nThe code is super simple:\r\n\r\n```python\r\nimport ast\r\nimport runpy\r\nimport sys\r\n\r\n\r\nclass CoverageImporter:\r\n    def __init__(self, coverage_parent_dir):\r\n        self.coverage_parent_dir = coverage_parent_dir\r\n\r\n    def find_module(self, fullname, path=None):\r\n        \"\"\"\r\n        Return self when fullname starts with `coverage`.\r\n        \"\"\"\r\n        if fullname == \"coverage\" or fullname.startswith(\"coverage.\"):\r\n            return self\r\n\r\n    def load_module(self, fullname):\r\n        \"\"\"\r\n        Load coverage only and remove coverage from path thereafter\r\n        \"\"\"\r\n        sys.path.append(self.coverage_parent_dir)\r\n        try:\r\n            __import__(fullname)\r\n        finally:\r\n            del sys.path[-1]\r\n\r\n    def install(self):\r\n        \"\"\"\r\n        Install this importer into sys.meta_path if not already present.\r\n        \"\"\"\r\n        if self not in sys.meta_path:\r\n            sys.meta_path.append(self)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    self = sys.argv[0]\r\n    config_literal = sys.argv[1]\r\n    del sys.argv[:2]\r\n    del sys.path[0]\r\n\r\n    config = ast.literal_eval(config_literal)\r\n\r\n    CoverageImporter(config[\"cov_parent_dir\"]).install()\r\n\r\n    from coverage import coverage as coverage_factory\r\n\r\n    coverage = coverage_factory(*(config.get(\"cov_args\", ())), **(config.get(\"cov_kwargs\", {})))\r\n    coverage.start()\r\n\r\n    try:\r\n        runpy.run_path(sys.argv[0], run_name=\"__main__\")\r\n    finally:\r\n        coverage.stop()\r\n        coverage.save()\r\n```\r\nResulting in:\r\n```\r\n[INFO]  Running integration test should_ignore_hidden_files_in_scripts_tests\r\n[DEBUG] Executing command: '/home/arcivanov/Documents/src/arcivanov/pybuilder/target/venv/test/cpython-3.8.1.final.0/bin/python' 'src/main/python/pybuilder/plugins/python/_coverage_shim.py' \"{'cov_parent_dir': '/home/arcivanov/Documents/src/arcivanov/pybuilder/.pybuilder/plugins/cpython-3.8.1.final.0/lib/python3.8/site-packages', 'cov_kwargs': {'data_file': '/home/arcivanov/Documents/src/arcivanov/pybuilder/target/run_integration_tests.coverage', 'data_suffix': True, 'cover_pylib': False, 'config_file': False, 'branch': True, 'source': ['src/main/python'], 'context': 'run_integration_tests', 'concurrency': ['thread']}}\" '/home/arcivanov/Documents/src/arcivanov/pybuilder/src/integrationtest/python/should_ignore_hidden_files_in_scripts_tests.py'\r\n[INFO]  Running integration test should_write_setup_file_tests\r\n[DEBUG] Executing command: '/home/arcivanov/Documents/src/arcivanov/pybuilder/target/venv/test/cpython-3.8.1.final.0/bin/python' 'src/main/python/pybuilder/plugins/python/_coverage_shim.py' \"{'cov_parent_dir': '/home/arcivanov/Documents/src/arcivanov/pybuilder/.pybuilder/plugins/cpython-3.8.1.final.0/lib/python3.8/site-packages', 'cov_kwargs': {'data_file': '/home/arcivanov/Documents/src/arcivanov/pybuilder/target/run_integration_tests.coverage', 'data_suffix': True, 'cover_pylib': False, 'config_file': False, 'branch': True, 'source': ['src/main/python'], 'context': 'run_integration_tests', 'concurrency': ['thread']}}\" '/home/arcivanov/Documents/src/arcivanov/pybuilder/src/integrationtest/python/should_write_setup_file_tests.py'\r\n```\r\n\r\nThere are no errors anywhere, individual coverage SQLite files get created, but there is absolutely no coverage in any of the files generated.\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/934", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/934/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/934/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/934/events", "html_url": "https://github.com/nedbat/coveragepy/issues/934", "id": 566771809, "node_id": "MDU6SXNzdWU1NjY3NzE4MDk=", "number": 934, "title": "Encoding issues with .so files produced by Cython", "user": {"login": "MaxHalford", "id": 8095957, "node_id": "MDQ6VXNlcjgwOTU5NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8095957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaxHalford", "html_url": "https://github.com/MaxHalford", "followers_url": "https://api.github.com/users/MaxHalford/followers", "following_url": "https://api.github.com/users/MaxHalford/following{/other_user}", "gists_url": "https://api.github.com/users/MaxHalford/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaxHalford/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaxHalford/subscriptions", "organizations_url": "https://api.github.com/users/MaxHalford/orgs", "repos_url": "https://api.github.com/users/MaxHalford/repos", "events_url": "https://api.github.com/users/MaxHalford/events{/privacy}", "received_events_url": "https://api.github.com/users/MaxHalford/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-18T09:51:34Z", "updated_at": "2020-07-02T13:56:26Z", "closed_at": "2020-07-02T13:56:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI have `.pyx` source files which contain some doctests. When I cythonize them, I obtain some `.so` files. These `.so` files are picked up by `pytest` because they contain some doctests. When I run `coverage run -m pytest` I get the following error: `SyntaxError: invalid or missing encoding declaration`.\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. What version of Python are you using? I'm using Python 3.7.6.\r\n2. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n\r\n```\r\nversion: 4.5.4\r\n             coverage: /Users/mhalford/opt/anaconda3/envs/creme/lib/python3.7/site-packages/coverage/__init__.py\r\n          cover_paths: /Users/mhalford/opt/anaconda3/envs/creme/lib/python3.7/site-packages/coverage\r\n          pylib_paths: /Users/mhalford/opt/anaconda3/envs/creme/lib/python3.7\r\n               tracer: CTracer\r\n plugins.file_tracers: Cython.Coverage.Plugin\r\n  plugins.configurers: -none-\r\n         config_files: .coveragerc\r\n         configs_read: .coveragerc\r\n            data_path: /Users/mhalford/projects/creme-ml/creme/.coverage\r\n               python: 3.7.6 (default, Jan  8 2020, 13:42:34) [Clang 4.0.1 (tags/RELEASE_401/final)]\r\n             platform: Darwin-19.2.0-x86_64-i386-64bit\r\n       implementation: CPython\r\n           executable: /Users/mhalford/opt/anaconda3/envs/creme/bin/python\r\n                  cwd: /Users/mhalford/projects/creme-ml/creme\r\n                 path:\r\n                       /Users/mhalford/opt/anaconda3/envs/creme/lib/python37.zip\r\n                       /Users/mhalford/opt/anaconda3/envs/creme/lib/python3.7\r\n                       /Users/mhalford/opt/anaconda3/envs/creme/lib/python3.7/lib-dynload\r\n                       /Users/mhalford/opt/anaconda3/envs/creme/lib/python3.7/site-packages\r\n                       /Users/mhalford/projects/creme-ml/creme\r\n          environment: -none-\r\n         command_line: /Users/mhalford/opt/anaconda3/envs/creme/bin/coverage debug sys\r\n         source_match: -none-\r\n    source_pkgs_match: -none-\r\n        include_match: -none-\r\n           omit_match: *__init__.py\r\n                       *.so\r\n          cover_match: /Users/mhalford/opt/anaconda3/envs/creme/lib/python3.7/site-packages/coverage\r\n          pylib_match: /Users/mhalford/opt/anaconda3/envs/creme/lib/python3.7\r\n```\r\n\r\n3. What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\n\r\n```\r\nalabaster==0.7.12\r\nappnope==0.1.0\r\nargh==0.26.2\r\nastroid==2.3.3\r\nattrs==19.3.0\r\nBabel==2.8.0\r\nbackcall==0.1.0\r\nbeautifulsoup4==4.8.2\r\nbleach==3.1.0\r\ncertifi==2019.11.28\r\nchardet==3.0.4\r\ncoverage==4.5.4\r\n-e git+https://github.com/creme-ml/creme.git@15f211de5f9bd8b47258832f65e3e84a93daba58#egg=creme\r\ncss-html-js-minify==2.5.5\r\ncycler==0.10.0\r\nCython==0.29.14\r\ndecorator==4.4.1\r\ndefusedxml==0.6.0\r\ndoc8==0.8.0\r\ndocutils==0.16\r\nentrypoints==0.3\r\nflit==2.2.0\r\nflit-core==2.2.0\r\ngraphviz==0.13.2\r\nidna==2.8\r\nimagesize==1.2.0\r\nimportlib-metadata==1.5.0\r\nipykernel==5.1.4\r\nipython==7.12.0\r\nipython-genutils==0.2.0\r\nipywidgets==7.5.1\r\nisort==4.3.21\r\njedi==0.16.0\r\nJinja2==2.11.1\r\njoblib==0.14.1\r\njson5==0.9.1\r\njsonschema==3.2.0\r\njupyter==1.0.0\r\njupyter-client==5.3.4\r\njupyter-console==6.1.0\r\njupyter-core==4.6.1\r\njupyterlab==1.2.6\r\njupyterlab-server==1.0.6\r\nkiwisolver==1.1.0\r\nlazy-object-proxy==1.4.3\r\nlivereload==2.6.1\r\nlxml==4.5.0\r\nm2r==0.2.1\r\nMarkupSafe==1.1.1\r\nmatplotlib==3.1.3\r\nmccabe==0.6.1\r\nmistune==0.8.4\r\nmore-itertools==8.2.0\r\nnbconvert==5.6.1\r\nnbformat==5.0.4\r\nnbsphinx==0.5.1\r\nnbval==0.9.4\r\nnotebook==6.0.3\r\nnumpy==1.18.1\r\npackaging==20.1\r\npandocfilters==1.4.2\r\nparso==0.6.1\r\npathtools==0.1.2\r\npbr==5.4.4\r\npexpect==4.8.0\r\npickleshare==0.7.5\r\npluggy==0.13.1\r\nport-for==0.3.1\r\nprometheus-client==0.7.1\r\nprompt-toolkit==3.0.3\r\nptyprocess==0.6.0\r\npy==1.8.1\r\nPygments==2.5.2\r\npylint==2.4.4\r\npyobjc-core==6.1\r\npyobjc-framework-Cocoa==6.1\r\npyobjc-framework-FSEvents==6.1\r\npyparsing==2.4.6\r\npyrsistent==0.15.7\r\npytest==5.3.5\r\npytest-cov==2.8.1\r\npytest-cython==0.1.0\r\npython-dateutil==2.8.1\r\npython-slugify==4.0.0\r\npytoml==0.1.21\r\npytz==2019.3\r\nPyYAML==5.3\r\npyzmq==18.1.1\r\nqtconsole==4.6.0\r\nrequests==2.22.0\r\nrestructuredtext-lint==1.3.0\r\nscikit-learn==0.22.1\r\nscipy==1.4.1\r\nSend2Trash==1.5.0\r\nsix==1.14.0\r\nsnowballstemmer==2.0.0\r\nsoupsieve==1.9.5\r\nSphinx==2.3.1\r\nsphinx-autobuild==0.7.1\r\nsphinx-copybutton==0.2.8\r\nsphinx-material==0.0.23\r\nsphinxcontrib-applehelp==1.0.1\r\nsphinxcontrib-devhelp==1.0.1\r\nsphinxcontrib-htmlhelp==1.0.2\r\nsphinxcontrib-jsmath==1.0.1\r\nsphinxcontrib-qthelp==1.0.2\r\nsphinxcontrib-serializinghtml==1.1.3\r\nstevedore==1.31.0\r\nterminado==0.8.3\r\ntestpath==0.4.4\r\ntext-unidecode==1.3\r\ntorch==1.4.0\r\ntornado==6.0.3\r\ntraitlets==4.3.3\r\nUnidecode==1.1.1\r\nurllib3==1.25.8\r\nwatchdog==0.10.1\r\nwcwidth==0.1.8\r\nwebencodings==0.5.1\r\nwidgetsnbextension==3.5.1\r\nwrapt==1.11.2\r\nzipp==2.1.0\r\n```\r\n\r\n4. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\n\r\nYou can download the `master` branch of [creme](https://github.com/creme-ml/creme) to check out the error for yourself. The `make cython` command builds the Cython code.\r\n\r\n```sh\r\n>>> git clone https://creme-ml.github.io/\r\n>>> cd creme\r\n>>> make cython\r\n```\r\n\r\n5. What commands did you run?\r\n\r\n```sh\r\n>>> coverage run -m pytest creme/optim\r\n>>> coverage report\r\n```\r\n\r\n**Expected behavior**\r\n\r\nI'd expect no encoding issue to arise.\r\n\r\n**Additional context**\r\n\r\nI've tried setting the language-level of Cython to 3 instead of 2 (the default) to no avail.\r\n\r\nPS: by the way, great work on this library, I love it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/933", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/933/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/933/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/933/events", "html_url": "https://github.com/nedbat/coveragepy/issues/933", "id": 566478295, "node_id": "MDU6SXNzdWU1NjY0NzgyOTU=", "number": 933, "title": "Travis CI/Mac: No module named 'coverage'", "user": {"login": "typeworld", "id": 58165725, "node_id": "MDQ6VXNlcjU4MTY1NzI1", "avatar_url": "https://avatars0.githubusercontent.com/u/58165725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/typeworld", "html_url": "https://github.com/typeworld", "followers_url": "https://api.github.com/users/typeworld/followers", "following_url": "https://api.github.com/users/typeworld/following{/other_user}", "gists_url": "https://api.github.com/users/typeworld/gists{/gist_id}", "starred_url": "https://api.github.com/users/typeworld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/typeworld/subscriptions", "organizations_url": "https://api.github.com/users/typeworld/orgs", "repos_url": "https://api.github.com/users/typeworld/repos", "events_url": "https://api.github.com/users/typeworld/events{/privacy}", "received_events_url": "https://api.github.com/users/typeworld/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1784642395, "node_id": "MDU6TGFiZWwxNzg0NjQyMzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/not-our-bug", "name": "not-our-bug", "color": "b997e5", "default": false, "description": "The problem was elsewhere"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-17T19:19:36Z", "updated_at": "2020-03-10T16:42:59Z", "closed_at": "2020-03-10T16:42:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since a few days or weeks, I'm not sure when it started, my Mac tests on Travis CI are failing with:\r\n\r\n```\r\ncoverage run ./Lib/typeWorld/test.py\r\nTraceback (most recent call last):\r\n  File \"/Users/travis/venv/bin/coverage\", line 5, in <module>\r\n    from coverage.cmdline import main\r\nModuleNotFoundError: No module named 'coverage'\r\n```\r\n\r\nMy build matrix includes Windows and Linux OSs, and only the Mac one fails with the above traceback. \r\nI'm not sure whether to report the issue here or there, so I started here ;)\r\nSince it's Travis CI, I'm assuming that the latest coverage package version is installed. At least I haven't specified any specific version anywhere.\r\n\r\nYou can find the test run here, and restart yourself, I believe: https://travis-ci.org/typeworld/typeworld/jobs/651640312\r\n\r\nPlease let me know if I can assist with anything.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/930", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/930/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/930/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/930/events", "html_url": "https://github.com/nedbat/coveragepy/issues/930", "id": 560589801, "node_id": "MDU6SXNzdWU1NjA1ODk4MDE=", "number": 930, "title": "Trouble understanding --source option", "user": {"login": "pbaughman", "id": 4884343, "node_id": "MDQ6VXNlcjQ4ODQzNDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4884343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pbaughman", "html_url": "https://github.com/pbaughman", "followers_url": "https://api.github.com/users/pbaughman/followers", "following_url": "https://api.github.com/users/pbaughman/following{/other_user}", "gists_url": "https://api.github.com/users/pbaughman/gists{/gist_id}", "starred_url": "https://api.github.com/users/pbaughman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pbaughman/subscriptions", "organizations_url": "https://api.github.com/users/pbaughman/orgs", "repos_url": "https://api.github.com/users/pbaughman/repos", "events_url": "https://api.github.com/users/pbaughman/events{/privacy}", "received_events_url": "https://api.github.com/users/pbaughman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-02-05T19:46:23Z", "updated_at": "2020-02-06T23:16:42Z", "closed_at": "2020-02-06T23:03:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nRunning `coverage run --source` does not seem to find all of the source files I would expect it to\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. What version of Python are you using?\r\n  - Python 2.7.17\r\n1. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n    ```\r\n    coverage debug sys                                                                                                              [48/1886]\r\n    -- sys -------------------------------------------------------                                                                                                       \r\n                        version: 5.0.3                                                                                                                               \r\n                       coverage: /usr/local/lib/python2.7/dist-packages/coverage/__init__.pyc                                                                        \r\n                         tracer: -none-                                                                                                                              \r\n                        CTracer: available                                                                                                                           \r\n           plugins.file_tracers: -none-                                                                                                                              \r\n            plugins.configurers: -none-                                                                                                                              \r\n      plugins.context_switchers: -none-                                                                                                                              \r\n              configs_attempted: .coveragerc                                 \r\n                                 setup.cfg              \r\n                                 tox.ini                                 \r\n                                 pyproject.toml           \r\n                   configs_read: -none-                    \r\n                    config_file: None\r\n                config_contents: -none-\r\n                      data_file: -none-\r\n                         python: 2.7.17 (default, Nov  7 2019, 10:07:09) [GCC 7.4.0]\r\n                       platform: Linux-5.3.0-26-generic-x86_64-with-Ubuntu-18.04-bionic\r\n                 implementation: CPython\r\n\r\n    ```\r\n1. What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\n1. What commands did you run?\r\n\r\n**Expected behavior**\r\nI have a number of python packages in a directory like\r\n```\r\n+ pete_repo\r\n    + python_project_1\r\n        + setup.py\r\n        + src\r\n            + python_project_1\r\n                + __init__.py\r\n                + a.py\r\n                + b.py\r\n                + c.py\r\n    + python_project_2\r\n        + setup.py\r\n        + src\r\n            + python_project_2\r\n                + __init__.py\r\n                + d.py\r\n                + e.py\r\n```\r\n\r\nBased on the documentation [here](https://coverage.readthedocs.io/en/coverage-5.0.3/source.html#source) I would expect to be able to do something like\r\n\r\n```\r\ncoverage run --source=pete_repo empty_file.py\r\ncoverage report\r\n```\r\n\r\nAnd see 0% coverage for both `__init__.py` files, as well as a.py through e.py\r\n\r\nWhat actually happens is I get an empty coverage report with no files at all.\r\n\r\nInterestingly, if I get a bit more specific with the path, I can start to get results that approach what I expect.  For example:\r\n\r\n```\r\ncoverage run --source=pete_repo/python_project_1/src empty_file.py\r\ncoverage report\r\nName                                                                 Stmts   Miss  Cover\r\n----------------------------------------------------------------------------------------\r\npython_project_1/src/python_project_1/__init__.py                      0      0   100%\r\npython_project_1/src/python_project_1/a.py                             43     43    0%\r\npython_project_1/src/python_project_1/b.py                             18     18    0%\r\npython_project_1/src/python_project_1/c.py                             134    134   0%\r\n----------------------------------------------------------------------------------------\r\n. . .\r\n```\r\n\r\nHowever, if I go up one directory, things stop working again.  It finds the setup.py file, but\r\nnot any of the actual python files containing code\r\n```\r\ncoverage run --source=pete_repo/python_project_1 empty_file.py\r\ncoverage report\r\nName                                                                 Stmts   Miss  Cover\r\n----------------------------------------------------------------------------------------\r\npython_project_1/setup.py                      0      0   100%\r\n----------------------------------------------------------------------------------------\r\n```\r\n\r\n**Additional context**\r\nI can probably work around this issue by finding all the __init__.py files and running 'coverage' for each directory that contains one, but I'd also like to understand why my expectations are off from reading the documentation.\r\n\r\nAm I doing something to mess this up?\r\n\r\nThanks so much!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/929", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/929/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/929/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/929/events", "html_url": "https://github.com/nedbat/coveragepy/issues/929", "id": 558635438, "node_id": "MDU6SXNzdWU1NTg2MzU0Mzg=", "number": 929, "title": "The combine function is failing for me in version 5.0.3", "user": {"login": "jamespfennell", "id": 12140490, "node_id": "MDQ6VXNlcjEyMTQwNDkw", "avatar_url": "https://avatars3.githubusercontent.com/u/12140490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamespfennell", "html_url": "https://github.com/jamespfennell", "followers_url": "https://api.github.com/users/jamespfennell/followers", "following_url": "https://api.github.com/users/jamespfennell/following{/other_user}", "gists_url": "https://api.github.com/users/jamespfennell/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamespfennell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamespfennell/subscriptions", "organizations_url": "https://api.github.com/users/jamespfennell/orgs", "repos_url": "https://api.github.com/users/jamespfennell/repos", "events_url": "https://api.github.com/users/jamespfennell/events{/privacy}", "received_events_url": "https://api.github.com/users/jamespfennell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-02T03:23:19Z", "updated_at": "2020-04-23T22:03:52Z", "closed_at": "2020-04-23T22:03:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nThe `coverage combine` function is breaking for me in 5.0.3. When I run `coverage combine path/to/valid/coverage/file` I get an error \"No usable data files\".\r\n\r\n**To Reproduce**\r\n\r\nUnfortunately I can't come up with reproduction steps using simple Python scripts; I only hit the error when generating coverage reports for one of my projects. So:\r\n\r\n- Checkout the branch `UpdateDeps` in [this Github repository](https://github.com/jamespfennell/transiter).\r\n- Create a new virtual env (I'm using Python 3.6) and run `pip install -e .` and `pip install -r dev-requirements.txt` to get the right dependencies.\r\n- Run the unit tests with coverage by running `coverage run -m pytest tests/unit`.\r\n- The coverage file will be in `coverage/.coverage` because of the settings in `.coveragerc`. Execute `coverage combine coverage/.coverage`.\r\n\r\n**Expected behavior**\r\n\r\nThere are no errors. When I perform these steps in `master` (which has coverage.py pinned at 4.5.4) I get no errors.\r\n\r\n**Additional context**\r\n\r\n- Running `coverage report` gives the correct report! So the coverage file seems to be valid.\r\n- FWIW, here's my use case for the `coverage combine` command. In Travis CI, I run my unit tests inside Docker containers so that if something goes wrong I can easily replicate the test environment locally. The coverage report generated this way references my source files with respect to their location inside the Docker container, rather than their location in my repository, and this breaks my coveralls integration. So I run `coverage combine` in order to convert the file paths in the coverage report from being relative to the Docker container to being relative to the Git repo. This works, in part, because of settings I have in `.coveragerc`. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/926", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/926/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/926/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/926/events", "html_url": "https://github.com/nedbat/coveragepy/issues/926", "id": 555051302, "node_id": "MDU6SXNzdWU1NTUwNTEzMDI=", "number": 926, "title": "Incorrect lines marked as covered", "user": {"login": "cript0nauta", "id": 1222362, "node_id": "MDQ6VXNlcjEyMjIzNjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1222362?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cript0nauta", "html_url": "https://github.com/cript0nauta", "followers_url": "https://api.github.com/users/cript0nauta/followers", "following_url": "https://api.github.com/users/cript0nauta/following{/other_user}", "gists_url": "https://api.github.com/users/cript0nauta/gists{/gist_id}", "starred_url": "https://api.github.com/users/cript0nauta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cript0nauta/subscriptions", "organizations_url": "https://api.github.com/users/cript0nauta/orgs", "repos_url": "https://api.github.com/users/cript0nauta/repos", "events_url": "https://api.github.com/users/cript0nauta/events{/privacy}", "received_events_url": "https://api.github.com/users/cript0nauta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1784642395, "node_id": "MDU6TGFiZWwxNzg0NjQyMzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/not-our-bug", "name": "not-our-bug", "color": "b997e5", "default": false, "description": "The problem was elsewhere"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-25T06:45:30Z", "updated_at": "2020-01-26T22:17:43Z", "closed_at": "2020-01-26T22:17:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nI found a corner case in which coverage.py reports uncovered lines to be covered, and covered lines to be uncovered. Here is the minimal example that triggers the bug:\r\n\r\n```python\r\nx=1\r\nif x:\r\n    if True or True:\r\n        # The \"pass\" below should be marked as covered, but it isnt.\r\n        # When replacing \"True or True\" for just \"True\", it will be covered, as expected\r\n        # When changing the \"pass\" below for another thing, like \"x=1\", it will be covered, as expected\r\n        pass\r\nelse:\r\n    # This should't be covered, and won't be covered.\r\n    # Unless replacing \"if x\" for \"if 1\". In this case, the following line will\r\n    # be incorrectly marked as covered:\r\n    1/0\r\n```\r\n\r\n**To Reproduce**\r\n\r\nRun `coverage run path_to_the_script_above.py && coverage html`. The resulting `htmlcov/index.html` file will have the coverage information that indicates the presence of the bug.\r\n\r\nI tested the bug with versions 4.5.4, 5.0.3 and in the `master` branch of this project. I'm using Python 3.7.6 in a NixOS system.\r\n\r\n**Expected behavior**\r\nAs explained in the comments of the script, the `pass` statement of the script should always be marked as covered. And the `1/0` line should never be marked as covered.\r\n\r\n**Additional context**\r\nOutput of `coverage debug sys`:\r\n\r\n```-- sys -------------------------------------------------------\r\n                        version: 5.0.4a0\r\n                       coverage: /home/cript0nauta/coveragepy/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: unavailable\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                                 setup.cfg\r\n                                 tox.ini\r\n                                 pyproject.toml\r\n                   configs_read: -none-\r\n                    config_file: None\r\n                config_contents: -none-\r\n                      data_file: -none-\r\n                         python: 3.7.6 (default, Dec 18 2019, 19:23:55) [GCC 9.2.0]\r\n                       platform: Linux-4.19.87-x86_64-with-glibc2.2.5\r\n                 implementation: CPython\r\n                     executable: /nix/store/s7vw8y02cqzx8bnjxl4bkhlnwvz6ws1s-python3-3.7.6/bin/python3.7\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n                            pid: 2351\r\n                           path: /run/user/1000/tmp.rXRCNXV4lX/bin\r\n                                 /run/user/1000/tmp.rXRCNXV4lX/lib/python3.7/site-packages\r\n                                 /nix/store/s7vw8y02cqzx8bnjxl4bkhlnwvz6ws1s-python3-3.7.6/lib/python3.7/site-packages\r\n                                 /nix/store/wa1pwr7lxg29z8b8f8880y13ql3d2l7z-python3.7-setuptools-44.0.0/lib/python3.7/site-packages\r\n                                 /nix/store/93xaszpfq47rgmavcz333vfphm495ri7-python3.7-wheel-0.33.6/lib/python3.7/site-packages\r\n                                 /nix/store/bnkfjk37n6q5qcv9nhi0nda3iazbvaga-python3.7-pip-19.3.1/lib/python3.7/site-packages\r\n                                 /nix/store/s7vw8y02cqzx8bnjxl4bkhlnwvz6ws1s-python3-3.7.6/lib/python37.zip\r\n                                 /nix/store/s7vw8y02cqzx8bnjxl4bkhlnwvz6ws1s-python3-3.7.6/lib/python3.7\r\n                                 /nix/store/s7vw8y02cqzx8bnjxl4bkhlnwvz6ws1s-python3-3.7.6/lib/python3.7/lib-dynload\r\n                    environment: OBJCOPY = objcopy\r\n                                 PYTHONHASHSEED = 0\r\n                                 PYTHONNOUSERSITE = 1\r\n                                 PYTHONPATH = /run/user/1000/tmp.rXRCNXV4lX/lib/python3.7/site-packages:/nix/store/s7vw8y02cqzx8bnjxl4bkhlnwvz6ws1s-python3-3.7.6/lib/python3.7/site-packages:/nix/store/s7vw8y02cqzx8bnjxl4bkhlnwvz6ws1s-python3-3.7.6/lib/python3.7/site-packages:/nix/store/wa1pwr7lxg29z8b8f8880y13ql3d2l7z-python3.7-setuptools-44.0.0/lib/python3.7/site-packages:/nix/store/wa1pwr7lxg29z8b8f8880y13ql3d2l7z-python3.7-setuptools-44.0.0/lib/python3.7/site-packages:/nix/store/s7vw8y02cqzx8bnjxl4bkhlnwvz6ws1s-python3-3.7.6/lib/python3.7/site-packages:/nix/store/s7vw8y02cqzx8bnjxl4bkhlnwvz6ws1s-python3-3.7.6/lib/python3.7/site-packages:/nix/store/93xaszpfq47rgmavcz333vfphm495ri7-python3.7-wheel-0.33.6/lib/python3.7/site-packages:/nix/store/93xaszpfq47rgmavcz333vfphm495ri7-python3.7-wheel-0.33.6/lib/python3.7/site-packages:/nix/store/bnkfjk37n6q5qcv9nhi0nda3iazbvaga-python3.7-pip-19.3.1/lib/python3.7/site-packages:/nix/store/bnkfjk37n6q5qcv9nhi0nda3iazbvaga-python3.7-pip-19.3.1/lib/python3.7/site-packages:/nix/store/s7vw8y02cqzx8bnjxl4bkhlnwvz6ws1s-python3-3.7.6/lib/python3.7/site-packages\r\n                   command_line: /run/user/1000/tmp.rXRCNXV4lX/bin/coverage debug sys\r\n                sqlite3_version: 2.6.0\r\n         sqlite3_sqlite_version: 3.30.1\r\n             sqlite3_temp_store: 0\r\n        sqlite3_compile_options: COMPILER=gcc-9.2.0\r\n                                 ENABLE_COLUMN_METADATA\r\n                                 ENABLE_DBSTAT_VTAB\r\n                                 ENABLE_FTS3\r\n                                 ENABLE_FTS3_PARENTHESIS\r\n                                 ENABLE_FTS3_TOKENIZER\r\n                                 ENABLE_FTS4\r\n                                 ENABLE_FTS5\r\n                                 ENABLE_JSON1\r\n                                 ENABLE_RTREE\r\n                                 ENABLE_STMT_SCANSTATUS\r\n                                 ENABLE_UNLOCK_NOTIFY\r\n                                 MAX_EXPR_DEPTH=10000\r\n                                 MAX_VARIABLE_NUMBER=250000\r\n                                 SECURE_DELETE\r\n                                 SOUNDEX\r\n                                 THREADSAFE=1\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/925", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/925/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/925/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/925/events", "html_url": "https://github.com/nedbat/coveragepy/issues/925", "id": 554721922, "node_id": "MDU6SXNzdWU1NTQ3MjE5MjI=", "number": 925, "title": "ModuleNotFoundError when using python -mcoverage run", "user": {"login": "joren485", "id": 7031489, "node_id": "MDQ6VXNlcjcwMzE0ODk=", "avatar_url": "https://avatars0.githubusercontent.com/u/7031489?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joren485", "html_url": "https://github.com/joren485", "followers_url": "https://api.github.com/users/joren485/followers", "following_url": "https://api.github.com/users/joren485/following{/other_user}", "gists_url": "https://api.github.com/users/joren485/gists{/gist_id}", "starred_url": "https://api.github.com/users/joren485/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joren485/subscriptions", "organizations_url": "https://api.github.com/users/joren485/orgs", "repos_url": "https://api.github.com/users/joren485/repos", "events_url": "https://api.github.com/users/joren485/events{/privacy}", "received_events_url": "https://api.github.com/users/joren485/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-24T12:58:20Z", "updated_at": "2020-01-26T19:50:47Z", "closed_at": "2020-01-26T19:50:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Description\r\nUsing `python -mcoverage run` throws a `ModuleNotFoundError` error, while using `coverage run` does not. I use [`poetry`](https://github.com/python-poetry/poetry) as a dependency and virtual environment manager.\r\n\r\n### To Reproduce\r\n**What version of Python are you using?**\r\n```Bash\r\n$ poetry run python --version\r\nPython 3.8.1\r\n```\r\n**What version of coverage.py are you using?**\r\n```Bash\r\n$ poetry run coverage debug sys\r\n-- sys -------------------------------------------------------\r\n                        version: 5.0.3\r\n                       coverage: /home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: available\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                                 setup.cfg\r\n                                 tox.ini\r\n                                 pyproject.toml\r\n                   configs_read: /tmp/Website/pyproject.toml\r\n                    config_file: None\r\n                config_contents: -none-\r\n                      data_file: -none-\r\n                         python: 3.8.1 (default, Jan  8 2020, 23:09:20) [GCC 9.2.0]\r\n                       platform: Linux-5.4.13-arch1-1-x86_64-with-glibc2.2.5\r\n                 implementation: CPython\r\n                     executable: /home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/bin/python\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n                            pid: 141790\r\n                            cwd: /tmp/Website\r\n                           path: /home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/bin\r\n                                 /usr/lib/python38.zip\r\n                                 /usr/lib/python3.8\r\n                                 /usr/lib/python3.8/lib-dynload\r\n                                 /home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages\r\n                                 /home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/src/django-admin-autocomplete-filter\r\n                    environment: -none-\r\n                   command_line: /home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/bin/coverage debug sys\r\n                sqlite3_version: 2.6.0\r\n         sqlite3_sqlite_version: 3.30.1\r\n        sqlite3_compile_options: COMPILER=gcc-9.2.0\r\n                                 ENABLE_COLUMN_METADATA\r\n                                 ENABLE_DBSTAT_VTAB\r\n                                 ENABLE_FTS3\r\n                                 ENABLE_FTS3_TOKENIZER\r\n                                 ENABLE_FTS4\r\n                                 ENABLE_FTS5\r\n                                 ENABLE_JSON1\r\n                                 ENABLE_RTREE\r\n                                 ENABLE_UNLOCK_NOTIFY\r\n                                 HAVE_ISNAN\r\n                                 MAX_EXPR_DEPTH=10000\r\n                                 MAX_VARIABLE_NUMBER=250000\r\n                                 SECURE_DELETE\r\n                                 TEMP_STORE=1\r\n                                 THREADSAFE=1\r\n```\r\n**What versions of what packages do you have installed?**\r\n```Bash\r\n$ poetry run pip freeze\r\nappdirs==1.4.3\r\nasgiref==3.2.3\r\nattrs==19.3.0\r\nbeautifulsoup4==4.8.2\r\nblack==19.10b0\r\ncertifi==2019.11.28\r\nchardet==3.0.4\r\nClick==7.0\r\ncoverage==5.0.3\r\nDjango==3.0.2\r\n-e git+https://github.com/farhan0581/django-admin-autocomplete-filter.git@2f4f80bfca31426faf1b7dab3f8366296f4fe67e#egg=django_admin_autocomplete_filter\r\ndjango-appconf==1.0.3\r\ndjango-bootstrap4==1.1.1\r\ndjango-compressor==2.4\r\ndjango-sass-processor==0.8\r\nentrypoints==0.3\r\nFaker==4.0.0\r\nflake8==3.7.9\r\nflake8-import-order==0.18.1\r\nfreezegun==0.3.14\r\nidna==2.8\r\nlibsass==0.19.4\r\nmccabe==0.6.1\r\npathspec==0.7.0\r\nPillow==7.0.0\r\npycodestyle==2.5.0\r\npydocstyle==5.0.2\r\npyflakes==2.1.1\r\npython-dateutil==2.8.1\r\npytz==2019.3\r\nrcssmin==1.0.6\r\nregex==2020.1.8\r\nrequests==2.22.0\r\nrjsmin==1.1.0\r\nsix==1.14.0\r\nsnowballstemmer==2.0.0\r\nsoupsieve==1.9.5\r\nsqlparse==0.3.0\r\ntext-unidecode==1.3\r\ntoml==0.10.0\r\ntyped-ast==1.4.1\r\nurllib3==1.25.8\r\n```\r\n\r\n**What code are you running?**\r\nThe `master` branch of [GipHouse/Website](https://github.com/GipHouse/Website).\r\n\r\n**What commands did you run?**\r\nThe following steps show how to reproduce the problem.\r\n```Bash\r\n$ cd /tmp/\r\n$ git clone https://github.com/GipHouse/Website.git\r\n...\r\n$ cd Website\r\n$ poetry install\r\n...\r\n$ poetry run coverage run website/manage.py test\r\nCreating test database for alias 'default'...\r\nSystem check identified no issues (0 silenced).\r\n...........................................................................................................................................\r\n----------------------------------------------------------------------\r\nRan 139 tests in 3.484s\r\n\r\nOK\r\nDestroying test database for alias 'default'...\r\n$ poetry run python -mcoverage run website/manage.py test\r\nTraceback (most recent call last):\r\n  File \"website/manage.py\", line 15, in <module>\r\n    execute_from_command_line(sys.argv)\r\n  File \"/home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/django/core/management/__init__.py\", line 401, in execute_from_command_line\r\n    utility.execute()\r\n  File \"/home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/django/core/management/__init__.py\", line 395, in execute\r\n    self.fetch_command(subcommand).run_from_argv(self.argv)\r\n  File \"/home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/django/core/management/commands/test.py\", line 23, in run_from_argv\r\n    super().run_from_argv(argv)\r\n  File \"/home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/django/core/management/base.py\", line 320, in run_from_argv\r\n    parser = self.create_parser(argv[0], argv[1])\r\n  File \"/home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/django/core/management/base.py\", line 294, in create_parser\r\n    self.add_arguments(parser)\r\n  File \"/home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/django/core/management/commands/test.py\", line 44, in add_arguments\r\n    test_runner_class = get_runner(settings, self.test_runner)\r\n  File \"/home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/django/test/utils.py\", line 301, in get_runner\r\n    test_runner_class = test_runner_class or settings.TEST_RUNNER\r\n  File \"/home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/django/conf/__init__.py\", line 76, in __getattr__\r\n    self._setup(name)\r\n  File \"/home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/django/conf/__init__.py\", line 63, in _setup\r\n    self._wrapped = Settings(settings_module)\r\n  File \"/home/joren/.cache/pypoetry/virtualenvs/giphousewebsite-PQqkI1vM-py3.8/lib/python3.8/site-packages/django/conf/__init__.py\", line 142, in __init__\r\n    mod = importlib.import_module(self.SETTINGS_MODULE)\r\n  File \"/usr/lib/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 961, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 961, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 973, in _find_and_load_unlocked\r\nModuleNotFoundError: No module named 'giphousewebsite'\r\n```\r\n\r\n### Expected Behavior\r\n`python -mcoverage run` and `coverage run` should both succeed and have the same output.\r\n\r\n### Additional Context\r\nI noticed a similar problem in #862, but that issue was fixed in 5.0.3 (which I am using).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/924", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/924/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/924/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/924/events", "html_url": "https://github.com/nedbat/coveragepy/issues/924", "id": 553400808, "node_id": "MDU6SXNzdWU1NTM0MDA4MDg=", "number": 924, "title": "sqlite3.OperationalError: database schema has changed", "user": {"login": "Lucas-C", "id": 925560, "node_id": "MDQ6VXNlcjkyNTU2MA==", "avatar_url": "https://avatars1.githubusercontent.com/u/925560?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lucas-C", "html_url": "https://github.com/Lucas-C", "followers_url": "https://api.github.com/users/Lucas-C/followers", "following_url": "https://api.github.com/users/Lucas-C/following{/other_user}", "gists_url": "https://api.github.com/users/Lucas-C/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lucas-C/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lucas-C/subscriptions", "organizations_url": "https://api.github.com/users/Lucas-C/orgs", "repos_url": "https://api.github.com/users/Lucas-C/repos", "events_url": "https://api.github.com/users/Lucas-C/events{/privacy}", "received_events_url": "https://api.github.com/users/Lucas-C/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-22T09:05:46Z", "updated_at": "2020-01-22T11:36:03Z", "closed_at": "2020-01-22T10:53:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhile using `pytest` & `pytest-cov`, I get the following exception:\r\n```\r\nsqlite3.OperationalError: database schema has changed\r\n```\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. What version of Python are you using?\r\n`Python 3.6.7`\r\n1. What version of coverage.py are you using?\r\n`coverage-5.0.3-cp36-cp36m-manylinux1_x86_64.whl`\r\n1. What versions of what packages do you have installed?\r\n`Pygments-2.5.2 aspy.yaml-1.3.0 bleach-3.1.0 cfgv-2.0.1 coverage-5.0.3 docutils-0.16 identify-1.4.10 importlib-metadata-1.4.0 importlib-resources-1.0.2 nodeenv-1.3.4 packaging-20.0 pluggy-0.13.1 pre-commit-1.21.0 pre-commit-hooks-markup-1.0.0 pyparsing-2.4.6 pytest-5.3.4 pytest-cov-2.8.1 pyyaml-5.3 readme-renderer-24.0 toml-0.10.0 wcwidth-0.1.8 webencodings-0.5.1 zipp-2.0.0`\r\n1. What code are you running?\r\nI am executing the tests from repo https://github.com/Lucas-C/pre-commit-hooks-markup in Travis CI, through [pre-commit](https://pre-commit.com)\r\n1. What commands did you run?\r\n```\r\npip install -U . -r dev-requirements.txt\r\npre-commit run --all-files\r\n```\r\n\r\n**Expected behavior**\r\nNo error raised.\r\n\r\n**Additional context**\r\nHere is the full Travis CI execution log where I witnessed this, through a `pytest` execution:\r\nhttps://travis-ci.org/Lucas-C/pre-commit-hooks-markup/builds/639831451\r\n\r\nGiven :\r\n- the multiple layers of execution (`pre-commit` invoking `pytest` using `pytest-cov` invoking `coverage`), meaning the bug may not originate from `coverage.py`\r\n- the fact that the bug only show up in Travis CI and not on my own machine\r\n\r\n...I do not expect an immediate solution by posting my issue here, ony a few pointers maybe.\r\nAlso, given the error message, I though it would be best to report the issue in this project bug tracker.\r\n\r\nI'm going to perform some more tests in Travis CI, but I have a simple question : could this be due to an old `coverage.py` DB remaining in Travis workspace from old test executions ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/922", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/922/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/922/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/922/events", "html_url": "https://github.com/nedbat/coveragepy/issues/922", "id": 550163813, "node_id": "MDU6SXNzdWU1NTAxNjM4MTM=", "number": 922, "title": "Report hasn't the TOTAL line if one file is tested only ", "user": {"login": "mosling", "id": 3647440, "node_id": "MDQ6VXNlcjM2NDc0NDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/3647440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mosling", "html_url": "https://github.com/mosling", "followers_url": "https://api.github.com/users/mosling/followers", "following_url": "https://api.github.com/users/mosling/following{/other_user}", "gists_url": "https://api.github.com/users/mosling/gists{/gist_id}", "starred_url": "https://api.github.com/users/mosling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mosling/subscriptions", "organizations_url": "https://api.github.com/users/mosling/orgs", "repos_url": "https://api.github.com/users/mosling/repos", "events_url": "https://api.github.com/users/mosling/events{/privacy}", "received_events_url": "https://api.github.com/users/mosling/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321126, "node_id": "MDU6TGFiZWw5NzMzMjExMjY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}, {"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 973387624, "node_id": "MDU6TGFiZWw5NzMzODc2MjQ=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/report", "name": "report", "color": "ededed", "default": false, "description": null}, {"id": 973321138, "node_id": "MDU6TGFiZWw5NzMzMjExMzg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-15T12:43:56Z", "updated_at": "2020-01-26T22:19:37Z", "closed_at": "2020-01-26T22:19:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nA very simple setup, I have one python script (script.py) and a test for this script (script_test.py).\r\n\r\nThe result for `coverage run -m pytest` and `coverage report` is\r\n\r\n```\r\nName            Stmts   Miss  Cover\r\n-----------------------------------\r\nadder.py            2      0   100%\r\nadder_test.py       7      1    86%\r\n-----------------------------------\r\nTOTAL               9      1    89%\r\n```\r\nBut the same with `coverage run --omit='*_test.py' -m pytest`  and `coverage report` results into\r\n\r\n```\r\nName       Stmts   Miss  Cover\r\n------------------------------\r\nadder.py       2      0   100%\r\n```\r\n\r\nThe summary line with TOTAL is missing\r\nI use GitLab and look for the TOTAL line to catch the test coverage.\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. Python 3.8.0\r\n1. Coverage.py, version 5.0.3 with C extension\r\n1. Example project at https://github.com/mosling/coverage-example\r\n\r\n**Expected behavior**\r\nTOTAL line should appear in every case. It is important for data processing to have the same behavior in each case, I never see the output ;-)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/918", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/918/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/918/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/918/events", "html_url": "https://github.com/nedbat/coveragepy/issues/918", "id": 547511317, "node_id": "MDU6SXNzdWU1NDc1MTEzMTc=", "number": 918, "title": "sqlite3.OperationalError: no such table: meta", "user": {"login": "kura", "id": 109507, "node_id": "MDQ6VXNlcjEwOTUwNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/109507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kura", "html_url": "https://github.com/kura", "followers_url": "https://api.github.com/users/kura/followers", "following_url": "https://api.github.com/users/kura/following{/other_user}", "gists_url": "https://api.github.com/users/kura/gists{/gist_id}", "starred_url": "https://api.github.com/users/kura/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kura/subscriptions", "organizations_url": "https://api.github.com/users/kura/orgs", "repos_url": "https://api.github.com/users/kura/repos", "events_url": "https://api.github.com/users/kura/events{/privacy}", "received_events_url": "https://api.github.com/users/kura/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321126, "node_id": "MDU6TGFiZWw5NzMzMjExMjY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/4", "html_url": "https://github.com/nedbat/coveragepy/milestone/4", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/4/labels", "id": 4974471, "node_id": "MDk6TWlsZXN0b25lNDk3NDQ3MQ==", "number": 4, "title": "5.0.3", "description": "", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2020-01-06T00:29:34Z", "updated_at": "2020-01-12T12:37:49Z", "due_on": null, "closed_at": "2020-01-12T12:37:49Z"}, "comments": 4, "created_at": "2020-01-09T14:27:11Z", "updated_at": "2020-01-12T12:36:57Z", "closed_at": "2020-01-09T22:00:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nSince coverage `5.0.2` an sqlite exception is being thrown on Python 3.6 and 3.7. I have not tested 3.8 or any earlier versions.\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/coverage/sqldata.py\", line 1033, in execute\r\n    return self.con.execute(sql, parameters)\r\nsqlite3.OperationalError: no such table: meta\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python3.6/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/lib64/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/nose/__main__.py\", line 8, in <module>\r\n    run_exit()\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/nose/core.py\", line 121, in __init__\r\n    **extra_args)\r\n  File \"/usr/lib64/python3.6/unittest/main.py\", line 95, in __init__\r\n    self.runTests()\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/nose/core.py\", line 207, in runTests\r\n    result = self.testRunner.run(self.test)\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/nose/core.py\", line 66, in run\r\n    result.printErrors()\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/nose/result.py\", line 110, in printErrors\r\n    self.config.plugins.report(self.stream)\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/nose/plugins/manager.py\", line 99, in __call__\r\n    return self.call(*arg, **kw)\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/nose/plugins/manager.py\", line 167, in simple\r\n    result = meth(*arg, **kw)\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/nose/plugins/cover.py\", line 183, in report\r\n    self.coverInstance.stop()\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/coverage/control.py\", line 670, in combine\r\n    self.get_data()\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/coverage/control.py\", line 696, in get_data\r\n    if self._collector and self._collector.flush_data():\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/coverage/collector.py\", line 425, in flush_data\r\n    self.covdata.add_lines(self.mapped_file_dict(self.data))\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/coverage/sqldata.py\", line 436, in add_lines\r\n    self._choose_lines_or_arcs(lines=True)\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/coverage/sqldata.py\", line 496, in _choose_lines_or_arcs\r\n    ('has_arcs', str(int(arcs)))\r\n  File \"/media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/coverage/sqldata.py\", line 1048, in execute\r\n    raise CoverageException(\"Couldn't use data file {!r}: {}\".format(self.filename, msg))\r\ncoverage.misc.CoverageException: Couldn't use data file '/media/workspace/APPNAME/tests/.coverage': no such table: meta\r\n```\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. What version of Python are you using?\r\n3.6.8 and 3.7.6\r\n\r\n1. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n5.0.2\r\n\r\n```\r\n-- sys -------------------------------------------------------\r\n                        version: 5.0.2\r\n                       coverage: /media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages/coverage/__init__.py\r\n                         tracer: -none-\r\n                        CTracer: available\r\n           plugins.file_tracers: -none-\r\n            plugins.configurers: -none-\r\n      plugins.context_switchers: -none-\r\n              configs_attempted: .coveragerc\r\n                                 setup.cfg\r\n                                 tox.ini\r\n                                 pyproject.toml\r\n                   configs_read: -none-\r\n                    config_file: None\r\n                config_contents: -none-\r\n                      data_file: -none-\r\n                         python: 3.6.8 (default, Aug  7 2019, 17:28:10) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n                       platform: Linux-3.10.0-957.27.2.el7.x86_64-x86_64-with-centos-7.6.1810-Core\r\n                 implementation: CPython\r\n                     executable: /media/workspace/APPNAME/tests/venv/bin/python3\r\n                   def_encoding: utf-8\r\n                    fs_encoding: utf-8\r\n                            pid: 20026\r\n                            cwd: /media/workspace/APPNAME/tests\r\n                           path: /media/workspace/APPNAME/tests/venv/bin\r\n                                 /usr/lib64/python36.zip\r\n                                 /usr/lib64/python3.6\r\n                                 /usr/lib64/python3.6/lib-dynload\r\n                                 /media/workspace/APPNAME/tests/venv/lib64/python3.6/site-packages\r\n                                 /media/workspace/APPNAME/tests/venv/lib/python3.6/site-packages\r\n                    environment: PYENV_ROOT = /home/developer/.pyenv\r\n                                 PYENV_SHELL = zsh\r\n                                 PYENV_VIRTUALENV_INIT = 1\r\n                   command_line: /media/workspace/APPNAME/tests/venv/bin/coverage debug sys\r\n                sqlite3_version: 2.6.0\r\n         sqlite3_sqlite_version: 3.7.17\r\n```\r\n\r\n1. What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\n```\r\nbeautifulsoup4==4.8.2\r\nbottle==0.12.18\r\ncoverage==5.0.2\r\nentrypoints==0.3\r\nflake8==3.7.9\r\nliblpm==0.0.4\r\nmccabe==0.6.1\r\nmysqlclient==1.4.6\r\nnose==1.3.7\r\npycodestyle==2.5.0\r\npyflakes==2.1.1\r\nsix==1.13.0\r\nsoupsieve==1.9.5\r\nSQLAlchemy==1.3.12\r\nwaitress==1.4.2\r\nWebOb==1.8.5\r\nWebTest==2.0.33\r\n```\r\n\r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\nI cannot provide a repo, sorry. It's not an open source project.\r\n\r\n1. What commands did you run?\r\n`python3 -m \"nose\" --with-coverage --cover-erase --cover-html -s -w unit -v`\r\n\r\n**Expected behavior**\r\nAn error shouldn't be thrown.\r\n\r\n**Additional context**\r\nIt's fine on 5.0.1, just broken on 5.0.2.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/916", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/916/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/916/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/916/events", "html_url": "https://github.com/nedbat/coveragepy/issues/916", "id": 546395316, "node_id": "MDU6SXNzdWU1NDYzOTUzMTY=", "number": 916, "title": "coverage.misc.CoverageException: Couldn't use data file '/path/to/.coverage': no such table: meta", "user": {"login": "mdshw5", "id": 819554, "node_id": "MDQ6VXNlcjgxOTU1NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/819554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdshw5", "html_url": "https://github.com/mdshw5", "followers_url": "https://api.github.com/users/mdshw5/followers", "following_url": "https://api.github.com/users/mdshw5/following{/other_user}", "gists_url": "https://api.github.com/users/mdshw5/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdshw5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdshw5/subscriptions", "organizations_url": "https://api.github.com/users/mdshw5/orgs", "repos_url": "https://api.github.com/users/mdshw5/repos", "events_url": "https://api.github.com/users/mdshw5/events{/privacy}", "received_events_url": "https://api.github.com/users/mdshw5/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/4", "html_url": "https://github.com/nedbat/coveragepy/milestone/4", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/4/labels", "id": 4974471, "node_id": "MDk6TWlsZXN0b25lNDk3NDQ3MQ==", "number": 4, "title": "5.0.3", "description": "", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2020-01-06T00:29:34Z", "updated_at": "2020-01-12T12:37:49Z", "due_on": null, "closed_at": "2020-01-12T12:37:49Z"}, "comments": 10, "created_at": "2020-01-07T16:56:06Z", "updated_at": "2020-01-12T12:37:05Z", "closed_at": "2020-01-08T10:37:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThis bug bit me this morning when old TravisCI builds reported failing suddenly with no code changes in my library. https://travis-ci.org/mdshw5/pyfaidx/jobs/633813559#L1187. \r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. What version of Python are you using?  \r\n3.5-3.7. For some reason 3.4 does not exhibit this issue.\r\n1. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\nI will try to figure this out.  \r\n1. What versions of what packages do you have installed? The output of `pip freeze` is helpful.  \r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.  \r\nhttps://travis-ci.org/mdshw5/pyfaidx/jobs/633813559#L998\r\n1. What commands did you run?  \r\n`nosetests --with-coverage --cover-package=pyfaidx`\r\n**Expected behavior**  \r\nA clear and concise description of what you expected to happen.\r\nI expected coverage to be computed instead of a runtime error.\r\n**Additional context**  \r\nI'll gladly provide more context where I can - I'm still reasoning about how to reproduce a Travis build locally.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/915", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/915/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/915/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/915/events", "html_url": "https://github.com/nedbat/coveragepy/issues/915", "id": 545944832, "node_id": "MDU6SXNzdWU1NDU5NDQ4MzI=", "number": 915, "title": "sqlite3.OperationalError: disk I/O error - coverage/sqldata.py, line 1024", "user": {"login": "caronc", "id": 850374, "node_id": "MDQ6VXNlcjg1MDM3NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/850374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caronc", "html_url": "https://github.com/caronc", "followers_url": "https://api.github.com/users/caronc/followers", "following_url": "https://api.github.com/users/caronc/following{/other_user}", "gists_url": "https://api.github.com/users/caronc/gists{/gist_id}", "starred_url": "https://api.github.com/users/caronc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caronc/subscriptions", "organizations_url": "https://api.github.com/users/caronc/orgs", "repos_url": "https://api.github.com/users/caronc/repos", "events_url": "https://api.github.com/users/caronc/events{/privacy}", "received_events_url": "https://api.github.com/users/caronc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1784642395, "node_id": "MDU6TGFiZWwxNzg0NjQyMzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/not-our-bug", "name": "not-our-bug", "color": "b997e5", "default": false, "description": "The problem was elsewhere"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 58, "created_at": "2020-01-06T21:18:55Z", "updated_at": "2020-06-10T09:29:46Z", "closed_at": "2020-01-13T12:14:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nSince coverage `v5.0.2`, I throw an exception during Python 3.6 testing (_Python 3.4, 3.5, 3.7, and 3.8 work fine_ - [source](https://travis-ci.org/caronc/apprise-api)). Below is a screenshot of the exception thrown ([source](https://travis-ci.org/caronc/apprise-api/jobs/633075837))\r\n![Screenshot from 2020-01-06 16-05-07](https://user-images.githubusercontent.com/850374/71848840-94584400-309e-11ea-8595-d087bd67ae6a.png)\r\n\r\nThis problem does not occur with `v5.0.1` ([source](https://travis-ci.org/caronc/apprise-api/jobs/632755499)).\r\n\r\nOriginally I thought this was a [Travis CI](https://travis-ci.community/t/python-3-6-sqlite3-operationalerror-disk-i-o-error/6737) issue ([source](https://travis-ci.community/t/python-3-6-sqlite3-operationalerror-disk-i-o-error/6737)), but it appears specific to the last release of `coverage` instead.\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. Python v3.6.7\r\n1. Ubuntu 16.04.6 LTS\r\n1. Kernel: 4.15.0-1028-gcp ([xenial container here](https://hub.docker.com/_/ubuntu/))\r\n1. v5.0.2 of `coverage` (pulled from PyPi/pip)\r\n1.  The following packages are installed:\r\n    ```\r\n    apprise==0.8.2\r\n    asgiref==3.2.3\r\n    attrs==19.3.0\r\n    certifi==2019.11.28\r\n    chardet==3.0.4\r\n    Click==7.0\r\n    coverage==5.0.2\r\n    Django==3.0.2\r\n    entrypoints==0.3\r\n    filelock==3.0.12\r\n    flake8==3.7.9\r\n    idna==2.8\r\n    importlib-metadata==1.3.0\r\n    Markdown==3.1.1\r\n    mccabe==0.6.1\r\n    mock==3.0.5\r\n    more-itertools==8.0.2\r\n    oauthlib==3.1.0\r\n    packaging==20.0\r\n    pluggy==0.13.1\r\n    py==1.8.1\r\n    pycodestyle==2.5.0\r\n    pyflakes==2.1.1\r\n    pyparsing==2.4.6\r\n    pytest==5.3.2\r\n    pytest-cov==2.8.1\r\n    pytest-django==3.7.0\r\n    pytz==2019.3\r\n    PyYAML==5.3\r\n    requests==2.22.0\r\n    requests-oauthlib==1.3.0\r\n    six==1.13.0\r\n    sqlparse==0.3.0\r\n    toml==0.10.0\r\n    tox==3.14.3\r\n    urllib3==1.25.7\r\n    virtualenv==16.7.9\r\n    wcwidth==0.1.8\r\n    zipp==0.6.0\r\n    ```\r\n1. I'm trying to build my package [Apprise API](https://github.com/caronc/apprise-api) which I hadn't needed to build until of late. Here is the [latest build status](https://travis-ci.org/caronc/apprise-api).\r\n1. The command ran was:\r\n    ```bash\r\n    coverage run --parallel -m pytest apprise_api\r\n    ```\r\n\r\n**Expected behavior**\r\nNot to get an exception (or maybe it just needs to be gracefully caught since it's on an `__exit__` call anyway)?\r\n\r\n**Additional context**\r\nIf i re-run the Travis-CI runner on a previous Python 3.6 test runner that has passed (in the past), it fails on Python 3.6 ([more details and screenshots explained here](https://travis-ci.community/t/python-3-6-sqlite3-operationalerror-disk-i-o-error/6737)).\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/909", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/909/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/909/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/909/events", "html_url": "https://github.com/nedbat/coveragepy/issues/909", "id": 544479748, "node_id": "MDU6SXNzdWU1NDQ0Nzk3NDg=", "number": 909, "title": "Regression: \"Already imported a file that will be measured\", loss of coverage", "user": {"login": "mgedmin", "id": 159967, "node_id": "MDQ6VXNlcjE1OTk2Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/159967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mgedmin", "html_url": "https://github.com/mgedmin", "followers_url": "https://api.github.com/users/mgedmin/followers", "following_url": "https://api.github.com/users/mgedmin/following{/other_user}", "gists_url": "https://api.github.com/users/mgedmin/gists{/gist_id}", "starred_url": "https://api.github.com/users/mgedmin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mgedmin/subscriptions", "organizations_url": "https://api.github.com/users/mgedmin/orgs", "repos_url": "https://api.github.com/users/mgedmin/repos", "events_url": "https://api.github.com/users/mgedmin/events{/privacy}", "received_events_url": "https://api.github.com/users/mgedmin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3", "html_url": "https://github.com/nedbat/coveragepy/milestone/3", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3/labels", "id": 4951945, "node_id": "MDk6TWlsZXN0b25lNDk1MTk0NQ==", "number": 3, "title": "5.0.2", "description": "More things to fix in the 5.0.x stream.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-12-22T18:28:46Z", "updated_at": "2020-01-06T00:30:01Z", "due_on": null, "closed_at": "2020-01-06T00:30:01Z"}, "comments": 3, "created_at": "2020-01-02T07:55:55Z", "updated_at": "2020-01-05T23:43:39Z", "closed_at": "2020-01-03T15:11:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nI'm measuring [gtimelog's test coverage](https://coveralls.io/github/gtimelog/gtimelog) with `coverage run -m gtimelog.tests`.  Since coverage 5.0a4 this is missing some coverage (shows 79% instead of 100%) and also produces warnings:\r\n```\r\nCoverage.py warning: Already imported a file that will be measured: /home/mg/src/gtimelog/src/gtimelog/__init__.py (already-imported)\r\nCoverage.py warning: Already imported a file that will be measured: /home/mg/src/gtimelog/src/gtimelog/timelog.py (already-imported)\r\nCoverage.py warning: Already imported a file that will be measured: /home/mg/src/gtimelog/src/gtimelog/settings.py (already-imported)\r\n```\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. What version of Python are you using? 2.7.17 and 3.7.5\r\n1. What version of coverage.py are you using? 5.0.1 (but every version starting with 5.0a4 is affected; 5.0a3 is fine)\r\n1. What versions of what packages do you have installed? \r\n\r\n    <details>\r\n\r\n    ```\r\n    coverage==5.0.1\r\n    coverage-python-version==0.2.0\r\n    freezegun==0.3.12\r\n    -e git+https://github.com/gtimelog/gtimelog@5f7858cc58925e42b2d7cbc1d872b11745c38872#egg=gtimelog\r\n    mock==3.0.5\r\n    python-dateutil==2.8.1\r\n    six==1.13.0\r\n    </details>\r\n\r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\nhttps://github.com/gtimelog/gtimelog/tree/5f7858cc58925e42b2d7cbc1d872b11745c38872\r\n1. What commands did you run? `make coverage` for a quick version; `.tox/coverage/bin/pip install coverage=$version && .tox/coverage/bin/coverage -m gtimelog.test && .tox/coverage/bin/coverage report` to test a specific version of coverage.py\r\n\r\n**Expected behavior**\r\n100% coverage reported, no warnings.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/907", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/907/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/907/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/907/events", "html_url": "https://github.com/nedbat/coveragepy/issues/907", "id": 543120923, "node_id": "MDU6SXNzdWU1NDMxMjA5MjM=", "number": 907, "title": "`coverage run --debug=sys` fails with: 'CoverageData' object has no attribute 'filename'", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3", "html_url": "https://github.com/nedbat/coveragepy/milestone/3", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3/labels", "id": 4951945, "node_id": "MDk6TWlsZXN0b25lNDk1MTk0NQ==", "number": 3, "title": "5.0.2", "description": "More things to fix in the 5.0.x stream.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-12-22T18:28:46Z", "updated_at": "2020-01-06T00:30:01Z", "due_on": null, "closed_at": "2020-01-06T00:30:01Z"}, "comments": 2, "created_at": "2019-12-28T10:55:02Z", "updated_at": "2020-01-05T23:43:33Z", "closed_at": "2019-12-28T11:37:20Z", "author_association": "OWNER", "active_lock_reason": null, "body": "```\r\n$ coverage run --debug=sys foo.py\r\nTraceback (most recent call last):\r\n  File \".tox/py36/bin/coverage\", line 11, in <module>\r\n    load_entry_point('coverage', 'console_scripts', 'coverage')()\r\n  File \"/Users/ned/coverage/trunk/coverage/cmdline.py\", line 824, in main\r\n    status = CoverageScript().command_line(argv)\r\n  File \"/Users/ned/coverage/trunk/coverage/cmdline.py\", line 555, in command_line\r\n    return self.do_run(options, args)\r\n  File \"/Users/ned/coverage/trunk/coverage/cmdline.py\", line 700, in do_run\r\n    self.coverage.start()\r\n  File \"/Users/ned/coverage/trunk/coverage/control.py\", line 516, in start\r\n    self._post_init()\r\n  File \"/Users/ned/coverage/trunk/coverage/control.py\", line 282, in _post_init\r\n    self._write_startup_debug()\r\n  File \"/Users/ned/coverage/trunk/coverage/control.py\", line 300, in _write_startup_debug\r\n    write_formatted_info(self._debug, \"sys\", self.sys_info())\r\n  File \"/Users/ned/coverage/trunk/coverage/control.py\", line 1008, in sys_info\r\n    ('data_file', self._data.filename if self._data else \"-none-\"),\r\nAttributeError: 'CoverageData' object has no attribute 'filename'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/904", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/904/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/904/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/904/events", "html_url": "https://github.com/nedbat/coveragepy/issues/904", "id": 541241639, "node_id": "MDU6SXNzdWU1NDEyNDE2Mzk=", "number": 904, "title": "--fail-under should print a message if it fails", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/6", "html_url": "https://github.com/nedbat/coveragepy/milestone/6", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/6/labels", "id": 5007461, "node_id": "MDk6TWlsZXN0b25lNTAwNzQ2MQ==", "number": 6, "title": "5.next", "description": "", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 5, "closed_issues": 1, "state": "open", "created_at": "2020-01-15T15:48:39Z", "updated_at": "2020-07-17T11:52:08Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2019-12-20T23:19:36Z", "updated_at": "2020-07-13T19:18:58Z", "closed_at": "2020-07-13T19:18:58Z", "author_association": "OWNER", "active_lock_reason": null, "body": "The only thing `--fail-under` does is change the status return.  It should also print a message that it is failing.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/901", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/901/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/901/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/901/events", "html_url": "https://github.com/nedbat/coveragepy/issues/901", "id": 541026763, "node_id": "MDU6SXNzdWU1NDEwMjY3NjM=", "number": 901, "title": "context labelled differently ", "user": {"login": "davidszotten", "id": 412005, "node_id": "MDQ6VXNlcjQxMjAwNQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/412005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidszotten", "html_url": "https://github.com/davidszotten", "followers_url": "https://api.github.com/users/davidszotten/followers", "following_url": "https://api.github.com/users/davidszotten/following{/other_user}", "gists_url": "https://api.github.com/users/davidszotten/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidszotten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidszotten/subscriptions", "organizations_url": "https://api.github.com/users/davidszotten/orgs", "repos_url": "https://api.github.com/users/davidszotten/repos", "events_url": "https://api.github.com/users/davidszotten/events{/privacy}", "received_events_url": "https://api.github.com/users/davidszotten/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3", "html_url": "https://github.com/nedbat/coveragepy/milestone/3", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3/labels", "id": 4951945, "node_id": "MDk6TWlsZXN0b25lNDk1MTk0NQ==", "number": 3, "title": "5.0.2", "description": "More things to fix in the 5.0.x stream.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-12-22T18:28:46Z", "updated_at": "2020-01-06T00:30:01Z", "due_on": null, "closed_at": "2020-01-06T00:30:01Z"}, "comments": 7, "created_at": "2019-12-20T14:37:08Z", "updated_at": "2020-01-05T23:43:29Z", "closed_at": "2019-12-27T23:09:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`pytest --cov=test_foo --cov-context=test; coverage report --contexts=test_foo`\r\n\r\nenviron identical to #900 \r\n\r\nsetting `dynamic_context = test_function` in `.coveragerc`, i get context reported as\r\n`test_foo.test_foo`\r\n\r\nbut without that setting, the context is reported as \r\n`test_foo.py::test_foo|run`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/900", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/900/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/900/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/900/events", "html_url": "https://github.com/nedbat/coveragepy/issues/900", "id": 541025031, "node_id": "MDU6SXNzdWU1NDEwMjUwMzE=", "number": 900, "title": "`relative_files = True` and `dynamic_context = test_function` ", "user": {"login": "davidszotten", "id": 412005, "node_id": "MDQ6VXNlcjQxMjAwNQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/412005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidszotten", "html_url": "https://github.com/davidszotten", "followers_url": "https://api.github.com/users/davidszotten/followers", "following_url": "https://api.github.com/users/davidszotten/following{/other_user}", "gists_url": "https://api.github.com/users/davidszotten/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidszotten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidszotten/subscriptions", "organizations_url": "https://api.github.com/users/davidszotten/orgs", "repos_url": "https://api.github.com/users/davidszotten/repos", "events_url": "https://api.github.com/users/davidszotten/events{/privacy}", "received_events_url": "https://api.github.com/users/davidszotten/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2", "html_url": "https://github.com/nedbat/coveragepy/milestone/2", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2/labels", "id": 4935928, "node_id": "MDk6TWlsZXN0b25lNDkzNTkyOA==", "number": 2, "title": "5.0.1", "description": "Things to do in the fast-follow 5.0.1 release.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2019-12-16T14:29:07Z", "updated_at": "2020-01-03T15:13:25Z", "due_on": null, "closed_at": "2019-12-28T10:55:30Z"}, "comments": 2, "created_at": "2019-12-20T14:33:22Z", "updated_at": "2019-12-22T18:49:19Z", "closed_at": "2019-12-21T15:28:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\nsetting `relative_files = True`, i don't get any contexts listed in my html reports\r\n\r\n**To Reproduce**\r\n<details>\r\n<summary>`versions`</summary>\r\n\r\n```\r\n$ python -V\r\nPython 3.7.2\r\n\r\n$ coverage --version\r\nCoverage.py, version 5.0 with C extension\r\nFull documentation is at https://coverage.readthedocs.io\r\n\r\n$ pip freeze\r\nattrs==19.3.0\r\ncoverage==5.0\r\nimportlib-metadata==1.3.0\r\nmore-itertools==8.0.2\r\npackaging==19.2\r\npluggy==0.13.1\r\npy==1.8.0\r\npyparsing==2.4.5\r\npytest==5.3.2\r\npytest-cov==2.8.1\r\nsix==1.13.0\r\nwcwidth==0.1.7\r\nzipp==0.6.0\r\n\r\n$ coverage debug sys\r\n-- sys -------------------------------------------------------\r\n                   version: 5.0\r\n                  coverage: /Users/david/environments/coverage/lib/python3.7/site-packages/coverage/__init__.py\r\n                    tracer: -none-\r\n                   CTracer: available\r\n      plugins.file_tracers: -none-\r\n       plugins.configurers: -none-\r\n plugins.context_switchers: -none-\r\n         configs_attempted: .coveragerc\r\n              configs_read: .coveragerc\r\n               config_file: .coveragerc\r\n           config_contents: '[run]\\nbranch = True\\ndynamic_context = test_function\\n#relative_files = True\\n'\r\n                 data_file: -none-\r\n                    python: 3.7.2 (default, Dec  5 2019, 09:13:08) [Clang 10.0.1 (clang-1001.0.46.4)]\r\n                  platform: Darwin-18.7.0-x86_64-i386-64bit\r\n            implementation: CPython\r\n                executable: /Users/david/environments/coverage/bin/python\r\n              def_encoding: utf-8\r\n               fs_encoding: utf-8\r\n                       pid: 33092\r\n                       cwd: /Users/david/dev/coverage-bug\r\n                      path: /Users/david/environments/coverage/bin\r\n                            /Users/david/environments/coverage/lib/python37.zip\r\n                            /Users/david/environments/coverage/lib/python3.7\r\n                            /Users/david/environments/coverage/lib/python3.7/lib-dynload\r\n                            /Users/david/.pyenv/versions/3.7.2/lib/python3.7\r\n                            /Users/david/environments/coverage/lib/python3.7/site-packages\r\n               environment: PYTHONSTARTUP = /Users/david/.pystartup.py\r\n                            VIRTUALENVWRAPPER_PYTHON = /Users/david/.pyenv/versions/3.7.2/bin/python\r\n              command_line: /Users/david/environments/coverage/bin/coverage debug sys\r\n           sqlite3_version: 2.6.0\r\n    sqlite3_sqlite_version: 3.24.0\r\n```\r\n\r\n</details>\r\n\r\n```\r\n$ cat test_foo.py\r\ndef test_foo():\r\n    assert True\r\n\r\n\r\n$ cat .coveragerc\r\n[run]\r\nbranch = True\r\ndynamic_context = test_function\r\n#relative_files = True\r\n\r\n\r\n$ pytest --cov=test_foo --cov-context=test; coverage report --contexts=test_foo; coverage html --show-contexts\r\n```\r\n\r\n\r\n**Expected behavior**\r\ncontext info in the html report\r\n\r\ni get context when commenting out `relative_files` as in the example output above, but it disappears when i uncomment that line\r\n\r\n\r\n## update\r\n\r\ni think the json reporter has the same issue (not checked others)\r\nfor the json report, i wonder if https://github.com/nedbat/coveragepy/blob/c09c2c203286db3cae1148bd02b1db9a9d524af1/coverage/jsonreport.py#L93\r\n```\r\nreported_file['contexts'] = analysis.data.contexts_by_lineno(\r\n                file_reporter.filename\r\n            )\r\n```\r\nshould be using `analysis.filename` instead?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/899", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/899/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/899/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/899/events", "html_url": "https://github.com/nedbat/coveragepy/issues/899", "id": 541016353, "node_id": "MDU6SXNzdWU1NDEwMTYzNTM=", "number": 899, "title": "Contexts in reports are missing with relative_files=True", "user": {"login": "lazka", "id": 991986, "node_id": "MDQ6VXNlcjk5MTk4Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/991986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lazka", "html_url": "https://github.com/lazka", "followers_url": "https://api.github.com/users/lazka/followers", "following_url": "https://api.github.com/users/lazka/following{/other_user}", "gists_url": "https://api.github.com/users/lazka/gists{/gist_id}", "starred_url": "https://api.github.com/users/lazka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lazka/subscriptions", "organizations_url": "https://api.github.com/users/lazka/orgs", "repos_url": "https://api.github.com/users/lazka/repos", "events_url": "https://api.github.com/users/lazka/events{/privacy}", "received_events_url": "https://api.github.com/users/lazka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321126, "node_id": "MDU6TGFiZWw5NzMzMjExMjY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-20T14:15:22Z", "updated_at": "2019-12-22T18:25:59Z", "closed_at": "2019-12-21T15:10:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nWhen I enable relative_files the json and html reports no longer contain context information. I still see context info in the sqlite DB though.\r\n\r\n**To Reproduce**\r\n\r\n* coverage.py 5.0, py3.7.5\r\n* Set `relative_files=True` \r\n* `python3 -m pytest --cov --cov-context=test tests/test_foo.py`\r\n* `python3 -m coverage html --show-contexts`\r\n* HTML report doesn't include any context infos\r\n\r\n**Expected behavior**\r\n\r\nHTML report contains context infos\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/898", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/898/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/898/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/898/events", "html_url": "https://github.com/nedbat/coveragepy/issues/898", "id": 540181228, "node_id": "MDU6SXNzdWU1NDAxODEyMjg=", "number": 898, "title": "coverage 5.0 fails with projects that use bokeh", "user": {"login": "jdlesage", "id": 658597, "node_id": "MDQ6VXNlcjY1ODU5Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/658597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdlesage", "html_url": "https://github.com/jdlesage", "followers_url": "https://api.github.com/users/jdlesage/followers", "following_url": "https://api.github.com/users/jdlesage/following{/other_user}", "gists_url": "https://api.github.com/users/jdlesage/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdlesage/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdlesage/subscriptions", "organizations_url": "https://api.github.com/users/jdlesage/orgs", "repos_url": "https://api.github.com/users/jdlesage/repos", "events_url": "https://api.github.com/users/jdlesage/events{/privacy}", "received_events_url": "https://api.github.com/users/jdlesage/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321138, "node_id": "MDU6TGFiZWw5NzMzMjExMzg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-19T09:18:32Z", "updated_at": "2019-12-22T01:51:47Z", "closed_at": "2019-12-19T11:35:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWith the 5.0 version, there is a new error at coverage report generation in our project that uses bokeh: `Aborting report output, consider using -i.\r\nfakesource   NoSource: No source for code: '<some_path>/fakesource'.`\r\n\r\nLooking to .pyc of our project, it has been raised because of this line in bokeh project: https://github.com/bokeh/bokeh/blob/master/bokeh/plotting/helpers.py#L880\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. What version of Python are you using? Python3.6\r\n1. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n```\r\n\r\n-- sys -------------------------------------------------------\r\n                   version: 5.0\r\n                  coverage: /home/jd.lesage/venv/edatools/lib/python3.6/site-packages/coverage/__init__.py\r\n                    tracer: -none-\r\n                   CTracer: available\r\n      plugins.file_tracers: -none-\r\n       plugins.configurers: -none-\r\n plugins.context_switchers: -none-\r\n         configs_attempted: .coveragerc\r\n                            setup.cfg\r\n                            tox.ini\r\n                            pyproject.toml\r\n              configs_read: tox.ini\r\n               config_file: None\r\n           config_contents: -none-\r\n                 data_file: -none-\r\n                    python: 3.6.9 (default, Dec  6 2019, 17:04:45) [GCC 9.2.1 20191109]\r\n                  platform: Linux-5.2.0-3-amd64-x86_64-with-debian-bullseye-sid\r\n            implementation: CPython\r\n                executable: /home/jd.lesage/venv/edatools/bin/python3.6\r\n              def_encoding: utf-8\r\n               fs_encoding: iso8859-15\r\n                       pid: 1523184\r\n                       cwd: /home/jd.lesage/workspace_python/tools\r\n                      path: /home/jd.lesage/venv/edatools/bin\r\n                            /home/jd.lesage/usr/lib/python36.zip\r\n                            /home/jd.lesage/usr/lib/python3.6\r\n                            /home/jd.lesage/usr/lib/python3.6/lib-dynload\r\n                            /home/jd.lesage/venv/edatools/lib/python3.6/site-packages\r\n                            /home/jd.lesage/workspace_python/tools\r\n               environment: -none-\r\n              command_line: /home/jd.lesage/venv/edatools/bin/coverage debug sys\r\n           sqlite3_version: 2.6.0\r\n    sqlite3_sqlite_version: 3.30.1\r\n```\r\n1. What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\nbokeh==1.4.0\r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\nPrivate repository. But running tests with notebooks that do some bokeh plots.\r\n1. What commands did you run?\r\n```\r\n    coverage erase\r\n    coverage run -m pytest --junitxml=junit-{envname}.xml --ignore={toxworkdir} --ignore=venv --ignore=.venv\r\n    coverage report --omit={toxworkdir}/*,venv/*,.venv/*\r\n```\r\n\r\n**Expected behavior**\r\nI ignored (add it to the --omit option) fakesource to workaround the problem. I am wondering if the error is expected. We have this error with 5.0 (it was ok with previous versions of coverage). Could it be a regression ? Should I create a bug report on bokeh side ? What would be the change on their side ? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/895", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/895/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/895/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/895/events", "html_url": "https://github.com/nedbat/coveragepy/issues/895", "id": 539579072, "node_id": "MDU6SXNzdWU1Mzk1NzkwNzI=", "number": 895, "title": "os.path.relpath fails when saving a coverage file with coverage 5 in a folder from a different Windows drive", "user": {"login": "ogrisel", "id": 89061, "node_id": "MDQ6VXNlcjg5MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/89061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ogrisel", "html_url": "https://github.com/ogrisel", "followers_url": "https://api.github.com/users/ogrisel/followers", "following_url": "https://api.github.com/users/ogrisel/following{/other_user}", "gists_url": "https://api.github.com/users/ogrisel/gists{/gist_id}", "starred_url": "https://api.github.com/users/ogrisel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ogrisel/subscriptions", "organizations_url": "https://api.github.com/users/ogrisel/orgs", "repos_url": "https://api.github.com/users/ogrisel/repos", "events_url": "https://api.github.com/users/ogrisel/events{/privacy}", "received_events_url": "https://api.github.com/users/ogrisel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}, {"id": 1191924489, "node_id": "MDU6TGFiZWwxMTkxOTI0NDg5", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/windows", "name": "windows", "color": "9fd5f4", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2", "html_url": "https://github.com/nedbat/coveragepy/milestone/2", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2/labels", "id": 4935928, "node_id": "MDk6TWlsZXN0b25lNDkzNTkyOA==", "number": 2, "title": "5.0.1", "description": "Things to do in the fast-follow 5.0.1 release.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2019-12-16T14:29:07Z", "updated_at": "2020-01-03T15:13:25Z", "due_on": null, "closed_at": "2019-12-28T10:55:30Z"}, "comments": 10, "created_at": "2019-12-18T10:05:36Z", "updated_at": "2019-12-22T18:25:51Z", "closed_at": "2019-12-19T11:06:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nIn the scikit-learn test suite we have a test that launches a subprocess and the atexit registry triggers the saving of a coverage file in a tempfolder in d:\\ while the current working directory has been changed by `pytest --pyargs` to c:\\ in the meantime.\r\n\r\n```\r\nE                   AssertionError: Error in atexit._run_exitfuncs:\r\nE                   Traceback (most recent call last):\r\nE                     File \"c:\\miniconda\\envs\\testvenv\\lib\\ntpath.py\", line 562, in relpath\r\nE                       path_drive, start_drive))\r\nE                   ValueError: path is on mount 'D:', start on mount 'c:'\r\n\r\ncmd        = ['c:\\\\miniconda\\\\envs\\\\testvenv\\\\python.exe', 'C:\\\\Users\\\\VSSADM~1\\\\AppData\\\\Local\\\\Temp\\\\tmp32ajt78f_src_test_sklearn.py']\r\ncoverage_rc = None\r\ncwd        = 'c:\\\\miniconda\\\\envs\\\\testvenv\\\\lib\\\\site-packages'\r\n...\r\n```\r\n\r\nI do not understand why the traceback starts at `atexit._run_exitfuncs` and then goes to `ntpath.relpath` directly without going through the function of the `coverage` module. I suspect that the culprit is:\r\n\r\nhttps://github.com/nedbat/coveragepy/blob/coverage-5.0/coverage/sqldata.py#L982\r\n\r\nWhen rolling back to coverage 4.5.3, the problem disappears.\r\n\r\n**To Reproduce**\r\n\r\nThis problems happens with coverage 5.0 and Python 3.7.5 with the latest pytest and pytest-cov.\r\n\r\nIt seems tricky to reproduce, in particular I do not understand why this only happens in the subprocess tests of scikit-learn and never in the main process itself. Maybe the current working directory is restored to the d:\\ tempfolder prior to writing the coverage files?\r\n\r\nAnyhow the details can be found in the CI logs of this pull request where I have patched the `ntpath.relpath` function to display more debug info:\r\n\r\nhttps://github.com/scikit-learn/scikit-learn/pull/15909\r\n\r\nI will open a PR to fix the issue in coveragepy.\r\n\r\nIt looks similar to #824 but the error message is actually different.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/892", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/892/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/892/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/892/events", "html_url": "https://github.com/nedbat/coveragepy/issues/892", "id": 539365406, "node_id": "MDU6SXNzdWU1MzkzNjU0MDY=", "number": 892, "title": "Latest tag (5.0) creates corrupted .coverage file", "user": {"login": "jaredvasquez", "id": 6611004, "node_id": "MDQ6VXNlcjY2MTEwMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/6611004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaredvasquez", "html_url": "https://github.com/jaredvasquez", "followers_url": "https://api.github.com/users/jaredvasquez/followers", "following_url": "https://api.github.com/users/jaredvasquez/following{/other_user}", "gists_url": "https://api.github.com/users/jaredvasquez/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaredvasquez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaredvasquez/subscriptions", "organizations_url": "https://api.github.com/users/jaredvasquez/orgs", "repos_url": "https://api.github.com/users/jaredvasquez/repos", "events_url": "https://api.github.com/users/jaredvasquez/events{/privacy}", "received_events_url": "https://api.github.com/users/jaredvasquez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321134, "node_id": "MDU6TGFiZWw5NzMzMjExMzQ=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2", "html_url": "https://github.com/nedbat/coveragepy/milestone/2", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2/labels", "id": 4935928, "node_id": "MDk6TWlsZXN0b25lNDkzNTkyOA==", "number": 2, "title": "5.0.1", "description": "Things to do in the fast-follow 5.0.1 release.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2019-12-16T14:29:07Z", "updated_at": "2020-01-03T15:13:25Z", "due_on": null, "closed_at": "2019-12-28T10:55:30Z"}, "comments": 4, "created_at": "2019-12-17T23:26:00Z", "updated_at": "2019-12-22T01:43:35Z", "closed_at": "2019-12-18T00:30:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe latest tag of `coveragepy` creates a corrupted `.coverage` file. The resulting file is corrupted with lots of non-UTF characters and what looks like artifacts from sqlite3.\r\n\r\n**To Reproduce**\r\nI created a really minimal repo to demonstrate this bug. \r\nhttps://github.com/jaredvasquez/coverage-bug-example\r\n\r\nSimply clone the repo and run the `make` command (with Docker running locally). It will build the image, run coverage and output the resulting `.coverage` file to you. By default in `requirements_dev.txt` it is using `coverage==5.0` which will reproduce the issue. You can replace this with an older version (e.g. `4.5.4`) and see the expected output.\r\n\r\n1. What version of Python are you using? \r\nPython 3.6.9\r\n1. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n5.0\r\n1. What versions of what packages do you have installed? The output of `pip freeze` is helpful.\r\nSee the linked repo.\r\n1. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\nJust a minimal example provided in linked repo.\r\n1. What commands did you run?\r\nSee minimal repo\r\n\r\n**Expected behavior**\r\nA non-corrupted `.coverage` file with UTF-8 characters.\r\n\r\n**Additional context**\r\nRunning this on top of a Docker image with Debian + Python. However I tried this with a few different images and don't think this issue is specific to the Debian OS.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/891", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/891/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/891/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/891/events", "html_url": "https://github.com/nedbat/coveragepy/issues/891", "id": 539312004, "node_id": "MDU6SXNzdWU1MzkzMTIwMDQ=", "number": 891, "title": "Exception on unencodable filename", "user": {"login": "zooba", "id": 1693688, "node_id": "MDQ6VXNlcjE2OTM2ODg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1693688?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zooba", "html_url": "https://github.com/zooba", "followers_url": "https://api.github.com/users/zooba/followers", "following_url": "https://api.github.com/users/zooba/following{/other_user}", "gists_url": "https://api.github.com/users/zooba/gists{/gist_id}", "starred_url": "https://api.github.com/users/zooba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zooba/subscriptions", "organizations_url": "https://api.github.com/users/zooba/orgs", "repos_url": "https://api.github.com/users/zooba/repos", "events_url": "https://api.github.com/users/zooba/events{/privacy}", "received_events_url": "https://api.github.com/users/zooba/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3", "html_url": "https://github.com/nedbat/coveragepy/milestone/3", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3/labels", "id": 4951945, "node_id": "MDk6TWlsZXN0b25lNDk1MTk0NQ==", "number": 3, "title": "5.0.2", "description": "More things to fix in the 5.0.x stream.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-12-22T18:28:46Z", "updated_at": "2020-01-06T00:30:01Z", "due_on": null, "closed_at": "2020-01-06T00:30:01Z"}, "comments": 4, "created_at": "2019-12-17T21:11:02Z", "updated_at": "2020-01-05T23:43:20Z", "closed_at": "2020-01-01T19:05:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Apologies for the quick report - I'm only seeing this in the CPython GitHub Actions CI against Python 3.9 right now. I'll come back with more details when I get a chance, but wanted to provide a heads-up in case this is an obvious enough issue.\r\n\r\nSee the build logs at https://github.com/python/cpython/commit/9707e8e22d80ca97bf7a9812816701cecde6d226/checks?check_suite_id=363085844 - to navigate there, \"Coverage\" / \"Ubuntu (Coverage)\" / \"Tests with coverage\". The build step is marked as successful because we suppress the failure (and then the upload fails because the file was never written).\r\n\r\n```\r\n  File \"/home/runner/work/cpython/cpython/.venv/lib/python3.9/site-packages/coverage/cmdline.py\", line 555, in command_line\r\n    return self.do_run(options, args)\r\n  File \"/home/runner/work/cpython/cpython/.venv/lib/python3.9/site-packages/coverage/cmdline.py\", line 710, in do_run\r\n    self.coverage.save()\r\n  File \"/home/runner/work/cpython/cpython/.venv/lib/python3.9/site-packages/coverage/control.py\", line 613, in save\r\n    data = self.get_data()\r\n  File \"/home/runner/work/cpython/cpython/.venv/lib/python3.9/site-packages/coverage/control.py\", line 667, in get_data\r\n    if self._collector and self._collector.flush_data():\r\n  File \"/home/runner/work/cpython/cpython/.venv/lib/python3.9/site-packages/coverage/collector.py\", line 427, in flush_data\r\n    self.covdata.add_arcs(self.mapped_file_dict(self.data))\r\n  File \"/home/runner/work/cpython/cpython/.venv/lib/python3.9/site-packages/coverage/sqldata.py\", line 474, in add_arcs\r\n    file_id = self._file_id(filename, add=True)\r\n  File \"/home/runner/work/cpython/cpython/.venv/lib/python3.9/site-packages/coverage/sqldata.py\", line 367, in _file_id\r\n    cur = con.execute(\"insert or replace into file (path) values (?)\", (filename,))\r\n  File \"/home/runner/work/cpython/cpython/.venv/lib/python3.9/site-packages/coverage/sqldata.py\", line 1025, in execute\r\n    return self.con.execute(sql, parameters)\r\nUnicodeEncodeError: 'utf-8' codec can't encode character '\\udcff' in position 74: surrogates not allowed\r\n```\r\n\r\nI suspect the `0xDCFF` character comes from one of our deliberately-failing tests, but it seems to be coming from a point that we couldn't possibly override in coverage without changing the test itself.\r\n\r\nAs I said, when I get a few more minutes, I'll try and turn this into a minimal repro. But wanted to at least provide the easily-accessible info now rather than delaying any report by my availability.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/890", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/890/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/890/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/890/events", "html_url": "https://github.com/nedbat/coveragepy/issues/890", "id": 539061395, "node_id": "MDU6SXNzdWU1MzkwNjEzOTU=", "number": 890, "title": "multiprocessing.Manager() + cd leads to EOFError", "user": {"login": "sizmailov", "id": 2975991, "node_id": "MDQ6VXNlcjI5NzU5OTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/2975991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sizmailov", "html_url": "https://github.com/sizmailov", "followers_url": "https://api.github.com/users/sizmailov/followers", "following_url": "https://api.github.com/users/sizmailov/following{/other_user}", "gists_url": "https://api.github.com/users/sizmailov/gists{/gist_id}", "starred_url": "https://api.github.com/users/sizmailov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sizmailov/subscriptions", "organizations_url": "https://api.github.com/users/sizmailov/orgs", "repos_url": "https://api.github.com/users/sizmailov/repos", "events_url": "https://api.github.com/users/sizmailov/events{/privacy}", "received_events_url": "https://api.github.com/users/sizmailov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3", "html_url": "https://github.com/nedbat/coveragepy/milestone/3", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3/labels", "id": 4951945, "node_id": "MDk6TWlsZXN0b25lNDk1MTk0NQ==", "number": 3, "title": "5.0.2", "description": "More things to fix in the 5.0.x stream.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-12-22T18:28:46Z", "updated_at": "2020-01-06T00:30:01Z", "due_on": null, "closed_at": "2020-01-06T00:30:01Z"}, "comments": 6, "created_at": "2019-12-17T13:19:44Z", "updated_at": "2020-01-05T23:43:15Z", "closed_at": "2019-12-24T00:58:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nChange of directory + multiprocessing.Manager() entrance results to EOFError with coverage 5.0  \r\n\r\n**To Reproduce**\r\n1. What version of Python are you using?\r\n`Python 3.8.0rc1`\r\nIt also fails on [travis](https://travis-ci.com/sizmailov/remote-runner/builds/141388094) with `Python 3.6.3`\r\n\r\n2. What version of coverage.py are you using?\r\n<details>\r\n<summary><tt>coverage debug sys</tt></summary>\r\n\r\n```\r\n-- sys -------------------------------------------------------\r\n                   version: 5.0\r\n                  coverage: /mnt/md0/Documents/PycharmProjects/remote-runner/venv-3.8/lib/python3.8/site-packages/coverage/__init__.py\r\n                    tracer: -none-\r\n                   CTracer: available\r\n      plugins.file_tracers: -none-\r\n       plugins.configurers: -none-\r\n plugins.context_switchers: -none-\r\n         configs_attempted: .coveragerc\r\n              configs_read: .coveragerc\r\n               config_file: .coveragerc\r\n           config_contents: '[run]\\nconcurrency = multiprocessing'\r\n                 data_file: -none-\r\n                    python: 3.8.0rc1 (default, Oct  1 2019, 21:48:24) [GCC 7.4.0]\r\n                  platform: Linux-4.15.0-70-generic-x86_64-with-glibc2.27\r\n            implementation: CPython\r\n                executable: /mnt/md0/Documents/PycharmProjects/remote-runner/venv-3.8/bin/python\r\n              def_encoding: utf-8\r\n               fs_encoding: utf-8\r\n                       pid: 11108\r\n                       cwd: /mnt/md0/Documents/PycharmProjects/remote-runner\r\n                      path: /mnt/md0/Documents/PycharmProjects/remote-runner/venv-3.8/bin\r\n                            /mnt/md0/Documents/PycharmProjects/remote-runner/venv-3.8/lib/python38.zip\r\n                            /mnt/md0/Documents/PycharmProjects/remote-runner/venv-3.8/lib/python3.8\r\n                            /mnt/md0/Documents/PycharmProjects/remote-runner/venv-3.8/lib/python3.8/lib-dynload\r\n                            /usr/lib/python3.8\r\n                            /mnt/md0/Documents/PycharmProjects/remote-runner/venv-3.8/lib/python3.8/site-packages\r\n                            /mnt/md0/Documents/PycharmProjects/remote-runner/venv-3.8/lib/python3.8/site-packages/remote_runner-0.2.0-py3.8.egg\r\n               environment: -none-\r\n              command_line: /mnt/md0/Documents/PycharmProjects/remote-runner/venv-3.8/bin/coverage debug sys\r\n           sqlite3_version: 2.6.0\r\n    sqlite3_sqlite_version: 3.22.0\r\n```\r\n</details>\r\n\r\n3. --\r\n4. What code are you running?  \r\n\r\n```python\r\nimport multiprocessing\r\nimport os\r\n\r\nif not os.path.exists(\"./tmp\"): os.mkdir(\"./tmp\")\r\nos.chdir(\"./tmp\")\r\n\r\nwith multiprocessing.Manager() as manager:\r\n    pass\r\n\r\nprint(\"ok\")\r\n```\r\n\r\n5. What commands did you run?\r\n\r\n<details><summary><tt>python -m coverage run repro.py</tt></summary>\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"repro.py\", line 7, in <module>\r\n    with multiprocessing.Manager() as manager:\r\n  File \"/usr/lib/python3.8/multiprocessing/context.py\", line 57, in Manager\r\n    m.start()\r\n  File \"/usr/lib/python3.8/multiprocessing/managers.py\", line 583, in start\r\n    self._address = reader.recv()\r\n  File \"/usr/lib/python3.8/multiprocessing/connection.py\", line 250, in recv\r\n    buf = self._recv_bytes()\r\n  File \"/usr/lib/python3.8/multiprocessing/connection.py\", line 414, in _recv_bytes\r\n    buf = self._recv(4)\r\n  File \"/usr/lib/python3.8/multiprocessing/connection.py\", line 383, in _recv\r\n    raise EOFError\r\nEOFError\r\n```\r\n\r\n</details>\r\n\r\n<details><summary><tt>python repro.py</tt></summary>\r\n\r\n```\r\nok\r\n```\r\n\r\n</details>\r\n\r\n**Expected behavior**\r\n`ok` message\r\n\r\n**Additional context**\r\nSeems like bug was introduced with 5.0 release\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/889", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/889/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/889/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/889/events", "html_url": "https://github.com/nedbat/coveragepy/issues/889", "id": 538641765, "node_id": "MDU6SXNzdWU1Mzg2NDE3NjU=", "number": 889, "title": "Disable SQLite Support", "user": {"login": "mikegrima", "id": 11035926, "node_id": "MDQ6VXNlcjExMDM1OTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/11035926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikegrima", "html_url": "https://github.com/mikegrima", "followers_url": "https://api.github.com/users/mikegrima/followers", "following_url": "https://api.github.com/users/mikegrima/following{/other_user}", "gists_url": "https://api.github.com/users/mikegrima/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikegrima/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikegrima/subscriptions", "organizations_url": "https://api.github.com/users/mikegrima/orgs", "repos_url": "https://api.github.com/users/mikegrima/repos", "events_url": "https://api.github.com/users/mikegrima/events{/privacy}", "received_events_url": "https://api.github.com/users/mikegrima/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321138, "node_id": "MDU6TGFiZWw5NzMzMjExMzg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2", "html_url": "https://github.com/nedbat/coveragepy/milestone/2", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2/labels", "id": 4935928, "node_id": "MDk6TWlsZXN0b25lNDkzNTkyOA==", "number": 2, "title": "5.0.1", "description": "Things to do in the fast-follow 5.0.1 release.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2019-12-16T14:29:07Z", "updated_at": "2020-01-03T15:13:25Z", "due_on": null, "closed_at": "2019-12-28T10:55:30Z"}, "comments": 10, "created_at": "2019-12-16T20:38:23Z", "updated_at": "2019-12-22T01:40:22Z", "closed_at": "2019-12-19T21:28:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello!\r\n\r\nIs there a way to disable SQLite support for coverage 5.0? Coverage 5.0 recently broke tests in [moto](https://github.com/spulec/moto) where, for some reason, it does not play nicely with the AWS X-Ray Client: https://github.com/aws/aws-xray-sdk-python\r\n\r\nHere is a stacktrace showcasing the error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/travis/virtualenv/python3.8.0/bin/nosetests\", line 8, in <module>\r\n    sys.exit(run_exit())\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/nose/core.py\", line 118, in __init__\r\n    unittest.TestProgram.__init__(\r\n  File \"/opt/python/3.8.0/lib/python3.8/unittest/main.py\", line 101, in __init__\r\n    self.runTests()\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/nose/core.py\", line 207, in runTests\r\n    result = self.testRunner.run(self.test)\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/nose/core.py\", line 66, in run\r\n    result.printErrors()\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/nose/result.py\", line 110, in printErrors\r\n    self.config.plugins.report(self.stream)\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/nose/plugins/manager.py\", line 99, in __call__\r\n    return self.call(*arg, **kw)\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/nose/plugins/manager.py\", line 167, in simple\r\n    result = meth(*arg, **kw)\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/nose/plugins/cover.py\", line 183, in report\r\n    self.coverInstance.stop()\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/coverage/control.py\", line 641, in combine\r\n    self.get_data()\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/coverage/control.py\", line 667, in get_data\r\n    if self._collector and self._collector.flush_data():\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/coverage/collector.py\", line 429, in flush_data\r\n    self.covdata.add_lines(self.mapped_file_dict(self.data))\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/coverage/sqldata.py\", line 436, in add_lines\r\n    self._choose_lines_or_arcs(lines=True)\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/coverage/sqldata.py\", line 493, in _choose_lines_or_arcs\r\n    with self._connect() as con:\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/coverage/sqldata.py\", line 1008, in __enter__\r\n    self._connect()\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/coverage/sqldata.py\", line 996, in _connect\r\n    self.execute(\"pragma journal_mode=off\").close()\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/coverage/sqldata.py\", line 1025, in execute\r\n    return self.con.execute(sql, parameters)\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/aws_xray_sdk/ext/sqlite3/patch.py\", line 32, in execute\r\n    return self.cursor().execute(*args, **kwargs)\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/aws_xray_sdk/core/models/subsegment.py\", line 54, in __call__\r\n    return self.recorder.record_subsegment(\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/aws_xray_sdk/core/recorder.py\", line 417, in record_subsegment\r\n    subsegment = self.begin_subsegment(name, namespace)\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/aws_xray_sdk/core/recorder.py\", line 284, in begin_subsegment\r\n    segment = self.current_segment()\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/aws_xray_sdk/core/recorder.py\", line 267, in current_segment\r\n    entity = self.get_trace_entity()\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/aws_xray_sdk/core/recorder.py\", line 369, in get_trace_entity\r\n    return self.context.get_trace_entity()\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/aws_xray_sdk/core/context.py\", line 93, in get_trace_entity\r\n    return self.handle_context_missing()\r\n  File \"/home/travis/virtualenv/python3.8.0/lib/python3.8/site-packages/aws_xray_sdk/core/context.py\", line 118, in handle_context_missing\r\n    raise SegmentNotFoundException(MISSING_SEGMENT_MSG)\r\naws_xray_sdk.core.exceptions.exceptions.SegmentNotFoundException: cannot find the current segment/subsegment, please make sure you have a segment open\r\n```\r\n\r\nThe X-Ray client's use of SQLite and coverage's use of the SQLite seem to be stepping over each other. This problem appears on all Python 2 and 3 versions. \r\n\r\nIn the meantime, I am going to pin `moto` to `coverage==4.5.4`.\r\n\r\nI also raised this issue: https://github.com/spulec/moto/issues/2638", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/887", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/887/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/887/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/887/events", "html_url": "https://github.com/nedbat/coveragepy/issues/887", "id": 538586808, "node_id": "MDU6SXNzdWU1Mzg1ODY4MDg=", "number": 887, "title": "Coverage 5.0 fails for python3 installations lacking sqlite3", "user": {"login": "calebmayeux", "id": 5750591, "node_id": "MDQ6VXNlcjU3NTA1OTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5750591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebmayeux", "html_url": "https://github.com/calebmayeux", "followers_url": "https://api.github.com/users/calebmayeux/followers", "following_url": "https://api.github.com/users/calebmayeux/following{/other_user}", "gists_url": "https://api.github.com/users/calebmayeux/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebmayeux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebmayeux/subscriptions", "organizations_url": "https://api.github.com/users/calebmayeux/orgs", "repos_url": "https://api.github.com/users/calebmayeux/repos", "events_url": "https://api.github.com/users/calebmayeux/events{/privacy}", "received_events_url": "https://api.github.com/users/calebmayeux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 973321134, "node_id": "MDU6TGFiZWw5NzMzMjExMzQ=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2", "html_url": "https://github.com/nedbat/coveragepy/milestone/2", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2/labels", "id": 4935928, "node_id": "MDk6TWlsZXN0b25lNDkzNTkyOA==", "number": 2, "title": "5.0.1", "description": "Things to do in the fast-follow 5.0.1 release.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2019-12-16T14:29:07Z", "updated_at": "2020-01-03T15:13:25Z", "due_on": null, "closed_at": "2019-12-28T10:55:30Z"}, "comments": 2, "created_at": "2019-12-16T18:45:52Z", "updated_at": "2019-12-22T01:43:18Z", "closed_at": "2019-12-18T01:06:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nCoverage 5.0 doesn't explicitly have a requirement on sqlite3, which causes it to successfully install but fail when running in a python3 instance that doesn't have sqlite3 installed.\r\n\r\nExample stacktrace:\r\nFile \"lib/python3.7/site-packages/coverage/sqldata.py\", line 15, in <module>\r\n00:01:17.336      import sqlite3\r\n00:01:17.336    File \"lib/python3.7/sqlite3/__init__.py\", line 23, in <module>\r\n00:01:17.336      from sqlite3.dbapi2 import *\r\n00:01:17.336    File \"lib/python3.7/sqlite3/dbapi2.py\", line 27, in <module>\r\n00:01:17.336      from _sqlite3 import *\r\n00:01:17.336  ModuleNotFoundError: No module named '_sqlite3'\r\n\r\n**To Reproduce**\r\nInstall python from source (so it doesn't have sqlite3 automatically installed). Using these versions.\r\npython 3.7.4\r\nCoverage 5.0\r\n\r\n**Expected behavior**\r\nExpect the installation of coverage to install sqlite3 since it's a dependency and expect to not hit the missing package exception.\r\n\r\n**Additional context**\r\npython 3 installations installed from source don't automatically include sqlite3 unless you provide some other parameters to them. I assume this was missed because most people's installations have sqlite3 by default and thus don't hit this issue of the implied dependency.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/886", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/886/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/886/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/886/events", "html_url": "https://github.com/nedbat/coveragepy/issues/886", "id": 538583016, "node_id": "MDU6SXNzdWU1Mzg1ODMwMTY=", "number": 886, "title": "Latest 5.0 version raises CoverageException: file is not a database", "user": {"login": "ellbosch", "id": 4683017, "node_id": "MDQ6VXNlcjQ2ODMwMTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/4683017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellbosch", "html_url": "https://github.com/ellbosch", "followers_url": "https://api.github.com/users/ellbosch/followers", "following_url": "https://api.github.com/users/ellbosch/following{/other_user}", "gists_url": "https://api.github.com/users/ellbosch/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellbosch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellbosch/subscriptions", "organizations_url": "https://api.github.com/users/ellbosch/orgs", "repos_url": "https://api.github.com/users/ellbosch/repos", "events_url": "https://api.github.com/users/ellbosch/events{/privacy}", "received_events_url": "https://api.github.com/users/ellbosch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2", "html_url": "https://github.com/nedbat/coveragepy/milestone/2", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2/labels", "id": 4935928, "node_id": "MDk6TWlsZXN0b25lNDkzNTkyOA==", "number": 2, "title": "5.0.1", "description": "Things to do in the fast-follow 5.0.1 release.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2019-12-16T14:29:07Z", "updated_at": "2020-01-03T15:13:25Z", "due_on": null, "closed_at": "2019-12-28T10:55:30Z"}, "comments": 14, "created_at": "2019-12-16T18:37:04Z", "updated_at": "2020-03-25T20:51:37Z", "closed_at": "2019-12-22T18:25:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Our coverage report is failing as of this weekend. It's failing on Python 2 and 3.\r\n\r\nStack trace below. Thanks for the help!\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/coverage/sqldata.py\", line 1025, in execute\r\n    return self.con.execute(sql, parameters)\r\nsqlite3.DatabaseError: file is not a database\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/bin/pytest\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/_pytest/config/__init__.py\", line 72, in main\r\n    config = _prepareconfig(args, plugins)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/_pytest/config/__init__.py\", line 223, in _prepareconfig\r\n    pluginmanager=pluginmanager, args=args\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/hooks.py\", line 286, in __call__\r\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\n    return self._inner_hookexec(hook, methods, kwargs)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/manager.py\", line 87, in <lambda>\r\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/callers.py\", line 203, in _multicall\r\n    gen.send(outcome)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/_pytest/helpconfig.py\", line 89, in pytest_cmdline_parse\r\n    config = outcome.get_result()\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/callers.py\", line 80, in get_result\r\n    raise ex[1].with_traceback(ex[2])\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/callers.py\", line 187, in _multicall\r\n    res = hook_impl.function(*args)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/_pytest/config/__init__.py\", line 793, in pytest_cmdline_parse\r\n    self.parse(args)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/_pytest/config/__init__.py\", line 999, in parse\r\n    self._preparse(args, addopts=addopts)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/_pytest/config/__init__.py\", line 957, in _preparse\r\n    early_config=self, args=args, parser=self._parser\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/hooks.py\", line 286, in __call__\r\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\n    return self._inner_hookexec(hook, methods, kwargs)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/manager.py\", line 87, in <lambda>\r\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/callers.py\", line 208, in _multicall\r\n    return outcome.get_result()\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/callers.py\", line 80, in get_result\r\n    raise ex[1].with_traceback(ex[2])\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pluggy/callers.py\", line 187, in _multicall\r\n    res = hook_impl.function(*args)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pytest_cov/plugin.py\", line 118, in pytest_load_initial_conftests\r\n    plugin = CovPlugin(early_config.known_args_namespace, early_config.pluginmanager)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pytest_cov/plugin.py\", line 164, in __init__\r\n    self.start(engine.Central)\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pytest_cov/plugin.py\", line 186, in start\r\n    self.cov_controller.start()\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/pytest_cov/engine.py\", line 187, in start\r\n    self.cov.load()\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/coverage/control.py\", line 387, in load\r\n    self._data.read()\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/coverage/sqldata.py\", line 741, in read\r\n    with self._connect():       # TODO: doesn't look right\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/coverage/sqldata.py\", line 296, in _connect\r\n    self._open_db()\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/coverage/sqldata.py\", line 264, in _open_db\r\n    self._read_db()\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/coverage/sqldata.py\", line 268, in _read_db\r\n    with self._dbs[get_thread_id()] as db:\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/coverage/sqldata.py\", line 1008, in __enter__\r\n    self._connect()\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/coverage/sqldata.py\", line 996, in _connect\r\n    self.execute(\"pragma journal_mode=off\").close()\r\n  File \"/Users/ellbosch/Repos/mssql-cli/.tox/py37/lib/python3.7/site-packages/coverage/sqldata.py\", line 1027, in execute\r\n    raise CoverageException(\"Couldn't use data file {!r}: {}\".format(self.filename, exc))\r\ncoverage.misc.CoverageException: Couldn't use data file '/Users/ellbosch/Repos/mssql-cli/.coverage': file is not a database\r\nCommand '['pytest', '-l', '--cov', 'mssqlcli', '--doctest-modules', '--junitxml=junit/test-6d62ae30-2031-11ea-80ec-3af9d39e6caa-results.xml', '--cov-report=xml', '--cov-report=html', '--cov-append', '-o', 'junit_suite_name=pytest-3.7.4', '-s', '-m', 'not unstable', 'tests/jsonrpc']' returned non-zero exit status 1.\r\nERROR: InvocationError for command /Users/ellbosch/Repos/mssql-cli/.tox/py37/bin/python build.py unit_test (exited with code 1)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/885", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/885/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/885/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/885/events", "html_url": "https://github.com/nedbat/coveragepy/issues/885", "id": 538562079, "node_id": "MDU6SXNzdWU1Mzg1NjIwNzk=", "number": 885, "title": "Documentation: 4.5.x links are now broken", "user": {"login": "mtlynch", "id": 7783288, "node_id": "MDQ6VXNlcjc3ODMyODg=", "avatar_url": "https://avatars3.githubusercontent.com/u/7783288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mtlynch", "html_url": "https://github.com/mtlynch", "followers_url": "https://api.github.com/users/mtlynch/followers", "following_url": "https://api.github.com/users/mtlynch/following{/other_user}", "gists_url": "https://api.github.com/users/mtlynch/gists{/gist_id}", "starred_url": "https://api.github.com/users/mtlynch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mtlynch/subscriptions", "organizations_url": "https://api.github.com/users/mtlynch/orgs", "repos_url": "https://api.github.com/users/mtlynch/repos", "events_url": "https://api.github.com/users/mtlynch/events{/privacy}", "received_events_url": "https://api.github.com/users/mtlynch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2", "html_url": "https://github.com/nedbat/coveragepy/milestone/2", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2/labels", "id": 4935928, "node_id": "MDk6TWlsZXN0b25lNDkzNTkyOA==", "number": 2, "title": "5.0.1", "description": "Things to do in the fast-follow 5.0.1 release.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2019-12-16T14:29:07Z", "updated_at": "2020-01-03T15:13:25Z", "due_on": null, "closed_at": "2019-12-28T10:55:30Z"}, "comments": 1, "created_at": "2019-12-16T17:53:17Z", "updated_at": "2020-01-03T15:13:25Z", "closed_at": "2019-12-23T02:35:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Congrats on the 5.0 release!\r\n\r\nPer the discussion on #737, I changed links in [my tutorial](https://mtlynch.io/resurrecting-3/#adding-code-coverage) to coveragepy's documentation using the recommended `4.5.x` format, like:\r\n\r\n* https://coverage.readthedocs.io/en/v4.5.x/config.html\r\n\r\nMy understanding was that the 4.5.x format would be supported for permalinks, but they recently broke. Would it be possible to get the 4.5.x links live again? Otherwise, anyone who linked to any of the 4.5.x documentation now has broken links.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/884", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/884/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/884/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/884/events", "html_url": "https://github.com/nedbat/coveragepy/issues/884", "id": 538489415, "node_id": "MDU6SXNzdWU1Mzg0ODk0MTU=", "number": 884, "title": "Coverage fails to generate report with 0% coverage", "user": {"login": "wlcx", "id": 3065381, "node_id": "MDQ6VXNlcjMwNjUzODE=", "avatar_url": "https://avatars0.githubusercontent.com/u/3065381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wlcx", "html_url": "https://github.com/wlcx", "followers_url": "https://api.github.com/users/wlcx/followers", "following_url": "https://api.github.com/users/wlcx/following{/other_user}", "gists_url": "https://api.github.com/users/wlcx/gists{/gist_id}", "starred_url": "https://api.github.com/users/wlcx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wlcx/subscriptions", "organizations_url": "https://api.github.com/users/wlcx/orgs", "repos_url": "https://api.github.com/users/wlcx/repos", "events_url": "https://api.github.com/users/wlcx/events{/privacy}", "received_events_url": "https://api.github.com/users/wlcx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3", "html_url": "https://github.com/nedbat/coveragepy/milestone/3", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/3/labels", "id": 4951945, "node_id": "MDk6TWlsZXN0b25lNDk1MTk0NQ==", "number": 3, "title": "5.0.2", "description": "More things to fix in the 5.0.x stream.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-12-22T18:28:46Z", "updated_at": "2020-01-06T00:30:01Z", "due_on": null, "closed_at": "2020-01-06T00:30:01Z"}, "comments": 2, "created_at": "2019-12-16T15:39:15Z", "updated_at": "2020-01-05T23:43:09Z", "closed_at": "2020-01-04T21:22:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nCoverage >5.0a6 seems to fail to generate a report when coverage is 0%, when run by pytest-cov under tox.\r\n\r\n**To Reproduce**\r\nPlease see https://github.com/wlcx/coverage-bug-repro for a minimum working reproduction of this. Essentially, it is a single module project, with a test that doesn't actually result in any code coverage. I appreciate this is a bit of a useless edge case, but this did used to not cause any errors!\r\n\r\n- Run `tox` (which runs `python -m pytest --cov=foo tests/`):\r\n```\r\nPS C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro> tox\r\npy3 recreate: C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro\\.tox\\py3\r\npy3 installdeps: py, pytest, pytest-cov, coverage\r\npy3 installed: atomicwrites==1.3.0,attrs==19.3.0,colorama==0.4.3,coverage==5.0,importlib-metadata==1.3.0,more-itertools==8.0.2,packaging==19.2,pluggy==0.13.1,py==1.8.0,pyparsing==2.4.5,pytest==5.3.2,pytest-cov==2.8.1,six==1.13.0,wcwidth==0.1.7,zipp==0.6.0\r\npy3 run-test-pre: PYTHONHASHSEED='286'\r\npy3 run-test: commands[0] | python -m pytest --cov=foo tests/\r\n=========================================================== test session starts ============================================================ \r\nplatform win32 -- Python 3.7.4, pytest-5.3.2, py-1.8.0, pluggy-0.13.1\r\ncachedir: .tox\\py3\\.pytest_cache\r\nrootdir: C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro\r\nplugins: cov-2.8.1\r\ncollected 1 item                                                                                                                             \r\n\r\ntests\\test_nothing.py .                                                                                                               [100%]Coverage.py warning: No data was collected. (no-data-collected)\r\nWARNING: Failed to generate report: No data to report.\r\n\r\nC:\\Users\\sam.willcocks\\prog\\coverage-bug-repro\\.tox\\py3\\lib\\site-packages\\pytest_cov\\plugin.py:254: PytestWarning: Failed to generate report: No data to report.\r\n\r\n  self.cov_controller.finish()\r\n\r\n\r\n----------- coverage: platform win32, python 3.7.4-final-0 -----------\r\n\r\n\r\n============================================================ 1 passed in 0.07s ============================================================= \r\n_________________________________________________________________ summary __________________________________________________________________ \r\n  py3: commands succeeded\r\n  congratulations :)\r\n```\r\n\r\n- then, subsequently running `tox -e coverage-report` (running coverage html):\r\n```\r\nPS C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro> tox -e coverage-report   \r\ncoverage-report recreate: C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro\\.tox\\coverage-report\r\ncoverage-report installdeps: coverage\r\ncoverage-report installed: coverage==5.0\r\ncoverage-report run-test-pre: PYTHONHASHSEED='242'\r\ncoverage-report run-test: commands[0] | coverage html\r\nNo data to report.\r\nERROR: InvocationError for command 'C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro\\.tox\\coverage-report\\Scripts\\coverage.EXE' html (exited with code 1)\r\n_________________________________________________________________ summary __________________________________________________________________ \r\nERROR:   coverage-report: commands failed\r\n```\r\n\r\n**Expected behavior**\r\nIf I pin the version of coverage used to `==5.0a5`:\r\n```\r\nPS C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro> tox\r\npy3 recreate: C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro\\.tox\\py3\r\npy3 installdeps: py, pytest, pytest-cov, coverage==5.0a5\r\npy3 installed: atomicwrites==1.3.0,attrs==19.3.0,colorama==0.4.3,coverage==5.0a5,importlib-metadata==1.3.0,more-itertools==8.0.2,packaging==19.2,pluggy==0.13.1,py==1.8.0,pyparsing==2.4.5,pytest==5.3.2,pytest-cov==2.8.1,six==1.13.0,wcwidth==0.1.7,zipp==0.6.0\r\npy3 run-test-pre: PYTHONHASHSEED='845'\r\npy3 run-test: commands[0] | python -m pytest --cov=foo tests/\r\n=========================================================== test session starts ============================================================ \r\nplatform win32 -- Python 3.7.4, pytest-5.3.2, py-1.8.0, pluggy-0.13.1\r\ncachedir: .tox\\py3\\.pytest_cache\r\nrootdir: C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro\r\nplugins: cov-2.8.1\r\ncollected 1 item                                                                                                                             \r\n\r\ntests\\test_nothing.py .                                                                                                               [100%]Coverage.py warning: No data was collected. (no-data-collected)\r\n\r\n\r\n----------- coverage: platform win32, python 3.7.4-final-0 -----------\r\nName         Stmts   Miss  Cover\r\n--------------------------------\r\nfoo\\bar.py       2      2     0%\r\n\r\n\r\n============================================================ 1 passed in 0.21s ============================================================= \r\n_________________________________________________________________ summary __________________________________________________________________ \r\n  py3: commands succeeded\r\n  congratulations :)\r\n```\r\n- then, running `coverage html`:\r\n```\r\nPS C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro> tox -e coverage-report   \r\ncoverage-report recreate: C:\\Users\\sam.willcocks\\prog\\coverage-bug-repro\\.tox\\coverage-report\r\ncoverage-report installdeps: coverage==5.0a5\r\ncoverage-report installed: coverage==5.0a5\r\ncoverage-report run-test-pre: PYTHONHASHSEED='595'\r\ncoverage-report run-test: commands[0] | coverage html\r\n_________________________________________________________________ summary __________________________________________________________________ \r\n  coverage-report: commands succeeded\r\n  congratulations :)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/882", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/882/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/882/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/882/events", "html_url": "https://github.com/nedbat/coveragepy/issues/882", "id": 538431110, "node_id": "MDU6SXNzdWU1Mzg0MzExMTA=", "number": 882, "title": "coverage.control.Coverage.data_suffix has been removed in 5.0.0, but is not in the release notes", "user": {"login": "eric-wieser", "id": 425260, "node_id": "MDQ6VXNlcjQyNTI2MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/425260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eric-wieser", "html_url": "https://github.com/eric-wieser", "followers_url": "https://api.github.com/users/eric-wieser/followers", "following_url": "https://api.github.com/users/eric-wieser/following{/other_user}", "gists_url": "https://api.github.com/users/eric-wieser/gists{/gist_id}", "starred_url": "https://api.github.com/users/eric-wieser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eric-wieser/subscriptions", "organizations_url": "https://api.github.com/users/eric-wieser/orgs", "repos_url": "https://api.github.com/users/eric-wieser/repos", "events_url": "https://api.github.com/users/eric-wieser/events{/privacy}", "received_events_url": "https://api.github.com/users/eric-wieser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2", "html_url": "https://github.com/nedbat/coveragepy/milestone/2", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2/labels", "id": 4935928, "node_id": "MDk6TWlsZXN0b25lNDkzNTkyOA==", "number": 2, "title": "5.0.1", "description": "Things to do in the fast-follow 5.0.1 release.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2019-12-16T14:29:07Z", "updated_at": "2020-01-03T15:13:25Z", "due_on": null, "closed_at": "2019-12-28T10:55:30Z"}, "comments": 5, "created_at": "2019-12-16T14:02:09Z", "updated_at": "2019-12-17T13:59:12Z", "closed_at": "2019-12-17T00:24:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "The `.data_suffix` attribute on `Coverage` instances has been removed. This change isn't documented in the release notes.\r\n\r\nCauses https://github.com/computationalmodelling/nbval/issues/129\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/880", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/880/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/880/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/880/events", "html_url": "https://github.com/nedbat/coveragepy/issues/880", "id": 538053209, "node_id": "MDU6SXNzdWU1MzgwNTMyMDk=", "number": 880, "title": "5.0.0 breaking changes: --append behavior", "user": {"login": "gpotter2", "id": 10530980, "node_id": "MDQ6VXNlcjEwNTMwOTgw", "avatar_url": "https://avatars0.githubusercontent.com/u/10530980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gpotter2", "html_url": "https://github.com/gpotter2", "followers_url": "https://api.github.com/users/gpotter2/followers", "following_url": "https://api.github.com/users/gpotter2/following{/other_user}", "gists_url": "https://api.github.com/users/gpotter2/gists{/gist_id}", "starred_url": "https://api.github.com/users/gpotter2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gpotter2/subscriptions", "organizations_url": "https://api.github.com/users/gpotter2/orgs", "repos_url": "https://api.github.com/users/gpotter2/repos", "events_url": "https://api.github.com/users/gpotter2/events{/privacy}", "received_events_url": "https://api.github.com/users/gpotter2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2", "html_url": "https://github.com/nedbat/coveragepy/milestone/2", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/2/labels", "id": 4935928, "node_id": "MDk6TWlsZXN0b25lNDkzNTkyOA==", "number": 2, "title": "5.0.1", "description": "Things to do in the fast-follow 5.0.1 release.", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2019-12-16T14:29:07Z", "updated_at": "2020-01-03T15:13:25Z", "due_on": null, "closed_at": "2019-12-28T10:55:30Z"}, "comments": 13, "created_at": "2019-12-15T13:44:16Z", "updated_at": "2019-12-22T18:24:59Z", "closed_at": "2019-12-15T15:36:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Describe the bug\r\n**> Some breaking changes (?) should be documented in\r\nhttps://coverage.readthedocs.io/en/coverage-5.0/whatsnew5x.html**\r\n\r\n~~I'm assuming the `--append` option is now enabled by default, thus breaking `codecov combine`. (That's my guess, see below to make up your mind).~~\r\n\r\n**Edited:** the inconsistency with 4.5.4 seem to be a bug fix.\r\n\r\nI haven't seen this documented anywhere. Our test suite [broke this morning](https://travis-ci.com/secdev/scapy/jobs/267364092), and after some troubleshooting It appears that's related to the 5.0.0 update of coverage.py.\r\n\r\nWe use coverage.py as part of our automated unit testing, here's our basic workflow:\r\n\r\n- Tests are [started using tox](https://github.com/secdev/scapy/blob/master/tox.ini)\r\n- We run several unit tests using `coverage run -a -m [...]`\r\n- `coverage combine`\r\n- We call [`codecov`](https://github.com/codecov/codecov-python) which starts off by calling `coverage xml`\r\n\r\n### To Reproduce\r\n1. What version of Python are you using?\r\n\r\n```\r\ngpotter@vmg:~/github/scapy$ python --version\r\nPython 3.7.4\r\n```\r\n\r\n1. What version of coverage.py are you using? The output of `coverage debug sys` is helpful.\r\n\r\n<details>\r\n<summary>For coverage 4.5.4</summary>\r\n\r\n```bash\r\ngpotter@vmg:~/github/scapy$ coverage debug sys\r\n-- sys -------------------------------------------------------\r\n              version: 4.5.4\r\n             coverage: /home/gpotter/.pyenv/versions/3.7.4/lib/python3.7/site-packages/coverage/__init__.py\r\n          cover_paths: /netdisk/home/gpotter/.pyenv/versions/3.7.4/lib/python3.7/site-packages/coverage\r\n          pylib_paths: /netdisk/home/gpotter/.pyenv/versions/3.7.4/lib/python3.7\r\n               tracer: CTracer\r\n plugins.file_tracers: -none-\r\n  plugins.configurers: -none-\r\n         config_files: .coveragerc\r\n         configs_read: .coveragerc\r\n            data_path: /netdisk/home/gpotter/github/scapy/.coverage\r\n               python: 3.7.4 (default, Sep 11 2019, 21:46:22) [GCC 7.4.0]\r\n             platform: Linux-5.0.0-1025-azure-x86_64-with-debian-buster-sid\r\n       implementation: CPython\r\n           executable: /home/gpotter/.pyenv/versions/3.7.4/bin/python3\r\n                  cwd: /netdisk/home/gpotter/github/scapy\r\n                 path:\r\n                       /home/gpotter/.pyenv/versions/3.7.4/lib/python37.zip\r\n                       /home/gpotter/.pyenv/versions/3.7.4/lib/python3.7\r\n                       /home/gpotter/.pyenv/versions/3.7.4/lib/python3.7/lib-dynload\r\n                       /home/gpotter/.local/lib/python3.7/site-packages\r\n                       /home/gpotter/.local/lib/python3.7/site-packages/mcstatus-2.2.1-py3.7.egg\r\n                       /home/gpotter/.local/lib/python3.7/site-packages/dnspython3-1.15.0-py3.7.egg\r\n                       /home/gpotter/.local/lib/python3.7/site-packages/Click-7.0-py3.7.egg\r\n                       /home/gpotter/.local/lib/python3.7/site-packages/six-1.12.0-py3.7.egg\r\n                       /home/gpotter/.local/lib/python3.7/site-packages/dnspython-1.15.0-py3.7.egg\r\n                       /home/gpotter/.pyenv/versions/3.7.4/lib/python3.7/site-packages\r\n          environment: PYENV_DIR = /home/gpotter/github/scapy\r\n                       PYENV_HOOK_PATH = /home/gpotter/.pyenv/pyenv.d:/usr/local/etc/pyenv.d:/etc/pyenv.d:/usr/lib/pyenv/hooks:/home/gpotter/.pyenv/plugins/pyenv-virtualenv/etc/pyenv.d:/home/gpotter/.pyenv/plugins/pyenv-which-ext/etc/pyenv.d\r\n                       PYENV_ROOT = /home/gpotter/.pyenv\r\n                       PYENV_SHELL = bash\r\n                       PYENV_VERSION = 3.7.4\r\n                       PYENV_VIRTUALENV_INIT = 1\r\n         command_line: /home/gpotter/.pyenv/versions/3.7.4/bin/coverage debug sys\r\n         source_match: -none-\r\n    source_pkgs_match: -none-\r\n        include_match: -none-\r\n           omit_match: /netdisk/home/gpotter/github/scapy/scapy/tools/UTscapy.py\r\n                       /netdisk/home/gpotter/github/scapy/test/*\r\n                       /netdisk/home/gpotter/github/scapy/scapy/modules/six.py\r\n                       /netdisk/home/gpotter/github/scapy/scapy/modules/winpcapy.py\r\n                       /netdisk/home/gpotter/github/scapy/scapy/modules/ethertypes.py\r\n                       /netdisk/home/gpotter/github/scapy/.tox/*\r\n                       /private/*\r\n          cover_match: /netdisk/home/gpotter/.pyenv/versions/3.7.4/lib/python3.7/site-packages/coverage\r\n          pylib_match: /netdisk/home/gpotter/.pyenv/versions/3.7.4/lib/python3.7\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>For coverage 5.0.0</summary>\r\n\r\n```bash\r\ngpotter@vmg:~/github/scapy$ coverage debug sys\r\n-- sys -------------------------------------------------------\r\n                   version: 5.0\r\n                  coverage: /home/gpotter/.pyenv/versions/3.7.4/lib/python3.7/site-packages/coverage/__init__.py\r\n                    tracer: -none-\r\n                   CTracer: available\r\n      plugins.file_tracers: -none-\r\n       plugins.configurers: -none-\r\n plugins.context_switchers: -none-\r\n         configs_attempted: .coveragerc\r\n              configs_read: .coveragerc\r\n               config_file: .coveragerc\r\n           config_contents: '[run]\\nconcurrency = multiprocessing\\nomit =\\n    # Scapy specific paths\\n    scapy/tools/UTscapy.py\\n    test/*\\n    # Scapy external modules\\n    scapy/modules/six.py\\n    scapy/modules/winpcapy.py\\n    scapy/modules/ethertypes.py\\n    # .tox specific path\\n    .tox/*\\n    # OS specific paths\\n    /private/*\\n'\r\n                 data_file: -none-\r\n                    python: 3.7.4 (default, Sep 11 2019, 21:46:22) [GCC 7.4.0]\r\n                  platform: Linux-5.0.0-1025-azure-x86_64-with-debian-buster-sid\r\n            implementation: CPython\r\n                executable: /home/gpotter/.pyenv/versions/3.7.4/bin/python3\r\n              def_encoding: utf-8\r\n               fs_encoding: utf-8\r\n                       pid: 91527\r\n                       cwd: /netdisk/home/gpotter/github/scapy\r\n                      path: /netdisk/home/gpotter/.pyenv/versions/3.7.4/bin\r\n                            /home/gpotter/.pyenv/versions/3.7.4/lib/python37.zip\r\n                            /home/gpotter/.pyenv/versions/3.7.4/lib/python3.7\r\n                            /home/gpotter/.pyenv/versions/3.7.4/lib/python3.7/lib-dynload\r\n                            /home/gpotter/.local/lib/python3.7/site-packages\r\n                            /home/gpotter/.local/lib/python3.7/site-packages/mcstatus-2.2.1-py3.7.egg\r\n                            /home/gpotter/.local/lib/python3.7/site-packages/dnspython3-1.15.0-py3.7.egg\r\n                            /home/gpotter/.local/lib/python3.7/site-packages/Click-7.0-py3.7.egg\r\n                            /home/gpotter/.local/lib/python3.7/site-packages/six-1.12.0-py3.7.egg\r\n                            /home/gpotter/.local/lib/python3.7/site-packages/dnspython-1.15.0-py3.7.egg\r\n                            /home/gpotter/.pyenv/versions/3.7.4/lib/python3.7/site-packages\r\n               environment: PYENV_DIR = /home/gpotter/github/scapy\r\n                            PYENV_HOOK_PATH = /home/gpotter/.pyenv/pyenv.d:/usr/local/etc/pyenv.d:/etc/pyenv.d:/usr/lib/pyenv/hooks:/home/gpotter/.pyenv/plugins/pyenv-virtualenv/etc/pyenv.d:/home/gpotter/.pyenv/plugins/pyenv-which-ext/etc/pyenv.d\r\n                            PYENV_ROOT = /home/gpotter/.pyenv\r\n                            PYENV_SHELL = bash\r\n                            PYENV_VERSION = 3.7.4\r\n                            PYENV_VIRTUALENV_INIT = 1\r\n              command_line: /home/gpotter/.pyenv/versions/3.7.4/bin/coverage debug sys\r\n           sqlite3_version: 2.6.0\r\n    sqlite3_sqlite_version: 3.22.0\r\n```\r\n\r\n</details>\r\n\r\n1.  ~~What versions of what packages do you have installed? The output of `pip freeze` is helpful.~~\r\n1. What code are you running?  (Most likely not useful,) [this commit](https://github.com/secdev/scapy/tree/ff43e450709605314c4739287e83c588a974a502)\r\n1. What commands did you run?\r\n\r\n```bash\r\ncoverage --version\r\n# those commands are a demo: we just start scapy and stop it. You can most likely use anything\r\necho \"exit()\" | coverage run -a -m scapy > /dev/null 2>&1\r\necho \"exit()\" | coverage run -a -m scapy > /dev/null 2>&1\r\nls -alF | grep \".coverage\"\r\ncoverage combine\r\necho $?\r\n```\r\n\r\n### Expected behavior\r\n\r\nHere's what happens when running the code displayed above:\r\n\r\n- **On 5.0.0:**\r\n```bash\r\ngpotter@vmg:~/github/scapy$ coverage --version\r\nCoverage.py, version 5.0 with C extension\r\nFull documentation is at https://coverage.readthedocs.io\r\ngpotter@vmg:~/github/scapy$ echo \"exit()\" | coverage run -a -m scapy > /dev/null 2>&1\r\ngpotter@vmg:~/github/scapy$ echo \"exit()\" | coverage run -a -m scapy > /dev/null 2>&1\r\ngpotter@vmg:~/github/scapy$ ll | grep \".coverage\"\r\n-rw-r--r--  1 gpotter gpotter 81920 Dec 15 13:29 .coverage\r\n-rw-rw-r--  1 gpotter gpotter   299 Dec  6 22:41 .coveragerc\r\ngpotter@vmg:~/github/scapy$ coverage combine\r\nNo data to combine\r\ngpotter@vmg:~/github/scapy$ echo $?\r\n1\r\n```\r\n\r\n- **On 4.5.4:**\r\n```bash\r\ngpotter@vmg:~/github/scapy$ coverage --version\r\nCoverage.py, version 4.5.4 with C extension\r\nDocumentation at https://coverage.readthedocs.io\r\ngpotter@vmg:~/github/scapy$ echo \"exit()\" | coverage run -a -m scapy > /dev/null 2>&1\r\ngpotter@vmg:~/github/scapy$ echo \"exit()\" | coverage run -a -m scapy > /dev/null 2>&1\r\ngpotter@vmg:~/github/scapy$ ll | grep \".coverage\"\r\n-rw-rw-r--  1 gpotter gpotter 82949 Dec 15 13:30 .coverage.vmg.90662.854455\r\n-rw-rw-r--  1 gpotter gpotter 82949 Dec 15 13:30 .coverage.vmg.90762.195813\r\n-rw-rw-r--  1 gpotter gpotter   299 Dec  6 22:41 .coveragerc\r\ngpotter@vmg:~/github/scapy$ coverage combine\r\ngpotter@vmg:~/github/scapy$ echo $?\r\n0\r\n```\r\n\r\n<details>\r\n<summary>Our `.coveragerc` file</summary>\r\n\r\n```\r\n[run]\r\nconcurrency = multiprocessing\r\nomit =\r\n    # Scapy specific paths\r\n    scapy/tools/UTscapy.py\r\n    test/*\r\n    # Scapy external modules\r\n    scapy/modules/six.py\r\n    scapy/libs/winpcapy.py\r\n    scapy/libs/ethertypes.py\r\n    # .tox specific path\r\n    .tox/*\r\n    # OS specific paths\r\n    /private/*\r\n```\r\n\r\n</details>\r\n\r\nAs shown, the return code is 1 on 5.0.0, and 0 on 4.5.4. This explains why our tests suddently failed starting today.\r\n\r\nShould this be documented ? Is this behavior expected ?\r\n\r\nThanks for your time\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/879", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/879/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/879/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/879/events", "html_url": "https://github.com/nedbat/coveragepy/issues/879", "id": 535464931, "node_id": "MDU6SXNzdWU1MzU0NjQ5MzE=", "number": 879, "title": "Improve doc/subprocess.rst for multiprocessing module limitation", "user": {"login": "gzcf", "id": 7711532, "node_id": "MDQ6VXNlcjc3MTE1MzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/7711532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gzcf", "html_url": "https://github.com/gzcf", "followers_url": "https://api.github.com/users/gzcf/followers", "following_url": "https://api.github.com/users/gzcf/following{/other_user}", "gists_url": "https://api.github.com/users/gzcf/gists{/gist_id}", "starred_url": "https://api.github.com/users/gzcf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gzcf/subscriptions", "organizations_url": "https://api.github.com/users/gzcf/orgs", "repos_url": "https://api.github.com/users/gzcf/repos", "events_url": "https://api.github.com/users/gzcf/events{/privacy}", "received_events_url": "https://api.github.com/users/gzcf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1725582439, "node_id": "MDU6TGFiZWwxNzI1NTgyNDM5", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/multiprocessing", "name": "multiprocessing", "color": "eab779", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-12-10T03:14:18Z", "updated_at": "2019-12-11T10:02:00Z", "closed_at": "2019-12-11T02:53:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nI am developing a program which leverage `multiprocessing` module to do parallel tasks. After read `doc/subprocess.rst` and try, I figured out that documented solution doesn't work for  `multiprocessing.Process`.Fisrt, both `sitecustomize.py` and `.pth` file doesn't work in subprocesses created by `multiprocessing.Process`. It's because when use `multiprocessing.Process`, subprocesses won't import `site` module again, there is not chance to do `sitecustomize.py` or `.pth` file customization. Second, when these subprocesses exit, `atexit` functions get never called, `coverage` has no chance to write collected data.\r\n\r\n**Describe the solution you'd like**\r\nMaybe we could improve document and point out this limitation.\r\n\r\n**Describe alternatives you've considered**\r\nI came up with a workaround.\r\n\r\ntest.py\r\n```\r\ndef func():\r\n    try:\r\n        import coverage\r\n        coverage.process_startup()\r\n    except:\r\n        traceback.print_exc()\r\n    # Emulate time-consuming work\r\n    time.sleep(5)\r\n    atexit._run_exitfuncs()\r\n\r\np = Process(target=func)\r\np.start()\r\np.join()\r\n```\r\n\r\n```\r\nCOVERAGE_PROCESS_START=.coveragerc coverage run test.py\r\n```\r\nThis seems work. Apparently, there are many cons. 1. there may exists side-effects when other libraries depends on this atexit feature. 2. We call atexit protected method. 3. At most times, we can not (or want to avoid to) add such code into normal code.\r\n\r\n**Additional context**\r\nNone\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/875", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/875/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/875/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/875/events", "html_url": "https://github.com/nedbat/coveragepy/issues/875", "id": 529744175, "node_id": "MDU6SXNzdWU1Mjk3NDQxNzU=", "number": 875, "title": "coverage report wrong.", "user": {"login": "little-hang", "id": 24517540, "node_id": "MDQ6VXNlcjI0NTE3NTQw", "avatar_url": "https://avatars2.githubusercontent.com/u/24517540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/little-hang", "html_url": "https://github.com/little-hang", "followers_url": "https://api.github.com/users/little-hang/followers", "following_url": "https://api.github.com/users/little-hang/following{/other_user}", "gists_url": "https://api.github.com/users/little-hang/gists{/gist_id}", "starred_url": "https://api.github.com/users/little-hang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/little-hang/subscriptions", "organizations_url": "https://api.github.com/users/little-hang/orgs", "repos_url": "https://api.github.com/users/little-hang/repos", "events_url": "https://api.github.com/users/little-hang/events{/privacy}", "received_events_url": "https://api.github.com/users/little-hang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 991685361, "node_id": "MDU6TGFiZWw5OTE2ODUzNjE=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/cant-reproduce", "name": "cant-reproduce", "color": "c6313e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-28T07:42:01Z", "updated_at": "2020-01-14T11:58:28Z", "closed_at": "2020-01-14T11:58:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "when i input: coverage report -m\r\nit tells me :\r\n![image](https://user-images.githubusercontent.com/24517540/69786427-60634680-11f5-11ea-8279-4a8a41348a89.png)\r\n\r\n the web server is started by using flask+uswgi. And I start it in docker .\r\n\r\ngenerate coverage file by using coverage api", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/874", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/874/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/874/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/874/events", "html_url": "https://github.com/nedbat/coveragepy/issues/874", "id": 529570254, "node_id": "MDU6SXNzdWU1Mjk1NzAyNTQ=", "number": 874, "title": "4.5.4: test suite is failing", "user": {"login": "kloczek", "id": 31284574, "node_id": "MDQ6VXNlcjMxMjg0NTc0", "avatar_url": "https://avatars0.githubusercontent.com/u/31284574?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kloczek", "html_url": "https://github.com/kloczek", "followers_url": "https://api.github.com/users/kloczek/followers", "following_url": "https://api.github.com/users/kloczek/following{/other_user}", "gists_url": "https://api.github.com/users/kloczek/gists{/gist_id}", "starred_url": "https://api.github.com/users/kloczek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kloczek/subscriptions", "organizations_url": "https://api.github.com/users/kloczek/orgs", "repos_url": "https://api.github.com/users/kloczek/repos", "events_url": "https://api.github.com/users/kloczek/events{/privacy}", "received_events_url": "https://api.github.com/users/kloczek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-11-27T20:59:29Z", "updated_at": "2019-11-29T20:58:40Z", "closed_at": "2019-11-27T21:37:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "<pre>+ cd coveragepy-coverage-4.5.4\r\n+ /usr/bin/python3 setup.py test\r\nrunning test\r\nWARNING: Testing via this command is deprecated and will be removed in a future version. Users looking for a generic test entry point independent of test runner are encouraged to use tox.\r\nrunning egg_info\r\nwriting coverage.egg-info/PKG-INFO\r\nwriting dependency_links to coverage.egg-info/dependency_links.txt\r\nwriting entry points to coverage.egg-info/entry_points.txt\r\nwriting top-level names to coverage.egg-info/top_level.txt\r\nreading manifest file &apos;coverage.egg-info/SOURCES.txt&apos;\r\nreading manifest template &apos;MANIFEST.in&apos;\r\nwarning: no previously-included files found matching &apos;ci/appveyor.token&apos;\r\nno previously-included directories found matching &apos;doc/_build&apos;\r\nno previously-included directories found matching &apos;tests/eggsrc/build&apos;\r\nno previously-included directories found matching &apos;tests/eggsrc/dist&apos;\r\nno previously-included directories found matching &apos;tests/eggsrc/*.egg-info&apos;\r\nwarning: no previously-included files matching &apos;*.py[co]&apos; found anywhere in distribution\r\nwriting manifest file &apos;coverage.egg-info/SOURCES.txt&apos;\r\nrunning build_ext\r\nbuilding &apos;coverage.tracer&apos; extension\r\ngcc -pthread -Wno-unused-result -Wsign-compare -DDYNAMIC_ANNOTATIONS_ENABLED=1 -DNDEBUG -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python3.8 -c coverage/ctracer/datastack.c -o build/temp.linux-x86_64-3.8/coverage/ctracer/datastack.o\r\ngcc -pthread -Wno-unused-result -Wsign-compare -DDYNAMIC_ANNOTATIONS_ENABLED=1 -DNDEBUG -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python3.8 -c coverage/ctracer/filedisp.c -o build/temp.linux-x86_64-3.8/coverage/ctracer/filedisp.o\r\ngcc -pthread -Wno-unused-result -Wsign-compare -DDYNAMIC_ANNOTATIONS_ENABLED=1 -DNDEBUG -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python3.8 -c coverage/ctracer/module.c -o build/temp.linux-x86_64-3.8/coverage/ctracer/module.o\r\ngcc -pthread -Wno-unused-result -Wsign-compare -DDYNAMIC_ANNOTATIONS_ENABLED=1 -DNDEBUG -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python3.8 -c coverage/ctracer/tracer.c -o build/temp.linux-x86_64-3.8/coverage/ctracer/tracer.o\r\ngcc -pthread -shared -Wl,-z,relro -Wl,--as-needed -Wl,-z,now -g -Wl,-z,relro -Wl,--as-needed -Wl,-z,now -g build/temp.linux-x86_64-3.8/coverage/ctracer/datastack.o build/temp.linux-x86_64-3.8/coverage/ctracer/filedisp.o build/temp.linux-x86_64-3.8/coverage/ctracer/module.o build/temp.linux-x86_64-3.8/coverage/ctracer/tracer.o -L/usr/lib64 -o /home/tkloczko/rpmbuild/BUILD/coveragepy-coverage-4.5.4/coverage/tracer.cpython-38-x86_64-linux-gnu.so\r\nUnknown command: &apos;test&apos;\r\nUse &apos;setup.py help&apos; for help.\r\nerror: Bad exit status from /var/tmp/rpm-tmp.pdmujv (%check)\r\n</pre>\r\n\r\nCould you please consider change tagging convension from coveragepy-<version> ro just version because autogenerated gitlab tar ball comes with coveragepy-coverage-<version> base directory.\r\nYou can see that in  http://pypi.python.org/packages/source/c/coverage/coverage-4.5.4.tar.gz", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/873", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/873/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/873/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/873/events", "html_url": "https://github.com/nedbat/coveragepy/issues/873", "id": 527554356, "node_id": "MDU6SXNzdWU1Mjc1NTQzNTY=", "number": 873, "title": "Finish the tabbed getting started docs", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973387395, "node_id": "MDU6TGFiZWw5NzMzODczOTU=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/docs", "name": "docs", "color": "c6b8f2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1", "html_url": "https://github.com/nedbat/coveragepy/milestone/1", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1/labels", "id": 4626287, "node_id": "MDk6TWlsZXN0b25lNDYyNjI4Nw==", "number": 1, "title": "5.0", "description": "Things to get finished before 5.0", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2019-09-03T21:02:56Z", "updated_at": "2020-01-16T17:42:25Z", "due_on": null, "closed_at": "2019-12-13T12:23:31Z"}, "comments": 0, "created_at": "2019-11-23T12:57:26Z", "updated_at": "2019-12-08T14:32:16Z", "closed_at": "2019-12-08T14:32:16Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/872", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/872/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/872/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/872/events", "html_url": "https://github.com/nedbat/coveragepy/issues/872", "id": 527554262, "node_id": "MDU6SXNzdWU1Mjc1NTQyNjI=", "number": 872, "title": "Update FAQ", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973387395, "node_id": "MDU6TGFiZWw5NzMzODczOTU=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/docs", "name": "docs", "color": "c6b8f2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1", "html_url": "https://github.com/nedbat/coveragepy/milestone/1", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1/labels", "id": 4626287, "node_id": "MDk6TWlsZXN0b25lNDYyNjI4Nw==", "number": 1, "title": "5.0", "description": "Things to get finished before 5.0", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2019-09-03T21:02:56Z", "updated_at": "2020-01-16T17:42:25Z", "due_on": null, "closed_at": "2019-12-13T12:23:31Z"}, "comments": 1, "created_at": "2019-11-23T12:56:35Z", "updated_at": "2019-12-08T15:45:41Z", "closed_at": "2019-12-08T15:45:35Z", "author_association": "OWNER", "active_lock_reason": null, "body": "- [ ] Drop the nose topics\r\n- [ ] How is the percentage calculated?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/871", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/871/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/871/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/871/events", "html_url": "https://github.com/nedbat/coveragepy/issues/871", "id": 525790878, "node_id": "MDU6SXNzdWU1MjU3OTA4Nzg=", "number": 871, "title": "Coverage(data_file=None) different behaviour (v5.0b1)", "user": {"login": "Matlino", "id": 11437805, "node_id": "MDQ6VXNlcjExNDM3ODA1", "avatar_url": "https://avatars2.githubusercontent.com/u/11437805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Matlino", "html_url": "https://github.com/Matlino", "followers_url": "https://api.github.com/users/Matlino/followers", "following_url": "https://api.github.com/users/Matlino/following{/other_user}", "gists_url": "https://api.github.com/users/Matlino/gists{/gist_id}", "starred_url": "https://api.github.com/users/Matlino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Matlino/subscriptions", "organizations_url": "https://api.github.com/users/Matlino/orgs", "repos_url": "https://api.github.com/users/Matlino/repos", "events_url": "https://api.github.com/users/Matlino/events{/privacy}", "received_events_url": "https://api.github.com/users/Matlino/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-11-20T13:04:29Z", "updated_at": "2019-12-09T08:28:53Z", "closed_at": "2019-12-04T11:50:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nIn coverage 4.* versions, when i used `Coverage(data_file=None)`, DB file was not created. It seems to be not case in 5.0b1 version. Is there a way how to not create DB file in this new version?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/868", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/868/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/868/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/868/events", "html_url": "https://github.com/nedbat/coveragepy/issues/868", "id": 521643705, "node_id": "MDU6SXNzdWU1MjE2NDM3MDU=", "number": 868, "title": "Expose numbits_to_nums() as a SQL function", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-12T16:05:20Z", "updated_at": "2019-11-13T02:07:20Z", "closed_at": "2019-11-13T02:07:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The `register_sqlite_functions()` function currently adds four custom SQL functions:\r\n\r\nhttps://github.com/nedbat/coveragepy/blob/694435b844760ca0443cf87bf73a537f06c37d7d/coverage/numbits.py#L153-L156\r\n\r\nI'd appreciate it if it also exposed a version of the `numbits_to_nums()` function that returns a JSON array of line numbers. SQLite has built-in JSON functions that could take advantage of this, but more importantly it would make it easier to run queries that show a human-readable version of what's going on.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/866", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/866/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/866/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/866/events", "html_url": "https://github.com/nedbat/coveragepy/issues/866", "id": 517101204, "node_id": "MDU6SXNzdWU1MTcxMDEyMDQ=", "number": 866, "title": "Differences in coverage percentage between Python 3.7 and Python 3.8", "user": {"login": "sanjioh", "id": 4040184, "node_id": "MDQ6VXNlcjQwNDAxODQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/4040184?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjioh", "html_url": "https://github.com/sanjioh", "followers_url": "https://api.github.com/users/sanjioh/followers", "following_url": "https://api.github.com/users/sanjioh/following{/other_user}", "gists_url": "https://api.github.com/users/sanjioh/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjioh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjioh/subscriptions", "organizations_url": "https://api.github.com/users/sanjioh/orgs", "repos_url": "https://api.github.com/users/sanjioh/repos", "events_url": "https://api.github.com/users/sanjioh/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjioh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-11-04T11:47:54Z", "updated_at": "2019-12-08T15:45:25Z", "closed_at": "2019-11-05T10:10:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe coverage percentage appears to be sensible to the Python version under which `coverage run` and `coverage combine` + `coverage report` are executed. Specifically, the coverage percentage varies depending on the combinations of Python versions those commands are run with (while using the same version of coverage.py).\r\n\r\nI have experienced the following patterns:\r\n\r\n| coverage run  | coverage combine + coverage report | coverage percentage |\r\n| ------------- | ------------- |----|\r\n| Python 3.7  | Python 3.7  |100%|\r\n| Python 3.8  | Python 3.8  |100%|\r\n| Python 3.7  | Python 3.8  |92%|\r\n| Python 3.8  | Python 3.7  |100%|\r\n\r\n**To Reproduce**\r\n- Clone this repository: https://github.com/sanjioh/tox-interpreters.\r\n- Run `tox -r -e py38-tox314,coverage-report`. This should report a 100% coverage.\r\n- Run `tox -r -e py37-tox314,coverage-report`. This should report a 92% coverage.\r\n- If basepython for the `coverage-report` tox env is changed to `python3.7`, coverage consistently reports 100%, as per the above table.\r\n\r\ncoverage.py version: 4.5.4\r\n\r\n**Expected behavior**\r\nI would expect to get 100% coverage for the combination of `coverage run` run with Python 3.7, `coverage combine` + `coverage report` run with Python 3.8.\r\n\r\nThanks for your support, please let me know if you need any further information.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/862", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/862/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/862/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/862/events", "html_url": "https://github.com/nedbat/coveragepy/issues/862", "id": 511703292, "node_id": "MDU6SXNzdWU1MTE3MDMyOTI=", "number": 862, "title": "ModuleNotFoundError: No module named 'django_project' when I used coverage run manage.py test ", "user": {"login": "spaceofmiah", "id": 37231237, "node_id": "MDQ6VXNlcjM3MjMxMjM3", "avatar_url": "https://avatars2.githubusercontent.com/u/37231237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spaceofmiah", "html_url": "https://github.com/spaceofmiah", "followers_url": "https://api.github.com/users/spaceofmiah/followers", "following_url": "https://api.github.com/users/spaceofmiah/following{/other_user}", "gists_url": "https://api.github.com/users/spaceofmiah/gists{/gist_id}", "starred_url": "https://api.github.com/users/spaceofmiah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spaceofmiah/subscriptions", "organizations_url": "https://api.github.com/users/spaceofmiah/orgs", "repos_url": "https://api.github.com/users/spaceofmiah/repos", "events_url": "https://api.github.com/users/spaceofmiah/events{/privacy}", "received_events_url": "https://api.github.com/users/spaceofmiah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/4", "html_url": "https://github.com/nedbat/coveragepy/milestone/4", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/4/labels", "id": 4974471, "node_id": "MDk6TWlsZXN0b25lNDk3NDQ3MQ==", "number": 4, "title": "5.0.3", "description": "", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2020-01-06T00:29:34Z", "updated_at": "2020-01-12T12:37:49Z", "due_on": null, "closed_at": "2020-01-12T12:37:49Z"}, "comments": 36, "created_at": "2019-10-24T04:43:45Z", "updated_at": "2020-04-17T10:42:03Z", "closed_at": "2020-01-11T12:22:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "**The below issue is with Coverage version 5.0a7**\r\n\r\nWhen trying to run test for my django project using **coverage run manage.py test** i get \r\n**ModuleNotFoundError**. This issue kept coming and i thought it was as a result of what was addressed here --> https://stackoverflow.com/questions/50378166/django-coverage-modulenotfounderror-no-module-named-django-extensions\r\n\r\nNone of the recommendations worked, i downgraded my django version from 3.0 to 2.2 and the problem persisted. This issue was rectified by downgrading to coverage version *4.5*\r\n\r\nLike i said, i only encountered this issue with coverage version *5.0a7*\r\n\r\nWith the below dependencies, coverage is working as expected\r\n```\r\n\u03bb pipenv run pip list\r\nPackage          Version\r\n---------------- -------\r\nasgiref              3.2.3\r\ncoverage          4.5\r\nDjango              2.2\r\nPillow               6.2.1\r\npip                   19.3.1\r\npsycopg2         2.8.4\r\npytz                2019.3\r\nsetuptools       41.4.0\r\nsqlparse         0.3.0\r\nwheel            0.33.6\r\n```\r\n\r\n\r\n*complete error log*\r\n```\r\nTraceback (most recent call last):\r\n  File \"manage.py\", line 21, in <module>\r\n    main()\r\n  File \"manage.py\", line 17, in main\r\n    execute_from_command_line(sys.argv)\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 401, in execute_from_command_line\r\n    utility.execute()\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 395, in execute\r\n    self.fetch_command(subcommand).run_from_argv(self.argv)\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\site-packages\\django\\core\\management\\commands\\test.py\", line 23, in run_from_argv\r\n    super().run_from_argv(argv)\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\site-packages\\django\\core\\management\\base.py\", line 320, in run_from_argv\r\n    parser = self.create_parser(argv[0], argv[1])\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\site-packages\\django\\core\\management\\base.py\", line 294, in create_parser\r\n    self.add_arguments(parser)\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\site-packages\\django\\core\\management\\commands\\test.py\", line 44, in add_arguments\r\n    test_runner_class = get_runner(settings, self.test_runner)\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\site-packages\\django\\test\\utils.py\", line 301, in get_runner\r\n    test_runner_class = test_runner_class or settings.TEST_RUNNER\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\site-packages\\django\\conf\\__init__.py\", line 76, in __getattr__\r\n    self._setup(name)\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\site-packages\\django\\conf\\__init__.py\", line 63, in _setup\r\n    self._wrapped = Settings(settings_module)\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\site-packages\\django\\conf\\__init__.py\", line 142, in __init__\r\n    mod = importlib.import_module(self.SETTINGS_MODULE)\r\n  File \"c:\\users\\spaceofmiah\\.virtualenvs\\backend--o8je5ax\\lib\\importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 978, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 961, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 936, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 205, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 978, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 961, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 936, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 205, in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 978, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 961, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 948, in _find_and_load_unlocked\r\nModuleNotFoundError: No module named 'newproject'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/861", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/861/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/861/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/861/events", "html_url": "https://github.com/nedbat/coveragepy/issues/861", "id": 511093071, "node_id": "MDU6SXNzdWU1MTEwOTMwNzE=", "number": 861, "title": "Incorrect number of statements in python 3.8.0", "user": {"login": "ElPincheTopo", "id": 1082821, "node_id": "MDQ6VXNlcjEwODI4MjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1082821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ElPincheTopo", "html_url": "https://github.com/ElPincheTopo", "followers_url": "https://api.github.com/users/ElPincheTopo/followers", "following_url": "https://api.github.com/users/ElPincheTopo/following{/other_user}", "gists_url": "https://api.github.com/users/ElPincheTopo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ElPincheTopo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ElPincheTopo/subscriptions", "organizations_url": "https://api.github.com/users/ElPincheTopo/orgs", "repos_url": "https://api.github.com/users/ElPincheTopo/repos", "events_url": "https://api.github.com/users/ElPincheTopo/events{/privacy}", "received_events_url": "https://api.github.com/users/ElPincheTopo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-23T05:58:18Z", "updated_at": "2019-10-28T05:55:28Z", "closed_at": "2019-10-28T05:55:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nCoverage gives different results in python 3.8.0 than what it did in 3.7.4\r\nOutput from Python 3.7.4:\r\n\r\n Name | Stmts | Miss | Branch | BrPart | Cover\r\n------|-------|------|--------|--------|-------\r\n TOTAL | 5078 | 511 | 1251 | 132 | 87%\r\n\r\n 245 passed, 36 warnings\r\n\r\nOutput from Python 3.8.0:\r\n\r\n Name | Stmts | Miss | Branch | BrPart | Cover\r\n------|-------|------|--------|--------|-------\r\n TOTAL | 7981 | 3737 | 1482 | 588 | 53%\r\n\r\n 245 passed, 36 warnings\r\n\r\nIt seems like in 3.8 statements are being counted more than once.\r\n\r\n**To Reproduce**\r\nI'm having this issue in a private repo that I'm not allowed to share and I haven't been able to isolate the problem to just one file to be able to reproduce it in a different code base.\r\n\r\nI'm doing this in Python 3.7.4 and 3.8.0\r\nUsing coverage-4.5.1, pytest-5.2.1 pytest-cov-2.7.1\r\nI'm also using hypothesis-4.41.3 if that helps.\r\n\r\nI get the same number of statements with out without branch = True and show_missing = True.\r\n\r\nI get the same result if pytest prints the coverage report to the terminal than using coverage run and then coverage report.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/860", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/860/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/860/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/860/events", "html_url": "https://github.com/nedbat/coveragepy/issues/860", "id": 510548861, "node_id": "MDU6SXNzdWU1MTA1NDg4NjE=", "number": 860, "title": "I'd rather not have an extras_require clause.", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-22T09:56:27Z", "updated_at": "2019-10-22T09:56:59Z", "closed_at": "2019-10-22T09:56:38Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I'd rather not have an extras_require clause.\r\n\r\n_Originally posted by @nedbat in https://github.com/nedbat/coveragepy/pull/699_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/859", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/859/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/859/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/859/events", "html_url": "https://github.com/nedbat/coveragepy/issues/859", "id": 509546348, "node_id": "MDU6SXNzdWU1MDk1NDYzNDg=", "number": 859, "title": "[BUG] When I used  coverage report -m got Error", "user": {"login": "nikul-serpentcs", "id": 17664321, "node_id": "MDQ6VXNlcjE3NjY0MzIx", "avatar_url": "https://avatars1.githubusercontent.com/u/17664321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikul-serpentcs", "html_url": "https://github.com/nikul-serpentcs", "followers_url": "https://api.github.com/users/nikul-serpentcs/followers", "following_url": "https://api.github.com/users/nikul-serpentcs/following{/other_user}", "gists_url": "https://api.github.com/users/nikul-serpentcs/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikul-serpentcs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikul-serpentcs/subscriptions", "organizations_url": "https://api.github.com/users/nikul-serpentcs/orgs", "repos_url": "https://api.github.com/users/nikul-serpentcs/repos", "events_url": "https://api.github.com/users/nikul-serpentcs/events{/privacy}", "received_events_url": "https://api.github.com/users/nikul-serpentcs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}, {"id": 991685361, "node_id": "MDU6TGFiZWw5OTE2ODUzNjE=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/cant-reproduce", "name": "cant-reproduce", "color": "c6313e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-10-20T04:57:25Z", "updated_at": "2020-01-16T04:30:38Z", "closed_at": "2020-01-14T11:59:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I run My program with `coverage run`  in python,\r\nwhenever I run `coverage report -m` or `coverage html`\r\n I got Error like this **Couldn't read data from '*/.coverage': ValueError: Expecting object: line 1 column 4033 (char 4032)**\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/858", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/858/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/858/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/858/events", "html_url": "https://github.com/nedbat/coveragepy/issues/858", "id": 509435584, "node_id": "MDU6SXNzdWU1MDk0MzU1ODQ=", "number": 858, "title": "Dark theme for HTML report", "user": {"login": "pawamoy", "id": 3999221, "node_id": "MDQ6VXNlcjM5OTkyMjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3999221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pawamoy", "html_url": "https://github.com/pawamoy", "followers_url": "https://api.github.com/users/pawamoy/followers", "following_url": "https://api.github.com/users/pawamoy/following{/other_user}", "gists_url": "https://api.github.com/users/pawamoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/pawamoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pawamoy/subscriptions", "organizations_url": "https://api.github.com/users/pawamoy/orgs", "repos_url": "https://api.github.com/users/pawamoy/repos", "events_url": "https://api.github.com/users/pawamoy/events{/privacy}", "received_events_url": "https://api.github.com/users/pawamoy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1747486795, "node_id": "MDU6TGFiZWwxNzQ3NDg2Nzk1", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/fixed", "name": "fixed", "color": "88ee66", "default": false, "description": ""}, {"id": 973387345, "node_id": "MDU6TGFiZWw5NzMzODczNDU=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/html", "name": "html", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-10-19T11:15:19Z", "updated_at": "2020-07-06T12:11:58Z", "closed_at": "2020-06-28T20:23:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm often writing tests late at night, checking the coverage result in the HTML report to know what I should test next. And it's very bright :see_no_evil: !\r\n\r\nSo, I'm voting for adding a dark theme to the HTML report :slightly_smiling_face: \r\n\r\nThe alternative is to change the current theme to work with [darkreader](https://github.com/darkreader/darkreader). Here is the related issue: https://github.com/darkreader/darkreader/issues/1646", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/855", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/855/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/855/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/855/events", "html_url": "https://github.com/nedbat/coveragepy/issues/855", "id": 505734463, "node_id": "MDU6SXNzdWU1MDU3MzQ0NjM=", "number": 855, "title": "Popup for ctx in html reports is finicky", "user": {"login": "rpkilby", "id": 2370209, "node_id": "MDQ6VXNlcjIzNzAyMDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2370209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rpkilby", "html_url": "https://github.com/rpkilby", "followers_url": "https://api.github.com/users/rpkilby/followers", "following_url": "https://api.github.com/users/rpkilby/following{/other_user}", "gists_url": "https://api.github.com/users/rpkilby/gists{/gist_id}", "starred_url": "https://api.github.com/users/rpkilby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rpkilby/subscriptions", "organizations_url": "https://api.github.com/users/rpkilby/orgs", "repos_url": "https://api.github.com/users/rpkilby/repos", "events_url": "https://api.github.com/users/rpkilby/events{/privacy}", "received_events_url": "https://api.github.com/users/rpkilby/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-10-11T09:13:21Z", "updated_at": "2019-11-11T16:33:23Z", "closed_at": "2019-10-13T18:34:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nFor HTML reports, the popup for the new \"Who Tests What\" `ctx` element can be a bit finicky. If you attempt to mouse over the popup box (e.g., to copy the list of test names), the popup will close, as you are no longer hovering over the `ctx` element. If you move the mouse quickly, you may be able to hover over the popup before it disappears, but this is unreliable and annoying.\r\n\r\n**Video** \r\nhttps://i.imgur.com/Zsgb3AA.mp4\r\nThe report was built using coverage v5.0a8\r\n\r\n**Expected behavior**\r\nI should be able to reliably mouse over the ctx popup so I can copy the list of test functions. \r\nOne possible solution: clicking the `ctx` element could pin/unpin its popup. Clicking another `ctx` would close all other popups.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/854", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/854/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/854/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/854/events", "html_url": "https://github.com/nedbat/coveragepy/issues/854", "id": 505587186, "node_id": "MDU6SXNzdWU1MDU1ODcxODY=", "number": 854, "title": "Before Beta 1", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-11T01:21:09Z", "updated_at": "2019-11-10T22:05:06Z", "closed_at": "2019-11-10T22:05:06Z", "author_association": "OWNER", "active_lock_reason": null, "body": "- [x] Write docstrings in sqldata.py\r\n- [x] Double-check the Coverage class docstrings\r\n- [x] run_infos?\r\n- [x] Consolidate changelog", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/853", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/853/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/853/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/853/events", "html_url": "https://github.com/nedbat/coveragepy/issues/853", "id": 504165855, "node_id": "MDU6SXNzdWU1MDQxNjU4NTU=", "number": 853, "title": "Combining Coverage for Same File", "user": {"login": "vishalkuo", "id": 7549938, "node_id": "MDQ6VXNlcjc1NDk5Mzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/7549938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vishalkuo", "html_url": "https://github.com/vishalkuo", "followers_url": "https://api.github.com/users/vishalkuo/followers", "following_url": "https://api.github.com/users/vishalkuo/following{/other_user}", "gists_url": "https://api.github.com/users/vishalkuo/gists{/gist_id}", "starred_url": "https://api.github.com/users/vishalkuo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vishalkuo/subscriptions", "organizations_url": "https://api.github.com/users/vishalkuo/orgs", "repos_url": "https://api.github.com/users/vishalkuo/repos", "events_url": "https://api.github.com/users/vishalkuo/events{/privacy}", "received_events_url": "https://api.github.com/users/vishalkuo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-08T17:03:22Z", "updated_at": "2019-10-08T17:54:06Z", "closed_at": "2019-10-08T17:54:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nWe have a situation where we're running several tests for the same project in parallel and we have to merge several coverage files. However, some of these coverage files will have overlap as one parallel test runner might run tests in the same file as another. What I want to know is how will coverage deal with these when combining coverage files: will it merge the two as if we ran all the tests in serial or will it only use one of the results?\r\n\r\n**Describe the solution you'd like**\r\nEither the ability to merge coverage files as if they were run in serial or documented behaviour \r\n\r\n**Describe alternatives you've considered**\r\nCurrently, we're merging XML files with a hacky script but we'd prefer not to\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/852", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/852/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/852/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/852/events", "html_url": "https://github.com/nedbat/coveragepy/issues/852", "id": 502200191, "node_id": "MDU6SXNzdWU1MDIyMDAxOTE=", "number": 852, "title": "Statements counter and decorated functions", "user": {"login": "decaz", "id": 31096, "node_id": "MDQ6VXNlcjMxMDk2", "avatar_url": "https://avatars1.githubusercontent.com/u/31096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decaz", "html_url": "https://github.com/decaz", "followers_url": "https://api.github.com/users/decaz/followers", "following_url": "https://api.github.com/users/decaz/following{/other_user}", "gists_url": "https://api.github.com/users/decaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/decaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decaz/subscriptions", "organizations_url": "https://api.github.com/users/decaz/orgs", "repos_url": "https://api.github.com/users/decaz/repos", "events_url": "https://api.github.com/users/decaz/events{/privacy}", "received_events_url": "https://api.github.com/users/decaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-03T17:34:09Z", "updated_at": "2019-10-03T20:45:35Z", "closed_at": "2019-10-03T17:44:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nStatements counter does not take into account function definition if it was decorated.\r\n\r\n**To Reproduce**\r\n1. CPython 3.7.4\r\n2. `coverage==5.0a8`\r\n3. `sample.py`:\r\n```python\r\nfrom contextlib import contextmanager\r\n\r\n@contextmanager\r\ndef f():\r\n    yield\r\n```\r\n4. `coverage html -d . sample.py`\r\n\r\n**Expected behavior**\r\n`4 statements` in report.\r\n\r\n**Actual behavior**\r\n`3 statements` in report.\r\n\r\n**Additional context**\r\nIf decoration is commented out then there are still `3 statements` in report because function definition was taken into account.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/851", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/851/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/851/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/851/events", "html_url": "https://github.com/nedbat/coveragepy/issues/851", "id": 499931672, "node_id": "MDU6SXNzdWU0OTk5MzE2NzI=", "number": 851, "title": "\"html --show-contexts\" should issue a warning if there were no contexts collected.", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1", "html_url": "https://github.com/nedbat/coveragepy/milestone/1", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1/labels", "id": 4626287, "node_id": "MDk6TWlsZXN0b25lNDYyNjI4Nw==", "number": 1, "title": "5.0", "description": "Things to get finished before 5.0", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2019-09-03T21:02:56Z", "updated_at": "2020-01-16T17:42:25Z", "due_on": null, "closed_at": "2019-12-13T12:23:31Z"}, "comments": 2, "created_at": "2019-09-29T15:22:50Z", "updated_at": "2019-11-11T16:33:46Z", "closed_at": "2019-10-10T10:17:25Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/848", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/848/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/848/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/848/events", "html_url": "https://github.com/nedbat/coveragepy/issues/848", "id": 498628032, "node_id": "MDU6SXNzdWU0OTg2MjgwMzI=", "number": 848, "title": "Comparison of coverage result with previous/historical run", "user": {"login": "henrywkk", "id": 5066078, "node_id": "MDQ6VXNlcjUwNjYwNzg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5066078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henrywkk", "html_url": "https://github.com/henrywkk", "followers_url": "https://api.github.com/users/henrywkk/followers", "following_url": "https://api.github.com/users/henrywkk/following{/other_user}", "gists_url": "https://api.github.com/users/henrywkk/gists{/gist_id}", "starred_url": "https://api.github.com/users/henrywkk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henrywkk/subscriptions", "organizations_url": "https://api.github.com/users/henrywkk/orgs", "repos_url": "https://api.github.com/users/henrywkk/repos", "events_url": "https://api.github.com/users/henrywkk/events{/privacy}", "received_events_url": "https://api.github.com/users/henrywkk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-26T03:04:29Z", "updated_at": "2019-09-27T01:50:45Z", "closed_at": "2019-09-27T01:15:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Scenario**\r\nI like to use coverage with pytest to access the test coverage of my unit tests. Every time I made code changes I would re-run the coverage report to check if the test cases can cover new codes well. However, the issue is that I have to spot manually if any .py file has particularly low coverage.\r\n\r\n**Proposed solution**\r\nCan we have a comparison with previous/historical run added in the coverage report? I can easily spot if any .py file has significantly dropped coverage in this case.\r\n\r\nPlease let me know if this feature already exists in coveragepy or any plugin on top of it. Thanks.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/847", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/847/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/847/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/847/events", "html_url": "https://github.com/nedbat/coveragepy/issues/847", "id": 495407090, "node_id": "MDU6SXNzdWU0OTU0MDcwOTA=", "number": 847, "title": "\"font-size 16px\" is way too small", "user": {"login": "muellert", "id": 1183079, "node_id": "MDQ6VXNlcjExODMwNzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1183079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muellert", "html_url": "https://github.com/muellert", "followers_url": "https://api.github.com/users/muellert/followers", "following_url": "https://api.github.com/users/muellert/following{/other_user}", "gists_url": "https://api.github.com/users/muellert/gists{/gist_id}", "starred_url": "https://api.github.com/users/muellert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muellert/subscriptions", "organizations_url": "https://api.github.com/users/muellert/orgs", "repos_url": "https://api.github.com/users/muellert/repos", "events_url": "https://api.github.com/users/muellert/events{/privacy}", "received_events_url": "https://api.github.com/users/muellert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-09-18T19:14:53Z", "updated_at": "2019-09-18T20:42:18Z", "closed_at": "2019-09-18T20:42:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe generated 'style.css' has a font size of 16 pixels instead of 16 points, which is illegible even if you do not have a HDPI monitor.\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. What version of Python are you running?\r\n\r\n3.7.3\r\n\r\n2. What versions of what packages do you have installed? The output of `pip freeze` is very helpful.\r\n\r\n4.5.4\r\n\r\n3. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\n\r\nn/a\r\n\r\n4. What commands did you run?\r\n\r\nI run this software via pytest-cov.\r\n \r\n**Expected behavior**\r\n\r\nI expect to get a coverage report in HTML, which I actually get. Just the styling is wrong.\r\n\r\nThe incriminating element is this:\r\n\r\n     html>body {\r\n    -    font-size: 16px;\r\n    +    font-size: 16pt;\r\n     }\r\n\r\n\r\nBut I can't seem to upload a patch to fix it everywhere.\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/846", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/846/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/846/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/846/events", "html_url": "https://github.com/nedbat/coveragepy/issues/846", "id": 492458217, "node_id": "MDU6SXNzdWU0OTI0NTgyMTc=", "number": 846, "title": "Who-Tests-What doesn't work on PyPy / PyTracer", "user": {"login": "Julian", "id": 329822, "node_id": "MDQ6VXNlcjMyOTgyMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/329822?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Julian", "html_url": "https://github.com/Julian", "followers_url": "https://api.github.com/users/Julian/followers", "following_url": "https://api.github.com/users/Julian/following{/other_user}", "gists_url": "https://api.github.com/users/Julian/gists{/gist_id}", "starred_url": "https://api.github.com/users/Julian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Julian/subscriptions", "organizations_url": "https://api.github.com/users/Julian/orgs", "repos_url": "https://api.github.com/users/Julian/repos", "events_url": "https://api.github.com/users/Julian/events{/privacy}", "received_events_url": "https://api.github.com/users/Julian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-11T20:45:56Z", "updated_at": "2019-09-21T21:02:39Z", "closed_at": "2019-09-15T13:57:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "The new W-T-W functionality doesn't seem to work with dynamic contexts on PyPy, or presumably if you explicitly select the PyTracer:\r\n\r\n```\r\n\u2299  coverage run --source /Users/jberman/.local/share/virtualenvs/dev/site-packages/filesystems =trial filesystems                                                                        jberman@USNYHJBERMANMB2\r\nCan't support dynamic contexts with PyTracer\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/845", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/845/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/845/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/845/events", "html_url": "https://github.com/nedbat/coveragepy/issues/845", "id": 491070340, "node_id": "MDU6SXNzdWU0OTEwNzAzNDA=", "number": 845, "title": "hypothesis breaks with context", "user": {"login": "davidszotten", "id": 412005, "node_id": "MDQ6VXNlcjQxMjAwNQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/412005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidszotten", "html_url": "https://github.com/davidszotten", "followers_url": "https://api.github.com/users/davidszotten/followers", "following_url": "https://api.github.com/users/davidszotten/following{/other_user}", "gists_url": "https://api.github.com/users/davidszotten/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidszotten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidszotten/subscriptions", "organizations_url": "https://api.github.com/users/davidszotten/orgs", "repos_url": "https://api.github.com/users/davidszotten/repos", "events_url": "https://api.github.com/users/davidszotten/events{/privacy}", "received_events_url": "https://api.github.com/users/davidszotten/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-09T12:37:57Z", "updated_at": "2019-09-09T14:21:17Z", "closed_at": "2019-09-09T13:02:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When using hypothesis, pytest, and coverage with `dynamic_context = test_function`, i get an error from `coverage/context.py`\r\n\r\n```\r\ncoverage==5.0a6\r\nhypothesis==4.35.0\r\npytest==5.1.2\r\npytest-cov==2.6.1  # git+https://github.com/nedbat/pytest-cov.git@nedbat/contexts\r\n\r\nPython 3.7.2\r\n```\r\n\r\n```\r\ncat test.py\r\nimport hypothesis.strategies as st\r\nfrom hypothesis import given\r\n\r\n@given(st.text())\r\ndef test_mean(x):\r\n    assert True\r\n\r\n\r\ncat .coveragerc\r\n[run]\r\ndynamic_context = test_function\r\n\r\n\r\n\r\npytest --cov=test test.py\r\n==================================================================== test session starts ====================================================================\r\nplatform darwin -- Python 3.7.2, pytest-5.1.2, py-1.8.0, pluggy-0.12.0\r\nhypothesis profile 'default' -> database=DirectoryBasedExampleDatabase('/Users/david/environments/tmp-3e05ab2b4aeef5b/.hypothesis/examples')\r\nrootdir: /Users/david/environments/tmp-3e05ab2b4aeef5b\r\nplugins: cov-2.6.1, hypothesis-4.35.0\r\ncollected 1 item\r\n\r\ntest.py F                                                                                                                                             [100%]\r\n\r\n========================================================================= FAILURES ==========================================================================\r\n_________________________________________________________________________ test_mean _________________________________________________________________________\r\n\r\nframe = <frame at 0x10c896d08, file '/Users/david/environments/tmp-3e05ab2b4aeef5b/test.py', line 4, code test_mean>\r\n\r\n    def should_start_context_test_function(frame):\r\n        \"\"\"Is this frame calling a test_* function?\"\"\"\r\n        co_name = frame.f_code.co_name\r\n        if co_name.startswith(\"test\") or co_name == \"runTest\":\r\n>           return qualname_from_frame(frame)\r\n\r\nlib/python3.7/site-packages/coverage/context.py:41:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nframe = <frame at 0x10c896d08, file '/Users/david/environments/tmp-3e05ab2b4aeef5b/test.py', line 4, code test_mean>\r\n\r\n    def qualname_from_frame(frame):\r\n        \"\"\"Get a qualified name for the code running in `frame`.\"\"\"\r\n        co = frame.f_code\r\n        fname = co.co_name\r\n        if not co.co_varnames:\r\n>           func = frame.f_globals[fname]\r\nE           KeyError: 'test_mean'\r\n\r\nlib/python3.7/site-packages/coverage/context.py:50: KeyError\r\n\r\n---------- coverage: platform darwin, python 3.7.2-final-0 -----------\r\nName      Stmts   Miss  Cover\r\n-----------------------------\r\ntest.py       4      1    75%\r\n```\r\n\r\n\r\n\r\nHypothesis does mess with function attrs, e.g. \r\nhttps://github.com/HypothesisWorks/hypothesis/blob/master/hypothesis-python/src/hypothesis/internal/reflection.py#L593\r\n>     \"\"\"Decorator to update the attributes of a function so that to external introspectors it will appear to be the target function.\r\n\r\nbut still trying to figure out if this needs fixing in coverage or hypothesis (or both)\r\ninterestingly it doesn't seem to happen if i remove the `dynamic_context = test_function` and instead use `--cov-context` but i may be doing something wrong there\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/844", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/844/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/844/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/844/events", "html_url": "https://github.com/nedbat/coveragepy/issues/844", "id": 488541656, "node_id": "MDU6SXNzdWU0ODg1NDE2NTY=", "number": 844, "title": "sqldata.py fails to set isolation_level to IMMEDIATE", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1", "html_url": "https://github.com/nedbat/coveragepy/milestone/1", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1/labels", "id": 4626287, "node_id": "MDk6TWlsZXN0b25lNDYyNjI4Nw==", "number": 1, "title": "5.0", "description": "Things to get finished before 5.0", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2019-09-03T21:02:56Z", "updated_at": "2020-01-16T17:42:25Z", "due_on": null, "closed_at": "2019-12-13T12:23:31Z"}, "comments": 1, "created_at": "2019-09-03T11:11:32Z", "updated_at": "2019-10-09T01:28:58Z", "closed_at": "2019-10-09T01:28:58Z", "author_association": "OWNER", "active_lock_reason": null, "body": "These lines:\r\n```\r\n        with self._connect() as conn:\r\n            conn.isolation_level = 'IMMEDIATE'\r\n```\r\ndon't set the isolation_level to immediate, because conn is a SqliteDb, not a raw sqlite3 connection.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/843", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/843/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/843/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/843/events", "html_url": "https://github.com/nedbat/coveragepy/issues/843", "id": 487900879, "node_id": "MDU6SXNzdWU0ODc5MDA4Nzk=", "number": 843, "title": "\"find_unexecuted_files\" actually returns possibly executable files, even if they were already executed", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1", "html_url": "https://github.com/nedbat/coveragepy/milestone/1", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1/labels", "id": 4626287, "node_id": "MDk6TWlsZXN0b25lNDYyNjI4Nw==", "number": 1, "title": "5.0", "description": "Things to get finished before 5.0", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2019-09-03T21:02:56Z", "updated_at": "2020-01-16T17:42:25Z", "due_on": null, "closed_at": "2019-12-13T12:23:31Z"}, "comments": 1, "created_at": "2019-09-01T15:50:21Z", "updated_at": "2019-09-09T15:24:00Z", "closed_at": "2019-09-09T15:23:59Z", "author_association": "OWNER", "active_lock_reason": null, "body": "It needs a better name/docstring.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/842", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/842/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/842/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/842/events", "html_url": "https://github.com/nedbat/coveragepy/issues/842", "id": 486891183, "node_id": "MDU6SXNzdWU0ODY4OTExODM=", "number": 842, "title": "Add jump targets to smaller pieces of the docs", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1", "html_url": "https://github.com/nedbat/coveragepy/milestone/1", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1/labels", "id": 4626287, "node_id": "MDk6TWlsZXN0b25lNDYyNjI4Nw==", "number": 1, "title": "5.0", "description": "Things to get finished before 5.0", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2019-09-03T21:02:56Z", "updated_at": "2020-01-16T17:42:25Z", "due_on": null, "closed_at": "2019-12-13T12:23:31Z"}, "comments": 1, "created_at": "2019-08-29T11:04:44Z", "updated_at": "2019-09-09T09:47:23Z", "closed_at": "2019-09-09T09:47:23Z", "author_association": "OWNER", "active_lock_reason": null, "body": "I wish I could link directly to the ``skip_covered`` configuration setting (for example).  There's a jump target for the ``[report]`` section of the page (https://coverage.readthedocs.io/en/v4.5.x/config.html#report), but not for the specific setting.\r\n\r\nThis means adding targets to the .rst file:\r\n```\r\n.. _config_report_skip_covered:\r\n\r\n``skip_covered`` (boolean, default False): Don't include files in the report\r\nthat are 100% covered files. See :ref:`cmd_summary` for more information.\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/839", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/839/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/839/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/839/events", "html_url": "https://github.com/nedbat/coveragepy/issues/839", "id": 480759619, "node_id": "MDU6SXNzdWU0ODA3NTk2MTk=", "number": 839, "title": "coverage reports a blank line as \"missing\" under pypy3.6 (pypy-7.1.1-beta)", "user": {"login": "mgedmin", "id": 159967, "node_id": "MDQ6VXNlcjE1OTk2Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/159967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mgedmin", "html_url": "https://github.com/mgedmin", "followers_url": "https://api.github.com/users/mgedmin/followers", "following_url": "https://api.github.com/users/mgedmin/following{/other_user}", "gists_url": "https://api.github.com/users/mgedmin/gists{/gist_id}", "starred_url": "https://api.github.com/users/mgedmin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mgedmin/subscriptions", "organizations_url": "https://api.github.com/users/mgedmin/orgs", "repos_url": "https://api.github.com/users/mgedmin/repos", "events_url": "https://api.github.com/users/mgedmin/events{/privacy}", "received_events_url": "https://api.github.com/users/mgedmin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-14T15:55:51Z", "updated_at": "2019-10-14T10:37:37Z", "closed_at": "2019-10-14T10:37:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nHere's a Travis CI job that measures my test coverage on pypy3 and reports line 130 is uncovered:\r\nhttps://travis-ci.org/mgedmin/ghcloneall/jobs/571894288\r\n\r\nHere's line 130 of the relevant source file:\r\nhttps://github.com/mgedmin/ghcloneall/blob/d59785b5a46e342648aafb1adc87e8d1f75171bf/ghcloneall.py#L130\r\n\r\nIt's a blank line between two method definitions.\r\n\r\n**To Reproduce**\r\n1. Get pypy3.6 version 1.7.1-beta from https://pypy.org/download.html\r\n2. Make sure `pypy3` will run this version of PyPy\r\n3. git clone https://github.com/mgedmin/ghcloneall\r\n4. cd ghcloneall && tox -e coverage-pypy3\r\n\r\nPackage versions: coverage-4.5.4 coverage-python-version-0.1.0\r\n\r\n**Expected behavior**\r\n\r\n100% coverage like it shows on CPython 2.7 through 3.7.\r\n\r\n**Additional context**\r\n\r\nI cannot actually reproduce this bug on my local laptop for the silliest reason imaginable: I'm on Ubuntu 19.04 and pypy3.6 doesn't run there (missing libssl.so.1.0.0 -- which is an old version no longer shipped by Ubuntu).\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/838", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/838/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/838/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/838/events", "html_url": "https://github.com/nedbat/coveragepy/issues/838", "id": 480318758, "node_id": "MDU6SXNzdWU0ODAzMTg3NTg=", "number": 838, "title": "__spec__ is None inside 'coverage run -m'", "user": {"login": "RhysU", "id": 85419, "node_id": "MDQ6VXNlcjg1NDE5", "avatar_url": "https://avatars1.githubusercontent.com/u/85419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RhysU", "html_url": "https://github.com/RhysU", "followers_url": "https://api.github.com/users/RhysU/followers", "following_url": "https://api.github.com/users/RhysU/following{/other_user}", "gists_url": "https://api.github.com/users/RhysU/gists{/gist_id}", "starred_url": "https://api.github.com/users/RhysU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RhysU/subscriptions", "organizations_url": "https://api.github.com/users/RhysU/orgs", "repos_url": "https://api.github.com/users/RhysU/repos", "events_url": "https://api.github.com/users/RhysU/events{/privacy}", "received_events_url": "https://api.github.com/users/RhysU/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-08-13T19:07:09Z", "updated_at": "2019-12-08T19:59:14Z", "closed_at": "2019-11-24T23:54:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nUnlike `python -m`, inside `coverage run -m` it turns out `__spec__` is unexpectedly `None`.\r\n\r\n**To Reproduce**\r\n```\r\n$ python --version\r\nPython 3.5.6 :: Anaconda, Inc.\r\n\r\n$ coverage --version\r\nCoverage.py, version 4.5.1 with C extension\r\nDocumentation at https://coverage.readthedocs.io\r\n\r\n$ cat foo.py \r\nprint(__name__)\r\nprint(__spec__.name)\r\n\r\n$ python -m foo  # Behaves as expected\r\n__main__\r\nfoo\r\n\r\n$ coverage run -m foo  # Observe __spec__ is None\r\n__main__\r\nTraceback (most recent call last):\r\n  File \"/nas/dft/ire/rhys/Build/liquidmetal-debt/foo.py\", line 2, in <module>\r\n    print(__spec__.name)\r\nAttributeError: 'NoneType' object has no attribute 'name'\r\nCoverage.py warning: No data was collected. (no-data-collected)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/837", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/837/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/837/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/837/events", "html_url": "https://github.com/nedbat/coveragepy/issues/837", "id": 479426742, "node_id": "MDU6SXNzdWU0Nzk0MjY3NDI=", "number": 837, "title": "Coverage.version (etc) are not documented", "user": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973387395, "node_id": "MDU6TGFiZWw5NzMzODczOTU=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/docs", "name": "docs", "color": "c6b8f2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1", "html_url": "https://github.com/nedbat/coveragepy/milestone/1", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/milestones/1/labels", "id": 4626287, "node_id": "MDk6TWlsZXN0b25lNDYyNjI4Nw==", "number": 1, "title": "5.0", "description": "Things to get finished before 5.0", "creator": {"login": "nedbat", "id": 23789, "node_id": "MDQ6VXNlcjIzNzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/23789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nedbat", "html_url": "https://github.com/nedbat", "followers_url": "https://api.github.com/users/nedbat/followers", "following_url": "https://api.github.com/users/nedbat/following{/other_user}", "gists_url": "https://api.github.com/users/nedbat/gists{/gist_id}", "starred_url": "https://api.github.com/users/nedbat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nedbat/subscriptions", "organizations_url": "https://api.github.com/users/nedbat/orgs", "repos_url": "https://api.github.com/users/nedbat/repos", "events_url": "https://api.github.com/users/nedbat/events{/privacy}", "received_events_url": "https://api.github.com/users/nedbat/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2019-09-03T21:02:56Z", "updated_at": "2020-01-16T17:42:25Z", "due_on": null, "closed_at": "2019-12-13T12:23:31Z"}, "comments": 1, "created_at": "2019-08-11T23:28:25Z", "updated_at": "2019-09-09T11:26:43Z", "closed_at": "2019-09-09T11:26:43Z", "author_association": "OWNER", "active_lock_reason": null, "body": "There are a few values in the coverage module that aren't mentioned in the docs.\r\n\r\nAlso, process_startup is on the Coverage class page, even though it's not part of the class.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/834", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/834/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/834/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/834/events", "html_url": "https://github.com/nedbat/coveragepy/issues/834", "id": 477253144, "node_id": "MDU6SXNzdWU0NzcyNTMxNDQ=", "number": 834, "title": "configurere-plugin is not working with debug=plugin option in .converagerc", "user": {"login": "anetbnd", "id": 50142686, "node_id": "MDQ6VXNlcjUwMTQyNjg2", "avatar_url": "https://avatars0.githubusercontent.com/u/50142686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anetbnd", "html_url": "https://github.com/anetbnd", "followers_url": "https://api.github.com/users/anetbnd/followers", "following_url": "https://api.github.com/users/anetbnd/following{/other_user}", "gists_url": "https://api.github.com/users/anetbnd/gists{/gist_id}", "starred_url": "https://api.github.com/users/anetbnd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anetbnd/subscriptions", "organizations_url": "https://api.github.com/users/anetbnd/orgs", "repos_url": "https://api.github.com/users/anetbnd/repos", "events_url": "https://api.github.com/users/anetbnd/events{/privacy}", "received_events_url": "https://api.github.com/users/anetbnd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-06T08:54:15Z", "updated_at": "2019-09-21T21:02:15Z", "closed_at": "2019-08-11T22:53:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen you set the `debug=plugin` option inside your `.coveragerc` the configurer-plugin is not working anymore.\r\nThe reason is, that with `debug=plugin` the plugin is wrapped in the class `DebugPluginWrapper`. However, this wrapper is not passing through the call of the `configure(...)` method.\r\n\r\n**To Reproduce**\r\nFile `main.py`:\r\n```python\r\nimport coverage           \r\ncov = coverage.Coverage() \r\ncov.erase()\r\ncov.start()               \r\n\r\nprint(\"I do nothing\")\r\n\r\ncov.stop()                \r\ncov.save()    \r\n```\r\n\r\nFile: `configurer_plugin.py` :\r\n```python\r\nimport coverage\r\n\r\nclass ConfigurerPlugin(coverage.CoveragePlugin):\r\n    _executed = False\r\n    \r\n    def configure(self, config):\r\n        self._executed = True\r\n        \r\n    def sys_info(self):\r\n        return [('configure_was_executed', self._executed)]\r\n        \r\n\r\ndef coverage_init(reg, options):\r\n    reg.add_configurer(ConfigurerPlugin())\r\n```\r\n\r\nFile: `.coveragerc` \r\n```\r\n[run]\r\ndebug=\r\n    plugin\r\n    sys\r\nplugins=\r\n    configurer_plugin\r\n```\r\n\r\nThen execute:\r\n`python main.py` \r\n\r\nThe expected sys-debug output is:\r\n```\r\n-- sys -------------------------------------------------------\r\n              version: 4.5.4\r\n[...]\r\n plugins.file_tracers: -none-\r\n  plugins.configurers: configurer_plugin.ConfigurerPlugin\r\n         config_files: .coveragerc\r\n         configs_read: .coveragerc\r\n            data_path: c:\\Projects\\torch\\patterns\\coverage_plugin_issue\\.coverage\r\n               python: 3.7.3 (default, Apr 24 2019, 15:29:51) [MSC v.1915 64 bit (AMD64)]\r\n             platform: Windows-10-10.0.15063-SP0\r\n[...]\r\n-- sys: configurer_plugin.ConfigurerPlugin -------------------\r\n configure_was_executed: True\r\n-- end -------------------------------------------------------\r\n```\r\nThis output, you will get by disabling the `plugin` option for `debug` in the `.coveragerc`. However, with the 4.5.4 version of coverage.py you only get:\r\n```\r\n-- sys -------------------------------------------------------\r\n              version: 4.5.4\r\n[...]\r\n plugins.file_tracers: -none-\r\n  plugins.configurers: configurer_plugin.ConfigurerPlugin\r\n         config_files: .coveragerc\r\n         configs_read: .coveragerc\r\n            data_path: c:\\Projects\\torch\\patterns\\coverage_plugin_issue\\.coverage\r\n               python: 3.7.3 (default, Apr 24 2019, 15:29:51) [MSC v.1915 64 bit (AMD64)]\r\n             platform: Windows-10-10.0.15063-SP0\r\n[...]\r\n-- sys: configurer_plugin.ConfigurerPlugin -------------------\r\n configure_was_executed: False\r\n-- end -------------------------------------------------------\r\n```\r\n\r\nMy `pip list` says:\r\n```\r\nPackage            Version\r\n------------------ ---------\r\nasciimatics        1.11.0\r\natomicwrites       1.3.0\r\nattrs              19.1.0\r\ncertifi            2019.6.16\r\ncolorama           0.4.1\r\ncoverage           4.5.4\r\nfuture             0.17.1\r\nimportlib-metadata 0.19\r\nmore-itertools     7.2.0\r\nnumpy              1.17.0\r\npackaging          19.1\r\nPillow             6.1.0\r\npip                19.1.1\r\npluggy             0.12.0\r\npure-interface     3.5.2\r\npy                 1.8.0\r\npyfiglet           0.8.post1\r\npyparsing          2.4.2\r\npypiwin32          223\r\npytest             5.0.1\r\npytest-cov         2.7.1\r\npytest-pythonpath  0.7.3\r\npywin32            224\r\nsetuptools         41.0.1\r\nsix                1.12.0\r\ntyping             3.7.4\r\nwcwidth            0.1.7\r\nwheel              0.33.4\r\nwincertstore       0.2\r\nzipp               0.5.2\r\n``` ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/831", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/831/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/831/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/831/events", "html_url": "https://github.com/nedbat/coveragepy/issues/831", "id": 476240109, "node_id": "MDU6SXNzdWU0NzYyNDAxMDk=", "number": 831, "title": "Assume `if TYPE_CHECKING: ... else: ...` block is covered", "user": {"login": "retnikt", "id": 24581770, "node_id": "MDQ6VXNlcjI0NTgxNzcw", "avatar_url": "https://avatars1.githubusercontent.com/u/24581770?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retnikt", "html_url": "https://github.com/retnikt", "followers_url": "https://api.github.com/users/retnikt/followers", "following_url": "https://api.github.com/users/retnikt/following{/other_user}", "gists_url": "https://api.github.com/users/retnikt/gists{/gist_id}", "starred_url": "https://api.github.com/users/retnikt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retnikt/subscriptions", "organizations_url": "https://api.github.com/users/retnikt/orgs", "repos_url": "https://api.github.com/users/retnikt/repos", "events_url": "https://api.github.com/users/retnikt/events{/privacy}", "received_events_url": "https://api.github.com/users/retnikt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-02T15:35:59Z", "updated_at": "2019-08-02T17:11:46Z", "closed_at": "2019-08-02T17:11:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "`if typing.TYPE_CHECKING` blocks are never run but are still counted as needing test coverage.\r\n( https://docs.python.org/3.7/library/typing.html#typing.TYPE_CHECKING )\r\n\r\n**Example**\r\n```python\r\nfrom typing import TYPE_CHECKING\r\nif TYPE_CHECKING:\r\n    # coverage.py thinks this is not covered because TYPE_CHECKING is True at runtime\r\n    ...\r\nelse:\r\n    ....\r\n```\r\n\r\nYou have to add `# pragma: no_cover` to the `if` block here because coverage.py assumes TYPE_CHECKING to be False, and therefore assumes one of the blocks does not have a test case. It would be good if you didn't have to, and blocks requiring TYPE_CHECKING to be True are assumed to not need test cases.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/830", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/830/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/830/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/830/events", "html_url": "https://github.com/nedbat/coveragepy/issues/830", "id": 475545874, "node_id": "MDU6SXNzdWU0NzU1NDU4NzQ=", "number": 830, "title": "variable type annotation raises \"SyntaxError: invalid syntax\"", "user": {"login": "LaMonF", "id": 3426336, "node_id": "MDQ6VXNlcjM0MjYzMzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/3426336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LaMonF", "html_url": "https://github.com/LaMonF", "followers_url": "https://api.github.com/users/LaMonF/followers", "following_url": "https://api.github.com/users/LaMonF/following{/other_user}", "gists_url": "https://api.github.com/users/LaMonF/gists{/gist_id}", "starred_url": "https://api.github.com/users/LaMonF/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LaMonF/subscriptions", "organizations_url": "https://api.github.com/users/LaMonF/orgs", "repos_url": "https://api.github.com/users/LaMonF/repos", "events_url": "https://api.github.com/users/LaMonF/events{/privacy}", "received_events_url": "https://api.github.com/users/LaMonF/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-01T08:27:38Z", "updated_at": "2019-08-01T11:50:30Z", "closed_at": "2019-08-01T11:50:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen using type annotation for variables asignment, coverage raises a `SyntaxError: invalid syntax `\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem? \r\n1. What version of Python are you running : 3.5, 3.6\r\n2. What versions of what packages do you have installed? coverage==4.5.4\r\n3. What code are you running?  \r\n```python\r\nimport unittest\r\nclass Testme(unittest.TestCase):\r\n\tage: int = 5\r\n```\r\n4. What commands did you run?\r\n```sh\r\n~/test_project_path/: coverage run -m unittest discover\r\n>>\r\nFile \"path/test/testme.py\", line 3\r\n    age: int = 5\r\n       ^\r\nSyntaxError: invalid syntax\r\n```\r\n\r\n**Expected behavior**\r\nNo error thrown\r\n\r\n**Additional context**\r\nNope\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/829", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/829/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/829/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/829/events", "html_url": "https://github.com/nedbat/coveragepy/issues/829", "id": 473437890, "node_id": "MDU6SXNzdWU0NzM0Mzc4OTA=", "number": 829, "title": "KeyError in qualname_from_frame starting from 5.0a6", "user": {"login": "fersarr", "id": 3913371, "node_id": "MDQ6VXNlcjM5MTMzNzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/3913371?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fersarr", "html_url": "https://github.com/fersarr", "followers_url": "https://api.github.com/users/fersarr/followers", "following_url": "https://api.github.com/users/fersarr/following{/other_user}", "gists_url": "https://api.github.com/users/fersarr/gists{/gist_id}", "starred_url": "https://api.github.com/users/fersarr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fersarr/subscriptions", "organizations_url": "https://api.github.com/users/fersarr/orgs", "repos_url": "https://api.github.com/users/fersarr/repos", "events_url": "https://api.github.com/users/fersarr/events{/privacy}", "received_events_url": "https://api.github.com/users/fersarr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-07-26T16:23:16Z", "updated_at": "2019-09-21T21:02:29Z", "closed_at": "2019-07-27T01:32:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nAfter upgrading from coveragepy `5.0a5`-ish to to `5.0a6`, we started having a few failing builds with something that looks as follows:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/eggpath/p/pytest-3.1.0-py2.7.egg/_pytest/config.py\", line 367, in _importconftest\r\n    mod = conftestpath.pyimport()\r\n  File \"/eggpath/p/py-1.4.31-py2.7.egg/py/_path/local.py\", line 650, in pyimport\r\n    __import__(modname)\r\n  File \"/eggpath/p/pytest-3.1.0-py2.7.egg/_pytest/assertion/rewrite.py\", line 216, in load_module\r\n    py.builtin.exec_(co, mod.__dict__)\r\n  File \"/eggpath/p/py-1.4.31-py2.7.egg/py/_builtin.py\", line 221, in exec_\r\n    exec2(obj, globals, locals)\r\n  File \"<string>\", line 7, in exec2\r\n  File \"/workspace_path//test-path/tests/conftest.py\", line 6, in <module>\r\n    import xxxx\r\n   ...\r\n   ...\r\n  File \"/eggpath/t/tables-3.2.2-py2.7-linux-x86_64.egg/tables/__init__.py\", line 123, in <module>\r\n    from tables.file import File, open_file, copy_file, openFile, copyFile\r\n  File \"/eggpath/t/tables-3.2.2-py2.7-linux-x86_64.egg/tables/file.py\", line 31, in <module>\r\n    import numexpr\r\n  File \"/eggpath/n/numexpr-2.6.4-py2.7-linux-x86_64.egg/numexpr/__init__.py\", line 42, in <module>\r\n    from numexpr.tests import test, print_versions\r\n  File \"/eggpath/n/numexpr-2.6.4-py2.7-linux-x86_64.egg/numexpr/tests/__init__.py\", line 11, in <module>\r\n    from numexpr.tests.test_numexpr import test, print_versions\r\n  File \"/eggpath/p/pytest-3.1.0-py2.7.egg/_pytest/assertion/rewrite.py\", line 216, in load_module\r\n    py.builtin.exec_(co, mod.__dict__)\r\n  File \"/eggpath/p/py-1.4.31-py2.7.egg/py/_builtin.py\", line 221, in exec_\r\n    exec2(obj, globals, locals)\r\n  File \"<string>\", line 7, in exec2\r\n  File \"/eggpath/n/numexpr-2.6.4-py2.7-linux-x86_64.egg/numexpr/tests/test_numexpr.py\", line 44, in <module>\r\n    class test_numexpr(TestCase):\r\n  File \"/workspace_path//coveragepy/coverage/context.py\", line 40, in should_start_context_test_function\r\n    return qualname_from_frame(frame)\r\n  File \"/workspace_path//coveragepy/coverage/context.py\", line 49, in qualname_from_frame\r\n    func = frame.f_globals[fname]\r\nKeyError: 'test_numexpr'\r\nERROR: could not load /workspace_path//test-path/tests/conftest.py\r\n```\r\n\r\nIn case it helps, both failed builds have these lines the log:\r\n```\r\n       return qualname_from_frame(frame)\r\n       func = frame.f_globals[fname]\r\n```\r\n\r\nand both also mention `KeyError: 'test_numexpr'`\r\n\r\nI really struggled to understand why this is happening, BUT I went through all commits in coveragepy and, at least, I found that **the commit that breaks it is the following**:\r\nhttps://github.com/nedbat/coveragepy/commit/a9f5f7fadacaa8a84b4ac247e79bcb6f29935bb1\r\n\r\nThe command that was run to cause this is:\r\n```\r\ncoverage run -p --branch  /path.../bin/py.test -svvv tests/unit/\r\n```\r\n\r\nPlease let me know if I can provide any other information that might help you\r\n\r\n**Expected behavior**\r\nAll tests should be collected and pass, as it happens when using coveragepy from a point in time before the commit mentioned above.\r\n\r\n**Additional context**\r\n- Python: seems to happen on both python versions I tried `3.6.5` and `2.7.13`\r\n- `pytest 3.1.0`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/828", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/828/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/828/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/828/events", "html_url": "https://github.com/nedbat/coveragepy/issues/828", "id": 473103038, "node_id": "MDU6SXNzdWU0NzMxMDMwMzg=", "number": 828, "title": "coverage with Python3.8b2 breaks multiprocessing", "user": {"login": "nitzmahone", "id": 6775756, "node_id": "MDQ6VXNlcjY3NzU3NTY=", "avatar_url": "https://avatars1.githubusercontent.com/u/6775756?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nitzmahone", "html_url": "https://github.com/nitzmahone", "followers_url": "https://api.github.com/users/nitzmahone/followers", "following_url": "https://api.github.com/users/nitzmahone/following{/other_user}", "gists_url": "https://api.github.com/users/nitzmahone/gists{/gist_id}", "starred_url": "https://api.github.com/users/nitzmahone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nitzmahone/subscriptions", "organizations_url": "https://api.github.com/users/nitzmahone/orgs", "repos_url": "https://api.github.com/users/nitzmahone/repos", "events_url": "https://api.github.com/users/nitzmahone/events{/privacy}", "received_events_url": "https://api.github.com/users/nitzmahone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-25T22:52:46Z", "updated_at": "2019-07-29T16:17:07Z", "closed_at": "2019-07-29T15:37:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nWhen using coverage with `concurrency=multiprocessing` under Python3.8b2, forked processes don't fully init. The child worker process starts, and the process init code runs, but the actual Process `run` target never executes. The minimal repro sample below works fine under other released versions of Python.\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. What version of Python are you running? 3.8b2\r\n2. What versions of what packages do you have installed? coverage==4.5.3\r\n3. What code are you running?  \r\n\r\nrepro.py\r\n```\r\nimport multiprocessing\r\n\r\n\r\nclass Worker(multiprocessing.Process):\r\n    def __init__(self, result_queue, input):\r\n        print(\"in child init\")\r\n        super(Worker, self).__init__()\r\n        self._rq = result_queue\r\n        self._input = input\r\n        print(\"child init done\")\r\n\r\n    def run(self):\r\n        print(\"in child run\")\r\n        self._rq.put(\"worker ran with {0}\".format(self._input))\r\n\r\n\r\nrq = multiprocessing.Queue()\r\n\r\nw = Worker(rq, \"hello\")\r\nw.start()\r\n\r\nprint(\"worker pid is {0}, waiting for results...\".format(w.pid))\r\n\r\nresults = rq.get()\r\nprint(results)\r\nprint(\"done\")\r\n```\r\n\r\n4. What commands did you run? `coverage3 run --concurrency=multiprocessing repro.py`\r\n\r\n**Expected behavior**\r\nchild workloads complete, \"done\" is printed (along with some debug info)\r\n\r\n**Additional context**\r\nWe started hitting this recently in Ansible's nightly coverage runs (which include Python 3.8 prereleases as a canary)...\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/826", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/826/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/826/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/826/events", "html_url": "https://github.com/nedbat/coveragepy/issues/826", "id": 468737864, "node_id": "MDU6SXNzdWU0Njg3Mzc4NjQ=", "number": 826, "title": "5.0a6 failing with coverage.misc.CoverageException: Couldn't use data file '/root/project/tests/.coverage': wrong schema: 3 instead of 2", "user": {"login": "BartoszCki", "id": 17833351, "node_id": "MDQ6VXNlcjE3ODMzMzUx", "avatar_url": "https://avatars0.githubusercontent.com/u/17833351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BartoszCki", "html_url": "https://github.com/BartoszCki", "followers_url": "https://api.github.com/users/BartoszCki/followers", "following_url": "https://api.github.com/users/BartoszCki/following{/other_user}", "gists_url": "https://api.github.com/users/BartoszCki/gists{/gist_id}", "starred_url": "https://api.github.com/users/BartoszCki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BartoszCki/subscriptions", "organizations_url": "https://api.github.com/users/BartoszCki/orgs", "repos_url": "https://api.github.com/users/BartoszCki/repos", "events_url": "https://api.github.com/users/BartoszCki/events{/privacy}", "received_events_url": "https://api.github.com/users/BartoszCki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-07-16T15:59:07Z", "updated_at": "2019-12-04T11:54:25Z", "closed_at": "2019-12-04T11:54:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe test step in CircleCI fails because of codecov. This started to happen today and affected all tasks that used coverage==5.0a6. The 5.0a5 was fine. Also when I hardcodes coverage's version in .tox as coverage<5 it worked flawlessly. I have tests running under several versions of CPython: 2.7, 3.4, 3.5, 3.6 and 3.7 and it occurred only when using 3.4\r\n\r\n**To Reproduce**\r\nrun tests with tox with coverage==5.0a6 and Python3.4\r\n\r\n**Expected behavior**\r\n\r\n> py34-pt44-ptc26 create: /root/project/.tox/py34-pt44-ptc26\r\n> py34-pt44-ptc26 installdeps: codecov, mock, pytest==4.4.1, pytest-cov==2.6.1\r\n> py34-pt44-ptc26 inst: /root/project/.tox/dist/gradient-0.2.2.zip\r\n> py34-pt44-ptc26 installed: DEPRECATION: Python 3.4 support has been deprecated. pip 19.1 will be the last one supporting it. Please upgrade your Python as Python 3.4 won't be maintained after March 2019 (cf PEP 429).,asn1crypto==0.24.0,atomicwrites==1.3.0,attrs==18.2.0,certifi==2019.6.16,cffi==1.12.3,chardet==3.0.4,Click==7.0,click-completion==0.5.1,click-didyoumean==0.0.3,click-help-colors==0.5,codecov==2.0.15,colorama==0.4.1,coverage==5.0a4,cryptography==2.7,cursor==1.2.0,datadog==0.29.3,decorator==4.4.0,future==0.17.1,gradient==0.2.2,gradient-sdk==0.0.3,gradient-statsd==1.0.1,halo==0.0.26,hyperopt==0.1.2,idna==2.8,importlib-metadata==0.18,Jinja2==2.10.1,log-symbols==0.0.13,MarkupSafe==1.1.1,marshmallow==2.19.5,mock==3.0.5,more-itertools==7.1.0,networkx==2.2,numpy==1.16.4,pathlib2==2.3.4,pluggy==0.12.0,progressbar2==3.42.0,prompt-toolkit==2.0.9,py==1.8.0,pycparser==2.19,pymongo==3.8.0,pyOpenSSL==19.0.0,pytest==4.4.1,pytest-cov==2.6.1,python-utils==2.3.0,requests==2.21.0,requests-toolbelt==0.9.1,scandir==1.10.0,scipy==1.2.2,shellingham==1.3.1,six==1.12.0,spinners==0.0.23,termcolor==1.1.0,terminaltables==3.1.0,tqdm==4.32.2,urllib3==1.24.3,wcwidth==0.1.7,zipp==0.5.2\r\n> py34-pt44-ptc26 runtests: PYTHONHASHSEED='1260922597'\r\n> py34-pt44-ptc26 runtests: commands[0] | pytest --cov=gradient --cov-append\r\n> Traceback (most recent call last):\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/bin/pytest\", line 10, in <module>\r\n>     sys.exit(main())\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/_pytest/config/__init__.py\", line 60, in main\r\n>     config = _prepareconfig(args, plugins)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/_pytest/config/__init__.py\", line 201, in _prepareconfig\r\n>     pluginmanager=pluginmanager, args=args\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/hooks.py\", line 289, in __call__\r\n>     return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/manager.py\", line 87, in _hookexec\r\n>     return self._inner_hookexec(hook, methods, kwargs)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/manager.py\", line 81, in <lambda>\r\n>     firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/callers.py\", line 203, in _multicall\r\n>     gen.send(outcome)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/_pytest/helpconfig.py\", line 93, in pytest_cmdline_parse\r\n>     config = outcome.get_result()\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/callers.py\", line 80, in get_result\r\n>     raise ex[1].with_traceback(ex[2])\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/callers.py\", line 187, in _multicall\r\n>     res = hook_impl.function(*args)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/_pytest/config/__init__.py\", line 679, in pytest_cmdline_parse\r\n>     self.parse(args)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/_pytest/config/__init__.py\", line 896, in parse\r\n>     self._preparse(args, addopts=addopts)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/_pytest/config/__init__.py\", line 851, in _preparse\r\n>     early_config=self, args=args, parser=self._parser\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/hooks.py\", line 289, in __call__\r\n>     return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/manager.py\", line 87, in _hookexec\r\n>     return self._inner_hookexec(hook, methods, kwargs)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/manager.py\", line 81, in <lambda>\r\n>     firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/callers.py\", line 208, in _multicall\r\n>     return outcome.get_result()\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/callers.py\", line 80, in get_result\r\n>     raise ex[1].with_traceback(ex[2])\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pluggy/callers.py\", line 187, in _multicall\r\n>     res = hook_impl.function(*args)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pytest_cov/plugin.py\", line 99, in pytest_load_initial_conftests\r\n>     plugin = CovPlugin(early_config.known_args_namespace, early_config.pluginmanager)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pytest_cov/plugin.py\", line 146, in __init__\r\n>     self.start(engine.Central)\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pytest_cov/plugin.py\", line 168, in start\r\n>     self.cov_controller.start()\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/pytest_cov/engine.py\", line 157, in start\r\n>     self.cov.load()\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/coverage/control.py\", line 336, in load\r\n>     self._data.read()\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/coverage/sqldata.py\", line 409, in read\r\n>     with self._connect():       # TODO: doesn't look right\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/coverage/sqldata.py\", line 158, in _connect\r\n>     self._open_db()\r\n>   File \"/root/project/.tox/py34-pt44-ptc26/lib/python3.4/site-packages/coverage/sqldata.py\", line 145, in _open_db\r\n>     self.filename, schema_version, SCHEMA_VERSION\r\n> coverage.misc.CoverageException: Couldn't use data file '/root/project/tests/.coverage': wrong schema: 3 instead of 2\r\n> ERROR: InvocationError for command '/root/project/.tox/py34-pt44-ptc26/bin/pytest --cov=gradient --cov-append' (exited with code 1)\r\n\r\n@ me if you need more info", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/824", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/824/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/824/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/824/events", "html_url": "https://github.com/nedbat/coveragepy/issues/824", "id": 467879240, "node_id": "MDU6SXNzdWU0Njc4NzkyNDA=", "number": 824, "title": "FileNotFoundError while writing results against a test suite that modifies current working directory", "user": {"login": "simonw", "id": 9599, "node_id": "MDQ6VXNlcjk1OTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/9599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonw", "html_url": "https://github.com/simonw", "followers_url": "https://api.github.com/users/simonw/followers", "following_url": "https://api.github.com/users/simonw/following{/other_user}", "gists_url": "https://api.github.com/users/simonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonw/subscriptions", "organizations_url": "https://api.github.com/users/simonw/orgs", "repos_url": "https://api.github.com/users/simonw/repos", "events_url": "https://api.github.com/users/simonw/events{/privacy}", "received_events_url": "https://api.github.com/users/simonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-07-14T20:08:56Z", "updated_at": "2019-07-15T02:33:08Z", "closed_at": "2019-07-14T22:44:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nWhen running 5.0a5 against my [datasette](https://github.com/simonw/datasette) project I get the following error at the end of the test run:\r\n\r\n```\r\ntests/test_publish_now.py .......                                                                                        [ 81%]\r\ntests/test_utils.py .................................................................                                    [100%]\r\nINTERNALERROR> Traceback (most recent call last):\r\nINTERNALERROR>   File \".../site-packages/_pytest/main.py\", line 213, in wrap_session\r\nINTERNALERROR>     session.exitstatus = doit(config, session) or 0\r\nINTERNALERROR>   File \".../site-packages/_pytest/main.py\", line 257, in _main\r\nINTERNALERROR>     config.hook.pytest_runtestloop(session=session)\r\nINTERNALERROR>   File \".../site-packages/pluggy/hooks.py\", line 289, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self.get_hookimpls(), kwargs)\r\nINTERNALERROR>   File \".../site-packages/pluggy/manager.py\", line 87, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \".../site-packages/pluggy/manager.py\", line 81, in <lambda>\r\nINTERNALERROR>     firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\nINTERNALERROR>   File \".../site-packages/pluggy/callers.py\", line 203, in _multicall\r\nINTERNALERROR>     gen.send(outcome)\r\nINTERNALERROR>   File \".../site-packages/pytest_cov/plugin.py\", line 229, in pytest_runtestloop\r\nINTERNALERROR>     self.cov_controller.finish()\r\nINTERNALERROR>   File \".../site-packages/pytest_cov/engine.py\", line 171, in finish\r\nINTERNALERROR>     self.cov.stop()\r\nINTERNALERROR>   File \".../site-packages/coverage/control.py\", line 553, in save\r\nINTERNALERROR>     data = self.get_data()\r\nINTERNALERROR>   File \".../site-packages/coverage/control.py\", line 607, in get_data\r\nINTERNALERROR>     if self._collector and self._collector.flush_data():\r\nINTERNALERROR>   File \".../site-packages/coverage/collector.py\", line 425, in flush_data\r\nINTERNALERROR>     self.covdata.add_lines(abs_file_dict(self.data))\r\nINTERNALERROR>   File \".../site-packages/coverage/sqldata.py\", line 245, in add_lines\r\nINTERNALERROR>     self._choose_lines_or_arcs(lines=True)\r\nINTERNALERROR>   File \".../site-packages/coverage/sqldata.py\", line 288, in _choose_lines_or_arcs\r\nINTERNALERROR>     with self._connect() as con:\r\nINTERNALERROR>   File \".../site-packages/coverage/sqldata.py\", line 161, in _connect\r\nINTERNALERROR>     self._create_db()\r\nINTERNALERROR>   File \".../site-packages/coverage/sqldata.py\", line 118, in _create_db\r\nINTERNALERROR>     with self._dbs[get_thread_id()] as db:\r\nINTERNALERROR>   File \".../site-packages/coverage/sqldata.py\", line 616, in __enter__\r\nINTERNALERROR>     self.connect()\r\nINTERNALERROR>   File \".../site-packages/coverage/sqldata.py\", line 601, in connect\r\nINTERNALERROR>     filename = os.path.relpath(self.filename)\r\nINTERNALERROR>   File \".../lib/python3.7/posixpath.py\", line 475, in relpath\r\nINTERNALERROR>     start_list = [x for x in abspath(start).split(sep) if x]\r\nINTERNALERROR>   File \".../lib/python3.7/posixpath.py\", line 383, in abspath\r\nINTERNALERROR>     cwd = os.getcwd()\r\nINTERNALERROR> FileNotFoundError: [Errno 2] No such file or directory\r\n\r\n=========== 355 passed in 47.88 seconds =========\r\n```\r\n\r\nI'm pretty sure this is because some of my tests in that test suite mess around with the current working directory. It would be great if `coverage.py` was robust against changes made to the working directory.\r\n\r\n**To Reproduce**\r\n\r\nThese steps to reproduce work on my OS X laptop running Python 3.7:\r\n```\r\ncd /tmp\r\nmkdir coverage-error\r\ncd coverage-error/\r\npipenv shell\r\ngit clone https://github.com/simonw/datasette\r\ncd datasette/\r\npip install -e .[test]\r\npip install coverage==5.0a5 pytest-cov\r\npytest --cov=datasette\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/822", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/822/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/822/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/822/events", "html_url": "https://github.com/nedbat/coveragepy/issues/822", "id": 466863243, "node_id": "MDU6SXNzdWU0NjY4NjMyNDM=", "number": 822, "title": "Misaligned lines in coverage reports using coverage", "user": {"login": "Eagleeis", "id": 52786362, "node_id": "MDQ6VXNlcjUyNzg2MzYy", "avatar_url": "https://avatars3.githubusercontent.com/u/52786362?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Eagleeis", "html_url": "https://github.com/Eagleeis", "followers_url": "https://api.github.com/users/Eagleeis/followers", "following_url": "https://api.github.com/users/Eagleeis/following{/other_user}", "gists_url": "https://api.github.com/users/Eagleeis/gists{/gist_id}", "starred_url": "https://api.github.com/users/Eagleeis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Eagleeis/subscriptions", "organizations_url": "https://api.github.com/users/Eagleeis/orgs", "repos_url": "https://api.github.com/users/Eagleeis/repos", "events_url": "https://api.github.com/users/Eagleeis/events{/privacy}", "received_events_url": "https://api.github.com/users/Eagleeis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-11T12:30:29Z", "updated_at": "2019-09-21T21:02:05Z", "closed_at": "2019-08-11T01:03:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nI used coverage.py 4.5.1 and 4.5.3 packaged in coverage-4.5*win*.exe (e.g. coverage-4.5.3.win-amd64-py3.7.exe) on 32bit and 64bit versions of Python 2.7/3.4/3.6/3.7. The bug is related to (if I remember right) all versions of coverage.py which leads in misaligned coverage lines in the generated coverage report. The coverage itself seems to be correct.\r\nThe superfluous backslash after \u201e# 4 numbers\u201c is the reason for the problem. This backslash leads to the misaligned coverage lines as you can see at the enclosed coverage report (coverageBad/index.html). Original line 5 in the generated report (\u201eprint( \"Message 2\" )\u201c) becomes line 6 and is not covered which is obviously wrong.\r\n \r\nIf you remove the backslash (myExampleGood.py), the generated coverage report will be correct as you can see at the enclosed coverage report (coverageGood/index.html).\r\n\r\n\r\n**To Reproduce**\r\nHow can we reproduce the problem?  Please *be specific*.\r\n1. What version of Python are you running?\r\nAny. 2.7/3.4/3.6/3.7 (32 and 64Bit versions)\r\n2. What versions of what packages do you have installed? The output of `pip freeze` is very helpful.\r\ncoverage.py 4.5.1, 4.5.3\r\n3. What code are you running?  Give us a specific commit of a specific repo that we can check out.\r\nprint( \"Message 1\" )\r\narray = [ 1,2,3,4,  # 4 numbers \\\r\n          5,6,7 ]   # 3 numbers\r\nprint( \"Message 2\" )\r\nSee examples in the enclosed zip archive.\r\n\r\n4. What commands did you run?\r\ncd c:\\bugReportCoverage.py\r\nC:\\Tools\\Python\\2.7.9_64Bit\\Scripts\\coverage.exe run -a --rcfile=c:\\bugReportCoverage.py\\coverage\\.coverage.rc myExampleBad.py\r\nC:\\Tools\\Python\\2.7.9_64Bit\\Scripts\\coverage.exe html --rcfile=c:\\bugReportCoverage.py\\coverage\\.coverage.rc\r\n\r\n**Expected behavior**\r\nEach coverage line should be marked as covered.\r\nSuperfluous backslash should be ignored.\r\nNo new line should be added.\r\n\r\n**Additional context**\r\nThis seems to be only a problem while generating a report. The coverage itself seems to be detected correctly.\r\n\r\n[myExample.zip](https://github.com/nedbat/coveragepy/files/3381961/myExample.zip)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/819", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/819/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/819/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/819/events", "html_url": "https://github.com/nedbat/coveragepy/issues/819", "id": 463569243, "node_id": "MDU6SXNzdWU0NjM1NjkyNDM=", "number": 819, "title": "How to merge coverage and unittest work together", "user": {"login": "Julius-ZCJ", "id": 42171296, "node_id": "MDQ6VXNlcjQyMTcxMjk2", "avatar_url": "https://avatars2.githubusercontent.com/u/42171296?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Julius-ZCJ", "html_url": "https://github.com/Julius-ZCJ", "followers_url": "https://api.github.com/users/Julius-ZCJ/followers", "following_url": "https://api.github.com/users/Julius-ZCJ/following{/other_user}", "gists_url": "https://api.github.com/users/Julius-ZCJ/gists{/gist_id}", "starred_url": "https://api.github.com/users/Julius-ZCJ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Julius-ZCJ/subscriptions", "organizations_url": "https://api.github.com/users/Julius-ZCJ/orgs", "repos_url": "https://api.github.com/users/Julius-ZCJ/repos", "events_url": "https://api.github.com/users/Julius-ZCJ/events{/privacy}", "received_events_url": "https://api.github.com/users/Julius-ZCJ/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321136, "node_id": "MDU6TGFiZWw5NzMzMjExMzY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/question", "name": "question", "color": "bbaaff", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-03T06:32:04Z", "updated_at": "2019-07-05T02:33:05Z", "closed_at": "2019-07-05T02:33:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Is your feature request related to a problem? Please describe.**\r\nWe want to use unittest to test our code and use coverage to test our code coverage ,but we need to run unittest twice , One time to test code ,and one time run in coverage to test coverage. So ,we consider can unittest and coverage work together to test our code only once. \r\n\r\n**Describe the solution you'd like**\r\nWe hope if unittest test error , coverage also stop and push this error in the same time and make piplines failed. But now coverage can't do it . \r\n\r\n**Describe alternatives you've considered**\r\n\r\n\r\n**Additional context**\r\n\r\nIf this can do ,how we need to config our code. Please tell us ,thank you! ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/818", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/818/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/818/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/818/events", "html_url": "https://github.com/nedbat/coveragepy/issues/818", "id": 463521747, "node_id": "MDU6SXNzdWU0NjM1MjE3NDc=", "number": 818, "title": "typo templite", "user": {"login": "YoSTEALTH", "id": 35307184, "node_id": "MDQ6VXNlcjM1MzA3MTg0", "avatar_url": "https://avatars1.githubusercontent.com/u/35307184?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YoSTEALTH", "html_url": "https://github.com/YoSTEALTH", "followers_url": "https://api.github.com/users/YoSTEALTH/followers", "following_url": "https://api.github.com/users/YoSTEALTH/following{/other_user}", "gists_url": "https://api.github.com/users/YoSTEALTH/gists{/gist_id}", "starred_url": "https://api.github.com/users/YoSTEALTH/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YoSTEALTH/subscriptions", "organizations_url": "https://api.github.com/users/YoSTEALTH/orgs", "repos_url": "https://api.github.com/users/YoSTEALTH/repos", "events_url": "https://api.github.com/users/YoSTEALTH/events{/privacy}", "received_events_url": "https://api.github.com/users/YoSTEALTH/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-03T03:09:02Z", "updated_at": "2019-07-03T03:11:21Z", "closed_at": "2019-07-03T03:11:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Typo \"templite\" should be \"template\"? Many things in https://github.com/nedbat/coveragepy/blob/master/coverage/templite.py including filename.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/817", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/817/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/817/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/817/events", "html_url": "https://github.com/nedbat/coveragepy/issues/817", "id": 462048163, "node_id": "MDU6SXNzdWU0NjIwNDgxNjM=", "number": 817, "title": "Branch coverage failure ``continue`` in nested ``if`` statements", "user": {"login": "chrisrossi", "id": 148267, "node_id": "MDQ6VXNlcjE0ODI2Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/148267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisrossi", "html_url": "https://github.com/chrisrossi", "followers_url": "https://api.github.com/users/chrisrossi/followers", "following_url": "https://api.github.com/users/chrisrossi/following{/other_user}", "gists_url": "https://api.github.com/users/chrisrossi/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisrossi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisrossi/subscriptions", "organizations_url": "https://api.github.com/users/chrisrossi/orgs", "repos_url": "https://api.github.com/users/chrisrossi/repos", "events_url": "https://api.github.com/users/chrisrossi/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisrossi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-28T13:57:39Z", "updated_at": "2019-06-30T02:05:57Z", "closed_at": "2019-06-30T02:05:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "This test case show missing branch coverage despite every branch being covered, AFAICT. The problem seems to be related to the ``continue`` statement and the nested ``if`` statements.\r\n\r\nAFAICT, this is *not* a duplicate of #496 but may have a similar root cause.\r\n\r\n~~~~\r\ndef test_coverage_bug():\r\n    did_something = False\r\n    did_another_thing = False\r\n    did_this_thing_first = False\r\n\r\n    for i in range(5):\r\n        if i > 0:\r\n            if i < 5:\r\n                if i % 2 == 0:\r\n                    did_something = True\r\n                else:\r\n                    did_another_thing = True\r\n\r\n                continue\r\n\r\n        did_this_thing_first = True\r\n\r\n    assert did_something\r\n    assert did_another_thing\r\n    assert did_this_thing_first\r\n~~~~", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/812", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/812/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/812/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/812/events", "html_url": "https://github.com/nedbat/coveragepy/issues/812", "id": 455143559, "node_id": "MDU6SXNzdWU0NTUxNDM1NTk=", "number": 812, "title": "Disabling exit code 5 when no-data-collected is disabled", "user": {"login": "fersarr", "id": 3913371, "node_id": "MDQ6VXNlcjM5MTMzNzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/3913371?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fersarr", "html_url": "https://github.com/fersarr", "followers_url": "https://api.github.com/users/fersarr/followers", "following_url": "https://api.github.com/users/fersarr/following{/other_user}", "gists_url": "https://api.github.com/users/fersarr/gists{/gist_id}", "starred_url": "https://api.github.com/users/fersarr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fersarr/subscriptions", "organizations_url": "https://api.github.com/users/fersarr/orgs", "repos_url": "https://api.github.com/users/fersarr/repos", "events_url": "https://api.github.com/users/fersarr/events{/privacy}", "received_events_url": "https://api.github.com/users/fersarr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321128, "node_id": "MDU6TGFiZWw5NzMzMjExMjg=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-12T10:50:48Z", "updated_at": "2019-06-12T14:00:36Z", "closed_at": "2019-06-12T13:00:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Following https://coverage.readthedocs.io/en/coverage-4.4.2/cmd.html#warnings\r\n\r\nI found that you can disable the `no-data-collected` warning message by using the following `.coveragerc`\r\n\r\n```\r\n[run]\r\ndisable_warnings = no-data-collected\r\n```\r\n\r\nI was wondering if it would be possible to also stop having the exit code (`$?` in bash) be `5` when `no-data-collected` is disabled. I believe it should just be the `success` exit code of `0` since we asked for it to be ignored.\r\n\r\nCurrently, even though I disabled the message warning, my exit code is still `5`, as if the command failed.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/809", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/809/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/809/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/809/events", "html_url": "https://github.com/nedbat/coveragepy/issues/809", "id": 452609101, "node_id": "MDU6SXNzdWU0NTI2MDkxMDE=", "number": 809, "title": "macOS Python 2.7: coverage 5.0a5 binary wheel has broken tracer.so", "user": {"login": "jamadden", "id": 1256082, "node_id": "MDQ6VXNlcjEyNTYwODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1256082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamadden", "html_url": "https://github.com/jamadden", "followers_url": "https://api.github.com/users/jamadden/followers", "following_url": "https://api.github.com/users/jamadden/following{/other_user}", "gists_url": "https://api.github.com/users/jamadden/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamadden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamadden/subscriptions", "organizations_url": "https://api.github.com/users/jamadden/orgs", "repos_url": "https://api.github.com/users/jamadden/repos", "events_url": "https://api.github.com/users/jamadden/events{/privacy}", "received_events_url": "https://api.github.com/users/jamadden/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-05T16:50:36Z", "updated_at": "2019-07-06T17:13:01Z", "closed_at": "2019-07-06T17:13:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nThe CTracer cannot be imported in 5.0a5 using [the binary wheel distributed on PyPI](https://files.pythonhosted.org/packages/c7/b8/5f158a568789a6e7bea4c6377c0e96ce415b6110d57aa0ad6b981cdaa557/coverage-5.0a5-cp27-cp27m-macosx_10_13_intel.whl):\r\n\r\n```pycon\r\n$ python\r\nPython 2.7.16 (default, Apr  1 2019, 14:50:41)\r\n[GCC 4.2.1 Compatible Apple LLVM 10.0.1 (clang-1001.0.46.3)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import coverage.tracer\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nImportError: dlopen(//lib/python2.7/site-packages/coverage/tracer.so, 2): \r\nSymbol not found: _Py_XSETREF\r\n  Referenced from: //lib/python2.7/site-packages/coverage/tracer.so\r\n  Expected in: flat namespace\r\n in //lib/python2.7/site-packages/coverage/tracer.so\r\n```\r\n\r\n5.0a4 imports just fine:\r\n```console\r\n$ pip install coverage==5.0a4 && coverage --version\r\nCollecting coverage==5.0a4\r\n  Using cached https://files.pythonhosted.org/packages/09/78/c3551fea530182a8608cc084709bb9e0b90e238b3ce70bdd09f45e4af7ad/coverage-5.0a4-cp27-cp27m-macosx_10_13_intel.whl\r\nInstalling collected packages: coverage\r\n  Found existing installation: coverage 5.0a5\r\n    Uninstalling coverage-5.0a5:\r\n      Successfully uninstalled coverage-5.0a5\r\nSuccessfully installed coverage-5.0a4\r\nYou are using pip version 18.1, however version 19.1.1 is available.\r\nYou should consider upgrading via the 'pip install --upgrade pip' command.\r\nCoverage.py, version 5.0a4 with C extension\r\nFull documentation is at https://coverage.readthedocs.io/en/coverage-5.0a4\r\n```\r\n\r\n5.0a5 works just fine (has the C tracer) in Python 3.7 on the same machine.\r\n\r\nThe above Python was built by MacPorts, but the system python has the same issue:\r\n\r\n```console\r\n$ mktmpenv -p /usr/bin/python2.7\r\n...\r\n$ pip install coverage==5.0a5\r\n...\r\n$ python\r\nPython 2.7.10 (default, Feb 22 2019, 21:55:15)\r\n[GCC 4.2.1 Compatible Apple LLVM 10.0.1 (clang-1001.0.37.14)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import coverage.tracer\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nImportError: dlopen(//tmp-bd43eafaa85bb3ae/lib/python2.7/site-packages/coverage/tracer.so, 2):\r\n Symbol not found: _Py_XSETREF\r\n  Referenced from: //tmp-bd43eafaa85bb3ae/lib/python2.7/site-packages/coverage/tracer.so\r\n  Expected in: flat namespace\r\n in //tmp-bd43eafaa85bb3ae/lib/python2.7/site-packages/coverage/tracer.so\r\n```\r\n\r\nAs does an official python.org build:\r\n```cmdline\r\n$ mktmpenv -p /usr/local/bin/python2.7\r\n...\r\n$ pip install coverage==5.0a5\r\n...\r\n$ python\r\nPython 2.7.15 (v2.7.15:ca079a3ea3, Apr 29 2018, 20:59:26)\r\n[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import coverage.tracer\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nImportError: dlopen(//tmp-d8b03208a2483064/lib/python2.7/site-packages/coverage/tracer.so, 2): \r\nSymbol not found: _Py_XSETREF\r\n  Referenced from: //tmp-d8b03208a2483064/lib/python2.7/site-packages/coverage/tracer.so\r\n  Expected in: flat namespace\r\n in /tmp-d8b03208a2483064/lib/python2.7/site-packages/coverage/tracer.so\r\n```\r\n\r\nAvoiding the wheel and building manually (`pip install --no-binary coverage coverage==5.0a5`) solves the problem.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/807", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/807/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/807/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/807/events", "html_url": "https://github.com/nedbat/coveragepy/issues/807", "id": 451039605, "node_id": "MDU6SXNzdWU0NTEwMzk2MDU=", "number": 807, "title": "pypy3 + coverage: unclosed file <_io.FileIO fd=3 mode='rb' closefd=True>", "user": {"login": "asottile", "id": 1810591, "node_id": "MDQ6VXNlcjE4MTA1OTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1810591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asottile", "html_url": "https://github.com/asottile", "followers_url": "https://api.github.com/users/asottile/followers", "following_url": "https://api.github.com/users/asottile/following{/other_user}", "gists_url": "https://api.github.com/users/asottile/gists{/gist_id}", "starred_url": "https://api.github.com/users/asottile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asottile/subscriptions", "organizations_url": "https://api.github.com/users/asottile/orgs", "repos_url": "https://api.github.com/users/asottile/repos", "events_url": "https://api.github.com/users/asottile/events{/privacy}", "received_events_url": "https://api.github.com/users/asottile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973321123, "node_id": "MDU6TGFiZWw5NzMzMjExMjM=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/bug", "name": "bug", "color": "ff7788", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-06-01T03:37:23Z", "updated_at": "2019-06-04T19:59:56Z", "closed_at": "2019-06-04T18:29:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nOccasionally while running coverage with pypy3 on a specific testsuite it causes \"unclosed file\" warnings in random parts of code only when instrumented by coverage.\r\n\r\nApologies, I haven't narrowed down the root cause yet but I do have a pretty-consistent reproduction using `docker`.\r\n\r\n**To Reproduce**\r\n\r\nHere's a dockerfile:\r\n\r\n```dockerfile\r\nFROM ubuntu:xenial\r\n\r\nRUN : \\\r\n    && apt-get update \\\r\n    && apt-get install -y --no-install-recommends \\\r\n        bzip2 \\\r\n        curl \\\r\n        git \\\r\n        virtualenv \\\r\n    && apt-get clean \\\r\n    && rm -rf /var/lib/apt/lists/*\r\n\r\nRUN : \\\r\n    && curl --silent --location --output /usr/local/bin/dumb-init https://github.com/Yelp/dumb-init/releases/download/v1.2.2/dumb-init_1.2.2_amd64 \\\r\n    && echo '37f2c1f0372a45554f1b89924fbb134fc24c3756efaedf11e07f599494e0eff9 /usr/local/bin/dumb-init' | sha256sum --check \\\r\n    && chmod +x /usr/local/bin/dumb-init\r\n\r\nRUN : \\\r\n    && curl --silent --location --output pypy.tar.bz2 https://bitbucket.org/pypy/pypy/downloads/pypy3.5-v7.0.0-linux64.tar.bz2 \\\r\n    && echo '729e3c54325969c98bd3658c6342b9f5987b96bad1d6def04250a08401b54c4b  pypy.tar.bz2' | sha256sum --check \\\r\n    && tar -xf pypy.tar.bz2 \\\r\n    && rm pypy.tar.bz2\r\n\r\nRUN : \\\r\n    && git clone https://github.com/pre-commit/pre-commit \\\r\n    && git -C pre-commit checkout fff3ad51\r\n\r\nWORKDIR pre-commit\r\n\r\nRUN : \\\r\n    && virtualenv /venv -p ../pypy3.5-v7.0.0-linux64/bin/pypy3 \\\r\n    && /venv/bin/pip install -r requirements-dev.txt\r\n\r\nCMD [ \\\r\n    \"dumb-init\", \\\r\n    \"/venv/bin/coverage\", \"run\", \"-m\", \"pytest\", \"tests/clientlib_test.py\" \\\r\n]\r\n```\r\n\r\nBuild this with\r\n\r\n```bash\r\ndocker build -t pypy-coverage-bug .\r\n```\r\n\r\nYou can run this with the following command, however it only reproduces about 1 every 10 times and it's a bit slow to stop and start docker repeatedly:\r\n\r\n```bash\r\ndocker run --rm pypy-coverage-bug\r\n```\r\n\r\nThe easier way that I've been reproducing is by doing this\r\n\r\n\r\n```bash\r\ndocker run --rm -ti pypy-coverage-bug bash\r\n# and then once inside the docker container (adjust the `-n` for the number of iterations)\r\nyes | head -n 10 | xargs --replace /venv/bin/coverage run -m pytest tests/clientlib_test.py\r\n```\r\n\r\nWhen it passes it looks like this (which happens most of the time):\r\n\r\n```\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.5.3[pypy-7.0.0-final], pytest-4.5.0, py-1.8.0, pluggy-0.12.0\r\nrootdir: /pre-commit, inifile: tox.ini\r\nplugins: env-0.6.2\r\ncollected 37 items                                                             \r\n\r\ntests/clientlib_test.py .....................................            [100%]\r\n\r\n========================== 37 passed in 1.46 seconds ===========================\r\n```\r\n\r\nWhen it fails it looks like this:\r\n\r\n```\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.5.3[pypy-7.0.0-final], pytest-4.5.0, py-1.8.0, pluggy-0.12.0\r\nrootdir: /pre-commit, inifile: tox.ini\r\nplugins: env-0.6.2\r\ncollected 37 items                                                             \r\n\r\ntests/clientlib_test.py .............................E........           [100%]\r\n\r\n==================================== ERRORS ====================================\r\n__________ ERROR at teardown of test_meta_hook_invalid[config_repo0] ___________\r\n\r\ntp = <class 'AssertionError'>, value = None, tb = None\r\n\r\n    def reraise(tp, value, tb=None):\r\n        try:\r\n            if value is None:\r\n                value = tp()\r\n            if value.__traceback__ is not tb:\r\n                raise value.with_traceback(tb)\r\n>           raise value\r\n\r\n/venv/site-packages/six.py:693: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n/venv/site-packages/six.py:693: in reraise\r\n    raise value\r\n/pypy3.5-v7.0.0-linux64/lib_pypy/_functools.py:80: in __call__\r\n    return self._func(*(self._args + fargs), **fkeywords)\r\n/venv/site-packages/six.py:693: in reraise\r\n    raise value\r\n/pypy3.5-v7.0.0-linux64/lib_pypy/_functools.py:80: in __call__\r\n    return self._func(*(self._args + fargs), **fkeywords)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nrecwarn = WarningsRecorder(record=True)\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def no_warnings(recwarn):\r\n        yield\r\n        warnings = []\r\n        for warning in recwarn:  # pragma: no cover\r\n            message = str(warning.message)\r\n            # ImportWarning: Not importing directory '...' missing __init__(.py)\r\n            if not (\r\n                isinstance(warning.message, ImportWarning) and\r\n                message.startswith('Not importing directory ') and\r\n                ' missing __init__' in message\r\n            ):\r\n                warnings.append(\r\n                    '{}:{} {}'.format(warning.filename, warning.lineno, message),\r\n                )\r\n>       assert not warnings\r\nE       assert not [\"/venv/site-packages/coverage/pytracer.py:107 unclosed file <_io.FileIO fd=3 mode='rb' closefd=True>\"]\r\n\r\ntests/conftest.py:40: AssertionError\r\n====================== 37 passed, 1 error in 2.74 seconds ======================\r\n```\r\n\r\n1. What version of Python are you running?  `Python 3.5.3[pypy-7.0.0-final]`\r\n2. What versions of what packages do you have installed? The output of `pip freeze` is very helpful.\r\n```console\r\nroot@34a9d341816b:/pre-commit# /venv/bin/pip freeze --all\r\naspy.yaml==1.3.0\r\natomicwrites==1.3.0\r\nattrs==19.1.0\r\ncffi==1.12.0\r\ncfgv==2.0.0\r\ncoverage==4.5.3\r\nentrypoints==0.3\r\nflake8==3.7.7\r\ngreenlet==0.4.13\r\nidentify==1.4.3\r\nimportlib-metadata==0.17\r\nimportlib-resources==1.0.2\r\nmccabe==0.6.1\r\nmock==3.0.5\r\nmore-itertools==7.0.0\r\nnodeenv==1.3.3\r\npathlib2==2.3.3\r\npip==19.1.1\r\npkg-resources==0.0.0\r\npluggy==0.12.0\r\n-e git+https://github.com/pre-commit/pre-commit@fff3ad518cb9a9bf169346aa4727fb70a67a4e30#egg=pre_commit\r\npy==1.8.0\r\npycodestyle==2.5.0\r\npyflakes==2.1.1\r\npytest==4.5.0\r\npytest-env==0.6.2\r\nPyYAML==5.1\r\nreadline==6.2.4.1\r\nsetuptools==41.0.1\r\nsix==1.12.0\r\ntoml==0.10.0\r\nvirtualenv==16.6.0\r\nwcwidth==0.1.7\r\nwheel==0.33.4\r\nzipp==0.5.1\r\n```\r\n3. What code are you running?  Give us a specific commit of a specific repo that we can check out. (shown above, it's [pre-commit](https://github.com/pre-commit/pre-commit)\r\n4. What commands did you run?  (see above)\r\n\r\n**Expected behavior**\r\nNot to crash (see above)\r\n\r\n**Additional context**\r\n\r\nThanks again for writing coverage, it has been instrumental to all of my python testing!  Sorry I haven't narrowed down this bug enough yet, but figured I'd post this in case you have any ideas on where I should start looking!\r\n\r\nThis is currently flaking a lot for me in azure pipelines :(", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/nedbat/coveragepy/issues/800", "repository_url": "https://api.github.com/repos/nedbat/coveragepy", "labels_url": "https://api.github.com/repos/nedbat/coveragepy/issues/800/labels{/name}", "comments_url": "https://api.github.com/repos/nedbat/coveragepy/issues/800/comments", "events_url": "https://api.github.com/repos/nedbat/coveragepy/issues/800/events", "html_url": "https://github.com/nedbat/coveragepy/issues/800", "id": 438022291, "node_id": "MDU6SXNzdWU0MzgwMjIyOTE=", "number": 800, "title": "Getting Multiple html files for same python source.", "user": {"login": "shyamsubbu", "id": 7611203, "node_id": "MDQ6VXNlcjc2MTEyMDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/7611203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shyamsubbu", "html_url": "https://github.com/shyamsubbu", "followers_url": "https://api.github.com/users/shyamsubbu/followers", "following_url": "https://api.github.com/users/shyamsubbu/following{/other_user}", "gists_url": "https://api.github.com/users/shyamsubbu/gists{/gist_id}", "starred_url": "https://api.github.com/users/shyamsubbu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shyamsubbu/subscriptions", "organizations_url": "https://api.github.com/users/shyamsubbu/orgs", "repos_url": "https://api.github.com/users/shyamsubbu/repos", "events_url": "https://api.github.com/users/shyamsubbu/events{/privacy}", "received_events_url": "https://api.github.com/users/shyamsubbu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 973387370, "node_id": "MDU6TGFiZWw5NzMzODczNzA=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/combine", "name": "combine", "color": "c6f79e", "default": false, "description": ""}, {"id": 973321136, "node_id": "MDU6TGFiZWw5NzMzMjExMzY=", "url": "https://api.github.com/repos/nedbat/coveragepy/labels/question", "name": "question", "color": "bbaaff", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-28T07:00:22Z", "updated_at": "2019-10-13T21:27:27Z", "closed_at": "2019-10-13T21:27:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I  am using coverage py with parallel mode in Jenkins.\r\ncoverage run --source=${coverage_path} --branch --parallel-mode \r\n\r\nIn Jenkins , we have tests which run parallel on  different slaves and for each slave the workspace path is different. We have 3 different worspaces wherein coverage.py generates .coverage files .\r\nfinally all .coverage files from all three slaves are stashed in one slave and we combine and calculate coverage.\r\n\r\nThe \"coverage combine -- append\"  is able to find the workspace path of all slaves as the workspace is a NFS filer and the path can be accessed from another slave.\r\n\r\nSo when we combine all .coverage files an into single .coverage and generate html  report i see multiple html files for same python code. In coverage documentation , \r\n\"it is said to be possible to combine all data files into single report by mentioning paths where the first value must be an actual file path on the machine where the reporting will happen, so that source code can be found. The other values can be file patterns\"\r\n\r\n============================================\r\n\r\nhere sjc12, sjc2,sjc8 are three different slave with different source paths while coverage run is done.\r\nbut we combine them from sjc-12 slave it can access other slave source paths  so combine is not a problem . Problem is with reporting, i get multiple reports each for a slave.\r\n\r\n.coverage.nao-sjc12-lnx.105693.058242\r\n.coverage.nao-sjc12-lnx.105694.068668\r\n.coverage.nao-sjc12-lnx.105696.943817\r\n.coverage.nao-sjc12-lnx.110171.478266\r\n.coverage.nao-sjc12-lnx.110172.068159\r\n.coverage.nao-sjc12-lnx.110173.976072\r\n.coverage.nao-sjc2-lnx.26621.578881\r\n.coverage.nao-sjc2-lnx.26622.099643\r\n.coverage.nao-sjc2-lnx.26624.352776\r\n.coverage.nao-sjc2-lnx.28400.035535\r\n.coverage.nao-sjc2-lnx.28403.875349\r\n.coverage.nao-sjc2-lnx.28404.837247\r\n.coverage.nao-sjc8-lnx.42791.487008\r\n.coverage.nao-sjc8-lnx.42794.238996\r\n.coverage.nao-sjc8-lnx.42795.270589\r\n.coverage.nao-sjc8-lnx.44519.822884\r\n.coverage.nao-sjc8-lnx.44520.194302\r\n.coverage.nao-sjc8-lnx.44522.414372\r\n\r\nReport for same files there is one report for each slave\r\n\r\nSGD4JUHGNRMSKX6HRQNZMFODKXT45J7KWX3WAUVMU2ZA_test_state_packages-in-use_cur_1-nf_py_3658c19353d9718b31000d57c7bd376e453d7a62.html\r\n\u00a0\r\nSGD4JUHGNRMSKX6HRQNZMFODKXT45J7KWX3WAUVMU2ZA_test_state_packages-in-use_cur_1-nf_py_b45594b3d310fcebb90433fc33fd96317cb6cb86.html\r\n\r\n\r\nPlease guide me .\r\n\r\nmy covargerc is\r\n```\r\n# .coveragerc to control coverage.py\r\n[run]\r\nbranch = True\r\nparallel= True\r\n[paths]\r\nsource =\r\n      /opt/jenkins/workspace/a-multibranch_N-QNP53J7OSGD4JUHGNRMSKX6HRQNZMFODKXT45J7KWX3WAUVMU2ZA/test/no/state/packages-in-use/state/packages-in-use/1/folder/python\r\n      /data/local/jenkins/workspace/**/python/mypath/*.py\r\n      /data/local/jenkins/workspace/**/python/*.py\r\n\r\n[report]\r\n# Regexes for lines to exclude from consideration\r\nexclude_lines =\r\n    # Have to re-enable the standard pragma\r\n    pragma: no cover\r\n\r\n    # Don't complain about missing debug-only code:\r\n    def __repr__\r\n    if self\\.debug\r\n\r\n    # Don't complain if tests don't hit defensive assertion code:\r\n    raise AssertionError\r\n    raise NotImplementedError\r\n\r\n    # Don't complain if non-runnable code isn't run:\r\n    if 0:\r\n    if __name__ == .__main__.:\r\n\r\n# ignore_errors = True\r\n\r\n[html]\r\ndirectory = coverage_html_report\r\n```", "performed_via_github_app": null, "score": 1.0}]}