{"total_count": 158, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/900", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/900/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/900/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/900/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/900", "id": 673719653, "node_id": "MDU6SXNzdWU2NzM3MTk2NTM=", "number": 900, "title": "Missing Requires", "user": {"login": "megatr0n", "id": 131858, "node_id": "MDQ6VXNlcjEzMTg1OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/131858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/megatr0n", "html_url": "https://github.com/megatr0n", "followers_url": "https://api.github.com/users/megatr0n/followers", "following_url": "https://api.github.com/users/megatr0n/following{/other_user}", "gists_url": "https://api.github.com/users/megatr0n/gists{/gist_id}", "starred_url": "https://api.github.com/users/megatr0n/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/megatr0n/subscriptions", "organizations_url": "https://api.github.com/users/megatr0n/orgs", "repos_url": "https://api.github.com/users/megatr0n/repos", "events_url": "https://api.github.com/users/megatr0n/events{/privacy}", "received_events_url": "https://api.github.com/users/megatr0n/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-05T17:27:17Z", "updated_at": "2020-08-07T06:36:25Z", "closed_at": "2020-08-07T06:36:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to install json extension for php on centos7 and the result I get is this:\r\ngoogle-compute-engine-2.7.6-1.el7.noarch has missing requires of python-google-compute-engine = ('0', '2.7.6', None)\r\ngoogle-compute-engine-2.8.2-1.el7.noarch is a duplicate with google-compute-engine-2.7.6-1.el7.noarch.\r\n\r\nHow do I resolve this?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/889", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/889/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/889/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/889/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/889", "id": 605949798, "node_id": "MDU6SXNzdWU2MDU5NDk3OTg=", "number": 889, "title": "rsyslog.d/90-google.conf directs logging to /dev/console, but rsyslog doesn't have perm to open", "user": {"login": "zbjornson", "id": 469365, "node_id": "MDQ6VXNlcjQ2OTM2NQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/469365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zbjornson", "html_url": "https://github.com/zbjornson", "followers_url": "https://api.github.com/users/zbjornson/followers", "following_url": "https://api.github.com/users/zbjornson/following{/other_user}", "gists_url": "https://api.github.com/users/zbjornson/gists{/gist_id}", "starred_url": "https://api.github.com/users/zbjornson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zbjornson/subscriptions", "organizations_url": "https://api.github.com/users/zbjornson/orgs", "repos_url": "https://api.github.com/users/zbjornson/repos", "events_url": "https://api.github.com/users/zbjornson/events{/privacy}", "received_events_url": "https://api.github.com/users/zbjornson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-04-24T00:08:10Z", "updated_at": "2020-08-21T18:20:24Z", "closed_at": "2020-08-21T18:20:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello! This has been going on for ages but I hadn't taken the time to track it down until now. Our GCE VM logs (Ubuntu 19.10, nearly out-of-box) are filled with these messages:\r\n\r\n```\r\nApr 18 00:36:45 srv-zgff systemd[1]: Started System Logging Service.\r\nApr 19 00:01:47 srv-zgff rsyslogd[530]:  [origin software=\"rsyslogd\" swVersion=\"8.1901.0\" x-pid=\"530\" x-info=\"https://www.rsyslog.com\"] rsyslogd was HUPed\r\nApr 19 00:36:41 srv-zgff rsyslogd[530]: file '/dev/console': open error: Permission denied [v8.1901.0 try https://www.rsyslog.com/e/2433 ]\r\nApr 19 00:36:41 srv-zgff rsyslogd[530]: action 'action-7-builtin:omfile' suspended (module 'builtin:omfile'), retry 0. There should be messages before this one giving the reason for suspension. [v8.1901.0 try h\r\nApr 19 00:36:41 srv-zgff rsyslogd[530]: action 'action-7-builtin:omfile' resumed (module 'builtin:omfile') [v8.1901.0 try https://www.rsyslog.com/e/2359 ]\r\nApr 19 00:36:41 srv-zgff rsyslogd[530]: action 'action-7-builtin:omfile' suspended (module 'builtin:omfile'), retry 0. There should be messages before this one giving the reason for suspension. [v8.1901.0 try h\r\n# these resumed/suspended lines repeat frequently\r\n```\r\n\r\nThat config comes from https://github.com/GoogleCloudPlatform/compute-image-packages/blob/66ca87bb7ebcb928fe0a599b77dbf24c77b965bb/packages/google-compute-engine/src/etc/rsyslog.d/90-google.conf#L6\r\n\r\nand indeed the syslog user doesn't have access\r\n\r\n```\r\n$ ls -l /dev/console\r\ncrw--w---- 1 root tty 5, 1 Apr 19 00:01 /dev/console\r\n$ ps aux | grep rsyslog\r\nsyslog     530  0.0  0.1 224508  5144 ?        Ssl  Apr18   0:03 /usr/sbin/rsyslogd -n -iNONE\r\n$ groups syslog\r\nsyslog : syslog adm\r\n```\r\n\r\nShould there be a udev rule in this package to change permissions on `/dev/console`?\r\n\r\nLooks like this has been happening for quite some time for at least one other user (xenial, bionic): https://irclogs.ubuntu.com/2018/11/14/%23ubuntu.html#t16:07", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/869", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/869/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/869/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/869/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/869", "id": 523360445, "node_id": "MDU6SXNzdWU1MjMzNjA0NDU=", "number": 869, "title": "GCP / CentOS \"google_instance_setup\" *always* regenerate SSH host key", "user": {"login": "arekkusu", "id": 3620344, "node_id": "MDQ6VXNlcjM2MjAzNDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/3620344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arekkusu", "html_url": "https://github.com/arekkusu", "followers_url": "https://api.github.com/users/arekkusu/followers", "following_url": "https://api.github.com/users/arekkusu/following{/other_user}", "gists_url": "https://api.github.com/users/arekkusu/gists{/gist_id}", "starred_url": "https://api.github.com/users/arekkusu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arekkusu/subscriptions", "organizations_url": "https://api.github.com/users/arekkusu/orgs", "repos_url": "https://api.github.com/users/arekkusu/repos", "events_url": "https://api.github.com/users/arekkusu/events{/privacy}", "received_events_url": "https://api.github.com/users/arekkusu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-15T09:37:41Z", "updated_at": "2019-11-25T05:29:49Z", "closed_at": "2019-11-25T05:29:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "On Google Cloud running \" /usr/bin/google_instance_setup\" will *always* regenerate the SSH host key.\r\n\r\nThis concerns at least CentOS 6/7/8 after updating \"python-google-compute-engine\"\r\n\r\nProblematic package: \"python-google-compute-engine\"  [1] version \"20191112.00-g1.el7\"\r\n[python-google-compute-engine-20191112.00-g1.el7.noarch.rpm RPM DL](https://packages.cloud.google.com/yum/repos/google-compute-engine-el7-x86_64-stable/Packages/80d11aff4e3a486693371efa20b5a2e7c4c76a3668d1870979af795c1bb166ae-python-google-compute-engine-20191112.00-g1.el7.noarch.rpm)\r\n\r\nPrevious version:\r\n[python-google-compute-engine-20190916.00-g1.el7.noarch.rpm RPM DL](https://packages.cloud.google.com/yum/repos/google-compute-engine-el7-x86_64-stable/Packages/f95dba61f66302af350789041fb30ddca7f2a3bb07ead4c517d73e8249b32130-python-google-compute-engine-20190916.00-g1.el7.noarch.rpm)\r\n\r\nI believe this could be the problematic code as removing those line has an effect, but not sure.\r\nhttps://github.com/GoogleCloudPlatform/compute-image-packages/commit/880daf9de49873d37aa6723dff4bba81542d1ecd#diff-478b5c2a4e03952901b1a18ea65b1b58L208-L211\r\n\r\n[1] \"python3-google-compute-engine\" in the case of CentOS 8", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/862", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/862/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/862/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/862/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/862", "id": 507921723, "node_id": "MDU6SXNzdWU1MDc5MjE3MjM=", "number": 862, "title": "system hangs on name resolution failure (startup or shutdown)", "user": {"login": "rjschwei", "id": 1087183, "node_id": "MDQ6VXNlcjEwODcxODM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1087183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rjschwei", "html_url": "https://github.com/rjschwei", "followers_url": "https://api.github.com/users/rjschwei/followers", "following_url": "https://api.github.com/users/rjschwei/following{/other_user}", "gists_url": "https://api.github.com/users/rjschwei/gists{/gist_id}", "starred_url": "https://api.github.com/users/rjschwei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rjschwei/subscriptions", "organizations_url": "https://api.github.com/users/rjschwei/orgs", "repos_url": "https://api.github.com/users/rjschwei/repos", "events_url": "https://api.github.com/users/rjschwei/events{/privacy}", "received_events_url": "https://api.github.com/users/rjschwei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-16T15:19:06Z", "updated_at": "2020-01-13T21:51:48Z", "closed_at": "2020-01-13T21:51:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Upon shutdown script_manager attemptes to retrieve data from the metadata server via the call chain\r\nScriptManager.RunScripts() -> retriever.GetScripts() -> watcher.GetMetadata()\r\n\r\nWhile MetadataWatcher.GetMetadata() has arguments to avoid a forever loop in MetadataWatcher._HandleMetadataUpdate() by setting the \"retry\" argument to false this control option is not available in retriever.GetScripts(). Therefore it is not possible for the startup or shutdown sequence to succeed if name resolution fails.\r\n\r\nPotential options for addressing the issue:\r\n1.) Add the control options from MetadataWatcher.GetMetadata() to higher level implementations that call this code.\r\n  + This would allow the ScriptManager.RunScripts() code to avoid an infinite loop as retriever.GetScripts(retry=False) could be used\r\n\r\n2.) Add a retry counter to MetadataWatcher._HandleMetadataUpdate()\r\n  + Have a set number of retries, maybe 50 to allow a potential transient network access issue to clear. This would introduce a delay in the case that showed this problem, but a system with persistent name resolution problems would still start or shutdown\r\n\r\n3.) Explicitly ignore name resolution errors in MetadataWatcher._HandleMetadataUpdate()\r\n  + This implies to abandon the wait loop when no name resolution is possible. However this also implies that if the issue is transient any data that may be important will not be considered.\r\n\r\nIMHO 1 should be the preferred implementation approach but I didn't want to go down that path if there is not general consensus.\r\n\r\nPlease let me know and I'll be happy to provide a PR.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/859", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/859/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/859/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/859/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/859", "id": 504945171, "node_id": "MDU6SXNzdWU1MDQ5NDUxNzE=", "number": 859, "title": "Consider creating a root-level OWNERS file", "user": {"login": "fejta", "id": 940341, "node_id": "MDQ6VXNlcjk0MDM0MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/940341?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fejta", "html_url": "https://github.com/fejta", "followers_url": "https://api.github.com/users/fejta/followers", "following_url": "https://api.github.com/users/fejta/following{/other_user}", "gists_url": "https://api.github.com/users/fejta/gists{/gist_id}", "starred_url": "https://api.github.com/users/fejta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fejta/subscriptions", "organizations_url": "https://api.github.com/users/fejta/orgs", "repos_url": "https://api.github.com/users/fejta/repos", "events_url": "https://api.github.com/users/fejta/events{/privacy}", "received_events_url": "https://api.github.com/users/fejta/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}, {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-09T23:20:47Z", "updated_at": "2020-01-13T21:52:07Z", "closed_at": "2020-01-13T21:52:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Example such file: https://github.com/GoogleCloudPlatform/testgrid/blob/master/OWNERS\r\n\r\nDoes this repo use tide?\r\n\r\nIf you do you can have prow's blunderbuss auto-assign PRs for people to review\r\n\r\n\r\n```yaml\r\n{\r\n insertId: \"hhe0klg19qto38\"  \r\n jsonPayload: {\r\n  author: \"hopkiw\"   \r\n  component: \"hook\"   \r\n  event-GUID: \"fabaa5a0-eabf-11e9-9d1c-e83845a44c3d\"   \r\n  event-type: \"pull_request\"   \r\n  file: \"prow/plugins/approve/approvers/owners.go:164\"   \r\n  func: \"k8s.io/test-infra/prow/plugins/approve/approvers.Owners.GetSuggestedApprovers\"   \r\n  level: \"warning\"   \r\n  msg: \"Couldn't find/suggest approvers for each files. Unapproved: [\"\"]\"   \r\n  org: \"GoogleCloudPlatform\"   \r\n  plugin: \"approve\"   \r\n  pr: 858   \r\n  repo: \"compute-image-packages\"   \r\n  url: \"https://github.com/GoogleCloudPlatform/compute-image-packages/pull/858\"   \r\n }\r\n labels: {\u2026}  \r\n logName: \"projects/oss-prow/logs/hook\"  \r\n receiveTimestamp: \"2019-10-09T18:09:53.708324141Z\"  \r\n resource: {\u2026}  \r\n severity: \"ERROR\"  \r\n timestamp: \"2019-10-09T18:09:52Z\"  \r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/856", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/856/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/856/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/856/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/856", "id": 502749918, "node_id": "MDU6SXNzdWU1MDI3NDk5MTg=", "number": 856, "title": "Instance setup should set scheduler to `none` on systems using blk-mq", "user": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-04T17:14:00Z", "updated_at": "2020-01-13T21:52:44Z", "closed_at": "2020-01-13T21:52:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "There's no kernel parameter for this yet; it must be done from userspace after boot.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/852", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/852/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/852/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/852/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/852", "id": 497984195, "node_id": "MDU6SXNzdWU0OTc5ODQxOTU=", "number": 852, "title": "Private key logged in dmesg", "user": {"login": "gavinatpan", "id": 51135307, "node_id": "MDQ6VXNlcjUxMTM1MzA3", "avatar_url": "https://avatars2.githubusercontent.com/u/51135307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gavinatpan", "html_url": "https://github.com/gavinatpan", "followers_url": "https://api.github.com/users/gavinatpan/followers", "following_url": "https://api.github.com/users/gavinatpan/following{/other_user}", "gists_url": "https://api.github.com/users/gavinatpan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gavinatpan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gavinatpan/subscriptions", "organizations_url": "https://api.github.com/users/gavinatpan/orgs", "repos_url": "https://api.github.com/users/gavinatpan/repos", "events_url": "https://api.github.com/users/gavinatpan/events{/privacy}", "received_events_url": "https://api.github.com/users/gavinatpan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-25T00:21:40Z", "updated_at": "2019-09-25T20:59:17Z", "closed_at": "2019-09-25T20:59:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Line 149 can log malformed private keys through dmesg:\r\nhttps://github.com/GoogleCloudPlatform/compute-image-packages/blob/master/packages/python-google-compute-engine/google_compute_engine/accounts/accounts_daemon.py#L149\r\n\r\nProbably a better way to log this problem than copying the entire private key into logger.info line by line.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/849", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/849/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/849/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/849/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/849", "id": 493671629, "node_id": "MDU6SXNzdWU0OTM2NzE2Mjk=", "number": 849, "title": "google-compute-engine v20190905.00-g1 causing network issues on Debian 9", "user": {"login": "jbiel", "id": 961717, "node_id": "MDQ6VXNlcjk2MTcxNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/961717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbiel", "html_url": "https://github.com/jbiel", "followers_url": "https://api.github.com/users/jbiel/followers", "following_url": "https://api.github.com/users/jbiel/following{/other_user}", "gists_url": "https://api.github.com/users/jbiel/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbiel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbiel/subscriptions", "organizations_url": "https://api.github.com/users/jbiel/orgs", "repos_url": "https://api.github.com/users/jbiel/repos", "events_url": "https://api.github.com/users/jbiel/events{/privacy}", "received_events_url": "https://api.github.com/users/jbiel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 50489233, "node_id": "MDU6TGFiZWw1MDQ4OTIzMw==", "url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-09-14T22:10:22Z", "updated_at": "2019-09-16T23:43:59Z", "closed_at": "2019-09-16T23:43:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "After upgrading packages on some of our Debian 9 boxes on GCE we experienced random network issues (loss of connectivity, instances being removed from load balancers, cluster instability, etc.) We've traced it down to an issue with the `google-network-daemon` restarting the network quite often for no apparent reason.\r\n\r\n```Sep 14 21:46:43 hostname google-ip-forwarding[1739]: INFO Changing eth0 IPs from None to ['10.172.48.33'] by adding ['10.172.48.33'] and removing None.\r\nSep 14 21:46:43 hostname google-networking[1739]: INFO Restarting service via \"systemctl restart networking\".\r\nSep 14 21:48:05 hostname google-ip-forwarding[1739]: INFO Changing eth0 IPs from None to ['10.172.48.33'] by adding ['10.172.48.33'] and removing None.\r\nSep 14 21:48:05 hostname google-networking[1739]: INFO Restarting service via \"systemctl restart networking\".\r\nSep 14 21:49:26 hostname google-ip-forwarding[1739]: INFO Changing eth0 IPs from None to ['10.172.48.33'] by adding ['10.172.48.33'] and removing None.\r\nSep 14 21:49:26 hostname google-networking[1739]: INFO Restarting service via \"systemctl restart networking\".\r\nSep 14 21:50:48 hostname google-ip-forwarding[1739]: INFO Changing eth0 IPs from None to ['10.172.48.33'] by adding ['10.172.48.33'] and removing None.\r\nSep 14 21:50:48 hostname google-networking[1739]: INFO Restarting service via \"systemctl restart networking\".\r\nSep 14 21:52:09 hostname google-ip-forwarding[1739]: INFO Changing eth0 IPs from None to ['10.172.48.33'] by adding ['10.172.48.33'] and removing None.\r\nSep 14 21:52:09 hostname google-networking[1739]: INFO Restarting service via \"systemctl restart networking\".\r\nSep 14 21:53:31 hostname google-ip-forwarding[1739]: INFO Changing eth0 IPs from None to ['10.172.48.33'] by adding ['10.172.48.33'] and removing None.\r\nSep 14 21:53:31 hostname google-networking[1739]: INFO Restarting service via \"systemctl restart networking\".\r\nSep 14 21:54:53 hostname google-ip-forwarding[1739]: INFO Changing eth0 IPs from None to ['10.172.48.33'] by adding ['10.172.48.33'] and removing None.\r\nSep 14 21:54:53 hostname google-networking[1739]: INFO Restarting service via \"systemctl restart networking\".\r\nSep 14 21:56:14 hostname google-ip-forwarding[1739]: INFO Changing eth0 IPs from None to ['10.172.48.33'] by adding ['10.172.48.33'] and removing None.\r\nSep 14 21:56:14 hostname google-networking[1739]: INFO Restarting service via \"systemctl restart networking\".\r\n```\r\n\r\nCoupled with these restarts, there are quite a few messages about martian packets in the kernel log.\r\n\r\n```\r\nSep 14 21:46:44 hostname kernel: [75481.916753] net_ratelimit: 34 callbacks suppressed\r\nSep 14 21:46:44 hostname kernel: [75481.916756] IPv4: martian source 10.172.48.33 from 10.48.15.8, on dev eth0\r\nSep 14 21:46:44 hostname kernel: [75481.931332] ll header: 00000000: 42 01 0a ac 30 21 42 01 0a ac 30 01 08 00        B...0!B...0...\r\nSep 14 21:46:45 hostname kernel: [75482.035660] IPv4: martian source 10.172.48.33 from 10.48.15.8, on dev eth0\r\nSep 14 21:46:45 hostname kernel: [75482.043193] ll header: 00000000: 42 01 0a ac 30 21 42 01 0a ac 30 01 08 00        B...0!B...0...\r\nSep 14 21:46:45 hostname kernel: [75482.239364] IPv4: martian source 10.172.48.33 from 10.48.15.8, on dev eth0\r\nSep 14 21:46:45 hostname kernel: [75482.246406] ll header: 00000000: 42 01 0a ac 30 21 42 01 0a ac 30 01 08 00        B...0!B...0...\r\nSep 14 21:46:45 hostname kernel: [75482.447452] IPv4: martian source 10.172.48.33 from 10.48.15.8, on dev eth0\r\nSep 14 21:46:45 hostname kernel: [75482.454504] ll header: 00000000: 42 01 0a ac 30 21 42 01 0a ac 30 01 08 00        B...0!B...0...\r\nSep 14 21:46:45 hostname kernel: [75482.855336] IPv4: martian source 10.172.48.33 from 10.48.15.8, on dev eth0\r\nSep 14 21:46:45 hostname kernel: [75482.862378] ll header: 00000000: 42 01 0a ac 30 21 42 01 0a ac 30 01 08 00        B...0!B...0...\r\nSep 14 21:46:45 hostname kernel: [75482.967416] IPv4: martian source 10.172.48.33 from 10.48.15.8, on dev eth0\r\nSep 14 21:46:45 hostname kernel: [75482.974460] ll header: 00000000: 42 01 0a ac 30 21 42 01 0a ac 30 01 08 00        B...0!B...0...\r\nSep 14 21:46:46 hostname kernel: [75483.671345] IPv4: martian source 10.172.48.33 from 10.48.15.8, on dev eth0\r\nSep 14 21:46:46 hostname kernel: [75483.678392] ll header: 00000000: 42 01 0a ac 30 21 42 01 0a ac 30 01 08 00        B...0!B...0...\r\nSep 14 21:46:46 hostname kernel: [75483.958717] IPv4: martian source 10.172.48.33 from 10.48.7.9, on dev eth0\r\nSep 14 21:46:46 hostname kernel: [75483.965663] ll header: 00000000: 42 01 0a ac 30 21 42 01 0a ac 30 01 08 00        B...0!B...0...\r\nSep 14 21:46:47 hostname kernel: [75484.021614] IPv4: martian source 10.172.48.33 from 10.48.7.9, on dev eth0\r\nSep 14 21:46:47 hostname kernel: [75484.028564] ll header: 00000000: 42 01 0a ac 30 21 42 01 0a ac 30 01 08 00        B...0!B...0...\r\n```\r\n\r\nThe version of google-compute-engine causing this issue is `20190905.00-g1`. Downgrading to `20190801.00-g1` fixes the issue. In case someone else comes across this issue, here are the packages we used to downgrade on Debian 9/Stretch:\r\n\r\nhttps://packages.cloud.google.com/apt/pool/google-compute-engine_1:20190801.00-g1_all_fe469ebf9287a33f294c035c44228b43f6442873d331598c742a1f7d6877573d.deb\r\nhttps://packages.cloud.google.com/apt/pool/python-google-compute-engine_1:20190801.00-g1_all_b52cd177cf891fc1fb1fc34924bd63a177854ec4e3d3efd83b3d9cae2bc52998.deb\r\nhttps://packages.cloud.google.com/apt/pool/python3-google-compute-engine_1:20190801.00-g1_all_63d9dd5519412d9ccdc1fc1e6f9e2df14d3a61274bcbd092ed35bb8430888df3.deb", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/844", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/844/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/844/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/844/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/844", "id": 491915382, "node_id": "MDU6SXNzdWU0OTE5MTUzODI=", "number": 844, "title": "e6eab0c1 breaks SUSE distros", "user": {"login": "rjschwei", "id": 1087183, "node_id": "MDQ6VXNlcjEwODcxODM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1087183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rjschwei", "html_url": "https://github.com/rjschwei", "followers_url": "https://api.github.com/users/rjschwei/followers", "following_url": "https://api.github.com/users/rjschwei/following{/other_user}", "gists_url": "https://api.github.com/users/rjschwei/gists{/gist_id}", "starred_url": "https://api.github.com/users/rjschwei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rjschwei/subscriptions", "organizations_url": "https://api.github.com/users/rjschwei/orgs", "repos_url": "https://api.github.com/users/rjschwei/repos", "events_url": "https://api.github.com/users/rjschwei/events{/privacy}", "received_events_url": "https://api.github.com/users/rjschwei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-09-10T21:48:26Z", "updated_at": "2019-09-17T20:00:12Z", "closed_at": "2019-09-17T20:00:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "With #e6eab0c1 the \"DisableIpv6\" interface was introduced in network_setup.py. This in turn call through to distribution specific implementations. However for SUSE the interface was not implemented and it was not added to the base class either. Therefore this generates a traceback:\r\n\r\ngoogle-networking: ERROR Exception calling the response handler. 'Utils' object has no attribute 'DisableIpv6'.\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/site-packages/google_compute_engine/metadata_watcher.py\", line 200, in WatchMetadata\r\n    handler(response)\r\n  File \"/usr/lib/python2.7/site-packages/google_compute_engine/networking/network_daemon.py\", line 97, in HandleNetworkInterfaces\r\n    self.network_setup.DisableIpv6([default_interface.name])\r\n  File \"/usr/lib/python2.7/site-packages/google_compute_engine/networking/network_setup/network_setup.py\", line 83, in DisableIpv6\r\n    self.distro_utils.DisableIpv6(interfaces, self.logger)\r\nAttributeError: 'Utils' object has no attribute 'DisableIpv6'\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/839", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/839/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/839/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/839/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/839", "id": 487709143, "node_id": "MDU6SXNzdWU0ODc3MDkxNDM=", "number": 839, "title": "google_oslogin_control security.conf edit is not idempotent", "user": {"login": "cz-google-github", "id": 53283331, "node_id": "MDQ6VXNlcjUzMjgzMzMx", "avatar_url": "https://avatars0.githubusercontent.com/u/53283331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cz-google-github", "html_url": "https://github.com/cz-google-github", "followers_url": "https://api.github.com/users/cz-google-github/followers", "following_url": "https://api.github.com/users/cz-google-github/following{/other_user}", "gists_url": "https://api.github.com/users/cz-google-github/gists{/gist_id}", "starred_url": "https://api.github.com/users/cz-google-github/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cz-google-github/subscriptions", "organizations_url": "https://api.github.com/users/cz-google-github/orgs", "repos_url": "https://api.github.com/users/cz-google-github/repos", "events_url": "https://api.github.com/users/cz-google-github/events{/privacy}", "received_events_url": "https://api.github.com/users/cz-google-github/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-31T00:16:45Z", "updated_at": "2019-08-31T00:17:46Z", "closed_at": "2019-08-31T00:17:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "`google_oslogin_control` attempts to add a line to `/etc/security/groups.conf` if it's not already there. However, because there are `*` characters in the line that get interpreted by grep, it actually just always adds the line.\r\n\r\nDue to another bug (ours) this was running repeatedly and putting thousands of lines into the `group.conf` file, which made `ssh` take several minutes to do a login.\r\n\r\n([source here](https://github.com/GoogleCloudPlatform/compute-image-packages/blob/688bcbd32ef2c8cd014def57413ba76cf2ee7257/packages/google-compute-engine-oslogin/google_oslogin_control#L268))\r\n```sh\r\n  local group_conf_entry=\"sshd;*;*;Al0000-2400;adm,dip,docker,lxd,plugdev,video\"\r\n\r\n  if ! grep -q \"$group_conf_entry\" \"$group_config\"; then\r\n```\r\n\r\nI suggest using `fgrep` so the search expression is treated literally.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/836", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/836/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/836/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/836/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/836", "id": 483135378, "node_id": "MDU6SXNzdWU0ODMxMzUzNzg=", "number": 836, "title": "Arch linux - error: No package owns /usr/lib/libnss_oslogin.so.2", "user": {"login": "Strykar", "id": 2946372, "node_id": "MDQ6VXNlcjI5NDYzNzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/2946372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Strykar", "html_url": "https://github.com/Strykar", "followers_url": "https://api.github.com/users/Strykar/followers", "following_url": "https://api.github.com/users/Strykar/following{/other_user}", "gists_url": "https://api.github.com/users/Strykar/gists{/gist_id}", "starred_url": "https://api.github.com/users/Strykar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Strykar/subscriptions", "organizations_url": "https://api.github.com/users/Strykar/orgs", "repos_url": "https://api.github.com/users/Strykar/repos", "events_url": "https://api.github.com/users/Strykar/events{/privacy}", "received_events_url": "https://api.github.com/users/Strykar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-20T23:59:25Z", "updated_at": "2019-08-21T06:16:42Z", "closed_at": "2019-08-21T06:16:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Today, after a year of running Arch on GCE, when I attempt a system upgrade, it fails with:\r\n```\r\n$ sudo pacman -Syu\r\n:: Synchronizing package databases...\r\n core is up to date\r\n extra                                                                                                1651.3 KiB  2.78M/s 00:01 [#############################################################################] 100%\r\n community                                                                                               4.9 MiB  9.89M/s 00:00 [#############################################################################] 100%\r\n gce is up to date\r\n custom is up to date\r\n:: Starting full system upgrade...\r\nresolving dependencies...\r\nlooking for conflicting packages...\r\n\r\nPackages (5) cryptsetup-2.2.0-1  git-2.23.0-1  google-compute-engine-20190801-1  google-compute-engine-oslogin-20190801-1  mercurial-5.1-1\r\n\r\nTotal Installed Size:  68.94 MiB\r\nNet Upgrade Size:      -0.03 MiB\r\n\r\n:: Proceed with installation? [Y/n] y\r\n(5/5) checking keys in keyring                                                                                                  [#############################################################################] 100%\r\n(5/5) checking package integrity                                                                                                [#############################################################################] 100%\r\n(5/5) loading package files                                                                                                     [#############################################################################] 100%\r\n(5/5) checking for file conflicts                                                                                               [#############################################################################] 100%\r\nerror: failed to commit transaction (conflicting files)\r\ngoogle-compute-engine-oslogin: /usr/lib/libnss_cache_oslogin.so.2 exists in filesystem\r\ngoogle-compute-engine-oslogin: /usr/lib/libnss_oslogin.so.2 exists in filesystem\r\nErrors occurred, no packages were upgraded.\r\n```\r\n\r\nI try to find the package that owns the files in question, and apparently nobody owns it:\r\n```\r\n$ sudo pacman -Qo /usr/lib/libnss_cache_oslogin.so.2\r\nerror: No package owns /usr/lib/libnss_cache_oslogin.so.2\r\n$ sudo pacman -Qo /usr/lib/libnss_oslogin.so.2\r\nerror: No package owns /usr/lib/libnss_oslogin.so.2\r\n```\r\n\r\nAnd looks like the Makefile always created that symlink:\r\n```\r\n$ ls -l /usr/lib/libnss_cache_oslogin.so.2\r\nlrwxrwxrwx 1 root root 51 Jun 22 12:23 /usr/lib/libnss_cache_oslogin.so.2 -> libnss_cache_google-compute-engine-oslogin-1.5.3.so\r\n$ ls -l /usr/lib/libnss_oslogin.so.2\r\nlrwxrwxrwx 1 root root 45 Jun 22 12:23 /usr/lib/libnss_oslogin.so.2 -> libnss_google-compute-engine-oslogin-1.5.3.so\r\n```\r\nSo I'm unsure what's changed or if I should `pacman --overwrite -Syu` those two files for the upgrade to proceed?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/831", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/831/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/831/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/831/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/831", "id": 476963314, "node_id": "MDU6SXNzdWU0NzY5NjMzMTQ=", "number": 831, "title": "Python package uses version number not allowed by setuptools", "user": {"login": "glaubitz", "id": 1647645, "node_id": "MDQ6VXNlcjE2NDc2NDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1647645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glaubitz", "html_url": "https://github.com/glaubitz", "followers_url": "https://api.github.com/users/glaubitz/followers", "following_url": "https://api.github.com/users/glaubitz/following{/other_user}", "gists_url": "https://api.github.com/users/glaubitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/glaubitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glaubitz/subscriptions", "organizations_url": "https://api.github.com/users/glaubitz/orgs", "repos_url": "https://api.github.com/users/glaubitz/repos", "events_url": "https://api.github.com/users/glaubitz/events{/privacy}", "received_events_url": "https://api.github.com/users/glaubitz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 50489233, "node_id": "MDU6TGFiZWw1MDQ4OTIzMw==", "url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "zmarano", "id": 4564273, "node_id": "MDQ6VXNlcjQ1NjQyNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4564273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zmarano", "html_url": "https://github.com/zmarano", "followers_url": "https://api.github.com/users/zmarano/followers", "following_url": "https://api.github.com/users/zmarano/following{/other_user}", "gists_url": "https://api.github.com/users/zmarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/zmarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zmarano/subscriptions", "organizations_url": "https://api.github.com/users/zmarano/orgs", "repos_url": "https://api.github.com/users/zmarano/repos", "events_url": "https://api.github.com/users/zmarano/events{/privacy}", "received_events_url": "https://api.github.com/users/zmarano/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zmarano", "id": 4564273, "node_id": "MDQ6VXNlcjQ1NjQyNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4564273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zmarano", "html_url": "https://github.com/zmarano", "followers_url": "https://api.github.com/users/zmarano/followers", "following_url": "https://api.github.com/users/zmarano/following{/other_user}", "gists_url": "https://api.github.com/users/zmarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/zmarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zmarano/subscriptions", "organizations_url": "https://api.github.com/users/zmarano/orgs", "repos_url": "https://api.github.com/users/zmarano/repos", "events_url": "https://api.github.com/users/zmarano/events{/privacy}", "received_events_url": "https://api.github.com/users/zmarano/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-08-05T16:59:25Z", "updated_at": "2019-08-26T15:44:52Z", "closed_at": "2019-08-26T15:44:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "When building the Python packages, setuptools is modifying the ```version``` number from ```setup.py```.\r\n\r\nFor Python3 on openSUSE Factory:\r\n\r\n```\r\nglaubitz@suse-laptop:~/upstream/compute-image-packages/packages/python-google-compute-engine> python3 setup.py build\r\n/usr/lib/python3.7/site-packages/setuptools/dist.py:472: UserWarning: Normalizing '20190801.00' to '20190801.0'\r\n  normalized_version,\r\nrunning build\r\nrunning build_py\r\nrunning egg_info\r\nwriting google_compute_engine.egg-info/PKG-INFO\r\nwriting dependency_links to google_compute_engine.egg-info/dependency_links.txt\r\n```\r\n\r\nFor Python2 on openSUSE Factory:\r\n\r\n```\r\nglaubitz@suse-laptop:~/upstream/compute-image-packages/packages/python-google-compute-engine> python setup.py build\r\n/usr/lib/python2.7/site-packages/setuptools/dist.py:472: UserWarning: Normalizing '20190801.00' to '20190801.0'\r\n  normalized_version,\r\nrunning build\r\nrunning build_py\r\ncreating build\r\ncreating build/lib\r\ncreating build/lib/google_compute_engine\r\ncopying google_compute_engine/constants.py -> build/lib/google_compute_engine\r\n```\r\n\r\nThe current version of ```setuptools``` in SLE-12 does not care and doesn't normalize the version number:\r\n\r\n```\r\nsuse-laptop:/home/abuild/rpmbuild/BUILD/compute-image-packages-20190801/packages/python-google-compute-engine # python setup.py build\r\nrunning build\r\nrunning build_py\r\nrunning egg_info\r\nwriting google_compute_engine.egg-info/PKG-INFO\r\nwriting top-level names to google_compute_engine.egg-info/top_level.txt\r\nwriting dependency_links to google_compute_engine.egg-info/dependency_links.txt\r\nwriting entry points to google_compute_engine.egg-info/entry_points.txt\r\nreading manifest file 'google_compute_engine.egg-info/SOURCES.txt'\r\nreading manifest template 'MANIFEST.in'\r\n```\r\n\r\nThe version of ```setuptools``` does however, which means that the directory pattern for the Python egg files follow an inconsitent different version scheme.\r\n\r\nFrom the current spec file:\r\n\r\n```spec\r\n%if 0%{?suse_version} && 0%{?suse_version} > 1315\r\n%dir %{python3_sitelib}/google_compute_engine\r\n%dir %{python3_sitelib}/google_compute_engine-%{setup_version}-py%{py3_ver}.egg-info\r\n%else\r\n%dir %{python_sitelib}/google_compute_engine\r\n%dir %{python_sitelib}/google_compute_engine-%{setup_version}-py%{py_ver}.egg-info\r\n%endif\r\n```\r\n\r\nSee: https://build.opensuse.org/package/view_file/Cloud:Tools/google-compute-engine/google-compute-engine.spec?expand=1\r\n\r\nCC @rjschwei ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/830", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/830/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/830/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/830/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/830", "id": 476762418, "node_id": "MDU6SXNzdWU0NzY3NjI0MTg=", "number": 830, "title": "Version 20190801 fails to build on SLE-12-SP3", "user": {"login": "glaubitz", "id": 1647645, "node_id": "MDQ6VXNlcjE2NDc2NDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1647645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glaubitz", "html_url": "https://github.com/glaubitz", "followers_url": "https://api.github.com/users/glaubitz/followers", "following_url": "https://api.github.com/users/glaubitz/following{/other_user}", "gists_url": "https://api.github.com/users/glaubitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/glaubitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glaubitz/subscriptions", "organizations_url": "https://api.github.com/users/glaubitz/orgs", "repos_url": "https://api.github.com/users/glaubitz/repos", "events_url": "https://api.github.com/users/glaubitz/events{/privacy}", "received_events_url": "https://api.github.com/users/glaubitz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 50489233, "node_id": "MDU6TGFiZWw1MDQ4OTIzMw==", "url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-08-05T09:47:58Z", "updated_at": "2019-09-17T20:00:32Z", "closed_at": "2019-09-17T20:00:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "The current version of ```compute-image-packages``` (20190801) fails to build on SLE-12-SP3 with a linker error:\r\n\r\n```\r\n[   26s] g++ -fPIC -Wall -g -Iinclude -I/usr/include/json-c -shared -Wl,-soname,libnss_oslogin.so.2 nss/nss_oslogin.o utils.o -o libnss_oslogin-20190801.00.so -lcurl -ljson-c\r\n[   26s] g++ -fPIC -Wall -g -Iinclude -I/usr/include/json-c -shared -Wl,-soname,libnss_cache_oslogin.so.2 nss/nss_cache_oslogin.o nss/compat/getpwent_r.o utils.o -o libnss_cache_oslogin-20190801.00.so -lcurl -ljson-c\r\n[   26s] g++ -fPIC -Wall -g -Iinclude -I/usr/include/json-c -shared pam/pam_oslogin_login.o utils.o -o pam_oslogin_login.so -lpam -lcurl -ljson-c\r\n[   26s] g++ -fPIC -Wall -g -Iinclude -I/usr/include/json-c -shared pam/pam_oslogin_admin.o utils.o -o pam_oslogin_admin.so -lpam -lcurl -ljson-c\r\n[   26s] g++ -fPIC -Wall -g -Iinclude -I/usr/include/json-c cache_refresh/cache_refresh.o utils.o -o google_oslogin_nss_cache -lcurl -ljson-c\r\n[   26s] g++ -fPIC -Wall -g -Iinclude -I/usr/include/json-c authorized_keys/authorized_keys.o utils.o -o google_authorized_keys -lcurl -ljson-c\r\n[   27s] utils.o: In function `bool boost::regex_match<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > >, char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >(__gnu_cxx::__normal_iterator<char const*, std::string>, __gnu_cxx::__normal_iterator<char const*, std::string>, boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags)':\r\n[   27s] /usr/include/boost/regex/v4/regex_match.hpp:50: undefined reference to `boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::match()'\r\n[   27s] utils.o: In function `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign(char const*, char const*, unsigned int)':\r\n[   27s] /usr/include/boost/regex/v4/basic_regex.hpp:382: undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)'\r\n[   27s] utils.o: In function `boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::perl_matcher(__gnu_cxx::__normal_iterator<char const*, std::string>, __gnu_cxx::__normal_iterator<char const*, std::string>, boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags, __gnu_cxx::__normal_iterator<char const*, std::string>)':\r\n[   27s] /usr/include/boost/regex/v4/perl_matcher.hpp:374: undefined reference to `boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::construct_init(boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags)'\r\n[   27s] collect2: error: ld returned 1 exit status\r\n[   27s] Makefile:66: recipe for target 'google_oslogin_nss_cache' failed\r\n[   27s] make[1]: *** [google_oslogin_nss_cache] Error 1\r\n[   27s] make[1]: *** Waiting for unfinished jobs....\r\n[   27s] utils.o: In function `bool boost::regex_match<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > >, char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >(__gnu_cxx::__normal_iterator<char const*, std::string>, __gnu_cxx::__normal_iterator<char const*, std::string>, boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags)':\r\n[   27s] /usr/include/boost/regex/v4/regex_match.hpp:50: undefined reference to `boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::match()'\r\n[   27s] utils.o: In function `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::assign(char const*, char const*, unsigned int)':\r\n[   27s] /usr/include/boost/regex/v4/basic_regex.hpp:382: undefined reference to `boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::do_assign(char const*, char const*, unsigned int)'\r\n[   27s] utils.o: In function `boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::perl_matcher(__gnu_cxx::__normal_iterator<char const*, std::string>, __gnu_cxx::__normal_iterator<char const*, std::string>, boost::match_results<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags, __gnu_cxx::__normal_iterator<char const*, std::string>)':\r\n[   27s] /usr/include/boost/regex/v4/perl_matcher.hpp:374: undefined reference to `boost::re_detail::perl_matcher<__gnu_cxx::__normal_iterator<char const*, std::string>, std::allocator<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::string> > >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::construct_init(boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags)'\r\n[   27s] collect2: error: ld returned 1 exit status\r\n[   27s] Makefile:63: recipe for target 'google_authorized_keys' failed\r\n[   27s] make[1]: *** [google_authorized_keys] Error 1\r\n[   27s] make[1]: Leaving directory '/home/abuild/rpmbuild/BUILD/compute-image-packages-20190801/packages/google-compute-engine-oslogin/src'\r\n[   27s] Makefile:2: recipe for target 'all' failed\r\n[   27s] make: *** [all] Error 2\r\n[   27s] error: Bad exit status from /var/tmp/rpm-tmp.7IITs7 (%build)\r\n```\r\n\r\nSLE-12-SP3 uses Boost 1.54. Either the Boost version is too old or the Boost libraries should be linked in a different order. This issue does not affect SLE-15 (any version).\r\n\r\nFull log in https://build.opensuse.org/build/home:glaubitz:branches:Cloud:Tools/SLE_12_SP3/x86_64/google-compute-engine/_log\r\n\r\nCC @rjschwei ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/829", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/829/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/829/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/829/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/829", "id": 476296471, "node_id": "MDU6SXNzdWU0NzYyOTY0NzE=", "number": 829, "title": "Package dependency issue in 16.04 xenial", "user": {"login": "jaresty", "id": 1313844, "node_id": "MDQ6VXNlcjEzMTM4NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1313844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaresty", "html_url": "https://github.com/jaresty", "followers_url": "https://api.github.com/users/jaresty/followers", "following_url": "https://api.github.com/users/jaresty/following{/other_user}", "gists_url": "https://api.github.com/users/jaresty/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaresty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaresty/subscriptions", "organizations_url": "https://api.github.com/users/jaresty/orgs", "repos_url": "https://api.github.com/users/jaresty/repos", "events_url": "https://api.github.com/users/jaresty/events{/privacy}", "received_events_url": "https://api.github.com/users/jaresty/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-02T18:06:41Z", "updated_at": "2019-08-02T19:25:55Z", "closed_at": "2019-08-02T19:25:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "We discovered today that the python3-google-compute-engine package available at the google apt repositories [1] now has a dependency on packages that are not available on the same upstream canonical repositories that used to work for the previous version of that package. Besides the google package repository, we are also configured to pull from some canonical upstream repositories [2]. The new package has several new dependencies and one of them is currently causing an error when trying to install [3]. We think that this pull request [4] may be causing this new issue. \r\n\r\n[1]\r\n```\r\ndeb http://packages.cloud.google.com/apt google-compute-engine-stretch-stable main\r\ndeb http://packages.cloud.google.com/apt google-cloud-packages-archive-keyring-stretch main\r\n```\r\n[2]\r\n```\r\ndeb http://archive.ubuntu.com/ubuntu xenial main universe multiverse\r\ndeb http://archive.ubuntu.com/ubuntu xenial-updates main universe multiverse\r\ndeb http://security.ubuntu.com/ubuntu xenial-security main universe multiverse\r\n```\r\n[3]\r\n```\r\nSome packages could not be installed. This may mean that you have requested an impossible situation or if you are using the unstable distribution that some required packages have not yet been created or been moved out of Incoming. The following information may help to resolve the situation: The following packages have unmet dependencies:\r\npython3-google-compute-engine : Depends: python3-distro but it is not installable\r\n```\r\n[4] https://github.com/GoogleCloudPlatform/compute-image-packages/pull/795/commits/e8b312a4bca725a7544776c10f910b7ccb435511", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/827", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/827/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/827/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/827/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/827", "id": 475933574, "node_id": "MDU6SXNzdWU0NzU5MzM1NzQ=", "number": 827, "title": "Generated /etc/boto.cfg should use non-numeric project ID", "user": {"login": "houglum", "id": 14894525, "node_id": "MDQ6VXNlcjE0ODk0NTI1", "avatar_url": "https://avatars0.githubusercontent.com/u/14894525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houglum", "html_url": "https://github.com/houglum", "followers_url": "https://api.github.com/users/houglum/followers", "following_url": "https://api.github.com/users/houglum/following{/other_user}", "gists_url": "https://api.github.com/users/houglum/gists{/gist_id}", "starred_url": "https://api.github.com/users/houglum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houglum/subscriptions", "organizations_url": "https://api.github.com/users/houglum/orgs", "repos_url": "https://api.github.com/users/houglum/repos", "events_url": "https://api.github.com/users/houglum/events{/privacy}", "received_events_url": "https://api.github.com/users/houglum/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-01T23:39:37Z", "updated_at": "2019-08-31T02:37:33Z", "closed_at": "2019-08-31T02:37:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The /etc/boto.cfg file that gets generated during instance configuration should use the project's ID, not its project number, for the `default_project_id` attribute under the `[GSUtil]` section of the config.  Most gsutil integration tests (i.e. requester-pays functionality, KMS key functionality, and other commands that require fetching the GCS_owned service account for the default project) fail when you use the project's number, as this value gets substituted into a URL where GCS expects the project ID, not the project number.  We get around this in our release tests by overriding the `default_project_id` attribute in the `$HOME/.boto` file, but we shouldn't require this manual step for our users.\r\n\r\nAs this attribute is under the `[GSUtil]` section of the config, no other programs should be relying on it, and we've tested that it's safe to change this by using our test projects' IDs instead of their numbers during gsutil prerelease testing.  If you know of any edge cases where other programs are relying on this value, please list them in this issue.  Otherwise, I'll send a PR shortly to make the generated config contain the project ID.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/824", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/824/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/824/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/824/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/824", "id": 475858056, "node_id": "MDU6SXNzdWU0NzU4NTgwNTY=", "number": 824, "title": "Very slow Docker builds when oslogin is enabled", "user": {"login": "martinraison", "id": 2560662, "node_id": "MDQ6VXNlcjI1NjA2NjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/2560662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinraison", "html_url": "https://github.com/martinraison", "followers_url": "https://api.github.com/users/martinraison/followers", "following_url": "https://api.github.com/users/martinraison/following{/other_user}", "gists_url": "https://api.github.com/users/martinraison/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinraison/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinraison/subscriptions", "organizations_url": "https://api.github.com/users/martinraison/orgs", "repos_url": "https://api.github.com/users/martinraison/repos", "events_url": "https://api.github.com/users/martinraison/events{/privacy}", "received_events_url": "https://api.github.com/users/martinraison/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-01T19:48:27Z", "updated_at": "2019-08-31T02:37:50Z", "closed_at": "2019-08-31T02:37:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I observed this surprising behavior today:\r\n\r\n1) log into a machine with OS Login enabled\r\n\r\n2) try to build a docker image that uses a non-root user, for example with the following instructions in the Dockerfile:\r\n\r\n```\r\nFROM ubuntu:16.04\r\n\r\nRUN adduser --disabled-password --gecos '' --shell /bin/bash user\r\nUSER user\r\n\r\n[...install programs, move files around, do some regular Dockerfile stuff...]\r\n```\r\n\r\n3) the resulting build is *extremely* slow\r\n\r\nUsing `strace` on the host's `dockerd` during the build, I saw many syscalls trying to access files *inside the container* (I'm not familiar at all with how Docker/OverlayFS handle this). I was able to see that many of those file accesses trigger a request to http://metadata.google.internal/computeMetadata/v1/oslogin/users?uid=1000, which returns a 404 Not Found. This is likely because the OS Login system doesn't know anything about uid 1000, since it's a user created inside of the Docker container.\r\n\r\nBy using the default \"root\" user in the container instead of switching to a custom user, the problem disappeared.\r\n\r\nI can't really decide if this is a more of an OS Login or Docker issue, but I thought you should be aware of this.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/820", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/820/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/820/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/820/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/820", "id": 474878641, "node_id": "MDU6SXNzdWU0NzQ4Nzg2NDE=", "number": 820, "title": "Re-enable boto setup on python3 but remove plugin line", "user": {"login": "zmarano", "id": 4564273, "node_id": "MDQ6VXNlcjQ1NjQyNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4564273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zmarano", "html_url": "https://github.com/zmarano", "followers_url": "https://api.github.com/users/zmarano/followers", "following_url": "https://api.github.com/users/zmarano/following{/other_user}", "gists_url": "https://api.github.com/users/zmarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/zmarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zmarano/subscriptions", "organizations_url": "https://api.github.com/users/zmarano/orgs", "repos_url": "https://api.github.com/users/zmarano/repos", "events_url": "https://api.github.com/users/zmarano/events{/privacy}", "received_events_url": "https://api.github.com/users/zmarano/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 50489233, "node_id": "MDU6TGFiZWw1MDQ4OTIzMw==", "url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "zmarano", "id": 4564273, "node_id": "MDQ6VXNlcjQ1NjQyNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4564273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zmarano", "html_url": "https://github.com/zmarano", "followers_url": "https://api.github.com/users/zmarano/followers", "following_url": "https://api.github.com/users/zmarano/following{/other_user}", "gists_url": "https://api.github.com/users/zmarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/zmarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zmarano/subscriptions", "organizations_url": "https://api.github.com/users/zmarano/orgs", "repos_url": "https://api.github.com/users/zmarano/repos", "events_url": "https://api.github.com/users/zmarano/events{/privacy}", "received_events_url": "https://api.github.com/users/zmarano/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zmarano", "id": 4564273, "node_id": "MDQ6VXNlcjQ1NjQyNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4564273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zmarano", "html_url": "https://github.com/zmarano", "followers_url": "https://api.github.com/users/zmarano/followers", "following_url": "https://api.github.com/users/zmarano/following{/other_user}", "gists_url": "https://api.github.com/users/zmarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/zmarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zmarano/subscriptions", "organizations_url": "https://api.github.com/users/zmarano/orgs", "repos_url": "https://api.github.com/users/zmarano/repos", "events_url": "https://api.github.com/users/zmarano/events{/privacy}", "received_events_url": "https://api.github.com/users/zmarano/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-31T00:23:00Z", "updated_at": "2019-08-02T16:18:24Z", "closed_at": "2019-08-02T16:18:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For standalone gsutil installs (not the included gcloud installed gsutil) the boto config file is needed but without the problematic plugin which breaks on python3 systems. We can instead just write the rest of the boto config file and drop the plugin.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/819", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/819/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/819/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/819/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/819", "id": 474846542, "node_id": "MDU6SXNzdWU0NzQ4NDY1NDI=", "number": 819, "title": "Enabling 2-factor on RHEL8 results in SSHD crashes", "user": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 50489233, "node_id": "MDU6TGFiZWw1MDQ4OTIzMw==", "url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 1476872877, "node_id": "MDU6TGFiZWwxNDc2ODcyODc3", "url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/labels/feature/oslogin", "name": "feature/oslogin", "color": "2d55e5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-30T22:15:39Z", "updated_at": "2019-07-31T23:16:12Z", "closed_at": "2019-07-31T23:16:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The trace of the crash indicates we might have some double free condition:\r\n```\r\nJul 30 22:10:16 rhel-8 systemd-coredump[20146]: Process 20142 (sshd) of user 0 dumped core.\r\n                                                \r\n                                                Stack trace of thread 20142:\r\n                                                #0  0x00007f7bebaae93f raise (libc.so.6)\r\n                                                #1  0x00007f7beba98c95 abort (libc.so.6)\r\n                                                #2  0x00007f7beba98b69 __assert_fail_base.cold.0 (libc.so.6)\r\n                                                #3  0x00007f7bebaa6df6 __assert_fail (libc.so.6)\r\n                                                #4  0x00007f7be78839b2 json_object_put (libjson-c.so.4)\r\n                                                #5  0x00007f7be7889391 lh_table_free (libjson-c.so.4)\r\n                                                #6  0x00007f7be7883561 json_object_object_delete (libjson-c.so.4)\r\n                                                #7  0x00007f7be788397a json_object_put (libjson-c.so.4)\r\n                                                #8  0x00007f7be7d8c9c1 _ZN13oslogin_utils12StartSessionERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPS5_ (pam_oslogin_login.so)\r\n                                                #9  0x00007f7be7d870b0 pam_sm_authenticate (pam_oslogin_login.so)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/817", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/817/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/817/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/817/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/817", "id": 474195275, "node_id": "MDU6SXNzdWU0NzQxOTUyNzU=", "number": 817, "title": "User's home directory not being deleted after user's account is deleted from OS-Login", "user": {"login": "yuanzhou", "id": 195873, "node_id": "MDQ6VXNlcjE5NTg3Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/195873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuanzhou", "html_url": "https://github.com/yuanzhou", "followers_url": "https://api.github.com/users/yuanzhou/followers", "following_url": "https://api.github.com/users/yuanzhou/following{/other_user}", "gists_url": "https://api.github.com/users/yuanzhou/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuanzhou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuanzhou/subscriptions", "organizations_url": "https://api.github.com/users/yuanzhou/orgs", "repos_url": "https://api.github.com/users/yuanzhou/repos", "events_url": "https://api.github.com/users/yuanzhou/events{/privacy}", "received_events_url": "https://api.github.com/users/yuanzhou/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-29T18:33:58Z", "updated_at": "2019-09-03T18:05:39Z", "closed_at": "2019-09-03T18:05:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently I'm managing users/groups via Google Cloud Identity. And I've noticed that if I delete a user from the Google Admin Console, the user's os-login will be disabled. But since this user has logged into the VM instances, the user's home directory is still on the VMs. And I had to manually delete that Linux user account to remove it from the whole system. \r\n\r\nI tried to delete the user account and home directory but got this:\r\n\r\n````\r\n[root@midas-hpc-login1 home]# userdel -r demo_user_midasnetwork_us\r\nuserdel: cannot remove entry 'demo_user_midasnetwork_us' from /etc/passwd\r\n````\r\nApparently the user won't be in `/etc/passwd` . So I just manually removed the user's home directory using \r\n````\r\n[root@midas-hpc-login1 home]# rm -rf demo_user_midasnetwork_us/\r\n````\r\n\r\nIs what I did above the correct procedure?\r\n\r\nAnd I looked at the [`gcloud compute os-login remove-profile`](https://cloud.google.com/sdk/gcloud/reference/compute/os-login/remove-profile), but couldn't get this work.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/815", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/815/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/815/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/815/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/815", "id": 474160042, "node_id": "MDU6SXNzdWU0NzQxNjAwNDI=", "number": 815, "title": "google-startup-scripts should run BEFORE systemd apt-daily runs", "user": {"login": "bvandewalle", "id": 69793, "node_id": "MDQ6VXNlcjY5Nzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/69793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bvandewalle", "html_url": "https://github.com/bvandewalle", "followers_url": "https://api.github.com/users/bvandewalle/followers", "following_url": "https://api.github.com/users/bvandewalle/following{/other_user}", "gists_url": "https://api.github.com/users/bvandewalle/gists{/gist_id}", "starred_url": "https://api.github.com/users/bvandewalle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bvandewalle/subscriptions", "organizations_url": "https://api.github.com/users/bvandewalle/orgs", "repos_url": "https://api.github.com/users/bvandewalle/repos", "events_url": "https://api.github.com/users/bvandewalle/events{/privacy}", "received_events_url": "https://api.github.com/users/bvandewalle/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-07-29T17:06:31Z", "updated_at": "2019-09-17T20:01:57Z", "closed_at": "2019-09-17T20:01:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a startup script which installs a couple packages using apt.\r\nThis errors everytime at startup with:\r\n```\r\nINFO startup-script: E: Could not get lock /var/lib/apt/lists/lock - open (11: Resource temporarily unavailable)\r\nINFO startup-script: E: Unable to lock directory /var/lib/apt/lists/\r\n```\r\n\r\nIt seems to conflicts with the apt-daily systemd tasks that already took a lock on apt.\r\n\r\nThis has been solved for Cloud-init:\r\nhttps://bugs.launchpad.net/cloud-init/+bug/1693361\r\n\r\nHow can we do this on GCE image? Could this similarly be fixed with the same solution as cloud-init? : \r\n```\r\ngoogle-startup-scripts should declare itself\r\nBefore=apt-daily.service / apt-daily.timer, so that google-startup-scripts takes\r\nprecedence over apt-daily on first boot.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/814", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/814/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/814/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/814/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/814", "id": 473500471, "node_id": "MDU6SXNzdWU0NzM1MDA0NzE=", "number": 814, "title": "User home directory permission issue", "user": {"login": "yuanzhou", "id": 195873, "node_id": "MDQ6VXNlcjE5NTg3Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/195873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuanzhou", "html_url": "https://github.com/yuanzhou", "followers_url": "https://api.github.com/users/yuanzhou/followers", "following_url": "https://api.github.com/users/yuanzhou/following{/other_user}", "gists_url": "https://api.github.com/users/yuanzhou/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuanzhou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuanzhou/subscriptions", "organizations_url": "https://api.github.com/users/yuanzhou/orgs", "repos_url": "https://api.github.com/users/yuanzhou/repos", "events_url": "https://api.github.com/users/yuanzhou/events{/privacy}", "received_events_url": "https://api.github.com/users/yuanzhou/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-07-26T19:20:07Z", "updated_at": "2019-08-31T02:24:06Z", "closed_at": "2019-08-31T02:24:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm managing the users and groups via Google Cloud Identity. And on GCP I assigned roles to the user groups created on Google Admin Console so I don't have to manually add new members on GCP IAM individually. The problem I'm having now is subdirectories for specific users are created as they log in via OS Login for the first time. But the home directory of each user is set to \"drwxr-xr-x.\", which can be accessed by other users from other groups. I checked the UMASK is 077 in the `/etc/login.defs`, which should be good. \r\n\r\nHow should I control the access permission between user home directories to prevent users from messing up others' home directories?\r\n\r\nThe hard to do part is the user's home directory is only created the first time they login via OS Login.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/813", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/813/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/813/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/813/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/813", "id": 472345549, "node_id": "MDU6SXNzdWU0NzIzNDU1NDk=", "number": 813, "title": "Issues sizing GCP instances with RedHat 8", "user": {"login": "afernandezody", "id": 44442767, "node_id": "MDQ6VXNlcjQ0NDQyNzY3", "avatar_url": "https://avatars1.githubusercontent.com/u/44442767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afernandezody", "html_url": "https://github.com/afernandezody", "followers_url": "https://api.github.com/users/afernandezody/followers", "following_url": "https://api.github.com/users/afernandezody/following{/other_user}", "gists_url": "https://api.github.com/users/afernandezody/gists{/gist_id}", "starred_url": "https://api.github.com/users/afernandezody/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afernandezody/subscriptions", "organizations_url": "https://api.github.com/users/afernandezody/orgs", "repos_url": "https://api.github.com/users/afernandezody/repos", "events_url": "https://api.github.com/users/afernandezody/events{/privacy}", "received_events_url": "https://api.github.com/users/afernandezody/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-24T15:21:46Z", "updated_at": "2019-07-30T18:01:34Z", "closed_at": "2019-07-30T18:01:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello. I've been spinning up instances on GCP without any issue until a couple of days ago. The problem appears when I select RedHat 8 as the OS as the deployment doesn't resize the hard drive to the input parameter (e.g. 40 GB). No matter which combination of machine and region, the system deploys the instance with the default size (i.e. 10 GB), which is insufficient for most applications. Someone suggested that the problem is related to a known problem and provided me with this link. I'm wondering if anyone has more insight on this issue or knows how to circumvent it? The outputs from the fdisk and df commands are provided below. Thanks. \r\n```\r\n#sudo fdisk -l\r\nDisk /dev/sda: 40 GiB, 42949672960 bytes, 83886080 sectors\r\nUnits: sectors of 1 * 512 = 512 bytes\r\nSector size (logical/physical): 512 bytes / 4096 bytes\r\nI/O size (minimum/optimal): 4096 bytes / 4096 bytes\r\nDisklabel type: dos\r\nDisk identifier: 0x45fed8bf\r\n\r\n#sudo df\r\nFilesystem     1K-blocks    Used Available Use% Mounted on\r\ndevtmpfs         1793080       0   1793080   0% /dev\r\ntmpfs            1806916       0   1806916   0% /dev/shm\r\ntmpfs            1806916    8504   1798412   1% /run\r\ntmpfs            1806916       0   1806916   0% /sys/fs/cgroup\r\n/dev/sda1       10474496 2015776   8458720  20% /\r\ntmpfs             361380       0    361380   0% /run/user/1000\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/806", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/806/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/806/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/806/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/806", "id": 466422168, "node_id": "MDU6SXNzdWU0NjY0MjIxNjg=", "number": 806, "title": "Disk expand broken for 2TB+ disks", "user": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 50489233, "node_id": "MDU6TGFiZWw1MDQ4OTIzMw==", "url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-10T17:07:13Z", "updated_at": "2020-05-06T17:23:18Z", "closed_at": "2020-05-06T17:23:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We expand the partition by modifying the existing partition table if the root partition is the last partition on disk. In the case of msdos partitions, resizing to >2TB will cause a broken disk.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/801", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/801/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/801/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/801/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/801", "id": 464700395, "node_id": "MDU6SXNzdWU0NjQ3MDAzOTU=", "number": 801, "title": "google_metadata_script_runner fails with u'\\u2019' characters", "user": {"login": "uberspot", "id": 237927, "node_id": "MDQ6VXNlcjIzNzkyNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/237927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uberspot", "html_url": "https://github.com/uberspot", "followers_url": "https://api.github.com/users/uberspot/followers", "following_url": "https://api.github.com/users/uberspot/following{/other_user}", "gists_url": "https://api.github.com/users/uberspot/gists{/gist_id}", "starred_url": "https://api.github.com/users/uberspot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uberspot/subscriptions", "organizations_url": "https://api.github.com/users/uberspot/orgs", "repos_url": "https://api.github.com/users/uberspot/repos", "events_url": "https://api.github.com/users/uberspot/events{/privacy}", "received_events_url": "https://api.github.com/users/uberspot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 50489233, "node_id": "MDU6TGFiZWw1MDQ4OTIzMw==", "url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-07-05T16:01:32Z", "updated_at": "2019-07-31T23:47:41Z", "closed_at": "2019-07-31T23:47:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "As taken from `/var/log/messages` from \r\n```\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: File \"/usr/bin/google_metadata_script_runner\", line 9, in <module>\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: load_entry_point('google-compute-engine==2.8.16', 'console_scripts', 'google_metadata_script_runner')()\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: File \"/usr/lib/python2.7/site-packages/google_compute_engine/metadata_scripts/script_manager.py\", line 109, in main\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: debug=bool(options.debug))\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: File \"/usr/lib/python2.7/site-packages/google_compute_engine/metadata_scripts/script_manager.py\", line 69, in __init__\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: self._RunScripts(run_dir=run_dir)\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: File \"/usr/lib/python2.7/site-packages/google_compute_engine/metadata_scripts/script_manager.py\", line 80, in _RunScripts\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: script_dict = self.retriever.GetScripts(dest_dir)\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: File \"/usr/lib/python2.7/site-packages/google_compute_engine/metadata_scripts/script_retriever.py\", line 256, in GetScripts\r\nJul  5 15:49:24 testinstance google-clock-skew: INFO Starting Google Clock Skew daemon.\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: return (self._GetAttributeScripts(instance_data, dest_dir)\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: File \"/usr/lib/python2.7/site-packages/google_compute_engine/metadata_scripts/script_retriever.py\", line 219, in _GetAttributeScripts\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: dest.write(metadata_value.lstrip())\r\nJul  5 15:49:24 testinstance google_metadata_script_runner: UnicodeEncodeError: 'ascii' codec can't encode character u'\\u2019' in position 2478: ordinal not in range(128)\r\n\r\n```\r\n\r\n```\r\nuname -a\r\nLinux testinstance 3.10.0-957.21.3.el7.x86_64 #1 SMP Tue Jun 18 16:35:19 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n```\r\n\r\nbased on the `gce-uefi-images/centos-7` gcp image. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/797", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/797/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/797/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/797/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/797", "id": 456340957, "node_id": "MDU6SXNzdWU0NTYzNDA5NTc=", "number": 797, "title": "RAM usage", "user": {"login": "Dmole", "id": 1793802, "node_id": "MDQ6VXNlcjE3OTM4MDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1793802?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dmole", "html_url": "https://github.com/Dmole", "followers_url": "https://api.github.com/users/Dmole/followers", "following_url": "https://api.github.com/users/Dmole/following{/other_user}", "gists_url": "https://api.github.com/users/Dmole/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dmole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dmole/subscriptions", "organizations_url": "https://api.github.com/users/Dmole/orgs", "repos_url": "https://api.github.com/users/Dmole/repos", "events_url": "https://api.github.com/users/Dmole/events{/privacy}", "received_events_url": "https://api.github.com/users/Dmole/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-14T16:44:13Z", "updated_at": "2019-08-31T02:40:38Z", "closed_at": "2019-08-31T02:40:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Python it to heavy.\r\ncompute-image-packages uses 12% of a small instances RAM.\r\nPort to bash or rust.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/789", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/789/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/789/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/789/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/789", "id": 454689814, "node_id": "MDU6SXNzdWU0NTQ2ODk4MTQ=", "number": 789, "title": "scripts fail to run on centos 6", "user": {"login": "aflat", "id": 757180, "node_id": "MDQ6VXNlcjc1NzE4MA==", "avatar_url": "https://avatars1.githubusercontent.com/u/757180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aflat", "html_url": "https://github.com/aflat", "followers_url": "https://api.github.com/users/aflat/followers", "following_url": "https://api.github.com/users/aflat/following{/other_user}", "gists_url": "https://api.github.com/users/aflat/gists{/gist_id}", "starred_url": "https://api.github.com/users/aflat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aflat/subscriptions", "organizations_url": "https://api.github.com/users/aflat/orgs", "repos_url": "https://api.github.com/users/aflat/repos", "events_url": "https://api.github.com/users/aflat/events{/privacy}", "received_events_url": "https://api.github.com/users/aflat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-06-11T13:25:49Z", "updated_at": "2019-06-11T17:14:03Z", "closed_at": "2019-06-11T16:49:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Centos 6.8, python-google-compute-engine installed via yum. \r\nVersion: python-google-compute-engine.noarch 0:2.8.16-1.el6\r\n\r\n[bin]# /opt/rh/python27/root/usr/bin/python2 --version\r\n/opt/rh/python27/root/usr/bin/python2: error while loading shared libraries: libpython2.7.so.1.0: cannot open shared object file: No such file or directory\r\n\r\nThis is due to the python compile. I haven't tracked down in the sources here where that gets done(if it does in this repo) but I know the lib can't be found if you don't have python 2.7 installed. Centos 6.8 has python 2.6.6 by default. To get around this, when you compile python for virtualenv you need to add this to the configure line:\r\n```\r\n--enable-shared LDFLAGS='-Wl,-rpath,\\$${ORIGIN}/../lib -Wl,-rpath,\\$${ORIGIN}/../usr/lib'\r\n```\r\nMultiple SO solutions as well\r\nhttps://stackoverflow.com/questions/20842732/libpython2-7-so-1-0-cannot-open-shared-object-file-no-such-file-or-directory\r\nhttps://stackoverflow.com/questions/1099981/why-cant-python-find-shared-objects-that-are-in-directories-in-sys-path/1100297#1100297\r\n\r\nIf your not compiling python, doesn't look like that happens, but again, my search foo is sucking, an alternative is described in the second SO answer\r\n\r\n```\r\npython setup.py build_ext --rpath=/opt/rh/python27/root/usr/lib64\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/783", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/783/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/783/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/783/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/783", "id": 451346077, "node_id": "MDU6SXNzdWU0NTEzNDYwNzc=", "number": 783, "title": "/lib/udev/rules.d/99-gce.rules tries to apply 'scheduler=none' to partitions", "user": {"login": "kkm000", "id": 8228229, "node_id": "MDQ6VXNlcjgyMjgyMjk=", "avatar_url": "https://avatars3.githubusercontent.com/u/8228229?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkm000", "html_url": "https://github.com/kkm000", "followers_url": "https://api.github.com/users/kkm000/followers", "following_url": "https://api.github.com/users/kkm000/following{/other_user}", "gists_url": "https://api.github.com/users/kkm000/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkm000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkm000/subscriptions", "organizations_url": "https://api.github.com/users/kkm000/orgs", "repos_url": "https://api.github.com/users/kkm000/repos", "events_url": "https://api.github.com/users/kkm000/events{/privacy}", "received_events_url": "https://api.github.com/users/kkm000/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-03T08:07:09Z", "updated_at": "2019-08-31T02:41:43Z", "closed_at": "2019-08-31T02:41:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is fairly minor. Maybe I'm reporting this to a wrong repo, because this file is not there, but a search for `filename:99-gce.rules` yields no results on GitHub at all, so maybe you could please buganize (oops, I just verbed a noun) that to whoever owns this file internally? This file exists in the `--image=ubuntu-1804-bionic-v20190514 --image-project=gce-uefi-images`:\r\n```\r\nroot@toy-sec-1:~# cat /lib/udev/rules.d/99-gce.rules\r\n# Give syslog write access to the kernel logs\r\nKERNEL==\"console\", GROUP=\"syslog\", MODE=\"0620\"\r\n\r\n# Switch to using NOOP as the default scheduler per GCE request\r\nSUBSYSTEM==\"block\", ACTION==\"add|change\", ENV{ID_VENDOR}==\"*Google*\", ATTR{queue/scheduler}=\"noop\"\r\n```\r\nand the last rule causes these messages logged during boot:\r\n```\r\nJun  3 04:46:49 toy-sec-1 systemd-udevd[1442]: error opening ATTR{/sys/devices/pci0000:00/0000:00:03.0/virtio0/host0/target0:0:1/0:0:1:0/block/sda/sda1/queue/scheduler} for writing: No such file or directory\r\nJun  3 04:46:49 toy-sec-1 systemd-udevd[1438]: error opening ATTR{/sys/devices/pci0000:00/0000:00:03.0/virtio0/host0/target0:0:1/0:0:1:0/block/sda/sda15/queue/scheduler} for writing: No such file or directory\r\nJun  3 04:46:49 toy-sec-1 systemd-udevd[1437]: error opening ATTR{/sys/devices/pci0000:00/0000:00:03.0/virtio0/host0/target0:0:1/0:0:1:0/block/sda/sda14/queue/scheduler} for writing: No such file or directory\r\n```\r\nThe issue can be also reproduced by running any tool that accesses raw disk, e. g. `parted`: start parted, and all 3 messages are logged; hit ^D to exit, they are logged again.\r\n\r\nThis error is entirely harmless, but *just not right*. The reason for the error is partition devices, of course, do not have a `queue/scheduler`, only disks do (the `/block/sda/sda1` part of the path). Unfortunately, I do not know what DEVTYPEs can be there in the block subsystem to apply a positive match, but I am sure that excluding partitions in the rule condition would be conservative enough to fix this without breaking anything, like this:\r\n```\r\nSUBSYSTEM==\"block\", ENV{DEVTYPE}!=\"partition\", ACTION==\"add|change\", ENV{ID_VENDOR}==\"*Google*\", ATTR{queue/scheduler}=\"noop\"\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/780", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/780/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/780/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/780/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/780", "id": 447346793, "node_id": "MDU6SXNzdWU0NDczNDY3OTM=", "number": 780, "title": "FreeBSD service command does not output \"unrecognized\"", "user": {"login": "meangrape", "id": 9083, "node_id": "MDQ6VXNlcjkwODM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meangrape", "html_url": "https://github.com/meangrape", "followers_url": "https://api.github.com/users/meangrape/followers", "following_url": "https://api.github.com/users/meangrape/following{/other_user}", "gists_url": "https://api.github.com/users/meangrape/gists{/gist_id}", "starred_url": "https://api.github.com/users/meangrape/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meangrape/subscriptions", "organizations_url": "https://api.github.com/users/meangrape/orgs", "repos_url": "https://api.github.com/users/meangrape/repos", "events_url": "https://api.github.com/users/meangrape/events{/privacy}", "received_events_url": "https://api.github.com/users/meangrape/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-22T21:16:09Z", "updated_at": "2019-05-22T22:19:28Z", "closed_at": "2019-05-22T22:19:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "[google_oslogin_control](https://github.com/GoogleCloudPlatform/compute-image-packages/blob/master/packages/google-compute-engine-oslogin/bin/google_oslogin_control) uses \"unrecognized\" to determine if a service exists. FreeBSD does not output this string; instead (for the mythical `bob` service) it outputs\r\n```\r\nbob does not exist in /etc/rc.d or the local startup\r\ndirectories (/usr/local/etc/rc.d), or is not executable\r\n```\r\nThe impact of this is that the attempt to restart a non-existent service fails triggering a roll back of all the changes made.\r\n\r\nThe [line](https://github.com/GoogleCloudPlatform/compute-image-packages/blob/d2d59253ad3bd219b2834fa6c2fa5b4d2cce4ecc/packages/google-compute-engine-oslogin/bin/google_oslogin_control#L286) is:\r\n```shell\r\n if ! service \"$service\" status 2>&1 | grep -q unrecognized; then\r\n```\r\nA fix is to use a `grep` invocation that relies on a regex instead of a straight text match.\r\n```shell\r\nif ! service \"$service\" status 2>&1 | grep -Eq \"unrecognized|does not exist\"; then\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/777", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/777/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/777/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/777/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/777", "id": 447302820, "node_id": "MDU6SXNzdWU0NDczMDI4MjA=", "number": 777, "title": "The FreeBSD sudoers.d directory is under /usr/local", "user": {"login": "meangrape", "id": 9083, "node_id": "MDQ6VXNlcjkwODM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meangrape", "html_url": "https://github.com/meangrape", "followers_url": "https://api.github.com/users/meangrape/followers", "following_url": "https://api.github.com/users/meangrape/following{/other_user}", "gists_url": "https://api.github.com/users/meangrape/gists{/gist_id}", "starred_url": "https://api.github.com/users/meangrape/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meangrape/subscriptions", "organizations_url": "https://api.github.com/users/meangrape/orgs", "repos_url": "https://api.github.com/users/meangrape/repos", "events_url": "https://api.github.com/users/meangrape/events{/privacy}", "received_events_url": "https://api.github.com/users/meangrape/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-22T19:23:31Z", "updated_at": "2019-05-22T20:26:45Z", "closed_at": "2019-05-22T20:26:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "In [`google_oslogin_control`](https://github.com/GoogleCloudPlatform/compute-image-packages/blob/master/packages/google-compute-engine-oslogin/bin/google_oslogin_control) there is a variable assignment identifying where the directory that the custom `google-oslogin` file should be created.\r\n```shell\r\nsudoers_file=\"/etc/sudoers.d/google-oslogin\"\r\n```\r\n\r\nA fix is to move the `is_freebsd` function above the initial variable assignments and include a conditional like so:\r\n```shell\r\n\r\n+is_freebsd() {\r\n+  [ \"$(uname)\" = \"FreeBSD\" ]\r\n+  return $?\r\n+}\r\n\r\nnss_config=\"/etc/nsswitch.conf\"\r\npam_config=\"/etc/pam.d/sshd\"\r\nsshd_config=\"/etc/ssh/sshd_config\"\r\nsudoers_dir=\"/var/google-sudoers.d\"\r\nusers_dir=\"/var/google-users.d\"\r\nsudoers_file=\"/etc/sudoers.d/google-oslogin\"\r\n+if is_freebsd; then\r\n+  sudoers_file=\"/usr/local/etc/sudoers.d/google-oslogin\"\r\n+fi\r\nadded_comment=\"# Added by Google Compute Engine OS Login.\"\r\nsshd_block=\"#### Google OS Login control. Do not edit this section. ####\"\r\nsshd_end_block=\"#### End Google OS Login control section. ####\"\r\n\r\n-is_freebsd() {\r\n-  [ \"$(uname)\" = \"FreeBSD\" ]\r\n-  return $?\r\n-}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/776", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/776/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/776/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/776/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/776", "id": 447286268, "node_id": "MDU6SXNzdWU0NDcyODYyNjg=", "number": 776, "title": "/bin/echo -e is not portable", "user": {"login": "meangrape", "id": 9083, "node_id": "MDQ6VXNlcjkwODM=", "avatar_url": "https://avatars3.githubusercontent.com/u/9083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meangrape", "html_url": "https://github.com/meangrape", "followers_url": "https://api.github.com/users/meangrape/followers", "following_url": "https://api.github.com/users/meangrape/following{/other_user}", "gists_url": "https://api.github.com/users/meangrape/gists{/gist_id}", "starred_url": "https://api.github.com/users/meangrape/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meangrape/subscriptions", "organizations_url": "https://api.github.com/users/meangrape/orgs", "repos_url": "https://api.github.com/users/meangrape/repos", "events_url": "https://api.github.com/users/meangrape/events{/privacy}", "received_events_url": "https://api.github.com/users/meangrape/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-22T18:41:00Z", "updated_at": "2019-05-22T20:26:29Z", "closed_at": "2019-05-22T20:26:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[`google_oslogin_control`](https://github.com/GoogleCloudPlatform/compute-image-packages/blob/master/packages/google-compute-engine-oslogin/bin/google_oslogin_control)  executes:\r\n\r\n[`/bin/echo -e \"\\n\\n${sshd_block}\\n${sshd_end_block}\" >> \"$sshd_config\"`](https://github.com/GoogleCloudPlatform/compute-image-packages/blob/d2d59253ad3bd219b2834fa6c2fa5b4d2cce4ecc/packages/google-compute-engine-oslogin/bin/google_oslogin_control#L100)\r\n\r\nThe `-e` flag exists on the Linux version of `/bin/echo` but does not in the FreeBSD version.\r\n\r\nThe most straight-forward fix that preserves this exact behavior would be:\r\n```shell\r\nprintf \"\\n\\n${sshd_block}\\n${sshd_end_block}\" >> \"$sshd_config\"\r\n```\r\nAll POSIX-compliant shells include `printf`. Its behavior doesn't vary across platforms that I'm aware of.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/769", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/769/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/769/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/769/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/769", "id": 444499578, "node_id": "MDU6SXNzdWU0NDQ0OTk1Nzg=", "number": 769, "title": "Provide RHEL 8 RPM packages", "user": {"login": "LokiSharp", "id": 2725648, "node_id": "MDQ6VXNlcjI3MjU2NDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/2725648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LokiSharp", "html_url": "https://github.com/LokiSharp", "followers_url": "https://api.github.com/users/LokiSharp/followers", "following_url": "https://api.github.com/users/LokiSharp/following{/other_user}", "gists_url": "https://api.github.com/users/LokiSharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/LokiSharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LokiSharp/subscriptions", "organizations_url": "https://api.github.com/users/LokiSharp/orgs", "repos_url": "https://api.github.com/users/LokiSharp/repos", "events_url": "https://api.github.com/users/LokiSharp/events{/privacy}", "received_events_url": "https://api.github.com/users/LokiSharp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-15T15:19:20Z", "updated_at": "2019-05-22T00:13:56Z", "closed_at": "2019-05-22T00:13:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/743", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/743/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/743/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/743/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/743", "id": 420132042, "node_id": "MDU6SXNzdWU0MjAxMzIwNDI=", "number": 743, "title": "LICENSE file location after changing the git repo layout", "user": {"login": "lucaskanashiro", "id": 2944544, "node_id": "MDQ6VXNlcjI5NDQ1NDQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/2944544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucaskanashiro", "html_url": "https://github.com/lucaskanashiro", "followers_url": "https://api.github.com/users/lucaskanashiro/followers", "following_url": "https://api.github.com/users/lucaskanashiro/following{/other_user}", "gists_url": "https://api.github.com/users/lucaskanashiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucaskanashiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucaskanashiro/subscriptions", "organizations_url": "https://api.github.com/users/lucaskanashiro/orgs", "repos_url": "https://api.github.com/users/lucaskanashiro/repos", "events_url": "https://api.github.com/users/lucaskanashiro/events{/privacy}", "received_events_url": "https://api.github.com/users/lucaskanashiro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-03-12T18:06:56Z", "updated_at": "2019-03-13T16:30:06Z", "closed_at": "2019-03-13T16:30:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "After changing the git repo layout the `LICENSE` file is available only in `packages/python-google-compute-engine`. Most of the code base is licensed under Apache-2.0, could we move this `LICENSE` file to the root of the repo?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/740", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/740/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/740/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/740/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/740", "id": 417921407, "node_id": "MDU6SXNzdWU0MTc5MjE0MDc=", "number": 740, "title": "PR #739 replaced packages without bumping version number", "user": {"login": "ahayworth", "id": 1781907, "node_id": "MDQ6VXNlcjE3ODE5MDc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1781907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahayworth", "html_url": "https://github.com/ahayworth", "followers_url": "https://api.github.com/users/ahayworth/followers", "following_url": "https://api.github.com/users/ahayworth/following{/other_user}", "gists_url": "https://api.github.com/users/ahayworth/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahayworth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahayworth/subscriptions", "organizations_url": "https://api.github.com/users/ahayworth/orgs", "repos_url": "https://api.github.com/users/ahayworth/repos", "events_url": "https://api.github.com/users/ahayworth/events{/privacy}", "received_events_url": "https://api.github.com/users/ahayworth/received_events", "type": "User", "site_admin": true}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-03-06T17:22:55Z", "updated_at": "2019-08-31T02:44:04Z", "closed_at": "2019-08-31T02:44:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "We mirror the google compute engine repo internally, and our mirror sync system ([aptly](https://www.aptly.info/)) has been complaining for several days about sync problems. The latest error is:\r\n\r\n> aptly-sync.err:ERROR: unable to import: conflict in package python-google-compute-engine_2.8.13-1_all\r\n\r\nIt looks like #739 brought in changes to the `python-google-compute-engine` package, but did not bump its version number. The sha256sum is different for each package:\r\n_Downloaded today from packages.cloud.google.com:_\r\n```bash\r\n[Wed Mar 06 10:26] ahayworth@zordon:~/Downloads\r\n$ sha256sum python-google-compute-engine_2.8.13-1_all_413a0823afc8d3a0afea286dbc173796bbc45fe91bd75653007b426ab369b15b.deb\r\n413a0823afc8d3a0afea286dbc173796bbc45fe91bd75653007b426ab369b15b  python-google-compute-engine_2.8.13-1_all_413a0823afc8d3a0afea286dbc173796bbc45fe91bd75653007b426ab369b15b.deb\r\n```\r\n\r\n_Last internally synced copy:_\r\n```bash\r\nahayworth@[pkg server] /data/aptly $ sha256sum ./google-compute-engine-stretch/public/google-compute-engine-stretch/pool/main/g/google-compute-image-packages/python-google-compute-engine_2.8.13-1_all_17ecc5b61826fc3d754e6fc0dc0e158fd1c6507e8da6f284026cb2c4d7a5c1d9.deb\r\n17ecc5b61826fc3d754e6fc0dc0e158fd1c6507e8da6f284026cb2c4d7a5c1d9  ./google-compute-engine-stretch/public/google-compute-engine-stretch/pool/main/g/google-compute-image-packages/python-google-compute-engine_2.8.13-1_all_17ecc5b61826fc3d754e6fc0dc0e158fd1c6507e8da6f284026cb2c4d7a5c1d9.deb\r\n```\r\n\r\nOf course, the package filenames include the sha256sum, so it's not really surprising. However, this is generally frowned upon by Debian maintainers, as some archive tools do not deal gracefully with this situation (even if apt clients do).\r\n\r\nWe've updated things successfully on our end, but this is more of an informational issue to let you know it caused some problems for engineers today. \ud83d\ude04 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/731", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/731/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/731/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/731/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/731", "id": 403061426, "node_id": "MDU6SXNzdWU0MDMwNjE0MjY=", "number": 731, "title": "Several scripts failing at boot on FreeBSD caused by wrong syslog socket in hardcoded config", "user": {"login": "rhclayto", "id": 13597641, "node_id": "MDQ6VXNlcjEzNTk3NjQx", "avatar_url": "https://avatars0.githubusercontent.com/u/13597641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rhclayto", "html_url": "https://github.com/rhclayto", "followers_url": "https://api.github.com/users/rhclayto/followers", "following_url": "https://api.github.com/users/rhclayto/following{/other_user}", "gists_url": "https://api.github.com/users/rhclayto/gists{/gist_id}", "starred_url": "https://api.github.com/users/rhclayto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rhclayto/subscriptions", "organizations_url": "https://api.github.com/users/rhclayto/orgs", "repos_url": "https://api.github.com/users/rhclayto/repos", "events_url": "https://api.github.com/users/rhclayto/events{/privacy}", "received_events_url": "https://api.github.com/users/rhclayto/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-25T08:56:38Z", "updated_at": "2019-03-25T17:26:23Z", "closed_at": "2019-03-25T17:26:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "These compute image packages are failing on boot on FreeBSD 11.2, Python 2.7, google-compute-engine version 2.8.6: google_instance_setup, google_clock_skew_daemon, google_accounts_daemon. Logs included below. The reason is that the logger is trying to log to a socket at `/dev/log`, but on FreeBSD, the syslog socket is at `/var/run/log`. \r\n\r\n`ln -s /var/run/log /dev/log` fixes this, but does not survive a reboot. For now I am doing this in a stratup script (or will be just after I post this, I haven't tried it yet but it should work).\r\n\r\nRelated to, but not solved by, https://github.com/GoogleCloudPlatform/compute-image-packages/issues/445 , since the FreeBSD syslog socket is in a different place than expected by the scripts. In logger.py:\r\n\r\n```python\r\nif facility:\r\n    # Create a handler for sending logs to SysLog.\r\n    syslog_handler = logging.handlers.SysLogHandler(\r\n        address='/dev/log', facility=facility)\r\n    syslog_handler.setLevel(logging.INFO)\r\n    syslog_handler.setFormatter(formatter)\r\n    logger.addHandler(syslog_handler)\r\n```\r\n\r\n```\r\nStarting google_instance_setup.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/google_instance_setup\", line 11, in <module>\r\n    load_entry_point('google-compute-engine==2.8.6', 'console_scripts', 'google_instance_setup')()\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/instance_setup/instance_setup.py\", line 214\r\n, in main\r\n    InstanceSetup(debug=bool(options.debug))\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/instance_setup/instance_setup.py\", line 46,\r\n in __init__\r\n    name='instance-setup', debug=self.debug, facility=facility)\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/logger.py\", line 49, in Logger\r\n    address='/dev/log', facility=facility)\r\n  File \"/usr/local/lib/python2.7/logging/handlers.py\", line 761, in __init__\r\n    self._connect_unixsocket(address)\r\n  File \"/usr/local/lib/python2.7/logging/handlers.py\", line 804, in _connect_unixsocket\r\n    self.socket.connect(address)\r\n  File \"/usr/local/lib/python2.7/socket.py\", line 228, in meth\r\n    return getattr(self._sock,name)(*args)\r\nsocket.error: [Errno 2] No such file or directory\r\nStarting google_clock_skew_daemon.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/google_clock_skew_daemon\", line 11, in <module>\r\n    load_entry_point('google-compute-engine==2.8.6', 'console_scripts', 'google_clock_skew_daemon')()\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/clock_skew/clock_skew_daemon.py\", line 74, \r\nin main\r\n    ClockSkewDaemon(debug=bool(options.debug))\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/clock_skew/clock_skew_daemon.py\", line 44, \r\nin __init__\r\n    name='google-clock-skew', debug=debug, facility=facility)\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/logger.py\", line 49, in Logger\r\n    address='/dev/log', facility=facility)\r\n  File \"/usr/local/lib/python2.7/logging/handlers.py\", line 761, in __init__\r\n    self._connect_unixsocket(address)\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/google_metadata_script_runner\", line 11, in <module>\r\n  File \"/usr/local/lib/python2.7/logging/handlers.py\", line 804, in _connect_unixsocket\r\n    load_entry_point('google-compute-engine==2.8.6', 'console_scripts', 'google_metadata_script_runner')()\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/metadata_scripts/script_manager.py\", line 1\r\n09, in main\r\n    self.socket.connect(address)\r\n  File \"/usr/local/lib/python2.7/socket.py\", line 228, in meth\r\n    debug=bool(options.debug))\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/metadata_scripts/script_manager.py\", line 6\r\n5, in __init__\r\n    self.logger = logger.Logger(name=name, debug=debug, facility=facility)\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/logger.py\", line 49, in Logger\r\n    return getattr(self._sock,name)(*args)\r\n    address='/dev/log', facility=facility)\r\n  File \"/usr/local/lib/python2.7/logging/handlers.py\", line 761, in __init__\r\n    self._connect_unixsocket(address)\r\n  File \"/usr/local/lib/python2.7/logging/handlers.py\", line 804, in _connect_unixsocket\r\nsocket.error: [Errno 2] No such file or directory\r\nStarting google_accounts_daemon.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/google_accounts_daemon\", line 11, in <module>\r\n    load_entry_point('google-compute-engine==2.8.6', 'console_scripts', 'google_accounts_daemon')()\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/accounts/accounts_daemon.py\", line 282, in \r\nmain\r\n    debug=bool(options.debug))\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/accounts/accounts_daemon.py\", line 57, in _\r\n_init__\r\n    name='google-accounts', debug=debug, facility=facility)\r\n  File \"/usr/local/lib/python2.7/site-packages/google_compute_engine/logger.py\", line 49, in Logger\r\n    address='/dev/log', facility=facility)\r\n  File \"/usr/local/lib/python2.7/logging/handlers.py\", line 761, in __init__\r\n    self._connect_unixsocket(address)\r\n  File \"/usr/local/lib/python2.7/logging/handlers.py\", line 804, in _connect_unixsocket\r\n    self.socket.connect(address)\r\n  File \"/usr/local/lib/python2.7/socket.py\", line 228, in meth\r\n    return getattr(self._sock,name)(*args)\r\nsocket.error: [Errno 2] No such file or directory\r\n    self.socket.connect(address)\r\n  File \"/usr/local/lib/python2.7/socket.py\", line 228, in meth\r\n    return getattr(self._sock,name)(*args)\r\nsocket.error: [Errno 2] No such file or directory\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/728", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/728/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/728/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/728/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/728", "id": 402205916, "node_id": "MDU6SXNzdWU0MDIyMDU5MTY=", "number": 728, "title": "google_accounts_daemon restarting sshd every minute on debian 8", "user": {"login": "yob", "id": 8132, "node_id": "MDQ6VXNlcjgxMzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/8132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yob", "html_url": "https://github.com/yob", "followers_url": "https://api.github.com/users/yob/followers", "following_url": "https://api.github.com/users/yob/following{/other_user}", "gists_url": "https://api.github.com/users/yob/gists{/gist_id}", "starred_url": "https://api.github.com/users/yob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yob/subscriptions", "organizations_url": "https://api.github.com/users/yob/orgs", "repos_url": "https://api.github.com/users/yob/repos", "events_url": "https://api.github.com/users/yob/events{/privacy}", "received_events_url": "https://api.github.com/users/yob/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-23T11:59:29Z", "updated_at": "2019-01-23T22:25:19Z", "closed_at": "2019-01-23T22:25:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "We have some legacy instances that still run debian 8. They have unattended-upgrades enabled and have picked up the latest versions of the `google-compute-engine-*` packages:\r\n\r\n```\r\n# cat /etc/apt/sources.list.d/google-cloud.list \r\ndeb http://packages.cloud.google.com/apt cloud-sdk-jessie main\r\ndeb http://packages.cloud.google.com/apt google-cloud-compute-jessie main\r\ndeb http://packages.cloud.google.com/apt google-cloud-packages-archive-keyring-jessie main\r\ndeb http://packages.cloud.google.com/apt google-compute-engine-jessie-stable main\r\n\r\n# dpkg -l | grep google-compute-engine\r\nii  google-compute-engine                 2.8.12-1                         all          Google Compute Engine guest environment.\r\nii  google-compute-engine-oslogin         1.3.0-1+deb8                     amd64        Google Compute Engine OS Login\r\nii  python-google-compute-engine          2.8.12-1                         all          Google Compute Engine python library for Python 2.x.\r\nii  python3-google-compute-engine         2.8.12-1                         all          Google Compute Engine python library for Python 3.x\r\n```\r\n\r\nHistorically they've used `ssh-keys` metadata to control access, but we're in the middle of transitioning our infrastructure to oslogin. The `enable-oslogin` metadata is set at a project level:\r\n\r\n![screenshot from 2019-01-23 22-58-13](https://user-images.githubusercontent.com/8132/51605194-7283b100-1f62-11e9-8658-4a9498bf4d64.png)\r\n\r\nI'm not sure if it matters, but all our staff have 2fa enforced via gsuite policies.\r\n\r\nOnce oslogin was enabled on these instances, we noticed that something is restarting sshd roughly once every minute:\r\n\r\n```\r\n$ journalctl -f\r\nJan 23 11:45:50 tc-staging2-gcp-au google-accounts[23208]: INFO Reactivating OS Login with two factor disabled.\r\nJan 23 11:45:50 tc-staging2-gcp-au google_accounts_daemon[23208]: Deactivating Google Compute Engine OS Login.\r\nJan 23 11:45:51 tc-staging2-gcp-au google_accounts_daemon[23208]: Restarting sshd.\r\nJan 23 11:45:51 tc-staging2-gcp-au systemd[1]: Stopping OpenBSD Secure Shell server...\r\nJan 23 11:45:51 tc-staging2-gcp-au sshd[25374]: Received signal 15; terminating.\r\nJan 23 11:45:51 tc-staging2-gcp-au systemd[1]: Starting OpenBSD Secure Shell server...\r\nJan 23 11:45:51 tc-staging2-gcp-au systemd[1]: Started OpenBSD Secure Shell server.\r\nJan 23 11:45:51 tc-staging2-gcp-au sshd[26521]: Server listening on 0.0.0.0 port 22.\r\nJan 23 11:45:51 tc-staging2-gcp-au sshd[26521]: Server listening on :: port 22.\r\nJan 23 11:45:51 tc-staging2-gcp-au google_accounts_daemon[23208]: Activating Google Compute Engine OS Login.\r\nJan 23 11:45:52 tc-staging2-gcp-au google_accounts_daemon[23208]: Restarting sshd.\r\nJan 23 11:45:52 tc-staging2-gcp-au systemd[1]: Stopping OpenBSD Secure Shell server...\r\nJan 23 11:45:52 tc-staging2-gcp-au sshd[26521]: Received signal 15; terminating.\r\nJan 23 11:45:52 tc-staging2-gcp-au systemd[1]: Starting OpenBSD Secure Shell server...\r\nJan 23 11:45:52 tc-staging2-gcp-au systemd[1]: Started OpenBSD Secure Shell server.\r\nJan 23 11:45:52 tc-staging2-gcp-au sshd[27648]: Server listening on 0.0.0.0 port 22.\r\nJan 23 11:45:52 tc-staging2-gcp-au sshd[27648]: Server listening on :: port 22.\r\n\r\n\r\nJan 23 11:46:57 tc-staging2-gcp-au google-accounts[23208]: INFO Reactivating OS Login with two factor disabled.\r\nJan 23 11:46:57 tc-staging2-gcp-au google_accounts_daemon[23208]: Deactivating Google Compute Engine OS Login.\r\nJan 23 11:46:59 tc-staging2-gcp-au google_accounts_daemon[23208]: Restarting sshd.\r\nJan 23 11:46:59 tc-staging2-gcp-au systemd[1]: Stopping OpenBSD Secure Shell server...\r\nJan 23 11:46:59 tc-staging2-gcp-au sshd[27648]: Received signal 15; terminating.\r\nJan 23 11:46:59 tc-staging2-gcp-au systemd[1]: Starting OpenBSD Secure Shell server...\r\nJan 23 11:46:59 tc-staging2-gcp-au systemd[1]: Started OpenBSD Secure Shell server.\r\nJan 23 11:46:59 tc-staging2-gcp-au sshd[28791]: Server listening on 0.0.0.0 port 22.\r\nJan 23 11:46:59 tc-staging2-gcp-au sshd[28791]: Server listening on :: port 22.\r\nJan 23 11:46:59 tc-staging2-gcp-au google_accounts_daemon[23208]: Activating Google Compute Engine OS Login.\r\nJan 23 11:47:00 tc-staging2-gcp-au google_accounts_daemon[23208]: Restarting sshd.\r\nJan 23 11:47:00 tc-staging2-gcp-au systemd[1]: Stopping OpenBSD Secure Shell server...\r\nJan 23 11:47:00 tc-staging2-gcp-au sshd[28791]: Received signal 15; terminating.\r\nJan 23 11:47:00 tc-staging2-gcp-au systemd[1]: Starting OpenBSD Secure Shell server...\r\nJan 23 11:47:00 tc-staging2-gcp-au systemd[1]: Started OpenBSD Secure Shell server.\r\nJan 23 11:47:00 tc-staging2-gcp-au sshd[29824]: Server listening on 0.0.0.0 port 22.\r\nJan 23 11:47:00 tc-staging2-gcp-au sshd[29824]: Server listening on :: port 22\r\n```\r\n\r\nThe restart isn't catastrophic - opens SSH connections are left open. However, those sessions are unable to `sudo` after the restart, which is pretty inconvenient.\r\n\r\nIs there anything we can do to avoid the sshd restarts?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/726", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/726/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/726/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/726/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/726", "id": 400465711, "node_id": "MDU6SXNzdWU0MDA0NjU3MTE=", "number": 726, "title": "Spinloop on 2FA platforms", "user": {"login": "profrowe", "id": 7014143, "node_id": "MDQ6VXNlcjcwMTQxNDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/7014143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/profrowe", "html_url": "https://github.com/profrowe", "followers_url": "https://api.github.com/users/profrowe/followers", "following_url": "https://api.github.com/users/profrowe/following{/other_user}", "gists_url": "https://api.github.com/users/profrowe/gists{/gist_id}", "starred_url": "https://api.github.com/users/profrowe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/profrowe/subscriptions", "organizations_url": "https://api.github.com/users/profrowe/orgs", "repos_url": "https://api.github.com/users/profrowe/repos", "events_url": "https://api.github.com/users/profrowe/events{/privacy}", "received_events_url": "https://api.github.com/users/profrowe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}, {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-01-17T21:14:03Z", "updated_at": "2019-01-17T22:00:22Z", "closed_at": "2019-01-17T21:58:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Platform & Version:**\r\nOS:  Debian 9\r\nGCloud Suite Version:\r\nGoogle Cloud SDK 230.0.0\r\nalpha 2019.01.11\r\nbeta 2019.01.11\r\nbq 2.0.39\r\ncore 2019.01.11\r\ngsutil 4.35\r\nkubectl 2019.01.11\r\n\r\n**Symptoms:**\r\n/var/google-sudoers.d is purged every few seconds.  Even valid roles cannot use os-login to sudo beyond the first few seconds of an SSH session.\r\n\r\n**Suspected Cause**\r\nAfter a lot of auditd tracing, we found the google_accounts_daemon was cycling like a lunatic as follows:\r\n`Jan 17 20:54:11 hostname google-accounts[1110]: INFO Reactivating OS Login with two factor disabled.\r\nJan 17 20:54:11 hostname google_accounts_daemon[1110]: Deactivating Google Compute Engine OS Login.\r\nJan 17 20:54:14 hostname google_accounts_daemon[1110]: Restarting sshd.\r\nJan 17 20:54:14 hostname google_accounts_daemon[1110]: Activating Google Compute Engine OS Login.\r\nJan 17 20:54:18 hostname google_accounts_daemon[1110]: Restarting sshd.\r\nJan 17 20:55:20 hostname google-accounts[1110]: INFO Reactivating OS Login with two factor disabled.\r\nJan 17 20:55:20 hostname google_accounts_daemon[1110]: Deactivating Google Compute Engine OS Login.\r\nJan 17 20:55:23 hostname google_accounts_daemon[1110]: Restarting sshd.\r\nJan 17 20:55:23 hostname google_accounts_daemon[1110]: Activating Google Compute Engine OS Login.\r\nJan 17 20:55:27 hostname google_accounts_daemon[1110]: Restarting sshd.\r\nJan 17 20:56:29 hostname google-accounts[1110]: INFO Reactivating OS Login with two factor disabled.\r\nJan 17 20:56:29 hostname google_accounts_daemon[1110]: Deactivating Google Compute Engine OS Login.\r\nJan 17 20:56:33 hostname google_accounts_daemon[1110]: Restarting sshd.\r\nJan 17 20:56:33 hostname google_accounts_daemon[1110]: Activating Google Compute Engine OS Login.\r\nJan 17 20:56:36 hostname google_accounts_daemon[1110]: Restarting sshd.\r\nJan 17 20:57:38 hostname google-accounts[1110]: INFO Reactivating OS Login with two factor disabled.\r\nJan 17 20:57:38 hostname google_accounts_daemon[1110]: Deactivating Google Compute Engine OS Login.\r\nJan 17 20:57:42 hostname google_accounts_daemon[1110]: Restarting sshd.\r\nJan 17 20:57:42 hostname google_accounts_daemon[1110]: Activating Google Compute Engine OS Login.\r\nJan 17 20:57:45 hostname google_accounts_daemon[1110]: Restarting sshd.\r\nJan 17 20:58:47 hostname google-accounts[1110]: INFO Reactivating OS Login with two factor disabled.\r\nJan 17 20:58:47 hostname google_accounts_daemon[1110]: Deactivating Google Compute Engine OS Login.\r\nJan 17 20:58:51 hostname google_accounts_daemon[1110]: Restarting sshd.\r\nJan 17 20:58:51 hostname google_accounts_daemon[1110]: Activating Google Compute Engine OS Login.\r\nJan 17 20:58:54 hostname google_accounts_daemon[1110]: Restarting sshd.\r\n`\r\nThis seems to be caused by line 136 of oslogin_utils.py.\r\n\r\nIssue is breaking.  Only way to maintain root access is to sudo su on the host within the first few seconds of an SSH session.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/722", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/722/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/722/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/722/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/722", "id": 394489432, "node_id": "MDU6SXNzdWUzOTQ0ODk0MzI=", "number": 722, "title": "Log startup script and shutdown script output to console when using systemd", "user": {"login": "rkolchmeyer", "id": 6262359, "node_id": "MDQ6VXNlcjYyNjIzNTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/6262359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rkolchmeyer", "html_url": "https://github.com/rkolchmeyer", "followers_url": "https://api.github.com/users/rkolchmeyer/followers", "following_url": "https://api.github.com/users/rkolchmeyer/following{/other_user}", "gists_url": "https://api.github.com/users/rkolchmeyer/gists{/gist_id}", "starred_url": "https://api.github.com/users/rkolchmeyer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rkolchmeyer/subscriptions", "organizations_url": "https://api.github.com/users/rkolchmeyer/orgs", "repos_url": "https://api.github.com/users/rkolchmeyer/repos", "events_url": "https://api.github.com/users/rkolchmeyer/events{/privacy}", "received_events_url": "https://api.github.com/users/rkolchmeyer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-27T21:14:23Z", "updated_at": "2019-03-25T17:26:38Z", "closed_at": "2019-03-25T17:26:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "We're interested in logging startup script and shutdown script output to the serial console on COS.  We don't use rsyslog, so I think the best way to do this (for COS) would be to update the corresponding systemd units to output stdout and stderr to journal+console.\r\n\r\nWe can make this change on our end with a .conf file, but I'm wondering if it might make sense to make that change here. I guess other distros are already solving this problem with rsyslog, so maybe it doesn't make sense to make that change here? I'll send a PR, but if it doesn't make sense, feel free to close. Thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/692", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/692/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/692/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/692/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/692", "id": 385263839, "node_id": "MDU6SXNzdWUzODUyNjM4Mzk=", "number": 692, "title": "Different username with oslogin enabled - clarification needed", "user": {"login": "wbkoetsier", "id": 1872066, "node_id": "MDQ6VXNlcjE4NzIwNjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1872066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wbkoetsier", "html_url": "https://github.com/wbkoetsier", "followers_url": "https://api.github.com/users/wbkoetsier/followers", "following_url": "https://api.github.com/users/wbkoetsier/following{/other_user}", "gists_url": "https://api.github.com/users/wbkoetsier/gists{/gist_id}", "starred_url": "https://api.github.com/users/wbkoetsier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wbkoetsier/subscriptions", "organizations_url": "https://api.github.com/users/wbkoetsier/orgs", "repos_url": "https://api.github.com/users/wbkoetsier/repos", "events_url": "https://api.github.com/users/wbkoetsier/events{/privacy}", "received_events_url": "https://api.github.com/users/wbkoetsier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-11-28T13:18:08Z", "updated_at": "2020-07-08T05:42:22Z", "closed_at": "2018-11-28T20:04:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "I created a VM instance (Ubuntu 18.04) using the web interface. The Ubuntu username I was given was the same as the username part of the gmail address I am logged in with (project owner, no organisation): `username`. \r\n\r\nI then enabled OS Login to be able to use a third party SSH client - specifically, I wish to be able to `ssh username@external.ip` from my local console.\r\n\r\nWith OS Login enabled, I used `gcloud` to upload an SSH key to my project's metadata, after having logged in with that same gmail address again (following `gcloud auth login`). The username in that specific key is that same (full) gmail address. The output of the `gcloud ssh-keys add` command showed as username: `username_gmail_com`, rather than `username`.\r\n\r\nI then found that I can only ssh using this new Ubuntu username: `username_gmail_com`. This new Ubuntu user has been created on my VM and logging in using the web interface also takes me to this new user.\r\n\r\nWhen I disable OS Login again, I'm taken to the old `username` through the web interface. I can't use local ssh command (of course).\r\n\r\nI can solve this discrepancy and the inconvenience it causes by creating a new VM while having OS Login enabled.\r\n\r\nHowever, I'm looking for clarification: \r\n\r\n1. Why is the username different when enabling OS Login?\r\n2. Why `user_gmail_com` rather than just `user`?\r\n\r\nI'd be grateful for an explanation.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/691", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/691/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/691/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/691/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/691", "id": 385036979, "node_id": "MDU6SXNzdWUzODUwMzY5Nzk=", "number": 691, "title": "FreeBSD: sed command in /etc/dhclient-exit-hooks results in duplicate /etc/hosts entries on every reboot", "user": {"login": "rhclayto", "id": 13597641, "node_id": "MDQ6VXNlcjEzNTk3NjQx", "avatar_url": "https://avatars0.githubusercontent.com/u/13597641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rhclayto", "html_url": "https://github.com/rhclayto", "followers_url": "https://api.github.com/users/rhclayto/followers", "following_url": "https://api.github.com/users/rhclayto/following{/other_user}", "gists_url": "https://api.github.com/users/rhclayto/gists{/gist_id}", "starred_url": "https://api.github.com/users/rhclayto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rhclayto/subscriptions", "organizations_url": "https://api.github.com/users/rhclayto/orgs", "repos_url": "https://api.github.com/users/rhclayto/repos", "events_url": "https://api.github.com/users/rhclayto/events{/privacy}", "received_events_url": "https://api.github.com/users/rhclayto/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-27T23:44:31Z", "updated_at": "2019-04-16T21:37:48Z", "closed_at": "2019-04-16T21:37:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "On FreeBSD Cloud Compute instances, an improper sed command for FreeBSD's version of sed in `/etc/dhclient-exit-hooks` results in duplicate `/etc/hosts` entries on every reboot, like so:\r\n\r\n```\r\n10.138.0.2 freebsd-11-2.us-west1-b.c.<hostname>.internal freebsd-11-2  # Added by Google\r\n169.254.169.254 metadata.google.internal  # Added by Google\r\n10.138.0.2 freebsd-11-2.us-west1-b.c.<hostname>.internal freebsd-11-2  # Added by Google\r\n169.254.169.254 metadata.google.internal  # Added by Google\r\n```\r\n\r\nOn every reboot, these lines are appended to, rather than being replaced, so that the hosts file keeps growing with duplicate entries ad infinitum. This results from the following sed command in `/etc/dhclient-exit-hooks`:\r\n\r\n`sed -i '/Added by Google/d' /etc/hosts`\r\n\r\nOn FreeBSD, the sed command with flag -i takes an extension value for the backup file it creates during in-place editing. So here' it's interpreting '/Added by Google/d' as an extension, which doesn't work, so the command fails with the error (when run from the command line) `sed: 1: \"/etc/hosts\": extra characters at the end of h command`.\r\n\r\nThe solution is to add an extension to the sed command:\r\n\r\n`sed -i .orig '/Added by Google/d' /etc/hosts`\r\n\r\nThis resolves the problem. It does create an `/etc/hosts.orig` file, which is overwritten every time the sed command is called. If this is undesireable to leave in the filesystem, I suppose the command could be followed by an rm in the `/etc/dhclient-exit-hooks`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/680", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/680/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/680/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/680/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/680", "id": 374476367, "node_id": "MDU6SXNzdWUzNzQ0NzYzNjc=", "number": 680, "title": "Expectations for keeping installed package versions recent", "user": {"login": "benburry", "id": 425531, "node_id": "MDQ6VXNlcjQyNTUzMQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/425531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benburry", "html_url": "https://github.com/benburry", "followers_url": "https://api.github.com/users/benburry/followers", "following_url": "https://api.github.com/users/benburry/following{/other_user}", "gists_url": "https://api.github.com/users/benburry/gists{/gist_id}", "starred_url": "https://api.github.com/users/benburry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benburry/subscriptions", "organizations_url": "https://api.github.com/users/benburry/orgs", "repos_url": "https://api.github.com/users/benburry/repos", "events_url": "https://api.github.com/users/benburry/events{/privacy}", "received_events_url": "https://api.github.com/users/benburry/received_events", "type": "User", "site_admin": true}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-26T17:25:19Z", "updated_at": "2018-12-13T22:37:37Z", "closed_at": "2018-12-13T22:37:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there.\r\n\r\nI'm looking for guidance on what expectations exist in GCP for keeping installed packages up to date on GCE instances, and whether there is a guarantee in place to maintain backwards-compatibility within a certain set of released versions behind HEAD (compatible within the same semver major version, for instance). I'm specifically interested in the centos packages `google-compute-engine` and `python-google-compute-engine`, but I would hope the guidance could apply across all compute-image packages and distros.\r\n\r\nIn addition, I'd like to be able to watch or be notified for new releases that contain critical updates (for instance, addressing CVEs) that might alter the general guidance around what package versions Google expects to be installed.\r\n\r\nDoes this package version guidance exist already, or would you be able to supply it? Is there already a process for being notified of critical package releases?\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/670", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/670/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/670/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/670/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/670", "id": 369626836, "node_id": "MDU6SXNzdWUzNjk2MjY4MzY=", "number": 670, "title": "Multiple nic problem", "user": {"login": "dev-omrc", "id": 22629768, "node_id": "MDQ6VXNlcjIyNjI5NzY4", "avatar_url": "https://avatars2.githubusercontent.com/u/22629768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dev-omrc", "html_url": "https://github.com/dev-omrc", "followers_url": "https://api.github.com/users/dev-omrc/followers", "following_url": "https://api.github.com/users/dev-omrc/following{/other_user}", "gists_url": "https://api.github.com/users/dev-omrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/dev-omrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dev-omrc/subscriptions", "organizations_url": "https://api.github.com/users/dev-omrc/orgs", "repos_url": "https://api.github.com/users/dev-omrc/repos", "events_url": "https://api.github.com/users/dev-omrc/events{/privacy}", "received_events_url": "https://api.github.com/users/dev-omrc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "zmarano", "id": 4564273, "node_id": "MDQ6VXNlcjQ1NjQyNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4564273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zmarano", "html_url": "https://github.com/zmarano", "followers_url": "https://api.github.com/users/zmarano/followers", "following_url": "https://api.github.com/users/zmarano/following{/other_user}", "gists_url": "https://api.github.com/users/zmarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/zmarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zmarano/subscriptions", "organizations_url": "https://api.github.com/users/zmarano/orgs", "repos_url": "https://api.github.com/users/zmarano/repos", "events_url": "https://api.github.com/users/zmarano/events{/privacy}", "received_events_url": "https://api.github.com/users/zmarano/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zmarano", "id": 4564273, "node_id": "MDQ6VXNlcjQ1NjQyNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4564273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zmarano", "html_url": "https://github.com/zmarano", "followers_url": "https://api.github.com/users/zmarano/followers", "following_url": "https://api.github.com/users/zmarano/following{/other_user}", "gists_url": "https://api.github.com/users/zmarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/zmarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zmarano/subscriptions", "organizations_url": "https://api.github.com/users/zmarano/orgs", "repos_url": "https://api.github.com/users/zmarano/repos", "events_url": "https://api.github.com/users/zmarano/events{/privacy}", "received_events_url": "https://api.github.com/users/zmarano/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-10-12T16:41:26Z", "updated_at": "2019-09-03T19:56:49Z", "closed_at": "2019-09-03T19:56:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\r\n\r\nI've an instance with Centos 6 and multiple network interfaces, when the package is updated the networks fails, I need to restart to solve.\r\n\r\nIs there a way to solve this?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/662", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/662/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/662/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/662/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/662", "id": 367079339, "node_id": "MDU6SXNzdWUzNjcwNzkzMzk=", "number": 662, "title": "rsyslog.service doesn't nominally work on Arch Linux: may hang up startup + shutdown", "user": {"login": "unquietwiki", "id": 1007551, "node_id": "MDQ6VXNlcjEwMDc1NTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1007551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unquietwiki", "html_url": "https://github.com/unquietwiki", "followers_url": "https://api.github.com/users/unquietwiki/followers", "following_url": "https://api.github.com/users/unquietwiki/following{/other_user}", "gists_url": "https://api.github.com/users/unquietwiki/gists{/gist_id}", "starred_url": "https://api.github.com/users/unquietwiki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unquietwiki/subscriptions", "organizations_url": "https://api.github.com/users/unquietwiki/orgs", "repos_url": "https://api.github.com/users/unquietwiki/repos", "events_url": "https://api.github.com/users/unquietwiki/events{/privacy}", "received_events_url": "https://api.github.com/users/unquietwiki/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-05T06:41:04Z", "updated_at": "2018-10-05T17:46:52Z", "closed_at": "2018-10-05T17:46:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "-  compute-image-packages/google_compute_engine_init/systemd/google-startup-scripts.service\r\n-  compute-image-packages/google_compute_engine_init/systemd/google-shutdown-scripts.service\r\n\r\n**Current**\r\n\r\nAfter=local-fs.target network-online.target network.target rsyslog.service systemd-resolved.service\r\n\r\n**\"Corrected\"**\r\n\r\nAfter=local-fs.target network-online.target network.target systemd-resolved.service", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/654", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/654/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/654/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/654/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/654", "id": 358011360, "node_id": "MDU6SXNzdWUzNTgwMTEzNjA=", "number": 654, "title": "Startup-script doesn't work with python file", "user": {"login": "minhthehash", "id": 42533798, "node_id": "MDQ6VXNlcjQyNTMzNzk4", "avatar_url": "https://avatars3.githubusercontent.com/u/42533798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minhthehash", "html_url": "https://github.com/minhthehash", "followers_url": "https://api.github.com/users/minhthehash/followers", "following_url": "https://api.github.com/users/minhthehash/following{/other_user}", "gists_url": "https://api.github.com/users/minhthehash/gists{/gist_id}", "starred_url": "https://api.github.com/users/minhthehash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minhthehash/subscriptions", "organizations_url": "https://api.github.com/users/minhthehash/orgs", "repos_url": "https://api.github.com/users/minhthehash/repos", "events_url": "https://api.github.com/users/minhthehash/events{/privacy}", "received_events_url": "https://api.github.com/users/minhthehash/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-09-07T10:27:50Z", "updated_at": "2018-09-10T02:57:05Z", "closed_at": "2018-09-08T19:34:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all,  \r\nI'm trying to create startup script in Compute Engine - in directly way when create VM instance, I want to run command just like in SSH command line. Here my startup script:\r\n```\r\n#!/bin/bash\r\nsudo python3 /home/minhngc4795/test.py\r\n```\r\n\r\nHere is my test.py file, I want to write line \"test\" to test.txt file in folder:\r\n\r\n```\r\n#!/usr/bin/python3\r\nfile = open(\"test.txt\",\"w\")\r\nfile.write(\"test\")\r\nfile.close()\r\n```\r\n\r\nWhen I start VM instance and check /var/log/syslog, it doesn't return error code or anything, just return 0\r\n\r\n```\r\nSep  7 10:18:18 startupscript systemd[1]: Starting Google Compute Engine Startup Scripts...\r\nSep  7 10:18:18 startupscript startup-script: INFO Starting startup scripts.\r\nSep  7 10:18:18 startupscript startup-script: INFO Found startup-script in metadata.\r\nSep  7 10:18:18 startupscript startup-script: INFO startup-script: Return code 0.\r\nSep  7 10:18:18 startupscript startup-script: INFO Finished running startup scripts.\r\n``` \r\n\r\nBut nothing happens in my folder. I try to figure it out but nothing come up. Pls help me, thks a lot. \r\nI'm using Ubuntu 16.04.5 LTS", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/653", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/653/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/653/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/653/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/653", "id": 357954282, "node_id": "MDU6SXNzdWUzNTc5NTQyODI=", "number": 653, "title": "[CentOS7] Second NIC does not bring up with `systemctl restart network`", "user": {"login": "tomoe", "id": 468185, "node_id": "MDQ6VXNlcjQ2ODE4NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/468185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomoe", "html_url": "https://github.com/tomoe", "followers_url": "https://api.github.com/users/tomoe/followers", "following_url": "https://api.github.com/users/tomoe/following{/other_user}", "gists_url": "https://api.github.com/users/tomoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomoe/subscriptions", "organizations_url": "https://api.github.com/users/tomoe/orgs", "repos_url": "https://api.github.com/users/tomoe/repos", "events_url": "https://api.github.com/users/tomoe/events{/privacy}", "received_events_url": "https://api.github.com/users/tomoe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-07T07:38:46Z", "updated_at": "2018-09-26T17:25:05Z", "closed_at": "2018-09-26T17:25:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/GoogleCloudPlatform/compute-image-packages/blob/e725e854cfeb6ede8470692dca082b5549bae2b3/google_compute_engine/distro_lib/el_7/utils.py#L66\r\n\r\nWhy not `BOOTPROTO=\"dhcp\"` so it conforms to `initscripts`? \r\nCurrently if you restart network by \"systemctl restart network\", the second NIC does not bring up. \r\n\r\nI noticed that network configurations are done by `google-network-setup.service`, but that is not obvious thing for standard distro users. And one may want to have some additional configurations, e.g. routes, in ifcfg-ethX file.  \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/650", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/650/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/650/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/650/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/650", "id": 356664425, "node_id": "MDU6SXNzdWUzNTY2NjQ0MjU=", "number": 650, "title": "oslogin: compiling error", "user": {"login": "helen-fornazier", "id": 11065451, "node_id": "MDQ6VXNlcjExMDY1NDUx", "avatar_url": "https://avatars1.githubusercontent.com/u/11065451?v=4", "gravatar_id": "", "url": "https://api.github.com/users/helen-fornazier", "html_url": "https://github.com/helen-fornazier", "followers_url": "https://api.github.com/users/helen-fornazier/followers", "following_url": "https://api.github.com/users/helen-fornazier/following{/other_user}", "gists_url": "https://api.github.com/users/helen-fornazier/gists{/gist_id}", "starred_url": "https://api.github.com/users/helen-fornazier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/helen-fornazier/subscriptions", "organizations_url": "https://api.github.com/users/helen-fornazier/orgs", "repos_url": "https://api.github.com/users/helen-fornazier/repos", "events_url": "https://api.github.com/users/helen-fornazier/events{/privacy}", "received_events_url": "https://api.github.com/users/helen-fornazier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-09-04T06:05:40Z", "updated_at": "2019-03-25T17:27:16Z", "closed_at": "2019-03-25T17:27:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am trying to compile oslogin in a centos7 machine, and I get the error below.\r\nI can fix the issue by reverting commit \"Add user name validation to pam modules\" #633\r\nI'll take a deeper look, just adding here to track it.\r\n\r\n```\r\n[root@koike-centos7 google_compute_engine_oslogin]# make\r\ng++ -fPIC -I/usr/include/json-c -c utils/oslogin_utils.cc -o utils/oslogin_utils.o\r\nIn file included from /usr/include/c++/4.8.2/regex:35:0,\r\n                 from utils/oslogin_utils.cc:25:\r\n/usr/include/c++/4.8.2/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\r\n #error This file requires compiler and library support for the \\\r\n  ^\r\nutils/oslogin_utils.cc: In function \u2018bool oslogin_utils::ValidateUserName(const string&)\u2019:\r\nutils/oslogin_utils.cc:230:3: error: \u2018regex\u2019 is not a member of \u2018std\u2019\r\n   std::regex r(kUserNameRegex);\r\n   ^\r\nutils/oslogin_utils.cc:230:14: error: expected \u2018;\u2019 before \u2018r\u2019\r\n   std::regex r(kUserNameRegex);\r\n              ^\r\nutils/oslogin_utils.cc:231:10: error: \u2018regex_match\u2019 is not a member of \u2018std\u2019\r\n   return std::regex_match(user_name, r);\r\n          ^\r\nutils/oslogin_utils.cc:231:38: error: \u2018r\u2019 was not declared in this scope\r\n   return std::regex_match(user_name, r);\r\n                                      ^\r\nmake: *** [utils/oslogin_utils.o] Error 1\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/647", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/647/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/647/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/647/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/647", "id": 354993837, "node_id": "MDU6SXNzdWUzNTQ5OTM4Mzc=", "number": 647, "title": "Python 3.7 build", "user": {"login": "MSeal", "id": 1863892, "node_id": "MDQ6VXNlcjE4NjM4OTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1863892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MSeal", "html_url": "https://github.com/MSeal", "followers_url": "https://api.github.com/users/MSeal/followers", "following_url": "https://api.github.com/users/MSeal/following{/other_user}", "gists_url": "https://api.github.com/users/MSeal/gists{/gist_id}", "starred_url": "https://api.github.com/users/MSeal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MSeal/subscriptions", "organizations_url": "https://api.github.com/users/MSeal/orgs", "repos_url": "https://api.github.com/users/MSeal/repos", "events_url": "https://api.github.com/users/MSeal/events{/privacy}", "received_events_url": "https://api.github.com/users/MSeal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-08-29T04:39:04Z", "updated_at": "2018-08-29T06:23:05Z", "closed_at": "2018-08-29T06:23:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "We were trying to run our tests for another project which uses boto but this package is not importing correctly for python 3.7. Was hoping someone more familiar with this code base could help enable it?\r\n\r\nThanks\r\n\r\n```\r\nTraceback:\r\n/home/travis/build/nteract/papermill/papermill/tests/test_s3.py:6: in <module>\r\n    import moto\r\n/home/travis/virtualenv/python3.7.0/lib/python3.7/site-packages/moto/__init__.py:8: in <module>\r\n    from .acm import mock_acm  # flake8: noqa\r\n/home/travis/virtualenv/python3.7.0/lib/python3.7/site-packages/moto/acm/__init__.py:2: in <module>\r\n    from .models import acm_backends\r\n/home/travis/virtualenv/python3.7.0/lib/python3.7/site-packages/moto/acm/models.py:7: in <module>\r\n    from moto.ec2 import ec2_backends\r\n/home/travis/virtualenv/python3.7.0/lib/python3.7/site-packages/moto/ec2/__init__.py:2: in <module>\r\n    from .models import ec2_backends\r\n/home/travis/virtualenv/python3.7.0/lib/python3.7/site-packages/moto/ec2/models.py:13: in <module>\r\n    import boto.ec2\r\n/home/travis/virtualenv/python3.7.0/lib/python3.7/site-packages/boto/__init__.py:1216: in <module>\r\n    boto.plugin.load_plugins(config)\r\n/home/travis/virtualenv/python3.7.0/lib/python3.7/site-packages/boto/plugin.py:93: in load_plugins\r\n    _import_module(file)\r\n/home/travis/virtualenv/python3.7.0/lib/python3.7/site-packages/boto/plugin.py:75: in _import_module\r\n    return imp.load_module(name, file, filename, data)\r\n/home/travis/virtualenv/python3.7.0/lib/python3.7/imp.py:235: in load_module\r\n    return load_source(name, filename, file)\r\n/home/travis/virtualenv/python3.7.0/lib/python3.7/imp.py:172: in load_source\r\n    module = _load(spec)\r\n/usr/lib/python3/dist-packages/google_compute_engine/boto/compute_auth.py:19: in <module>\r\n    from google_compute_engine import logger\r\nE   ModuleNotFoundError: No module named 'google_compute_engine'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/634", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/634/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/634/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/634/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/634", "id": 345430168, "node_id": "MDU6SXNzdWUzNDU0MzAxNjg=", "number": 634, "title": "Clock Skew Daemon doesn't sync time ", "user": {"login": "capsl0cker", "id": 34022528, "node_id": "MDQ6VXNlcjM0MDIyNTI4", "avatar_url": "https://avatars0.githubusercontent.com/u/34022528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/capsl0cker", "html_url": "https://github.com/capsl0cker", "followers_url": "https://api.github.com/users/capsl0cker/followers", "following_url": "https://api.github.com/users/capsl0cker/following{/other_user}", "gists_url": "https://api.github.com/users/capsl0cker/gists{/gist_id}", "starred_url": "https://api.github.com/users/capsl0cker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/capsl0cker/subscriptions", "organizations_url": "https://api.github.com/users/capsl0cker/orgs", "repos_url": "https://api.github.com/users/capsl0cker/repos", "events_url": "https://api.github.com/users/capsl0cker/events{/privacy}", "received_events_url": "https://api.github.com/users/capsl0cker/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-28T08:03:28Z", "updated_at": "2018-07-30T21:01:26Z", "closed_at": "2018-07-30T21:01:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have one question about Clock Skew Daemon:\r\ndoes it only sync time while starting/stopping/mirgrating VM instance?\r\ni.e. for a running VM, if I change system time with command 'date -s xxx', will it correct time back?\r\nFrom my experiments, it won't correct it. Is this a designed behavior?\r\nIf it is, my question is how to keep time sync with host in GCP if don't enable ntp?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/629", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/629/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/629/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/629/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/629", "id": 341987201, "node_id": "MDU6SXNzdWUzNDE5ODcyMDE=", "number": 629, "title": "SPEC file for google-compute-engine-oslogin", "user": {"login": "vZ2JEZsZW", "id": 7002789, "node_id": "MDQ6VXNlcjcwMDI3ODk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7002789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vZ2JEZsZW", "html_url": "https://github.com/vZ2JEZsZW", "followers_url": "https://api.github.com/users/vZ2JEZsZW/followers", "following_url": "https://api.github.com/users/vZ2JEZsZW/following{/other_user}", "gists_url": "https://api.github.com/users/vZ2JEZsZW/gists{/gist_id}", "starred_url": "https://api.github.com/users/vZ2JEZsZW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vZ2JEZsZW/subscriptions", "organizations_url": "https://api.github.com/users/vZ2JEZsZW/orgs", "repos_url": "https://api.github.com/users/vZ2JEZsZW/repos", "events_url": "https://api.github.com/users/vZ2JEZsZW/events{/privacy}", "received_events_url": "https://api.github.com/users/vZ2JEZsZW/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-17T16:09:52Z", "updated_at": "2018-08-22T23:00:17Z", "closed_at": "2018-08-22T23:00:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can't find spec-file for `google-compute-engine-oslogin`. Should't it be in specs directory? Or `google-compute-engine-oslogin` is a product of some other spec-file?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/627", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/627/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/627/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/627/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/627", "id": 341930242, "node_id": "MDU6SXNzdWUzNDE5MzAyNDI=", "number": 627, "title": "Provide Fedora 27 RPM packages", "user": {"login": "vZ2JEZsZW", "id": 7002789, "node_id": "MDQ6VXNlcjcwMDI3ODk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7002789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vZ2JEZsZW", "html_url": "https://github.com/vZ2JEZsZW", "followers_url": "https://api.github.com/users/vZ2JEZsZW/followers", "following_url": "https://api.github.com/users/vZ2JEZsZW/following{/other_user}", "gists_url": "https://api.github.com/users/vZ2JEZsZW/gists{/gist_id}", "starred_url": "https://api.github.com/users/vZ2JEZsZW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vZ2JEZsZW/subscriptions", "organizations_url": "https://api.github.com/users/vZ2JEZsZW/orgs", "repos_url": "https://api.github.com/users/vZ2JEZsZW/repos", "events_url": "https://api.github.com/users/vZ2JEZsZW/events{/privacy}", "received_events_url": "https://api.github.com/users/vZ2JEZsZW/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-17T13:55:08Z", "updated_at": "2018-07-18T16:09:53Z", "closed_at": "2018-07-18T16:09:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Any chance for Fedora 28 support?\r\nOr it is just google decision to not support anything but standard images backed into gce? What the point of having these compute-image-packages then?\r\nupd: sorry, I meant Fedora  **28**", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/625", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/625/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/625/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/625/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/625", "id": 339855489, "node_id": "MDU6SXNzdWUzMzk4NTU0ODk=", "number": 625, "title": "debug mode", "user": {"login": "Gabology", "id": 346756, "node_id": "MDQ6VXNlcjM0Njc1Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/346756?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gabology", "html_url": "https://github.com/Gabology", "followers_url": "https://api.github.com/users/Gabology/followers", "following_url": "https://api.github.com/users/Gabology/following{/other_user}", "gists_url": "https://api.github.com/users/Gabology/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gabology/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gabology/subscriptions", "organizations_url": "https://api.github.com/users/Gabology/orgs", "repos_url": "https://api.github.com/users/Gabology/repos", "events_url": "https://api.github.com/users/Gabology/events{/privacy}", "received_events_url": "https://api.github.com/users/Gabology/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-10T13:59:14Z", "updated_at": "2019-09-03T18:06:29Z", "closed_at": "2019-09-03T18:06:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can't find any documentation on how you run the binaries in debug mode. In the code there are various references to setting a debug flag to enable logging to the console, and the documentation also confirms this:\r\n\r\n> The Google added daemons and scripts write to the serial port for added transparency. A common logging library is a thin wrapper around the Python logging module. The library configures appropriate SysLog handlers, sets the logging formatter, and provides a debug options for added logging and console output.\r\n\r\nHowever nowhere can I find any reference as to how I enable debug logging when running the binaries directly.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/621", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/621/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/621/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/621/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/621", "id": 330095269, "node_id": "MDU6SXNzdWUzMzAwOTUyNjk=", "number": 621, "title": "unsafe usernames may reference other files", "user": {"login": "setharnold", "id": 5447148, "node_id": "MDQ6VXNlcjU0NDcxNDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5447148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/setharnold", "html_url": "https://github.com/setharnold", "followers_url": "https://api.github.com/users/setharnold/followers", "following_url": "https://api.github.com/users/setharnold/following{/other_user}", "gists_url": "https://api.github.com/users/setharnold/gists{/gist_id}", "starred_url": "https://api.github.com/users/setharnold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/setharnold/subscriptions", "organizations_url": "https://api.github.com/users/setharnold/orgs", "repos_url": "https://api.github.com/users/setharnold/repos", "events_url": "https://api.github.com/users/setharnold/events{/privacy}", "received_events_url": "https://api.github.com/users/setharnold/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-07T02:32:22Z", "updated_at": "2018-12-27T00:54:10Z", "closed_at": "2018-12-27T00:54:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/GoogleCloudPlatform/compute-image-packages/blob/3d67bc6271650c8e1fc19b8420c17f6e204d1272/google_compute_engine_oslogin/pam_module/pam_oslogin_admin.cc#L74\r\n\r\nHello,\r\n\r\nI reviewed this package as part of the Ubuntu Main Inclusion Review process, and found a few small items I think should be addressed.\r\n\r\nIf the username includes sequences of `../` opening this file may have unexpected consequences. The metadata server will probably reject usernames of this style but I think this module should itself refuse to work on unexpected files regardless of the proper functioning of the metadata server.\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/618", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/618/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/618/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/618/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/618", "id": 326714983, "node_id": "MDU6SXNzdWUzMjY3MTQ5ODM=", "number": 618, "title": "Docker image that we can use ?", "user": {"login": "sandys", "id": 76883, "node_id": "MDQ6VXNlcjc2ODgz", "avatar_url": "https://avatars2.githubusercontent.com/u/76883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandys", "html_url": "https://github.com/sandys", "followers_url": "https://api.github.com/users/sandys/followers", "following_url": "https://api.github.com/users/sandys/following{/other_user}", "gists_url": "https://api.github.com/users/sandys/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandys/subscriptions", "organizations_url": "https://api.github.com/users/sandys/orgs", "repos_url": "https://api.github.com/users/sandys/repos", "events_url": "https://api.github.com/users/sandys/events{/privacy}", "received_events_url": "https://api.github.com/users/sandys/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-05-26T06:35:33Z", "updated_at": "2018-07-17T18:17:56Z", "closed_at": "2018-07-17T18:17:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi guys,\r\nI'm looking to deploy a whole bunch of docker images to Google Compute with a fair amount of customization.\r\nOne of the important things I'm looking to use is the ability to add and remove accounts (ssh keys) from the Google Cloud console. \r\n\r\nDo you guys have a Ubuntu/Debian Dockerfile that I can build upon ? I'm not able to figure out how to integrate google accounts daemon. Since systemd does not work on docker images, we usually use supervisord or use the baseimage-docker VM (https://hub.docker.com/r/phusion/baseimage/ and http://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/)\r\n\r\nDo you guys have any Docker images we can use ? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/614", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/614/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/614/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/614/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/614", "id": 324742424, "node_id": "MDU6SXNzdWUzMjQ3NDI0MjQ=", "number": 614, "title": "ubuntu-1804-lts startup script don't run", "user": {"login": "solidsystem", "id": 3218762, "node_id": "MDQ6VXNlcjMyMTg3NjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/3218762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/solidsystem", "html_url": "https://github.com/solidsystem", "followers_url": "https://api.github.com/users/solidsystem/followers", "following_url": "https://api.github.com/users/solidsystem/following{/other_user}", "gists_url": "https://api.github.com/users/solidsystem/gists{/gist_id}", "starred_url": "https://api.github.com/users/solidsystem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/solidsystem/subscriptions", "organizations_url": "https://api.github.com/users/solidsystem/orgs", "repos_url": "https://api.github.com/users/solidsystem/repos", "events_url": "https://api.github.com/users/solidsystem/events{/privacy}", "received_events_url": "https://api.github.com/users/solidsystem/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-20T21:02:19Z", "updated_at": "2018-07-17T18:19:17Z", "closed_at": "2018-07-17T18:19:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm having a problem getting startup script to run on ubuntu-1804-lts image.\r\n\r\nTo test I Have this script uploaded to a cloud storage bucket:\r\n\r\n> #!/usr/bin/env bash\r\n> \r\n> date >> /tmp/bootscript.log\r\n> \r\n\r\nI then create the instance like this:\r\n`gcloud compute instances create \"client-ubuntu-1804\" \\\r\n--zone=\"us-east1-c\" \\\r\n--machine-type=\"f1-micro\" \\\r\n--network=\"default\" \\\r\n--image-family=\"ubuntu-1804-lts\" \\\r\n--image-project=\"ubuntu-os-cloud\" \\\r\n--boot-disk-size=\"20\" \\\r\n--boot-disk-type=\"pd-standard\" \\\r\n--boot-disk-auto-delete \\\r\n--scopes=\"cloud-platform\" \\\r\n--service-account=\"xxx@<PROJECT-ID>.iam.gserviceaccount.com\" \\\r\n--metadata startup-script-url=\"gs://<BUCKETNAME>/scripts/tryboot.sh\"`\r\n\r\nWhen I SSH into the instance there is no /tmp/bootscript.log file, so the script has clearly not run.\r\n\r\nIf I then run the startup script manually like  this:\r\n`sudo google_metadata_script_runner --script-type=startup --debug`\r\n\r\nIt runs as expected and produce the expected output file.\r\n\r\nWorks as expected on ubuntu-1604-lts image.\r\n\r\nWould be great to get a fix for this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/613", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/613/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/613/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/613/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/613", "id": 324100509, "node_id": "MDU6SXNzdWUzMjQxMDA1MDk=", "number": 613, "title": "Ubuntu cmdline arg for console doesn't specify 38400 baud rate (fallbacks to 9600?)", "user": {"login": "gut", "id": 40444, "node_id": "MDQ6VXNlcjQwNDQ0", "avatar_url": "https://avatars3.githubusercontent.com/u/40444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gut", "html_url": "https://github.com/gut", "followers_url": "https://api.github.com/users/gut/followers", "following_url": "https://api.github.com/users/gut/following{/other_user}", "gists_url": "https://api.github.com/users/gut/gists{/gist_id}", "starred_url": "https://api.github.com/users/gut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gut/subscriptions", "organizations_url": "https://api.github.com/users/gut/orgs", "repos_url": "https://api.github.com/users/gut/repos", "events_url": "https://api.github.com/users/gut/events{/privacy}", "received_events_url": "https://api.github.com/users/gut/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-17T16:37:44Z", "updated_at": "2018-06-13T18:59:16Z", "closed_at": "2018-06-13T18:59:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've analyzed all the kernel command line arguments for ubuntu images:\r\n```\r\nubuntu 14.04: BOOT_IMAGE=/boot/vmlinuz-4.4.0-124-generic root=UUID=17e286d8-90e7-4e3f-8eda-b920ff2849f0 ro scsi_mod.use_blk_mq=Y console=ttyS0o\r\nubuntu 16.04: BOOT_IMAGE=/boot/vmlinuz-4.13.0-1015-gcp root=LABEL=cloudimg-rootfs ro scsi_mod.use_blk_mq=Y console=ttyS0\r\nubuntu 17.10: BOOT_IMAGE=/boot/vmlinuz-4.13.0-41-generic root=LABEL=cloudimg-rootfs ro scsi_mod.use_blk_mq=Y console=ttyS0\r\nubuntu 18.04: BOOT_IMAGE=/boot/vmlinuz-4.15.0-1006-gcp root=LABEL=cloudimg-rootfs ro scsi_mod.use_blk_mq=Y console=ttyS0\r\n```\r\nThe console argument should be `ttyS0,38400n8` (See GoogleCloudPlatform/compute-image-tools#402). According to a [the documentation](https://www.kernel.org/doc/html/v4.15/admin-guide/kernel-parameters.html), the baudrate will be set to 9600 if not explicitly set.\r\n\r\nIs that a real concern?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/607", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/607/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/607/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/607/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/607", "id": 322318923, "node_id": "MDU6SXNzdWUzMjIzMTg5MjM=", "number": 607, "title": "debian-8 public image has its automatic updates disabled by default", "user": {"login": "gut", "id": 40444, "node_id": "MDQ6VXNlcjQwNDQ0", "avatar_url": "https://avatars3.githubusercontent.com/u/40444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gut", "html_url": "https://github.com/gut", "followers_url": "https://api.github.com/users/gut/followers", "following_url": "https://api.github.com/users/gut/following{/other_user}", "gists_url": "https://api.github.com/users/gut/gists{/gist_id}", "starred_url": "https://api.github.com/users/gut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gut/subscriptions", "organizations_url": "https://api.github.com/users/gut/orgs", "repos_url": "https://api.github.com/users/gut/repos", "events_url": "https://api.github.com/users/gut/events{/privacy}", "received_events_url": "https://api.github.com/users/gut/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-11T14:32:27Z", "updated_at": "2018-05-14T20:12:57Z", "closed_at": "2018-05-14T20:12:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "From [configuration integration test requirement](https://github.com/GoogleCloudPlatform/compute-image-tools/blame/master/daisy_workflows/image_test/README.md#L135):\r\n```\r\n-   Ensure automatic security updates are enabled per distro specs.\r\n    -   Unattended upgrades for the Debian security repos, and apt\r\nconfig is correct.\r\n```\r\n\r\nThe unattended-upgrades service is disabled:\r\n```\r\n$ sudo service unattended-upgrades status\r\n\u25cf unattended-upgrades.service - Unattended Upgrades\r\n   Loaded: loaded (/lib/systemd/system/unattended-upgrades.service; enabled)\r\n   Active: inactive (dead)\r\n     Docs: man:unattended-upgrade(8)\r\n```\r\n\r\nAnd on debian-9 it looks fine:\r\n```\r\n$ sudo service unattended-upgrades status\r\n\u25cf unattended-upgrades.service - Unattended Upgrades Shutdown\r\n   Loaded: loaded (/lib/systemd/system/unattended-upgrades.service; enabled; vendor preset: enabled)\r\n   Active: active (exited) since Fri 2018-05-11 14:20:37 UTC; 4min 51s ago\r\n     Docs: man:unattended-upgrade(8)\r\n    Tasks: 0 (limit: 4915)\r\n   CGroup: /system.slice/unattended-upgrades.service\r\n\r\nMay 11 14:20:37 gut-test systemd[1]: Started Unattended Upgrades Shutdown.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/604", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/604/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/604/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/604/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/604", "id": 321944124, "node_id": "MDU6SXNzdWUzMjE5NDQxMjQ=", "number": 604, "title": "Ubuntu public images have sshd_config's PermitRootLogin set to other than \"no\"", "user": {"login": "gut", "id": 40444, "node_id": "MDQ6VXNlcjQwNDQ0", "avatar_url": "https://avatars3.githubusercontent.com/u/40444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gut", "html_url": "https://github.com/gut", "followers_url": "https://api.github.com/users/gut/followers", "following_url": "https://api.github.com/users/gut/following{/other_user}", "gists_url": "https://api.github.com/users/gut/gists{/gist_id}", "starred_url": "https://api.github.com/users/gut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gut/subscriptions", "organizations_url": "https://api.github.com/users/gut/orgs", "repos_url": "https://api.github.com/users/gut/repos", "events_url": "https://api.github.com/users/gut/events{/privacy}", "received_events_url": "https://api.github.com/users/gut/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-10T14:06:58Z", "updated_at": "2018-06-13T18:58:58Z", "closed_at": "2018-06-13T18:58:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "From [configuration integration test requirement](https://github.com/GoogleCloudPlatform/compute-image-tools/blame/master/daisy_workflows/image_test/README.md#L127):\r\n```\r\nEnsure sshd config has sane default settings:\r\n- PermitRootLogin no\r\n```\r\n* **ubuntu 1604** has it as \"prohibit-password\", which still allows root login through public-key, hostbased and GSSAPI authentication. \r\n* **ubuntu 1404** has it as \"without-password\", which is just a [synonym for \"prohibit-password\"](https://www.openssh.com/txt/release-7.0). \r\n* **ubuntu 1710** and **ubuntu 1804** don't set one config, so it fallbacks to default \"prohibit-password\" according to documentation.\r\n\r\nWas this a false positive? Should actually my test allow \"prohibit-password\" or are these ubuntu images faulty?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/603", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/603/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/603/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/603/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/603", "id": 321869436, "node_id": "MDU6SXNzdWUzMjE4Njk0MzY=", "number": 603, "title": "google-network-daemon / google-ip-forwarding in systemd", "user": {"login": "mills95", "id": 22319880, "node_id": "MDQ6VXNlcjIyMzE5ODgw", "avatar_url": "https://avatars3.githubusercontent.com/u/22319880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mills95", "html_url": "https://github.com/mills95", "followers_url": "https://api.github.com/users/mills95/followers", "following_url": "https://api.github.com/users/mills95/following{/other_user}", "gists_url": "https://api.github.com/users/mills95/gists{/gist_id}", "starred_url": "https://api.github.com/users/mills95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mills95/subscriptions", "organizations_url": "https://api.github.com/users/mills95/orgs", "repos_url": "https://api.github.com/users/mills95/repos", "events_url": "https://api.github.com/users/mills95/events{/privacy}", "received_events_url": "https://api.github.com/users/mills95/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-10T09:35:27Z", "updated_at": "2018-05-12T05:53:26Z", "closed_at": "2018-05-12T05:53:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "The recent refactoring (2018) has caused some issues with knowing when the system has obtained the metadata and parsed the forwarding IPs. When google-ip-forwarding was a standalone daemon, we could wait for it to complete before starting processes that depend on having those IPs.  However, now that it is dynamically spawned, this is no longer possible.  Is there an option to force google-ip-forwarding to run before google-network-daemon returns so we can wait on that?\r\nRight now, we have to put in a time delay which is both problematic and wasteful; we don't want to miss the completion, but we also want the server to start up as quickly as possible. But we have to have something that works if our instance is migrated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/602", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/602/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/602/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/602/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/602", "id": 321867723, "node_id": "MDU6SXNzdWUzMjE4Njc3MjM=", "number": 602, "title": "GetForwardedIps issues on RHEL7", "user": {"login": "mills95", "id": 22319880, "node_id": "MDQ6VXNlcjIyMzE5ODgw", "avatar_url": "https://avatars3.githubusercontent.com/u/22319880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mills95", "html_url": "https://github.com/mills95", "followers_url": "https://api.github.com/users/mills95/followers", "following_url": "https://api.github.com/users/mills95/following{/other_user}", "gists_url": "https://api.github.com/users/mills95/gists{/gist_id}", "starred_url": "https://api.github.com/users/mills95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mills95/subscriptions", "organizations_url": "https://api.github.com/users/mills95/orgs", "repos_url": "https://api.github.com/users/mills95/repos", "events_url": "https://api.github.com/users/mills95/events{/privacy}", "received_events_url": "https://api.github.com/users/mills95/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-05-10T09:29:21Z", "updated_at": "2019-12-09T14:58:02Z", "closed_at": "2018-07-30T21:03:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "When GetForwardedIps runs _RunIpRoute (effective command: ip route ls table local type local scope host dev eth0 proto 66), the result is 0 or more lines. If there is one or more forwarded ips, they are returned one per line but have \"local \" prepended to them.  This causes ParseForwardedIps to fail.\r\n\r\nThat may not be the case on other systems, but a simple solution works for all of them.  Before returning from GetForwardedIps, simply do a search & replace:\r\n`result = re.sub(r'local\\s((\\d{1,3}\\.){3}\\d{1,3}(/\\d{1,2})?)\\s?\\n', r'\\1\\n',result)`\r\n\r\nthen return as normal.  If there is a \"local \" tag, it gets removed, if not, nothing changes.\r\nThis helped me stop thousands of warnings from filling up /var/log/messages with:\r\n  google-ip-forwarding: WARNING Could not parse IP address: \"local\".", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/585", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/585/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/585/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/585/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/585", "id": 315986445, "node_id": "MDU6SXNzdWUzMTU5ODY0NDU=", "number": 585, "title": "Updating Linux Guest Environment for Debian 7", "user": {"login": "yihanzhen", "id": 33737743, "node_id": "MDQ6VXNlcjMzNzM3NzQz", "avatar_url": "https://avatars0.githubusercontent.com/u/33737743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yihanzhen", "html_url": "https://github.com/yihanzhen", "followers_url": "https://api.github.com/users/yihanzhen/followers", "following_url": "https://api.github.com/users/yihanzhen/following{/other_user}", "gists_url": "https://api.github.com/users/yihanzhen/gists{/gist_id}", "starred_url": "https://api.github.com/users/yihanzhen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yihanzhen/subscriptions", "organizations_url": "https://api.github.com/users/yihanzhen/orgs", "repos_url": "https://api.github.com/users/yihanzhen/repos", "events_url": "https://api.github.com/users/yihanzhen/events{/privacy}", "received_events_url": "https://api.github.com/users/yihanzhen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-19T18:17:27Z", "updated_at": "2018-04-19T18:28:29Z", "closed_at": "2018-04-19T18:28:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Hi,\r\nThis issue comes from the [documentation for installing linux guest environment](https://cloud.google.com/compute/docs/instances/linux-guest-environment). I started to receive notice saying I need to update the linux guest environment when I ssh into some GCE instances, yet there isn't instructions for debian 7. I tried to refer to the instructions for debian 8/9 but some resources is not found during the installation. Errors are listed below. Is there anything else I can do? Please let me know if I can provide more information.\r\nThanks in advance.\r\n```\r\nErr http://packages.cloud.google.com google-compute-engine-wheezy-stable/main amd64 Packages\r\n...\r\nReading state information... Done\r\nE: Unable to locate package python-google-compute-engine\r\nReading package lists... Done\r\nBuilding dependency tree       \r\nReading state information... Done\r\nE: Unable to locate package python3-google-compute-engine\r\nReading package lists... Done\r\nBuilding dependency tree       \r\nReading state information... Done\r\nE: Unable to locate package google-compute-engine-oslogin\r\nReading package lists... Done\r\nBuilding dependency tree       \r\nReading state information... Done\r\nE: Unable to locate package google-compute-engine\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/583", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/583/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/583/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/583/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/583", "id": 314876794, "node_id": "MDU6SXNzdWUzMTQ4NzY3OTQ=", "number": 583, "title": "syslog-ng incompatibility Centos7", "user": {"login": "tu144", "id": 38447158, "node_id": "MDQ6VXNlcjM4NDQ3MTU4", "avatar_url": "https://avatars0.githubusercontent.com/u/38447158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tu144", "html_url": "https://github.com/tu144", "followers_url": "https://api.github.com/users/tu144/followers", "following_url": "https://api.github.com/users/tu144/following{/other_user}", "gists_url": "https://api.github.com/users/tu144/gists{/gist_id}", "starred_url": "https://api.github.com/users/tu144/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tu144/subscriptions", "organizations_url": "https://api.github.com/users/tu144/orgs", "repos_url": "https://api.github.com/users/tu144/repos", "events_url": "https://api.github.com/users/tu144/events{/privacy}", "received_events_url": "https://api.github.com/users/tu144/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-04-17T01:56:37Z", "updated_at": "2019-09-03T17:49:08Z", "closed_at": "2019-09-03T17:49:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, can't install syslog-ng on google cloud using Centos7 image as google-compute-engine requires rsyslog:\r\n\r\nResolving Dependencies\r\n--> Running transaction check\r\n---> Package rsyslog.x86_64 0:8.24.0-12.el7 will be obsoleted\r\n--> Processing Dependency: rsyslog for package: google-compute-engine-2.7.6-1.el7.noarch\r\n---> Package si-syslog.x86_64 0:1.0-11.el6 will be obsoleting\r\n--> Processing Dependency: syslog-ng for package: si-syslog-1.0-11.el6.x86_64\r\n--> Running transaction check\r\n---> Package rsyslog.x86_64 0:8.24.0-12.el7 will be obsoleted\r\n--> Processing Dependency: rsyslog for package: google-compute-engine-2.7.6-1.el7.noarch\r\n---> Package syslog-ng.x86_64 0:3.5.6-3.el7 will be installed\r\n--> Processing Dependency: ivykis >= 0.36.1 for package: syslog-ng-3.5.6-3.el7.x86_64\r\n--> Processing Dependency: libivykis.so.0(IVYKIS_0.29)(64bit) for package: syslog-ng-3.5.6-3.el7.x86_64\r\n--> Processing Dependency: libivykis.so.0(IVYKIS_0.30)(64bit) for package: syslog-ng-3.5.6-3.el7.x86_64\r\n--> Processing Dependency: libevtlog.so.0()(64bit) for package: syslog-ng-3.5.6-3.el7.x86_64\r\n--> Processing Dependency: libivykis.so.0()(64bit) for package: syslog-ng-3.5.6-3.el7.x86_64\r\n--> Processing Dependency: libnet.so.1()(64bit) for package: syslog-ng-3.5.6-3.el7.x86_64\r\n--> Running transaction check\r\n---> Package eventlog.x86_64 0:0.2.13-4.el7 will be installed\r\n---> Package ivykis.x86_64 0:0.36.2-2.el7 will be installed\r\n---> Package libnet.x86_64 0:1.1.6-7.el7 will be installed\r\n---> Package rsyslog.x86_64 0:8.24.0-12.el7 will be obsoleted\r\n--> Processing Dependency: rsyslog for package: google-compute-engine-2.7.6-1.el7.noarch\r\n--> Finished Dependency Resolution\r\nError: Package: google-compute-engine-2.7.6-1.el7.noarch (@google-cloud-compute)\r\n           Requires: rsyslog\r\n           Removing: rsyslog-8.24.0-12.el7.x86_64 (@anaconda)\r\n               rsyslog = 8.24.0-12.el7\r\n           Obsoleted By: si-syslog-1.0-11.el6.x86_64 (local)\r\n               Not found\r\n You could try using --skip-broken to work around the problem\r\n You could try running: rpm -Va --nofiles --nodigest\r\nERROR: Yum operation 'Upgrading installed RPMs' failed!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/581", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/581/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/581/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/581/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/581", "id": 309961710, "node_id": "MDU6SXNzdWUzMDk5NjE3MTA=", "number": 581, "title": "sles11: enable-oslogin=true causes \"Permission denied\" for SSH", "user": {"login": "helen-fornazier", "id": 11065451, "node_id": "MDQ6VXNlcjExMDY1NDUx", "avatar_url": "https://avatars1.githubusercontent.com/u/11065451?v=4", "gravatar_id": "", "url": "https://api.github.com/users/helen-fornazier", "html_url": "https://github.com/helen-fornazier", "followers_url": "https://api.github.com/users/helen-fornazier/followers", "following_url": "https://api.github.com/users/helen-fornazier/following{/other_user}", "gists_url": "https://api.github.com/users/helen-fornazier/gists{/gist_id}", "starred_url": "https://api.github.com/users/helen-fornazier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/helen-fornazier/subscriptions", "organizations_url": "https://api.github.com/users/helen-fornazier/orgs", "repos_url": "https://api.github.com/users/helen-fornazier/repos", "events_url": "https://api.github.com/users/helen-fornazier/events{/privacy}", "received_events_url": "https://api.github.com/users/helen-fornazier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-30T02:55:43Z", "updated_at": "2018-03-30T03:54:20Z", "closed_at": "2018-03-30T03:54:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "How to reproduce:\r\n\r\nMake sure enable-oslogin is not defined in instance and project level.\r\nCreate an instance for Suse 11 (sles-11-sp4-v20180104)\r\nVerify that you can login successfully with `gcloud compute ssh instance`\r\nSet enable-oslogin=true in the instance\r\nWhen trying to login again with `gcloud compute ssh instance`, it fails with `Permission denied (publickey).`\r\n\r\nMessage in the logs:\r\n\r\n```\r\n...\r\nRestarting sshd.\r\nShutting down the listening SSH daemon                                done\r\nChecking for missing server keys in /etc/ssh\r\nStarting SSH daemon                                                   done\r\nno crontab for user1\r\nno crontab for user2\r\nno crontab for root\r\nuserdel: Cannot determine your user name.\r\nuserdel: Cannot determine your user name.\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/578", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/578/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/578/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/578/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/578", "id": 307719447, "node_id": "MDU6SXNzdWUzMDc3MTk0NDc=", "number": 578, "title": "Using LDAP auth breaks Google Authentication", "user": {"login": "danfrincu", "id": 1126551, "node_id": "MDQ6VXNlcjExMjY1NTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1126551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danfrincu", "html_url": "https://github.com/danfrincu", "followers_url": "https://api.github.com/users/danfrincu/followers", "following_url": "https://api.github.com/users/danfrincu/following{/other_user}", "gists_url": "https://api.github.com/users/danfrincu/gists{/gist_id}", "starred_url": "https://api.github.com/users/danfrincu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danfrincu/subscriptions", "organizations_url": "https://api.github.com/users/danfrincu/orgs", "repos_url": "https://api.github.com/users/danfrincu/repos", "events_url": "https://api.github.com/users/danfrincu/events{/privacy}", "received_events_url": "https://api.github.com/users/danfrincu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-03-22T16:28:53Z", "updated_at": "2018-03-22T16:43:45Z", "closed_at": "2018-03-22T16:43:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Pre-conditions:\r\nGoogle Auth is not the primary authentication system, base Centos 7 image is modified to use LDAP. \r\n\r\nIssue:\r\nWhen a user attempts to login, due to the conditional in https://github.com/GoogleCloudPlatform/compute-image-packages/blob/95bf03a658cca834a129951c0ea702d813e38033/google_compute_engine/accounts/accounts_utils.py#L300-L305 Google Accounts daemon runs something akin to `getent` and normally `/etc/passwd` is checked. If the user does not exist in the local `/etc/passwd` then the user\u2019s home directory is created and the ssh authorized_keys file is populated with the user\u2019s public SSH keys from the GCP metadata. \r\n\r\nWhen using LDAP, the same `getent` will return that the user is already created on the box but the workflow does not check if the local home directory exists and whether or not the authorized_keys file is populated with the public SSH keys from the GCP metadata. This results in a scenario where the user is prompted to use their password for the current and all future ssh sessions. This is an inconvenience for end-users, breaks functionality for automation and provisioning tooling and raises security concerns.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/562", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/562/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/562/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/562/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/562", "id": 300108068, "node_id": "MDU6SXNzdWUzMDAxMDgwNjg=", "number": 562, "title": "oslogin breaks OpenSSL setup", "user": {"login": "azrle", "id": 2177709, "node_id": "MDQ6VXNlcjIxNzc3MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/2177709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/azrle", "html_url": "https://github.com/azrle", "followers_url": "https://api.github.com/users/azrle/followers", "following_url": "https://api.github.com/users/azrle/following{/other_user}", "gists_url": "https://api.github.com/users/azrle/gists{/gist_id}", "starred_url": "https://api.github.com/users/azrle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/azrle/subscriptions", "organizations_url": "https://api.github.com/users/azrle/orgs", "repos_url": "https://api.github.com/users/azrle/repos", "events_url": "https://api.github.com/users/azrle/events{/privacy}", "received_events_url": "https://api.github.com/users/azrle/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-02-26T04:46:29Z", "updated_at": "2018-12-27T00:51:49Z", "closed_at": "2018-12-27T00:51:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nThe problem has been shown that when we use `getpwent()` with oslogin nss module, SSL setup will be broken after the call.\r\n\r\nHere is a simple code to reproduce it.\r\n```c\r\n#include <stdio.h>\r\n#include <openssl/evp.h>\r\n#include <pwd.h>\r\n\r\nint main() {\r\n    OpenSSL_add_all_algorithms();\r\n    EVP_get_digestbyname(\"sha256\") ? printf(\"loaded\\n\") : printf(\"not loaded\\n\");\r\n\r\n    struct passwd *pw;\r\n    setpwent();\r\n    while ((pw = getpwent()) != 0) {}\r\n\r\n    EVP_get_digestbyname(\"sha256\") ? printf(\"loaded\\n\") : printf(\"not loaded\\n\");\r\n    return 0;\r\n}\r\n```\r\n```\r\n$ gcc test-getpwent.c -lssl -lcrypto -o test-getpwent\r\n$ ./test-getpwent\r\nloaded\r\nnot loaded\r\n\r\n# after removing oslogin from /etc/nsswitch.conf\r\n$ ./test-getpwent\r\nloaded\r\nloaded\r\n```\r\n\r\nAfter tracking it down, I found that the cause can be the `curl_global_cleanup()` called by `oslogin_utils::HttpGet`.\r\n\r\nAs `oslogin` communicates with metadata without SSL/TLS, can we clear the `CURL_GLOBAL_SSL` bit when initialize curl so that it will not cleanup OpenSSL things?\r\n\r\nA simple test is as follows.\r\n```c\r\n#include <stdio.h>\r\n#include <openssl/evp.h>\r\n#include <curl/curl.h>\r\n\r\nint main() {\r\n    OpenSSL_add_all_algorithms();\r\n    EVP_get_digestbyname(\"sha256\") ? printf(\"loaded\\n\") : printf(\"not loaded\\n\");\r\n\r\n    curl_global_init(CURL_GLOBAL_ALL & ~CURL_GLOBAL_SSL);\r\n    curl_global_cleanup();\r\n\r\n    EVP_get_digestbyname(\"sha256\") ? printf(\"loaded\\n\") : printf(\"not loaded\\n\");\r\n    return 0;\r\n}\r\n```\r\n```\r\n$ gcc test-curl.c -lssl -lcrypto -lcurl -o test-curl\r\n$ ./test-curl\r\nloaded\r\nloaded\r\n```\r\n\r\nTest environment:\r\n```\r\nlibcurl3/xenial-updates,xenial-security,now 7.47.0-1ubuntu2.6 amd64 [installed]\r\nlibcurl3-gnutls/xenial-updates,xenial-security,now 7.47.0-1ubuntu2.6 amd64 [installed]\r\nlibcurl4-openssl-dev/xenial-updates,xenial-security,now 7.47.0-1ubuntu2.6 amd64 [installed]\r\nopenssl/xenial-updates,xenial-security,now 1.0.2g-1ubuntu4.10 amd64 [installed]\r\n```\r\n\r\nWhat do you think?\r\n\r\nBy the way, the original problem was shown when setting up instances via Chef on GCE with Ubuntu 16.04.  Ruby initializes the OpenSSL when requiring `openssl` (`Init_openssl`) and Chef calls `Etc.passwd` somewhere which leads to a runtime error when trying to use openssl again. \r\n```\r\nFATAL: RuntimeError: cookbook_file[xxxx] (xxx::xxx line N) had an error: RuntimeError: Unsupported digest algorithm (SHA256).\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/555", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/555/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/555/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/555/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/555", "id": 296167921, "node_id": "MDU6SXNzdWUyOTYxNjc5MjE=", "number": 555, "title": "Archive files location", "user": {"login": "alrii", "id": 13713496, "node_id": "MDQ6VXNlcjEzNzEzNDk2", "avatar_url": "https://avatars0.githubusercontent.com/u/13713496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alrii", "html_url": "https://github.com/alrii", "followers_url": "https://api.github.com/users/alrii/followers", "following_url": "https://api.github.com/users/alrii/following{/other_user}", "gists_url": "https://api.github.com/users/alrii/gists{/gist_id}", "starred_url": "https://api.github.com/users/alrii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alrii/subscriptions", "organizations_url": "https://api.github.com/users/alrii/orgs", "repos_url": "https://api.github.com/users/alrii/repos", "events_url": "https://api.github.com/users/alrii/events{/privacy}", "received_events_url": "https://api.github.com/users/alrii/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-11T07:12:54Z", "updated_at": "2018-02-14T23:22:56Z", "closed_at": "2018-02-14T23:22:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nWhere can i find the latest and archive previous files location? I would like to use it for package management. Thank you. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/550", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/550/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/550/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/550/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/550", "id": 293812261, "node_id": "MDU6SXNzdWUyOTM4MTIyNjE=", "number": 550, "title": "OS Login & SSHd \"Match\" option", "user": {"login": "davidebelloni", "id": 5926625, "node_id": "MDQ6VXNlcjU5MjY2MjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/5926625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidebelloni", "html_url": "https://github.com/davidebelloni", "followers_url": "https://api.github.com/users/davidebelloni/followers", "following_url": "https://api.github.com/users/davidebelloni/following{/other_user}", "gists_url": "https://api.github.com/users/davidebelloni/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidebelloni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidebelloni/subscriptions", "organizations_url": "https://api.github.com/users/davidebelloni/orgs", "repos_url": "https://api.github.com/users/davidebelloni/repos", "events_url": "https://api.github.com/users/davidebelloni/events{/privacy}", "received_events_url": "https://api.github.com/users/davidebelloni/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hopkiw", "id": 17957394, "node_id": "MDQ6VXNlcjE3OTU3Mzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/17957394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hopkiw", "html_url": "https://github.com/hopkiw", "followers_url": "https://api.github.com/users/hopkiw/followers", "following_url": "https://api.github.com/users/hopkiw/following{/other_user}", "gists_url": "https://api.github.com/users/hopkiw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hopkiw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hopkiw/subscriptions", "organizations_url": "https://api.github.com/users/hopkiw/orgs", "repos_url": "https://api.github.com/users/hopkiw/repos", "events_url": "https://api.github.com/users/hopkiw/events{/privacy}", "received_events_url": "https://api.github.com/users/hopkiw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-02-02T08:42:21Z", "updated_at": "2019-09-03T17:44:28Z", "closed_at": "2019-09-03T17:44:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nif the file sshd_config ends with a \"Match\" option, the two options added by \"google_oslogin_control\" are valid only for the matched accounts.\r\n\r\nI suggest to modify the lines added from these:\r\n\r\n```\r\n# Added by Google Compute Engine OS Login.\r\nAuthorizedKeysCommand /usr/bin/google_authorized_keys\r\n# Added by Google Compute Engine OS Login.\r\nAuthorizedKeysCommandUser root\r\n```\r\nto these:\r\n\r\n```\r\n# Added by Google Compute Engine OS Login.\r\nMatch all\r\n# Added by Google Compute Engine OS Login.\r\nAuthorizedKeysCommand /usr/bin/google_authorized_keys\r\n# Added by Google Compute Engine OS Login.\r\nAuthorizedKeysCommandUser root\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/548", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/548/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/548/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/548/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/548", "id": 293563296, "node_id": "MDU6SXNzdWUyOTM1NjMyOTY=", "number": 548, "title": "syslog-ng incompatibility ", "user": {"login": "Guidurand", "id": 20208509, "node_id": "MDQ6VXNlcjIwMjA4NTA5", "avatar_url": "https://avatars1.githubusercontent.com/u/20208509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Guidurand", "html_url": "https://github.com/Guidurand", "followers_url": "https://api.github.com/users/Guidurand/followers", "following_url": "https://api.github.com/users/Guidurand/following{/other_user}", "gists_url": "https://api.github.com/users/Guidurand/gists{/gist_id}", "starred_url": "https://api.github.com/users/Guidurand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Guidurand/subscriptions", "organizations_url": "https://api.github.com/users/Guidurand/orgs", "repos_url": "https://api.github.com/users/Guidurand/repos", "events_url": "https://api.github.com/users/Guidurand/events{/privacy}", "received_events_url": "https://api.github.com/users/Guidurand/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-02-01T15:04:58Z", "updated_at": "2018-02-13T14:42:02Z", "closed_at": "2018-02-07T01:04:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nSince the PR : https://github.com/GoogleCloudPlatform/compute-image-packages/pull/531 we can't use syslog-ng anymore, indeed the google-compute-engine package has rsyslog as dependancy\r\n\r\nI think it will be better to pass the rsyslog as recommend instead a dependancy and check the rsyslog presence in google_config/bin/google_set_hostname\r\n\r\nThanks a lot", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/541", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/541/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/541/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/541/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/541", "id": 292462527, "node_id": "MDU6SXNzdWUyOTI0NjI1Mjc=", "number": 541, "title": "google-compute-engine auto-removed when debian-8 VM created", "user": {"login": "h41t3r", "id": 16768116, "node_id": "MDQ6VXNlcjE2NzY4MTE2", "avatar_url": "https://avatars3.githubusercontent.com/u/16768116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/h41t3r", "html_url": "https://github.com/h41t3r", "followers_url": "https://api.github.com/users/h41t3r/followers", "following_url": "https://api.github.com/users/h41t3r/following{/other_user}", "gists_url": "https://api.github.com/users/h41t3r/gists{/gist_id}", "starred_url": "https://api.github.com/users/h41t3r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/h41t3r/subscriptions", "organizations_url": "https://api.github.com/users/h41t3r/orgs", "repos_url": "https://api.github.com/users/h41t3r/repos", "events_url": "https://api.github.com/users/h41t3r/events{/privacy}", "received_events_url": "https://api.github.com/users/h41t3r/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-29T16:02:45Z", "updated_at": "2018-01-29T19:54:16Z", "closed_at": "2018-01-29T19:54:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using packer from Hashicorp to create a custom debian-8 (image family) image. During the installation, the package google-compute-engine is installed and working. The moment I use the custom image to create a VM it appears the package is automatically removed. I would bypass this and install the package via a startup script, but the startup script functionality is actually package/built into the google-compute-engine package.\r\n\r\nadserver-gce-01:~$ dpkg -l  | grep google\r\nii  google-cloud-packages-archive-keyring 1.0-1                            all          Contains GPG signing key for Google Cloud Packages\r\nii  google-cloud-sdk                      183.0.0-0                        all          Utilities for the Google Cloud Platform\r\nrc  google-compute-engine                 2.7.2-2                          all          Google Compute Engine guest environment.\r\nii  google-compute-engine-oslogin         1.1.2-1+deb8                     amd64        Google Compute Engine OS Login\r\nii  python3-google-compute-engine         2.7.2-2                          all          Google Compute Engine python library for Python 3.x.\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/533", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/533/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/533/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/533/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/533", "id": 287841879, "node_id": "MDU6SXNzdWUyODc4NDE4Nzk=", "number": 533, "title": "question: version number clarification", "user": {"login": "helen-fornazier", "id": 11065451, "node_id": "MDQ6VXNlcjExMDY1NDUx", "avatar_url": "https://avatars1.githubusercontent.com/u/11065451?v=4", "gravatar_id": "", "url": "https://api.github.com/users/helen-fornazier", "html_url": "https://github.com/helen-fornazier", "followers_url": "https://api.github.com/users/helen-fornazier/followers", "following_url": "https://api.github.com/users/helen-fornazier/following{/other_user}", "gists_url": "https://api.github.com/users/helen-fornazier/gists{/gist_id}", "starred_url": "https://api.github.com/users/helen-fornazier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/helen-fornazier/subscriptions", "organizations_url": "https://api.github.com/users/helen-fornazier/orgs", "repos_url": "https://api.github.com/users/helen-fornazier/repos", "events_url": "https://api.github.com/users/helen-fornazier/events{/privacy}", "received_events_url": "https://api.github.com/users/helen-fornazier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-11T16:26:26Z", "updated_at": "2018-01-22T13:25:41Z", "closed_at": "2018-01-22T13:25:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nThere is a currently discussion going on in the FreeBSD community about which version number should be used for the google-compute-engine-oslogin package. The current question is if we should use the git tag as the FreeBSD port version or the MAJOR/MINOR/REVISION from the oslogin Makefile.\r\n \r\nPlease see discussion at https://reviews.freebsd.org/D13811#inline-83526\r\n\r\nCould you please clarify the meaning of the git tags? And which version do you think we should use for the FreeBSD oslogin package please?\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/521", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/521/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/521/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/521/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/521", "id": 275754064, "node_id": "MDU6SXNzdWUyNzU3NTQwNjQ=", "number": 521, "title": "dependencies not found when apt-get install gce-compute-image-packages", "user": {"login": "juanjosv", "id": 11852291, "node_id": "MDQ6VXNlcjExODUyMjkx", "avatar_url": "https://avatars0.githubusercontent.com/u/11852291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/juanjosv", "html_url": "https://github.com/juanjosv", "followers_url": "https://api.github.com/users/juanjosv/followers", "following_url": "https://api.github.com/users/juanjosv/following{/other_user}", "gists_url": "https://api.github.com/users/juanjosv/gists{/gist_id}", "starred_url": "https://api.github.com/users/juanjosv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/juanjosv/subscriptions", "organizations_url": "https://api.github.com/users/juanjosv/orgs", "repos_url": "https://api.github.com/users/juanjosv/repos", "events_url": "https://api.github.com/users/juanjosv/events{/privacy}", "received_events_url": "https://api.github.com/users/juanjosv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-11-21T15:30:34Z", "updated_at": "2017-11-28T19:48:18Z", "closed_at": "2017-11-27T23:26:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "When i try to update to allow connection throught web interface, as it say the message in: \r\n\r\nhttps://cloud.google.com/compute/docs/images/configuring-imported-images#install_guest_environment\r\n\r\nI write the command \"sudo apt-get install gce-compute-image-packages\" after updated the system, and cannt install due to dependencies not found:\r\n\r\nConnecting to download.oracle.com (download.oracle.com)|173.223.106.73|:80... connected.\r\nHTTP request sent, awaiting response... 404 Not Found\r\n2017-11-21 16:24:36 ERROR 404: Not Found.\r\n\r\ndownload failed\r\nOracle JDK 6 is NOT installed.\r\ndpkg: error processing package oracle-java6-installer (--configure):\r\n subprocess installed post-installation script returned error exit status 1\r\nErrors were encountered while processing:\r\n oracle-java6-installer\r\nE: Sub-process /usr/bin/dpkg returned an error code (1)\r\n\r\nAny solutions? Where can i fix the url for this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/520", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/520/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/520/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/520/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/520", "id": 275563173, "node_id": "MDU6SXNzdWUyNzU1NjMxNzM=", "number": 520, "title": "oslogin: json-c's includedir is /usr/include/json-c not /usr/include", "user": {"login": "wonderfly", "id": 6642209, "node_id": "MDQ6VXNlcjY2NDIyMDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/6642209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wonderfly", "html_url": "https://github.com/wonderfly", "followers_url": "https://api.github.com/users/wonderfly/followers", "following_url": "https://api.github.com/users/wonderfly/following{/other_user}", "gists_url": "https://api.github.com/users/wonderfly/gists{/gist_id}", "starred_url": "https://api.github.com/users/wonderfly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wonderfly/subscriptions", "organizations_url": "https://api.github.com/users/wonderfly/orgs", "repos_url": "https://api.github.com/users/wonderfly/repos", "events_url": "https://api.github.com/users/wonderfly/events{/privacy}", "received_events_url": "https://api.github.com/users/wonderfly/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-11-21T02:19:07Z", "updated_at": "2018-02-09T21:51:15Z", "closed_at": "2018-02-09T21:51:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Thus any inclusion of its header files should use `#include <json.h>` as opposed to `#include <json-c/json.h>`, which breaks on systems that rely on `pkg-config` to detect include dir and link dir for libraries.\r\n\r\nFrom json-c upstream: https://github.com/json-c/json-c/blob/master/Makefile.am#L17\r\n\r\nThis is true even on debian-9.\r\n```\r\n# apt-get install libjson-c-dev\r\n...\r\n# pkg-config --cflags json-c\r\n-I/usr/include/json-c\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/517", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/517/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/517/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/517/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/517", "id": 274699100, "node_id": "MDU6SXNzdWUyNzQ2OTkxMDA=", "number": 517, "title": "Instance under the Packer can't shutdown gracefully due the meta server absentee", "user": {"login": "tyzhnenko", "id": 671619, "node_id": "MDQ6VXNlcjY3MTYxOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/671619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tyzhnenko", "html_url": "https://github.com/tyzhnenko", "followers_url": "https://api.github.com/users/tyzhnenko/followers", "following_url": "https://api.github.com/users/tyzhnenko/following{/other_user}", "gists_url": "https://api.github.com/users/tyzhnenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tyzhnenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tyzhnenko/subscriptions", "organizations_url": "https://api.github.com/users/tyzhnenko/orgs", "repos_url": "https://api.github.com/users/tyzhnenko/repos", "events_url": "https://api.github.com/users/tyzhnenko/events{/privacy}", "received_events_url": "https://api.github.com/users/tyzhnenko/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-16T23:21:43Z", "updated_at": "2017-11-17T05:55:29Z", "closed_at": "2017-11-17T05:55:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "While create image for GCE, the Packer can't shutdown VM because the shutdown script stucks in an infinity loop\r\n```\r\n # /usr/bin/google_metadata_script_runner --script-type shutdown --debug\r\nshutdown-script: INFO Starting shutdown scripts.\r\nshutdown-script: ERROR GET request error retrieving metadata. <urlopen error [Errno -2] Name or service not known>.\r\n\r\n```\r\nActual for - google-compute-engine-2.7.1-1.el6.noarch", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/516", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/516/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/516/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/516/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/516", "id": 272407069, "node_id": "MDU6SXNzdWUyNzI0MDcwNjk=", "number": 516, "title": "Create a directory in the Python package for distro-specific patches", "user": {"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2017-11-09T01:14:53Z", "updated_at": "2018-02-09T21:52:19Z", "closed_at": "2018-02-09T21:52:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We can use this directory to clean up network setup logic, and enable Linux image distributions to have their patches maintained upstream.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/515", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/515/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/515/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/515/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/515", "id": 271817635, "node_id": "MDU6SXNzdWUyNzE4MTc2MzU=", "number": 515, "title": "oslogin: rpm post script causes a page fault on semodule", "user": {"login": "helen-fornazier", "id": 11065451, "node_id": "MDQ6VXNlcjExMDY1NDUx", "avatar_url": "https://avatars1.githubusercontent.com/u/11065451?v=4", "gravatar_id": "", "url": "https://api.github.com/users/helen-fornazier", "html_url": "https://github.com/helen-fornazier", "followers_url": "https://api.github.com/users/helen-fornazier/followers", "following_url": "https://api.github.com/users/helen-fornazier/following{/other_user}", "gists_url": "https://api.github.com/users/helen-fornazier/gists{/gist_id}", "starred_url": "https://api.github.com/users/helen-fornazier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/helen-fornazier/subscriptions", "organizations_url": "https://api.github.com/users/helen-fornazier/orgs", "repos_url": "https://api.github.com/users/helen-fornazier/repos", "events_url": "https://api.github.com/users/helen-fornazier/events{/privacy}", "received_events_url": "https://api.github.com/users/helen-fornazier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-11-07T12:41:09Z", "updated_at": "2017-11-07T19:40:49Z", "closed_at": "2017-11-07T19:27:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the post install script from the google-compute-engine-oslogin rpm package, the following command causes a page fault:\r\n    `semodule -i /usr/share/selinux/packages/oslogin.pp`\r\n\r\nI am reproducing this using Daisy tool to translate an image of a Centos 6.8. When installing the package google-compute-engine in the libguestfs environment I get this non fatal error, the problem is that it breaks the libaudit.so.1 links and some labels in the fs and make the user unable to login in the machine from this translated image.\r\n\r\nLogs: https://pastebin.com/raw/xL3cWXVB", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/513", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/513/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/513/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/513/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/513", "id": 270729080, "node_id": "MDU6SXNzdWUyNzA3MjkwODA=", "number": 513, "title": "Relation between account_daemon and oslogin tools", "user": {"login": "ilya-kolpakov", "id": 592849, "node_id": "MDQ6VXNlcjU5Mjg0OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/592849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilya-kolpakov", "html_url": "https://github.com/ilya-kolpakov", "followers_url": "https://api.github.com/users/ilya-kolpakov/followers", "following_url": "https://api.github.com/users/ilya-kolpakov/following{/other_user}", "gists_url": "https://api.github.com/users/ilya-kolpakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilya-kolpakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilya-kolpakov/subscriptions", "organizations_url": "https://api.github.com/users/ilya-kolpakov/orgs", "repos_url": "https://api.github.com/users/ilya-kolpakov/repos", "events_url": "https://api.github.com/users/ilya-kolpakov/events{/privacy}", "received_events_url": "https://api.github.com/users/ilya-kolpakov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-02T16:54:45Z", "updated_at": "2017-11-30T13:07:07Z", "closed_at": "2017-11-09T23:07:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using [NixOS](https://nixos.org/) on GCE and am looking into integrating authorization/authentication features. I see a certain redundancy in the provided features and I would like to confirm that my conceptual understanding is correct. Could you please tell me if I understand it correctly that\r\n\r\n1. `google_authorized_keys` executable, `pam_oslogin_{login,admin}.so` modules and `nss_oslogin` modules always query the metadata server and do not rely in any way on `google_accounts_daemon`.\r\n2. the primary goal of `google_accounts_daemon` is to keep the system database of users/accounts (`/etc/passwd`) in sync with the metadata server (rather than to merely keep a local copy of user/account/rights from the metadata server).\r\n\r\nI see that the provided set of tools provides a lot flexibility. What I do not quite understand is the motivation to duplicate/maintain GCE user accounts in the standard UNIX user/group database. The alternative I have in mind is that the GCE daemon\r\n1. maintains GCE accounts in sync with the metadata server\r\n2. exposes them via PAM modules which consumers are configured to use\r\n\r\nWith this design GCE and system accounts never mix so that if something fails it is easier to identify what went wrong. The priority of different authentication methods also becomes more transparent as it is explicit in the configuration files of PAM consumers.\r\n\r\nOne big difference in comparison with the existing design (if I understand it correctly) is that deployment would require to reconfigure all the relevant PAM consumers to use GCE modules. I don't see it as disadvantage as the resulting permissions would arguably become much more transparent to the user.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/511", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/511/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/511/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/511/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/511", "id": 269844524, "node_id": "MDU6SXNzdWUyNjk4NDQ1MjQ=", "number": 511, "title": "version specification is missing in RPM dependency for (python)-google-compute-engine packages", "user": {"login": "tomlanyon", "id": 210299, "node_id": "MDQ6VXNlcjIxMDI5OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/210299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomlanyon", "html_url": "https://github.com/tomlanyon", "followers_url": "https://api.github.com/users/tomlanyon/followers", "following_url": "https://api.github.com/users/tomlanyon/following{/other_user}", "gists_url": "https://api.github.com/users/tomlanyon/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomlanyon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomlanyon/subscriptions", "organizations_url": "https://api.github.com/users/tomlanyon/orgs", "repos_url": "https://api.github.com/users/tomlanyon/repos", "events_url": "https://api.github.com/users/tomlanyon/events{/privacy}", "received_events_url": "https://api.github.com/users/tomlanyon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-31T06:00:58Z", "updated_at": "2017-11-29T19:18:54Z", "closed_at": "2017-11-29T19:18:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, google-compute-engine can be upgraded independently from python-google-compute-engine, which results in all the scripts from the former package failing, unable to find the python distribution of the new version.\r\n\r\nFor example, after a 'yum upgrade google-compute-engine':\r\n\r\n```\r\ngoogle_accounts_daemon: Traceback (most recent call last):\r\ngoogle_accounts_daemon: File \"/usr/bin/google_accounts_daemon\", line 5, in <module>\r\ngoogle_accounts_daemon: from pkg_resources import load_entry_point\r\ngoogle_accounts_daemon: File \"/usr/lib/python2.7/site-packages/pkg_resources.py\", line 3011, in <module>\r\ngoogle_accounts_daemon: parse_requirements(__requires__), Environment()\r\ngoogle_accounts_daemon: File \"/usr/lib/python2.7/site-packages/pkg_resources.py\", line 626, in resolve\r\ngoogle_accounts_daemon: raise DistributionNotFound(req) \r\ngoogle_accounts_daemon: pkg_resources.DistributionNotFound: google-compute-engine==2.7.1\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/505", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/505/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/505/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/505/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/505", "id": 266640701, "node_id": "MDU6SXNzdWUyNjY2NDA3MDE=", "number": 505, "title": "NTP client flexibility: please loosen Depends field for google-compute-engine deb", "user": {"login": "jkaplowitz", "id": 1211065, "node_id": "MDQ6VXNlcjEyMTEwNjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1211065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkaplowitz", "html_url": "https://github.com/jkaplowitz", "followers_url": "https://api.github.com/users/jkaplowitz/followers", "following_url": "https://api.github.com/users/jkaplowitz/following{/other_user}", "gists_url": "https://api.github.com/users/jkaplowitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkaplowitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkaplowitz/subscriptions", "organizations_url": "https://api.github.com/users/jkaplowitz/orgs", "repos_url": "https://api.github.com/users/jkaplowitz/repos", "events_url": "https://api.github.com/users/jkaplowitz/events{/privacy}", "received_events_url": "https://api.github.com/users/jkaplowitz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-18T21:01:40Z", "updated_at": "2017-10-18T22:12:57Z", "closed_at": "2017-10-18T22:12:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "GCE best practice requires that VMs sync time via NTP to metadata.google.internal, but doesn't inherently require the particular NTP software in the \"ntp\" pacakge. Debian ships three NTP clients, and https://lwn.net/Articles/735211/ indicates that the more lightweight option chrony is the most secure.\r\n\r\nTherefore, it would be great if you could loosen the mention of \"ntp\" in the google-compute-engine Depends line to indicate \"chrony | ntp | time-daemon\" instead. This should allow all available options to work, keeping whichever one is already installed upon upgrades, and preferring chrony if none are installed.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/504", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/504/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/504/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/504/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/504", "id": 266636825, "node_id": "MDU6SXNzdWUyNjY2MzY4MjU=", "number": 504, "title": "instance_setup should generate SSH host keys when none are present", "user": {"login": "jkaplowitz", "id": 1211065, "node_id": "MDQ6VXNlcjEyMTEwNjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1211065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkaplowitz", "html_url": "https://github.com/jkaplowitz", "followers_url": "https://api.github.com/users/jkaplowitz/followers", "following_url": "https://api.github.com/users/jkaplowitz/following{/other_user}", "gists_url": "https://api.github.com/users/jkaplowitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkaplowitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkaplowitz/subscriptions", "organizations_url": "https://api.github.com/users/jkaplowitz/orgs", "repos_url": "https://api.github.com/users/jkaplowitz/repos", "events_url": "https://api.github.com/users/jkaplowitz/events{/privacy}", "received_events_url": "https://api.github.com/users/jkaplowitz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-18T20:48:22Z", "updated_at": "2018-02-09T21:52:54Z", "closed_at": "2018-02-09T21:52:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Right now, instance_setup does not correctly handle the case where no SSH host keys are present, failing to generate them and preventing SSH from starting.\r\n\r\nInstead, when instance_setup triggers a key (re)generation, it could work this way:\r\n\r\n1. If instance_config specifies a list of cipher suites for which to generate host keys, generate that list.\r\n1. Otherwise, if any host keys are present on the system, generate that list.\r\n1. Otherwise, unconditionally generate ed25519, ecdsa, and rsa host keys. Don't generate dsa keys in this case, as they're no longer viewed as secure; for example, Debian 9 no longer generates these keys upon a fresh install.\r\n\r\nIn terms of evaluating success vs failure, a success would be \"at least one freshly generated host key is created, and no pre-existing host key remains on the system.\" If no host keys end up on the disk, it willl be impossible to log in, and if any old host keys remain present, there may be a security issue.\r\n\r\nI suggest logging a non-blocking debugging message if any attempted cipher types fail to generate, but this is not inherently a problem by itself.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/496", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/496/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/496/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/496/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/496", "id": 265456415, "node_id": "MDU6SXNzdWUyNjU0NTY0MTU=", "number": 496, "title": "Add OS Login as a package dependency.", "user": {"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "zmarano", "id": 4564273, "node_id": "MDQ6VXNlcjQ1NjQyNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4564273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zmarano", "html_url": "https://github.com/zmarano", "followers_url": "https://api.github.com/users/zmarano/followers", "following_url": "https://api.github.com/users/zmarano/following{/other_user}", "gists_url": "https://api.github.com/users/zmarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/zmarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zmarano/subscriptions", "organizations_url": "https://api.github.com/users/zmarano/orgs", "repos_url": "https://api.github.com/users/zmarano/repos", "events_url": "https://api.github.com/users/zmarano/events{/privacy}", "received_events_url": "https://api.github.com/users/zmarano/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zmarano", "id": 4564273, "node_id": "MDQ6VXNlcjQ1NjQyNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/4564273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zmarano", "html_url": "https://github.com/zmarano", "followers_url": "https://api.github.com/users/zmarano/followers", "following_url": "https://api.github.com/users/zmarano/following{/other_user}", "gists_url": "https://api.github.com/users/zmarano/gists{/gist_id}", "starred_url": "https://api.github.com/users/zmarano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zmarano/subscriptions", "organizations_url": "https://api.github.com/users/zmarano/orgs", "repos_url": "https://api.github.com/users/zmarano/repos", "events_url": "https://api.github.com/users/zmarano/events{/privacy}", "received_events_url": "https://api.github.com/users/zmarano/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-10-14T02:02:13Z", "updated_at": "2017-10-16T23:42:23Z", "closed_at": "2017-10-16T23:42:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The google-compute-engine should depend on the google-compute-engine-oslogin package.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/491", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/491/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/491/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/491/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/491", "id": 264304701, "node_id": "MDU6SXNzdWUyNjQzMDQ3MDE=", "number": 491, "title": "hostname and hosts entries not working on CentOS7 w/o NetworkManager", "user": {"login": "travisgroth", "id": 6198562, "node_id": "MDQ6VXNlcjYxOTg1NjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/6198562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/travisgroth", "html_url": "https://github.com/travisgroth", "followers_url": "https://api.github.com/users/travisgroth/followers", "following_url": "https://api.github.com/users/travisgroth/following{/other_user}", "gists_url": "https://api.github.com/users/travisgroth/gists{/gist_id}", "starred_url": "https://api.github.com/users/travisgroth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/travisgroth/subscriptions", "organizations_url": "https://api.github.com/users/travisgroth/orgs", "repos_url": "https://api.github.com/users/travisgroth/repos", "events_url": "https://api.github.com/users/travisgroth/events{/privacy}", "received_events_url": "https://api.github.com/users/travisgroth/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-10-10T17:04:57Z", "updated_at": "2017-11-29T03:35:45Z", "closed_at": "2017-10-27T20:51:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Unsure if this is also broken in CentOS6 and other derivatives but if you have NetworkManager disabled, the google-compute-engine script installed at /etc/dhcp/dhclient.d/google_hostname.sh does not function correctly.  While /etc/resolv.conf is updated properly, the system hostname, /etc/hosts entries and metadata hosts entries are never installed.  \r\n\r\nThe root cause appears to be that google_hostname.sh calls /bin/set_hostname without any path:\r\n````\r\ngoogle_hostname_config() {\r\n  set_hostname\r\n}\r\n````\r\nand the redhat network-scripts environment defines a function called set_hostname, which winds up conflicting:\r\n````\r\n grep set_hostname -R /etc/*\r\n/etc/dhcp/dhclient.d/google_hostname.sh:  /bin/set_hostname\r\n/etc/sysconfig/network-scripts/network-functions:set_hostname ()\r\n/etc/sysconfig/network-scripts/ifup-post:\t    set_hostname $HOSTNAME\r\n````\r\n\r\nThe net result is that google's /bin/set_hostname is never called.  Changing google_hostname.sh to reference set_hostname with a full path fixes the issue.  It might be better to just rename set_hostname to something that is clearly a google specific script, however.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/485", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/485/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/485/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/485/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/485", "id": 261475493, "node_id": "MDU6SXNzdWUyNjE0NzU0OTM=", "number": 485, "title": "Create udev rule for nvme disks to /dev/disk/by-id symlinks", "user": {"login": "davidz627", "id": 5459214, "node_id": "MDQ6VXNlcjU0NTkyMTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/5459214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidz627", "html_url": "https://github.com/davidz627", "followers_url": "https://api.github.com/users/davidz627/followers", "following_url": "https://api.github.com/users/davidz627/following{/other_user}", "gists_url": "https://api.github.com/users/davidz627/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidz627/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidz627/subscriptions", "organizations_url": "https://api.github.com/users/davidz627/orgs", "repos_url": "https://api.github.com/users/davidz627/repos", "events_url": "https://api.github.com/users/davidz627/events{/privacy}", "received_events_url": "https://api.github.com/users/davidz627/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-09-28T22:05:31Z", "updated_at": "2018-04-10T20:52:03Z", "closed_at": "2018-04-10T20:52:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "A rule needs to be created so that uniquely identifiable symlinks are created for all attached nvme storage devices. This is necessary for us to enable nvme local ssd storage for users.\r\n\r\nMaybe added to this file:\r\nhttps://github.com/GoogleCloudPlatform/compute-image-packages/blob/development/google_config/udev/65-gce-disk-naming.rules\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/475", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/475/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/475/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/475/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/475", "id": 255438224, "node_id": "MDU6SXNzdWUyNTU0MzgyMjQ=", "number": 475, "title": "Provide ifup and ifdown hook to google-network-setup.service", "user": {"login": "thyj", "id": 26258585, "node_id": "MDQ6VXNlcjI2MjU4NTg1", "avatar_url": "https://avatars1.githubusercontent.com/u/26258585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thyj", "html_url": "https://github.com/thyj", "followers_url": "https://api.github.com/users/thyj/followers", "following_url": "https://api.github.com/users/thyj/following{/other_user}", "gists_url": "https://api.github.com/users/thyj/gists{/gist_id}", "starred_url": "https://api.github.com/users/thyj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thyj/subscriptions", "organizations_url": "https://api.github.com/users/thyj/orgs", "repos_url": "https://api.github.com/users/thyj/repos", "events_url": "https://api.github.com/users/thyj/events{/privacy}", "received_events_url": "https://api.github.com/users/thyj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-09-05T23:33:54Z", "updated_at": "2019-08-18T16:23:54Z", "closed_at": "2018-12-27T00:53:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "`google-network-setup.service` brings up and configures NICs on VM. Customer may want to configure policy routing for VM with multiple NICs [1]. However, it's hard to make policy routing configuration persistent:\r\n\r\n1. There's no ifup or ifdown hook to `google-network-setup.service`. Adding policy routing configuration command to `/etc/rc.local` won't make it survive an OS restart if `google-network-setup.service` actually runs after rc.local. See [2] for an example.\r\n\r\n2. Policy routing configuration will be lost after 'systemctl restart google-network-setup.service'. See [3] for example.\r\n\r\nRHEL/CentOS can define routing policy in `/etc/syconfig/network-scripts/route-ethN`. Ideally, google-network-setup.service should support similar ifup or ifdown hook to make the configuration persistent.\r\n\r\n\r\n[1] https://cloud.google.com/compute/docs/create-use-multiple-interfaces#configuring_policy_routing\r\n\r\n[2]\r\n```\r\n[root@ws2 ~]# tail -3 /etc/rc.local \r\nip route add 10.128.144.0/20 via 10.128.208.1 dev eth1\r\nip route add 10.138.176.0/20 via 10.128.208.1 dev eth1\r\nip route add 10.142.192.0/20 via 10.128.208.1 dev eth1\r\n[root@ws2 ~]# \r\n```\r\n```\r\n[root@ws2 ~]# grep -E 'rc.local|network-setup' /var/log/messages\r\nSep  5 23:15:51 ws2 systemd: Starting /etc/rc.d/rc.local Compatibility...\r\nSep  5 23:15:51 ws2 rc.local: Tue Sep  5 23:15:51 UTC 2017\r\nSep  5 23:15:51 ws2 rc.local: RTNETLINK answers: Network is unreachable\r\nSep  5 23:15:51 ws2 rc.local: RTNETLINK answers: Network is unreachable\r\nSep  5 23:15:51 ws2 rc.local: RTNETLINK answers: Network is unreachable\r\nSep  5 23:15:51 ws2 rc.local: Tue Sep  5 23:15:51 UTC 2017\r\nSep  5 23:15:51 ws2 systemd: Started /etc/rc.d/rc.local Compatibility.\r\nSep  5 23:15:53 ws2 network-setup: INFO Enabling the Ethernet interfaces ['eth0', 'eth1'].\r\n[root@ws2 ~]# \r\n```\r\n\r\n[3]\r\n```\r\n[root@ws2 ~]# ip route add 10.128.144.0/20 via 10.128.208.1 dev eth1\r\n[root@ws2 ~]# ip route add 10.138.176.0/20 via 10.128.208.1 dev eth1\r\n[root@ws2 ~]# ip route add 10.142.192.0/20 via 10.128.208.1 dev eth1\r\n[root@ws2 ~]# ip route | grep eth1\r\n10.128.144.0/20 via 10.128.208.1 dev eth1 \r\n10.128.208.0/20 via 10.128.208.1 dev eth1  proto static \r\n10.128.208.1 dev eth1  scope link \r\n10.138.176.0/20 via 10.128.208.1 dev eth1 \r\n10.142.192.0/20 via 10.128.208.1 dev eth1 \r\n[root@ws2 ~]# systemctl restart google-network-setup.service\r\n[root@ws2 ~]# ip route | grep eth1\r\n10.128.208.0/20 via 10.128.208.1 dev eth1  proto static \r\n10.128.208.1 dev eth1  scope link \r\n[root@ws2 ~]# \r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/462", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/462/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/462/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/462/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/462", "id": 251247610, "node_id": "MDU6SXNzdWUyNTEyNDc2MTA=", "number": 462, "title": "ImportError: cannot import name constants when upgrading from 2.4.1 to 2.5.2", "user": {"login": "dwsc", "id": 6210388, "node_id": "MDQ6VXNlcjYyMTAzODg=", "avatar_url": "https://avatars3.githubusercontent.com/u/6210388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwsc", "html_url": "https://github.com/dwsc", "followers_url": "https://api.github.com/users/dwsc/followers", "following_url": "https://api.github.com/users/dwsc/following{/other_user}", "gists_url": "https://api.github.com/users/dwsc/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwsc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwsc/subscriptions", "organizations_url": "https://api.github.com/users/dwsc/orgs", "repos_url": "https://api.github.com/users/dwsc/repos", "events_url": "https://api.github.com/users/dwsc/events{/privacy}", "received_events_url": "https://api.github.com/users/dwsc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-18T13:36:48Z", "updated_at": "2017-09-06T22:43:35Z", "closed_at": "2017-09-05T23:38:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "My instances upgraded from 2.4.1 to 2.5.2 and importing boto fails as follows.  Rolling back to 2.4.1 fixes the issue.\r\n\r\n```\r\nfrom boto import connect_s3, connect_gs\r\n  File \"/home/something/.virtualenvs/something/lib/python2.7/site-packages/boto/__init__.py\", line 1216, in <module>\r\n    boto.plugin.load_plugins(config)\r\n  File \"/home/something/.virtualenvs/something/lib/python2.7/site-packages/boto/plugin.py\", line 93, in load_plugins\r\n    _import_module(file)\r\n  File \"/home/something/.virtualenvs/something/lib/python2.7/site-packages/boto/plugin.py\", line 75, in _import_module\r\n    return imp.load_module(name, file, filename, data)\r\n  File \"/usr/lib/python2.7/site-packages/google_compute_engine/boto/boto_config.py\", line 30, in <module>\r\n    from google_compute_engine import constants\r\nImportError: cannot import name constants\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/445", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/445/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/445/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/445/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/445", "id": 245599652, "node_id": "MDU6SXNzdWUyNDU1OTk2NTI=", "number": 445, "title": "Very unhelpful startup traceback if the syslog is unavailable", "user": {"login": "the-maldridge", "id": 2321814, "node_id": "MDQ6VXNlcjIzMjE4MTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/2321814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the-maldridge", "html_url": "https://github.com/the-maldridge", "followers_url": "https://api.github.com/users/the-maldridge/followers", "following_url": "https://api.github.com/users/the-maldridge/following{/other_user}", "gists_url": "https://api.github.com/users/the-maldridge/gists{/gist_id}", "starred_url": "https://api.github.com/users/the-maldridge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the-maldridge/subscriptions", "organizations_url": "https://api.github.com/users/the-maldridge/orgs", "repos_url": "https://api.github.com/users/the-maldridge/repos", "events_url": "https://api.github.com/users/the-maldridge/events{/privacy}", "received_events_url": "https://api.github.com/users/the-maldridge/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-07-26T03:58:54Z", "updated_at": "2017-09-06T01:17:31Z", "closed_at": "2017-09-06T01:17:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "If for some reason the system logging socket is unavailable (i.e. the syslog failed to start, or is not installed) all of the daemons and init tasks provided by this package die with a traceback for a socket error.  The errno returned is 2 (no such file or directory).\r\n\r\nIt would be nice to catch that exception when the logging is starting up and spit out a print statement that the logging socket is unavailable.  It would also be nice to have an option to gracefully degrade rather than just hitting a hard fault.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/444", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/444/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/444/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/444/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/444", "id": 245249744, "node_id": "MDU6SXNzdWUyNDUyNDk3NDQ=", "number": 444, "title": "google-accounts-daemon error \"Full path required for exclude: net:\" when running Docker containers", "user": {"login": "craigafinch", "id": 13557941, "node_id": "MDQ6VXNlcjEzNTU3OTQx", "avatar_url": "https://avatars1.githubusercontent.com/u/13557941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craigafinch", "html_url": "https://github.com/craigafinch", "followers_url": "https://api.github.com/users/craigafinch/followers", "following_url": "https://api.github.com/users/craigafinch/following{/other_user}", "gists_url": "https://api.github.com/users/craigafinch/gists{/gist_id}", "starred_url": "https://api.github.com/users/craigafinch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craigafinch/subscriptions", "organizations_url": "https://api.github.com/users/craigafinch/orgs", "repos_url": "https://api.github.com/users/craigafinch/repos", "events_url": "https://api.github.com/users/craigafinch/events{/privacy}", "received_events_url": "https://api.github.com/users/craigafinch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-07-25T00:10:04Z", "updated_at": "2017-10-18T03:09:16Z", "closed_at": "2017-10-18T03:09:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "google-accounts-daemon fills the system log with error messages on two CentOS 7 VMs. The only factor in common between these systems is that both are running Docker. My other CentOS 7 instances do not have this problem. When no Docker containers are running, no error messages are recorded. As soon as I use docker-compose to start containers, these error messages start to occur in the logs. There is always a group of 4 such messages together-it is probably not a coincidence that I am running 4 containers.\r\n\r\n```\r\n[root@instance-01 ~]$ systemctl status google-accounts-daemon.service\r\n\u25cf google-accounts-daemon.service - Google Compute Engine Accounts Daemon\r\n   Loaded: loaded (/usr/lib/systemd/system/google-accounts-daemon.service; enabled; vendor preset: disabled)\r\n   Active: active (running) since Mon 2017-07-24 23:37:10 UTC; 11min ago\r\n Main PID: 27359 (google_accounts)\r\n   CGroup: /system.slice/google-accounts-daemon.service\r\n           \u2514\u250027359 /usr/bin/python /usr/bin/google_accounts_daemon\r\n\r\nJul 24 23:44:20instance-01 google_accounts_daemon[27359]: Full path required for exclude: net:[4026532310].\r\nJul 24 23:44:20 instance-01 google_accounts_daemon[27359]: Full path required for exclude: net:[4026532376].\r\nJul 24 23:45:46 instance-01 google_accounts_daemon[27359]: Full path required for exclude: net:[4026532180].\r\n```\r\n\r\nThis behavior has also been reported here: https://stackoverflow.com/questions/45156390/google-accounts-daemon1140-full-path-required-for-exclude-net4026532634\r\n\r\nCan you please disable these messages to keep noise out of the log files?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/426", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/426/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/426/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/426/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/426", "id": 238154275, "node_id": "MDU6SXNzdWUyMzgxNTQyNzU=", "number": 426, "title": "Impossible to install rpm package under the Packer", "user": {"login": "tyzhnenko", "id": 671619, "node_id": "MDQ6VXNlcjY3MTYxOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/671619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tyzhnenko", "html_url": "https://github.com/tyzhnenko", "followers_url": "https://api.github.com/users/tyzhnenko/followers", "following_url": "https://api.github.com/users/tyzhnenko/following{/other_user}", "gists_url": "https://api.github.com/users/tyzhnenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tyzhnenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tyzhnenko/subscriptions", "organizations_url": "https://api.github.com/users/tyzhnenko/orgs", "repos_url": "https://api.github.com/users/tyzhnenko/repos", "events_url": "https://api.github.com/users/tyzhnenko/events{/privacy}", "received_events_url": "https://api.github.com/users/tyzhnenko/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-23T14:12:34Z", "updated_at": "2017-09-05T23:37:19Z", "closed_at": "2017-09-05T23:37:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I tried to prepare own image with the Packer I've tried to install pakages _google-compute-engine_, _google-compute-engine-init_, _google-config_ and while installation the config script from _google-compute-engine_ package [1] trying to reach metadata service and going into infinite loop.\r\n\r\n1 - /usr/bin/google_instance_setup ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/424", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/424/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/424/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/424/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/424", "id": 238011959, "node_id": "MDU6SXNzdWUyMzgwMTE5NTk=", "number": 424, "title": "Update OS Login sudo file permissions to restrict read access.", "user": {"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-06-23T00:51:12Z", "updated_at": "2017-06-26T02:18:54Z", "closed_at": "2017-06-26T02:18:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A non-sudo user shouldn't be able to see every user with sudo access in the VM.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/423", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/423/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/423/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/423/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/423", "id": 238011542, "node_id": "MDU6SXNzdWUyMzgwMTE1NDI=", "number": 423, "title": "OS Login sudoer files should be written to a var directory.", "user": {"login": "illfelder", "id": 1766378, "node_id": "MDQ6VXNlcjE3NjYzNzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1766378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illfelder", "html_url": "https://github.com/illfelder", "followers_url": "https://api.github.com/users/illfelder/followers", "following_url": "https://api.github.com/users/illfelder/following{/other_user}", "gists_url": "https://api.github.com/users/illfelder/gists{/gist_id}", "starred_url": "https://api.github.com/users/illfelder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illfelder/subscriptions", "organizations_url": "https://api.github.com/users/illfelder/orgs", "repos_url": "https://api.github.com/users/illfelder/repos", "events_url": "https://api.github.com/users/illfelder/events{/privacy}", "received_events_url": "https://api.github.com/users/illfelder/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-06-23T00:47:34Z", "updated_at": "2017-06-26T02:18:47Z", "closed_at": "2017-06-26T02:18:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently we write a file for each sudoer in `/etc/google_sudoers/`. It would make more sense if this location was `/var/google-sudoers.d/`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/418", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/418/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/418/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/418/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/418", "id": 236407931, "node_id": "MDU6SXNzdWUyMzY0MDc5MzE=", "number": 418, "title": "Ubuntu trusty missing all daemons", "user": {"login": "dovy", "id": 890963, "node_id": "MDQ6VXNlcjg5MDk2Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/890963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dovy", "html_url": "https://github.com/dovy", "followers_url": "https://api.github.com/users/dovy/followers", "following_url": "https://api.github.com/users/dovy/following{/other_user}", "gists_url": "https://api.github.com/users/dovy/gists{/gist_id}", "starred_url": "https://api.github.com/users/dovy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dovy/subscriptions", "organizations_url": "https://api.github.com/users/dovy/orgs", "repos_url": "https://api.github.com/users/dovy/repos", "events_url": "https://api.github.com/users/dovy/events{/privacy}", "received_events_url": "https://api.github.com/users/dovy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-06-16T07:56:30Z", "updated_at": "2017-06-16T19:25:21Z", "closed_at": "2017-06-16T19:25:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "How the crap do I get the daemons to properly install? Something happened and I can only access the box if I manually add a public key. The gcloud ssh auth or UI w/ ssh button on the console fail to allow access.\r\n\r\nAny help would be appreciated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/414", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/414/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/414/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/414/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/414", "id": 236273529, "node_id": "MDU6SXNzdWUyMzYyNzM1Mjk=", "number": 414, "title": "Consider tagging releases with their version instead", "user": {"login": "bsiegert", "id": 866330, "node_id": "MDQ6VXNlcjg2NjMzMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/866330?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bsiegert", "html_url": "https://github.com/bsiegert", "followers_url": "https://api.github.com/users/bsiegert/followers", "following_url": "https://api.github.com/users/bsiegert/following{/other_user}", "gists_url": "https://api.github.com/users/bsiegert/gists{/gist_id}", "starred_url": "https://api.github.com/users/bsiegert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bsiegert/subscriptions", "organizations_url": "https://api.github.com/users/bsiegert/orgs", "repos_url": "https://api.github.com/users/bsiegert/repos", "events_url": "https://api.github.com/users/bsiegert/events{/privacy}", "received_events_url": "https://api.github.com/users/bsiegert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-15T18:17:39Z", "updated_at": "2017-06-16T00:04:21Z", "closed_at": "2017-06-16T00:04:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "The last stable release (20170523) used a `version` string of 2.3.7. \r\n\r\nTo be more in line with how most open source projects release stuff, I suggest that you use the version as the tag for your releases in the future. That is, the next release could be tagged `v2.4.0` instead of the release date.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/407", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/407/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/407/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/407/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/407", "id": 232606192, "node_id": "MDU6SXNzdWUyMzI2MDYxOTI=", "number": 407, "title": "stretch image using eth instead of ens", "user": {"login": "henti", "id": 28868601, "node_id": "MDQ6VXNlcjI4ODY4NjAx", "avatar_url": "https://avatars3.githubusercontent.com/u/28868601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henti", "html_url": "https://github.com/henti", "followers_url": "https://api.github.com/users/henti/followers", "following_url": "https://api.github.com/users/henti/following{/other_user}", "gists_url": "https://api.github.com/users/henti/gists{/gist_id}", "starred_url": "https://api.github.com/users/henti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henti/subscriptions", "organizations_url": "https://api.github.com/users/henti/orgs", "repos_url": "https://api.github.com/users/henti/repos", "events_url": "https://api.github.com/users/henti/events{/privacy}", "received_events_url": "https://api.github.com/users/henti/received_events", "type": "User", "site_admin": true}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-05-31T15:33:35Z", "updated_at": "2017-06-07T07:58:11Z", "closed_at": "2017-06-06T23:59:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "I created a test instance using https://wiki.debian.org/Cloud/GoogleComputeEngineImage, specifically :\r\n`gcloud compute instances create my-test-machine --image-project debian-cloud-testing --image-family debian-9`\r\nThe created image has interface on eth+ instead of en+ \r\n```\r\nroot@debian-9:/var/log# cat /etc/debian_version \r\n9.0\r\nroot@debian-9:/var/log# udevadm info /sys/class/net/eth0\r\nP: /devices/pci0000:00/0000:00:04.0/virtio1/net/eth0\r\nE: DEVPATH=/devices/pci0000:00/0000:00:04.0/virtio1/net/eth0\r\nE: ID_BUS=pci\r\nE: ID_MODEL_FROM_DATABASE=Virtio network device\r\nE: ID_MODEL_ID=0x1000\r\nE: ID_NET_DRIVER=virtio_net\r\nE: ID_NET_LINK_FILE=/lib/systemd/network/99-default.link\r\nE: ID_NET_NAME_MAC=enx42010af00002\r\nE: ID_NET_NAME_PATH=enp0s4\r\nE: ID_NET_NAME_SLOT=ens4\r\nE: ID_PATH=pci-0000:00:04.0\r\nE: ID_PATH_TAG=pci-0000_00_04_0\r\nE: ID_PCI_CLASS_FROM_DATABASE=Network controller\r\nE: ID_PCI_SUBCLASS_FROM_DATABASE=Ethernet controller\r\nE: ID_VENDOR_FROM_DATABASE=Red Hat, Inc\r\nE: ID_VENDOR_ID=0x1af4\r\nE: IFINDEX=2\r\nE: INTERFACE=eth0\r\nE: SUBSYSTEM=net\r\nE: SYSTEMD_ALIAS=/sys/subsystem/net/devices/eth0\r\nE: TAGS=:systemd:\r\nE: USEC_INITIALIZED=1790108\r\nE: net.ifnames=0\r\n```\r\n\r\nThe message in /usr/share/doc/udev/NEWS.Debian.gz seems to indicate this is incorrect. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/401", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/401/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/401/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/401/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/401", "id": 229595563, "node_id": "MDU6SXNzdWUyMjk1OTU1NjM=", "number": 401, "title": "Unconsistent hostname on instance groups", "user": {"login": "mendicm", "id": 4120546, "node_id": "MDQ6VXNlcjQxMjA1NDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/4120546?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mendicm", "html_url": "https://github.com/mendicm", "followers_url": "https://api.github.com/users/mendicm/followers", "following_url": "https://api.github.com/users/mendicm/following{/other_user}", "gists_url": "https://api.github.com/users/mendicm/gists{/gist_id}", "starred_url": "https://api.github.com/users/mendicm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mendicm/subscriptions", "organizations_url": "https://api.github.com/users/mendicm/orgs", "repos_url": "https://api.github.com/users/mendicm/repos", "events_url": "https://api.github.com/users/mendicm/events{/privacy}", "received_events_url": "https://api.github.com/users/mendicm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-18T08:41:25Z", "updated_at": "2017-05-18T08:59:44Z", "closed_at": "2017-05-18T08:59:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "We have an autoscaling group and generally all the instances boot with `instances-group-name-xxxx` hostname but some times the hostname is set as `instances-group-name-xxxx.zone-letter.project-name.internal`.\r\n\r\nThis happens randomly and causes problems to us with the metric system that we have.\r\nAny clue why this is happening? Because as I see on the `set_hostname` script the hostname is cutted at the first point: `${new_host_name%%.*}` ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/393", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/393/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/393/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/393/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/393", "id": 221874001, "node_id": "MDU6SXNzdWUyMjE4NzQwMDE=", "number": 393, "title": "google_accounts_daemon should not change permissions on home directories", "user": {"login": "ebiggers", "id": 2373140, "node_id": "MDQ6VXNlcjIzNzMxNDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/2373140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebiggers", "html_url": "https://github.com/ebiggers", "followers_url": "https://api.github.com/users/ebiggers/followers", "following_url": "https://api.github.com/users/ebiggers/following{/other_user}", "gists_url": "https://api.github.com/users/ebiggers/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebiggers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebiggers/subscriptions", "organizations_url": "https://api.github.com/users/ebiggers/orgs", "repos_url": "https://api.github.com/users/ebiggers/repos", "events_url": "https://api.github.com/users/ebiggers/events{/privacy}", "received_events_url": "https://api.github.com/users/ebiggers/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-04-14T19:26:28Z", "updated_at": "2017-04-27T23:47:00Z", "closed_at": "2017-04-27T23:46:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Following https://github.com/GoogleCloudPlatform/compute-image-packages/pull/385, google_accounts_daemon is setting home directories to mode 0750 when it installs public keys to ~/.ssh/authorized_keys.  This causes problems if users have intentionally set home directories to have different permissions, e.g. world-readable.  This is an issue with [gce-xfstests](https://github.com/tytso/xfstests-bld/blob/master/Documentation/gce-xfstests.md), for example.  Probably google_accounts_daemon should not change the home directory's mode if it already exists.  (Changing the mode of ~/.ssh to 0700 should still be fine, though.)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/392", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/392/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/392/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/392/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/392", "id": 218655217, "node_id": "MDU6SXNzdWUyMTg2NTUyMTc=", "number": 392, "title": "google-compute-engine-init %post failure due to missing systemctl", "user": {"login": "simaishi", "id": 12955530, "node_id": "MDQ6VXNlcjEyOTU1NTMw", "avatar_url": "https://avatars2.githubusercontent.com/u/12955530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simaishi", "html_url": "https://github.com/simaishi", "followers_url": "https://api.github.com/users/simaishi/followers", "following_url": "https://api.github.com/users/simaishi/following{/other_user}", "gists_url": "https://api.github.com/users/simaishi/gists{/gist_id}", "starred_url": "https://api.github.com/users/simaishi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simaishi/subscriptions", "organizations_url": "https://api.github.com/users/simaishi/orgs", "repos_url": "https://api.github.com/users/simaishi/repos", "events_url": "https://api.github.com/users/simaishi/events{/privacy}", "received_events_url": "https://api.github.com/users/simaishi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-01T01:23:00Z", "updated_at": "2017-09-05T23:37:56Z", "closed_at": "2017-09-05T23:37:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Creating a custom CentOS 7 image using kickstart and running into an issue with google-compute-engine-init post script. In my installation, when google-compute-engine-init is installed, systemd isn't installed yet. This causes %post to fail:\r\n\r\n```\r\n20:38:01,593 INFO packaging: google-compute-engine-init-2.1.2-0.1488484921.el7.x86_64 (284/602)\r\n20:38:01,593 INFO packaging: /var/tmp/rpm-tmp.vp8krH: line 17: systemctl: command not found\r\n20:38:01,593 INFO packaging: /var/tmp/rpm-tmp.vp8krH: line 18: systemctl: command not found\r\n....\r\n20:38:01,596 INFO packaging: warning: %post(google-compute-engine-init-2.1.2-0.1488484921.el7.x86_64) scriptlet failed, exit status 127\r\n```\r\n\r\nThe packages are installed as follows:\r\n\r\n```\r\n20:38:01,593 INFO packaging: google-compute-engine-init-2.1.2-0.1488484921.el7.x86_64 (284/602)\r\n....\r\n20:38:01,620 INFO packaging: systemd-219-30.el7_3.7.x86_64 (412/602)\r\n```\r\n\r\nCan gogole-compute-engine-init RPM 'require' systemd so the packages are installed in order?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/390", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/390/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/390/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/390/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/390", "id": 216132986, "node_id": "MDU6SXNzdWUyMTYxMzI5ODY=", "number": 390, "title": "ICMP Secure Redirects and CIS7 Compliance", "user": {"login": "qvallance-ctc", "id": 15982847, "node_id": "MDQ6VXNlcjE1OTgyODQ3", "avatar_url": "https://avatars3.githubusercontent.com/u/15982847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qvallance-ctc", "html_url": "https://github.com/qvallance-ctc", "followers_url": "https://api.github.com/users/qvallance-ctc/followers", "following_url": "https://api.github.com/users/qvallance-ctc/following{/other_user}", "gists_url": "https://api.github.com/users/qvallance-ctc/gists{/gist_id}", "starred_url": "https://api.github.com/users/qvallance-ctc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qvallance-ctc/subscriptions", "organizations_url": "https://api.github.com/users/qvallance-ctc/orgs", "repos_url": "https://api.github.com/users/qvallance-ctc/repos", "events_url": "https://api.github.com/users/qvallance-ctc/events{/privacy}", "received_events_url": "https://api.github.com/users/qvallance-ctc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-22T16:43:28Z", "updated_at": "2017-03-22T19:00:26Z", "closed_at": "2017-03-22T19:00:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Running into a compliance issue with a couple of the network kernel params being set for GCP images.\r\n\r\nThe the kernel networking parameters for allowing secure ICMP redirects, `net.ipv4.conf.all.secure_redirects` & `net.ipv4.conf.default.secure_redirects`, are being enabled on GCP RHEL7 images (lines 31-32, [`/sysctl/11-gce-network-security.conf`](https://github.com/GoogleCloudPlatform/compute-image-packages/blob/e843cc6919bbed8203ef8ce87b5a3120d4e86800/google_config/sysctl/11-gce-network-security.conf#L31-L32)).   The Common Internet Security Benchmark for RHEL7 (CIS7) indicates they should be disabled (4.2.3 - pg. 67, [CIS_Red_Hat_Enterprise_Linux_7_Benchmark_v1.0.0.pdf](https://benchmarks.cisecurity.org/tools2/linux/CIS_Red_Hat_Enterprise_Linux_7_Benchmark_v1.0.0.pdf)).\r\n\r\nIs there a specific reason why GCP need to allow ICMP redirects from secure gateways (i.e., is there any issue if we disable them for compliance)?\r\n\r\nThe rationale for disabling them, from the CIS7 benchmark:\r\n> It is still possible for even known gateways to be compromised. Setting net.ipv4.conf.all.secure_redirects to 0 protects the system from routing table\r\nupdates by possibly compromised known gateways. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/387", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/387/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/387/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/387/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/387", "id": 215430938, "node_id": "MDU6SXNzdWUyMTU0MzA5Mzg=", "number": 387, "title": "Allow disabling overwriting existing directories and files ownership and permissions", "user": {"login": "gdubicki", "id": 566632, "node_id": "MDQ6VXNlcjU2NjYzMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/566632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gdubicki", "html_url": "https://github.com/gdubicki", "followers_url": "https://api.github.com/users/gdubicki/followers", "following_url": "https://api.github.com/users/gdubicki/following{/other_user}", "gists_url": "https://api.github.com/users/gdubicki/gists{/gist_id}", "starred_url": "https://api.github.com/users/gdubicki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gdubicki/subscriptions", "organizations_url": "https://api.github.com/users/gdubicki/orgs", "repos_url": "https://api.github.com/users/gdubicki/repos", "events_url": "https://api.github.com/users/gdubicki/events{/privacy}", "received_events_url": "https://api.github.com/users/gdubicki/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2017-03-20T14:07:05Z", "updated_at": "2017-03-22T06:38:54Z", "closed_at": "2017-03-21T06:17:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "~Accounts daemon interferes with our configuration management system, as they both create users with same names. If Accounts would be configurable with a prefix that would be added to the usernames it manages, the problem would be solved.~\r\n\r\nUPDATE: After consideration I realized that there is other way to resolve my issue - add setting to allow disabling changing existing directories and files ownership and permission. Because THAT is what exactly our SCM is doing differently than Accounts daemon. If we disable it then everything will be fine.\r\n\r\nI created an appropriate MR for that, leaving the current behaviour as default, of course.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/382", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/382/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/382/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/382/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/382", "id": 213810107, "node_id": "MDU6SXNzdWUyMTM4MTAxMDc=", "number": 382, "title": "User home directory mode unsafe", "user": {"login": "ryancurrah", "id": 6209771, "node_id": "MDQ6VXNlcjYyMDk3NzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/6209771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryancurrah", "html_url": "https://github.com/ryancurrah", "followers_url": "https://api.github.com/users/ryancurrah/followers", "following_url": "https://api.github.com/users/ryancurrah/following{/other_user}", "gists_url": "https://api.github.com/users/ryancurrah/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryancurrah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryancurrah/subscriptions", "organizations_url": "https://api.github.com/users/ryancurrah/orgs", "repos_url": "https://api.github.com/users/ryancurrah/repos", "events_url": "https://api.github.com/users/ryancurrah/events{/privacy}", "received_events_url": "https://api.github.com/users/ryancurrah/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-03-13T15:49:24Z", "updated_at": "2017-04-14T19:54:22Z", "closed_at": "2017-03-13T21:45:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the [google_compute_engine/accounts/accounts_utils.py](https://github.com/GoogleCloudPlatform/compute-image-packages/blob/e843cc6919bbed8203ef8ce87b5a3120d4e86800/google_compute_engine/accounts/accounts_utils.py#L173-L174) file on lines 173-174. It sets insecure permissions of 755 on home directories which is failing our audit requirement for the [RHEL7 STIG](http://rhel7stig.readthedocs.io/en/latest/medium.html#rhel-07-020700-all-files-and-directories-contained-in-local-interactive-user-home-directories-must-have-mode-0750-or-less-permissive). Is the 755 permission required? Or can I make a PR setting it to something safer that will pass audits like 750?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/381", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/381/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/381/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/381/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/381", "id": 212157026, "node_id": "MDU6SXNzdWUyMTIxNTcwMjY=", "number": 381, "title": "New python3 google-accounts-daemon removes ssh key from ubuntu user", "user": {"login": "gottwald", "id": 1154338, "node_id": "MDQ6VXNlcjExNTQzMzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1154338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gottwald", "html_url": "https://github.com/gottwald", "followers_url": "https://api.github.com/users/gottwald/followers", "following_url": "https://api.github.com/users/gottwald/following{/other_user}", "gists_url": "https://api.github.com/users/gottwald/gists{/gist_id}", "starred_url": "https://api.github.com/users/gottwald/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gottwald/subscriptions", "organizations_url": "https://api.github.com/users/gottwald/orgs", "repos_url": "https://api.github.com/users/gottwald/repos", "events_url": "https://api.github.com/users/gottwald/events{/privacy}", "received_events_url": "https://api.github.com/users/gottwald/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-03-06T15:30:53Z", "updated_at": "2017-03-30T16:38:23Z", "closed_at": "2017-03-30T16:36:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since using a base image with the new python3 version of the google-accounts-daemon I'm observing a behavioral change to the old one:\r\n\r\nWe're building our own images on top of the official ubuntu xenial ones (currently `ubuntu-1604-xenial-v20170303`).\r\nDuring our images build we throw a public key into the ubuntu user's authorized_keys file which should act as sort of a fallback and still give us access, should the google accounts daemon ever go wild and delete all our other users.\r\nAll other login users are configured through project metadata.\r\n\r\nSince the use of the new google-accounts-daemon the `ubuntu` user `authorized_keys` files gets deleted.\r\nI'm able to stably reconstruct the situation by building an image with the google-account-daemon disabled, logging in with the mentioned fallback key and starting it by hand:\r\n\r\n```\r\nroot@test-base1604-node1:~# stat /home/ubuntu/.ssh/authorized_keys \r\n  File: '/home/ubuntu/.ssh/authorized_keys'\r\n  Size: 8354      \tBlocks: 24         IO Block: 4096   regular file\r\nDevice: 801h/2049d\tInode: 268920      Links: 1\r\nAccess: (0600/-rw-------)  Uid: ( 1000/  ubuntu)   Gid: ( 1000/  ubuntu)\r\nAccess: 2017-03-06 14:57:19.556000000 +0000\r\nModify: 2017-03-06 14:57:06.852000000 +0000\r\nChange: 2017-03-06 14:57:06.852000000 +0000\r\n Birth: -\r\n\r\nroot@test-base1604-node1:~# systemctl start google-accounts-daemon.service \r\n\r\nroot@test-base1604-node1:~# stat /home/ubuntu/.ssh/authorized_keys \r\nstat: cannot stat '/home/ubuntu/.ssh/authorized_keys': No such file or directory\r\n```\r\n\r\nThere is no mentioning of the `ubuntu` user in the project or instance metadata.\r\nSo in my opinion this user should therefore not be touched by the google accounts daemon at all.\r\n\r\nI also found this in the logs:\r\n```\r\nMar 06 14:59:44 test-base1604-node1 google_accounts_daemon[2233]: google-accounts: INFO Removing user ubuntu.\r\n```\r\nAlthough the `ubuntu` user still exists.\r\nEven starting the daemon in debug mode doesn't give me more information on why it decided to touch the `ubuntu` user, or why deletion failed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/376", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/376/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/376/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/376/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/376", "id": 210171138, "node_id": "MDU6SXNzdWUyMTAxNzExMzg=", "number": 376, "title": "gce-compute-images-packages Ubuntu 16.04 LTS - Retrigger Startup Script", "user": {"login": "carlsmithmeuk", "id": 12609749, "node_id": "MDQ6VXNlcjEyNjA5NzQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/12609749?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlsmithmeuk", "html_url": "https://github.com/carlsmithmeuk", "followers_url": "https://api.github.com/users/carlsmithmeuk/followers", "following_url": "https://api.github.com/users/carlsmithmeuk/following{/other_user}", "gists_url": "https://api.github.com/users/carlsmithmeuk/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlsmithmeuk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlsmithmeuk/subscriptions", "organizations_url": "https://api.github.com/users/carlsmithmeuk/orgs", "repos_url": "https://api.github.com/users/carlsmithmeuk/repos", "events_url": "https://api.github.com/users/carlsmithmeuk/events{/privacy}", "received_events_url": "https://api.github.com/users/carlsmithmeuk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-24T22:05:59Z", "updated_at": "2017-03-29T19:59:09Z", "closed_at": "2017-03-29T19:59:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Recently been having issues on Ubuntu 16.04 LTS with GCE Startup Script\r\n\r\nScript includes lines at the top of file \r\n\r\n```\r\napt-get update\r\napt-get upgrade -y # This causes the startup script to start for a second time and stops the original startup script running\r\n```\r\n\r\nWhen removing upgrade from script and running manually once server has booted through, run `apt-get upgrade -y` manually and when it gets to upgrading gce-compute-images-packages the GCE Startup script runs again.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/367", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/367/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/367/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/367/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/367", "id": 199397212, "node_id": "MDU6SXNzdWUxOTkzOTcyMTI=", "number": 367, "title": "debian-9 images?", "user": {"login": "icco", "id": 20201, "node_id": "MDQ6VXNlcjIwMjAx", "avatar_url": "https://avatars1.githubusercontent.com/u/20201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icco", "html_url": "https://github.com/icco", "followers_url": "https://api.github.com/users/icco/followers", "following_url": "https://api.github.com/users/icco/following{/other_user}", "gists_url": "https://api.github.com/users/icco/gists{/gist_id}", "starred_url": "https://api.github.com/users/icco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icco/subscriptions", "organizations_url": "https://api.github.com/users/icco/orgs", "repos_url": "https://api.github.com/users/icco/repos", "events_url": "https://api.github.com/users/icco/events{/privacy}", "received_events_url": "https://api.github.com/users/icco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-01-08T01:57:04Z", "updated_at": "2017-01-09T18:55:19Z", "closed_at": "2017-01-09T18:53:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Is there any plan to start support for debian-9 images?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/366", "repository_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages", "labels_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/366/labels{/name}", "comments_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/366/comments", "events_url": "https://api.github.com/repos/GoogleCloudPlatform/compute-image-packages/issues/366/events", "html_url": "https://github.com/GoogleCloudPlatform/compute-image-packages/issues/366", "id": 195944757, "node_id": "MDU6SXNzdWUxOTU5NDQ3NTc=", "number": 366, "title": "GetMedata() returns 404 for custom metadata keys", "user": {"login": "wonderfly", "id": 6642209, "node_id": "MDQ6VXNlcjY2NDIyMDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/6642209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wonderfly", "html_url": "https://github.com/wonderfly", "followers_url": "https://api.github.com/users/wonderfly/followers", "following_url": "https://api.github.com/users/wonderfly/following{/other_user}", "gists_url": "https://api.github.com/users/wonderfly/gists{/gist_id}", "starred_url": "https://api.github.com/users/wonderfly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wonderfly/subscriptions", "organizations_url": "https://api.github.com/users/wonderfly/orgs", "repos_url": "https://api.github.com/users/wonderfly/repos", "events_url": "https://api.github.com/users/wonderfly/events{/privacy}", "received_events_url": "https://api.github.com/users/wonderfly/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-15T23:33:41Z", "updated_at": "2017-01-10T18:45:03Z", "closed_at": "2017-01-10T18:45:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "My instance has a custom instance key, `key`, and I am able to get its value using `curl`:\r\n\r\n```\r\ncurl \"http://metadata.google.internal/computeMetadata/v1/instance/attributes/key?timeout_sec=60&last_etag=0&alt=json&recursive=True&wait_for_change=False\" -H \"Metadata-Flavor: Google\"\r\n```\r\n\r\nBut if I use the `metadata watcher` Python library, e.g., `watcher.GetMedatadata(metadata_key='instance/attributes/key')`, I get:\r\n\r\n```\r\nERROR:root:GET request error retrieving metadata. HTTP Error 404: Not Found.\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python2.7/site-packages/google_compute_engine/metadata_watcher.py\", line 158, in _HandleMetadataUpdate\r\n    metadata_key=metadata_key, recursive=recursive, wait=wait)\r\n  File \"/usr/lib64/python2.7/site-packages/google_compute_engine/metadata_watcher.py\", line 134, in _GetMetadataUpdate\r\n    response = self._GetMetadataRequest(metadata_url, params=params)\r\n  File \"/usr/lib64/python2.7/site-packages/google_compute_engine/metadata_watcher.py\", line 50, in Wrapper\r\n    response = func(*args, **kwargs)\r\n  File \"/usr/lib64/python2.7/site-packages/google_compute_engine/metadata_watcher.py\", line 97, in _GetMetadataRequest\r\n    return request_opener.open(request, timeout=self.timeout*1.1)\r\n  File \"/usr/lib64/python2.7/urllib2.py\", line 437, in open\r\n    response = meth(req, response)\r\n  File \"/usr/lib64/python2.7/urllib2.py\", line 550, in http_response\r\n    'http', request, response, code, msg, hdrs)\r\n  File \"/usr/lib64/python2.7/urllib2.py\", line 475, in error\r\n    return self._call_chain(*args)\r\n  File \"/usr/lib64/python2.7/urllib2.py\", line 409, in _call_chain\r\n    result = func(*args)\r\n  File \"/usr/lib64/python2.7/urllib2.py\", line 558, in http_error_default\r\n    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)\r\nHTTPError: HTTP Error 404: Not Found\r\n```", "performed_via_github_app": null, "score": 1.0}]}