{"total_count": 3, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/8", "repository_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport", "labels_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/8/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/8/events", "html_url": "https://github.com/zopefoundation/zope.deferredimport/issues/8", "id": 471871290, "node_id": "MDU6SXNzdWU0NzE4NzEyOTA=", "number": 8, "title": "Race condition in `deferredmodule.ModuleProxy.__getattr__`", "user": {"login": "d-maurer", "id": 10956900, "node_id": "MDQ6VXNlcjEwOTU2OTAw", "avatar_url": "https://avatars2.githubusercontent.com/u/10956900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d-maurer", "html_url": "https://github.com/d-maurer", "followers_url": "https://api.github.com/users/d-maurer/followers", "following_url": "https://api.github.com/users/d-maurer/following{/other_user}", "gists_url": "https://api.github.com/users/d-maurer/gists{/gist_id}", "starred_url": "https://api.github.com/users/d-maurer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d-maurer/subscriptions", "organizations_url": "https://api.github.com/users/d-maurer/orgs", "repos_url": "https://api.github.com/users/d-maurer/repos", "events_url": "https://api.github.com/users/d-maurer/events{/privacy}", "received_events_url": "https://api.github.com/users/d-maurer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-23T18:52:29Z", "updated_at": "2019-08-02T16:11:42Z", "closed_at": "2019-08-02T16:11:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The method has the following definition:\r\n```python\r\n    def __getattr__(self, name):\r\n        try:\r\n            get = self.__deferred_definitions__.pop(name)\r\n        except KeyError:\r\n            raise AttributeError(name)\r\n        v = get.get()\r\n        setattr(self, name, v)\r\n        return v\r\n```\r\nThe `pop` effectively removes a definition, the `setattr` reinstores it. If there is a thread change in between (which is likely when `get.get()` is expensive), then the definition can be missed. This has been the cause of https://github.com/zopefoundation/Zope/issues/665#issuecomment-513708256", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/5", "repository_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport", "labels_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/5/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/5/events", "html_url": "https://github.com/zopefoundation/zope.deferredimport/issues/5", "id": 268009001, "node_id": "MDU6SXNzdWUyNjgwMDkwMDE=", "number": 5, "title": "ModuleProxy doesn't preserve module docstring", "user": {"login": "jamadden", "id": 1256082, "node_id": "MDQ6VXNlcjEyNTYwODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1256082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamadden", "html_url": "https://github.com/jamadden", "followers_url": "https://api.github.com/users/jamadden/followers", "following_url": "https://api.github.com/users/jamadden/following{/other_user}", "gists_url": "https://api.github.com/users/jamadden/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamadden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamadden/subscriptions", "organizations_url": "https://api.github.com/users/jamadden/orgs", "repos_url": "https://api.github.com/users/jamadden/repos", "events_url": "https://api.github.com/users/jamadden/events{/privacy}", "received_events_url": "https://api.github.com/users/jamadden/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 30046144, "node_id": "MDU6TGFiZWwzMDA0NjE0NA==", "url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-24T12:17:53Z", "updated_at": "2017-10-24T12:32:33Z", "closed_at": "2017-10-24T12:32:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "So using `deprecatedFrom` or `deferredFrom`, etc, suddenly breaks your Sphinx documentation.\r\n\r\nGiven foo.py:\r\n```python\r\n\"\"\"\r\nThis is foo.py\r\n\"\"\"\r\nfrom zope.deferredimport import deprecatedFrom\r\ndeprecatedFrom(\"These live in bar\",\r\n               \"bar\",\r\n               \"fizzbin\")\r\n```\r\n\r\nYou can't get its docstring:\r\n```pycon\r\n>>> import foo\r\n>>> foo.__doc__\r\nNone\r\n```\r\n\r\nThis doesn't seem to be a problem in the `ProxyBase` that `ModuleProxy` extends:\r\n```pycon\r\nIn [1]: class O(object):\r\n   ...:     \"\"\"Hi\"\"\"\r\n   ...:\r\n\r\nIn [2]: O.__doc__\r\nOut[2]: 'Hi'\r\n\r\nIn [3]: O().__doc__\r\nOut[3]: 'Hi'\r\n\r\nIn [4]: from zope.proxy import ProxyBase\r\n\r\nIn [5]: proxy = ProxyBase(O)\r\n\r\nIn [6]: proxy.__doc__\r\nOut[6]: 'Hi'\r\n\r\nIn [7]: proxy = ProxyBase(O())\r\n\r\nIn [8]: proxy.__doc__\r\nOut[8]: 'Hi'\r\n```\r\n\r\n(Very vaguely related: https://github.com/zopefoundation/zope.hookable/issues/6)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/1", "repository_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport", "labels_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/1/comments", "events_url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/issues/1/events", "html_url": "https://github.com/zopefoundation/zope.deferredimport/issues/1", "id": 56171706, "node_id": "MDU6SXNzdWU1NjE3MTcwNg==", "number": 1, "title": "Get unit test coverage to 100%", "user": {"login": "tseaver", "id": 242750, "node_id": "MDQ6VXNlcjI0Mjc1MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/242750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tseaver", "html_url": "https://github.com/tseaver", "followers_url": "https://api.github.com/users/tseaver/followers", "following_url": "https://api.github.com/users/tseaver/following{/other_user}", "gists_url": "https://api.github.com/users/tseaver/gists{/gist_id}", "starred_url": "https://api.github.com/users/tseaver/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tseaver/subscriptions", "organizations_url": "https://api.github.com/users/tseaver/orgs", "repos_url": "https://api.github.com/users/tseaver/repos", "events_url": "https://api.github.com/users/tseaver/events{/privacy}", "received_events_url": "https://api.github.com/users/tseaver/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 30046148, "node_id": "MDU6TGFiZWwzMDA0NjE0OA==", "url": "https://api.github.com/repos/zopefoundation/zope.deferredimport/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-02-01T18:08:43Z", "updated_at": "2017-08-04T10:50:05Z", "closed_at": "2017-08-04T10:50:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "and force it to remain there via `setup.cfg`.\n", "performed_via_github_app": null, "score": 1.0}]}