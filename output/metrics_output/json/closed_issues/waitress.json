{"total_count": 142, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/Pylons/waitress/issues/309", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/309/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/309/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/309/events", "html_url": "https://github.com/Pylons/waitress/issues/309", "id": 677448252, "node_id": "MDU6SXNzdWU2Nzc0NDgyNTI=", "number": 309, "title": "WARNING:waitress.queue:Task queue depth is 2", "user": {"login": "git-ruoshui", "id": 20965727, "node_id": "MDQ6VXNlcjIwOTY1NzI3", "avatar_url": "https://avatars2.githubusercontent.com/u/20965727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/git-ruoshui", "html_url": "https://github.com/git-ruoshui", "followers_url": "https://api.github.com/users/git-ruoshui/followers", "following_url": "https://api.github.com/users/git-ruoshui/following{/other_user}", "gists_url": "https://api.github.com/users/git-ruoshui/gists{/gist_id}", "starred_url": "https://api.github.com/users/git-ruoshui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/git-ruoshui/subscriptions", "organizations_url": "https://api.github.com/users/git-ruoshui/orgs", "repos_url": "https://api.github.com/users/git-ruoshui/repos", "events_url": "https://api.github.com/users/git-ruoshui/events{/privacy}", "received_events_url": "https://api.github.com/users/git-ruoshui/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-12T07:00:40Z", "updated_at": "2020-08-12T15:06:28Z", "closed_at": "2020-08-12T15:06:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "This warning happens when I do concurrency tests on windows10 \uff0816G\uff09;\r\nwhy happend and What is the impact of this warning and how to close it?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/307", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/307/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/307/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/307/events", "html_url": "https://github.com/Pylons/waitress/issues/307", "id": 657974850, "node_id": "MDU6SXNzdWU2NTc5NzQ4NTA=", "number": 307, "title": "Concurrent requests are taking more time then single request for python api code(using flask + waitres WSGI server)", "user": {"login": "SagarPalyal", "id": 38795924, "node_id": "MDQ6VXNlcjM4Nzk1OTI0", "avatar_url": "https://avatars3.githubusercontent.com/u/38795924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SagarPalyal", "html_url": "https://github.com/SagarPalyal", "followers_url": "https://api.github.com/users/SagarPalyal/followers", "following_url": "https://api.github.com/users/SagarPalyal/following{/other_user}", "gists_url": "https://api.github.com/users/SagarPalyal/gists{/gist_id}", "starred_url": "https://api.github.com/users/SagarPalyal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SagarPalyal/subscriptions", "organizations_url": "https://api.github.com/users/SagarPalyal/orgs", "repos_url": "https://api.github.com/users/SagarPalyal/repos", "events_url": "https://api.github.com/users/SagarPalyal/events{/privacy}", "received_events_url": "https://api.github.com/users/SagarPalyal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-16T08:27:25Z", "updated_at": "2020-07-20T01:00:41Z", "closed_at": "2020-07-20T01:00:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I am hitting api code with a single request, the response is coming back in 1 second approximately. Thats fine. As I am using waitress wsgi server , my flask code is handling concurrent request but problem is coming on performance. Whenever more than one concurrent requests are hitting api code, response time is getting increased to 1.5 sec to 2 sec to so on depends upon how many concurrent requests are hitting the api. More the concurrent requests more the response time for all requests. Provided threaded concept is working fine and currently waitress has been configured with 50 threads.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/305", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/305/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/305/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/305/events", "html_url": "https://github.com/Pylons/waitress/issues/305", "id": 642654013, "node_id": "MDU6SXNzdWU2NDI2NTQwMTM=", "number": 305, "title": "GitHub \"latest\" is 1.4.3, should be 1.4.4", "user": {"login": "stevepiercy", "id": 102112, "node_id": "MDQ6VXNlcjEwMjExMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/102112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevepiercy", "html_url": "https://github.com/stevepiercy", "followers_url": "https://api.github.com/users/stevepiercy/followers", "following_url": "https://api.github.com/users/stevepiercy/following{/other_user}", "gists_url": "https://api.github.com/users/stevepiercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevepiercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevepiercy/subscriptions", "organizations_url": "https://api.github.com/users/stevepiercy/orgs", "repos_url": "https://api.github.com/users/stevepiercy/repos", "events_url": "https://api.github.com/users/stevepiercy/events{/privacy}", "received_events_url": "https://api.github.com/users/stevepiercy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-06-21T22:40:51Z", "updated_at": "2020-06-23T05:14:44Z", "closed_at": "2020-06-23T05:14:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See:\r\n- https://github.com/Pylons/waitress/releases\r\n- https://pypi.org/project/waitress/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/304", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/304/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/304/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/304/events", "html_url": "https://github.com/Pylons/waitress/issues/304", "id": 642542684, "node_id": "MDU6SXNzdWU2NDI1NDI2ODQ=", "number": 304, "title": "how make redirect 301 to https?", "user": {"login": "long76", "id": 18124433, "node_id": "MDQ6VXNlcjE4MTI0NDMz", "avatar_url": "https://avatars1.githubusercontent.com/u/18124433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/long76", "html_url": "https://github.com/long76", "followers_url": "https://api.github.com/users/long76/followers", "following_url": "https://api.github.com/users/long76/following{/other_user}", "gists_url": "https://api.github.com/users/long76/gists{/gist_id}", "starred_url": "https://api.github.com/users/long76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/long76/subscriptions", "organizations_url": "https://api.github.com/users/long76/orgs", "repos_url": "https://api.github.com/users/long76/repos", "events_url": "https://api.github.com/users/long76/events{/privacy}", "received_events_url": "https://api.github.com/users/long76/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-21T11:12:26Z", "updated_at": "2020-06-22T09:29:43Z", "closed_at": "2020-06-22T09:29:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/303", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/303/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/303/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/303/events", "html_url": "https://github.com/Pylons/waitress/issues/303", "id": 626454655, "node_id": "MDU6SXNzdWU2MjY0NTQ2NTU=", "number": 303, "title": "Get the Task Queue Depth programatically", "user": {"login": "seancowan-contactengine", "id": 57625984, "node_id": "MDQ6VXNlcjU3NjI1OTg0", "avatar_url": "https://avatars0.githubusercontent.com/u/57625984?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seancowan-contactengine", "html_url": "https://github.com/seancowan-contactengine", "followers_url": "https://api.github.com/users/seancowan-contactengine/followers", "following_url": "https://api.github.com/users/seancowan-contactengine/following{/other_user}", "gists_url": "https://api.github.com/users/seancowan-contactengine/gists{/gist_id}", "starred_url": "https://api.github.com/users/seancowan-contactengine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seancowan-contactengine/subscriptions", "organizations_url": "https://api.github.com/users/seancowan-contactengine/orgs", "repos_url": "https://api.github.com/users/seancowan-contactengine/repos", "events_url": "https://api.github.com/users/seancowan-contactengine/events{/privacy}", "received_events_url": "https://api.github.com/users/seancowan-contactengine/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-28T12:04:32Z", "updated_at": "2020-05-29T09:39:01Z", "closed_at": "2020-05-29T09:39:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI'd like to be able to control the number of instances of a service I have by returning a 50x status code when the task queue depth gets too long. I can see the warning being logged by waitress that the queue depth is N but I can't find a good way to get that value. Is this possible? Ideally my code would be something like\r\n\r\n```\r\nif waitress.taskqueuedepth > 6\r\n    return \"not ready\"\r\nreturn \"ready\"\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/299", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/299/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/299/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/299/events", "html_url": "https://github.com/Pylons/waitress/issues/299", "id": 621619920, "node_id": "MDU6SXNzdWU2MjE2MTk5MjA=", "number": 299, "title": "How setup timeout and maxsize limits?", "user": {"login": "seidlmic", "id": 3067305, "node_id": "MDQ6VXNlcjMwNjczMDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3067305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seidlmic", "html_url": "https://github.com/seidlmic", "followers_url": "https://api.github.com/users/seidlmic/followers", "following_url": "https://api.github.com/users/seidlmic/following{/other_user}", "gists_url": "https://api.github.com/users/seidlmic/gists{/gist_id}", "starred_url": "https://api.github.com/users/seidlmic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seidlmic/subscriptions", "organizations_url": "https://api.github.com/users/seidlmic/orgs", "repos_url": "https://api.github.com/users/seidlmic/repos", "events_url": "https://api.github.com/users/seidlmic/events{/privacy}", "received_events_url": "https://api.github.com/users/seidlmic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-20T09:44:48Z", "updated_at": "2020-05-22T04:27:36Z", "closed_at": "2020-05-22T04:27:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\nI can not figure out how to setup timeout (request processing takes to much time) and limit for output data.\r\n\r\n```\r\n      serve(application,\r\n        host='0.0.0.0',\r\n        port=port,\r\n        cleanup_interval=2,\r\n        channel_timeout=4\r\n      )\r\n```\r\nI am using Werkzeug `Request` and `Response` objects and `jsonrpcserver dispatch` method to delegate request to my processing method. In this method I have\r\n\r\n```\r\ntime.sleep(timeToSleep)\r\n```\r\n\r\nBut even I setup `timeToSleep` much bigger than `channel_timeout` I can seen that the request is always processed?\r\n\r\nThanks for any help.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/298", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/298/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/298/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/298/events", "html_url": "https://github.com/Pylons/waitress/issues/298", "id": 620102987, "node_id": "MDU6SXNzdWU2MjAxMDI5ODc=", "number": 298, "title": "waitress logging interfere with application logging", "user": {"login": "1wpro2", "id": 52658745, "node_id": "MDQ6VXNlcjUyNjU4NzQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/52658745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/1wpro2", "html_url": "https://github.com/1wpro2", "followers_url": "https://api.github.com/users/1wpro2/followers", "following_url": "https://api.github.com/users/1wpro2/following{/other_user}", "gists_url": "https://api.github.com/users/1wpro2/gists{/gist_id}", "starred_url": "https://api.github.com/users/1wpro2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/1wpro2/subscriptions", "organizations_url": "https://api.github.com/users/1wpro2/orgs", "repos_url": "https://api.github.com/users/1wpro2/repos", "events_url": "https://api.github.com/users/1wpro2/events{/privacy}", "received_events_url": "https://api.github.com/users/1wpro2/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-18T10:40:07Z", "updated_at": "2020-05-18T20:58:36Z", "closed_at": "2020-05-18T15:00:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Background\r\n\r\nAt the moment, `waitress` would always set up the root logger with `logging.basicConfig()`. \r\n\r\nThere are two kinds of issue could be generated:\r\n\r\n#### Unnecessary `waitress` noise\r\n\r\n`wairtess` could print out a lot of messages, which for most of the cases, it's not really critical for the application:\r\n![image](https://user-images.githubusercontent.com/52658745/82202590-b4ddb800-9934-11ea-8846-24fa251f4444.png)\r\n\r\n#### Interference with application logging\r\n\r\nAs it has configured the `root` logger, which would generate additional unintended log output, for example:\r\n\r\n![image](https://user-images.githubusercontent.com/52658745/82202834-130a9b00-9935-11ea-81ba-050cf5f28c2e.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/296", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/296/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/296/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/296/events", "html_url": "https://github.com/Pylons/waitress/issues/296", "id": 619197203, "node_id": "MDU6SXNzdWU2MTkxOTcyMDM=", "number": 296, "title": "Waitress hangs", "user": {"login": "mnikolovski", "id": 3421815, "node_id": "MDQ6VXNlcjM0MjE4MTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3421815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mnikolovski", "html_url": "https://github.com/mnikolovski", "followers_url": "https://api.github.com/users/mnikolovski/followers", "following_url": "https://api.github.com/users/mnikolovski/following{/other_user}", "gists_url": "https://api.github.com/users/mnikolovski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mnikolovski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mnikolovski/subscriptions", "organizations_url": "https://api.github.com/users/mnikolovski/orgs", "repos_url": "https://api.github.com/users/mnikolovski/repos", "events_url": "https://api.github.com/users/mnikolovski/events{/privacy}", "received_events_url": "https://api.github.com/users/mnikolovski/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-15T19:36:55Z", "updated_at": "2020-05-18T10:21:53Z", "closed_at": "2020-05-18T10:21:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there team,\r\n\r\n1) We are hosting our py module on Windows Server with the following configuration:\r\nserve(app, host=\"local.api.foo.bar\", port=5000, threads=1000, connection_limit=1000, channel_timeout=1200, asyncore_use_poll=True)\r\n\r\n2) The module is called via CMD: python server.py\r\n\r\nResult:\r\nAfter some time the server hangs and if I press a key down/up/any it will continue processing the requests that were in the queue.\r\n\r\nWhat could be the issue? - We are using this \"internal API\" for CPU heavy tasks.\r\n\r\nThank you for your help.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/295", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/295/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/295/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/295/events", "html_url": "https://github.com/Pylons/waitress/issues/295", "id": 618989718, "node_id": "MDU6SXNzdWU2MTg5ODk3MTg=", "number": 295, "title": "How to daemonize waitress-serve?", "user": {"login": "zhaoxin", "id": 324931, "node_id": "MDQ6VXNlcjMyNDkzMQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/324931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhaoxin", "html_url": "https://github.com/zhaoxin", "followers_url": "https://api.github.com/users/zhaoxin/followers", "following_url": "https://api.github.com/users/zhaoxin/following{/other_user}", "gists_url": "https://api.github.com/users/zhaoxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhaoxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhaoxin/subscriptions", "organizations_url": "https://api.github.com/users/zhaoxin/orgs", "repos_url": "https://api.github.com/users/zhaoxin/repos", "events_url": "https://api.github.com/users/zhaoxin/events{/privacy}", "received_events_url": "https://api.github.com/users/zhaoxin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-15T14:02:02Z", "updated_at": "2020-05-18T07:06:57Z", "closed_at": "2020-05-17T04:28:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "How to run waitress-serve as daemon like gunicorn --daemon? I can't find any description in document. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/291", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/291/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/291/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/291/events", "html_url": "https://github.com/Pylons/waitress/issues/291", "id": 600495550, "node_id": "MDU6SXNzdWU2MDA0OTU1NTA=", "number": 291, "title": "Performance regression with streams from version 1.3", "user": {"login": "CaselIT", "id": 16175304, "node_id": "MDQ6VXNlcjE2MTc1MzA0", "avatar_url": "https://avatars2.githubusercontent.com/u/16175304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CaselIT", "html_url": "https://github.com/CaselIT", "followers_url": "https://api.github.com/users/CaselIT/followers", "following_url": "https://api.github.com/users/CaselIT/following{/other_user}", "gists_url": "https://api.github.com/users/CaselIT/gists{/gist_id}", "starred_url": "https://api.github.com/users/CaselIT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CaselIT/subscriptions", "organizations_url": "https://api.github.com/users/CaselIT/orgs", "repos_url": "https://api.github.com/users/CaselIT/repos", "events_url": "https://api.github.com/users/CaselIT/events{/privacy}", "received_events_url": "https://api.github.com/users/CaselIT/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-15T18:16:42Z", "updated_at": "2020-04-17T18:28:39Z", "closed_at": "2020-04-17T18:28:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've a python application that can also serve files.\r\nCurrently I'm returning an open file stream to waitress when serving files.\r\n\r\nI've noticed large performance degradation since version 1.3 in this case.\r\nThis is especially true for windows, but also on linux, to a lesser extent, they are present.\r\nI think that the problem was introduced by this change https://github.com/Pylons/waitress/pull/246, since setting  `--send-bytes=18000` reduces the problem (at least on windows).\r\n\r\nBelow is the example file, let's call it `example.py`:\r\n```py\r\ndef app(env, start_response):\r\n    body = open(\"demo-file.txt\", 'rb')\r\n    start_response(\"200\", {})\r\n    return body\r\n\r\nif __name__ == \"__main__\":\r\n    data = \"The quick brown fox jumps over the lazy dog\\n\"\r\n    with open(\"demo-file.txt\", \"w\") as f:\r\n        data *= 25000\r\n        f.write(data)  # ~ 1mb\r\n```\r\nRunning it with `python example.py` creates a simple example file. It creates a file of about 1MB\r\nI serve it with waitress using `waitress-serve example:app`\r\n\r\nIn the example above if I change `return body` to `return [body.read()]` there is no change in performance using `send-bytes` has no effect. On windows >= 1.3 and <1.3 have the same performance, while on linux the older version seems to perform better.\r\n\r\nI'm testing with the curl command (replace `-o nul` with `-o /dev/null` on linux):\r\n`curl -o nul -w \"time_connect: %{time_connect}s\\ntime_pretransfer: %{time_pretransfer}s\\ntime_starttransfer: %{time_starttransfer}s\\ntime_total: %{time_total}s\\n\" http://localhost:8080`\r\n\r\nI get the following results:\r\n### windows\r\nwaitress >= 1.3\r\n```\r\ntime_connect: 0,234000s\r\ntime_pretransfer: 0,234000s\r\ntime_starttransfer: 0,266000s\r\ntime_total: 4,656000s\r\n```\r\nwaitress < 1.3\r\n```\r\ntime_connect: 0,250000s\r\ntime_pretransfer: 0,266000s\r\ntime_starttransfer: 0,406000s\r\ntime_total: 0,406000s\r\n```\r\nwaitress >= 1.3 setting `--send-bytes=18000`\r\n```\r\ntime_connect: 0,250000s\r\ntime_pretransfer: 0,265000s\r\ntime_starttransfer: 0,265000s\r\ntime_total: 0,656000s\r\n```\r\nwaitress using `return [body.read()]`\r\n```\r\ntime_connect: 0,234000s\r\ntime_pretransfer: 0,234000s\r\ntime_starttransfer: 0,265000s\r\ntime_total: 0,265000s\r\n```\r\n### linux\r\nwaitress >= 1.3\r\n```\r\ntime_connect: 0.004488s\r\ntime_pretransfer: 0.004507s\r\ntime_starttransfer: 0.014586s\r\ntime_total: 0.519794s\r\n```\r\nwaitress < 1.3\r\n```\r\ntime_connect: 0.005525s\r\ntime_pretransfer: 0.005788s\r\ntime_starttransfer: 0.126952s\r\ntime_total: 0.132460s\r\n```\r\nwaitress >= 1.3 setting `--send-bytes=18000`\r\n```\r\ntime_connect: 0.005574s\r\ntime_pretransfer: 0.006167s\r\ntime_starttransfer: 0.012211s\r\ntime_total: 0.508851s\r\n```\r\nwaitress >= 1.3 using `return [body.read()]`\r\n```\r\ntime_connect: 0.005984s\r\ntime_pretransfer: 0.006004s\r\ntime_starttransfer: 0.019397s\r\ntime_total: 0.019927s\r\n```\r\nwaitress < 1.3 using `return [body.read()]`\r\n```\r\ntime_connect: 0.004953s\r\ntime_pretransfer: 0.005193s\r\ntime_starttransfer: 0.010879s\r\ntime_total: 0.011450s\r\n```\r\n\r\nJust a footnote, I always assumed that passing a stream would be faster that reading in python, but I get the same behavior when trying `gunicorn` between `return body` and `return [body.read()]`\r\n\r\nThanks for the package", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/290", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/290/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/290/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/290/events", "html_url": "https://github.com/Pylons/waitress/issues/290", "id": 598364990, "node_id": "MDU6SXNzdWU1OTgzNjQ5OTA=", "number": 290, "title": "How to get the port number after starting the server?", "user": {"login": "evandrocoan", "id": 5332158, "node_id": "MDQ6VXNlcjUzMzIxNTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/5332158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evandrocoan", "html_url": "https://github.com/evandrocoan", "followers_url": "https://api.github.com/users/evandrocoan/followers", "following_url": "https://api.github.com/users/evandrocoan/following{/other_user}", "gists_url": "https://api.github.com/users/evandrocoan/gists{/gist_id}", "starred_url": "https://api.github.com/users/evandrocoan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evandrocoan/subscriptions", "organizations_url": "https://api.github.com/users/evandrocoan/orgs", "repos_url": "https://api.github.com/users/evandrocoan/repos", "events_url": "https://api.github.com/users/evandrocoan/events{/privacy}", "received_events_url": "https://api.github.com/users/evandrocoan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-11T22:39:16Z", "updated_at": "2020-04-12T00:19:57Z", "closed_at": "2020-04-11T23:53:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use the port address 0 https://stackoverflow.com/questions/1075399/how-to-bind-to-any-available-port(), i.e.,\r\n```py\r\nfrom waitress import serve\r\nserve(APP, host=\"127.0.0.1\", port=0)\r\n```\r\n\r\nThen, it should bind to any free port, but how to know which one?\r\n\r\n1. https://stackoverflow.com/questions/5085656/how-to-get-the-current-port-number-in-flask", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/289", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/289/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/289/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/289/events", "html_url": "https://github.com/Pylons/waitress/issues/289", "id": 598362892, "node_id": "MDU6SXNzdWU1OTgzNjI4OTI=", "number": 289, "title": "Does it run on Mac OS?", "user": {"login": "evandrocoan", "id": 5332158, "node_id": "MDQ6VXNlcjUzMzIxNTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/5332158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evandrocoan", "html_url": "https://github.com/evandrocoan", "followers_url": "https://api.github.com/users/evandrocoan/followers", "following_url": "https://api.github.com/users/evandrocoan/following{/other_user}", "gists_url": "https://api.github.com/users/evandrocoan/gists{/gist_id}", "starred_url": "https://api.github.com/users/evandrocoan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evandrocoan/subscriptions", "organizations_url": "https://api.github.com/users/evandrocoan/orgs", "repos_url": "https://api.github.com/users/evandrocoan/repos", "events_url": "https://api.github.com/users/evandrocoan/events{/privacy}", "received_events_url": "https://api.github.com/users/evandrocoan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-11T22:24:16Z", "updated_at": "2020-04-11T22:32:11Z", "closed_at": "2020-04-11T22:32:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "On readme, it tells about Windows and Unix, but it runs on Mac OS? \r\n\r\n1. https://www.howtogeek.com/441599/is-macos-unix-and-what-does-that-mean/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/288", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/288/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/288/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/288/events", "html_url": "https://github.com/Pylons/waitress/issues/288", "id": 597028637, "node_id": "MDU6SXNzdWU1OTcwMjg2Mzc=", "number": 288, "title": "Jython support", "user": {"login": "hlizard", "id": 6994037, "node_id": "MDQ6VXNlcjY5OTQwMzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/6994037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hlizard", "html_url": "https://github.com/hlizard", "followers_url": "https://api.github.com/users/hlizard/followers", "following_url": "https://api.github.com/users/hlizard/following{/other_user}", "gists_url": "https://api.github.com/users/hlizard/gists{/gist_id}", "starred_url": "https://api.github.com/users/hlizard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hlizard/subscriptions", "organizations_url": "https://api.github.com/users/hlizard/orgs", "repos_url": "https://api.github.com/users/hlizard/repos", "events_url": "https://api.github.com/users/hlizard/events{/privacy}", "received_events_url": "https://api.github.com/users/hlizard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-09T05:20:40Z", "updated_at": "2020-04-12T08:35:35Z", "closed_at": "2020-04-12T08:35:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u5e0c\u671b\u53ef\u4ee5\u652f\u6301Jython.\r\nHope to support Jython.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/286", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/286/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/286/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/286/events", "html_url": "https://github.com/Pylons/waitress/issues/286", "id": 581913273, "node_id": "MDU6SXNzdWU1ODE5MTMyNzM=", "number": 286, "title": "Permission to include stubs into typeshed", "user": {"login": "dosisod", "id": 39638017, "node_id": "MDQ6VXNlcjM5NjM4MDE3", "avatar_url": "https://avatars3.githubusercontent.com/u/39638017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dosisod", "html_url": "https://github.com/dosisod", "followers_url": "https://api.github.com/users/dosisod/followers", "following_url": "https://api.github.com/users/dosisod/following{/other_user}", "gists_url": "https://api.github.com/users/dosisod/gists{/gist_id}", "starred_url": "https://api.github.com/users/dosisod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dosisod/subscriptions", "organizations_url": "https://api.github.com/users/dosisod/orgs", "repos_url": "https://api.github.com/users/dosisod/repos", "events_url": "https://api.github.com/users/dosisod/events{/privacy}", "received_events_url": "https://api.github.com/users/dosisod/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-16T01:16:54Z", "updated_at": "2020-03-31T14:53:21Z", "closed_at": "2020-03-21T20:06:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello! I use waitress in one of my projects, which also makes use of mypy (https://github.com/python/mypy) to statically type check my code. Waitress does not use type hints, which means mypy cannot type check against code I include from waitress.\r\n\r\nWith your permission, I can create stub files that would be included into typeshed (https://github.com/python/typeshed/). Typeshed is a repository of stub files that can be used to type check your code. This would allow for people to find type-related errors when using waitress.\r\n\r\nI will not (and cannot) merge anything into typeshed without explicit permission from the maintainers of this package. With that being said, let me know if you have and questions! I would love to have type hint support in this library!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/283", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/283/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/283/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/283/events", "html_url": "https://github.com/Pylons/waitress/issues/283", "id": 573221030, "node_id": "MDU6SXNzdWU1NzMyMjEwMzA=", "number": 283, "title": "Serving on http://google-analytics.com:5000", "user": {"login": "ployt0", "id": 25666053, "node_id": "MDQ6VXNlcjI1NjY2MDUz", "avatar_url": "https://avatars0.githubusercontent.com/u/25666053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ployt0", "html_url": "https://github.com/ployt0", "followers_url": "https://api.github.com/users/ployt0/followers", "following_url": "https://api.github.com/users/ployt0/following{/other_user}", "gists_url": "https://api.github.com/users/ployt0/gists{/gist_id}", "starred_url": "https://api.github.com/users/ployt0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ployt0/subscriptions", "organizations_url": "https://api.github.com/users/ployt0/orgs", "repos_url": "https://api.github.com/users/ployt0/repos", "events_url": "https://api.github.com/users/ployt0/events{/privacy}", "received_events_url": "https://api.github.com/users/ployt0/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-02-29T06:57:02Z", "updated_at": "2020-03-02T09:19:19Z", "closed_at": "2020-02-29T08:10:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "effective_host is set to \"google-analytics.com\" during the call to waitress.serve\r\nThis may be something I did to my etc hosts but when I don't use waitress it is sane:\r\n\r\n```\r\n* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\r\n```\r\n\r\ncompared to \r\n\r\n```\r\nServing on http://google-analytics.com:5000\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/281", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/281/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/281/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/281/events", "html_url": "https://github.com/Pylons/waitress/issues/281", "id": 562181682, "node_id": "MDU6SXNzdWU1NjIxODE2ODI=", "number": 281, "title": "TransLogger cannot log requests to console when specifying a custom port", "user": {"login": "hsluoyz", "id": 3787410, "node_id": "MDQ6VXNlcjM3ODc0MTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/3787410?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hsluoyz", "html_url": "https://github.com/hsluoyz", "followers_url": "https://api.github.com/users/hsluoyz/followers", "following_url": "https://api.github.com/users/hsluoyz/following{/other_user}", "gists_url": "https://api.github.com/users/hsluoyz/gists{/gist_id}", "starred_url": "https://api.github.com/users/hsluoyz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hsluoyz/subscriptions", "organizations_url": "https://api.github.com/users/hsluoyz/orgs", "repos_url": "https://api.github.com/users/hsluoyz/repos", "events_url": "https://api.github.com/users/hsluoyz/events{/privacy}", "received_events_url": "https://api.github.com/users/hsluoyz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-09T14:05:21Z", "updated_at": "2020-02-10T15:00:58Z", "closed_at": "2020-02-10T15:00:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to enable request logs for my flask app on waitress. The docs said I should use `TransLogger`. I have successfully used it to log requests to console. But I found a strange issue:\r\n\r\nWhen I don't specify port in `serve()`, run `python app.py`, I can see log requests in console:\r\n\r\n```py\r\nfrom waitress import serve\r\nfrom paste.translogger import TransLogger\r\n\r\n...\r\nserve(TransLogger(app), host='0.0.0.0')  # default port is 8080\r\n```\r\n\r\nBut if I specify a custom port, I can see no log requests in console, only warnings and errors are remaining if any:\r\n\r\n```py\r\nfrom waitress import serve\r\nfrom paste.translogger import TransLogger\r\n\r\n...\r\nserve(TransLogger(app), host='0.0.0.0', port=7010)\r\n```\r\n\r\nI need to use other ports than default 8080 and enable request logs to console at the same time. Is this a bug or conflict between TransLogger and port? How to fix? Thanks.\r\n\r\nMy versions:\r\n\r\n```\r\nwaitress == 1.4.3\r\npaste == 3.3.0\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/275", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/275/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/275/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/275/events", "html_url": "https://github.com/Pylons/waitress/issues/275", "id": 536161915, "node_id": "MDU6SXNzdWU1MzYxNjE5MTU=", "number": 275, "title": "Found some security issues", "user": {"login": "ZeddYu", "id": 29536474, "node_id": "MDQ6VXNlcjI5NTM2NDc0", "avatar_url": "https://avatars3.githubusercontent.com/u/29536474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZeddYu", "html_url": "https://github.com/ZeddYu", "followers_url": "https://api.github.com/users/ZeddYu/followers", "following_url": "https://api.github.com/users/ZeddYu/following{/other_user}", "gists_url": "https://api.github.com/users/ZeddYu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZeddYu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZeddYu/subscriptions", "organizations_url": "https://api.github.com/users/ZeddYu/orgs", "repos_url": "https://api.github.com/users/ZeddYu/repos", "events_url": "https://api.github.com/users/ZeddYu/events{/privacy}", "received_events_url": "https://api.github.com/users/ZeddYu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-11T06:03:47Z", "updated_at": "2019-12-11T09:17:26Z", "closed_at": "2019-12-11T09:17:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Found some security issues. How can I report?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/274", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/274/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/274/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/274/events", "html_url": "https://github.com/Pylons/waitress/issues/274", "id": 534192439, "node_id": "MDU6SXNzdWU1MzQxOTI0Mzk=", "number": 274, "title": "Waitress hangs and never starts in Windows", "user": {"login": "eduardoroliveira", "id": 13936435, "node_id": "MDQ6VXNlcjEzOTM2NDM1", "avatar_url": "https://avatars3.githubusercontent.com/u/13936435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eduardoroliveira", "html_url": "https://github.com/eduardoroliveira", "followers_url": "https://api.github.com/users/eduardoroliveira/followers", "following_url": "https://api.github.com/users/eduardoroliveira/following{/other_user}", "gists_url": "https://api.github.com/users/eduardoroliveira/gists{/gist_id}", "starred_url": "https://api.github.com/users/eduardoroliveira/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eduardoroliveira/subscriptions", "organizations_url": "https://api.github.com/users/eduardoroliveira/orgs", "repos_url": "https://api.github.com/users/eduardoroliveira/repos", "events_url": "https://api.github.com/users/eduardoroliveira/events{/privacy}", "received_events_url": "https://api.github.com/users/eduardoroliveira/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-06T18:25:22Z", "updated_at": "2019-12-06T21:58:27Z", "closed_at": "2019-12-06T21:58:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi folks,\r\n\r\nI am starting the waitress server with flask. It works like a charm on Mac but when I try to start on Windows it hangs and never starts nor never shows an error. \r\n\r\nIs that a known bug?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/273", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/273/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/273/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/273/events", "html_url": "https://github.com/Pylons/waitress/issues/273", "id": 532867190, "node_id": "MDU6SXNzdWU1MzI4NjcxOTA=", "number": 273, "title": "Waitress does not reject messages with BWS after field-name", "user": {"login": "rogueresistor", "id": 55211531, "node_id": "MDQ6VXNlcjU1MjExNTMx", "avatar_url": "https://avatars3.githubusercontent.com/u/55211531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rogueresistor", "html_url": "https://github.com/rogueresistor", "followers_url": "https://api.github.com/users/rogueresistor/followers", "following_url": "https://api.github.com/users/rogueresistor/following{/other_user}", "gists_url": "https://api.github.com/users/rogueresistor/gists{/gist_id}", "starred_url": "https://api.github.com/users/rogueresistor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rogueresistor/subscriptions", "organizations_url": "https://api.github.com/users/rogueresistor/orgs", "repos_url": "https://api.github.com/users/rogueresistor/repos", "events_url": "https://api.github.com/users/rogueresistor/events{/privacy}", "received_events_url": "https://api.github.com/users/rogueresistor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-12-04T18:46:11Z", "updated_at": "2019-12-20T10:40:34Z", "closed_at": "2019-12-20T10:40:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nRFC 7230: server MUST reject messages with BWS after field-name (#445)\r\n    Obey the RFC requirement to reject HTTP requests with whitespace\r\n    between field-name and the colon delimiter. Rejection is\r\n    critical in the presence of broken HTTP agents that mishandle\r\n    malformed messages.\r\n```\r\n\r\nThis is not currently handled in:\r\n\r\nhttps://github.com/Pylons/waitress/blob/d20f4db95736534741e0fd177ea3fdd798fd84ca/waitress/parser.py#L163-L197\r\n\r\nThis should be updated to properly reject the HTTP request.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/270", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/270/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/270/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/270/events", "html_url": "https://github.com/Pylons/waitress/issues/270", "id": 529274772, "node_id": "MDU6SXNzdWU1MjkyNzQ3NzI=", "number": 270, "title": "can't concat str to bytes on buffers.py sometimes occurs", "user": {"login": "rsosnin", "id": 36224609, "node_id": "MDQ6VXNlcjM2MjI0NjA5", "avatar_url": "https://avatars1.githubusercontent.com/u/36224609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsosnin", "html_url": "https://github.com/rsosnin", "followers_url": "https://api.github.com/users/rsosnin/followers", "following_url": "https://api.github.com/users/rsosnin/following{/other_user}", "gists_url": "https://api.github.com/users/rsosnin/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsosnin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsosnin/subscriptions", "organizations_url": "https://api.github.com/users/rsosnin/orgs", "repos_url": "https://api.github.com/users/rsosnin/repos", "events_url": "https://api.github.com/users/rsosnin/events{/privacy}", "received_events_url": "https://api.github.com/users/rsosnin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-27T11:03:31Z", "updated_at": "2019-11-28T19:25:47Z", "closed_at": "2019-11-28T13:30:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use python3.7 and In some of the flows, I get an exception \"can't concat str to bytes\" which occurs on buffers.py , line 244 - `self.strbuf = strbuf + s` as the `s` parameter is sometimes passes as string and not as bytes. So since in python3 we cannot mix strings and bytes together, it fails on that error.\r\n\r\nTo debug the issue, I added a few logs to print the values of `s` and `strbuf` variables and their types and here's what I got:\r\n```\r\n{\"asctime\": \"2019-11-27 10:30:47,128\", \"levelname\": \"INFO\", \"module\": \"buffers\", \"lineno\": 246, \"thread\": 139895465043712, \"message\": \"@@@ s: b'HTTP/1.0 200 OK\\\\r\\\\nConnection: close\\\\r\\\\nContent-Type: text/html\\\\r\\\\nDate: Wed, 27 Nov 2019 10:30:47 GMT\\\\r\\\\nServer: waitress\\\\r\\\\n\\\\r\\\\n'\"}\r\n{\"asctime\": \"2019-11-27 10:30:47,128\", \"levelname\": \"INFO\", \"module\": \"buffers\", \"lineno\": 247, \"thread\": 139895465043712, \"message\": \"@@@ strbuf: b''\"}\r\n{\"asctime\": \"2019-11-27 10:30:47,128\", \"levelname\": \"INFO\", \"module\": \"buffers\", \"lineno\": 248, \"thread\": 139895465043712, \"message\": \"@@@ type s: <class 'bytes'>\"}\r\n{\"asctime\": \"2019-11-27 10:30:47,128\", \"levelname\": \"INFO\", \"module\": \"buffers\", \"lineno\": 249, \"thread\": 139895465043712, \"message\": \"@@@ type strbuf: <class 'bytes'>\"}\r\n{\"asctime\": \"2019-11-27 10:30:47,131\", \"levelname\": \"INFO\", \"module\": \"buffers\", \"lineno\": 246, \"thread\": 139895465043712, \"message\": \"@@@ s: <\"}\r\n{\"asctime\": \"2019-11-27 10:30:47,135\", \"levelname\": \"INFO\", \"module\": \"buffers\", \"lineno\": 247, \"thread\": 139895465043712, \"message\": \"@@@ strbuf: b'HTTP/1.0 200 OK\\\\r\\\\nConnection: close\\\\r\\\\nContent-Type: text/html\\\\r\\\\nDate: Wed, 27 Nov 2019 10:30:47 GMT\\\\r\\\\nServer: waitress\\\\r\\\\n\\\\r\\\\n'\"}\r\n{\"asctime\": \"2019-11-27 10:30:47,136\", \"levelname\": \"INFO\", \"module\": \"buffers\", \"lineno\": 248, \"thread\": 139895465043712, \"message\": \"@@@ type s: <class 'str'>\"}\r\n{\"asctime\": \"2019-11-27 10:30:47,146\", \"levelname\": \"INFO\", \"module\": \"buffers\", \"lineno\": 249, \"thread\": 139895465043712, \"message\": \"@@@ type strbuf: <class 'bytes'>\"}\r\n{\"asctime\": \"2019-11-27 10:30:47,147\", \"levelname\": \"ERROR\", \"module\": \"channel\", \"lineno\": 363, \"thread\": 139895465043712, \"message\": \"Exception while serving /gate/idp/saml/login\", \"exc_info\": \"Traceback (most recent call last):\\n  File \\\"/opt/venvs/login-router/lib/python3.7/site-packages/waitress/channel.py\\\", line 356, in service\\n    task.service()\\n  File \\\"/opt/venvs/login-router/lib/python3.7/site-packages/waitress/task.py\\\", line 172, in service\\n    self.execute()\\n  File \\\"/opt/venvs/login-router/lib/python3.7/site-packages/waitress/task.py\\\", line 478, in execute\\n    self.write(chunk)\\n  File \\\"/opt/venvs/login-router/lib/python3.7/site-packages/waitress/task.py\\\", line 335, in write\\n    channel.write_soon(towrite)\\n  File \\\"/opt/venvs/login-router/lib/python3.7/site-packages/waitress/channel.py\\\", line 327, in write_soon\\n    self.outbufs[-1].append(data)\\n  File \\\"/opt/venvs/login-router/lib/python3.7/site-packages/waitress/buffers.py\\\", line 250, in append\\n    self.strbuf = strbuf + s\\nTypeError: can't concat str to bytes\"}\r\n```\r\n\r\nAt this time `s`'s value was `<` with string being the type.\r\n\r\nThis issue occurs at the SAML SSO flow with Skilljar (https://www.skilljar.com) being the SSO SP (Service Provider).\r\n\r\nIn order to be on the safe side (and of course avoid these type of exceptions), it's better to convert `s` from string to bytes, as in most cases it is actually passed as bytes.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/268", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/268/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/268/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/268/events", "html_url": "https://github.com/Pylons/waitress/issues/268", "id": 524417715, "node_id": "MDU6SXNzdWU1MjQ0MTc3MTU=", "number": 268, "title": "[Resolved] Unable to `serve` on Windows 10", "user": {"login": "steveWinter", "id": 1171712, "node_id": "MDQ6VXNlcjExNzE3MTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1171712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveWinter", "html_url": "https://github.com/steveWinter", "followers_url": "https://api.github.com/users/steveWinter/followers", "following_url": "https://api.github.com/users/steveWinter/following{/other_user}", "gists_url": "https://api.github.com/users/steveWinter/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveWinter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveWinter/subscriptions", "organizations_url": "https://api.github.com/users/steveWinter/orgs", "repos_url": "https://api.github.com/users/steveWinter/repos", "events_url": "https://api.github.com/users/steveWinter/events{/privacy}", "received_events_url": "https://api.github.com/users/steveWinter/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-18T14:53:21Z", "updated_at": "2019-11-20T19:17:18Z", "closed_at": "2019-11-20T08:04:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Attempting to initiate `serve` with a Flask app using\r\n```serve(app, host='0.0.0.0', port=8080)```\r\nresults in \r\n```UnicodeError: encoding with 'idna' codec failed (UnicodeError: label empty or too long)```\r\n\r\nIf I modify line 260 of `server.py` to also catch error `UnicodeError` i.e.\r\n```except (socket.error, UnicodeDecodeError, UnicodeError):```\r\nthen the server will start and run as expected, though it reports\r\n```Serving on http://.psf:8080```\r\n\r\nIf I omit the host and port config, the same error occurs. I've tried this on three different Windows 10 machines with identical results. On Windows 7 this issue doesn't appear to exist.\r\n - Python version: 3.7.5\r\n - Waitress version: 1.3.1\r\n - Windows version: 10 (Version 1809, Build 17763.864)\r\n\r\nI wonder if this is somehow related to the configuration of the computer itself (hence my trying several different ones) in terms of them being able to report their hostname since the issue seems to stem from `gethostbyaddr` but I'm not familiar enough with Windows to know how I would set a hostname?\r\n\r\nEven if this can be solved by local configuration I think the change I'm making on line 260 should probably be made to prevent a complete failure in this scenario. Thoughts?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/267", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/267/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/267/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/267/events", "html_url": "https://github.com/Pylons/waitress/issues/267", "id": 523780331, "node_id": "MDU6SXNzdWU1MjM3ODAzMzE=", "number": 267, "title": "timeout hook?", "user": {"login": "NullYing", "id": 10618381, "node_id": "MDQ6VXNlcjEwNjE4Mzgx", "avatar_url": "https://avatars2.githubusercontent.com/u/10618381?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NullYing", "html_url": "https://github.com/NullYing", "followers_url": "https://api.github.com/users/NullYing/followers", "following_url": "https://api.github.com/users/NullYing/following{/other_user}", "gists_url": "https://api.github.com/users/NullYing/gists{/gist_id}", "starred_url": "https://api.github.com/users/NullYing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NullYing/subscriptions", "organizations_url": "https://api.github.com/users/NullYing/orgs", "repos_url": "https://api.github.com/users/NullYing/repos", "events_url": "https://api.github.com/users/NullYing/events{/privacy}", "received_events_url": "https://api.github.com/users/NullYing/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-16T03:02:42Z", "updated_at": "2020-01-18T22:36:38Z", "closed_at": "2019-11-17T07:54:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to run some code when request timeout, but i don't found any hook in the docs? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/266", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/266/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/266/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/266/events", "html_url": "https://github.com/Pylons/waitress/issues/266", "id": 515024091, "node_id": "MDU6SXNzdWU1MTUwMjQwOTE=", "number": 266, "title": "Support environ and start_response params in WSGI app() function call by waitress-serve", "user": {"login": "neilodonuts", "id": 31673133, "node_id": "MDQ6VXNlcjMxNjczMTMz", "avatar_url": "https://avatars3.githubusercontent.com/u/31673133?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neilodonuts", "html_url": "https://github.com/neilodonuts", "followers_url": "https://api.github.com/users/neilodonuts/followers", "following_url": "https://api.github.com/users/neilodonuts/following{/other_user}", "gists_url": "https://api.github.com/users/neilodonuts/gists{/gist_id}", "starred_url": "https://api.github.com/users/neilodonuts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neilodonuts/subscriptions", "organizations_url": "https://api.github.com/users/neilodonuts/orgs", "repos_url": "https://api.github.com/users/neilodonuts/repos", "events_url": "https://api.github.com/users/neilodonuts/events{/privacy}", "received_events_url": "https://api.github.com/users/neilodonuts/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-30T22:29:38Z", "updated_at": "2019-10-30T23:04:04Z", "closed_at": "2019-10-30T23:04:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm attempting to run a Gunicorn-based WSGI app using Waitress. I can do this using Python code like  so:\r\n\r\n```\r\nimport waitress\r\nwaitress.serve(wsgi.app, listen='*:8000', threads=1, expose_tracebacks=True)\r\n```\r\n\r\nHowever, when I attempt to run this via `waitress-serve` like this:\r\n\r\n```\r\nwaitress-serve --port=8000 --call \"wsgi:app\"\r\n```\r\n\r\nI get the following error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Python27\\Lib\\runpy.py\", line 174, in _run_module_as_main\r\n    \"__main__\", fname, loader, pkg_name)\r\n  File \"C:\\Python27\\Lib\\runpy.py\", line 72, in _run_code\r\n    exec code in run_globals\r\n  File \"C:\\Users\\neil.obremski\\project\\env\\Scripts\\waitress-serve.exe\\__main__.py\", line 7, in <module>\r\n  File \"c:\\users\\neil.obremski\\project\\env\\lib\\site-packages\\waitress\\runner.py\", line 274, in run\r\n    app = app()\r\nTypeError: app() takes exactly 2 arguments (0 given)\r\n```\r\n\r\nThe reason is that the `wsgi:app()` function has two parameters. Here's the signature:\r\n\r\n```\r\ndef app(environ, start_response):\r\n    \"\"\" Entry point for all web requests (Web Server Gateway Interface).\r\n    \r\n    :environ: Dictionary of request variables, notably PATH_INFO & QUERY_STRING.\r\n    :start_response: Function to output response with.\r\n    \"\"\"\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/265", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/265/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/265/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/265/events", "html_url": "https://github.com/Pylons/waitress/issues/265", "id": 508518754, "node_id": "MDU6SXNzdWU1MDg1MTg3NTQ=", "number": 265, "title": "High memory usage with default --outbuf-overflow setting", "user": {"login": "raymondbutcher", "id": 993973, "node_id": "MDQ6VXNlcjk5Mzk3Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/993973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raymondbutcher", "html_url": "https://github.com/raymondbutcher", "followers_url": "https://api.github.com/users/raymondbutcher/followers", "following_url": "https://api.github.com/users/raymondbutcher/following{/other_user}", "gists_url": "https://api.github.com/users/raymondbutcher/gists{/gist_id}", "starred_url": "https://api.github.com/users/raymondbutcher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raymondbutcher/subscriptions", "organizations_url": "https://api.github.com/users/raymondbutcher/orgs", "repos_url": "https://api.github.com/users/raymondbutcher/repos", "events_url": "https://api.github.com/users/raymondbutcher/events{/privacy}", "received_events_url": "https://api.github.com/users/raymondbutcher/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-10-17T14:32:58Z", "updated_at": "2020-06-01T23:41:32Z", "closed_at": "2020-05-20T21:35:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm building a Falcon JSON API with Waitress in front. I'm load testing it by sending around 300 requests per second from the same machine using Locust. Memory usage is very high when I have `--outbuf-overflow` set to any value that is too high, including the default value of 1048576 (1 MB). It's not a memory leak, as memory usage drops back down when it stops receiving requests.\r\n\r\nI tried a few memory profiling options and ended up using the one detailed [here](https://stackoverflow.com/a/45679009). I made an endpoint so I could check memory usage, and it outputs a summary like this:\r\n\r\n```\r\nTop 5 lines\r\n#1: waitress/buffers.py:55: 549658.5 KiB\r\n    file.write(s)\r\n#2: <frozen importlib._bootstrap_external>:487: 4615.6 KiB\r\n#3: json/decoder.py:355: 3203.4 KiB\r\n    obj, end = self.scan_once(s, idx)\r\n#4: python3.6/linecache.py:137: 344.6 KiB\r\n    lines = fp.readlines()\r\n#5: waitress/task.py:89: 197.5 KiB\r\n    task.service()\r\n6327 other: 6677.0 KiB\r\nTotal allocated size: 564696.6 KiB\r\n```\r\n\r\nThat is 500+ MB of memory related to Waitress buffers after running for 5-10 minutes.\r\n\r\nHere is how I run Waitress and Locust:\r\n\r\n```\r\nwaitress-serve --ident= --port=8000 --threads=48 --outbuf-overflow=$VALUE app:app\r\nlocust --host=http://127.0.0.1:8000 --no-web --clients 40\r\n```\r\n\r\nHere is memory use that I have observed for different values:\r\n\r\n| `--outbuf-overflow=` | memory use |\r\n|----------------------|------------|\r\n| 1048576 (1 MB)       | 500+ MB    |\r\n| 32768 (32 KB)        | 600+ MB    |\r\n| 16384 (16 KB)        | ok         |\r\n\r\nWhen I set it to 16 KB, none of the buffering code appears in the memory profile summary. Memory use of the whole program is low and stays low.\r\n\r\nIt goes crazy when set to 32 KB. 48 threads each with 32 KB of buffered outputs in memory = 1.5 MB in memory. The 600 MB of memory usage is coming from something else.\r\n\r\nI'm using `waitress==1.3.0` which is the latest version at this time. I will try to provide an example for reproducing this issue in the near future and hopefully narrow it down further.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/263", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/263/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/263/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/263/events", "html_url": "https://github.com/Pylons/waitress/issues/263", "id": 507120516, "node_id": "MDU6SXNzdWU1MDcxMjA1MTY=", "number": 263, "title": "Customer header is passed", "user": {"login": "madkote", "id": 4921881, "node_id": "MDQ6VXNlcjQ5MjE4ODE=", "avatar_url": "https://avatars1.githubusercontent.com/u/4921881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madkote", "html_url": "https://github.com/madkote", "followers_url": "https://api.github.com/users/madkote/followers", "following_url": "https://api.github.com/users/madkote/following{/other_user}", "gists_url": "https://api.github.com/users/madkote/gists{/gist_id}", "starred_url": "https://api.github.com/users/madkote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madkote/subscriptions", "organizations_url": "https://api.github.com/users/madkote/orgs", "repos_url": "https://api.github.com/users/madkote/repos", "events_url": "https://api.github.com/users/madkote/events{/privacy}", "received_events_url": "https://api.github.com/users/madkote/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-15T09:27:56Z", "updated_at": "2019-10-15T12:40:47Z", "closed_at": "2019-10-15T12:40:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi all,\r\n\r\nhow do I allow a custom header in the request?\r\n\r\nexample:\r\n```\r\ncurl -X GET --header 'Accept: application/json' --header 'SESSION_DATA: ...c2Vy...' http://localhost:8080/endpoint\r\n```\r\n\r\nwaitress just ignores the header `SESSION_DATA`, whereby gunicorn e.g. allows it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/260", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/260/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/260/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/260/events", "html_url": "https://github.com/Pylons/waitress/issues/260", "id": 485656448, "node_id": "MDU6SXNzdWU0ODU2NTY0NDg=", "number": 260, "title": "Don't use urlsplit on request path", "user": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-08-27T08:15:26Z", "updated_at": "2019-08-27T20:36:06Z", "closed_at": "2019-08-27T20:36:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://github.com/Pylons/waitress/blob/94e23114bf4e8db9507f3550294037a4804eb053/waitress/parser.py#L257\r\n\r\nThis leads to things like:\r\n\r\n```\r\n>>> from urllib import parse as urlparse\r\n>>> urlparse.urlsplit('//testing/whatever')\r\nSplitResult(scheme='', netloc='testing', path='/whatever', query='', fragment='')\r\n```\r\nWhich means we accidentally drop `testing` before sending it on to the WSGI application. Ask me later how I figured that out.\r\n\r\nA request such as:\r\n\r\n```\r\nGET //testing/whatever HTTP/1.1\r\n```\r\n\r\nIs perfectly valid. Non-sensical maybe, but perfectly valid.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/257", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/257/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/257/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/257/events", "html_url": "https://github.com/Pylons/waitress/issues/257", "id": 452399487, "node_id": "MDU6SXNzdWU0NTIzOTk0ODc=", "number": 257, "title": "500 returned when proxy headers are malformed", "user": {"login": "NicolasLM", "id": 7612656, "node_id": "MDQ6VXNlcjc2MTI2NTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7612656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasLM", "html_url": "https://github.com/NicolasLM", "followers_url": "https://api.github.com/users/NicolasLM/followers", "following_url": "https://api.github.com/users/NicolasLM/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasLM/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasLM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasLM/subscriptions", "organizations_url": "https://api.github.com/users/NicolasLM/orgs", "repos_url": "https://api.github.com/users/NicolasLM/repos", "events_url": "https://api.github.com/users/NicolasLM/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasLM/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-05T09:25:10Z", "updated_at": "2019-07-25T03:06:35Z", "closed_at": "2019-07-25T03:06:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "It looks like waitress returns a 500 when the headers related to proxy are malformed. In my opinion it would be better to return a 400 or discard the headers.\r\n\r\n```\r\n[2019-06-05 08:39:03,485 ERROR waitress waitress] Exception while serving /\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/waitress/channel.py\", line 356, in service\r\n    task.service()\r\n  File \"/usr/local/lib/python3.7/site-packages/waitress/task.py\", line 176, in service\r\n    self.execute()\r\n  File \"/usr/local/lib/python3.7/site-packages/waitress/task.py\", line 385, in execute\r\n    env = self.get_environment()\r\n  File \"/usr/local/lib/python3.7/site-packages/waitress/task.py\", line 801, in get_environment\r\n    trusted_proxy_headers=server.adj.trusted_proxy_headers,\r\n  File \"/usr/local/lib/python3.7/site-packages/waitress/task.py\", line 531, in parse_proxy_headers\r\n    forward_hop = undquote(forward_hop)\r\n  File \"/usr/local/lib/python3.7/site-packages/waitress/utilities.py\", line 259, in undquote\r\n    raise ValueError('Invalid quoting in value')\r\nValueError: Invalid quoting in value\r\n```\r\n\r\nHere are the settings related to proxies given to `waitress.serve`:\r\n\r\n```python\r\n{\r\n    'trusted_proxy': '*',\r\n    'trusted_proxy_count': 1,\r\n    'trusted_proxy_headers': ['x-forwarded-for', 'x-forwarded-proto'],\r\n    'clear_untrusted_proxy_headers': True\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/256", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/256/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/256/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/256/events", "html_url": "https://github.com/Pylons/waitress/issues/256", "id": 449332487, "node_id": "MDU6SXNzdWU0NDkzMzI0ODc=", "number": 256, "title": "2019-05-28 17:18:44,316 WARNING [waitress:354][waitress] application-written content was ignored due to HTTP response that may not contain a message-body: (204 No Content)", "user": {"login": "zopyx", "id": 594239, "node_id": "MDQ6VXNlcjU5NDIzOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/594239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zopyx", "html_url": "https://github.com/zopyx", "followers_url": "https://api.github.com/users/zopyx/followers", "following_url": "https://api.github.com/users/zopyx/following{/other_user}", "gists_url": "https://api.github.com/users/zopyx/gists{/gist_id}", "starred_url": "https://api.github.com/users/zopyx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zopyx/subscriptions", "organizations_url": "https://api.github.com/users/zopyx/orgs", "repos_url": "https://api.github.com/users/zopyx/repos", "events_url": "https://api.github.com/users/zopyx/events{/privacy}", "received_events_url": "https://api.github.com/users/zopyx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-28T15:21:36Z", "updated_at": "2019-05-28T21:20:19Z", "closed_at": "2019-05-28T21:20:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "We are running Zope/Plone behind Waitress.\r\n\r\nA HTTP response with status 204 (intentionally generated by plone.restapi) and without body is logged as warning\r\n\r\n```\r\n2019-05-28 17:18:44,316 WARNING [waitress:354][waitress] application-written content was ignored due to HTTP response that may not contain a message-body: (204 No Content)\r\n```\r\n\r\nWhy is this a warning? It is completely valid to send a 204 response with empty body.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/255", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/255/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/255/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/255/events", "html_url": "https://github.com/Pylons/waitress/issues/255", "id": 448474859, "node_id": "MDU6SXNzdWU0NDg0NzQ4NTk=", "number": 255, "title": "Django static files", "user": {"login": "Aroxed", "id": 19937696, "node_id": "MDQ6VXNlcjE5OTM3Njk2", "avatar_url": "https://avatars2.githubusercontent.com/u/19937696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aroxed", "html_url": "https://github.com/Aroxed", "followers_url": "https://api.github.com/users/Aroxed/followers", "following_url": "https://api.github.com/users/Aroxed/following{/other_user}", "gists_url": "https://api.github.com/users/Aroxed/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aroxed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aroxed/subscriptions", "organizations_url": "https://api.github.com/users/Aroxed/orgs", "repos_url": "https://api.github.com/users/Aroxed/repos", "events_url": "https://api.github.com/users/Aroxed/events{/privacy}", "received_events_url": "https://api.github.com/users/Aroxed/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-25T15:28:29Z", "updated_at": "2019-07-15T10:38:27Z", "closed_at": "2019-07-15T10:38:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello.\r\nCould you suggest any waitress configuration for surving django static files?\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/253", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/253/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/253/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/253/events", "html_url": "https://github.com/Pylons/waitress/issues/253", "id": 438052523, "node_id": "MDU6SXNzdWU0MzgwNTI1MjM=", "number": 253, "title": "Number of threads bug", "user": {"login": "hyperknot", "id": 494223, "node_id": "MDQ6VXNlcjQ5NDIyMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/494223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyperknot", "html_url": "https://github.com/hyperknot", "followers_url": "https://api.github.com/users/hyperknot/followers", "following_url": "https://api.github.com/users/hyperknot/following{/other_user}", "gists_url": "https://api.github.com/users/hyperknot/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyperknot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyperknot/subscriptions", "organizations_url": "https://api.github.com/users/hyperknot/orgs", "repos_url": "https://api.github.com/users/hyperknot/repos", "events_url": "https://api.github.com/users/hyperknot/events{/privacy}", "received_events_url": "https://api.github.com/users/hyperknot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-04-28T12:41:58Z", "updated_at": "2019-05-02T21:20:40Z", "closed_at": "2019-05-01T16:08:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "There are a few confusing points I have regarding the number of threads in Waitress.\r\n\r\nThe [docs say](https://docs.pylonsproject.org/projects/waitress/en/stable/arguments.html): \r\nThe number of threads used to process application logic (integer). Default: 4\r\n\r\nHowever, in practice this is what's happening (when running via pserve):\r\nhost = 0.0.0.0 => threads = 1\r\nhost = 127.0.0.1 => threads = 1\r\nhost = localhost => threads = 3\r\n\r\nMoreover I see no way of changing threads via the INI files. If I set `[server:main]` `threads = 2` absolutely nothing is happening, in all of the above cases. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/236", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/236/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/236/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/236/events", "html_url": "https://github.com/Pylons/waitress/issues/236", "id": 424630080, "node_id": "MDU6SXNzdWU0MjQ2MzAwODA=", "number": 236, "title": "app_iter continues to completion after client disconnection", "user": {"login": "mmerickel", "id": 487237, "node_id": "MDQ6VXNlcjQ4NzIzNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/487237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmerickel", "html_url": "https://github.com/mmerickel", "followers_url": "https://api.github.com/users/mmerickel/followers", "following_url": "https://api.github.com/users/mmerickel/following{/other_user}", "gists_url": "https://api.github.com/users/mmerickel/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmerickel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmerickel/subscriptions", "organizations_url": "https://api.github.com/users/mmerickel/orgs", "repos_url": "https://api.github.com/users/mmerickel/repos", "events_url": "https://api.github.com/users/mmerickel/events{/privacy}", "received_events_url": "https://api.github.com/users/mmerickel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-24T16:11:30Z", "updated_at": "2019-03-28T02:42:12Z", "closed_at": "2019-03-28T02:42:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is semi-related to https://github.com/Pylons/waitress/issues/67 but different.\r\n\r\nUpon client disconnect, a long-lived `app_iter` will continue executing and occupying a thread until it completes. Instead, I expect waitress to cleanup, call the `close()` method of the app_iter if it exists, and release the resources used. Presumably this would happen through an exception thrown by waitress when the `app_iter` returns data to write to the socket and the socket is closed. This would still allow the application to execute for a potentially long time but then receive errors when the client finally does return control back to waitress.\r\n\r\nIn general, when a WSGI app is interacting with a socket it can receive these exceptions. For example, if waitress did not buffer a request body, then the WSGI app can read from `environ['wsgi.input']` and receive an exception immediately. However, the write side is isolated from the wsgi app. Every write from the app is sent to another thread where errors are handled via `channel.write_soon()` which does not bubble any errors back into the app.\r\n\r\nI have not checked to see if PEP3333 says anything about client disconnections.\r\n\r\nA small test case is below:\r\n\r\n1) `waitress-serve --send-bytes 1 test_app:app`\r\n2) Connect a client.\r\n3) Disconnect client.\r\n4) Observe that the iterator continues.\r\n\r\n```python\r\nimport json\r\nimport time\r\nfrom webob import Response\r\nfrom webob.dec import wsgify\r\n\r\nclass WSGIGenerator:\r\n    def __init__(self, iter):\r\n        self.is_closed = False\r\n        self.iter = iter\r\n\r\n    def __iter__(self):\r\n        return self\r\n\r\n    def __next__(self):\r\n        if self.is_closed:\r\n            raise StopIteration\r\n        return next(self.iter)\r\n\r\n    def close(self):\r\n        print('closed')\r\n        self.is_closed = True\r\n\r\n@wsgify\r\ndef app(request):\r\n    def app_iter():\r\n        while True:\r\n            print('yielding')\r\n            yield json.dumps({'body': 'hello world'}).encode('utf8')\r\n            print('sleeping')\r\n            time.sleep(5)\r\n    resp = Response()\r\n    resp.app_iter = WSGIGenerator(app_iter())\r\n    return resp\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/235", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/235/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/235/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/235/events", "html_url": "https://github.com/Pylons/waitress/issues/235", "id": 423928840, "node_id": "MDU6SXNzdWU0MjM5Mjg4NDA=", "number": 235, "title": "Repeatedly getting this warning 'WARNING:waitress.queue:Task queue depth is 1' ", "user": {"login": "SubCoder1", "id": 40127554, "node_id": "MDQ6VXNlcjQwMTI3NTU0", "avatar_url": "https://avatars2.githubusercontent.com/u/40127554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SubCoder1", "html_url": "https://github.com/SubCoder1", "followers_url": "https://api.github.com/users/SubCoder1/followers", "following_url": "https://api.github.com/users/SubCoder1/following{/other_user}", "gists_url": "https://api.github.com/users/SubCoder1/gists{/gist_id}", "starred_url": "https://api.github.com/users/SubCoder1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SubCoder1/subscriptions", "organizations_url": "https://api.github.com/users/SubCoder1/orgs", "repos_url": "https://api.github.com/users/SubCoder1/repos", "events_url": "https://api.github.com/users/SubCoder1/events{/privacy}", "received_events_url": "https://api.github.com/users/SubCoder1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-03-21T20:33:02Z", "updated_at": "2020-05-18T10:00:01Z", "closed_at": "2019-03-22T17:34:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm repeatedly getting this warning `WARNING:waitress.queue:Task queue depth is 1` while testing my site in development using waitress server, furthermore some static files are loading well and some are not whereas everything works fine when django's default `manage.py runserver` command is used. Is there any way to increase the thread count? Dunno maybe that might fix this issue?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/234", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/234/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/234/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/234/events", "html_url": "https://github.com/Pylons/waitress/issues/234", "id": 423387865, "node_id": "MDU6SXNzdWU0MjMzODc4NjU=", "number": 234, "title": "Thread sync GC fatal error.", "user": {"login": "andrewfree", "id": 507412, "node_id": "MDQ6VXNlcjUwNzQxMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/507412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewfree", "html_url": "https://github.com/andrewfree", "followers_url": "https://api.github.com/users/andrewfree/followers", "following_url": "https://api.github.com/users/andrewfree/following{/other_user}", "gists_url": "https://api.github.com/users/andrewfree/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewfree/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewfree/subscriptions", "organizations_url": "https://api.github.com/users/andrewfree/orgs", "repos_url": "https://api.github.com/users/andrewfree/repos", "events_url": "https://api.github.com/users/andrewfree/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewfree/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-20T17:42:35Z", "updated_at": "2019-03-22T17:34:27Z", "closed_at": "2019-03-22T17:34:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm pretty consistently getting \"Fatal Python error: GC object already tracked\" anytime the waitress task queue depth hits 1 or more. Seems like the threads are not syncing up correctly somewhere. Appears to be a waitress issue but not sure where else to look. Getting this on a range of actions, all happen when the task queue in waitress hits depth 1 or greater.  \r\n\r\n```\r\n2019-03-20 10:25:02,542 INFO  [project.views.base:182][waitress] USERID username REMOTE_IP ::1 URL / TIME 2019-03-20 10:25:02.542278\r\n2019-03-20 10:25:03,292 WARNI [waitress.queue:115][MainThread] Task queue depth is 1\r\nFatal Python error: GC object already tracked\r\nThread 0x000070000e66a000 (most recent call first):\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/connection.py\", line 538 in _connect\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/connection.py\", line 492 in connect\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/connection.py\", line 994 in get_connection\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/client.py\", line 772 in execute_command\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/client.py\", line 1239 in exists\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_redis_sessions/__init__.py\", line 202 in factory\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/request.py\", line 205 in session\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/decorator.py\", line 42 in __get__\r\n  File \"/Users/username/Desktop/project/project/security.py\", line 20 in __init__\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 125 in handle_request\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/tweens.py\", line 39 in excview_tween\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_tm/__init__.py\", line 136 in tm_tween\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 249 in invoke_request\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_retry/__init__.py\", line 114 in retry_policy\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 270 in __call__\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 452 in execute\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 175 in service\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/channel.py\", line 336 in service\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 78 in handler_thread\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 864 in run\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nThread 0x000070000e167000 (most recent call first):\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/socket.py\", line 144 in __init__\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/connection.py\", line 524 in _connect\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/connection.py\", line 492 in connect\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/connection.py\", line 994 in get_connection\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/client.py\", line 772 in execute_command\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/client.py\", line 1239 in exists\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_redis_sessions/__init__.py\", line 202 in factory\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/request.py\", line 205 in session\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/decorator.py\", line 42 in __get__\r\n  File \"/Users/username/Desktop/project/project/security.py\", line 20 in __init__\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 125 in handle_request\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/tweens.py\", line 39 in excview_tween\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_tm/__init__.py\", line 136 in tm_tween\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 249 in invoke_request\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_retry/__init__.py\", line 114 in retry_policy\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 270 in __call__\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 452 in execute\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 175 in service\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/channel.py\", line 336 in service\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 78 in handler_thread\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 864 in run\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nThread 0x000070000dc64000 (most recent call first):\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/mysql/connector/connection_cext.py\", line 395 in cmd_query\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/mysql/connector/cursor_cext.py\", line 266 in execute\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/engine/default.py\", line 552 in do_execute\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/engine/base.py\", line 1244 in _execute_context\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/engine/base.py\", line 1107 in _execute_clauseelement\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/sql/elements.py\", line 287 in _execute_on_connection\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/engine/base.py\", line 988 in execute\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/orm/query.py\", line 3342 in _execute_and_instances\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/ext/baked.py\", line 434 in __iter__\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/ext/baked.py\", line 531 in all\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/orm/strategies.py\", line 865 in _emit_lazyload\r\n  File \"<string>\", line 1 in <lambda>\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/orm/strategies.py\", line 723 in _load_for_state\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/orm/attributes.py\", line 682 in get\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/sqlalchemy/orm/attributes.py\", line 276 in __get__\r\n  File \"/Users/username/Desktop/project/project/lib/auth/auth_base.py\", line 170 in role_perms\r\n  File \"/Users/username/Desktop/project/project/security.py\", line 26 in __init__\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 125 in handle_request\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/tweens.py\", line 39 in excview_tween\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_tm/__init__.py\", line 136 in tm_tween\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 249 in invoke_request\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_retry/__init__.py\", line 114 in retry_policy\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 270 in __call__\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 452 in execute\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 175 in service\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/channel.py\", line 336 in service\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 78 in handler_thread\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 864 in run\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nThread 0x000070000d761000 (most recent call first):\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/_compat.py\", line 58 in recv\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/connection.py\", line 182 in _read_from_socket\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/connection.py\", line 224 in readline\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/connection.py\", line 290 in read_response\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/connection.py\", line 637 in read_response\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/client.py\", line 789 in parse_response\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/client.py\", line 775 in execute_command\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/redis/client.py\", line 1239 in exists\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_redis_sessions/__init__.py\", line 202 in factory\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/request.py\", line 205 in session\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/decorator.py\", line 42 in __get__\r\n  File \"/Users/username/Desktop/project/project/security.py\", line 20 in __init__\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 125 in handle_request\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/tweens.py\", line 39 in excview_tween\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_tm/__init__.py\", line 136 in tm_tween\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 249 in invoke_request\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid_retry/__init__.py\", line 114 in retry_policy\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/pyramid/router.py\", line 270 in __call__\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 452 in execute\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 175 in service\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/channel.py\", line 336 in service\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/waitress/task.py\", line 78 in handler_thread\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 864 in run\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nThread 0x000070000d25e000 (most recent call first):\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/hupper/worker.py\", line 34 in run\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nThread 0x000070000cd5b000 (most recent call first):\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 295 in wait\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/queue.py\", line 164 in get\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/hupper/ipc.py\", line 186 in recv\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/hupper/worker.py\", line 121 in run\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nThread 0x000070000c858000 (most recent call first):\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/hupper/ipc.py\", line 146 in _recv_packet\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/hupper/ipc.py\", line 165 in _read_loop\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 864 in run\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 916 in _bootstrap_inner\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py\", line 884 in _bootstrap\r\n\r\nCurrent thread 0x000000011a4f45c0 (most recent call first):\r\n  File \"/Users/username/Desktop/project/env2/bin/../lib/python3.6/posixpath.py\", line 360 in normpath\r\n  File \"/Users/username/Desktop/project/env2/bin/../lib/python3.6/posixpath.py\", line 385 in abspath\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/hupper/worker.py\", line 106 in iter_module_paths\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/hupper/worker.py\", line 86 in expand_source_paths\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/hupper/worker.py\", line 43 in update_paths\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/hupper/worker.py\", line 267 in worker_main\r\n  File \"/Users/username/Desktop/project/env2/lib/python3.6/site-packages/hupper/ipc.py\", line 318 in spawn_main\r\n  File \"<string>\", line 1 in <module>\r\nWaiting for changes before reloading.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/233", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/233/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/233/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/233/events", "html_url": "https://github.com/Pylons/waitress/issues/233", "id": 418711054, "node_id": "MDU6SXNzdWU0MTg3MTEwNTQ=", "number": 233, "title": "AssertionError: Header value u'text/css; charset=\"utf-8\"' is not a string", "user": {"login": "arielpontes", "id": 1641431, "node_id": "MDQ6VXNlcjE2NDE0MzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1641431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielpontes", "html_url": "https://github.com/arielpontes", "followers_url": "https://api.github.com/users/arielpontes/followers", "following_url": "https://api.github.com/users/arielpontes/following{/other_user}", "gists_url": "https://api.github.com/users/arielpontes/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielpontes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielpontes/subscriptions", "organizations_url": "https://api.github.com/users/arielpontes/orgs", "repos_url": "https://api.github.com/users/arielpontes/repos", "events_url": "https://api.github.com/users/arielpontes/events{/privacy}", "received_events_url": "https://api.github.com/users/arielpontes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-08T09:47:57Z", "updated_at": "2019-03-08T17:09:29Z", "closed_at": "2019-03-08T17:08:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm working on a Django project (Python 2.7) hosted on Heroku and served with waitress. Everything works fine on Django 1.9. After upgrading to 1.11, however, waitress breaks when trying to serve static files with the following error:\r\n\r\n`AssertionError: Header value u'text/css; charset=\"utf-8\"' is not a string in ('Content-Type', u'text/css; charset=\"utf-8\"')`\r\n\r\nThe error occurs on [/task.py#L426](https://github.com/Pylons/waitress/blob/master/waitress/task.py#L426).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/231", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/231/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/231/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/231/events", "html_url": "https://github.com/Pylons/waitress/issues/231", "id": 403136626, "node_id": "MDU6SXNzdWU0MDMxMzY2MjY=", "number": 231, "title": "Question about queue size warning", "user": {"login": "jjmurre", "id": 147069, "node_id": "MDQ6VXNlcjE0NzA2OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/147069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jjmurre", "html_url": "https://github.com/jjmurre", "followers_url": "https://api.github.com/users/jjmurre/followers", "following_url": "https://api.github.com/users/jjmurre/following{/other_user}", "gists_url": "https://api.github.com/users/jjmurre/gists{/gist_id}", "starred_url": "https://api.github.com/users/jjmurre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jjmurre/subscriptions", "organizations_url": "https://api.github.com/users/jjmurre/orgs", "repos_url": "https://api.github.com/users/jjmurre/repos", "events_url": "https://api.github.com/users/jjmurre/events{/privacy}", "received_events_url": "https://api.github.com/users/jjmurre/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-25T12:25:07Z", "updated_at": "2019-01-26T13:08:24Z", "closed_at": "2019-01-26T13:08:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am getting warnings about queue size  == 1  from:\r\n\r\nhttps://github.com/Pylons/waitress/blob/25c862cd45b8ddf44011d0215ea365f52fbbf98b/waitress/task.py#L112\r\n\r\nThis is a site with very low traffic. I was just wondering why a queue size of > 0 issues warnings.\r\nCould it be that I need to change my waitress config? At the moment, I am using the default settings.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/230", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/230/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/230/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/230/events", "html_url": "https://github.com/Pylons/waitress/issues/230", "id": 399720442, "node_id": "MDU6SXNzdWUzOTk3MjA0NDI=", "number": 230, "title": "[] notation for IPv6 with X-Forwarded-For", "user": {"login": "NicolasLM", "id": 7612656, "node_id": "MDQ6VXNlcjc2MTI2NTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7612656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasLM", "html_url": "https://github.com/NicolasLM", "followers_url": "https://api.github.com/users/NicolasLM/followers", "following_url": "https://api.github.com/users/NicolasLM/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasLM/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasLM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasLM/subscriptions", "organizations_url": "https://api.github.com/users/NicolasLM/orgs", "repos_url": "https://api.github.com/users/NicolasLM/repos", "events_url": "https://api.github.com/users/NicolasLM/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasLM/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-16T09:33:29Z", "updated_at": "2019-01-26T09:32:31Z", "closed_at": "2019-01-26T05:31:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "After upgrading to Waitress 1.2.0 and letting it handle `X-Forwarded-For` headers, the WSGI environment `REMOTE_ADDR` is populated with IPv6 using the `[]` notation, for instance `'[2a02::1]'`.\r\n\r\nWhile the WSGI specification doesn't say anything about `REMOTE_ADDR`, it is a bit surprising since this notation cannot be used with `ipaddress`:\r\n\r\n```python\r\n>>> import ipaddress\r\n>>> ipaddress.ip_address('2a02::1')\r\nIPv6Address('2a02::1')\r\n>>> ipaddress.ip_address('[2a02::1]')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib/python3.4/ipaddress.py\", line 54, in ip_address\r\n    address)\r\nValueError: '[2a02::1]' does not appear to be an IPv4 or IPv6 address\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/229", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/229/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/229/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/229/events", "html_url": "https://github.com/Pylons/waitress/issues/229", "id": 399571800, "node_id": "MDU6SXNzdWUzOTk1NzE4MDA=", "number": 229, "title": "Check releases on GitHub for v1.2.0", "user": {"login": "stevepiercy", "id": 102112, "node_id": "MDQ6VXNlcjEwMjExMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/102112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevepiercy", "html_url": "https://github.com/stevepiercy", "followers_url": "https://api.github.com/users/stevepiercy/followers", "following_url": "https://api.github.com/users/stevepiercy/following{/other_user}", "gists_url": "https://api.github.com/users/stevepiercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevepiercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevepiercy/subscriptions", "organizations_url": "https://api.github.com/users/stevepiercy/orgs", "repos_url": "https://api.github.com/users/stevepiercy/repos", "events_url": "https://api.github.com/users/stevepiercy/events{/privacy}", "received_events_url": "https://api.github.com/users/stevepiercy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-01-15T22:53:30Z", "updated_at": "2019-01-16T00:44:22Z", "closed_at": "2019-01-16T00:44:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The tag is present, but GitHub doesn't recognize 1.2.0 as \"latest\".\r\nhttps://github.com/Pylons/waitress/releases\r\n\r\nSee Help.\r\nhttps://help.github.com/articles/creating-releases/", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/227", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/227/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/227/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/227/events", "html_url": "https://github.com/Pylons/waitress/issues/227", "id": 395765494, "node_id": "MDU6SXNzdWUzOTU3NjU0OTQ=", "number": 227, "title": "clear_untrusted_proxy_headers should work if set even if trusted_proxy is not set", "user": {"login": "mmerickel", "id": 487237, "node_id": "MDQ6VXNlcjQ4NzIzNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/487237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmerickel", "html_url": "https://github.com/mmerickel", "followers_url": "https://api.github.com/users/mmerickel/followers", "following_url": "https://api.github.com/users/mmerickel/following{/other_user}", "gists_url": "https://api.github.com/users/mmerickel/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmerickel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmerickel/subscriptions", "organizations_url": "https://api.github.com/users/mmerickel/orgs", "repos_url": "https://api.github.com/users/mmerickel/repos", "events_url": "https://api.github.com/users/mmerickel/events{/privacy}", "received_events_url": "https://api.github.com/users/mmerickel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Pylons/waitress/milestones/3", "html_url": "https://github.com/Pylons/waitress/milestone/3", "labels_url": "https://api.github.com/repos/Pylons/waitress/milestones/3/labels", "id": 3894165, "node_id": "MDk6TWlsZXN0b25lMzg5NDE2NQ==", "number": 3, "title": "1.2.0", "description": "", "creator": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2018-12-12T21:16:04Z", "updated_at": "2019-01-15T19:25:40Z", "due_on": null, "closed_at": "2019-01-15T19:25:40Z"}, "comments": 0, "created_at": "2019-01-03T23:50:59Z", "updated_at": "2019-01-04T16:17:01Z", "closed_at": "2019-01-04T16:17:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Right now the setting is only allowed when trusted_proxy is set. In development you may not have a trusted proxy, but it's good to still filter out the proxy headers and warn about them. For example in development I want `log_untrusted_proxy_headers = yes` and `clear_untrusted_proxy_headers = yes` because we really want to set `clear_untrusted_proxy_headers` to `yes` by default in a future version and it should affect all configurations.\r\n\r\n```\r\nValueError: The values trusted_proxy_headers and clear_untrusted_proxy_headers have no meaning without setting trusted_proxy. Cowardly refusing to continue.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/226", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/226/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/226/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/226/events", "html_url": "https://github.com/Pylons/waitress/issues/226", "id": 395666647, "node_id": "MDU6SXNzdWUzOTU2NjY2NDc=", "number": 226, "title": "log_untrusted_proxy_headers should warn about missing headers", "user": {"login": "mmerickel", "id": 487237, "node_id": "MDQ6VXNlcjQ4NzIzNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/487237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmerickel", "html_url": "https://github.com/mmerickel", "followers_url": "https://api.github.com/users/mmerickel/followers", "following_url": "https://api.github.com/users/mmerickel/following{/other_user}", "gists_url": "https://api.github.com/users/mmerickel/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmerickel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmerickel/subscriptions", "organizations_url": "https://api.github.com/users/mmerickel/orgs", "repos_url": "https://api.github.com/users/mmerickel/repos", "events_url": "https://api.github.com/users/mmerickel/events{/privacy}", "received_events_url": "https://api.github.com/users/mmerickel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Pylons/waitress/milestones/3", "html_url": "https://github.com/Pylons/waitress/milestone/3", "labels_url": "https://api.github.com/repos/Pylons/waitress/milestones/3/labels", "id": 3894165, "node_id": "MDk6TWlsZXN0b25lMzg5NDE2NQ==", "number": 3, "title": "1.2.0", "description": "", "creator": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2018-12-12T21:16:04Z", "updated_at": "2019-01-15T19:25:40Z", "due_on": null, "closed_at": "2019-01-15T19:25:40Z"}, "comments": 1, "created_at": "2019-01-03T17:49:56Z", "updated_at": "2019-01-04T04:54:24Z", "closed_at": "2019-01-04T04:54:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The naming is a little off, but I think it's worth updating `log_untrusted_proxy_headers` to also log if there are headers in `trusted_proxy_headers` that are not set in the request. This indicates a misconfiguration upstream, or in `trusted_proxy_headers` which would allow someone to potentially set their own value for that header.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/225", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/225/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/225/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/225/events", "html_url": "https://github.com/Pylons/waitress/issues/225", "id": 395645338, "node_id": "MDU6SXNzdWUzOTU2NDUzMzg=", "number": 225, "title": "trusted_proxy_headers should allow for comma separation", "user": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Pylons/waitress/milestones/3", "html_url": "https://github.com/Pylons/waitress/milestone/3", "labels_url": "https://api.github.com/repos/Pylons/waitress/milestones/3/labels", "id": 3894165, "node_id": "MDk6TWlsZXN0b25lMzg5NDE2NQ==", "number": 3, "title": "1.2.0", "description": "", "creator": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2018-12-12T21:16:04Z", "updated_at": "2019-01-15T19:25:40Z", "due_on": null, "closed_at": "2019-01-15T19:25:40Z"}, "comments": 1, "created_at": "2019-01-03T16:46:08Z", "updated_at": "2019-01-04T16:17:02Z", "closed_at": "2019-01-04T16:17:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently you have to provide it a list that is space or newline separated, we want to also allow commas.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/223", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/223/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/223/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/223/events", "html_url": "https://github.com/Pylons/waitress/issues/223", "id": 389915070, "node_id": "MDU6SXNzdWUzODk5MTUwNzA=", "number": 223, "title": "Using \"trusted_proxy\" with multiple reverse proxies", "user": {"login": "NicolasLM", "id": 7612656, "node_id": "MDQ6VXNlcjc2MTI2NTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7612656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasLM", "html_url": "https://github.com/NicolasLM", "followers_url": "https://api.github.com/users/NicolasLM/followers", "following_url": "https://api.github.com/users/NicolasLM/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasLM/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasLM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasLM/subscriptions", "organizations_url": "https://api.github.com/users/NicolasLM/orgs", "repos_url": "https://api.github.com/users/NicolasLM/repos", "events_url": "https://api.github.com/users/NicolasLM/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasLM/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Pylons/waitress/milestones/3", "html_url": "https://github.com/Pylons/waitress/milestone/3", "labels_url": "https://api.github.com/repos/Pylons/waitress/milestones/3/labels", "id": 3894165, "node_id": "MDk6TWlsZXN0b25lMzg5NDE2NQ==", "number": 3, "title": "1.2.0", "description": "", "creator": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2018-12-12T21:16:04Z", "updated_at": "2019-01-15T19:25:40Z", "due_on": null, "closed_at": "2019-01-15T19:25:40Z"}, "comments": 3, "created_at": "2018-12-11T19:20:48Z", "updated_at": "2019-01-15T19:24:40Z", "closed_at": "2019-01-15T19:24:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "In all cloud environments that I know of, managed load balancers send requests to the backend from multiple IPs, usually two. Moreover these IPs can often change unannounced.\r\n\r\nI would like to use the new waitress feature that deals with `X-Forwarded-For` headers but it's impossible without being able to at least give a network range to `trusted_proxy` instead of a single IP.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/222", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/222/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/222/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/222/events", "html_url": "https://github.com/Pylons/waitress/issues/222", "id": 389912311, "node_id": "MDU6SXNzdWUzODk5MTIzMTE=", "number": 222, "title": "Impossible to remove Server header in responses", "user": {"login": "NicolasLM", "id": 7612656, "node_id": "MDQ6VXNlcjc2MTI2NTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7612656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NicolasLM", "html_url": "https://github.com/NicolasLM", "followers_url": "https://api.github.com/users/NicolasLM/followers", "following_url": "https://api.github.com/users/NicolasLM/following{/other_user}", "gists_url": "https://api.github.com/users/NicolasLM/gists{/gist_id}", "starred_url": "https://api.github.com/users/NicolasLM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NicolasLM/subscriptions", "organizations_url": "https://api.github.com/users/NicolasLM/orgs", "repos_url": "https://api.github.com/users/NicolasLM/repos", "events_url": "https://api.github.com/users/NicolasLM/events{/privacy}", "received_events_url": "https://api.github.com/users/NicolasLM/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Pylons/waitress/milestones/3", "html_url": "https://github.com/Pylons/waitress/milestone/3", "labels_url": "https://api.github.com/repos/Pylons/waitress/milestones/3/labels", "id": 3894165, "node_id": "MDk6TWlsZXN0b25lMzg5NDE2NQ==", "number": 3, "title": "1.2.0", "description": "", "creator": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2018-12-12T21:16:04Z", "updated_at": "2019-01-15T19:25:40Z", "due_on": null, "closed_at": "2019-01-15T19:25:40Z"}, "comments": 2, "created_at": "2018-12-11T19:13:20Z", "updated_at": "2019-01-15T19:24:55Z", "closed_at": "2019-01-15T19:24:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "A pet peeve of mine is removing the `Server` header in responses. This header is optional in the specs and quite frankly only adds useless bytes on the wire.\r\n\r\nSo I tried to remove it with no luck:\r\n\r\n```python\r\nserve(application, ident=None)  # renders 'Server: None'\r\nserve(application, ident='')  # renders 'Server: '\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/218", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/218/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/218/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/218/events", "html_url": "https://github.com/Pylons/waitress/issues/218", "id": 375699421, "node_id": "MDU6SXNzdWUzNzU2OTk0MjE=", "number": 218, "title": "Excessive `ResourceWarning`s when running waitress test suite", "user": {"login": "stevepiercy", "id": 102112, "node_id": "MDQ6VXNlcjEwMjExMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/102112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevepiercy", "html_url": "https://github.com/stevepiercy", "followers_url": "https://api.github.com/users/stevepiercy/followers", "following_url": "https://api.github.com/users/stevepiercy/following{/other_user}", "gists_url": "https://api.github.com/users/stevepiercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevepiercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevepiercy/subscriptions", "organizations_url": "https://api.github.com/users/stevepiercy/orgs", "repos_url": "https://api.github.com/users/stevepiercy/repos", "events_url": "https://api.github.com/users/stevepiercy/events{/privacy}", "received_events_url": "https://api.github.com/users/stevepiercy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-30T21:22:23Z", "updated_at": "2019-04-11T21:06:40Z", "closed_at": "2019-04-11T21:06:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Excessive `ResourceWarning`s when running waitress test suite. It does not do a good job cleaning up after itself, and if you run it with limited amount of file descriptors (using ulimit) it will actually fail.\r\n\r\nThis has been on my todo list to fix.\r\n\r\n_Originally posted by @bertjwregeer in https://github.com/Pylons/waitress/issues/216#issuecomment-434402780_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/217", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/217/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/217/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/217/events", "html_url": "https://github.com/Pylons/waitress/issues/217", "id": 374827239, "node_id": "MDU6SXNzdWUzNzQ4MjcyMzk=", "number": 217, "title": "Argument check for unix_socket parameter inconsistent", "user": {"login": "Frank-Krick", "id": 1908654, "node_id": "MDQ6VXNlcjE5MDg2NTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1908654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frank-Krick", "html_url": "https://github.com/Frank-Krick", "followers_url": "https://api.github.com/users/Frank-Krick/followers", "following_url": "https://api.github.com/users/Frank-Krick/following{/other_user}", "gists_url": "https://api.github.com/users/Frank-Krick/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frank-Krick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frank-Krick/subscriptions", "organizations_url": "https://api.github.com/users/Frank-Krick/orgs", "repos_url": "https://api.github.com/users/Frank-Krick/repos", "events_url": "https://api.github.com/users/Frank-Krick/events{/privacy}", "received_events_url": "https://api.github.com/users/Frank-Krick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-29T01:43:16Z", "updated_at": "2018-12-03T05:52:40Z", "closed_at": "2018-12-03T05:52:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It is possible to provide the parameter unix_socket and listen at the same time. Waitress will create a server using the unix socket while ignoring the adresses in listen. Providing a\r\nunix_socket and host and port parameter will do the same.\r\n \r\nThis seems to be inconsistent behavior compared to how listen and host/port are handled.\r\n\r\nThis raises errors\r\n```python\r\nimport waitress\r\n\r\n\r\ndef app(environ, start_response):\r\n    return []\r\n\r\n\r\nif __name__ == '__main__':\r\n    waitress.serve(\r\n        app,\r\n        host=\"localhost\",\r\n        port=8080,\r\n        listen=\"*:8080\")\r\n```\r\n\r\nThis does not\r\n```python\r\nimport waitress\r\n\r\n\r\ndef app(environ, start_response):\r\n    return []\r\n\r\n\r\nif __name__ == '__main__':\r\n    waitress.serve(\r\n        app,\r\n        unix_socket='./test_socket',\r\n        host=\"localhost\",\r\n        port=8080)\r\n```\r\n\r\n```python\r\nimport waitress\r\n\r\n\r\ndef app(environ, start_response):\r\n    return []\r\n\r\n\r\nif __name__ == '__main__':\r\n    waitress.serve(\r\n        app,\r\n        unix_socket='./test_socket',\r\n        listen=\"*:8080\")\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/216", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/216/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/216/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/216/events", "html_url": "https://github.com/Pylons/waitress/issues/216", "id": 374826717, "node_id": "MDU6SXNzdWUzNzQ4MjY3MTc=", "number": 216, "title": "Noisy output for test cases executed with python 3", "user": {"login": "Frank-Krick", "id": 1908654, "node_id": "MDQ6VXNlcjE5MDg2NTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1908654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frank-Krick", "html_url": "https://github.com/Frank-Krick", "followers_url": "https://api.github.com/users/Frank-Krick/followers", "following_url": "https://api.github.com/users/Frank-Krick/following{/other_user}", "gists_url": "https://api.github.com/users/Frank-Krick/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frank-Krick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frank-Krick/subscriptions", "organizations_url": "https://api.github.com/users/Frank-Krick/orgs", "repos_url": "https://api.github.com/users/Frank-Krick/repos", "events_url": "https://api.github.com/users/Frank-Krick/events{/privacy}", "received_events_url": "https://api.github.com/users/Frank-Krick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-29T01:39:10Z", "updated_at": "2018-10-30T17:47:29Z", "closed_at": "2018-10-29T18:14:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Executing the tests with `python -m unittest discover` using python3 creates a very\r\nnoisy test output with a lot of ResourceWarnings and similar.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/214", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/214/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/214/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/214/events", "html_url": "https://github.com/Pylons/waitress/issues/214", "id": 374459910, "node_id": "MDU6SXNzdWUzNzQ0NTk5MTA=", "number": 214, "title": "[BUG] Application stops socket reception", "user": {"login": "nuno407", "id": 11352538, "node_id": "MDQ6VXNlcjExMzUyNTM4", "avatar_url": "https://avatars2.githubusercontent.com/u/11352538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nuno407", "html_url": "https://github.com/nuno407", "followers_url": "https://api.github.com/users/nuno407/followers", "following_url": "https://api.github.com/users/nuno407/following{/other_user}", "gists_url": "https://api.github.com/users/nuno407/gists{/gist_id}", "starred_url": "https://api.github.com/users/nuno407/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nuno407/subscriptions", "organizations_url": "https://api.github.com/users/nuno407/orgs", "repos_url": "https://api.github.com/users/nuno407/repos", "events_url": "https://api.github.com/users/nuno407/events{/privacy}", "received_events_url": "https://api.github.com/users/nuno407/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-10-26T16:34:35Z", "updated_at": "2019-01-15T19:25:25Z", "closed_at": "2019-01-15T19:25:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm getting a weird issue in past few days. I will try to explain it and how to reproduce it.\r\n\r\n_**Setup:**_\r\n\r\n- Bottle Framework + waitress serving on ip '0.0.0.0' (All device interfaces)\r\n- 1 thread running Bottle + 1 thread running a unix socket connection\r\n\r\n\r\n_**Tests:**_\r\n\r\n- When running this type of setup with an internet connection all is ok.\r\n- When the start up of the program is done with internet connection and then internet connection is dropped all is ok\r\n- When the start up of program is done _without internet connection_ the unix socket stops receiving data and webserver(Bottle + Waitress) continues ok (API respond to request)\r\n- - When the start up of program is done _without internet connection_ and serving **ip is 127.0.0.1/local host** all is ok.\r\n \r\n\r\n_**Notes:**_\r\nIf another cgi is used (for example wsgiref), the problem of the socket stop receiving is not present.\r\nIf another cgi is used (for example wsgiref), the problem of the socket stop receiving is not present.\r\n\r\n\r\n_**First questions:**_\r\n\r\nWhat could be done on Waitress initialization that could brake if no internet connection exists.\r\n\r\n\r\nAny ideia?\r\nFeel free to close issue if you think that the issue is not related to Waitress specifically!\r\n\r\n\r\nRegards,\r\nNuno ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/213", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/213/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/213/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/213/events", "html_url": "https://github.com/Pylons/waitress/issues/213", "id": 374287073, "node_id": "MDU6SXNzdWUzNzQyODcwNzM=", "number": 213, "title": "Aiohttp support", "user": {"login": "floyernick", "id": 16915653, "node_id": "MDQ6VXNlcjE2OTE1NjUz", "avatar_url": "https://avatars0.githubusercontent.com/u/16915653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/floyernick", "html_url": "https://github.com/floyernick", "followers_url": "https://api.github.com/users/floyernick/followers", "following_url": "https://api.github.com/users/floyernick/following{/other_user}", "gists_url": "https://api.github.com/users/floyernick/gists{/gist_id}", "starred_url": "https://api.github.com/users/floyernick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/floyernick/subscriptions", "organizations_url": "https://api.github.com/users/floyernick/orgs", "repos_url": "https://api.github.com/users/floyernick/repos", "events_url": "https://api.github.com/users/floyernick/events{/privacy}", "received_events_url": "https://api.github.com/users/floyernick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-26T08:52:55Z", "updated_at": "2018-10-28T15:37:08Z", "closed_at": "2018-10-28T15:37:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way how to combine waitress and aiohttp? Can you share an example? Thanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/212", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/212/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/212/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/212/events", "html_url": "https://github.com/Pylons/waitress/issues/212", "id": 365744431, "node_id": "MDU6SXNzdWUzNjU3NDQ0MzE=", "number": 212, "title": "Bad handling of URL encoded '/' within a path component", "user": {"login": "sthenault", "id": 1853708, "node_id": "MDQ6VXNlcjE4NTM3MDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1853708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sthenault", "html_url": "https://github.com/sthenault", "followers_url": "https://api.github.com/users/sthenault/followers", "following_url": "https://api.github.com/users/sthenault/following{/other_user}", "gists_url": "https://api.github.com/users/sthenault/gists{/gist_id}", "starred_url": "https://api.github.com/users/sthenault/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sthenault/subscriptions", "organizations_url": "https://api.github.com/users/sthenault/orgs", "repos_url": "https://api.github.com/users/sthenault/repos", "events_url": "https://api.github.com/users/sthenault/events{/privacy}", "received_events_url": "https://api.github.com/users/sthenault/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-02T05:16:57Z", "updated_at": "2018-10-02T06:06:25Z", "closed_at": "2018-10-02T05:21:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "The way waitress handles url  like `http://site.com/path_with_%2f_inside/remaining` doesn't seem  correct. In the given example, it starts by url decoding the whole path, so `path_with_%2f_inside/remaining` becomes `path_with_/_inside/remaining`. Then it naturally doesn't match anymore route like {part 1}/{part 2} while I would have expected it to match `path_with_%2f_inside` as `part 1`.\r\n\r\nAs I understand RFC 3986, decoding should occurs once path segment have already been split into segments.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/207", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/207/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/207/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/207/events", "html_url": "https://github.com/Pylons/waitress/issues/207", "id": 357786108, "node_id": "MDU6SXNzdWUzNTc3ODYxMDg=", "number": 207, "title": "Unix sockets don't set correct SERVER_NAME/SERVER_PORT", "user": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-06T19:06:26Z", "updated_at": "2018-12-03T05:50:45Z", "closed_at": "2018-12-03T05:50:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Unfortunately the WSGI spec doesn't give much guidance on what to do.\r\n\r\nSee discussion with @tseaver here: https://github.com/Pylons/waitress/pull/171#discussion_r215722070 for more information.\r\n\r\nWe may want to follow some of the ideas/steps that gunicorn has taken, and or allow the SERVER_NAME/SERVER_PORT to be overridden by adjustments if the server is started with a unix socket.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/204", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/204/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/204/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/204/events", "html_url": "https://github.com/Pylons/waitress/issues/204", "id": 356840458, "node_id": "MDU6SXNzdWUzNTY4NDA0NTg=", "number": 204, "title": "Pass an already created unix socket", "user": {"login": "ltworf", "id": 1379609, "node_id": "MDQ6VXNlcjEzNzk2MDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1379609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ltworf", "html_url": "https://github.com/ltworf", "followers_url": "https://api.github.com/users/ltworf/followers", "following_url": "https://api.github.com/users/ltworf/following{/other_user}", "gists_url": "https://api.github.com/users/ltworf/gists{/gist_id}", "starred_url": "https://api.github.com/users/ltworf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ltworf/subscriptions", "organizations_url": "https://api.github.com/users/ltworf/orgs", "repos_url": "https://api.github.com/users/ltworf/repos", "events_url": "https://api.github.com/users/ltworf/events{/privacy}", "received_events_url": "https://api.github.com/users/ltworf/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-09-04T14:37:29Z", "updated_at": "2018-11-14T22:10:36Z", "closed_at": "2018-11-14T22:10:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Instead of passing the path to a unix socket, it'd be better to allow to pass an already created unix socket.\r\n\r\nIn this way, one could get a socket from systemd directly, could create a socket setting more things than just the mode, and could detach the process after the socket is created and before the loop starts.\r\n\r\nAll of those things would be needed to implement proper unix daemons that report to the init system when they are ready, instead of relying on retries or sleep().", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/200", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/200/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/200/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/200/events", "html_url": "https://github.com/Pylons/waitress/issues/200", "id": 345501418, "node_id": "MDU6SXNzdWUzNDU1MDE0MTg=", "number": 200, "title": "Hot reload option?", "user": {"login": "farebord", "id": 602693, "node_id": "MDQ6VXNlcjYwMjY5Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/602693?v=4", "gravatar_id": "", "url": "https://api.github.com/users/farebord", "html_url": "https://github.com/farebord", "followers_url": "https://api.github.com/users/farebord/followers", "following_url": "https://api.github.com/users/farebord/following{/other_user}", "gists_url": "https://api.github.com/users/farebord/gists{/gist_id}", "starred_url": "https://api.github.com/users/farebord/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/farebord/subscriptions", "organizations_url": "https://api.github.com/users/farebord/orgs", "repos_url": "https://api.github.com/users/farebord/repos", "events_url": "https://api.github.com/users/farebord/events{/privacy}", "received_events_url": "https://api.github.com/users/farebord/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-29T04:45:48Z", "updated_at": "2018-07-29T16:46:19Z", "closed_at": "2018-07-29T16:46:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Waitress is the only WSGI server I can use when developing on Windows. I'm developing mostly on Falcon Framework and it doesn't reload on app changes. Gunicorn has a great option --reload that automatically restart workers when code changes, but I noticed how important this options is on developing. \r\n\r\nGunicorn uses inotify to reload. To make it Windows compat you could use syncthing-inotify.\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/197", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/197/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/197/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/197/events", "html_url": "https://github.com/Pylons/waitress/issues/197", "id": 335231360, "node_id": "MDU6SXNzdWUzMzUyMzEzNjA=", "number": 197, "title": "An illegal '0' character is appended to a 304 Not Modified Response", "user": {"login": "JonnoFTW", "id": 650314, "node_id": "MDQ6VXNlcjY1MDMxNA==", "avatar_url": "https://avatars3.githubusercontent.com/u/650314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JonnoFTW", "html_url": "https://github.com/JonnoFTW", "followers_url": "https://api.github.com/users/JonnoFTW/followers", "following_url": "https://api.github.com/users/JonnoFTW/following{/other_user}", "gists_url": "https://api.github.com/users/JonnoFTW/gists{/gist_id}", "starred_url": "https://api.github.com/users/JonnoFTW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JonnoFTW/subscriptions", "organizations_url": "https://api.github.com/users/JonnoFTW/orgs", "repos_url": "https://api.github.com/users/JonnoFTW/repos", "events_url": "https://api.github.com/users/JonnoFTW/events{/privacy}", "received_events_url": "https://api.github.com/users/JonnoFTW/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-25T01:21:39Z", "updated_at": "2018-09-06T04:42:04Z", "closed_at": "2018-09-06T04:42:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using the following app:\r\n\r\n```python\r\nfrom pyramid.config import Configurator\r\ndef main(global_config, **settings):\r\n    config = Configurator(settings=settings)\r\n    config.add_static_view('static', 'static', cache_max_age=3600)\r\n    return config.make_wsgi_app()\r\n```\r\n\r\nAnd this `development.ini` config:\r\n\r\n```\r\n[server:main]\r\nuse = egg:waitress#main\r\nhost = 0.0.0.0\r\nport = 6543\r\n```\r\nAnd started with;\r\n\r\n```\r\npserve development.ini\r\n```\r\nAnd then making the following GET request, (note the `If-Modified-Since` header):\r\n\r\n```\r\nGET /static/test.css HTTP/1.1\r\nHost: localhost:6543\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:60.0) Gecko/20100101 Firefox/60.0\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nAccept-Language: en-AU,en-GB;q=0.7,en;q=0.3\r\nDNT: 1\r\nConnection: keep-alive\r\nUpgrade-Insecure-Requests: 1\r\nIf-Modified-Since: Mon, 23 Jun 2018 10:28:41 GMT\r\nCache-Control: max-age=0\r\n```\r\nI get the normal response:\r\n\r\n```\r\nHTTP/1.1 200 OK\r\nCache-Control: max-age=3600\r\nContent-Length: 32\r\nContent-Type: text/css; charset=UTF-8\r\nDate: Sat, 23 Jun 2018 09:00:18 GMT\r\nExpires: Sat, 23 Jun 2018 10:00:18 GMT\r\nLast-Modified: Sat, 23 Jun 2018 08:54:31 GMT\r\nServer: waitress\r\n\r\nhtml, body {\r\n    height: 100%;\r\n}\r\n```\r\n\r\nHowever if the `If-Modified-Since` header is changed to later:\r\n\r\n```\r\nGET /static/test.css HTTP/1.1\r\nHost: p:6543\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:60.0) Gecko/20100101 Firefox/60.0\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nAccept-Language: en-AU,en-GB;q=0.7,en;q=0.3\r\nDNT: 1\r\nConnection: keep-alive\r\nUpgrade-Insecure-Requests: 1\r\nIf-Modified-Since: Mon, 23 Jun 2018 10:28:41 GMT\r\nCache-Control: max-age=0\r\n```\r\n\r\nI get this:\r\n\r\n```\r\nHTTP/1.1 304 Not Modified\r\nCache-Control: max-age=3600\r\nConnection: close\r\nDate: Sat, 23 Jun 2018 09:00:52 GMT\r\nExpires: Sat, 23 Jun 2018 10:00:52 GMT\r\nLast-Modified: Sat, 23 Jun 2018 08:54:31 GMT\r\nServer: waitress\r\nTransfer-Encoding: chunked\r\n\r\n0\r\n```\r\n\r\nNote the illegal 0 in the body. I had to do this via telnet, making the same request with python requests shows the body as empty:\r\n\r\n```python\r\n>>> requests.get('http://localhost:6543/static/landing_script.js',headers={'If-Modified-Since': 'Mon, 22 Jun 2018 10:28:31 GMT'}).content\r\nb''\r\n```\r\nThe problem with this is that if you put load balancing server in front, when it passes this through it errors out when the 0 appears:\r\n\r\nhttps://support.citrix.com/article/CTX233721", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/194", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/194/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/194/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/194/events", "html_url": "https://github.com/Pylons/waitress/issues/194", "id": 324749784, "node_id": "MDU6SXNzdWUzMjQ3NDk3ODQ=", "number": 194, "title": "Why does waitress ignore http headers with \"_\" ?", "user": {"login": "bostrick", "id": 2624756, "node_id": "MDQ6VXNlcjI2MjQ3NTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2624756?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bostrick", "html_url": "https://github.com/bostrick", "followers_url": "https://api.github.com/users/bostrick/followers", "following_url": "https://api.github.com/users/bostrick/following{/other_user}", "gists_url": "https://api.github.com/users/bostrick/gists{/gist_id}", "starred_url": "https://api.github.com/users/bostrick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bostrick/subscriptions", "organizations_url": "https://api.github.com/users/bostrick/orgs", "repos_url": "https://api.github.com/users/bostrick/repos", "events_url": "https://api.github.com/users/bostrick/events{/privacy}", "received_events_url": "https://api.github.com/users/bostrick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-20T22:55:37Z", "updated_at": "2018-05-20T23:14:21Z", "closed_at": "2018-05-20T23:09:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "When parsing headers, waitress ignores any any HTTP header with \"_\"... \r\n\r\nhttps://github.com/Pylons/waitress/blob/master/waitress/parser.py#L185\r\n\r\nThis is non-intuitive, and against RFC7230 spec...\r\n\r\nhttps://tools.ietf.org/html/rfc7230#appendix-B\r\n\r\n    header-field = field-name \":\" OWS field-value OWS\r\n    field-name = token\r\n    token = 1*tchar\r\n    tchar = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" / \"*\" / \"+\" / \"-\" / \".\" /\r\n    \"^\" / \"_\" / \"`\" / \"|\" / \"~\" / DIGIT / ALPHA\r\n\r\nThis led to wasted effort debugging the wrong layer of a protocol before using a packet sniffer... is there a reason for it?\r\n\r\nThanks!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/189", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/189/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/189/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/189/events", "html_url": "https://github.com/Pylons/waitress/issues/189", "id": 324594075, "node_id": "MDU6SXNzdWUzMjQ1OTQwNzU=", "number": 189, "title": "Update tox to align with Pyramid's", "user": {"login": "stevepiercy", "id": 102112, "node_id": "MDQ6VXNlcjEwMjExMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/102112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevepiercy", "html_url": "https://github.com/stevepiercy", "followers_url": "https://api.github.com/users/stevepiercy/followers", "following_url": "https://api.github.com/users/stevepiercy/following{/other_user}", "gists_url": "https://api.github.com/users/stevepiercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevepiercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevepiercy/subscriptions", "organizations_url": "https://api.github.com/users/stevepiercy/orgs", "repos_url": "https://api.github.com/users/stevepiercy/repos", "events_url": "https://api.github.com/users/stevepiercy/events{/privacy}", "received_events_url": "https://api.github.com/users/stevepiercy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-19T02:28:53Z", "updated_at": "2018-05-20T20:35:43Z", "closed_at": "2018-05-20T20:35:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We should drop:\r\n\r\n- [x] Python 3.3\r\n- [x] Python 3.7 (nightly) as OK to fail\r\n- [x] `setup.py`\r\n- [x] `README.rst`\r\n- [ ] Other?\r\n\r\nThere might be a need to update other files, too, including `setup.py`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/188", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/188/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/188/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/188/events", "html_url": "https://github.com/Pylons/waitress/issues/188", "id": 324576763, "node_id": "MDU6SXNzdWUzMjQ1NzY3NjM=", "number": 188, "title": "Add HACKING.txt and contributing.md meta data files", "user": {"login": "stevepiercy", "id": 102112, "node_id": "MDQ6VXNlcjEwMjExMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/102112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevepiercy", "html_url": "https://github.com/stevepiercy", "followers_url": "https://api.github.com/users/stevepiercy/followers", "following_url": "https://api.github.com/users/stevepiercy/following{/other_user}", "gists_url": "https://api.github.com/users/stevepiercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevepiercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevepiercy/subscriptions", "organizations_url": "https://api.github.com/users/stevepiercy/orgs", "repos_url": "https://api.github.com/users/stevepiercy/repos", "events_url": "https://api.github.com/users/stevepiercy/events{/privacy}", "received_events_url": "https://api.github.com/users/stevepiercy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "stevepiercy", "id": 102112, "node_id": "MDQ6VXNlcjEwMjExMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/102112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevepiercy", "html_url": "https://github.com/stevepiercy", "followers_url": "https://api.github.com/users/stevepiercy/followers", "following_url": "https://api.github.com/users/stevepiercy/following{/other_user}", "gists_url": "https://api.github.com/users/stevepiercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevepiercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevepiercy/subscriptions", "organizations_url": "https://api.github.com/users/stevepiercy/orgs", "repos_url": "https://api.github.com/users/stevepiercy/repos", "events_url": "https://api.github.com/users/stevepiercy/events{/privacy}", "received_events_url": "https://api.github.com/users/stevepiercy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "stevepiercy", "id": 102112, "node_id": "MDQ6VXNlcjEwMjExMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/102112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevepiercy", "html_url": "https://github.com/stevepiercy", "followers_url": "https://api.github.com/users/stevepiercy/followers", "following_url": "https://api.github.com/users/stevepiercy/following{/other_user}", "gists_url": "https://api.github.com/users/stevepiercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevepiercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevepiercy/subscriptions", "organizations_url": "https://api.github.com/users/stevepiercy/orgs", "repos_url": "https://api.github.com/users/stevepiercy/repos", "events_url": "https://api.github.com/users/stevepiercy/events{/privacy}", "received_events_url": "https://api.github.com/users/stevepiercy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-05-18T23:12:23Z", "updated_at": "2018-05-20T20:37:12Z", "closed_at": "2018-05-20T20:37:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "update this repo with adapted [HACKING.txt](https://github.com/Pylons/pyramid/blob/master/HACKING.txt) and [contributing.md](https://github.com/Pylons/pyramid/blob/master/contributing.md) files, and any other meta data stuff.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/186", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/186/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/186/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/186/events", "html_url": "https://github.com/Pylons/waitress/issues/186", "id": 310184607, "node_id": "MDU6SXNzdWUzMTAxODQ2MDc=", "number": 186, "title": "Exception on run with cyrillic symbols in the hostname", "user": {"login": "uliantsev-a", "id": 2850533, "node_id": "MDQ6VXNlcjI4NTA1MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2850533?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uliantsev-a", "html_url": "https://github.com/uliantsev-a", "followers_url": "https://api.github.com/users/uliantsev-a/followers", "following_url": "https://api.github.com/users/uliantsev-a/following{/other_user}", "gists_url": "https://api.github.com/users/uliantsev-a/gists{/gist_id}", "starred_url": "https://api.github.com/users/uliantsev-a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uliantsev-a/subscriptions", "organizations_url": "https://api.github.com/users/uliantsev-a/orgs", "repos_url": "https://api.github.com/users/uliantsev-a/repos", "events_url": "https://api.github.com/users/uliantsev-a/events{/privacy}", "received_events_url": "https://api.github.com/users/uliantsev-a/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-03-30T22:37:43Z", "updated_at": "2018-09-06T17:27:36Z", "closed_at": "2018-05-20T20:37:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Sighted it on the Windows 7 system with python 3.6.3 and waitress 1.1.0\r\n```\r\nFile \"c:\\users\\user\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\waitress\\__init__.py\", line 11, in serve\r\nserver = _server(app, **kw)\r\nFile \"c:\\users\\user\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\waitress\\server.py\", line 85, in create_server\r\nsockinfo=sockinfo)\r\nFile \"c:\\users\\user\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\waitress\\server.py\", line 184, in __init__\r\nself.server_name = self.get_server_name(self.effective_host)\r\nFile \"c:\\users\\user\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\waitress\\server.py\", line 206, in get_server_name\r\n\r\nserver_name = self.socketmod.gethostbyaddr(server_name)[0]\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xd6 in position 6: unexpected end of data\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/185", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/185/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/185/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/185/events", "html_url": "https://github.com/Pylons/waitress/issues/185", "id": 308298714, "node_id": "MDU6SXNzdWUzMDgyOTg3MTQ=", "number": 185, "title": "Set the fd", "user": {"login": "kiorq", "id": 23644557, "node_id": "MDQ6VXNlcjIzNjQ0NTU3", "avatar_url": "https://avatars3.githubusercontent.com/u/23644557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kiorq", "html_url": "https://github.com/kiorq", "followers_url": "https://api.github.com/users/kiorq/followers", "following_url": "https://api.github.com/users/kiorq/following{/other_user}", "gists_url": "https://api.github.com/users/kiorq/gists{/gist_id}", "starred_url": "https://api.github.com/users/kiorq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kiorq/subscriptions", "organizations_url": "https://api.github.com/users/kiorq/orgs", "repos_url": "https://api.github.com/users/kiorq/repos", "events_url": "https://api.github.com/users/kiorq/events{/privacy}", "received_events_url": "https://api.github.com/users/kiorq/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-24T21:03:11Z", "updated_at": "2018-03-24T21:27:49Z", "closed_at": "2018-03-24T21:27:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way i can set the fd using waitress-serve?\r\n\r\nI want to use it in combination with circus.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/184", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/184/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/184/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/184/events", "html_url": "https://github.com/Pylons/waitress/issues/184", "id": 298421415, "node_id": "MDU6SXNzdWUyOTg0MjE0MTU=", "number": 184, "title": "Waitress won't bind to adress by hostname on python docker image", "user": {"login": "dmollerm", "id": 6445927, "node_id": "MDQ6VXNlcjY0NDU5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/6445927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmollerm", "html_url": "https://github.com/dmollerm", "followers_url": "https://api.github.com/users/dmollerm/followers", "following_url": "https://api.github.com/users/dmollerm/following{/other_user}", "gists_url": "https://api.github.com/users/dmollerm/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmollerm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmollerm/subscriptions", "organizations_url": "https://api.github.com/users/dmollerm/orgs", "repos_url": "https://api.github.com/users/dmollerm/repos", "events_url": "https://api.github.com/users/dmollerm/events{/privacy}", "received_events_url": "https://api.github.com/users/dmollerm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-19T22:50:33Z", "updated_at": "2018-02-20T02:10:27Z", "closed_at": "2018-02-20T02:10:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "On python docker image trying to serve in 'localhost' will fail\r\n```\r\n>>> from waitress import serve\r\n>>> serve((lambda e, r: r('200 OK', []) and [b'hiho\\n']), host='localhost', port=9999)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.6/site-packages/waitress/__init__.py\", line 11, in serve\r\n    server = _server(app, **kw)\r\n  File \"/usr/local/lib/python3.6/site-packages/waitress/server.py\", line 85, in create_server\r\n    sockinfo=sockinfo)\r\n  File \"/usr/local/lib/python3.6/site-packages/waitress/server.py\", line 182, in __init__\r\n    self.bind_server_socket()\r\n  File \"/usr/local/lib/python3.6/site-packages/waitress/server.py\", line 294, in bind_server_socket\r\n    self.bind(sockaddr)\r\n  File \"/usr/local/lib/python3.6/asyncore.py\", line 329, in bind\r\n    return self.socket.bind(addr)\r\nOSError: [Errno 99] Cannot assign requested address\r\n```\r\nYet, the very same code replacing `host='localhost'` by `host='127.0.0.1'` will work just fine.\r\nRunning the code on the linux host will also succeed (Python 3.5.2 outside here).\r\nI'm still trying to figure out the root of the problem, but since https://docs.python.org/3/library/asyncore.html#asyncore-example-basic-echo-server works just fine I'm filing the issue here first.\r\n\r\nFor the record:\r\nwaitress==1.1.0\r\nPython 3.6.4 (reproduced with python:3.5.5 docker image as well)\r\nDocker version 17.12.0-ce, build c97c6d6\r\nLinux excalibur 4.13.0-32-generic #35~16.04.1-Ubuntu SMP Thu Jan 25 10:13:43 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/181", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/181/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/181/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/181/events", "html_url": "https://github.com/Pylons/waitress/issues/181", "id": 283713840, "node_id": "MDU6SXNzdWUyODM3MTM4NDA=", "number": 181, "title": "connection limit error", "user": {"login": "prashanthmadi", "id": 1486808, "node_id": "MDQ6VXNlcjE0ODY4MDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1486808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashanthmadi", "html_url": "https://github.com/prashanthmadi", "followers_url": "https://api.github.com/users/prashanthmadi/followers", "following_url": "https://api.github.com/users/prashanthmadi/following{/other_user}", "gists_url": "https://api.github.com/users/prashanthmadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashanthmadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashanthmadi/subscriptions", "organizations_url": "https://api.github.com/users/prashanthmadi/orgs", "repos_url": "https://api.github.com/users/prashanthmadi/repos", "events_url": "https://api.github.com/users/prashanthmadi/events{/privacy}", "received_events_url": "https://api.github.com/users/prashanthmadi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-12-20T22:24:04Z", "updated_at": "2019-04-23T04:19:49Z", "closed_at": "2019-04-23T04:19:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way to get number of existing connections waitress is serving. I see that there is a default limit of 100.\r\n\r\nMy app starts responding 500 errors and proxy server reports that target server did not respond to the request.. In this scenario target server is a http listener generated by python app(waitress/FLASK).\r\n\r\nCan we enable extra logging at waitress level to get notified when we hit this 100 connection limit ?\r\n\r\n## connection_limit\r\nStop creating new channels if too many are already active (integer). **Default is 100**. Each channel consumes at least one file descriptor, and, depending on the input and output body sizes, potentially up to three, plus whatever file descriptors your application logic happens to open. The default is conservative, but you may need to increase the number of file descriptors available to the Waitress process on most platforms in order to safely change it (see ulimit -a \u201copen files\u201d setting). Note that this doesn\u2019t control the maximum number of TCP connections that can be waiting for processing; the backlog argument controls that.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/180", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/180/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/180/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/180/events", "html_url": "https://github.com/Pylons/waitress/issues/180", "id": 280837575, "node_id": "MDU6SXNzdWUyODA4Mzc1NzU=", "number": 180, "title": "asyncore is deprecated in 3.6", "user": {"login": "robertlagrant", "id": 1766161, "node_id": "MDQ6VXNlcjE3NjYxNjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1766161?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertlagrant", "html_url": "https://github.com/robertlagrant", "followers_url": "https://api.github.com/users/robertlagrant/followers", "following_url": "https://api.github.com/users/robertlagrant/following{/other_user}", "gists_url": "https://api.github.com/users/robertlagrant/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertlagrant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertlagrant/subscriptions", "organizations_url": "https://api.github.com/users/robertlagrant/orgs", "repos_url": "https://api.github.com/users/robertlagrant/repos", "events_url": "https://api.github.com/users/robertlagrant/events{/privacy}", "received_events_url": "https://api.github.com/users/robertlagrant/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-12-10T19:35:43Z", "updated_at": "2018-09-01T01:47:04Z", "closed_at": "2018-09-01T01:47:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "[asyncore is now deprecated](https://docs.python.org/3.6/library/asyncore.html), and [will be removed once core modules are rewritten](https://bugs.python.org/issue25002). This is difficult, because it will probably mean dropping support either for Python 2 or for a future version of Python and all subsequent versions, so is it worth looking at what could be used to replace it? \r\n\r\nTwo possible options, both imperfect:\r\n - [asyncio](https://docs.python.org/3.6/library/asyncio.html#module-asyncio) - cross-platform. However, only 3.4 onwards, and newer features (e.g. `async`/`await`) only available in even newer versions\r\n - [curio](https://github.com/dabeaz/curio) - having looked at Curio, I doubt it fits with Waitress' philosophy of backwards compatibility and being cross-platform", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/179", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/179/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/179/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/179/events", "html_url": "https://github.com/Pylons/waitress/issues/179", "id": 277478063, "node_id": "MDU6SXNzdWUyNzc0NzgwNjM=", "number": 179, "title": "Support wsgi.input_terminated flag", "user": {"login": "davidism", "id": 1242887, "node_id": "MDQ6VXNlcjEyNDI4ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1242887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidism", "html_url": "https://github.com/davidism", "followers_url": "https://api.github.com/users/davidism/followers", "following_url": "https://api.github.com/users/davidism/following{/other_user}", "gists_url": "https://api.github.com/users/davidism/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidism/subscriptions", "organizations_url": "https://api.github.com/users/davidism/orgs", "repos_url": "https://api.github.com/users/davidism/repos", "events_url": "https://api.github.com/users/davidism/events{/privacy}", "received_events_url": "https://api.github.com/users/davidism/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-11-28T17:50:18Z", "updated_at": "2018-09-04T18:03:33Z", "closed_at": "2018-09-04T18:03:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I know WebOb just added a check for this recently, but it looks like Waitress doesn't set it yet. Unfortunately the WSGI spec has no support for it. A standard was proposed by @mitsuhiko here: https://gist.github.com/mitsuhiko/5721547. If the WSGI server supports streams without a content length, it should set `environ['wsgi.input_terminated'] = True`. If a WSGI client sees this flag, it can ignore the content length and read the stream as-is. Other servers and clients are starting to support this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/177", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/177/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/177/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/177/events", "html_url": "https://github.com/Pylons/waitress/issues/177", "id": 271260589, "node_id": "MDU6SXNzdWUyNzEyNjA1ODk=", "number": 177, "title": "CPU Usage Stuck at 100%", "user": {"login": "hafizbadrie", "id": 494642, "node_id": "MDQ6VXNlcjQ5NDY0Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/494642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hafizbadrie", "html_url": "https://github.com/hafizbadrie", "followers_url": "https://api.github.com/users/hafizbadrie/followers", "following_url": "https://api.github.com/users/hafizbadrie/following{/other_user}", "gists_url": "https://api.github.com/users/hafizbadrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/hafizbadrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hafizbadrie/subscriptions", "organizations_url": "https://api.github.com/users/hafizbadrie/orgs", "repos_url": "https://api.github.com/users/hafizbadrie/repos", "events_url": "https://api.github.com/users/hafizbadrie/events{/privacy}", "received_events_url": "https://api.github.com/users/hafizbadrie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-11-05T09:21:52Z", "updated_at": "2018-12-03T06:40:07Z", "closed_at": "2018-12-03T06:40:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got pretty weird behaviour from waitress whenever it receives pretty high traffic. This issue is still happening until now and it happened intermittently. For example, I take the case when it happened at November 3rd, 2017 at around 4PM UTC.\r\n\r\nAt that time I had 11 instances under a load balancer and that was an 8-cores instances. In each instance, I had 8 waitress (version 1.1.0) application running. At that time the traffic I received was around 15K reqs/sec. \r\n\r\nBelow is the CPU usage of the instance that has the issue\r\n![screen shot 2017-11-05 at 13 51 25](https://user-images.githubusercontent.com/494642/32412634-7a61e0da-c230-11e7-8d17-3066140efc51.png)\r\n\r\nAfter the spike, one of the cores stuck at 100%, but the others were fine.\r\n\r\nUsing [pyflame](https://github.com/uber/pyflame) I tried to profile the CPU usage and I got this [flamegraph](https://www.dropbox.com/s/xtq59hgavq9byp7/process_2016.svg?dl=0). It seems something is wrong either in the `channel.py` or in `asyncore.py` itself.\r\n\r\nI've tried to reproduce the case but I only succeeded once from multiple times. So, perhaps, someone here know what the problem is actually.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/176", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/176/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/176/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/176/events", "html_url": "https://github.com/Pylons/waitress/issues/176", "id": 268206038, "node_id": "MDU6SXNzdWUyNjgyMDYwMzg=", "number": 176, "title": "Waitress causing 504s to NGINX due to bad performance config?", "user": {"login": "alikhan-io", "id": 1922695, "node_id": "MDQ6VXNlcjE5MjI2OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1922695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alikhan-io", "html_url": "https://github.com/alikhan-io", "followers_url": "https://api.github.com/users/alikhan-io/followers", "following_url": "https://api.github.com/users/alikhan-io/following{/other_user}", "gists_url": "https://api.github.com/users/alikhan-io/gists{/gist_id}", "starred_url": "https://api.github.com/users/alikhan-io/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alikhan-io/subscriptions", "organizations_url": "https://api.github.com/users/alikhan-io/orgs", "repos_url": "https://api.github.com/users/alikhan-io/repos", "events_url": "https://api.github.com/users/alikhan-io/events{/privacy}", "received_events_url": "https://api.github.com/users/alikhan-io/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-24T22:19:42Z", "updated_at": "2017-10-25T17:48:26Z", "closed_at": "2017-10-25T17:48:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey there,\r\n\r\nWe have an application that is getting 20-30 requests a second. Waitress seems to be buckling under the load despite us tweaking performance vars. It doesn't crash nor give any errors. Instead, it seems to send a (we assume) an ERRCONRESET to Nginx which is sending requests to it. We hypothesize this because Nginx returns 504s to us when it is under load. The python application itself continues to run fine.\r\n\r\nWe attempted to increase threads up (50 threads) and connection limits (1000) as well. We also lowered the channel_timeout and cleanup_interval (10 sec and 15sec respectively). This still showed no improvement on performance under load. Lastly we even attempted to increase the backlog to 2048. None of this has produced any significant impact.\r\n\r\nOn some level I even wonder if the new limits proscribed are being respected as running netcat shows long running connections that are not being terminated for well over 60 seconds. We're under the impression Waitress should be able to handle this load, yet it is not. To note we have scaled this up to 6 concurrent instances behind an LB to take requests and are still getting these errors.\r\n\r\nAny feedback or performance tips would be appreciated. We are running these on pretty beefy AWS instances layered upon kubernetes. They are taking negligible CPU and RAM sources. When it does work its millisecond return times, so I cannot see any bottle necks in the code that may be contributing, onyl the fact that some how the connections and backlog are being overwhelmed. \r\n\r\nSee below for our config of waitress to start the app. \r\n\r\n```\r\n    waitress.serve(app.app,\r\n                   host=os.getenv('HOST', '0.0.0.0'),\r\n                   port=int(os.getenv('PORT', '3000')),\r\n                   expose_tracebacks=True, \r\n                   connection_limit=os.getenv('CONNECTION_LIMIT', '1000'),\r\n                   threads=os.getenv('THREADS', '50'),\r\n                   channel_timeout=os.getenv('CHANNEL_TIMEOUT', '10'),\r\n                   cleanup_interval=os.getenv('CLEANUP_INTERVAL', '30'),\r\n                   backlog=os.getenv('BACKLOG', '2048'))\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/174", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/174/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/174/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/174/events", "html_url": "https://github.com/Pylons/waitress/issues/174", "id": 265136522, "node_id": "MDU6SXNzdWUyNjUxMzY1MjI=", "number": 174, "title": "Better exceptions improvements", "user": {"login": "alexfalcucci", "id": 6964211, "node_id": "MDQ6VXNlcjY5NjQyMTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/6964211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexfalcucci", "html_url": "https://github.com/alexfalcucci", "followers_url": "https://api.github.com/users/alexfalcucci/followers", "following_url": "https://api.github.com/users/alexfalcucci/following{/other_user}", "gists_url": "https://api.github.com/users/alexfalcucci/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexfalcucci/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexfalcucci/subscriptions", "organizations_url": "https://api.github.com/users/alexfalcucci/orgs", "repos_url": "https://api.github.com/users/alexfalcucci/repos", "events_url": "https://api.github.com/users/alexfalcucci/events{/privacy}", "received_events_url": "https://api.github.com/users/alexfalcucci/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-13T00:56:06Z", "updated_at": "2017-10-13T06:18:53Z", "closed_at": "2017-10-13T06:17:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Any possiblity to add https://github.com/Qix-/better-exceptions into this? would be good?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/173", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/173/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/173/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/173/events", "html_url": "https://github.com/Pylons/waitress/issues/173", "id": 263695574, "node_id": "MDU6SXNzdWUyNjM2OTU1NzQ=", "number": 173, "title": "nginx config for unix socket?", "user": {"login": "racitup", "id": 18157195, "node_id": "MDQ6VXNlcjE4MTU3MTk1", "avatar_url": "https://avatars2.githubusercontent.com/u/18157195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/racitup", "html_url": "https://github.com/racitup", "followers_url": "https://api.github.com/users/racitup/followers", "following_url": "https://api.github.com/users/racitup/following{/other_user}", "gists_url": "https://api.github.com/users/racitup/gists{/gist_id}", "starred_url": "https://api.github.com/users/racitup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/racitup/subscriptions", "organizations_url": "https://api.github.com/users/racitup/orgs", "repos_url": "https://api.github.com/users/racitup/repos", "events_url": "https://api.github.com/users/racitup/events{/privacy}", "received_events_url": "https://api.github.com/users/racitup/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-08T05:58:22Z", "updated_at": "2017-10-09T09:01:28Z", "closed_at": "2017-10-09T09:01:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Sorry I'm new to this, but when using a unix socket instead of ip connection with nginx, do I use `proxy_pass` still, or one of the other options: `fastcgi_pass, uwsgi_pass, scgi_pass, memcached_pass`?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/172", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/172/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/172/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/172/events", "html_url": "https://github.com/Pylons/waitress/issues/172", "id": 263049558, "node_id": "MDU6SXNzdWUyNjMwNDk1NTg=", "number": 172, "title": "Release on PyPI version of waitress that fixes error: 'ascii' codec can't decode byte", "user": {"login": "Flimm", "id": 355454, "node_id": "MDQ6VXNlcjM1NTQ1NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/355454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Flimm", "html_url": "https://github.com/Flimm", "followers_url": "https://api.github.com/users/Flimm/followers", "following_url": "https://api.github.com/users/Flimm/following{/other_user}", "gists_url": "https://api.github.com/users/Flimm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Flimm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Flimm/subscriptions", "organizations_url": "https://api.github.com/users/Flimm/orgs", "repos_url": "https://api.github.com/users/Flimm/repos", "events_url": "https://api.github.com/users/Flimm/events{/privacy}", "received_events_url": "https://api.github.com/users/Flimm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-05T08:55:58Z", "updated_at": "2017-10-11T09:10:13Z", "closed_at": "2017-10-11T01:02:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I keep getting this error:\r\n\r\n```\r\nuncaptured python exception, closing channel <waitress.channel.HTTPChannel connected 10.109.135.32:56995 at 0x7f1d7cfa0da0> (<class 'UnicodeDecodeError'>:'ascii' codec can't decode byte 0xd8 in position 124: ordinal not in range(128)\r\n```\r\n\r\nThis is the same as issue #64, which was closed, because code fixing the issue was committed to master. However, waitress, has not seen a release on PyPI since February. Could a version of waitress be released that includes the fix?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/169", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/169/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/169/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/169/events", "html_url": "https://github.com/Pylons/waitress/issues/169", "id": 241458070, "node_id": "MDU6SXNzdWUyNDE0NTgwNzA=", "number": 169, "title": "Logging Help", "user": {"login": "Sanjay-B", "id": 22083307, "node_id": "MDQ6VXNlcjIyMDgzMzA3", "avatar_url": "https://avatars0.githubusercontent.com/u/22083307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sanjay-B", "html_url": "https://github.com/Sanjay-B", "followers_url": "https://api.github.com/users/Sanjay-B/followers", "following_url": "https://api.github.com/users/Sanjay-B/following{/other_user}", "gists_url": "https://api.github.com/users/Sanjay-B/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sanjay-B/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sanjay-B/subscriptions", "organizations_url": "https://api.github.com/users/Sanjay-B/orgs", "repos_url": "https://api.github.com/users/Sanjay-B/repos", "events_url": "https://api.github.com/users/Sanjay-B/events{/privacy}", "received_events_url": "https://api.github.com/users/Sanjay-B/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-07-08T15:04:21Z", "updated_at": "2020-02-10T03:28:20Z", "closed_at": "2017-07-08T16:30:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "How would I get all messages(info, warning and error) into console?\r\nI'm having a hard time understanding how this works and how I can implement\r\nit. \r\n\r\nI tried this:\r\n```py\r\nif __name__ == \"__main__\":\r\n    import logging\r\n    logger = logging.getLogger('waitress')\r\n    logger.setLevel(logging.INFO)\r\n    serve(websocket, host='0.0.0.0', port=8181)\r\n```\r\n\r\nFor some reason, unless I get an error, nothing is displayed. \r\nI have experience with python but I don't quite understand the ``logging``\r\nmodule. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/168", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/168/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/168/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/168/events", "html_url": "https://github.com/Pylons/waitress/issues/168", "id": 239887495, "node_id": "MDU6SXNzdWUyMzk4ODc0OTU=", "number": 168, "title": "Waitress listening on [::]:8080 will put :: into SERVER_NAME environ", "user": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-06-30T20:59:23Z", "updated_at": "2018-09-06T17:27:44Z", "closed_at": "2018-09-06T17:27:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This should be wrapped in brackets, so that the environ contains `SERVER_NAME: '[::]'` instead.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/167", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/167/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/167/events", "html_url": "https://github.com/Pylons/waitress/issues/167", "id": 237542958, "node_id": "MDU6SXNzdWUyMzc1NDI5NTg=", "number": 167, "title": "Console outputs Windows machine name instead of localhost", "user": {"login": "klvbdmh", "id": 10261718, "node_id": "MDQ6VXNlcjEwMjYxNzE4", "avatar_url": "https://avatars0.githubusercontent.com/u/10261718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klvbdmh", "html_url": "https://github.com/klvbdmh", "followers_url": "https://api.github.com/users/klvbdmh/followers", "following_url": "https://api.github.com/users/klvbdmh/following{/other_user}", "gists_url": "https://api.github.com/users/klvbdmh/gists{/gist_id}", "starred_url": "https://api.github.com/users/klvbdmh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klvbdmh/subscriptions", "organizations_url": "https://api.github.com/users/klvbdmh/orgs", "repos_url": "https://api.github.com/users/klvbdmh/repos", "events_url": "https://api.github.com/users/klvbdmh/events{/privacy}", "received_events_url": "https://api.github.com/users/klvbdmh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-21T13:55:17Z", "updated_at": "2017-06-21T20:13:47Z", "closed_at": "2017-06-21T20:13:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm following the [Pyramid tutorial](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/project.html#running-the-project-application) and after typing `pserve development.ini` in my terminal I get this output:\r\n\r\n```\r\nStarting monitor for PID 2604.\r\nStarting server in PID 2604.\r\nServing on http://WORKSTATION:6543\r\nServing on http://WORKSTATION:6543\r\n```\r\n\r\n`WORKSTATION` is my PC name. Entering the above url in my browser results in the `This site can\u2019t be reached` error. Manually typing `localhost:6543` in my browser works fine.\r\n\r\nI expected the console output would point to a correct url: `Serving on http://localhost:6543`\r\n\r\nObserved on Windows 10 with python 3.6.1, waitress 1.0.2, pyramid 1.8.3", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/165", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/165/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/165/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/165/events", "html_url": "https://github.com/Pylons/waitress/issues/165", "id": 233843762, "node_id": "MDU6SXNzdWUyMzM4NDM3NjI=", "number": 165, "title": "HTTP 204 No Content with Transfer-Encoding header violates RFC 7230", "user": {"login": "alexanderlukanin13", "id": 4417580, "node_id": "MDQ6VXNlcjQ0MTc1ODA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4417580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexanderlukanin13", "html_url": "https://github.com/alexanderlukanin13", "followers_url": "https://api.github.com/users/alexanderlukanin13/followers", "following_url": "https://api.github.com/users/alexanderlukanin13/following{/other_user}", "gists_url": "https://api.github.com/users/alexanderlukanin13/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexanderlukanin13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexanderlukanin13/subscriptions", "organizations_url": "https://api.github.com/users/alexanderlukanin13/orgs", "repos_url": "https://api.github.com/users/alexanderlukanin13/repos", "events_url": "https://api.github.com/users/alexanderlukanin13/events{/privacy}", "received_events_url": "https://api.github.com/users/alexanderlukanin13/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-06-06T10:15:36Z", "updated_at": "2018-09-01T01:49:18Z", "closed_at": "2018-09-01T01:49:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, waitress 204 response looks like this:\r\n\r\n    HTTP/1.1 204 No Content\r\n    Allow: GET, DELETE, HEAD, OPTIONS\r\n    Connection: close\r\n    Date: Tue, 06 Jun 2017 07:43:55 GMT\r\n    Server: waitress\r\n    Transfer-Encoding: chunked\r\n    Vary: Accept\r\n    X-Frame-Options: SAMEORIGIN\r\n\r\n`Transfer-Encoding` violates RFC 7230:\r\n\r\n<https://tools.ietf.org/html/rfc7230#section-3.3.1>\r\n\r\n> A server MUST NOT send a Transfer-Encoding header field in any response with a status code of 1xx (Informational) or 204 (No Content).\r\n\r\n<https://tools.ietf.org/html/rfc7230#section-3.3.2>\r\n\r\n> A server MUST NOT send a Content-Length header field in any response with a status code of 1xx (Informational) or 204 (No Content).\r\n\r\nIn practice, such behavior breaks some clients, such as `requests` (if server is behind Google Cloud Load Balancer).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/163", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/163/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/163/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/163/events", "html_url": "https://github.com/Pylons/waitress/issues/163", "id": 233259348, "node_id": "MDU6SXNzdWUyMzMyNTkzNDg=", "number": 163, "title": "Add contributing.md file", "user": {"login": "stevepiercy", "id": 102112, "node_id": "MDQ6VXNlcjEwMjExMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/102112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevepiercy", "html_url": "https://github.com/stevepiercy", "followers_url": "https://api.github.com/users/stevepiercy/followers", "following_url": "https://api.github.com/users/stevepiercy/following{/other_user}", "gists_url": "https://api.github.com/users/stevepiercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevepiercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevepiercy/subscriptions", "organizations_url": "https://api.github.com/users/stevepiercy/orgs", "repos_url": "https://api.github.com/users/stevepiercy/repos", "events_url": "https://api.github.com/users/stevepiercy/events{/privacy}", "received_events_url": "https://api.github.com/users/stevepiercy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-06-02T18:11:54Z", "updated_at": "2017-08-16T04:19:39Z", "closed_at": "2017-08-16T04:19:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For WebOb we stole contributing.md from Pyramid. Either file should serve this purpose here.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/159", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/159/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/159/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/159/events", "html_url": "https://github.com/Pylons/waitress/issues/159", "id": 231984240, "node_id": "MDU6SXNzdWUyMzE5ODQyNDA=", "number": 159, "title": "Occasional crashes with autoreload and Chameleon compilation", "user": {"login": "silenius", "id": 1225348, "node_id": "MDQ6VXNlcjEyMjUzNDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1225348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/silenius", "html_url": "https://github.com/silenius", "followers_url": "https://api.github.com/users/silenius/followers", "following_url": "https://api.github.com/users/silenius/following{/other_user}", "gists_url": "https://api.github.com/users/silenius/gists{/gist_id}", "starred_url": "https://api.github.com/users/silenius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/silenius/subscriptions", "organizations_url": "https://api.github.com/users/silenius/orgs", "repos_url": "https://api.github.com/users/silenius/repos", "events_url": "https://api.github.com/users/silenius/events{/privacy}", "received_events_url": "https://api.github.com/users/silenius/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-29T10:23:08Z", "updated_at": "2017-05-30T16:26:51Z", "closed_at": "2017-05-30T15:45:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "All is in the title :) \r\n\r\nThis is on:\r\n```\r\nFreeBSD dev.lan 10.3-RELEASE FreeBSD 10.3-RELEASE #0 r297264: Fri Mar 25 02:10:02 UTC 2016     root@releng1.nyi.freebsd.org:/usr/obj/usr/src/sys/GENERIC  amd64\r\n```\r\nwith:\r\n```\r\nPython 3.5.3 (default, Feb 24 2017, 12:34:03) \r\n[GCC 4.2.1 Compatible FreeBSD Clang 3.4.1 (tags/RELEASE_34/dot1-final 208032)] on freebsd10\r\n```\r\nand (dev mode with all debug turned on):\r\n```\r\n~/code/projects/amnesia/ pip freeze -l\r\naiohttp==2.0.7\r\nappdirs==1.4.3\r\nastroid==1.5.2\r\nasync-timeout==1.2.1\r\nbcrypt==3.1.1\r\nBeaker==1.8.1\r\ncffi==1.9.1\r\nChameleon==3.1\r\nchardet==3.0.2\r\nenum-compat==0.0.2\r\neventlet==0.21.0\r\nfile-magic==0.3.0\r\nflake8==3.3.0\r\ngevent==1.2.1\r\ngreenlet==0.4.12\r\ngunicorn==19.7.1\r\nhupper==1.0\r\niso8601==0.1.11\r\nisort==4.2.5\r\nlazy-object-proxy==1.3.1\r\nMako==1.0.6\r\nMarkupSafe==1.0\r\nmarshmallow==3.0.0b2\r\nmccabe==0.6.1\r\nmultidict==2.1.4\r\npackaging==16.8\r\nPasteDeploy==1.5.2\r\npeppercorn==0.5\r\npsycopg2==2.7.1\r\npy==1.4.32\r\npycodestyle==2.3.1\r\npycparser==2.17\r\npyflakes==1.5.0\r\nPygments==2.2.0\r\npylint==1.7.1\r\npyparsing==2.2.0\r\npyramid==1.8.3\r\npyramid-beaker==0.8\r\npyramid-chameleon==0.3\r\npyramid-debugtoolbar==4.0.1\r\npyramid-mailer==0.15.1\r\npyramid-mako==1.0.2\r\npyramid-tm==2.0\r\npytest==3.0.5\r\npytz==2016.7\r\nrepoze.lru==0.6\r\nrepoze.sendmail==4.4.1\r\nrutter==0.2\r\nsaexts==0.1\r\nsix==1.10.0\r\nSQLAlchemy==1.1.10\r\ntransaction==2.1.2\r\ntranslationstring==1.3\r\nuWSGI==2.0.15\r\nvenusian==1.1.0\r\nwaitress==1.0.2\r\nWebOb==1.7.2\r\nwrapt==1.10.10\r\nyarl==0.10.1\r\nzope.deprecation==4.2.0\r\nzope.interface==4.4.1\r\nzope.sqlalchemy==0.7.7\r\n```\r\nHere is the trace:\r\n\r\n```\r\n(...)\r\n2017-05-29 11:35:13,728 DEBUG [chameleon.loader][waitress] cache miss: layout_52ae201e49011d3a803252f23a1045c0.py\r\n2017-05-29 11:35:13,729 DEBUG [chameleon.loader][waitress] writing source to disk (212096 bytes).\r\n2017-05-29 11:35:13,729 DEBUG [chameleon.loader][waitress] compiling layout_52ae201e49011d3a803252f23a1045c0.py into byte-code...\r\nFatal Python error: GC object already tracked\r\n\r\nThread 0x000000080b566800 (most recent call first):\r\n  File \"/usr/home/jcigar/code/projects/amnesia/amnesia/utils/text.py\", line 16 in fmt_datetime\r\n  File \"/tmp/tmpfpnrjc_u/recent_posts_9444d937c1a9ef90dc12dac59aec709d.py\", line 378 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/template.py\", line 171 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/zpt/template.py\", line 289 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/template.py\", line 124 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid_chameleon/zpt.py\", line 47 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/renderers.py\", line 451 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/renderers.py\", line 81 in render\r\n  File \"/usr/home/jcigar/code/projects/amnesia/amnesia/widgets.py\", line 29 in __str__\r\n  File \"/tmp/tmp4wn8eyjk/show_a44270790ab6c0c9dcfab44df5ed9096.py\", line 761 in __fill_content\r\n  File \"/tmp/tmpuh59og0x/layout_52ae201e49011d3a803252f23a1045c0.py\", line 1917 in render_page\r\n  File \"/tmp/tmpuh59og0x/layout_52ae201e49011d3a803252f23a1045c0.py\", line 4061 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/zpt/template.py\", line 293 in include\r\n  File \"/tmp/tmp4wn8eyjk/show_a44270790ab6c0c9dcfab44df5ed9096.py\", line 908 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/template.py\", line 171 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/zpt/template.py\", line 289 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/template.py\", line 124 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid_chameleon/zpt.py\", line 47 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/renderers.py\", line 451 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/renderers.py\", line 455 in render_to_response\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/renderers.py\", line 144 in render_to_response\r\n  File \"/usr/home/jcigar/code/projects/amnesia/amnesia/modules/content/views/crud.py\", line 77 in read\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 137 in _class_view\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 409 in viewresult_to_response\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 300 in secured_view\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 351 in authdebug_view\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 367 in predicate_wrapper\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 389 in attr_view\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/config/views.py\", line 181 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/view.py\", line 612 in _call_view\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/router.py\", line 155 in handle_request\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/tweens.py\", line 22 in excview_tween\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid_tm/__init__.py\", line 93 in tm_tween\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid_debugtoolbar/panels/performance.py\", line 57 in resource_timer_handler\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid_debugtoolbar/toolbar.py\", line 243 in toolbar_tween\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/router.py\", line 208 in invoke_subrequest\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/router.py\", line 233 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/rutter/urlmap.py\", line 194 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/task.py\", line 399 in execute\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/task.py\", line 169 in service\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/channel.py\", line 338 in service\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/task.py\", line 78 in handler_thread\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x000000080b566400 (most recent call first):\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/local/lib/python3.5/queue.py\", line 164 in get\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/task.py\", line 73 in handler_thread\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 882 in _bootstrap\r\nCurrent thread 0x000000080b4b7c00 (most recent call first):\r\n  File \"<frozen importlib._bootstrap>\", line 222 in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap_external>\", line 735 in source_to_code\r\n  File \"/usr/local/lib/python3.5/py_compile.py\", line 125 in compile\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/loader.py\", line 154 in build\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/template.py\", line 225 in _cook\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/template.py\", line 146 in cook\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid_chameleon/zpt.py\", line 14 in cook\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/template.py\", line 299 in cook_check\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/zpt/template.py\", line 292 in include\r\n  File \"/tmp/tmp4wn8eyjk/show_a44270790ab6c0c9dcfab44df5ed9096.py\", line 908 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/template.py\", line 171 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/zpt/template.py\", line 289 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/chameleon/template.py\", line 124 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid_chameleon/zpt.py\", line 47 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/renderers.py\", line 451 in render\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/renderers.py\", line 455 in render_to_response\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/renderers.py\", line 144 in render_to_response\r\n  File \"/usr/home/jcigar/code/projects/amnesia/amnesia/modules/content/views/crud.py\", line 77 in read\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 137 in _class_view\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 409 in viewresult_to_response\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 300 in secured_view\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 351 in authdebug_view\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 367 in predicate_wrapper\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/viewderivers.py\", line 389 in attr_view\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/config/views.py\", line 181 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/view.py\", line 612 in _call_view\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/router.py\", line 155 in handle_request\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/tweens.py\", line 22 in excview_tween\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid_tm/__init__.py\", line 93 in tm_tween\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid_debugtoolbar/panels/performance.py\", line 57 in resource_timer_handler\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid_debugtoolbar/toolbar.py\", line 243 in toolbar_tween\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/router.py\", line 208 in invoke_subrequest\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/router.py\", line 233 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/rutter/urlmap.py\", line 194 in __call__\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/task.py\", line 399 in execute\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/task.py\", line 169 in service\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/channel.py\", line 338 in service\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/task.py\", line 78 in handler_thread\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x000000080b4b7800 (most recent call first):\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/local/lib/python3.5/queue.py\", line 164 in get\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/task.py\", line 73 in handler_thread\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00000008021dfc00 (most recent call first):\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/hupper/worker.py\", line 29 in run\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00000008021df800 (most recent call first):\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/local/lib/python3.5/queue.py\", line 164 in get\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/hupper/ipc.py\", line 190 in recv\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/hupper/worker.py\", line 99 in run\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00000008021df400 (most recent call first):\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/hupper/ipc.py\", line 150 in _recv_packet\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/hupper/ipc.py\", line 169 in _read_loop\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/local/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x0000000802006400 (most recent call first):\r\n  File \"/usr/local/lib/python3.5/asyncore.py\", line 144 in poll\r\n  File \"/usr/local/lib/python3.5/asyncore.py\", line 203 in loop\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/server.py\", line 261 in run\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/__init__.py\", line 17 in serve\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/waitress/__init__.py\", line 20 in serve_paste\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/paste/deploy/util.py\", line 55 in fix_call\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/paste/deploy/loadwsgi.py\", line 189 in server_wrapper\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/scripts/pserve.py\", line 235 in run\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/pyramid/scripts/pserve.py\", line 40 in main\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/hupper/worker.py\", line 237 in worker_main\r\n  File \"/usr/home/jcigar/code/venvs/amnesia/lib/python3.5/site-packages/hupper/ipc.py\", line 322 in spawn_main\r\n  File \"<string>\", line 1 in <module>\r\nServer with PID 36055 exited with code -6.\r\nWaiting for changes before reloading.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/157", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/157/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/157/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/157/events", "html_url": "https://github.com/Pylons/waitress/issues/157", "id": 219198819, "node_id": "MDU6SXNzdWUyMTkxOTg4MTk=", "number": 157, "title": "keep-alive does not work with pyramid \"hello world\"", "user": {"login": "jinty", "id": 553369, "node_id": "MDQ6VXNlcjU1MzM2OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/553369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jinty", "html_url": "https://github.com/jinty", "followers_url": "https://api.github.com/users/jinty/followers", "following_url": "https://api.github.com/users/jinty/following{/other_user}", "gists_url": "https://api.github.com/users/jinty/gists{/gist_id}", "starred_url": "https://api.github.com/users/jinty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jinty/subscriptions", "organizations_url": "https://api.github.com/users/jinty/orgs", "repos_url": "https://api.github.com/users/jinty/repos", "events_url": "https://api.github.com/users/jinty/events{/privacy}", "received_events_url": "https://api.github.com/users/jinty/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-04T09:59:48Z", "updated_at": "2017-04-04T10:17:59Z", "closed_at": "2017-04-04T10:17:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm still investigating this, posting this issue in case someone knows what's happening off the top of their head.\r\n\r\nI'm testing HTTP keep-alive behaviour with this curl snippet:\r\n```\r\ncurl -Iv http://127.0.0.1:8080/  --next http://127.0.0.1:8080/\r\n```\r\nI expect to see this if keep-alive works:\r\n```\r\n* Re-using existing connection! (#0) with host 127.0.0.1\r\n```\r\n\r\nAnd I do see that when testing with the WSGI demo app, using this script to run the server:\r\n```\r\nfrom wsgiref.simple_server import demo_app\r\nfrom waitress import serve\r\n\r\nserve(demo_app)\r\n```\r\n\r\nHowever, when I switch to the pyramid hello world app, keep-alive stops working:\r\n```\r\nfrom pyramid.config import Configurator\r\nfrom pyramid.response import Response\r\nfrom waitress import serve\r\n\r\n\r\ndef hello_world(request):\r\n    return Response('Hello!')\r\n\r\nconfig = Configurator()\r\nconfig.add_route('hello', '/')\r\nconfig.add_view(hello_world, route_name='hello')\r\napp = config.make_wsgi_app()\r\n\r\nserve(app)\r\n```\r\n\r\nFrom the waitress documentation, I can't see any reason why that should happen. Is this somehow expected?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/156", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/156/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/156/events", "html_url": "https://github.com/Pylons/waitress/issues/156", "id": 211341989, "node_id": "MDU6SXNzdWUyMTEzNDE5ODk=", "number": 156, "title": "Waitress server as a service in Windows", "user": {"login": "tschm", "id": 2046079, "node_id": "MDQ6VXNlcjIwNDYwNzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/2046079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschm", "html_url": "https://github.com/tschm", "followers_url": "https://api.github.com/users/tschm/followers", "following_url": "https://api.github.com/users/tschm/following{/other_user}", "gists_url": "https://api.github.com/users/tschm/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschm/subscriptions", "organizations_url": "https://api.github.com/users/tschm/orgs", "repos_url": "https://api.github.com/users/tschm/repos", "events_url": "https://api.github.com/users/tschm/events{/privacy}", "received_events_url": "https://api.github.com/users/tschm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-02T09:58:05Z", "updated_at": "2017-03-02T23:49:26Z", "closed_at": "2017-03-02T23:49:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI am trying to setup my server (running on Windows *sigh*) as a service. I have packed everything into a *.bat file which works from the command line:\r\n\r\nThe server goes up and runs. One odd observation: I can start multiple servers via Pycharm all going to the same port. Maybe something is messed up on my side here.\r\n\r\nWhen I do `sc create pyWait binPath= C:\\thomas\\start.bat` and then try to start the process I get\r\n\r\nServer did not respond in a timely fashion...\r\n\r\n\r\nCan you please talk me through setting up a Waitress server on Windows as a service?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/154", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/154/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/154/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/154/events", "html_url": "https://github.com/Pylons/waitress/issues/154", "id": 206342316, "node_id": "MDU6SXNzdWUyMDYzNDIzMTY=", "number": 154, "title": "Loudly complain if HTTP verb is not all uppercase", "user": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-02-08T22:17:12Z", "updated_at": "2017-10-11T00:51:21Z", "closed_at": "2017-10-11T00:51:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/152", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/152/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/152/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/152/events", "html_url": "https://github.com/Pylons/waitress/issues/152", "id": 197964951, "node_id": "MDU6SXNzdWUxOTc5NjQ5NTE=", "number": 152, "title": "Waitress may be adding Content-Length on responses without Content-Length", "user": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-12-29T07:22:20Z", "updated_at": "2018-09-01T01:52:54Z", "closed_at": "2018-09-01T01:52:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I am seeing responses from Pyramid's `httpexception.HTTPNoContent` coming back from Waitress with a `Content-Length` set to `0`. This is technically incorrect since HTTP Status Code 204 can't have a body it also can't have a content-length.\r\n\r\nI am not sure if it is waitress or something else adding it, it's late and I am tired.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/151", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/151/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/151/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/151/events", "html_url": "https://github.com/Pylons/waitress/issues/151", "id": 197172138, "node_id": "MDU6SXNzdWUxOTcxNzIxMzg=", "number": 151, "title": "How to discard logging?", "user": {"login": "wsw70", "id": 1345886, "node_id": "MDQ6VXNlcjEzNDU4ODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1345886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wsw70", "html_url": "https://github.com/wsw70", "followers_url": "https://api.github.com/users/wsw70/followers", "following_url": "https://api.github.com/users/wsw70/following{/other_user}", "gists_url": "https://api.github.com/users/wsw70/gists{/gist_id}", "starred_url": "https://api.github.com/users/wsw70/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wsw70/subscriptions", "organizations_url": "https://api.github.com/users/wsw70/orgs", "repos_url": "https://api.github.com/users/wsw70/repos", "events_url": "https://api.github.com/users/wsw70/events{/privacy}", "received_events_url": "https://api.github.com/users/wsw70/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2016-12-22T13:14:50Z", "updated_at": "2020-05-18T09:59:44Z", "closed_at": "2017-01-05T09:41:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Per the docs\r\n\r\n> `waitress.serve` calls `logging.basicConfig()` to set up logging to the console when the server starts up. Assuming no other logging configuration has already been done, this sets the logging default level to `logging.WARNING`. The `Waitress `logger will inherit the root logger\u2019s level information (it logs at level `WARNING `or above).\r\n\r\nI tried to discard the loggging from `waitress` by issuing a `logging.getLogger('waitress').setLevel(logging.ERROR) ` before `serve`(which is the last call in my script).\r\n\r\nThis not stop the logging and, worse, duplicates the log messages from my other loggers (which are named loggers, e.g. `log = logging.getLogger('myscriptname')`, the lines with the pipe delimiter in the example below):\r\n\r\n```\r\ndomotique | 2016-12-22 13:58:04,172 | INFO | webserver.py | 263 | calendar | initialized google calendar\r\nINFO:domotique:initialized google calendar\r\ndomotique | 2016-12-22 13:58:04,173 | DEBUG | googlecalendar.py | 23 | gettoken | requesting new google token\r\nDEBUG:domotique:requesting new google token\r\n\r\n```\r\nHow can i actually discard logging from `waitress` and especially not having it interacting with my other loggers?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/149", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/149/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/149/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/149/events", "html_url": "https://github.com/Pylons/waitress/issues/149", "id": 194754423, "node_id": "MDU6SXNzdWUxOTQ3NTQ0MjM=", "number": 149, "title": "waitress 1.0 doesn't work on linux without reachable DNS", "user": {"login": "romor", "id": 2196173, "node_id": "MDQ6VXNlcjIxOTYxNzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2196173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/romor", "html_url": "https://github.com/romor", "followers_url": "https://api.github.com/users/romor/followers", "following_url": "https://api.github.com/users/romor/following{/other_user}", "gists_url": "https://api.github.com/users/romor/gists{/gist_id}", "starred_url": "https://api.github.com/users/romor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/romor/subscriptions", "organizations_url": "https://api.github.com/users/romor/orgs", "repos_url": "https://api.github.com/users/romor/repos", "events_url": "https://api.github.com/users/romor/events{/privacy}", "received_events_url": "https://api.github.com/users/romor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2016-12-10T08:46:53Z", "updated_at": "2017-02-04T23:12:46Z", "closed_at": "2017-02-03T07:23:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use waitress on a Debian server without Internet connection. Waitress does not start if the DNS server is not reachable:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/pserve\", line 9, in <module>\r\n    load_entry_point('pyramid==1.6.1', 'console_scripts', 'pserve')()\r\n  File \"/usr/local/lib/python3.4/dist-packages/pyramid-1.6.1-py3.4.egg/pyramid/scripts/pserve.py\", line 60, in main\r\n    return command.run()\r\n  File \"/usr/local/lib/python3.4/dist-packages/pyramid-1.6.1-py3.4.egg/pyramid/scripts/pserve.py\", line 399, in run\r\n    serve()\r\n  File \"/usr/local/lib/python3.4/dist-packages/pyramid-1.6.1-py3.4.egg/pyramid/scripts/pserve.py\", line 378, in serve\r\n    server(app)\r\n  File \"/usr/local/lib/python3.4/dist-packages/PasteDeploy-1.5.2-py3.4.egg/paste/deploy/loadwsgi.py\", line 189, in server_wrapper\r\n    **context.local_conf)\r\n  File \"/usr/local/lib/python3.4/dist-packages/PasteDeploy-1.5.2-py3.4.egg/paste/deploy/util.py\", line 55, in fix_call\r\n    val = callable(*args, **kw)\r\n  File \"/usr/local/lib/python3.4/dist-packages/waitress-1.0.0-py3.4.egg/waitress/__init__.py\", line 20, in serve_paste\r\n    serve(app, **kw)\r\n  File \"/usr/local/lib/python3.4/dist-packages/waitress-1.0.0-py3.4.egg/waitress/__init__.py\", line 11, in serve\r\n    server = _server(app, **kw)\r\n  File \"/usr/local/lib/python3.4/dist-packages/waitress-1.0.0-py3.4.egg/waitress/server.py\", line 78, in create_server\r\n    sockinfo=sockinfo)\r\n  File \"/usr/local/lib/python3.4/dist-packages/waitress-1.0.0-py3.4.egg/waitress/server.py\", line 176, in __init__\r\n    self.effective_host, self.effective_port = self.getsockname()\r\n  File \"/usr/local/lib/python3.4/dist-packages/waitress-1.0.0-py3.4.egg/waitress/server.py\", line 292, in getsockname\r\n    self.socketmod.NI_NUMERICSERV)\r\nsocket.gaierror: [Errno -3] Temporary failure in name resolution\r\n```\r\n\r\nI am not sure whether this is related to issue #131, but at least this is still open in version 1.0.0. Version 0.9.0 does not show this problem.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/145", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/145/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/145/events", "html_url": "https://github.com/Pylons/waitress/issues/145", "id": 184702796, "node_id": "MDU6SXNzdWUxODQ3MDI3OTY=", "number": 145, "title": "Typo \"impot\"", "user": {"login": "hartwork", "id": 1577132, "node_id": "MDQ6VXNlcjE1NzcxMzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1577132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hartwork", "html_url": "https://github.com/hartwork", "followers_url": "https://api.github.com/users/hartwork/followers", "following_url": "https://api.github.com/users/hartwork/following{/other_user}", "gists_url": "https://api.github.com/users/hartwork/gists{/gist_id}", "starred_url": "https://api.github.com/users/hartwork/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hartwork/subscriptions", "organizations_url": "https://api.github.com/users/hartwork/orgs", "repos_url": "https://api.github.com/users/hartwork/repos", "events_url": "https://api.github.com/users/hartwork/events{/privacy}", "received_events_url": "https://api.github.com/users/hartwork/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-10-23T17:29:30Z", "updated_at": "2016-10-23T19:36:55Z", "closed_at": "2016-10-23T19:36:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "There is a typo \"impot\" in `from waitress impot serve` at https://github.com/Pylons/waitress/blob/7e807c9ecefb2388d1e696c3253085d674ac4590/docs/index.rst#L26 .\nBest, Sebastian\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/139", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/139/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/139/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/139/events", "html_url": "https://github.com/Pylons/waitress/issues/139", "id": 182552207, "node_id": "MDU6SXNzdWUxODI1NTIyMDc=", "number": 139, "title": "Invalid host/port specified error on Windows", "user": {"login": "fschulze", "id": 60921, "node_id": "MDQ6VXNlcjYwOTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/60921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschulze", "html_url": "https://github.com/fschulze", "followers_url": "https://api.github.com/users/fschulze/followers", "following_url": "https://api.github.com/users/fschulze/following{/other_user}", "gists_url": "https://api.github.com/users/fschulze/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschulze/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschulze/subscriptions", "organizations_url": "https://api.github.com/users/fschulze/orgs", "repos_url": "https://api.github.com/users/fschulze/repos", "events_url": "https://api.github.com/users/fschulze/events{/privacy}", "received_events_url": "https://api.github.com/users/fschulze/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2016-10-12T15:11:11Z", "updated_at": "2017-08-16T04:59:50Z", "closed_at": "2016-10-22T19:35:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "[We use waitress in devpi](https://bitbucket.org/hpk42/devpi/src/f62e61da0c8716692663fd366c0710dcbc905f04/server/devpi_server/main.py?at=default&fileviewer=file-view-default#main.py-144) like this:\n\n```\n  serve(app, host=host, port=port, threads=50)\n```\n\n and on Windows got #138 with waitress 1.0. To work around that I tried to change to the following:\n\n```\n  serve(app, listen=\"%s:%s\" % (host, port), threads=50)\n```\n\nBut then I got `ValueError: Invalid host/port specified.`\n\nThis only happens on Windows, Linux and OS X is fine. For now we pinned to `waitress<1`.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/138", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/138/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/138/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/138/events", "html_url": "https://github.com/Pylons/waitress/issues/138", "id": 179695308, "node_id": "MDU6SXNzdWUxNzk2OTUzMDg=", "number": 138, "title": "socket.IPPROTO_IPV6 undefined in Python 2.7.12 for Windows", "user": {"login": "nicolasrozain", "id": 16897168, "node_id": "MDQ6VXNlcjE2ODk3MTY4", "avatar_url": "https://avatars2.githubusercontent.com/u/16897168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nicolasrozain", "html_url": "https://github.com/nicolasrozain", "followers_url": "https://api.github.com/users/nicolasrozain/followers", "following_url": "https://api.github.com/users/nicolasrozain/following{/other_user}", "gists_url": "https://api.github.com/users/nicolasrozain/gists{/gist_id}", "starred_url": "https://api.github.com/users/nicolasrozain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nicolasrozain/subscriptions", "organizations_url": "https://api.github.com/users/nicolasrozain/orgs", "repos_url": "https://api.github.com/users/nicolasrozain/repos", "events_url": "https://api.github.com/users/nicolasrozain/events{/privacy}", "received_events_url": "https://api.github.com/users/nicolasrozain/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-09-28T07:03:19Z", "updated_at": "2016-10-22T19:35:11Z", "closed_at": "2016-10-22T19:35:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all,\n\nIn the current commit (7e807c9), the line 172 of the file waitress/server.py contains:\n\n``` python\nself.socket.setsockopt(socket.IPPROTO_IPV6, socket.IPV6_V6ONLY, 1)\n```\n\nThing is, IPPROTO_IPV6 is not defined in socket...\n\nShould it be replaced by its value (41) defined in Ws2def.h, while we gently wait for Python to fix this ?\nOr should IPV6 be avoided under Windows with Python 2.7 ?\n\nThanks for the support,\n\nBest,\nNicolas\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/136", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/136/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/136/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/136/events", "html_url": "https://github.com/Pylons/waitress/issues/136", "id": 176965951, "node_id": "MDU6SXNzdWUxNzY5NjU5NTE=", "number": 136, "title": "trusted-proxy should trust localhost by default", "user": {"login": "mmerickel", "id": 487237, "node_id": "MDQ6VXNlcjQ4NzIzNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/487237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmerickel", "html_url": "https://github.com/mmerickel", "followers_url": "https://api.github.com/users/mmerickel/followers", "following_url": "https://api.github.com/users/mmerickel/following{/other_user}", "gists_url": "https://api.github.com/users/mmerickel/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmerickel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmerickel/subscriptions", "organizations_url": "https://api.github.com/users/mmerickel/orgs", "repos_url": "https://api.github.com/users/mmerickel/repos", "events_url": "https://api.github.com/users/mmerickel/events{/privacy}", "received_events_url": "https://api.github.com/users/mmerickel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-09-14T17:12:49Z", "updated_at": "2017-03-23T20:22:12Z", "closed_at": "2017-03-23T20:22:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The most common deployment scenario is nginx running on the same machine as waitress. Gunicorn already does this and I think it's a great default.\n\nGunicorn also supports X-Forwarded-For which waitress does not and bundles them into the same setting, like they should be.\n\nhttp://docs.gunicorn.org/en/stable/deploy.html\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/135", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/135/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/135/events", "html_url": "https://github.com/Pylons/waitress/issues/135", "id": 174490336, "node_id": "MDU6SXNzdWUxNzQ0OTAzMzY=", "number": 135, "title": " ValueError: Invalid host/port specified. when using host = None", "user": {"login": "arthurlogilab", "id": 445200, "node_id": "MDQ6VXNlcjQ0NTIwMA==", "avatar_url": "https://avatars0.githubusercontent.com/u/445200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arthurlogilab", "html_url": "https://github.com/arthurlogilab", "followers_url": "https://api.github.com/users/arthurlogilab/followers", "following_url": "https://api.github.com/users/arthurlogilab/following{/other_user}", "gists_url": "https://api.github.com/users/arthurlogilab/gists{/gist_id}", "starred_url": "https://api.github.com/users/arthurlogilab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arthurlogilab/subscriptions", "organizations_url": "https://api.github.com/users/arthurlogilab/orgs", "repos_url": "https://api.github.com/users/arthurlogilab/repos", "events_url": "https://api.github.com/users/arthurlogilab/events{/privacy}", "received_events_url": "https://api.github.com/users/arthurlogilab/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-09-01T10:34:11Z", "updated_at": "2016-09-03T07:22:32Z", "closed_at": "2016-09-03T07:22:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using host=None (or host=\"\") waitress fails to start server with  ValueError: Invalid host/port specified. \n\n```\nhost=None\nport=8080\nwaitress.serve(app, host=host, port=port)\n```\n\nfails with the following traceback\n\n```\nTraceback (most recent call last):\n File \"/usr/local/lib/python2.7/dist-packages/cubicweb/cwctl.py\", line 146, in run_arg\n   status = cmdmeth(appid)\n File \"/usr/local/share/cubicweb/cubes/pyramid/ccplugin.py\", line 335, in pyramid_instance\n   waitress.serve(app, host=host, port=port)\n File \"/usr/local/lib/python2.7/dist-packages/waitress/__init__.py\", line 11, in serve\n   server = _server(app, **kw)\n File \"/usr/local/lib/python2.7/dist-packages/waitress/server.py\", line 44, in create_server\n   adj = Adjustments(**kw)\n File \"/usr/local/lib/python2.7/dist-packages/waitress/adjustments.py\", line 278, in __init__\n   raise ValueError('Invalid host/port specified.')\n ValueError: Invalid host/port specified.\n```\n\nThis used to work with waitress 0.9.0 (pip install waitress==0.9.0 \"solves\" the problem).\n\nHit this bug when using with cubicweb and pyramid : https://www.cubicweb.org/ticket/15135610\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/131", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/131/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/131/events", "html_url": "https://github.com/Pylons/waitress/issues/131", "id": 164015421, "node_id": "MDU6SXNzdWUxNjQwMTU0MjE=", "number": 131, "title": "waitress 1.0a1 doesn't work on linux without internet connectivity (DNS?)", "user": {"login": "ztane", "id": 704200, "node_id": "MDQ6VXNlcjcwNDIwMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/704200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ztane", "html_url": "https://github.com/ztane", "followers_url": "https://api.github.com/users/ztane/followers", "following_url": "https://api.github.com/users/ztane/following{/other_user}", "gists_url": "https://api.github.com/users/ztane/gists{/gist_id}", "starred_url": "https://api.github.com/users/ztane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ztane/subscriptions", "organizations_url": "https://api.github.com/users/ztane/orgs", "repos_url": "https://api.github.com/users/ztane/repos", "events_url": "https://api.github.com/users/ztane/events{/privacy}", "received_events_url": "https://api.github.com/users/ztane/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-07-06T07:30:29Z", "updated_at": "2016-07-07T18:15:25Z", "closed_at": "2016-07-07T16:35:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using:\n\n```\nlisten = '127.0.0.1:6543 [::1]:6543'\n```\n\nNow, if I do not have internet connectivity (aeroplane coding mode for example), waitress crashes with:\n\n```\nTraceback (most recent call last):\n  File \"/.../venv/lib/python3.5/site-packages/waitress/adjustments.py\", line 258, in __init__\n    socket.AI_PASSIVE | socket.AI_ADDRCONFIG\n  File \"/usr/lib/python3.5/socket.py\", line 732, in getaddrinfo\n    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):\nsocket.gaierror: [Errno -9] Address family for hostname not supported\n```\n\nThis even though the reverses for 127.0.0.1 and ::1 are in /etc/hosts, and they are the names that are displayed on the `Serving` message. That is, if I change them to localhost123 and ip6-localhost123, and I have internet connectivity, waitress displays:\n\n```\nServing on http://localhost123:6543\nServing on http://ip6-localhost123:6543\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/130", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/130/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/130/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/130/events", "html_url": "https://github.com/Pylons/waitress/issues/130", "id": 162266686, "node_id": "MDU6SXNzdWUxNjIyNjY2ODY=", "number": 130, "title": "Grant access on RTD for Waitress to bertjwregeer and stevepiercy", "user": {"login": "stevepiercy", "id": 102112, "node_id": "MDQ6VXNlcjEwMjExMg==", "avatar_url": "https://avatars1.githubusercontent.com/u/102112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevepiercy", "html_url": "https://github.com/stevepiercy", "followers_url": "https://api.github.com/users/stevepiercy/followers", "following_url": "https://api.github.com/users/stevepiercy/following{/other_user}", "gists_url": "https://api.github.com/users/stevepiercy/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevepiercy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevepiercy/subscriptions", "organizations_url": "https://api.github.com/users/stevepiercy/orgs", "repos_url": "https://api.github.com/users/stevepiercy/repos", "events_url": "https://api.github.com/users/stevepiercy/events{/privacy}", "received_events_url": "https://api.github.com/users/stevepiercy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-06-25T06:23:14Z", "updated_at": "2016-10-22T15:33:04Z", "closed_at": "2016-10-22T15:33:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Like, the subject says, please grant access on RTD for Waitress to users bertjwregeer and stevepiercy. Thank you, @mcdonc !\n\nhttp://readthedocs.org/projects/waitress/\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/127", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/127/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/127/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/127/events", "html_url": "https://github.com/Pylons/waitress/issues/127", "id": 149973262, "node_id": "MDU6SXNzdWUxNDk5NzMyNjI=", "number": 127, "title": "Waitress errors on curl request with non ASCII in URL.", "user": {"login": "GrahamDumpleton", "id": 507637, "node_id": "MDQ6VXNlcjUwNzYzNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/507637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GrahamDumpleton", "html_url": "https://github.com/GrahamDumpleton", "followers_url": "https://api.github.com/users/GrahamDumpleton/followers", "following_url": "https://api.github.com/users/GrahamDumpleton/following{/other_user}", "gists_url": "https://api.github.com/users/GrahamDumpleton/gists{/gist_id}", "starred_url": "https://api.github.com/users/GrahamDumpleton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GrahamDumpleton/subscriptions", "organizations_url": "https://api.github.com/users/GrahamDumpleton/orgs", "repos_url": "https://api.github.com/users/GrahamDumpleton/repos", "events_url": "https://api.github.com/users/GrahamDumpleton/events{/privacy}", "received_events_url": "https://api.github.com/users/GrahamDumpleton/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-04-21T05:49:48Z", "updated_at": "2017-08-16T05:32:49Z", "closed_at": "2017-08-16T05:32:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "If you issue a request with curl of:\n\n```\ncurl http://127.0.0.1:8080/a=\u0442\u0435\u0441\u0442\n```\n\nWaitress server will die with:\n\n```\nERROR:waitress:uncaptured python exception, closing channel <waitress.channel.HTTPChannel connected 127.0.0.1:59045 at 0x103ad7b38> (<class 'UnicodeDecodeError'>:'ascii' codec can't decode byte 0xd1 in position 3: ordinal not in range(128) [/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/asyncore.py|read|83] [/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/asyncore.py|handle_read_event|423] [/private/tmp/py35/lib/python3.5/site-packages/waitress/channel.py|handle_read|174] [/private/tmp/py35/lib/python3.5/site-packages/waitress/channel.py|received|191] [/private/tmp/py35/lib/python3.5/site-packages/waitress/parser.py|received|102] [/private/tmp/py35/lib/python3.5/site-packages/waitress/parser.py|parse_header|206] [/private/tmp/py35/lib/python3.5/site-packages/waitress/parser.py|split_uri|254] [/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/urllib/parse.py|urlsplit|327] [/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/urllib/parse.py|_coerce_args|114] [/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/urllib/parse.py|_decode_args|98] [/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/urllib/parse.py|<genexpr>|98])\n```\n\nThis came up in discussion:\n- http://bugs.python.org/issue26808\n\nYou may want to check that and related issues:\n- http://bugs.python.org/issue16679\n- http://bugs.python.org/issue26717\n\nto check how Waitress behaves in cases of client sending non ASCII.\n\nRight now Waitress fails. Both wsgiref and Gunicorn appear to get it wrong. But mod_wsgi appears to get the desired result.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/126", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/126/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/126/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/126/events", "html_url": "https://github.com/Pylons/waitress/issues/126", "id": 148787318, "node_id": "MDU6SXNzdWUxNDg3ODczMTg=", "number": 126, "title": "Python 2.6 support removal", "user": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Pylons/waitress/milestones/2", "html_url": "https://github.com/Pylons/waitress/milestone/2", "labels_url": "https://api.github.com/repos/Pylons/waitress/milestones/2/labels", "id": 1711020, "node_id": "MDk6TWlsZXN0b25lMTcxMTAyMA==", "number": 2, "title": "0.10.0", "description": "", "creator": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "closed", "created_at": "2016-04-15T22:55:05Z", "updated_at": "2018-12-12T21:15:56Z", "due_on": null, "closed_at": "2018-12-12T21:15:56Z"}, "comments": 0, "created_at": "2016-04-15T22:55:37Z", "updated_at": "2016-06-25T04:42:56Z", "closed_at": "2016-06-25T04:42:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Remove Python 2.6 support in the next version of waitress.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/123", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/123/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/123/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/123/events", "html_url": "https://github.com/Pylons/waitress/issues/123", "id": 141783721, "node_id": "MDU6SXNzdWUxNDE3ODM3MjE=", "number": 123, "title": "Bad release at PyPi", "user": {"login": "lorenzogil", "id": 71676, "node_id": "MDQ6VXNlcjcxNjc2", "avatar_url": "https://avatars3.githubusercontent.com/u/71676?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lorenzogil", "html_url": "https://github.com/lorenzogil", "followers_url": "https://api.github.com/users/lorenzogil/followers", "following_url": "https://api.github.com/users/lorenzogil/following{/other_user}", "gists_url": "https://api.github.com/users/lorenzogil/gists{/gist_id}", "starred_url": "https://api.github.com/users/lorenzogil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lorenzogil/subscriptions", "organizations_url": "https://api.github.com/users/lorenzogil/orgs", "repos_url": "https://api.github.com/users/lorenzogil/repos", "events_url": "https://api.github.com/users/lorenzogil/events{/privacy}", "received_events_url": "https://api.github.com/users/lorenzogil/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Pylons/waitress/milestones/1", "html_url": "https://github.com/Pylons/waitress/milestone/1", "labels_url": "https://api.github.com/repos/Pylons/waitress/milestones/1/labels", "id": 1653914, "node_id": "MDk6TWlsZXN0b25lMTY1MzkxNA==", "number": 1, "title": "0.9.0", "description": "", "creator": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2016-03-18T16:59:23Z", "updated_at": "2018-12-12T21:15:58Z", "due_on": null, "closed_at": "2018-12-12T21:15:58Z"}, "comments": 7, "created_at": "2016-03-18T06:05:56Z", "updated_at": "2016-04-10T02:01:35Z", "closed_at": "2016-04-10T02:01:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "There is a 0.9.0b0 release at PyPI https://pypi.python.org/pypi/waitress/0.9.0b0 with several problems:\n- The release does not have a git tag in this repository\n- There is no changes in the file CHANGES.txt so we don't know what are the differences between the latest good release (0.8.11b0) and this one\n- The setup.py file in the master branch of the git repository indicates that the latest version is 0.8.11b0\n\nI think somebody accidentally created a release in PyPi from his local changes.\n\nPlease remove the PyPI release and/or fix the repository.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/122", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/122/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/122/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/122/events", "html_url": "https://github.com/Pylons/waitress/issues/122", "id": 141582011, "node_id": "MDU6SXNzdWUxNDE1ODIwMTE=", "number": 122, "title": "HTTP Response Splitting - Status/Header Names", "user": {"login": "jamadden", "id": 1256082, "node_id": "MDQ6VXNlcjEyNTYwODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1256082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamadden", "html_url": "https://github.com/jamadden", "followers_url": "https://api.github.com/users/jamadden/followers", "following_url": "https://api.github.com/users/jamadden/following{/other_user}", "gists_url": "https://api.github.com/users/jamadden/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamadden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamadden/subscriptions", "organizations_url": "https://api.github.com/users/jamadden/orgs", "repos_url": "https://api.github.com/users/jamadden/repos", "events_url": "https://api.github.com/users/jamadden/events{/privacy}", "received_events_url": "https://api.github.com/users/jamadden/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/Pylons/waitress/milestones/1", "html_url": "https://github.com/Pylons/waitress/milestone/1", "labels_url": "https://api.github.com/repos/Pylons/waitress/milestones/1/labels", "id": 1653914, "node_id": "MDk6TWlsZXN0b25lMTY1MzkxNA==", "number": 1, "title": "0.9.0", "description": "", "creator": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2016-03-18T16:59:23Z", "updated_at": "2018-12-12T21:15:58Z", "due_on": null, "closed_at": "2018-12-12T21:15:58Z"}, "comments": 4, "created_at": "2016-03-17T13:22:11Z", "updated_at": "2016-04-10T02:59:36Z", "closed_at": "2016-03-26T09:29:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#117 was about HTTP response splitting in header values. Should this also cover the status line and the header names? The same thing can happen with those.\n\nAll of these examples are on waitress 0.9.0b0:\n\n```\n$ pip freeze | grep waitress\nwaitress==0.9.0b0\n```\n\nHere's an app that uses a bad status line:\n\n``` python\ndef app(environ, start_response):\n    start_response(\"200 Evil\\r\\nContent-Length: 0\\r\\nConnection: close\\r\\n\\r\\n\", [])\n    return [b\"This should be the body!\"]\n```\n\nAnd the output of connecting to it:\n\n```\n$ http 127.0.0.1:8080\nHTTP/1.1 200 Evil\nConnection: close\nContent-Length: 0\n\n\n$\n```\n\nAnd here's one that uses a bad header name:\n\n``` python\ndef app(environ, start_response):\n    start_response(\"200 BadName\",\n                   [(\"\\r\\n\", \"Content-length: 0\")])\n    return [b\"This should be the body!\"]\n```\n\nAnd its output, which hangs the client until a timeout, leaving a dangling socket:\n\n```\n$ http 127.0.0.1:8080\nHTTP/1.1 200 BadName\n\n\nhttp: error: ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8080): Read timed out.\n```\n\nI realize that HTTP status messages and header names are _probably_ less likely to allow user input than header values, but if they do, bad things can still happen.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/120", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/120/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/120/events", "html_url": "https://github.com/Pylons/waitress/issues/120", "id": 123376999, "node_id": "MDU6SXNzdWUxMjMzNzY5OTk=", "number": 120, "title": "Long polling -- force buffer flush?", "user": {"login": "ckcollab", "id": 2185159, "node_id": "MDQ6VXNlcjIxODUxNTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2185159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ckcollab", "html_url": "https://github.com/ckcollab", "followers_url": "https://api.github.com/users/ckcollab/followers", "following_url": "https://api.github.com/users/ckcollab/following{/other_user}", "gists_url": "https://api.github.com/users/ckcollab/gists{/gist_id}", "starred_url": "https://api.github.com/users/ckcollab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ckcollab/subscriptions", "organizations_url": "https://api.github.com/users/ckcollab/orgs", "repos_url": "https://api.github.com/users/ckcollab/repos", "events_url": "https://api.github.com/users/ckcollab/events{/privacy}", "received_events_url": "https://api.github.com/users/ckcollab/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-12-21T22:59:17Z", "updated_at": "2019-04-04T18:34:30Z", "closed_at": "2019-04-04T18:34:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey there, first of all: thanks for waitress!\n\nI have been going through the docs trying to solve a problem when doing long polling: my buffers don't seem to flush until I respond with > 50kb of data. I found the `send_bytes` option but I don't want every response to not buffer. Is there a \"right way\" to prune (like this PR #113 ) after I yield something to a streaming response? I also found this issue #49 discussing the issue, but again I don't think `send_bytes` is what I want?\n\nOr is `send_bytes=1` not that big a deal?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/118", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/118/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/118/events", "html_url": "https://github.com/Pylons/waitress/issues/118", "id": 114477584, "node_id": "MDU6SXNzdWUxMTQ0Nzc1ODQ=", "number": 118, "title": "Waitress Hanging", "user": {"login": "guybowden", "id": 140627, "node_id": "MDQ6VXNlcjE0MDYyNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/140627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guybowden", "html_url": "https://github.com/guybowden", "followers_url": "https://api.github.com/users/guybowden/followers", "following_url": "https://api.github.com/users/guybowden/following{/other_user}", "gists_url": "https://api.github.com/users/guybowden/gists{/gist_id}", "starred_url": "https://api.github.com/users/guybowden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guybowden/subscriptions", "organizations_url": "https://api.github.com/users/guybowden/orgs", "repos_url": "https://api.github.com/users/guybowden/repos", "events_url": "https://api.github.com/users/guybowden/events{/privacy}", "received_events_url": "https://api.github.com/users/guybowden/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-11-01T15:53:54Z", "updated_at": "2017-02-03T07:25:21Z", "closed_at": "2017-02-03T07:25:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've got Waitress serving a Django app on Heroku. Recently, something has started to cause the `waitress-serve` process to hang until it is forcibly restarted. The only error I get is the Heroku router timeout error after 30 seconds. Nothing is being reported to New Relic. I guess that the heroku router is passing on the request to the process and getting nothing back aside from an acknowledgment that the request has been registered (I assume?)\n\nIs there anyway to debug what's going on? Some extra logging info that can be gleaned from the processes perhaps?\n\nAt the moment I am resorting to automatically restarting the processes once per hour to pre-emtively stop them from crashing. \n\nAre there any settings or arguments I can use to force a restart after a certain number of requests?\n\nI start it using the following command (I added the cleanup interval and channel timeout after this first started happening, but to no avail)\n\n`waitress-serve --cleanup-interval=20 --channel-timeout=25 --port=$PORT myapp.wsgi:application`\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/117", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/117/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/117/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/117/events", "html_url": "https://github.com/Pylons/waitress/issues/117", "id": 110292421, "node_id": "MDU6SXNzdWUxMTAyOTI0MjE=", "number": 117, "title": "HTTP Response Splitting", "user": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2015-10-07T18:53:29Z", "updated_at": "2016-01-03T07:49:03Z", "closed_at": "2016-01-03T07:49:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If for some reason an application returns a `header` dictionary that contains a header that has `\\r\\n` in it:\n\n```\n[\n    ('Location', 'http://example.com\\r\\nX-Test: false')\n]\n```\n\nThis will then on https://github.com/Pylons/waitress/blob/master/waitress/task.py#L260 get sent directly to the user, which would mean the end user sees the following:\n\n```\nLocation: http://example.com/\nX-Test: false\n```\n\nWhich is bad (tm).\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/116", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/116/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/116/events", "html_url": "https://github.com/Pylons/waitress/issues/116", "id": 110178204, "node_id": "MDU6SXNzdWUxMTAxNzgyMDQ=", "number": 116, "title": "Occasionally \"i/o operation on closed file\" error", "user": {"login": "MassD", "id": 1250103, "node_id": "MDQ6VXNlcjEyNTAxMDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1250103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MassD", "html_url": "https://github.com/MassD", "followers_url": "https://api.github.com/users/MassD/followers", "following_url": "https://api.github.com/users/MassD/following{/other_user}", "gists_url": "https://api.github.com/users/MassD/gists{/gist_id}", "starred_url": "https://api.github.com/users/MassD/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MassD/subscriptions", "organizations_url": "https://api.github.com/users/MassD/orgs", "repos_url": "https://api.github.com/users/MassD/repos", "events_url": "https://api.github.com/users/MassD/events{/privacy}", "received_events_url": "https://api.github.com/users/MassD/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-10-07T08:46:43Z", "updated_at": "2018-09-07T04:08:28Z", "closed_at": "2018-09-07T04:08:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\n\nI wrote a small standard pyramid application (using waitress and pyramid). \n\nEssentially my frontend (Chrome) just issues a request to get some status data from backend every 10 seconds.\n\nOnce the backend (pyramid waitress) receives the request, it queries the database and sends back the data.\n\nIt runs well, however, occasionally, the backend gave **i/o operation on closed file** error. \n\n```\n2015-09-09 17:29:42 ERROR   [waitress][Dummy-3] Exception when serving /simplestatus/ws/get_current_statuses/\nTraceback (most recent call last):\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/channel.py\", line 337, in service\n    task.service()\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/task.py\", line 173, in service\n    self.execute()\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/task.py\", line 430, in execute\n    self.write(chunk)\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/task.py\", line 289, in write\n    channel.write_soon(rh)\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/channel.py\", line 319, in write_soon\n    self.outbufs[-1].append(data)\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/buffers.py\", line 242, in append\n    buf.append(s)\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/buffers.py\", line 53, in append\n    read_pos = file.tell()\nValueError: I/O operation on closed file.\n2015-09-09 17:29:42 ERROR   [waitress][Dummy-3] Exception when servicing <waitress.channel.HTTPChannel 10.192.130.73:42572 at 0x19f7b4d0>\nTraceback (most recent call last):\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/task.py\", line 74, in handler_thread\n    task.service()\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/channel.py\", line 360, in service\n    task.service() # must not fail\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/task.py\", line 173, in service\n    self.execute()\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/task.py\", line 333, in execute\n    self.write(tobytes(body))\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/task.py\", line 289, in write\n    channel.write_soon(rh)\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/channel.py\", line 319, in write_soon\n    self.outbufs[-1].append(data)\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/buffers.py\", line 242, in append\n    buf.append(s)\n  File \"/app/packages/simple.status/0.13.0-py2.7/app/simple.status/lib/python2.7/site-packages/waitress-0.8.9-py2.7.egg/waitress/buffers.py\", line 53, in append\n    read_pos = file.tell()\nValueError: I/O operation on closed file.\n```\n\nCan I know why and how to avoid this?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/111", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/111/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/111/events", "html_url": "https://github.com/Pylons/waitress/issues/111", "id": 106957404, "node_id": "MDU6SXNzdWUxMDY5NTc0MDQ=", "number": 111, "title": "Memory keeps increasing when user request data whose size < 1M (outbuf_overflow default )", "user": {"login": "yuzhougit", "id": 4220654, "node_id": "MDQ6VXNlcjQyMjA2NTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4220654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuzhougit", "html_url": "https://github.com/yuzhougit", "followers_url": "https://api.github.com/users/yuzhougit/followers", "following_url": "https://api.github.com/users/yuzhougit/following{/other_user}", "gists_url": "https://api.github.com/users/yuzhougit/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuzhougit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuzhougit/subscriptions", "organizations_url": "https://api.github.com/users/yuzhougit/orgs", "repos_url": "https://api.github.com/users/yuzhougit/repos", "events_url": "https://api.github.com/users/yuzhougit/events{/privacy}", "received_events_url": "https://api.github.com/users/yuzhougit/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-09-17T10:41:10Z", "updated_at": "2015-12-21T00:15:51Z", "closed_at": "2015-12-21T00:15:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "My server program runs on windows(32bit) with Waitress + Pyramid.\nWhen I tested an http API's performance with Apache ab, and  the results data's size < 1M, i found the the memory keep increasing  util Memory error thrown at last.\n\nThe ab command looks like below\n\n```\n ab -c 10 -n 100000 -k http://apiurl\n```\n\nThe issue only happen in keep alive mode and data size is smaller than 1M.\nAfter debug, I found the cause:\n- In keep alive mode, the http channel will not be closed in my test\n- When data size < 1M, channel will use memory file BytesIO as output buffer\n- In _flush_some function of channel.py, the output buffer will never be clear after all its data has been sent, see the code\n\n``` python\n while True:\n            outbuf = self.outbufs[0]\n            # use outbuf.__len__ rather than len(outbuf) FBO of not getting\n            # OverflowError on Python 2\n            outbuflen = outbuf.__len__()\n            if outbuflen <= 0:\n                # self.outbufs[-1] must always be a writable outbuf\n                if len(self.outbufs) > 1:\n                    toclose = self.outbufs.pop(0)\n                    try:\n                        toclose.close()\n                    except:\n                        self.logger.exception(\n                            'Unexpected error when closing an outbuf')\n                    continue # pragma: no cover (coverage bug, it is hit)\n                else:\n                    # issue here, when outbuflen < 0, outbufs[0] should be clear at least\n                    dobreak = True\n```\n\nI added a line code in the marked place, then the issue could be workaround, please check if it is a reasonable fix:\n\n``` python\n                else:\n                    outbuf.prune()\n                    dobreak = True\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/110", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/110/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/110/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/110/events", "html_url": "https://github.com/Pylons/waitress/issues/110", "id": 102872595, "node_id": "MDU6SXNzdWUxMDI4NzI1OTU=", "number": 110, "title": "Unexpected behaviour for non-HTTP requests", "user": {"login": "wichert", "id": 199657, "node_id": "MDQ6VXNlcjE5OTY1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/199657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wichert", "html_url": "https://github.com/wichert", "followers_url": "https://api.github.com/users/wichert/followers", "following_url": "https://api.github.com/users/wichert/following{/other_user}", "gists_url": "https://api.github.com/users/wichert/gists{/gist_id}", "starred_url": "https://api.github.com/users/wichert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wichert/subscriptions", "organizations_url": "https://api.github.com/users/wichert/orgs", "repos_url": "https://api.github.com/users/wichert/repos", "events_url": "https://api.github.com/users/wichert/events{/privacy}", "received_events_url": "https://api.github.com/users/wichert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-08-24T19:27:53Z", "updated_at": "2019-04-13T21:05:51Z", "closed_at": "2019-04-13T21:05:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I just had an application show an unexpected error because request.method was `''`. A bit of debugging reveals the culprit to be a non-HTTP request coming in with this first line:\n\n```\nGET /info?txtAirPlay&txtRAOP RTSP/1.0\n```\n\nWhen waitress receives that request and tries to parse it calls waitress.parse.crack_first_line. That sees the line does not claim to be HTTP and aborts:\n\n```\n>>> from waitress.parser import *\n>>> crack_first_line('GET /info?txtAirPlay&txtRAOP RTSP/1.0')\n('', '', '')\n```\n\nWaitress does proceed to treat this as a normal HTTP request and sends it down the WSGI stack. I'm not sure what the best behaviour is. I can see a few options:\n1. Keep the current behaviour.\n2. Abort processing for non-HTTP requests\n3. Try to be less strict when parsing the first line and treat this as a GET request, with protocol set to RTSP/1.0 (does the wsgi environ have a protocol field?)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/107", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/107/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/107/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/107/events", "html_url": "https://github.com/Pylons/waitress/issues/107", "id": 98289307, "node_id": "MDU6SXNzdWU5ODI4OTMwNw==", "number": 107, "title": "Code served by waitress not included in test coverage", "user": {"login": "davisagli", "id": 49014, "node_id": "MDQ6VXNlcjQ5MDE0", "avatar_url": "https://avatars0.githubusercontent.com/u/49014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davisagli", "html_url": "https://github.com/davisagli", "followers_url": "https://api.github.com/users/davisagli/followers", "following_url": "https://api.github.com/users/davisagli/following{/other_user}", "gists_url": "https://api.github.com/users/davisagli/gists{/gist_id}", "starred_url": "https://api.github.com/users/davisagli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davisagli/subscriptions", "organizations_url": "https://api.github.com/users/davisagli/orgs", "repos_url": "https://api.github.com/users/davisagli/repos", "events_url": "https://api.github.com/users/davisagli/events{/privacy}", "received_events_url": "https://api.github.com/users/davisagli/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-07-31T00:02:20Z", "updated_at": "2015-07-31T17:50:36Z", "closed_at": "2015-07-31T17:50:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If waitress is used to serve a WSGI app in tests, and coverage.py is used to measure test coverage, the code run by waitress fails to be included in the coverage results.\n\nI think this is because waitress uses the `thread` module instead of `threading` to spawn threads, and coverage.py [only hooks the latter](https://bitbucket.org/ned/coveragepy/issues/244/coverage-doesnt-work-with-thread-not).\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/106", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/106/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/106/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/106/events", "html_url": "https://github.com/Pylons/waitress/issues/106", "id": 97440594, "node_id": "MDU6SXNzdWU5NzQ0MDU5NA==", "number": 106, "title": "Cassandra compatibility issue", "user": {"login": "AnderUstarroz", "id": 8544110, "node_id": "MDQ6VXNlcjg1NDQxMTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/8544110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AnderUstarroz", "html_url": "https://github.com/AnderUstarroz", "followers_url": "https://api.github.com/users/AnderUstarroz/followers", "following_url": "https://api.github.com/users/AnderUstarroz/following{/other_user}", "gists_url": "https://api.github.com/users/AnderUstarroz/gists{/gist_id}", "starred_url": "https://api.github.com/users/AnderUstarroz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AnderUstarroz/subscriptions", "organizations_url": "https://api.github.com/users/AnderUstarroz/orgs", "repos_url": "https://api.github.com/users/AnderUstarroz/repos", "events_url": "https://api.github.com/users/AnderUstarroz/events{/privacy}", "received_events_url": "https://api.github.com/users/AnderUstarroz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-07-27T11:17:40Z", "updated_at": "2015-07-27T19:16:07Z", "closed_at": "2015-07-27T19:16:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Seems like theres is a compatibility issue between Waitress and Cassandra. Both are using asyncore and somehow they are stepping on each others toes. This is my code:\n\n```\nimport logging.config\nfrom .action.context import root_factory\nfrom pyramid.config import Configurator\nfrom cassandra.cluster import Cluster\nfrom cassandra.query import named_tuple_factory\n\n\ndef main(global_config, **settings):\n    \"\"\" This function returns a Pyramid WSGI application.\"\"\"\n\n    # support logging in python3\n    logging.config.fileConfig(\n        settings['logging.config'],\n        disable_existing_loggers=False\n    )\n    config = Configurator(settings=settings, root_factory=root_factory)\n    # Retrieves connection to Cassandra (Non SQL database)\n    def get_non_sql(request):\n        cluster = Cluster(['127.0.0.1'], port=9042)\n        def disconnect(request):\n            cluster.shutdown()\n        request.add_finished_callback(disconnect)\n        return cluster.connect('app')\n\n    #Adding scheduler configuration\n    config.configure_celery(global_config['__file__'])\n    config.add_request_method(get_non_sql, 'non_sql', reify=True)\n    config.scan()\n    return config.make_wsgi_app()\n```\n\nWhenever I try to run a query it actually works but it  throws  many errors afterwards:\n\n```\n2015-07-27 12:24:36,703 DEBUG [cassandra.io.asyncorereactor][Dummy-6] Closing connection (4384473384) to 127.0.0.1\n2015-07-27 12:24:36,705 DEBUG [cassandra.cluster][Task Scheduler] Not executing scheduled task due to Scheduler shutdown\n2015-07-27 12:24:36,706 DEBUG [cassandra.io.asyncorereactor][Dummy-6] Closed socket to 127.0.0.1\n2015-07-27 12:24:36,708 DEBUG [cassandra.io.asyncorereactor][Dummy-6] Closing connection (4395133920) to 127.0.0.1\n2015-07-27 12:24:36,710 DEBUG [cassandra.io.asyncorereactor][Dummy-6] Closed socket to 127.0.0.1\n2015-07-27 12:24:36,715 ERROR [waitress][MainThread] Unexpected exception when flushing\nTraceback (most recent call last):\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 140, in handle_write\n    flush()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 259, in _flush_some\n    outbuf.skip(num_sent, True)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 269, in skip\n    buf.skip(numbytes, allow_prune)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 77, in skip\n    numbytes, self.remain)\nValueError: Can't skip 4217 bytes in buffer of 0 bytes\n2015-07-27 12:24:36,779 ERROR [waitress][cassandra_driver_event_loop] Socket error\nTraceback (most recent call last):\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 167, in handle_read\n    data = self.recv(self.adj.recv_bytes)\n  File \"/usr/local/Cellar/python3/3.4.2_1/Frameworks/Python.framework/Versions/3.4/lib/python3.4/asyncore.py\", line 379, in recv\n    data = self.socket.recv(buffer_size)\nBlockingIOError: [Errno 35] Resource temporarily unavailable\n2015-07-27 12:24:37,079 ERROR [waitress][MainThread] Unexpected exception when flushing\nTraceback (most recent call last):\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 140, in handle_write\n    flush()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 259, in _flush_some\n    outbuf.skip(num_sent, True)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 269, in skip\n    buf.skip(numbytes, allow_prune)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 77, in skip\n    numbytes, self.remain)\nValueError: Can't skip 251 bytes in buffer of 0 bytes\n2015-07-27 12:24:37,082 ERROR [waitress][MainThread] Unexpected exception when flushing\nTraceback (most recent call last):\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 140, in handle_write\n    flush()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 259, in _flush_some\n    outbuf.skip(num_sent, True)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 269, in skip\n    buf.skip(numbytes, allow_prune)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 77, in skip\n    numbytes, self.remain)\nValueError: Can't skip 251 bytes in buffer of 0 bytes\n2015-07-27 12:24:37,171 ERROR [waitress][cassandra_driver_event_loop] Unexpected exception when flushing\nTraceback (most recent call last):\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 140, in handle_write\n    flush()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 259, in _flush_some\n    outbuf.skip(num_sent, True)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 269, in skip\n    buf.skip(numbytes, allow_prune)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 77, in skip\n    numbytes, self.remain)\nValueError: Can't skip 251 bytes in buffer of 0 bytes\n2015-07-27 12:24:37,187 ERROR [waitress][cassandra_driver_event_loop] Unexpected exception when flushing\nTraceback (most recent call last):\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 140, in handle_write\n    flush()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 259, in _flush_some\n    outbuf.skip(num_sent, True)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 269, in skip\n    buf.skip(numbytes, allow_prune)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 77, in skip\n    numbytes, self.remain)\nValueError: Can't skip 251 bytes in buffer of 0 bytes\n2015-07-27 12:24:37,284 ERROR [waitress][cassandra_driver_event_loop] Unexpected exception when flushing\nTraceback (most recent call last):\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 140, in handle_write\n    flush()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 259, in _flush_some\n    outbuf.skip(num_sent, True)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 269, in skip\n    buf.skip(numbytes, allow_prune)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 77, in skip\n    numbytes, self.remain)\nValueError: Can't skip 182 bytes in buffer of 0 bytes\n2015-07-27 12:24:37,338 ERROR [waitress][MainThread] Unexpected exception when flushing\nTraceback (most recent call last):\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 140, in handle_write\n    flush()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 259, in _flush_some\n    outbuf.skip(num_sent, True)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 269, in skip\n    buf.skip(numbytes, allow_prune)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 77, in skip\n    numbytes, self.remain)\nValueError: Can't skip 170 bytes in buffer of 0 bytes\n2015-07-27 12:24:38,293 DEBUG [cassandra.io.asyncorereactor][cassandra_driver_event_loop] Asyncore event loop ended\n2015-07-27 12:33:30,578 DEBUG [cassandra.cluster][Dummy-6] Connecting to cluster, contact points: ['127.0.0.1']; protocol version: 4\n2015-07-27 12:33:30,581 DEBUG [cassandra.pool][Dummy-6] Host 127.0.0.1 is now marked up\n2015-07-27 12:33:30,582 DEBUG [cassandra.cluster][Dummy-6] [control connection] Opening new connection to 127.0.0.1\n2015-07-27 12:33:30,584 DEBUG [cassandra.connection][Dummy-6] Not sending options message for new connection(4384605240) to 127.0.0.1 because compression is disabled and a cql version was not specified\n2015-07-27 12:33:30,585 DEBUG [cassandra.connection][Dummy-6] Sending StartupMessage on <AsyncoreConnection(4384605240) 127.0.0.1:9042>\n2015-07-27 12:33:30,586 DEBUG [cassandra.connection][Dummy-6] Sent StartupMessage on <AsyncoreConnection(4384605240) 127.0.0.1:9042>\n2015-07-27 12:33:30,587 DEBUG [cassandra.io.asyncorereactor][cassandra_driver_event_loop] Starting asyncore event loop\n2015-07-27 12:33:30,589 DEBUG [cassandra.connection][cassandra_driver_event_loop] Got ReadyMessage on new connection (4384605240) from 127.0.0.1\n2015-07-27 12:33:30,591 DEBUG [cassandra.cluster][Dummy-6] [control connection] Established new connection <AsyncoreConnection(4384605240) 127.0.0.1:9042>, registering watchers and refreshing schema and topology\n2015-07-27 12:33:30,611 DEBUG [cassandra.cluster][Dummy-6] [control connection] Refreshing node list and token map using preloaded results\n2015-07-27 12:33:30,612 INFO  [cassandra.policies][Dummy-6] Using datacenter 'datacenter1' for DCAwareRoundRobinPolicy (via host '127.0.0.1'); if incorrect, please specify a local_dc to the constructor, or limit contact points to local cluster nodes\n2015-07-27 12:33:30,613 DEBUG [cassandra.cluster][Dummy-6] [control connection] Finished fetching ring info\n2015-07-27 12:33:30,614 DEBUG [cassandra.cluster][Dummy-6] [control connection] Rebuilding token map due to topology changes\n2015-07-27 12:33:30,815 DEBUG [cassandra.cluster][Dummy-6] [control connection] Fetched schema, rebuilding metadata\n2015-07-27 12:33:30,910 DEBUG [cassandra.cluster][Dummy-6] Control connection created\n2015-07-27 12:33:30,912 DEBUG [cassandra.pool][Thread-11] Initializing connection for host 127.0.0.1\n2015-07-27 12:33:30,914 DEBUG [cassandra.connection][Thread-11] Not sending options message for new connection(4384961928) to 127.0.0.1 because compression is disabled and a cql version was not specified\n2015-07-27 12:33:30,915 DEBUG [cassandra.connection][Thread-11] Sending StartupMessage on <AsyncoreConnection(4384961928) 127.0.0.1:9042>\n2015-07-27 12:33:30,917 DEBUG [cassandra.connection][Thread-11] Sent StartupMessage on <AsyncoreConnection(4384961928) 127.0.0.1:9042>\n2015-07-27 12:33:30,918 DEBUG [cassandra.connection][cassandra_driver_event_loop] Got ReadyMessage on new connection (4384961928) from 127.0.0.1\n2015-07-27 12:33:30,920 DEBUG [cassandra.pool][Thread-11] Finished initializing connection for host 127.0.0.1\n2015-07-27 12:33:30,921 DEBUG [cassandra.cluster][Thread-11] Added pool for host 127.0.0.1 to session\n2015-07-27 12:33:30,954 DEBUG [cassandra.cluster][Dummy-6] Shutting down Cluster Scheduler\n2015-07-27 12:33:30,955 DEBUG [cassandra.cluster][Dummy-6] Shutting down control connection\n2015-07-27 12:33:30,956 DEBUG [cassandra.cluster][Task Scheduler] Not executing scheduled task due to Scheduler shutdown\n2015-07-27 12:33:30,957 DEBUG [cassandra.io.asyncorereactor][Dummy-6] Closing connection (4384605240) to 127.0.0.1\n2015-07-27 12:33:30,958 DEBUG [cassandra.io.asyncorereactor][Dummy-6] Closed socket to 127.0.0.1\n2015-07-27 12:33:30,960 DEBUG [cassandra.io.asyncorereactor][Dummy-6] Closing connection (4384961928) to 127.0.0.1\n2015-07-27 12:33:30,961 DEBUG [cassandra.io.asyncorereactor][Dummy-6] Closed socket to 127.0.0.1\n2015-07-27 12:33:30,966 ERROR [waitress][cassandra_driver_event_loop] Unexpected exception when flushing\nTraceback (most recent call last):\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 140, in handle_write\n    flush()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/channel.py\", line 259, in _flush_some\n    outbuf.skip(num_sent, True)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 269, in skip\n    buf.skip(numbytes, allow_prune)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/buffers.py\", line 77, in skip\n    numbytes, self.remain)\nValueError: Can't skip 4217 bytes in buffer of 0 bytes\nTraceback (most recent call last):\n  File \"/Applications/PyCharm.app/helpers/pydev/pydevd.py\", line 1733, in <module>\n    debugger.run(setup['file'], None, None)\n  File \"/Applications/PyCharm.app/helpers/pydev/pydevd.py\", line 1226, in run\n    pydev_imports.execfile(file, globals, locals)  # execute the script\n  File \"/Applications/PyCharm.app/helpers/pydev/_pydev_execfile.py\", line 38, in execfile\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc) #execute the script\n  File \"/Applications/PyCharm.app/helpers/pycharm/pycharm_load_entry_point.py\", line 8, in <module>\n    load_entry_point(dist, \"console_scripts\", name)()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/pyramid/scripts/pserve.py\", line 58, in main\n    return command.run()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/pyramid/scripts/pserve.py\", line 360, in run\n    serve()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/pyramid/scripts/pserve.py\", line 339, in serve\n    server(app)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/paste/deploy/loadwsgi.py\", line 189, in server_wrapper\n    **context.local_conf)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/paste/deploy/util.py\", line 55, in fix_call\n    val = callable(*args, **kw)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/__init__.py\", line 21, in serve_paste\n    serve(app, **kw)\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/__init__.py\", line 18, in serve\n    server.run()\n  File \"/Users/usertest/Virtualenvs/app/lib/python3.4/site-packages/waitress-0.8.9-py3.4.egg/waitress/server.py\", line 154, in run\n    use_poll=self.adj.asyncore_use_poll,\n  File \"/usr/local/Cellar/python3/3.4.2_1/Frameworks/Python.framework/Versions/3.4/lib/python3.4/asyncore.py\", line 208, in loop\n    poll_fun(timeout, map)\n  File \"/usr/local/Cellar/python3/3.4.2_1/Frameworks/Python.framework/Versions/3.4/lib/python3.4/asyncore.py\", line 145, in poll\n    r, w, e = select.select(r, w, e, timeout)\nOSError: [Errno 9] Bad file descriptor\n2015-07-27 12:33:32,649 DEBUG [cassandra.io.asyncorereactor][cassandra_driver_event_loop] Asyncore event loop ended\n2015-07-27 12:34:27,489 DEBUG [cassandra.io.asyncorereactor][Dummy-12] Waiting for event loop thread to join...\n2015-07-27 12:34:27,489 DEBUG [cassandra.io.asyncorereactor][Dummy-12] Event loop thread was joined\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/105", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/105/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/105/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/105/events", "html_url": "https://github.com/Pylons/waitress/issues/105", "id": 89976025, "node_id": "MDU6SXNzdWU4OTk3NjAyNQ==", "number": 105, "title": "SyntaxError under python 3.5.0b2 in __init__.py line 36", "user": {"login": "bkc", "id": 119869, "node_id": "MDQ6VXNlcjExOTg2OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/119869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkc", "html_url": "https://github.com/bkc", "followers_url": "https://api.github.com/users/bkc/followers", "following_url": "https://api.github.com/users/bkc/following{/other_user}", "gists_url": "https://api.github.com/users/bkc/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkc/subscriptions", "organizations_url": "https://api.github.com/users/bkc/orgs", "repos_url": "https://api.github.com/users/bkc/repos", "events_url": "https://api.github.com/users/bkc/events{/privacy}", "received_events_url": "https://api.github.com/users/bkc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-06-21T23:51:46Z", "updated_at": "2015-06-22T02:12:17Z", "closed_at": "2015-06-22T01:58:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "after running pcreate to setup a template project, python setup.py develop downloads but reports a SyntaxError during waitress install (also when trying to run with pserve, commenting out line 36 allows it to run)\n\nThis is Python 3.5.0b2\n\nSearching for waitress\nReading https://pypi.python.org/simple/waitress/\nBest match: waitress 0.8.9\nDownloading https://pypi.python.org/packages/source/w/waitress/waitress-0.8.9.tar.gz#md5=da3f2e62b3676be5dd630703a68e2a04\nProcessing waitress-0.8.9.tar.gz\nWriting /tmp/easy_install-nufpse11/waitress-0.8.9/setup.cfg\nRunning waitress-0.8.9/setup.py -q bdist_egg --dist-dir /tmp/easy_install-nufpse11/waitress-0.8.9/egg-dist-tmp-_zpid2hv\n  File \"build/bdist.linux-x86_64/egg/waitress/__init__.py\", line 36\n    stats.sort_stats(*sort_order or ('cumulative', 'calls', 'time'))\n                                  ^\nSyntaxError: invalid syntax\n\ncreating /home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/waitress-0.8.9-py3.5.egg\nExtracting waitress-0.8.9-py3.5.egg to /home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/waitress-0.8.9-py3.5.egg/waitress/**init**.py\", line 36\n    stats.sort_stats(*sort_order or ('cumulative', 'calls', 'time'))\n                                  ^\nSyntaxError: invalid syntax\n\nAdding waitress 0.8.9 to easy-install.pth file\nInstalling waitress-serve script to /home/bkc/Python_Environments/D2DAdmin-py3.5/bin\n\nInstalled /home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/waitress-0.8.9-py3.5.egg\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/104", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/104/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/104/events", "html_url": "https://github.com/Pylons/waitress/issues/104", "id": 83605801, "node_id": "MDU6SXNzdWU4MzYwNTgwMQ==", "number": 104, "title": "keep-alive option", "user": {"login": "velvetkeyboard", "id": 1111387, "node_id": "MDQ6VXNlcjExMTEzODc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1111387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/velvetkeyboard", "html_url": "https://github.com/velvetkeyboard", "followers_url": "https://api.github.com/users/velvetkeyboard/followers", "following_url": "https://api.github.com/users/velvetkeyboard/following{/other_user}", "gists_url": "https://api.github.com/users/velvetkeyboard/gists{/gist_id}", "starred_url": "https://api.github.com/users/velvetkeyboard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/velvetkeyboard/subscriptions", "organizations_url": "https://api.github.com/users/velvetkeyboard/orgs", "repos_url": "https://api.github.com/users/velvetkeyboard/repos", "events_url": "https://api.github.com/users/velvetkeyboard/events{/privacy}", "received_events_url": "https://api.github.com/users/velvetkeyboard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-06-01T17:05:14Z", "updated_at": "2019-04-04T15:49:38Z", "closed_at": "2019-04-04T15:49:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey guys, is there any option to configure this HTTP feature directly?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/Pylons/waitress/issues/103", "repository_url": "https://api.github.com/repos/Pylons/waitress", "labels_url": "https://api.github.com/repos/Pylons/waitress/issues/103/labels{/name}", "comments_url": "https://api.github.com/repos/Pylons/waitress/issues/103/comments", "events_url": "https://api.github.com/repos/Pylons/waitress/issues/103/events", "html_url": "https://github.com/Pylons/waitress/issues/103", "id": 81520928, "node_id": "MDU6SXNzdWU4MTUyMDkyOA==", "number": 103, "title": "How to increase upload limit?", "user": {"login": "cool-RR", "id": 56778, "node_id": "MDQ6VXNlcjU2Nzc4", "avatar_url": "https://avatars1.githubusercontent.com/u/56778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cool-RR", "html_url": "https://github.com/cool-RR", "followers_url": "https://api.github.com/users/cool-RR/followers", "following_url": "https://api.github.com/users/cool-RR/following{/other_user}", "gists_url": "https://api.github.com/users/cool-RR/gists{/gist_id}", "starred_url": "https://api.github.com/users/cool-RR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cool-RR/subscriptions", "organizations_url": "https://api.github.com/users/cool-RR/orgs", "repos_url": "https://api.github.com/users/cool-RR/repos", "events_url": "https://api.github.com/users/cool-RR/events{/privacy}", "received_events_url": "https://api.github.com/users/cool-RR/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-05-27T16:33:30Z", "updated_at": "2015-05-27T16:48:11Z", "closed_at": "2015-05-27T16:47:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "It looks like Waitress is limiting the size of file uploads allowed on the site. Any file upload bigger than the limit (which seems to be around a few kilobytes) fails with an HTTP 504 error.\n\nI looked for the setting for changing this but couldn't find it. Could someone help? Also this should probably be in the docs.\n", "performed_via_github_app": null, "score": 1.0}]}