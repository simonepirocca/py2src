{"total_count": 191, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/lmcinnes/umap/issues/483", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/483/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/483/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/483/events", "html_url": "https://github.com/lmcinnes/umap/issues/483", "id": 682816717, "node_id": "MDU6SXNzdWU2ODI4MTY3MTc=", "number": 483, "title": "Non-reproducibility of UMAP at larger data sizes", "user": {"login": "kevinthomasgo", "id": 17061495, "node_id": "MDQ6VXNlcjE3MDYxNDk1", "avatar_url": "https://avatars3.githubusercontent.com/u/17061495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevinthomasgo", "html_url": "https://github.com/kevinthomasgo", "followers_url": "https://api.github.com/users/kevinthomasgo/followers", "following_url": "https://api.github.com/users/kevinthomasgo/following{/other_user}", "gists_url": "https://api.github.com/users/kevinthomasgo/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevinthomasgo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevinthomasgo/subscriptions", "organizations_url": "https://api.github.com/users/kevinthomasgo/orgs", "repos_url": "https://api.github.com/users/kevinthomasgo/repos", "events_url": "https://api.github.com/users/kevinthomasgo/events{/privacy}", "received_events_url": "https://api.github.com/users/kevinthomasgo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-20T15:32:01Z", "updated_at": "2020-08-20T16:24:23Z", "closed_at": "2020-08-20T16:24:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nMy question is: Does UMAP become unstable at larger data sizes for particular datasets?\r\n\r\nI was running umap on [this dataset ](https://www.kaggle.com/roshansharma/online-shoppers-intention) on online shoppers.\r\n\r\nI noticed that when running UMAP's `fit_transform()` on the **full dataset (~12k rows)**, I get different values of embeddings per run.\r\n\r\nHowever, when I run `fit_transform()` on a **smaller sample of the dataset (~9k rows)**, UMAP produces stable embeddings.\r\n\r\nFinally, when I do it on a **larger simulated dataset (20k rows)**, UMAP still produces stable embeddings.\r\n\r\nPlease see [this collab notebook](https://colab.research.google.com/drive/1kI1nmwBXLRJ3SfcCvRzKeloxR9oPaB7M?usp=sharing) for code and output. (If you want to run it for the online shoppers data, you'll need to upload the zip file of the dataset, and either run the notebook in Playground Mode or save a copy on your drive). \r\n\r\nNot sure why this happens for this particular dataset. Hope someone can help me.\r\n\r\nThank you!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/482", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/482/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/482/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/482/events", "html_url": "https://github.com/lmcinnes/umap/issues/482", "id": 682430368, "node_id": "MDU6SXNzdWU2ODI0MzAzNjg=", "number": 482, "title": "Added squared term in gradient descent", "user": {"login": "kentslaney", "id": 12777122, "node_id": "MDQ6VXNlcjEyNzc3MTIy", "avatar_url": "https://avatars0.githubusercontent.com/u/12777122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kentslaney", "html_url": "https://github.com/kentslaney", "followers_url": "https://api.github.com/users/kentslaney/followers", "following_url": "https://api.github.com/users/kentslaney/following{/other_user}", "gists_url": "https://api.github.com/users/kentslaney/gists{/gist_id}", "starred_url": "https://api.github.com/users/kentslaney/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kentslaney/subscriptions", "organizations_url": "https://api.github.com/users/kentslaney/orgs", "repos_url": "https://api.github.com/users/kentslaney/repos", "events_url": "https://api.github.com/users/kentslaney/events{/privacy}", "received_events_url": "https://api.github.com/users/kentslaney/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-20T05:40:14Z", "updated_at": "2020-08-20T06:06:16Z", "closed_at": "2020-08-20T06:06:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the paper, algorithm 5 claims that negative samples should update the embeddings according to\r\n![Screenshot from 2020-08-19 22-24-12](https://user-images.githubusercontent.com/12777122/90720163-e6835980-e26a-11ea-8d8b-6fb5f5bc6a21.png)\r\nand\r\n![Screenshot from 2020-08-19 22-25-55](https://user-images.githubusercontent.com/12777122/90720184-f602a280-e26a-11ea-9d59-a550ff690c8c.png)\r\nbut the code does this\r\nhttps://github.com/lmcinnes/umap/blob/88ecc005dd42fdc07ab157dab6078c13994f1be2/umap/layouts.py#L115-L118\r\nShouldn't the first `dist_squared` term be square rooted? ([derivative in single dimensional case](https://www.wolframalpha.com/input/?i=D%5BLog%5B1+-+1+%2F+%281+%2B+a+*+%28x+-+y%29+%5E+%282+*+b%29%29%5D%2C+x%5D)). I think the only way you can keep the power of 2 is if you take the gradient with respect to distance squared, but then there shouldn't be the first 2 term. Here's a comparison of MNIST with and without the square root (respectively) with no other adjustments. I imagine you can get the cluster spread back by adjusting gamma.\r\n![Figure_1](https://user-images.githubusercontent.com/12777122/90720832-3dd5f980-e26c-11ea-87f5-e49ff8d1844d.png)\r\n![Figure_1](https://user-images.githubusercontent.com/12777122/90720893-65c55d00-e26c-11ea-92e0-f6022f43fa06.png)\r\nNot clear it's worth the extra computation time for the square root, but it seems at least worth noting, and I'm doing a re-implementation, so I want to make sure I'm not going crazy\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/459", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/459/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/459/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/459/events", "html_url": "https://github.com/lmcinnes/umap/issues/459", "id": 648136497, "node_id": "MDU6SXNzdWU2NDgxMzY0OTc=", "number": 459, "title": "TypeError: __init__() got an unexpected keyword argument 'low_memory'", "user": {"login": "lambdaofgod", "id": 3647577, "node_id": "MDQ6VXNlcjM2NDc1Nzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3647577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lambdaofgod", "html_url": "https://github.com/lambdaofgod", "followers_url": "https://api.github.com/users/lambdaofgod/followers", "following_url": "https://api.github.com/users/lambdaofgod/following{/other_user}", "gists_url": "https://api.github.com/users/lambdaofgod/gists{/gist_id}", "starred_url": "https://api.github.com/users/lambdaofgod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lambdaofgod/subscriptions", "organizations_url": "https://api.github.com/users/lambdaofgod/orgs", "repos_url": "https://api.github.com/users/lambdaofgod/repos", "events_url": "https://api.github.com/users/lambdaofgod/events{/privacy}", "received_events_url": "https://api.github.com/users/lambdaofgod/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-30T12:35:22Z", "updated_at": "2020-07-05T11:12:39Z", "closed_at": "2020-07-05T11:12:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I try to run UMAP with not-so-small data I get this error:\r\n```\r\n\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-97-b4c13803aec0> in <module>\r\n----> 1 job_name2d_embeddings = umap_reducer.fit_transform(np.random.randn(100000, 100))\r\n\r\n/etc/conda/envs/ml/lib/python3.7/site-packages/umap/umap_.py in fit_transform(self, X, y)\r\n   1958             Embedding of the training data in low-dimensional space.\r\n   1959         \"\"\"\r\n-> 1960         self.fit(X, y)\r\n   1961         return self.embedding_\r\n   1962 \r\n\r\n/etc/conda/envs/ml/lib/python3.7/site-packages/umap/umap_.py in fit(self, X, y)\r\n   1747                 self.low_memory,\r\n   1748                 use_pynndescent=True,\r\n-> 1749                 verbose=self.verbose,\r\n   1750             )\r\n   1751 \r\n\r\n/etc/conda/envs/ml/lib/python3.7/site-packages/umap/umap_.py in nearest_neighbors(X, n_neighbors, metric, metric_kwds, angular, random_state, low_memory, use_pynndescent, verbose)\r\n    297                 max_candidates=60,\r\n    298                 low_memory=low_memory,\r\n--> 299                 verbose=verbose,\r\n    300             )\r\n    301             knn_indices, knn_dists = nnd.neighbor_graph\r\n\r\nTypeError: __init__() got an unexpected keyword argument 'low_memory'\r\n```\r\n\r\nCode to reproduce this behavior:\r\n\r\n```\r\nimport umap\r\numap_reducer = umap.UMAP(metric='euclidean')\r\nX = np.random.randn(100000, 100)\r\njob_name2d_embeddings = umap_reducer.fit_transform(X)\r\n```\r\n\r\nI tried this with different versions 0.4, 0.4.2, and 0.4.4\r\n\r\nWhen I run it with `X = np.random.randn(100, 100)` it doesn't give this error.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/455", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/455/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/455/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/455/events", "html_url": "https://github.com/lmcinnes/umap/issues/455", "id": 646368281, "node_id": "MDU6SXNzdWU2NDYzNjgyODE=", "number": 455, "title": "TypingError: Invalid usage of Function(<function argsort at 0x11039a400>)", "user": {"login": "jafetgado", "id": 47676589, "node_id": "MDQ6VXNlcjQ3Njc2NTg5", "avatar_url": "https://avatars2.githubusercontent.com/u/47676589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jafetgado", "html_url": "https://github.com/jafetgado", "followers_url": "https://api.github.com/users/jafetgado/followers", "following_url": "https://api.github.com/users/jafetgado/following{/other_user}", "gists_url": "https://api.github.com/users/jafetgado/gists{/gist_id}", "starred_url": "https://api.github.com/users/jafetgado/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jafetgado/subscriptions", "organizations_url": "https://api.github.com/users/jafetgado/orgs", "repos_url": "https://api.github.com/users/jafetgado/repos", "events_url": "https://api.github.com/users/jafetgado/events{/privacy}", "received_events_url": "https://api.github.com/users/jafetgado/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-26T16:15:14Z", "updated_at": "2020-06-26T18:21:21Z", "closed_at": "2020-06-26T18:21:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to implement a quick dimensionality reduction with umap. \r\nI am using the latest version of umap from github, but I commented out the `tbb` line in the `requirements.txt` file before installing it.\r\n\r\nHere is my code:\r\n\r\n```python\r\nimport umap\r\n\r\nprint(data.shape)   # (1748, 1900)\r\numap_instance = umap.UMAP()\r\nembedding = umap_instance.fit_transform(data)\r\n```\r\n\r\nI get the following error:\r\n```\r\n File \"<ipython-input-20-6c4d339edab8>\", line 1, in <module>\r\n    embedding = umap_instance.fit_transform(a)\r\n\r\n  File \"/Users/japhethgado/Dropbox/research/projects/phylogeny_gh7/venv/lib/python3.6/site-packages/umap_learn-0.4.4-py3.6.egg/umap/umap_.py\", line 2012, in fit_transform\r\n    self.fit(X, y)\r\n\r\n  File \"/Users/japhethgado/Dropbox/research/projects/phylogeny_gh7/venv/lib/python3.6/site-packages/umap_learn-0.4.4-py3.6.egg/umap/umap_.py\", line 1777, in fit\r\n    self.verbose,\r\n\r\n  File \"/Users/japhethgado/Dropbox/research/projects/phylogeny_gh7/venv/lib/python3.6/site-packages/umap_learn-0.4.4-py3.6.egg/umap/umap_.py\", line 597, in fuzzy_simplicial_set\r\n    X, n_neighbors, metric, metric_kwds, angular, random_state, verbose=verbose\r\n\r\n  File \"/Users/japhethgado/Dropbox/research/projects/phylogeny_gh7/venv/lib/python3.6/site-packages/umap_learn-0.4.4-py3.6.egg/umap/umap_.py\", line 277, in nearest_neighbors\r\n    knn_indices = fast_knn_indices(X, n_neighbors)\r\n\r\n  File \"/anaconda3/lib/python3.6/site-packages/numba/dispatcher.py\", line 344, in _compile_for_args\r\n    reraise(type(e), e, None)\r\n\r\n  File \"/anaconda3/lib/python3.6/site-packages/numba/six.py\", line 658, in reraise\r\n    raise value.with_traceback(tb)\r\n\r\nTypingError: Invalid usage of Function(<function argsort at 0x11039a400>) with parameters (array(float64, 1d, C), const('quicksort'))\r\n * parameterized\r\nIn definition 0:\r\n    AssertionError: \r\n    raised from /anaconda3/lib/python3.6/site-packages/numba/typing/arraydecl.py:415\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/452", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/452/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/452/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/452/events", "html_url": "https://github.com/lmcinnes/umap/issues/452", "id": 643191668, "node_id": "MDU6SXNzdWU2NDMxOTE2Njg=", "number": 452, "title": "TypeError when fitting on >= 4096 samples", "user": {"login": "cupidio", "id": 22659973, "node_id": "MDQ6VXNlcjIyNjU5OTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/22659973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cupidio", "html_url": "https://github.com/cupidio", "followers_url": "https://api.github.com/users/cupidio/followers", "following_url": "https://api.github.com/users/cupidio/following{/other_user}", "gists_url": "https://api.github.com/users/cupidio/gists{/gist_id}", "starred_url": "https://api.github.com/users/cupidio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cupidio/subscriptions", "organizations_url": "https://api.github.com/users/cupidio/orgs", "repos_url": "https://api.github.com/users/cupidio/repos", "events_url": "https://api.github.com/users/cupidio/events{/privacy}", "received_events_url": "https://api.github.com/users/cupidio/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-22T16:02:14Z", "updated_at": "2020-08-12T21:56:23Z", "closed_at": "2020-06-26T16:40:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I systematically get a TypeError when I run the fit() method on a dataset that is >=4096 samples. E.g.:\r\n\r\n```\r\nreducer = umap.UMAP() \r\nnp.random.seed(0)\r\nreducer.fit(np.random.rand(4096,16))\r\n```\r\n\r\nproduces the error, while\r\n\r\n```\r\nreducer = umap.UMAP() \r\nnp.random.seed(0)\r\nreducer.fit(np.random.rand(4095,16))\r\n```\r\n\r\nruns fine.\r\n\r\nI have installed umap with:\r\n\r\npip3 install umap-learn[plot] \r\n\r\nThis is the traceback of the error:\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-98-8feab5de4b07> in <module>\r\n      1 reducer = umap.UMAP(random_state=41,init='random', force_approximation_algorithm=True)\r\n----> 2 reducer.fit(np.random.rand(4096,16))\r\n\r\n~/anaconda2/envs/ecpackage3/lib/python3.8/site-packages/umap/umap_.py in fit(self, X, y)\r\n   1831                 self._search_graph.data = _data\r\n   1832                 self._search_graph = self._search_graph.maximum(\r\n-> 1833                     self._search_graph.transpose()\r\n   1834                 ).tocsr()\r\n   1835 \r\n\r\n~/anaconda2/envs/ecpackage3/lib/python3.8/site-packages/scipy/sparse/lil.py in transpose(self, axes, copy)\r\n    435 \r\n    436     def transpose(self, axes=None, copy=False):\r\n--> 437         return self.tocsr(copy=copy).transpose(axes=axes, copy=False).tolil(copy=False)\r\n    438 \r\n    439     transpose.__doc__ = spmatrix.transpose.__doc__\r\n\r\n~/anaconda2/envs/ecpackage3/lib/python3.8/site-packages/scipy/sparse/lil.py in tocsr(self, copy)\r\n    460             indptr = np.empty(M + 1, dtype=idx_dtype)\r\n    461             indptr[0] = 0\r\n--> 462             _csparsetools.lil_get_lengths(self.rows, indptr[1:])\r\n    463             np.cumsum(indptr, out=indptr)\r\n    464             nnz = indptr[-1]\r\n\r\n_csparsetools.pyx in scipy.sparse._csparsetools.lil_get_lengths()\r\n\r\n~/anaconda2/envs/ecpackage3/lib/python3.8/site-packages/scipy/sparse/_csparsetools.cpython-38-darwin.so in View.MemoryView.memoryview_cwrapper()\r\n\r\n~/anaconda2/envs/ecpackage3/lib/python3.8/site-packages/scipy/sparse/_csparsetools.cpython-38-darwin.so in View.MemoryView.memoryview.__cinit__()\r\n\r\nTypeError: a bytes-like object is required, not 'list'", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/449", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/449/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/449/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/449/events", "html_url": "https://github.com/lmcinnes/umap/issues/449", "id": 640635519, "node_id": "MDU6SXNzdWU2NDA2MzU1MTk=", "number": 449, "title": "Does UMAP accept a probability matrix as input?", "user": {"login": "wilsonjr", "id": 4931816, "node_id": "MDQ6VXNlcjQ5MzE4MTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/4931816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wilsonjr", "html_url": "https://github.com/wilsonjr", "followers_url": "https://api.github.com/users/wilsonjr/followers", "following_url": "https://api.github.com/users/wilsonjr/following{/other_user}", "gists_url": "https://api.github.com/users/wilsonjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/wilsonjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wilsonjr/subscriptions", "organizations_url": "https://api.github.com/users/wilsonjr/orgs", "repos_url": "https://api.github.com/users/wilsonjr/repos", "events_url": "https://api.github.com/users/wilsonjr/events{/privacy}", "received_events_url": "https://api.github.com/users/wilsonjr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-17T17:57:13Z", "updated_at": "2020-06-17T19:04:32Z", "closed_at": "2020-06-17T19:04:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thank you!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/446", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/446/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/446/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/446/events", "html_url": "https://github.com/lmcinnes/umap/issues/446", "id": 638954392, "node_id": "MDU6SXNzdWU2Mzg5NTQzOTI=", "number": 446, "title": "Replace Iris references with Penguins in docs", "user": {"login": "gibsramen", "id": 4030868, "node_id": "MDQ6VXNlcjQwMzA4Njg=", "avatar_url": "https://avatars3.githubusercontent.com/u/4030868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gibsramen", "html_url": "https://github.com/gibsramen", "followers_url": "https://api.github.com/users/gibsramen/followers", "following_url": "https://api.github.com/users/gibsramen/following{/other_user}", "gists_url": "https://api.github.com/users/gibsramen/gists{/gist_id}", "starred_url": "https://api.github.com/users/gibsramen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gibsramen/subscriptions", "organizations_url": "https://api.github.com/users/gibsramen/orgs", "repos_url": "https://api.github.com/users/gibsramen/repos", "events_url": "https://api.github.com/users/gibsramen/events{/privacy}", "received_events_url": "https://api.github.com/users/gibsramen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-15T15:43:31Z", "updated_at": "2020-06-16T00:32:36Z", "closed_at": "2020-06-16T00:32:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The `basic_usage.rst` documentation still has some references to the Iris dataset that should be updated to the penguins dataset.\r\n\r\nhttps://github.com/lmcinnes/umap/blame/master/doc/basic_usage.rst#L436\r\nhttps://github.com/lmcinnes/umap/blame/master/doc/basic_usage.rst#L391\r\n\r\nCan submit a PR later today.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/441", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/441/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/441/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/441/events", "html_url": "https://github.com/lmcinnes/umap/issues/441", "id": 635828875, "node_id": "MDU6SXNzdWU2MzU4Mjg4NzU=", "number": 441, "title": "TypeError: __init__() got an unexpected keyword argument 'low_memory'", "user": {"login": "youssefavx", "id": 56129524, "node_id": "MDQ6VXNlcjU2MTI5NTI0", "avatar_url": "https://avatars0.githubusercontent.com/u/56129524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/youssefavx", "html_url": "https://github.com/youssefavx", "followers_url": "https://api.github.com/users/youssefavx/followers", "following_url": "https://api.github.com/users/youssefavx/following{/other_user}", "gists_url": "https://api.github.com/users/youssefavx/gists{/gist_id}", "starred_url": "https://api.github.com/users/youssefavx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/youssefavx/subscriptions", "organizations_url": "https://api.github.com/users/youssefavx/orgs", "repos_url": "https://api.github.com/users/youssefavx/repos", "events_url": "https://api.github.com/users/youssefavx/events{/privacy}", "received_events_url": "https://api.github.com/users/youssefavx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-06-09T23:52:41Z", "updated_at": "2020-06-14T21:12:27Z", "closed_at": "2020-06-11T03:41:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to use UMAP on 100K sentence embeddings. My mac only has 16 GB of RAM though, I'm not sure if this is possible. Each embedding has 1024 dimensions.\r\n\r\nWhen I sample only 4000 embeddings, it works. However, when I do this (only sampling 4200): \r\n\r\n\r\n```\r\nmapper = umap.UMAP(metric='cosine',low_memory=True).fit(embeddings[:4200])\r\numap.plot.points(mapper)\r\n```\r\n\r\nI get this error: \r\n\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-35-8b2634db72c6> in <module>\r\n----> 1 mapper = umap.UMAP(metric='cosine',low_memory=True).fit(embeddings[:4200])\r\n      2 umap.plot.points(mapper)\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/umap/umap_.py in fit(self, X, y)\r\n   1799                 self.low_memory,\r\n   1800                 use_pynndescent=True,\r\n-> 1801                 verbose=self.verbose,\r\n   1802             )\r\n   1803 \r\n\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/umap/umap_.py in nearest_neighbors(X, n_neighbors, metric, metric_kwds, angular, random_state, low_memory, use_pynndescent, verbose)\r\n    298                 max_candidates=60,\r\n    299                 low_memory=low_memory,\r\n--> 300                 verbose=verbose,\r\n    301             )\r\n    302             knn_indices, knn_dists = nnd.neighbor_graph\r\n\r\nTypeError: __init__() got an unexpected keyword argument 'low_memory'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/436", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/436/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/436/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/436/events", "html_url": "https://github.com/lmcinnes/umap/issues/436", "id": 623425476, "node_id": "MDU6SXNzdWU2MjM0MjU0NzY=", "number": 436, "title": "Bug in sparse_named_distances iteration", "user": {"login": "festeh", "id": 6877858, "node_id": "MDQ6VXNlcjY4Nzc4NTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/6877858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/festeh", "html_url": "https://github.com/festeh", "followers_url": "https://api.github.com/users/festeh/followers", "following_url": "https://api.github.com/users/festeh/following{/other_user}", "gists_url": "https://api.github.com/users/festeh/gists{/gist_id}", "starred_url": "https://api.github.com/users/festeh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/festeh/subscriptions", "organizations_url": "https://api.github.com/users/festeh/orgs", "repos_url": "https://api.github.com/users/festeh/repos", "events_url": "https://api.github.com/users/festeh/events{/privacy}", "received_events_url": "https://api.github.com/users/festeh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-05-22T19:04:24Z", "updated_at": "2020-05-22T20:16:15Z", "closed_at": "2020-05-22T20:16:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See [here](https://github.com/lmcinnes/umap/blob/b2b6b3085e865273198fd3b0b41fef40d33d2e0e/umap/spectral.py#L107)\r\nAs we're iterating over a `dict` key-value pairs, `items` method should be called.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/430", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/430/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/430/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/430/events", "html_url": "https://github.com/lmcinnes/umap/issues/430", "id": 621085668, "node_id": "MDU6SXNzdWU2MjEwODU2Njg=", "number": 430, "title": "Kernel keeps restarting with umap 0.4.3", "user": {"login": "AlexMRuch", "id": 22121273, "node_id": "MDQ6VXNlcjIyMTIxMjcz", "avatar_url": "https://avatars1.githubusercontent.com/u/22121273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexMRuch", "html_url": "https://github.com/AlexMRuch", "followers_url": "https://api.github.com/users/AlexMRuch/followers", "following_url": "https://api.github.com/users/AlexMRuch/following{/other_user}", "gists_url": "https://api.github.com/users/AlexMRuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexMRuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexMRuch/subscriptions", "organizations_url": "https://api.github.com/users/AlexMRuch/orgs", "repos_url": "https://api.github.com/users/AlexMRuch/repos", "events_url": "https://api.github.com/users/AlexMRuch/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexMRuch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-19T15:43:14Z", "updated_at": "2020-05-19T17:18:42Z", "closed_at": "2020-05-19T17:18:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "UMAP keeps restarting my kernel with umap version 0.4.3 even in a fresh notebook :-(\r\n\r\n*MAKE NEW ENV ON LINUX UBUNTU 16*\r\n```\r\namruch@wit:~/graphika/kg$ conda create --name umap python=3.6 ipykernel seaborn pandas hdbscan umap-learn\r\nCollecting package metadata (repodata.json): done\r\nSolving environment: done\r\n\r\n## Package Plan ##\r\n\r\n  environment location: /home/amruch/anaconda3/envs/umap\r\n\r\n  added / updated specs:\r\n    - hdbscan\r\n    - ipykernel\r\n    - pandas\r\n    - python=3.6\r\n    - seaborn\r\n    - umap-learn\r\n\r\n\r\nThe following packages will be downloaded:\r\n\r\n    package                    |            build\r\n    ---------------------------|-----------------\r\n    decorator-4.4.2            |             py_0          11 KB  conda-forge\r\n    entrypoints-0.3            |py36h9f0ad1d_1001          12 KB  conda-forge\r\n    freetype-2.10.2            |       he06d7ca_0         905 KB  conda-forge\r\n    hdbscan-0.8.26             |   py36h785e9b2_1         645 KB  conda-forge\r\n    ipykernel-5.2.1            |   py36h95af2a2_0         162 KB  conda-forge\r\n    ipython-7.14.0             |   py36h9f0ad1d_0         1.1 MB  conda-forge\r\n    jedi-0.17.0                |   py36h9f0ad1d_0         806 KB  conda-forge\r\n    joblib-0.15.1              |             py_0         202 KB  conda-forge\r\n    jupyter_client-6.1.3       |             py_0          74 KB  conda-forge\r\n    jupyter_core-4.6.3         |   py36h9f0ad1d_1          71 KB  conda-forge\r\n    kiwisolver-1.2.0           |   py36hdb11119_0          87 KB  conda-forge\r\n    libgfortran-ng-7.5.0       |       hdf63c60_6         1.7 MB  conda-forge\r\n    llvmlite-0.31.0            |   py36hfa65bc7_1         325 KB  conda-forge\r\n    matplotlib-base-3.2.1      |   py36hb8e4980_0         7.1 MB  conda-forge\r\n    numba-0.48.0               |   py36hb3f55d8_0         3.4 MB  conda-forge\r\n    numpy-1.18.4               |   py36h7314795_0         5.2 MB  conda-forge\r\n    pandas-1.0.3               |   py36h830a2c2_1        11.1 MB  conda-forge\r\n    pexpect-4.8.0              |   py36h9f0ad1d_1          79 KB  conda-forge\r\n    pickleshare-0.7.5          |py36h9f0ad1d_1001          13 KB  conda-forge\r\n    pip-20.1                   |     pyh9f0ad1d_0         1.1 MB  conda-forge\r\n    pygments-2.6.1             |             py_0         683 KB  conda-forge\r\n    python-3.6.10              |h8356626_1011_cpython        34.1 MB  conda-forge\r\n    python-dateutil-2.8.1      |             py_0         220 KB  conda-forge\r\n    pytz-2020.1                |     pyh9f0ad1d_0         227 KB  conda-forge\r\n    pyzmq-19.0.1               |   py36h9947dbf_0         491 KB  conda-forge\r\n    scikit-learn-0.23.0        |   py36h0e1014b_0         7.4 MB  conda-forge\r\n    scipy-1.4.1                |   py36h2d22cac_3        18.9 MB  conda-forge\r\n    seaborn-0.10.1             |             py_0         158 KB  conda-forge\r\n    setuptools-46.4.0          |   py36h9f0ad1d_0         636 KB  conda-forge\r\n    statsmodels-0.11.1         |   py36h8c4c3a4_1        10.3 MB  conda-forge\r\n    threadpoolctl-2.0.0        |     pyh5ca1d4c_0          14 KB  conda-forge\r\n    tornado-6.0.4              |   py36h8c4c3a4_1         639 KB  conda-forge\r\n    traitlets-4.3.3            |   py36h9f0ad1d_1         133 KB  conda-forge\r\n    umap-learn-0.4.3           |   py36h9f0ad1d_0         108 KB  conda-forge\r\n    ------------------------------------------------------------\r\n                                           Total:       107.9 MB\r\n\r\nThe following NEW packages will be INSTALLED:\r\n\r\n  _libgcc_mutex      conda-forge/linux-64::_libgcc_mutex-0.1-conda_forge\r\n  _openmp_mutex      conda-forge/linux-64::_openmp_mutex-4.5-1_llvm\r\n  backcall           conda-forge/noarch::backcall-0.1.0-py_0\r\n  ca-certificates    conda-forge/linux-64::ca-certificates-2020.4.5.1-hecc5488_0\r\n  certifi            conda-forge/linux-64::certifi-2020.4.5.1-py36h9f0ad1d_0\r\n  cycler             conda-forge/noarch::cycler-0.10.0-py_2\r\n  decorator          conda-forge/noarch::decorator-4.4.2-py_0\r\n  entrypoints        conda-forge/linux-64::entrypoints-0.3-py36h9f0ad1d_1001\r\n  freetype           conda-forge/linux-64::freetype-2.10.2-he06d7ca_0\r\n  hdbscan            conda-forge/linux-64::hdbscan-0.8.26-py36h785e9b2_1\r\n  icu                conda-forge/linux-64::icu-64.2-he1b5a44_1\r\n  ipykernel          conda-forge/linux-64::ipykernel-5.2.1-py36h95af2a2_0\r\n  ipython            conda-forge/linux-64::ipython-7.14.0-py36h9f0ad1d_0\r\n  ipython_genutils   conda-forge/noarch::ipython_genutils-0.2.0-py_1\r\n  jedi               conda-forge/linux-64::jedi-0.17.0-py36h9f0ad1d_0\r\n  joblib             conda-forge/noarch::joblib-0.15.1-py_0\r\n  jupyter_client     conda-forge/noarch::jupyter_client-6.1.3-py_0\r\n  jupyter_core       conda-forge/linux-64::jupyter_core-4.6.3-py36h9f0ad1d_1\r\n  kiwisolver         conda-forge/linux-64::kiwisolver-1.2.0-py36hdb11119_0\r\n  ld_impl_linux-64   conda-forge/linux-64::ld_impl_linux-64-2.34-h53a641e_0\r\n  libblas            conda-forge/linux-64::libblas-3.8.0-16_openblas\r\n  libcblas           conda-forge/linux-64::libcblas-3.8.0-16_openblas\r\n  libffi             conda-forge/linux-64::libffi-3.2.1-he1b5a44_1007\r\n  libgcc-ng          conda-forge/linux-64::libgcc-ng-9.2.0-h24d8f2e_2\r\n  libgfortran-ng     conda-forge/linux-64::libgfortran-ng-7.5.0-hdf63c60_6\r\n  liblapack          conda-forge/linux-64::liblapack-3.8.0-16_openblas\r\n  libllvm8           conda-forge/linux-64::libllvm8-8.0.1-hc9558a2_0\r\n  libopenblas        conda-forge/linux-64::libopenblas-0.3.9-h5ec1e0e_0\r\n  libpng             conda-forge/linux-64::libpng-1.6.37-hed695b0_1\r\n  libsodium          conda-forge/linux-64::libsodium-1.0.17-h516909a_0\r\n  libstdcxx-ng       conda-forge/linux-64::libstdcxx-ng-9.2.0-hdf63c60_2\r\n  llvm-openmp        conda-forge/linux-64::llvm-openmp-10.0.0-hc9558a2_0\r\n  llvmlite           conda-forge/linux-64::llvmlite-0.31.0-py36hfa65bc7_1\r\n  matplotlib-base    conda-forge/linux-64::matplotlib-base-3.2.1-py36hb8e4980_0\r\n  ncurses            conda-forge/linux-64::ncurses-6.1-hf484d3e_1002\r\n  numba              conda-forge/linux-64::numba-0.48.0-py36hb3f55d8_0\r\n  numpy              conda-forge/linux-64::numpy-1.18.4-py36h7314795_0\r\n  openssl            conda-forge/linux-64::openssl-1.1.1g-h516909a_0\r\n  pandas             conda-forge/linux-64::pandas-1.0.3-py36h830a2c2_1\r\n  parso              conda-forge/noarch::parso-0.7.0-pyh9f0ad1d_0\r\n  patsy              conda-forge/noarch::patsy-0.5.1-py_0\r\n  pexpect            conda-forge/linux-64::pexpect-4.8.0-py36h9f0ad1d_1\r\n  pickleshare        conda-forge/linux-64::pickleshare-0.7.5-py36h9f0ad1d_1001\r\n  pip                conda-forge/noarch::pip-20.1-pyh9f0ad1d_0\r\n  prompt-toolkit     conda-forge/noarch::prompt-toolkit-3.0.5-py_0\r\n  ptyprocess         conda-forge/noarch::ptyprocess-0.6.0-py_1001\r\n  pygments           conda-forge/noarch::pygments-2.6.1-py_0\r\n  pyparsing          conda-forge/noarch::pyparsing-2.4.7-pyh9f0ad1d_0\r\n  python             conda-forge/linux-64::python-3.6.10-h8356626_1011_cpython\r\n  python-dateutil    conda-forge/noarch::python-dateutil-2.8.1-py_0\r\n  python_abi         conda-forge/linux-64::python_abi-3.6-1_cp36m\r\n  pytz               conda-forge/noarch::pytz-2020.1-pyh9f0ad1d_0\r\n  pyzmq              conda-forge/linux-64::pyzmq-19.0.1-py36h9947dbf_0\r\n  readline           conda-forge/linux-64::readline-8.0-hf8c457e_0\r\n  scikit-learn       conda-forge/linux-64::scikit-learn-0.23.0-py36h0e1014b_0\r\n  scipy              conda-forge/linux-64::scipy-1.4.1-py36h2d22cac_3\r\n  seaborn            conda-forge/noarch::seaborn-0.10.1-py_0\r\n  setuptools         conda-forge/linux-64::setuptools-46.4.0-py36h9f0ad1d_0\r\n  six                conda-forge/noarch::six-1.14.0-py_1\r\n  sqlite             conda-forge/linux-64::sqlite-3.30.1-hcee41ef_0\r\n  statsmodels        conda-forge/linux-64::statsmodels-0.11.1-py36h8c4c3a4_1\r\n  tbb                conda-forge/linux-64::tbb-2020.1-hc9558a2_0\r\n  threadpoolctl      conda-forge/noarch::threadpoolctl-2.0.0-pyh5ca1d4c_0\r\n  tk                 conda-forge/linux-64::tk-8.6.10-hed695b0_0\r\n  tornado            conda-forge/linux-64::tornado-6.0.4-py36h8c4c3a4_1\r\n  traitlets          conda-forge/linux-64::traitlets-4.3.3-py36h9f0ad1d_1\r\n  umap-learn         conda-forge/linux-64::umap-learn-0.4.3-py36h9f0ad1d_0\r\n  wcwidth            conda-forge/noarch::wcwidth-0.1.9-pyh9f0ad1d_0\r\n  wheel              conda-forge/noarch::wheel-0.34.2-py_1\r\n  xz                 conda-forge/linux-64::xz-5.2.5-h516909a_0\r\n  zeromq             conda-forge/linux-64::zeromq-4.3.2-he1b5a44_2\r\n  zlib               conda-forge/linux-64::zlib-1.2.11-h516909a_1006\r\n\r\n\r\nProceed ([y]/n)? y\r\n\r\n\r\nDownloading and Extracting Packages\r\nentrypoints-0.3      | 12 KB     | ###################################################################################################################### | 100%\r\nstatsmodels-0.11.1   | 10.3 MB   | ###################################################################################################################### | 100%\r\nsetuptools-46.4.0    | 636 KB    | ###################################################################################################################### | 100%\r\npygments-2.6.1       | 683 KB    | ###################################################################################################################### | 100%\r\npython-dateutil-2.8. | 220 KB    | ###################################################################################################################### | 100%\r\nhdbscan-0.8.26       | 645 KB    | ###################################################################################################################### | 100%\r\nipykernel-5.2.1      | 162 KB    | ###################################################################################################################### | 100%\r\ntraitlets-4.3.3      | 133 KB    | ###################################################################################################################### | 100%\r\ndecorator-4.4.2      | 11 KB     | ###################################################################################################################### | 100%\r\nlibgfortran-ng-7.5.0 | 1.7 MB    | ###################################################################################################################### | 100%\r\nthreadpoolctl-2.0.0  | 14 KB     | ###################################################################################################################### | 100%\r\nllvmlite-0.31.0      | 325 KB    | ###################################################################################################################### | 100%\r\npexpect-4.8.0        | 79 KB     | ###################################################################################################################### | 100%\r\njupyter_core-4.6.3   | 71 KB     | ###################################################################################################################### | 100%\r\npyzmq-19.0.1         | 491 KB    | ###################################################################################################################### | 100%\r\njoblib-0.15.1        | 202 KB    | ###################################################################################################################### | 100%\r\nscikit-learn-0.23.0  | 7.4 MB    | ###################################################################################################################### | 100%\r\nscipy-1.4.1          | 18.9 MB   | ###################################################################################################################### | 100%\r\nnumpy-1.18.4         | 5.2 MB    | ###################################################################################################################### | 100%\r\ntornado-6.0.4        | 639 KB    | ###################################################################################################################### | 100%\r\npandas-1.0.3         | 11.1 MB   | ###################################################################################################################### | 100%\r\nmatplotlib-base-3.2. | 7.1 MB    | ###################################################################################################################### | 100%\r\nseaborn-0.10.1       | 158 KB    | ###################################################################################################################### | 100%\r\nipython-7.14.0       | 1.1 MB    | ###################################################################################################################### | 100%\r\npython-3.6.10        | 34.1 MB   | ###################################################################################################################### | 100%\r\npytz-2020.1          | 227 KB    | ###################################################################################################################### | 100%\r\nkiwisolver-1.2.0     | 87 KB     | ###################################################################################################################### | 100%\r\nnumba-0.48.0         | 3.4 MB    | ###################################################################################################################### | 100%\r\numap-learn-0.4.3     | 108 KB    | ###################################################################################################################### | 100%\r\nfreetype-2.10.2      | 905 KB    | ###################################################################################################################### | 100%\r\npickleshare-0.7.5    | 13 KB     | ###################################################################################################################### | 100%\r\npip-20.1             | 1.1 MB    | ###################################################################################################################### | 100%\r\njedi-0.17.0          | 806 KB    | ###################################################################################################################### | 100%\r\njupyter_client-6.1.3 | 74 KB     | ###################################################################################################################### | 100%\r\nPreparing transaction: done\r\nVerifying transaction: done\r\nExecuting transaction: done\r\n#\r\n# To activate this environment, use\r\n#\r\n#     $ conda activate umap\r\n#\r\n# To deactivate an active environment, use\r\n#\r\n#     $ conda deactivate\r\n\r\namruch@wit:~/graphika/kg$ conda activate dgl\r\n(dgl) amruch@wit:~/graphika/kg$ conda list | grep \"umap\"\r\numap-learn                0.4.3            py38h32f6830_0    conda-forge\r\n```\r\n\r\n*SCRIPT TO RUN UMAP*\r\n```\r\n# Import general dependencies\r\nimport sys\r\nimport os\r\nimport numpy as np\r\nimport pandas as pd\r\nfrom collections import Counter\r\nimport umap\r\nimport hdbscan\r\nimport matplotlib.pyplot as plt\r\nfrom mpl_toolkits.mplot3d import Axes3D\r\nimport seaborn as sns\r\nfrom datetime import datetime\r\nfrom time import time\r\nimport pickle\r\n\r\n# Set path to knowledge graph data\r\nnetwork_name = \"SXSW_2018\"\r\nsource_path = \"/home/amruch/graphika/kg/ckpts/SXSW2018_ComplEx_20200516/\"\r\nentity_embeddings_path = source_path+\"SXSW2018_ComplEx_entity.npy\"\r\nrelation_embeddings_path = source_path+\"SXSW2018_ComplEx_relation.npy\"\r\nprint(f\"Analyzing entity and relation embeddings for {network_name} from {source_path}\")\r\n\r\n# Load knowledge graph data\r\nprint(\"Loading entity embedding data...\")\r\nentity_embeddings = np.load(entity_embeddings_path)\r\nprint(\"  Entity embeddings shape:\", entity_embeddings.shape)\r\nprint(\"Loading relation embedding data...\")\r\nrelation_embeddings = np.load(relation_embeddings_path)\r\nprint(\"  Relation embeddings shape:\", relation_embeddings.shape)\r\n\r\n# Run UMAP dimension reduction on entity embeddings to go from 512-D to 10-D\r\nprint(f\"Reducing embeddings from {entity_embeddings.shape} to ({entity_embeddings.shape[0]}, 10)...\")\r\nentity_embeddings = umap.UMAP(\r\n    n_components=10,\r\n    n_neighbors=50,\r\n    min_dist=0.0,\r\n    metric='cosine',\r\n    angular_rp_forest=True,\r\n    random_state=407,\r\n    verbose=True\r\n).fit_transform(entity_embeddings)\r\nprint(f\"Reduced embeddings to {entity_embeddings.shape}\")\r\n```\r\n\r\nSpecifically, the notebook dies at the following umap output point:\r\n```\r\nReducing embeddings from (368345, 512) to (368345, 10)...\r\nUMAP(angular_rp_forest=True, metric='cosine', min_dist=0.0, n_components=10,\r\n     n_neighbors=50, random_state=407, verbose=True)\r\nConstruct fuzzy simplicial set\r\nTue May 19 11:29:53 2020 Finding Nearest Neighbors\r\nTue May 19 11:29:53 2020 Building RP forest with 35 trees\r\nTue May 19 11:30:50 2020 NN descent for 18 iterations\r\n```\r\nWith my Jupyter Lab log reporting\r\n```\r\n[I 11:36:45.278 LabApp] KernelRestarter: restarting kernel (1/5), keep random ports\r\nkernel 6e902dcb-337a-49c6-b867-6a8d6065630b restarted\r\n```\r\n\r\nI'll try reverting to umap version 0.4.2 to see if that helps.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/426", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/426/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/426/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/426/events", "html_url": "https://github.com/lmcinnes/umap/issues/426", "id": 617191479, "node_id": "MDU6SXNzdWU2MTcxOTE0Nzk=", "number": 426, "title": "Segmentation fault", "user": {"login": "MichaelMonashev", "id": 6323434, "node_id": "MDQ6VXNlcjYzMjM0MzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/6323434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaelMonashev", "html_url": "https://github.com/MichaelMonashev", "followers_url": "https://api.github.com/users/MichaelMonashev/followers", "following_url": "https://api.github.com/users/MichaelMonashev/following{/other_user}", "gists_url": "https://api.github.com/users/MichaelMonashev/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaelMonashev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaelMonashev/subscriptions", "organizations_url": "https://api.github.com/users/MichaelMonashev/orgs", "repos_url": "https://api.github.com/users/MichaelMonashev/repos", "events_url": "https://api.github.com/users/MichaelMonashev/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaelMonashev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-13T06:52:24Z", "updated_at": "2020-05-14T07:36:07Z", "closed_at": "2020-05-14T07:36:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "umap-learn 0.4.2\r\n\r\nCode:\r\n```\r\n        embedding = umap.UMAP(\r\n            n_neighbors=80,\r\n            min_dist=0.0,\r\n            n_components=30,\r\n            verbose=True,\r\n        ).fit_transform(predicts)\r\n```\r\n`predicts` has shape (314496, 2048).\r\n\r\nError:\r\n```\r\n/home/xxx/.local/lib/python3.6/site-packages/sklearn/externals/joblib/__init__.py:15: FutureWarning: sklearn.externals.joblib is deprecated in 0.21 and will be removed in 0.23. Please import this functionality directly from joblib, which can be installed with: pip install joblib. If this warning is raised when loading pickled models, you may need to re-serialize those models with scikit-learn 0.21+.\r\n  warnings.warn(msg, category=FutureWarning)\r\nstart UMAP...\r\nUMAP(a=None, angular_rp_forest=False, b=None,\r\n     force_approximation_algorithm=False, init='spectral', learning_rate=1.0,\r\n     local_connectivity=1.0, low_memory=False, metric='euclidean',\r\n     metric_kwds=None, min_dist=0.0, n_components=30, n_epochs=None,\r\n     n_neighbors=80, negative_sample_rate=5, output_metric='euclidean',\r\n     output_metric_kwds=None, random_state=None, repulsion_strength=1.0,\r\n     set_op_mix_ratio=1.0, spread=1.0, target_metric='categorical',\r\n     target_metric_kwds=None, target_n_neighbors=-1, target_weight=0.5,\r\n     transform_queue_size=4.0, transform_seed=42, unique=False, verbose=True)\r\nConstruct fuzzy simplicial set\r\nWed May 13 06:38:30 2020 Finding Nearest Neighbors\r\nWed May 13 06:38:30 2020 Building RP forest with 33 trees\r\nWed May 13 06:39:54 2020 NN descent for 18 iterations\r\n         0  /  18\r\n         1  /  18\r\nSegmentation fault\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/424", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/424/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/424/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/424/events", "html_url": "https://github.com/lmcinnes/umap/issues/424", "id": 614215176, "node_id": "MDU6SXNzdWU2MTQyMTUxNzY=", "number": 424, "title": "Passing sparse distance matrices or KNNs directly", "user": {"login": "Rocketknight1", "id": 12866554, "node_id": "MDQ6VXNlcjEyODY2NTU0", "avatar_url": "https://avatars3.githubusercontent.com/u/12866554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rocketknight1", "html_url": "https://github.com/Rocketknight1", "followers_url": "https://api.github.com/users/Rocketknight1/followers", "following_url": "https://api.github.com/users/Rocketknight1/following{/other_user}", "gists_url": "https://api.github.com/users/Rocketknight1/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rocketknight1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rocketknight1/subscriptions", "organizations_url": "https://api.github.com/users/Rocketknight1/orgs", "repos_url": "https://api.github.com/users/Rocketknight1/repos", "events_url": "https://api.github.com/users/Rocketknight1/events{/privacy}", "received_events_url": "https://api.github.com/users/Rocketknight1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-05-07T17:13:31Z", "updated_at": "2020-05-20T13:45:31Z", "closed_at": "2020-05-20T13:45:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hey, I'm trying to do clustering on approx 300k samples using the [Word Mover's Distance](http://proceedings.mlr.press/v37/kusnerb15.pdf) as a metric. This means that the input data does not take the form of vectors, and all-pairs distance comparisons are very expensive to compute. However, I can efficiently get all-pairs (approximate) nearest neighbours using methods like the 'centroid distance' from the paper and populate a sparse distance matrix with the distance values from all points to their nearest neighbours.\r\n\r\nI'd really like to try passing those sparse distances to UMAP, but I get the following error when I try:\r\n\r\n```\r\nTypingError: Failed in nopython mode pipeline (step: nopython frontend)\r\nnon-precise type pyobject\r\n[1] During: typing of argument at /home/matt/miniconda3/envs/story-clustering/lib/python3.7/site-packages/umap_learn-0.4.2-py3.7.egg/umap/utils.py (29)\r\n\r\nFile \"../../../miniconda3/envs/story-clustering/lib/python3.7/site-packages/umap_learn-0.4.2-py3.7.egg/umap/utils.py\", line 29:\r\ndef fast_knn_indices(X, n_neighbors):\r\n    <source elided>\r\n    \"\"\"\r\n    knn_indices = np.empty((X.shape[0], n_neighbors), dtype=np.int32)\r\n    ^\r\n\r\nThis error may have been caused by the following argument(s):\r\n- argument 0: cannot determine Numba type of <class 'scipy.sparse.csr.csr_matrix'>\r\n```\r\n\r\nIs there any way I can get around this? I can compute nearest neighbours for free just by sorting rows of the sparse distance matrix, but I don't understand the UMAP code well enough to hack my precomputed NNs in. The distance matrix is also much too big to convert to dense form - a 300,000 x 300,000 matrix of float32 values would take ~340GB of memory, so I'm kind of stuck!\r\n\r\nHere's my very simple code snippet that triggers this error:\r\n\r\n```\r\ndata = scipy.sparse.load_npz('sparse_distances.npz').tocsr()\r\nfit = umap.UMAP(metric='precomputed')\r\nembedding = fit.fit_transform(data)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/411", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/411/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/411/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/411/events", "html_url": "https://github.com/lmcinnes/umap/issues/411", "id": 604158071, "node_id": "MDU6SXNzdWU2MDQxNTgwNzE=", "number": 411, "title": "Invalid link to Nerve theorem Wikipedia page in docs", "user": {"login": "gibsramen", "id": 4030868, "node_id": "MDQ6VXNlcjQwMzA4Njg=", "avatar_url": "https://avatars3.githubusercontent.com/u/4030868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gibsramen", "html_url": "https://github.com/gibsramen", "followers_url": "https://api.github.com/users/gibsramen/followers", "following_url": "https://api.github.com/users/gibsramen/following{/other_user}", "gists_url": "https://api.github.com/users/gibsramen/gists{/gist_id}", "starred_url": "https://api.github.com/users/gibsramen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gibsramen/subscriptions", "organizations_url": "https://api.github.com/users/gibsramen/orgs", "repos_url": "https://api.github.com/users/gibsramen/repos", "events_url": "https://api.github.com/users/gibsramen/events{/privacy}", "received_events_url": "https://api.github.com/users/gibsramen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-21T17:31:23Z", "updated_at": "2020-04-22T00:07:51Z", "closed_at": "2020-04-22T00:07:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the documentation ([how_umap_works.rst](https://github.com/lmcinnes/umap/blob/master/doc/how_umap_works.rst)) there is a [link](https://github.com/lmcinnes/umap/blame/master/doc/how_umap_works.rst#L100) to the Nerve theorem Wikipedia page. This page does not exist on Wikipedia as far as I can tell (https://en.wikipedia.org/wiki/Nerve_theorem).\r\n\r\nPerhaps it can be replaced with the following link? Happy to submit a PR on it - just want to make sure this link is fine. If you have an alternate suggestion for a paper/resource I can use that instead.\r\n\r\nhttps://en.wikipedia.org/wiki/Nerve_of_a_covering\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/410", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/410/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/410/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/410/events", "html_url": "https://github.com/lmcinnes/umap/issues/410", "id": 603732812, "node_id": "MDU6SXNzdWU2MDM3MzI4MTI=", "number": 410, "title": "why use np.max instead of np.min in smooth_knn_dist", "user": {"login": "rayeaster", "id": 1487283, "node_id": "MDQ6VXNlcjE0ODcyODM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1487283?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rayeaster", "html_url": "https://github.com/rayeaster", "followers_url": "https://api.github.com/users/rayeaster/followers", "following_url": "https://api.github.com/users/rayeaster/following{/other_user}", "gists_url": "https://api.github.com/users/rayeaster/gists{/gist_id}", "starred_url": "https://api.github.com/users/rayeaster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rayeaster/subscriptions", "organizations_url": "https://api.github.com/users/rayeaster/orgs", "repos_url": "https://api.github.com/users/rayeaster/repos", "events_url": "https://api.github.com/users/rayeaster/events{/privacy}", "received_events_url": "https://api.github.com/users/rayeaster/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-04-21T06:08:48Z", "updated_at": "2020-04-24T02:37:30Z", "closed_at": "2020-04-24T02:37:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "thought it should be nearest neighbor which has `mininum` distance?\r\n\r\nhttps://github.com/lmcinnes/umap/blob/master/umap/umap_.py#L179\r\n\r\n`rho[i] = np.max(non_zero_dists)`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/409", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/409/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/409/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/409/events", "html_url": "https://github.com/lmcinnes/umap/issues/409", "id": 603551626, "node_id": "MDU6SXNzdWU2MDM1NTE2MjY=", "number": 409, "title": "I get an error \"ValueError: unique is poorly defined on a precomputed metric\" when trying to use a precomputed metric", "user": {"login": "sg-s", "id": 6005346, "node_id": "MDQ6VXNlcjYwMDUzNDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/6005346?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sg-s", "html_url": "https://github.com/sg-s", "followers_url": "https://api.github.com/users/sg-s/followers", "following_url": "https://api.github.com/users/sg-s/following{/other_user}", "gists_url": "https://api.github.com/users/sg-s/gists{/gist_id}", "starred_url": "https://api.github.com/users/sg-s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sg-s/subscriptions", "organizations_url": "https://api.github.com/users/sg-s/orgs", "repos_url": "https://api.github.com/users/sg-s/repos", "events_url": "https://api.github.com/users/sg-s/events{/privacy}", "received_events_url": "https://api.github.com/users/sg-s/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-20T21:36:52Z", "updated_at": "2020-04-21T22:13:16Z", "closed_at": "2020-04-21T22:13:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "My precomputed distance matrix doesn't have any NaNs, or Inf, or anything weird. \r\n\r\nFull error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/srinivas/anaconda3/envs/umap/lib/python3.8/site-packages/umap/umap_.py\", line 1968, in fit_transform\r\n    self.fit(X, y)\r\n  File \"/Users/srinivas/anaconda3/envs/umap/lib/python3.8/site-packages/umap/umap_.py\", line 1625, in fit\r\n    self._validate_parameters()\r\n  File \"/Users/srinivas/anaconda3/envs/umap/lib/python3.8/site-packages/umap/umap_.py\", line 1501, in _validate_parameters\r\n    raise ValueError(\"unique is poorly defined on a precomputed metric\")\r\nValueError: unique is poorly defined on a precomputed metric\r\nError using umap/fit (line 51)\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/404", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/404/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/404/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/404/events", "html_url": "https://github.com/lmcinnes/umap/issues/404", "id": 600857118, "node_id": "MDU6SXNzdWU2MDA4NTcxMTg=", "number": 404, "title": "why not use curve_fit for the algorithm3 mentioned in paper", "user": {"login": "rayeaster", "id": 1487283, "node_id": "MDQ6VXNlcjE0ODcyODM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1487283?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rayeaster", "html_url": "https://github.com/rayeaster", "followers_url": "https://api.github.com/users/rayeaster/followers", "following_url": "https://api.github.com/users/rayeaster/following{/other_user}", "gists_url": "https://api.github.com/users/rayeaster/gists{/gist_id}", "starred_url": "https://api.github.com/users/rayeaster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rayeaster/subscriptions", "organizations_url": "https://api.github.com/users/rayeaster/orgs", "repos_url": "https://api.github.com/users/rayeaster/repos", "events_url": "https://api.github.com/users/rayeaster/events{/privacy}", "received_events_url": "https://api.github.com/users/rayeaster/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-16T08:43:05Z", "updated_at": "2020-04-21T06:08:00Z", "closed_at": "2020-04-21T06:08:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "looks what need there is a non-linear fit? \r\nsince it is has to be done **element-wise**?\r\n\r\n![image](https://user-images.githubusercontent.com/1487283/79541687-d4c35700-80bc-11ea-94cd-ae584f663df6.png)\r\n\r\nhttps://github.com/lmcinnes/umap/blob/master/umap/umap_.py#L164\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/403", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/403/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/403/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/403/events", "html_url": "https://github.com/lmcinnes/umap/issues/403", "id": 600386330, "node_id": "MDU6SXNzdWU2MDAzODYzMzA=", "number": 403, "title": "I get: \"AttributeError: 'NNDescent' object has no attribute 'neighbor_graph'\" when running the example", "user": {"login": "sg-s", "id": 6005346, "node_id": "MDQ6VXNlcjYwMDUzNDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/6005346?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sg-s", "html_url": "https://github.com/sg-s", "followers_url": "https://api.github.com/users/sg-s/followers", "following_url": "https://api.github.com/users/sg-s/following{/other_user}", "gists_url": "https://api.github.com/users/sg-s/gists{/gist_id}", "starred_url": "https://api.github.com/users/sg-s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sg-s/subscriptions", "organizations_url": "https://api.github.com/users/sg-s/orgs", "repos_url": "https://api.github.com/users/sg-s/repos", "events_url": "https://api.github.com/users/sg-s/events{/privacy}", "received_events_url": "https://api.github.com/users/sg-s/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-15T15:28:23Z", "updated_at": "2020-04-15T17:28:42Z", "closed_at": "2020-04-15T17:28:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Steps to reproduce error:\r\n\r\nFollowing along on this [documentation page](https://umap-learn.readthedocs.io/en/latest/supervised.html)\r\n\r\n```\r\nimport numpy as np\r\nfrom mnist.loader import MNIST\r\nmndata = MNIST('fashion')\r\ntrain, train_labels = mndata.load_training()\r\ntest, test_labels = mndata.load_testing()\r\ndata = np.array(np.vstack([train, test]), dtype=np.float64) / 255.0\r\ntarget = np.hstack([train_labels, test_labels])\r\nclasses = [\r\n    'T-shirt/top',\r\n    'Trouser',\r\n    'Pullover',\r\n    'Dress',\r\n    'Coat',\r\n    'Sandal',\r\n    'Shirt',\r\n    'Sneaker',\r\n    'Bag',\r\n    'Ankle boot']\r\n\r\nimport umap\r\nembedding = umap.UMAP().fit_transform(data, y=target)\r\n```\r\ngenerates this error:\r\n\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-20-a48fe6ba981d> in <module>\r\n----> 1 embedding = umap.UMAP().fit_transform(data, y=target)\r\n\r\n~/anaconda3/envs/umap/lib/python3.7/site-packages/umap/umap_.py in fit_transform(self, X, y)\r\n   1958             Embedding of the training data in low-dimensional space.\r\n   1959         \"\"\"\r\n-> 1960         self.fit(X, y)\r\n   1961         return self.embedding_\r\n   1962 \r\n\r\n~/anaconda3/envs/umap/lib/python3.7/site-packages/umap/umap_.py in fit(self, X, y)\r\n   1747                 self.low_memory,\r\n   1748                 use_pynndescent=True,\r\n-> 1749                 verbose=self.verbose,\r\n   1750             )\r\n   1751 \r\n\r\n~/anaconda3/envs/umap/lib/python3.7/site-packages/umap/umap_.py in nearest_neighbors(X, n_neighbors, metric, metric_kwds, angular, random_state, low_memory, use_pynndescent, verbose)\r\n    299                 verbose=verbose,\r\n    300             )\r\n--> 301             knn_indices, knn_dists = nnd.neighbor_graph\r\n    302             rp_forest = nnd\r\n    303         else:\r\n\r\nAttributeError: 'NNDescent' object has no attribute 'neighbor_graph'\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/402", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/402/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/402/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/402/events", "html_url": "https://github.com/lmcinnes/umap/issues/402", "id": 599645650, "node_id": "MDU6SXNzdWU1OTk2NDU2NTA=", "number": 402, "title": "Print feature importance?", "user": {"login": "zapaishchykova", "id": 17569461, "node_id": "MDQ6VXNlcjE3NTY5NDYx", "avatar_url": "https://avatars3.githubusercontent.com/u/17569461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zapaishchykova", "html_url": "https://github.com/zapaishchykova", "followers_url": "https://api.github.com/users/zapaishchykova/followers", "following_url": "https://api.github.com/users/zapaishchykova/following{/other_user}", "gists_url": "https://api.github.com/users/zapaishchykova/gists{/gist_id}", "starred_url": "https://api.github.com/users/zapaishchykova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zapaishchykova/subscriptions", "organizations_url": "https://api.github.com/users/zapaishchykova/orgs", "repos_url": "https://api.github.com/users/zapaishchykova/repos", "events_url": "https://api.github.com/users/zapaishchykova/events{/privacy}", "received_events_url": "https://api.github.com/users/zapaishchykova/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-14T15:07:56Z", "updated_at": "2020-04-14T17:53:48Z", "closed_at": "2020-04-14T17:53:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello! I used umap to reduce dimensionality on my 300+ features. Is there a way to plot which of these features has the biggest impact on the resulting 2D projection?\r\n\r\n```\r\nreducer = umap.UMAP(random_state=42)\r\nreducer.fit(X_train)\r\nembedding = reducer.transform(X_train)\r\n    \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/401", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/401/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/401/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/401/events", "html_url": "https://github.com/lmcinnes/umap/issues/401", "id": 599117148, "node_id": "MDU6SXNzdWU1OTkxMTcxNDg=", "number": 401, "title": "TypeError and performance issues with large dataset", "user": {"login": "walid0925", "id": 10912088, "node_id": "MDQ6VXNlcjEwOTEyMDg4", "avatar_url": "https://avatars3.githubusercontent.com/u/10912088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/walid0925", "html_url": "https://github.com/walid0925", "followers_url": "https://api.github.com/users/walid0925/followers", "following_url": "https://api.github.com/users/walid0925/following{/other_user}", "gists_url": "https://api.github.com/users/walid0925/gists{/gist_id}", "starred_url": "https://api.github.com/users/walid0925/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/walid0925/subscriptions", "organizations_url": "https://api.github.com/users/walid0925/orgs", "repos_url": "https://api.github.com/users/walid0925/repos", "events_url": "https://api.github.com/users/walid0925/events{/privacy}", "received_events_url": "https://api.github.com/users/walid0925/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2020-04-13T20:29:20Z", "updated_at": "2020-05-23T20:32:24Z", "closed_at": "2020-04-15T18:03:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, thanks so much for the time you've invested in developing this project!\r\n\r\nI'm working with a fairly large dataset, 1.75M samples in total, using binary vectors with 2048 elements each. When using on the order of 10k samples, I have no issues with this:\r\n```\r\nmapper = umap.UMAP(metric='jaccard', n_neighbors=5, low_memory=True, min_dist=0.001)\r\num = mapper.fit_transform(data)\r\n```\r\n\r\nHowever, when using 100k samples, I receive the following error (happens irrespective of `low_memory` and with multiple metrics, such as cosine) :\r\n```\r\n~/miniconda3/envs/reverie_env/lib/python3.6/site-packages/sklearn/metrics/pairwise.py in _pairwise_callable(X, Y, metric, force_all_finite, **kwds)\r\n   1373         iterator = itertools.combinations(range(X.shape[0]), 2)\r\n   1374         for i, j in iterator:\r\n-> 1375             out[i, j] = metric(X[i], Y[j], **kwds)\r\n   1376 \r\n   1377         # Make symmetric\r\n\r\nTypeError: not enough arguments: expected 4, got 2\r\n```\r\n\r\nI'm storing my data in a `scipy.sparse` matrix:\r\n```\r\n<100000x2048 sparse matrix of type '<class 'numpy.float32'>'\r\n\twith 4878596 stored elements in Compressed Sparse Row format>\r\n```\r\n\r\n<details>\r\n<summary>Full traceback</summary>\r\n\r\n```\r\n/home/ubuntu/miniconda3/envs/reverie_env/lib/python3.6/site-packages/umap/umap_.py:1529: UserWarning: gradient function is not yet implemented for jaccard distance metric; inverse_transform will be unavailable\r\n  \"inverse_transform will be unavailable\".format(self.metric)\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<timed exec> in <module>\r\n\r\n~/miniconda3/envs/reverie_env/lib/python3.6/site-packages/umap/umap_.py in fit_transform(self, X, y)\r\n   1966             Embedding of the training data in low-dimensional space.\r\n   1967         \"\"\"\r\n-> 1968         self.fit(X, y)\r\n   1969         return self.embedding_\r\n   1970 \r\n\r\n~/miniconda3/envs/reverie_env/lib/python3.6/site-packages/umap/umap_.py in fit(self, X, y)\r\n   1935             self.output_metric in (\"euclidean\", \"l2\"),\r\n   1936             self.random_state is None,\r\n-> 1937             self.verbose,\r\n   1938         )[inverse]\r\n   1939 \r\n\r\n~/miniconda3/envs/reverie_env/lib/python3.6/site-packages/umap/umap_.py in simplicial_set_embedding(data, graph, n_components, initial_alpha, a, b, gamma, negative_sample_rate, n_epochs, init, random_state, metric, metric_kwds, output_metric, output_metric_kwds, euclidean_output, parallel, verbose)\r\n   1036             random_state,\r\n   1037             metric=metric,\r\n-> 1038             metric_kwds=metric_kwds,\r\n   1039         )\r\n   1040         expansion = 10.0 / np.abs(initialisation).max()\r\n\r\n~/miniconda3/envs/reverie_env/lib/python3.6/site-packages/umap/spectral.py in spectral_layout(data, graph, dim, random_state, metric, metric_kwds)\r\n    279             random_state,\r\n    280             metric=metric,\r\n--> 281             metric_kwds=metric_kwds,\r\n    282         )\r\n    283 \r\n\r\n~/miniconda3/envs/reverie_env/lib/python3.6/site-packages/umap/spectral.py in multi_component_layout(data, graph, n_components, component_labels, dim, random_state, metric, metric_kwds)\r\n    166             random_state,\r\n    167             metric=metric,\r\n--> 168             metric_kwds=metric_kwds,\r\n    169         )\r\n    170     else:\r\n\r\n~/miniconda3/envs/reverie_env/lib/python3.6/site-packages/umap/spectral.py in component_layout(data, n_components, component_labels, dim, random_state, metric, metric_kwds)\r\n     95         else:\r\n     96             distance_matrix = pairwise_distances(\r\n---> 97                 component_centroids, metric=metric, **metric_kwds\r\n     98             )\r\n     99 \r\n\r\n~/miniconda3/envs/reverie_env/lib/python3.6/site-packages/sklearn/metrics/pairwise.py in pairwise_distances(X, Y, metric, n_jobs, force_all_finite, **kwds)\r\n   1750         func = partial(distance.cdist, metric=metric, **kwds)\r\n   1751 \r\n-> 1752     return _parallel_pairwise(X, Y, func, n_jobs, **kwds)\r\n   1753 \r\n   1754 \r\n\r\n~/miniconda3/envs/reverie_env/lib/python3.6/site-packages/sklearn/metrics/pairwise.py in _parallel_pairwise(X, Y, func, n_jobs, **kwds)\r\n   1346 \r\n   1347     if effective_n_jobs(n_jobs) == 1:\r\n-> 1348         return func(X, Y, **kwds)\r\n   1349 \r\n   1350     # enforce a threading backend to prevent data communication overhead\r\n\r\n~/miniconda3/envs/reverie_env/lib/python3.6/site-packages/sklearn/metrics/pairwise.py in _pairwise_callable(X, Y, metric, force_all_finite, **kwds)\r\n   1373         iterator = itertools.combinations(range(X.shape[0]), 2)\r\n   1374         for i, j in iterator:\r\n-> 1375             out[i, j] = metric(X[i], Y[j], **kwds)\r\n   1376 \r\n   1377         # Make symmetric\r\n\r\nTypeError: not enough arguments: expected 4, got \r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary> Environment details</summary>\r\n\r\n```\r\nnumba                     0.48.0                   pypi_0    pypi\r\nnumpy                     1.18.2                   pypi_0    pypi\r\nscikit-learn              0.22.2.post1             pypi_0    pypi\r\ntbb                       2020.0.133               pypi_0    pypi\r\numap-learn                0.4.1                    pypi_0    pypi\r\n```\r\n\r\n`umap-learn` was pip-installed from the git repo directly on 4/10/20\r\n</details>\r\n\r\n---\r\n\r\nI've also noticed that when running `.fit_transform()` one core is utilized for a long period of time, particularly when the number of neighbors (or samples) increases (I'm guessing this might be the phase when KNN is being used?). After some time, all cores become active, which is what happens when just `.transform()` is run. I was wondering 1) is this expected behavior? and 2) is there any way to parallelize that slower initial phase?\r\n\r\nI'm relatively new to this code so apologies if these issues have already been discussed, I did my best to browse through open issues first but didn't find a conclusive answer. Thank you!\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/400", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/400/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/400/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/400/events", "html_url": "https://github.com/lmcinnes/umap/issues/400", "id": 598325469, "node_id": "MDU6SXNzdWU1OTgzMjU0Njk=", "number": 400, "title": "FutureWarning raised when constructing lil_matrix", "user": {"login": "leriomaggio", "id": 1908453, "node_id": "MDQ6VXNlcjE5MDg0NTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1908453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leriomaggio", "html_url": "https://github.com/leriomaggio", "followers_url": "https://api.github.com/users/leriomaggio/followers", "following_url": "https://api.github.com/users/leriomaggio/following{/other_user}", "gists_url": "https://api.github.com/users/leriomaggio/gists{/gist_id}", "starred_url": "https://api.github.com/users/leriomaggio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leriomaggio/subscriptions", "organizations_url": "https://api.github.com/users/leriomaggio/orgs", "repos_url": "https://api.github.com/users/leriomaggio/repos", "events_url": "https://api.github.com/users/leriomaggio/events{/privacy}", "received_events_url": "https://api.github.com/users/leriomaggio/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-11T18:33:06Z", "updated_at": "2020-04-12T17:29:00Z", "closed_at": "2020-04-12T17:29:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Description\r\n\r\nConstructing a `scipy.sparse.lil_matrix` in [`UMAP.inverse_transform`](https://github.com/lmcinnes/umap/blob/master/umap/umap_.py#L2207) raises a `FutureWarning` \r\n\r\n### Versions\r\n\r\n```\r\nOS: macOS\r\nPython 3.7.7 (default, Mar 26 2020, 10:32:53)\r\nNumPy 1.17.5\r\nSciPy 1.2.1\r\numap 0.4\r\n```\r\n\r\n### Steps/Code to Reproduce\r\n\r\nI put the code to reproduce the issue in this [gist](https://gist.github.com/leriomaggio/7d13bd06d370f1801cfa8ce296253394)\r\n\r\n### Cause\r\n\r\nThis issue is caused by a backward incompatibility of `scipy < 1.3` with the latest updates of Numpy (`numpy>=1.17`) APIs for `broadcast_arrays`.\r\n\r\n`scipy 1.3.1` fixes this issue: [scipy/scipy#10379](https://github.com/scipy/scipy/pull/10379)\r\n\r\n### Proposed solution\r\n\r\nLooking at UMAP [`requirements.txt`](https://github.com/lmcinnes/umap/blob/master/requirements.txt) this is a perfectly valid combination of packages versions.\r\n\r\nDue to the recent API changes in Numpy I would suggest to updates the requirements with most recent and non-conflicting `numpy` and `scipy` versions:\r\n\r\n```\r\nnumpy>=1.17\r\nscipy>=1.3.1\r\n```\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/398", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/398/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/398/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/398/events", "html_url": "https://github.com/lmcinnes/umap/issues/398", "id": 597415373, "node_id": "MDU6SXNzdWU1OTc0MTUzNzM=", "number": 398, "title": "Errors with plot.diagnostic", "user": {"login": "tpapp157", "id": 58234879, "node_id": "MDQ6VXNlcjU4MjM0ODc5", "avatar_url": "https://avatars1.githubusercontent.com/u/58234879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tpapp157", "html_url": "https://github.com/tpapp157", "followers_url": "https://api.github.com/users/tpapp157/followers", "following_url": "https://api.github.com/users/tpapp157/following{/other_user}", "gists_url": "https://api.github.com/users/tpapp157/gists{/gist_id}", "starred_url": "https://api.github.com/users/tpapp157/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tpapp157/subscriptions", "organizations_url": "https://api.github.com/users/tpapp157/orgs", "repos_url": "https://api.github.com/users/tpapp157/repos", "events_url": "https://api.github.com/users/tpapp157/events{/privacy}", "received_events_url": "https://api.github.com/users/tpapp157/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-09T16:48:15Z", "updated_at": "2020-04-11T03:59:00Z", "closed_at": "2020-04-11T03:58:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using the released UMAP 0.4.0\r\n\r\nWhen I try to run a diagnostic plot:\r\numap.plot.diagnostic(U0, diagnostic_type='local_dim')\r\n\r\nI get the following errors:\r\n'UMAP' object has no attribute '_distance_func'\r\n'UMAP' object has no attribute '_dist_args'\r\n\r\nLooking at the UMAP code I can define these manually using the 'metric' and 'metric_kwds' attributes. That just leads me to this error:\r\n\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\umap\\plot.py\", line 176, in _nhood_search\r\nTypeError: initialise_search() takes 6 positional arguments but 7 were given", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/395", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/395/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/395/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/395/events", "html_url": "https://github.com/lmcinnes/umap/issues/395", "id": 596120975, "node_id": "MDU6SXNzdWU1OTYxMjA5NzU=", "number": 395, "title": "Hellinger distance not recognized as metric in v0.4.0", "user": {"login": "lambertsbennett", "id": 46295426, "node_id": "MDQ6VXNlcjQ2Mjk1NDI2", "avatar_url": "https://avatars2.githubusercontent.com/u/46295426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lambertsbennett", "html_url": "https://github.com/lambertsbennett", "followers_url": "https://api.github.com/users/lambertsbennett/followers", "following_url": "https://api.github.com/users/lambertsbennett/following{/other_user}", "gists_url": "https://api.github.com/users/lambertsbennett/gists{/gist_id}", "starred_url": "https://api.github.com/users/lambertsbennett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lambertsbennett/subscriptions", "organizations_url": "https://api.github.com/users/lambertsbennett/orgs", "repos_url": "https://api.github.com/users/lambertsbennett/repos", "events_url": "https://api.github.com/users/lambertsbennett/events{/privacy}", "received_events_url": "https://api.github.com/users/lambertsbennett/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-04-07T20:07:39Z", "updated_at": "2020-04-08T13:50:42Z", "closed_at": "2020-04-07T20:30:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I installed umap-learn 0.4.0 and would like to try some of its new features, including document embedding with the hellinger distance and embedding on a sphere with the haversine distance. When I try to follow the documentation examples I get the following errors:\r\n\r\n1. When trying to use the hellinger distance with metric='hellinger'\r\n ValueError: Unknown metric hellinger.\r\n\r\n2. When following the 'embedding to non-euclidean spaces' tutorial I get the following error:\r\nTypeError: __init__() got an unexpected keyword argument 'output_metric'\r\n\r\nIt seems like my install does not include any of the new v0.4.0 features for some reason.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/393", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/393/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/393/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/393/events", "html_url": "https://github.com/lmcinnes/umap/issues/393", "id": 595282485, "node_id": "MDU6SXNzdWU1OTUyODI0ODU=", "number": 393, "title": "Proper value for target_n_neighbors", "user": {"login": "jmirats", "id": 63251659, "node_id": "MDQ6VXNlcjYzMjUxNjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/63251659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmirats", "html_url": "https://github.com/jmirats", "followers_url": "https://api.github.com/users/jmirats/followers", "following_url": "https://api.github.com/users/jmirats/following{/other_user}", "gists_url": "https://api.github.com/users/jmirats/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmirats/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmirats/subscriptions", "organizations_url": "https://api.github.com/users/jmirats/orgs", "repos_url": "https://api.github.com/users/jmirats/repos", "events_url": "https://api.github.com/users/jmirats/events{/privacy}", "received_events_url": "https://api.github.com/users/jmirats/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-06T17:12:07Z", "updated_at": "2020-05-07T14:38:03Z", "closed_at": "2020-05-07T14:38:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI'm not reporting an issue, just asking for advice on a specific parameter.\r\nI'm currently working on trying to fit an Umap model to a quite big data set, let say 300000 points with high dimensionality, say around 4000. I'm providing a target array for supervised dimension reduction, which in fact is just a vector of 0 and 1s representing the membership of a data point to one class or another; there are just 2 classes. I'm able to find good fitings, I mean I find what I expect, 2 classes, by using a number of neighbours between 150 and 200. However, when testing how the fit was for some new data points, the fiting is not good at all, as practically all new points are labelled as one class, while I provide the same number of test points for each of the classes. In this sense I was wondering about how to tune the parameters that directly affect the transform action, concretely 'target_n_neighbors' and 'negative_sample_rate'. I'm just using the default values. Would it make sense to just limit 'target_n_neighbors' to a small number, say 10, and increase 'negative_sample_rate' to a big one, say 100?\r\nMany thanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/390", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/390/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/390/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/390/events", "html_url": "https://github.com/lmcinnes/umap/issues/390", "id": 593659559, "node_id": "MDU6SXNzdWU1OTM2NTk1NTk=", "number": 390, "title": "Is seaborn requred?", "user": {"login": "anzelpwj", "id": 4054130, "node_id": "MDQ6VXNlcjQwNTQxMzA=", "avatar_url": "https://avatars2.githubusercontent.com/u/4054130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anzelpwj", "html_url": "https://github.com/anzelpwj", "followers_url": "https://api.github.com/users/anzelpwj/followers", "following_url": "https://api.github.com/users/anzelpwj/following{/other_user}", "gists_url": "https://api.github.com/users/anzelpwj/gists{/gist_id}", "starred_url": "https://api.github.com/users/anzelpwj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anzelpwj/subscriptions", "organizations_url": "https://api.github.com/users/anzelpwj/orgs", "repos_url": "https://api.github.com/users/anzelpwj/repos", "events_url": "https://api.github.com/users/anzelpwj/events{/privacy}", "received_events_url": "https://api.github.com/users/anzelpwj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-03T21:50:14Z", "updated_at": "2020-04-05T15:28:19Z", "closed_at": "2020-04-05T15:28:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/lmcinnes/umap/blob/499f8350b3374767f41fcd49eac13b982c9329ac/umap/plot.py#L32\r\n\r\nI'm not seeing the explicit import for seaborn. Is this involved in any of the other packages?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/388", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/388/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/388/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/388/events", "html_url": "https://github.com/lmcinnes/umap/issues/388", "id": 592659089, "node_id": "MDU6SXNzdWU1OTI2NTkwODk=", "number": 388, "title": "umap.plot example not working", "user": {"login": "mdamien", "id": 1469823, "node_id": "MDQ6VXNlcjE0Njk4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1469823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdamien", "html_url": "https://github.com/mdamien", "followers_url": "https://api.github.com/users/mdamien/followers", "following_url": "https://api.github.com/users/mdamien/following{/other_user}", "gists_url": "https://api.github.com/users/mdamien/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdamien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdamien/subscriptions", "organizations_url": "https://api.github.com/users/mdamien/orgs", "repos_url": "https://api.github.com/users/mdamien/repos", "events_url": "https://api.github.com/users/mdamien/events{/privacy}", "received_events_url": "https://api.github.com/users/mdamien/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-02T14:04:49Z", "updated_at": "2020-04-02T17:28:13Z", "closed_at": "2020-04-02T17:28:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I tried the example in the README:\r\n\r\n```\r\nimport umap\r\nimport umap.plot\r\nfrom sklearn.datasets import load_digits\r\n\r\ndigits = load_digits()\r\n\r\nmapper = umap.UMAP().fit(digits.data)\r\numap.plot.points(mapper, label=digits.target)\r\n```\r\n\r\nBut then I got:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"carte.py\", line 8, in <module>\r\n    umap.plot.points(mapper, label=digits.target)\r\nTypeError: points() got an unexpected keyword argument 'label'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/387", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/387/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/387/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/387/events", "html_url": "https://github.com/lmcinnes/umap/issues/387", "id": 592657923, "node_id": "MDU6SXNzdWU1OTI2NTc5MjM=", "number": 387, "title": "umap-learn[plot] extra not provided", "user": {"login": "mdamien", "id": 1469823, "node_id": "MDQ6VXNlcjE0Njk4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1469823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdamien", "html_url": "https://github.com/mdamien", "followers_url": "https://api.github.com/users/mdamien/followers", "following_url": "https://api.github.com/users/mdamien/following{/other_user}", "gists_url": "https://api.github.com/users/mdamien/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdamien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdamien/subscriptions", "organizations_url": "https://api.github.com/users/mdamien/orgs", "repos_url": "https://api.github.com/users/mdamien/repos", "events_url": "https://api.github.com/users/mdamien/events{/privacy}", "received_events_url": "https://api.github.com/users/mdamien/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-02T14:03:08Z", "updated_at": "2020-04-07T18:23:32Z", "closed_at": "2020-04-07T18:23:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When doing `pip install \"umap-learn[plot]\"`, I get: `WARNING: umap-learn 0.3.10 does not provide the extra 'plot'`.\r\n\r\nBut when installing the package with `pip install -e .[plot]`, it works.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/381", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/381/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/381/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/381/events", "html_url": "https://github.com/lmcinnes/umap/issues/381", "id": 587895543, "node_id": "MDU6SXNzdWU1ODc4OTU1NDM=", "number": 381, "title": "Error in spectral.py", "user": {"login": "acwooding", "id": 36967030, "node_id": "MDQ6VXNlcjM2OTY3MDMw", "avatar_url": "https://avatars0.githubusercontent.com/u/36967030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acwooding", "html_url": "https://github.com/acwooding", "followers_url": "https://api.github.com/users/acwooding/followers", "following_url": "https://api.github.com/users/acwooding/following{/other_user}", "gists_url": "https://api.github.com/users/acwooding/gists{/gist_id}", "starred_url": "https://api.github.com/users/acwooding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acwooding/subscriptions", "organizations_url": "https://api.github.com/users/acwooding/orgs", "repos_url": "https://api.github.com/users/acwooding/repos", "events_url": "https://api.github.com/users/acwooding/events{/privacy}", "received_events_url": "https://api.github.com/users/acwooding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-03-25T18:17:31Z", "updated_at": "2020-04-03T17:00:50Z", "closed_at": "2020-03-26T16:50:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Getting a TypeError in the spectral initialization in version 0.4.0rc2. No Error in 0.4.0rc1 (just a warning).\r\n\r\nReproducer here: https://github.com/acwooding/covid_nlp/blob/umap-bug/notebooks/999-UMAP-bug.ipynb\r\n\r\n`%%time\r\nembedding_2d = umap.UMAP(n_components=2, metric='hellinger', random_state=42).fit(umap_bug_matrix)`\r\n\r\n```---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<timed exec> in <module>\r\n\r\n~/miniconda3/envs/covid_nlp/lib/python3.7/site-packages/umap/umap_.py in fit(self, X, y)\r\n   1927             self.output_metric in (\"euclidean\", \"l2\"),\r\n   1928             self.random_state is None,\r\n-> 1929             self.verbose,\r\n   1930         )[inverse]\r\n   1931 \r\n\r\n~/miniconda3/envs/covid_nlp/lib/python3.7/site-packages/umap/umap_.py in simplicial_set_embedding(data, graph, n_components, initial_alpha, a, b, gamma, negative_sample_rate, n_epochs, init, random_state, metric, metric_kwds, output_metric, output_metric_kwds, euclidean_output, parallel, verbose)\r\n   1036             random_state,\r\n   1037             metric=metric,\r\n-> 1038             metric_kwds=metric_kwds,\r\n   1039         )\r\n   1040         expansion = 10.0 / np.abs(initialisation).max()\r\n\r\n~/miniconda3/envs/covid_nlp/lib/python3.7/site-packages/umap/spectral.py in spectral_layout(data, graph, dim, random_state, metric, metric_kwds)\r\n    273             random_state,\r\n    274             metric=metric,\r\n--> 275             metric_kwds=metric_kwds,\r\n    276         )\r\n    277 \r\n\r\n~/miniconda3/envs/covid_nlp/lib/python3.7/site-packages/umap/spectral.py in multi_component_layout(data, graph, n_components, component_labels, dim, random_state, metric, metric_kwds)\r\n    160             random_state,\r\n    161             metric=metric,\r\n--> 162             metric_kwds=metric_kwds,\r\n    163         )\r\n    164     else:\r\n\r\n~/miniconda3/envs/covid_nlp/lib/python3.7/site-packages/umap/spectral.py in component_layout(data, n_components, component_labels, dim, random_state, metric, metric_kwds)\r\n     89         else:\r\n     90             distance_matrix = pairwise_distances(\r\n---> 91                 component_centroids, metric=metric, **metric_kwds\r\n     92             )\r\n     93 \r\n\r\n~/miniconda3/envs/covid_nlp/lib/python3.7/site-packages/sklearn/metrics/pairwise.py in pairwise_distances(X, Y, metric, n_jobs, **kwds)\r\n   1586         func = partial(distance.cdist, metric=metric, **kwds)\r\n   1587 \r\n-> 1588     return _parallel_pairwise(X, Y, func, n_jobs, **kwds)\r\n   1589 \r\n   1590 \r\n\r\n~/miniconda3/envs/covid_nlp/lib/python3.7/site-packages/sklearn/metrics/pairwise.py in _parallel_pairwise(X, Y, func, n_jobs, **kwds)\r\n   1204 \r\n   1205     if effective_n_jobs(n_jobs) == 1:\r\n-> 1206         return func(X, Y, **kwds)\r\n   1207 \r\n   1208     # enforce a threading backend to prevent data communication overhead\r\n\r\n~/miniconda3/envs/covid_nlp/lib/python3.7/site-packages/sklearn/metrics/pairwise.py in _pairwise_callable(X, Y, metric, **kwds)\r\n   1231         iterator = itertools.combinations(range(X.shape[0]), 2)\r\n   1232         for i, j in iterator:\r\n-> 1233             out[i, j] = metric(X[i], Y[j], **kwds)\r\n   1234 \r\n   1235         # Make symmetric\r\n\r\nTypeError: not enough arguments: expected 4, got 2\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/380", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/380/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/380/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/380/events", "html_url": "https://github.com/lmcinnes/umap/issues/380", "id": 586132626, "node_id": "MDU6SXNzdWU1ODYxMzI2MjY=", "number": 380, "title": "Error in parallel target.", "user": {"login": "soklyras", "id": 56269928, "node_id": "MDQ6VXNlcjU2MjY5OTI4", "avatar_url": "https://avatars2.githubusercontent.com/u/56269928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soklyras", "html_url": "https://github.com/soklyras", "followers_url": "https://api.github.com/users/soklyras/followers", "following_url": "https://api.github.com/users/soklyras/following{/other_user}", "gists_url": "https://api.github.com/users/soklyras/gists{/gist_id}", "starred_url": "https://api.github.com/users/soklyras/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soklyras/subscriptions", "organizations_url": "https://api.github.com/users/soklyras/orgs", "repos_url": "https://api.github.com/users/soklyras/repos", "events_url": "https://api.github.com/users/soklyras/events{/privacy}", "received_events_url": "https://api.github.com/users/soklyras/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-23T11:20:44Z", "updated_at": "2020-03-23T11:29:00Z", "closed_at": "2020-03-23T11:29:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I run `fit_tranform` on a dataset the following error is appeared: \"The 'parallel' target is not currently supported on Windows operating systems when using Python 2.7, or on 32 bit hardware.\"\r\nBut I use 64 bit hardware and I run on python 3.7.4.\r\nAny help ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/374", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/374/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/374/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/374/events", "html_url": "https://github.com/lmcinnes/umap/issues/374", "id": 577154347, "node_id": "MDU6SXNzdWU1NzcxNTQzNDc=", "number": 374, "title": "QhullError on inverse transform on high dimensional data", "user": {"login": "timsainb", "id": 1279238, "node_id": "MDQ6VXNlcjEyNzkyMzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1279238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timsainb", "html_url": "https://github.com/timsainb", "followers_url": "https://api.github.com/users/timsainb/followers", "following_url": "https://api.github.com/users/timsainb/following{/other_user}", "gists_url": "https://api.github.com/users/timsainb/gists{/gist_id}", "starred_url": "https://api.github.com/users/timsainb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timsainb/subscriptions", "organizations_url": "https://api.github.com/users/timsainb/orgs", "repos_url": "https://api.github.com/users/timsainb/repos", "events_url": "https://api.github.com/users/timsainb/events{/privacy}", "received_events_url": "https://api.github.com/users/timsainb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-06T20:19:06Z", "updated_at": "2020-03-06T22:41:54Z", "closed_at": "2020-03-06T22:41:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I fit a UMAP model with ~100k exemplars of ~15k dimensions into a 128D UMAP space. Then tried to do an inverse_transform on some of the data. I got this error:\r\n\r\n```\r\n QhullError: QH6235 qhull error (qh_memalloc): negative request size (-1228186072).  Did int overflow due to high-D?\r\n\r\nWhile executing:  | qhull d QJ\r\nOptions selected for Qhull 2019.1.r 2019/06/21:\r\n  run-id 489887325  delaunay  Qbbound-last-qj  Q3-no-merge-vertices-dim-high\r\n  Pgood  _run 1  QJoggle 2.4e-08  _joggle-seed 16807  _max-width 19\r\n  Error-roundoff 7e-13  Visible-distance 7e-13  U-max-coplanar 7e-13\r\n  Width-outside 1.4e-12  _wide-facet 4.2e-12  _narrow-hull 2.2e-13\r\n  _maxoutside 4.7e-11\r\nLast point added to hull was p16502.\r\n\r\nAt error exit:\r\n\r\nDelaunay triangulation by the convex hull of 91648 points in 33-d:\r\n\r\n  Number of input sites: 43\r\n  Total number of nearly incident points: 91605\r\n  Number of Delaunay regions: 6794096\r\n\r\nStatistics for:  | qhull d QJ\r\n\r\n  Number of points processed: 42\r\n  Number of hyperplanes created: 3787007\r\n  Number of facets in hull: 7722418\r\n  Number of distance tests for qhull: 5081722\r\n  Input joggled by: 2.4e-08\r\n\r\n\r\nprecision problems (corrected unless 'Q0' or an error)\r\n      2 nearly singular or axis-parallel hyperplanes\r\n```\r\n\r\nI do not get this error for a 2D transformation of the same data. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/372", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/372/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/372/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/372/events", "html_url": "https://github.com/lmcinnes/umap/issues/372", "id": 576075466, "node_id": "MDU6SXNzdWU1NzYwNzU0NjY=", "number": 372, "title": "out of memory", "user": {"login": "LiuChaoXD", "id": 39954067, "node_id": "MDQ6VXNlcjM5OTU0MDY3", "avatar_url": "https://avatars3.githubusercontent.com/u/39954067?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LiuChaoXD", "html_url": "https://github.com/LiuChaoXD", "followers_url": "https://api.github.com/users/LiuChaoXD/followers", "following_url": "https://api.github.com/users/LiuChaoXD/following{/other_user}", "gists_url": "https://api.github.com/users/LiuChaoXD/gists{/gist_id}", "starred_url": "https://api.github.com/users/LiuChaoXD/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LiuChaoXD/subscriptions", "organizations_url": "https://api.github.com/users/LiuChaoXD/orgs", "repos_url": "https://api.github.com/users/LiuChaoXD/repos", "events_url": "https://api.github.com/users/LiuChaoXD/events{/privacy}", "received_events_url": "https://api.github.com/users/LiuChaoXD/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-05T08:26:56Z", "updated_at": "2020-03-06T18:02:26Z", "closed_at": "2020-03-06T18:02:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here, I have some problems.\r\nI manual install the umap==0.4, and run pip install -r requirements.txt , then  python setup.py install. It's ok, when I transform small data size with size(2000, 32). But if I use it to transform huge data with (30000, 32), it will out of memory. \r\n\r\nBut I find, you publish the demo for transform the mnist data set with (70000, 384). I run it, and out of memory .\r\n\r\nI don't know how to solve it. So I think maybe I install the wrong version. Then I reinstall the umap==0.3.10. But the error will being....\r\n\r\n```\r\nnumba.errors.LoweringError: Failed in nopython mode pipeline (step: nopython mode backend)\r\nType of #4 arg mismatch: i1 != i32\r\n\r\nFile \"../../miniconda3/envs/solo-sc/lib/python3.6/site-packages/umap/utils.py\", line 131:\r\ndef make_heap(n_points, size):\r\n    <source elided>\r\n    \"\"\"\r\n    result = np.zeros((3, int(n_points), int(size)), dtype=np.float64)\r\n    ^\r\n```\r\n\r\nPlease, do you test the newest version (0.4) on mnist data? Does it work?  My python version is 3.6. Should I update it?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/368", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/368/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/368/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/368/events", "html_url": "https://github.com/lmcinnes/umap/issues/368", "id": 574238494, "node_id": "MDU6SXNzdWU1NzQyMzg0OTQ=", "number": 368, "title": "Can't display umap.plot plots.", "user": {"login": "drmathwin", "id": 58827693, "node_id": "MDQ6VXNlcjU4ODI3Njkz", "avatar_url": "https://avatars0.githubusercontent.com/u/58827693?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drmathwin", "html_url": "https://github.com/drmathwin", "followers_url": "https://api.github.com/users/drmathwin/followers", "following_url": "https://api.github.com/users/drmathwin/following{/other_user}", "gists_url": "https://api.github.com/users/drmathwin/gists{/gist_id}", "starred_url": "https://api.github.com/users/drmathwin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drmathwin/subscriptions", "organizations_url": "https://api.github.com/users/drmathwin/orgs", "repos_url": "https://api.github.com/users/drmathwin/repos", "events_url": "https://api.github.com/users/drmathwin/events{/privacy}", "received_events_url": "https://api.github.com/users/drmathwin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-02T20:47:52Z", "updated_at": "2020-03-02T21:29:47Z", "closed_at": "2020-03-02T21:29:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "The object returned by a call to, for instance, umap.plot.points() cannot be passed to the umap.plot.show() method to be displayed to the user.  As a result, the plot cannot be viewed.\r\n\r\nI'm using UMAP to do a dimensionality reduction on a Doc2Vec model generated by gensim.\r\n\r\nfrom gensim.models.doc2vec import Doc2Vec\r\nfrom sklearn.cluster import KMeans\r\nimport umap\r\nimport umap.plot\r\n\r\nprint(\"Loading Model\")\r\nmodel = Doc2Vec.load(\"d2v_test.model\")\r\n\r\nprint(\"Clustering\")\r\nkmeans_model = KMeans(n_clusters=16, init='k-means++', max_iter=100)\r\nclustering = kmeans_model.fit(model.docvecs.vectors_docs)\r\n\r\nprint(\"Performing UMAP reduction\")\r\nmapping = umap.UMAP(n_neighbors=15, min_dist=0.01, n_components=2, metric='cosine')\r\nembedding = mapping.fit(model.docvecs.vectors_docs)\r\n\r\nprint(\"Plotting UMAP results\")\r\np = umap.plot.points(embedding)\r\numap.plot.show(p)\r\n\r\n\r\nThe result of running this code is the following error:\r\nValueError: \"Invalid object to show. The object to passed to show must be one of:\r\n\r\n* a LayoutDOM (e.g. a Plot or Widget or Layout)\r\n* a Bokeh Application\r\n* a callable suitable to an application FunctionHandler", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/367", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/367/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/367/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/367/events", "html_url": "https://github.com/lmcinnes/umap/issues/367", "id": 574045946, "node_id": "MDU6SXNzdWU1NzQwNDU5NDY=", "number": 367, "title": "fit method hangs after recent updates", "user": {"login": "paxtonfitzpatrick", "id": 26118297, "node_id": "MDQ6VXNlcjI2MTE4Mjk3", "avatar_url": "https://avatars1.githubusercontent.com/u/26118297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paxtonfitzpatrick", "html_url": "https://github.com/paxtonfitzpatrick", "followers_url": "https://api.github.com/users/paxtonfitzpatrick/followers", "following_url": "https://api.github.com/users/paxtonfitzpatrick/following{/other_user}", "gists_url": "https://api.github.com/users/paxtonfitzpatrick/gists{/gist_id}", "starred_url": "https://api.github.com/users/paxtonfitzpatrick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paxtonfitzpatrick/subscriptions", "organizations_url": "https://api.github.com/users/paxtonfitzpatrick/orgs", "repos_url": "https://api.github.com/users/paxtonfitzpatrick/repos", "events_url": "https://api.github.com/users/paxtonfitzpatrick/events{/privacy}", "received_events_url": "https://api.github.com/users/paxtonfitzpatrick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "lmcinnes", "id": 11962885, "node_id": "MDQ6VXNlcjExOTYyODg1", "avatar_url": "https://avatars0.githubusercontent.com/u/11962885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmcinnes", "html_url": "https://github.com/lmcinnes", "followers_url": "https://api.github.com/users/lmcinnes/followers", "following_url": "https://api.github.com/users/lmcinnes/following{/other_user}", "gists_url": "https://api.github.com/users/lmcinnes/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmcinnes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmcinnes/subscriptions", "organizations_url": "https://api.github.com/users/lmcinnes/orgs", "repos_url": "https://api.github.com/users/lmcinnes/repos", "events_url": "https://api.github.com/users/lmcinnes/events{/privacy}", "received_events_url": "https://api.github.com/users/lmcinnes/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lmcinnes", "id": 11962885, "node_id": "MDQ6VXNlcjExOTYyODg1", "avatar_url": "https://avatars0.githubusercontent.com/u/11962885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmcinnes", "html_url": "https://github.com/lmcinnes", "followers_url": "https://api.github.com/users/lmcinnes/followers", "following_url": "https://api.github.com/users/lmcinnes/following{/other_user}", "gists_url": "https://api.github.com/users/lmcinnes/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmcinnes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmcinnes/subscriptions", "organizations_url": "https://api.github.com/users/lmcinnes/orgs", "repos_url": "https://api.github.com/users/lmcinnes/repos", "events_url": "https://api.github.com/users/lmcinnes/events{/privacy}", "received_events_url": "https://api.github.com/users/lmcinnes/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-03-02T15:18:56Z", "updated_at": "2020-03-04T03:00:38Z", "closed_at": "2020-03-04T03:00:38Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I can't figure out why this is happening, but after some recent changes to `master` branch, the `.fit` method hangs to the point I have to kill python to avoid it crashing my computer.\r\n\r\nThe problem doesn't exist as of the most recent 0.4 release candidate (fc59aa78f14b10e5eafc19b18fc135de1c5382ea), but does with the most recent version of `master` (1a3892610643ca0ba72a0c559488f47e43bbd7cf).\r\n\r\nIt appears to be coming from a super slow list comprehension `scipy` runs internally to transpose a sparse matrix, called from `umap` [here](https://github.com/lmcinnes/umap/blob/1a3892610643ca0ba72a0c559488f47e43bbd7cf/umap/umap_.py#L1696).  It doesn't seem like a bug in `scipy` though, since my version is the same for both the working and broken examples (`1.2.1`).\r\n\r\n<details>\r\n<summary>Working version:</summary>\r\n\r\n```\r\nimport numpy as np\r\nfrom time import time\r\nfrom umap import UMAP\r\n\r\nto_reduce = np.random.uniform(0, 1, (5000, 25))\r\nreducer = UMAP(random_state=0, metric='euclidean', verbose=True)\r\n\r\nt1 = time()\r\nreducer.fit(to_reduce)\r\nt2 = time()\r\nprint(t2 - t1)\r\n\r\n--------------------------------------------------------\r\nUMAP(a=None, angular_rp_forest=False, b=None,\r\n     force_approximation_algorithm=False, init='spectral', learning_rate=1.0,\r\n     local_connectivity=1.0, low_memory=False, metric='euclidean',\r\n     metric_kwds=None, min_dist=0.1, n_components=2, n_epochs=None,\r\n     n_neighbors=15, negative_sample_rate=5, output_metric='euclidean',\r\n     output_metric_kwds=None, random_state=0, repulsion_strength=1.0,\r\n     set_op_mix_ratio=1.0, spread=1.0, target_metric='categorical',\r\n     target_metric_kwds=None, target_n_neighbors=-1, target_weight=0.5,\r\n     transform_queue_size=4.0, transform_seed=42, unique=False, verbose=True)\r\nConstruct fuzzy simplicial set\r\nMon Mar  2 14:57:26 2020 Finding Nearest Neighbors\r\nMon Mar  2 14:57:26 2020 Building RP forest with 9 trees\r\nMon Mar  2 14:57:26 2020 NN descent for 12 iterations\r\n\t 0  /  12\r\n\t 1  /  12\r\n\t 2  /  12\r\n\t 3  /  12\r\n\t 4  /  12\r\n\t 5  /  12\r\n\t 6  /  12\r\n\t 7  /  12\r\n\t 8  /  12\r\n\t 9  /  12\r\n\t 10  /  12\r\n\t 11  /  12\r\nMon Mar  2 14:57:33 2020 Finished Nearest Neighbor Search\r\nMon Mar  2 14:57:35 2020 Construct embedding\r\n\tcompleted  0  /  500 epochs\r\n\tcompleted  50  /  500 epochs\r\n\tcompleted  100  /  500 epochs\r\n\tcompleted  150  /  500 epochs\r\n\tcompleted  200  /  500 epochs\r\n\tcompleted  250  /  500 epochs\r\n\tcompleted  300  /  500 epochs\r\n\tcompleted  350  /  500 epochs\r\n\tcompleted  400  /  500 epochs\r\n\tcompleted  450  /  500 epochs\r\nMon Mar  2 14:57:47 2020 Finished embedding\r\n21.280228853225708\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>Broken version:</summary>\r\n\r\n```\r\nimport numpy as np\r\nfrom time import time\r\nfrom umap import UMAP\r\n\r\nto_reduce = np.random.uniform(0, 1, (5000, 25))\r\nreducer = UMAP(random_state=0, metric='euclidean', verbose=True)\r\n\r\nt1 = time()\r\nreducer.fit(to_reduce)\r\nt2 = time()\r\nprint(t2 - t1)\r\n\r\n--------------------------------------------------------\r\nUMAP(a=None, angular_rp_forest=False, b=None,\r\n     force_approximation_algorithm=False, init='spectral', learning_rate=1.0,\r\n     local_connectivity=1.0, low_memory=False, metric='euclidean',\r\n     metric_kwds=None, min_dist=0.1, n_components=2, n_epochs=None,\r\n     n_neighbors=15, negative_sample_rate=5, output_metric='euclidean',\r\n     output_metric_kwds=None, random_state=0, repulsion_strength=1.0,\r\n     set_op_mix_ratio=1.0, spread=1.0, target_metric='categorical',\r\n     target_metric_kwds=None, target_n_neighbors=-1, target_weight=0.5,\r\n     transform_queue_size=4.0, transform_seed=42, unique=False, verbose=True)\r\nConstruct fuzzy simplicial set\r\nMon Mar  2 14:52:09 2020 Finding Nearest Neighbors\r\nMon Mar  2 14:52:09 2020 Building RP forest with 9 trees\r\nMon Mar  2 14:52:10 2020 NN descent for 12 iterations\r\n\t 0  /  12\r\n\t 1  /  12\r\n\t 2  /  12\r\n\t 3  /  12\r\n\t 4  /  12\r\n\t 5  /  12\r\n\t 6  /  12\r\n\t 7  /  12\r\n\t 8  /  12\r\n\t 9  /  12\r\n\t 10  /  12\r\n\t 11  /  12\r\nMon Mar  2 14:52:17 2020 Finished Nearest Neighbor Search\r\n---------------------------------------------------------------------------\r\nKeyboardInterrupt                         Traceback (most recent call last)\r\n<ipython-input-3-e2b9ca9bf5a6> in <module>()\r\n      1 t1 = time()\r\n----> 2 reducer.fit(to_reduce)\r\n      3 t2 = time()\r\n      4 print(t2 - t1)\r\n\r\n/opt/conda/lib/python3.6/site-packages/umap/umap_.py in fit(self, X, y)\r\n   1694                 self._search_graph.data = _data\r\n   1695                 self._search_graph = self._search_graph.maximum(\r\n-> 1696                     self._search_graph.transpose()\r\n   1697                 ).tocsr()\r\n   1698 \r\n\r\n/opt/conda/lib/python3.6/site-packages/scipy/sparse/lil.py in transpose(self, axes, copy)\r\n    456 \r\n    457     def transpose(self, axes=None, copy=False):\r\n--> 458         return self.tocsr(copy=copy).transpose(axes=axes, copy=False).tolil(copy=False)\r\n    459 \r\n    460     transpose.__doc__ = spmatrix.transpose.__doc__\r\n\r\n/opt/conda/lib/python3.6/site-packages/scipy/sparse/lil.py in tocsr(self, copy)\r\n    473 \r\n    474         indptr = np.cumsum([0] + lst, dtype=idx_dtype)\r\n--> 475         indices = np.array([x for y in self.rows for x in y], dtype=idx_dtype)\r\n    476         data = np.array([x for y in self.data for x in y], dtype=self.dtype)\r\n    477 \r\n\r\n/opt/conda/lib/python3.6/site-packages/scipy/sparse/lil.py in <listcomp>(.0)\r\n    473 \r\n    474         indptr = np.cumsum([0] + lst, dtype=idx_dtype)\r\n--> 475         indices = np.array([x for y in self.rows for x in y], dtype=idx_dtype)\r\n    476         data = np.array([x for y in self.data for x in y], dtype=self.dtype)\r\n    477 \r\n\r\nKeyboardInterrupt: \r\n```\r\n</details>\r\n\r\nNote: this only happens when the data isn't \"small\" and the distance matrix doesn't get pre-computed", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/366", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/366/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/366/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/366/events", "html_url": "https://github.com/lmcinnes/umap/issues/366", "id": 573050702, "node_id": "MDU6SXNzdWU1NzMwNTA3MDI=", "number": 366, "title": "fit/transform/inverse_transform broken for custom distance metrics", "user": {"login": "paxtonfitzpatrick", "id": 26118297, "node_id": "MDQ6VXNlcjI2MTE4Mjk3", "avatar_url": "https://avatars1.githubusercontent.com/u/26118297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paxtonfitzpatrick", "html_url": "https://github.com/paxtonfitzpatrick", "followers_url": "https://api.github.com/users/paxtonfitzpatrick/followers", "following_url": "https://api.github.com/users/paxtonfitzpatrick/following{/other_user}", "gists_url": "https://api.github.com/users/paxtonfitzpatrick/gists{/gist_id}", "starred_url": "https://api.github.com/users/paxtonfitzpatrick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paxtonfitzpatrick/subscriptions", "organizations_url": "https://api.github.com/users/paxtonfitzpatrick/orgs", "repos_url": "https://api.github.com/users/paxtonfitzpatrick/repos", "events_url": "https://api.github.com/users/paxtonfitzpatrick/events{/privacy}", "received_events_url": "https://api.github.com/users/paxtonfitzpatrick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-28T22:54:15Z", "updated_at": "2020-03-04T03:00:38Z", "closed_at": "2020-03-04T03:00:38Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "hey @lmcinnes, thanks for maintaining such an awesome package.  Looks like 0.4 is getting close to release -- super exciting!  \r\n\r\nI'm running into a couple issues with using custom distance functions (using the repo, master branch, most recent commit lmcinnes/umap@1a3892610643ca0ba72a0c559488f47e43bbd7cf):\r\n1. if a callable `output_metric` is passed, [`simplicial_set_embedding` calls `optimize_layout_generic`](https://github.com/lmcinnes/umap/blob/1a3892610643ca0ba72a0c559488f47e43bbd7cf/umap/umap_.py#L1103), which fails [here](https://github.com/lmcinnes/umap/blob/1a3892610643ca0ba72a0c559488f47e43bbd7cf/umap/layouts.py#L341) with a numba `TypingError`, because it expects to be using the gradient-returning version of a built-in named metric, which would return a tuple.  This would also affect the `transform` method [here](https://github.com/lmcinnes/umap/blob/1a3892610643ca0ba72a0c559488f47e43bbd7cf/umap/umap_.py#L2074) for the same reason.\r\n2. Similarly, if a callable `metric` is passed, the `inverse_transform` method won't work because `optimize_layout_inverse` fails [here](https://github.com/lmcinnes/umap/blob/1a3892610643ca0ba72a0c559488f47e43bbd7cf/umap/layouts.py#L505) for the same reason.\r\n\r\nI'm planning to try to fix this on my own fork anyway, so I'd be happy to submit a PR when I'm done if you're interested! There are a couple different ways I think it could be addressed, depending on what you'd prefer, but each is a bit tricky and has its downsides.\r\n\r\nOh, also, it looks like the fixes I submitted in #330 were overwritten by a subsequent pull request.  If you want, I could re-add those changes.\r\n\r\nThanks again!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/365", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/365/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/365/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/365/events", "html_url": "https://github.com/lmcinnes/umap/issues/365", "id": 570546013, "node_id": "MDU6SXNzdWU1NzA1NDYwMTM=", "number": 365, "title": "Problem with import umap.plot", "user": {"login": "AnastasiiaKabeshova", "id": 6480352, "node_id": "MDQ6VXNlcjY0ODAzNTI=", "avatar_url": "https://avatars0.githubusercontent.com/u/6480352?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AnastasiiaKabeshova", "html_url": "https://github.com/AnastasiiaKabeshova", "followers_url": "https://api.github.com/users/AnastasiiaKabeshova/followers", "following_url": "https://api.github.com/users/AnastasiiaKabeshova/following{/other_user}", "gists_url": "https://api.github.com/users/AnastasiiaKabeshova/gists{/gist_id}", "starred_url": "https://api.github.com/users/AnastasiiaKabeshova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AnastasiiaKabeshova/subscriptions", "organizations_url": "https://api.github.com/users/AnastasiiaKabeshova/orgs", "repos_url": "https://api.github.com/users/AnastasiiaKabeshova/repos", "events_url": "https://api.github.com/users/AnastasiiaKabeshova/events{/privacy}", "received_events_url": "https://api.github.com/users/AnastasiiaKabeshova/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-25T12:47:50Z", "updated_at": "2020-02-26T10:56:19Z", "closed_at": "2020-02-26T10:56:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "After installing UMAP still \r\n\r\n> ModuleNotFoundError: No module named 'umap.plot' ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/360", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/360/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/360/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/360/events", "html_url": "https://github.com/lmcinnes/umap/issues/360", "id": 564554643, "node_id": "MDU6SXNzdWU1NjQ1NTQ2NDM=", "number": 360, "title": "Spectral initialization for 1D line", "user": {"login": "dkobak", "id": 8970231, "node_id": "MDQ6VXNlcjg5NzAyMzE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8970231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkobak", "html_url": "https://github.com/dkobak", "followers_url": "https://api.github.com/users/dkobak/followers", "following_url": "https://api.github.com/users/dkobak/following{/other_user}", "gists_url": "https://api.github.com/users/dkobak/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkobak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkobak/subscriptions", "organizations_url": "https://api.github.com/users/dkobak/orgs", "repos_url": "https://api.github.com/users/dkobak/repos", "events_url": "https://api.github.com/users/dkobak/events{/privacy}", "received_events_url": "https://api.github.com/users/dkobak/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-02-13T09:37:18Z", "updated_at": "2020-03-16T23:17:17Z", "closed_at": "2020-03-16T23:17:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Leland, I was playing around with embedding a 1D line and noticed that the spectral initialization does not behave like I think it should.\r\n\r\nHere is a reproducible example:\r\n\r\n```\r\nn = 10000\r\nX = np.zeros((n,3))\r\nX[:,0] = np.arange(n)\r\n\r\nfrom sklearn.manifold import SpectralEmbedding\r\nS = SpectralEmbedding(n_components=2, n_neighbors=15).fit_transform(X)\r\nZ = UMAP().fit_transform(X)\r\n\r\nplt.figure(figsize=(6,3))\r\nplt.subplot(121)\r\nplt.scatter(Z[:,0], Z[:,1], s=1, c=np.arange(n))\r\nplt.subplot(122)\r\nplt.scatter(S[:,0], S[:,1], s=1, c=np.arange(n))\r\n```\r\n\r\n![index](https://user-images.githubusercontent.com/8970231/74421054-b5a21200-4e4c-11ea-9383-f57385dc82fc.png)\r\n\r\nThe spectral embedding looks like a parabola, without any overlaps. But the UMAP result looks like a parabola folded in two. I ran it with small `n_epochs` and then it's even clearer that it is initialized with the parabola folded in two.\r\n\r\nWhy would that be?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/359", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/359/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/359/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/359/events", "html_url": "https://github.com/lmcinnes/umap/issues/359", "id": 563486932, "node_id": "MDU6SXNzdWU1NjM0ODY5MzI=", "number": 359, "title": "TypingError: non precise type pyobject", "user": {"login": "fbrundu", "id": 697622, "node_id": "MDQ6VXNlcjY5NzYyMg==", "avatar_url": "https://avatars3.githubusercontent.com/u/697622?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fbrundu", "html_url": "https://github.com/fbrundu", "followers_url": "https://api.github.com/users/fbrundu/followers", "following_url": "https://api.github.com/users/fbrundu/following{/other_user}", "gists_url": "https://api.github.com/users/fbrundu/gists{/gist_id}", "starred_url": "https://api.github.com/users/fbrundu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fbrundu/subscriptions", "organizations_url": "https://api.github.com/users/fbrundu/orgs", "repos_url": "https://api.github.com/users/fbrundu/repos", "events_url": "https://api.github.com/users/fbrundu/events{/privacy}", "received_events_url": "https://api.github.com/users/fbrundu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-11T21:24:14Z", "updated_at": "2020-02-12T02:15:42Z", "closed_at": "2020-02-12T02:15:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI am having some trouble running UMAP through [scanpy](https://icb-scanpy.readthedocs-hosted.com/en/stable/) although I think the problem is UMAP related.\r\n\r\nNumba seems unable to get the type of `dim = data.shape[1]`. Should the expression be cast to a specific type (e.g. with `astype()`) to solve the error? I am not an expert with Numba so probably it should need something different.\r\n\r\nI tried different versions of umap (even the 0.4rc1) but I am not able to get rid of the error.\r\n\r\nTraceback follows.\r\n\r\n```python\r\ncomputing neighbors\r\n---------------------------------------------------------------------------\r\nTypingError                               Traceback (most recent call last)\r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/scanpy/neighbors/__init__.py in neighbors(adata, n_neighbors, n_pcs, use_rep, knn, random_state, method, metric, metric_kwds, copy)\r\n    108         n_neighbors=n_neighbors, knn=knn, n_pcs=n_pcs, use_rep=use_rep,\r\n    109         method=method, metric=metric, metric_kwds=metric_kwds,\r\n--> 110         random_state=random_state,\r\n    111     )\r\n    112     adata.uns['neighbors'] = {}\r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/scanpy/neighbors/__init__.py in compute_neighbors(self, n_neighbors, knn, n_pcs, use_rep, method, random_state, write_knn_indices, metric, metric_kwds)\r\n    689                 metric = 'precomputed'\r\n    690             knn_indices, knn_distances, forest = compute_neighbors_umap(\r\n--> 691                 X, n_neighbors, random_state, metric=metric, metric_kwds=metric_kwds)\r\n    692             # very cautious here\r\n    693             try:\r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/scanpy/neighbors/__init__.py in compute_neighbors_umap(X, n_neighbors, random_state, metric, metric_kwds, angular, verbose)\r\n    246         X, n_neighbors, random_state=random_state,\r\n    247         metric=metric, metric_kwds=metric_kwds,\r\n--> 248         angular=angular, verbose=verbose,\r\n    249     )\r\n    250 \r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/umap/umap_.py in nearest_neighbors(X, n_neighbors, metric, metric_kwds, angular, random_state, verbose)\r\n    267             if verbose:\r\n    268                 print(ts(), \"Building RP forest with\", str(n_trees), \"trees\")\r\n--> 269             rp_forest = make_forest(X, n_neighbors, n_trees, rng_state, angular)\r\n    270             leaf_array = rptree_leaf_array(rp_forest)\r\n    271             if verbose:\r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/umap/rp_tree.py in make_forest(data, n_neighbors, n_trees, rng_state, angular)\r\n    713         result = [\r\n    714             flatten_tree(make_tree(data, rng_state, leaf_size, angular), leaf_size)\r\n--> 715             for i in range(n_trees)\r\n    716         ]\r\n    717     except (RuntimeError, RecursionError, SystemError):\r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/umap/rp_tree.py in (.0)\r\n    713         result = [\r\n    714             flatten_tree(make_tree(data, rng_state, leaf_size, angular), leaf_size)\r\n--> 715             for i in range(n_trees)\r\n    716         ]\r\n    717     except (RuntimeError, RecursionError, SystemError):\r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/umap/rp_tree.py in make_tree(data, rng_state, leaf_size, angular)\r\n    571             return make_angular_tree(data, indices, rng_state, leaf_size)\r\n    572         else:\r\n--> 573             return make_euclidean_tree(data, indices, rng_state, leaf_size)\r\n    574 \r\n    575 \r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/umap/rp_tree.py in make_euclidean_tree(data, indices, rng_state, leaf_size)\r\n    451     if indices.shape[0] > leaf_size:\r\n    452         left_indices, right_indices, hyperplane, offset = euclidean_random_projection_split(\r\n--> 453             data, indices, rng_state\r\n    454         )\r\n    455 \r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/numba/dispatcher.py in _compile_for_args(self, *args, **kws)\r\n    399                 e.patch_message(msg)\r\n    400 \r\n--> 401             error_rewrite(e, 'typing')\r\n    402         except errors.UnsupportedError as e:\r\n    403             # Something unsupported is present in the user code, add help info\r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/numba/dispatcher.py in error_rewrite(e, issue_type)\r\n    342                 raise e\r\n    343             else:\r\n--> 344                 reraise(type(e), e, None)\r\n    345 \r\n    346         argtypes = []\r\n\r\n~/.pyenv/versions/3.7.4/lib/python3.7/site-packages/numba/six.py in reraise(tp, value, tb)\r\n    666             value = tp()\r\n    667         if value.__traceback__ is not tb:\r\n--> 668             raise value.with_traceback(tb)\r\n    669         raise value\r\n    670 \r\n\r\nTypingError: Failed in nopython mode pipeline (step: nopython frontend)\r\nnon-precise type pyobject\r\n[1] During: typing of argument at .pyenv/versions/3.7.4/lib/python3.7/site-packages/umap/rp_tree.py (160)\r\n\r\nFile \"../../../../../.pyenv/versions/3.7.4/lib/python3.7/site-packages/umap/rp_tree.py\", line 160:\r\ndef euclidean_random_projection_split(data, indices, rng_state):\r\n    \r\n    \"\"\"\r\n    dim = data.shape[1]\r\n    ^\r\n\r\nThis error may have been caused by the following argument(s):\r\n- argument 0: cannot determine Numba type of \r\n\r\nThis is not usually a problem with Numba itself but instead often caused by\r\nthe use of unsupported features or an issue in resolving types.\r\n\r\nTo see Python/NumPy features supported by the latest release of Numba visit:\r\nhttp://numba.pydata.org/numba-doc/latest/reference/pysupported.html\r\nand\r\nhttp://numba.pydata.org/numba-doc/latest/reference/numpysupported.html\r\n\r\nFor more information about typing errors and how to debug them visit:\r\nhttp://numba.pydata.org/numba-doc/latest/user/troubleshoot.html#my-code-doesn-t-compile\r\n\r\nIf you think your code should work with Numba, please report the error message\r\nand traceback, along with a minimal reproducer at:\r\nhttps://github.com/numba/numba/issues/new\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/353", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/353/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/353/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/353/events", "html_url": "https://github.com/lmcinnes/umap/issues/353", "id": 557015978, "node_id": "MDU6SXNzdWU1NTcwMTU5Nzg=", "number": 353, "title": "Syntax error when importing UMAP", "user": {"login": "gclen", "id": 4321675, "node_id": "MDQ6VXNlcjQzMjE2NzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4321675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gclen", "html_url": "https://github.com/gclen", "followers_url": "https://api.github.com/users/gclen/followers", "following_url": "https://api.github.com/users/gclen/following{/other_user}", "gists_url": "https://api.github.com/users/gclen/gists{/gist_id}", "starred_url": "https://api.github.com/users/gclen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gclen/subscriptions", "organizations_url": "https://api.github.com/users/gclen/orgs", "repos_url": "https://api.github.com/users/gclen/repos", "events_url": "https://api.github.com/users/gclen/events{/privacy}", "received_events_url": "https://api.github.com/users/gclen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-29T17:41:16Z", "updated_at": "2020-02-03T18:02:35Z", "closed_at": "2020-02-03T18:02:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I run (using the master branch)\r\n\r\n```python\r\nimport umap\r\n```\r\nI get the following error\r\n\r\n```\r\n/home/gclenden/Documents/umap_fork/umap/umap_.py:1552: SyntaxWarning: \"is\" with a literal. Did you mean \"==\"?\r\n  if self.metric is \"hellinger\" and X.min() < 0:\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/349", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/349/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/349/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/349/events", "html_url": "https://github.com/lmcinnes/umap/issues/349", "id": 554833796, "node_id": "MDU6SXNzdWU1NTQ4MzM3OTY=", "number": 349, "title": "unexpected keyword argument 'output_metric'", "user": {"login": "qo4on", "id": 35609308, "node_id": "MDQ6VXNlcjM1NjA5MzA4", "avatar_url": "https://avatars2.githubusercontent.com/u/35609308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qo4on", "html_url": "https://github.com/qo4on", "followers_url": "https://api.github.com/users/qo4on/followers", "following_url": "https://api.github.com/users/qo4on/following{/other_user}", "gists_url": "https://api.github.com/users/qo4on/gists{/gist_id}", "starred_url": "https://api.github.com/users/qo4on/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qo4on/subscriptions", "organizations_url": "https://api.github.com/users/qo4on/orgs", "repos_url": "https://api.github.com/users/qo4on/repos", "events_url": "https://api.github.com/users/qo4on/events{/privacy}", "received_events_url": "https://api.github.com/users/qo4on/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-24T16:29:28Z", "updated_at": "2020-01-27T06:29:38Z", "closed_at": "2020-01-27T06:29:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://umap-learn.readthedocs.io/en/latest/embedding_space.html\r\nError in Colab:\r\n```\r\nsphere_mapper = umap.UMAP(output_metric='haversine', random_state=42).fit(digits.data)\r\n\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-25-129b8142117a> in <module>()\r\n----> 1 sphere_mapper = umap.UMAP(output_metric='haversine', random_state=42).fit(digits.data)\r\n\r\nTypeError: __init__() got an unexpected keyword argument 'output_metric'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/348", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/348/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/348/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/348/events", "html_url": "https://github.com/lmcinnes/umap/issues/348", "id": 554824452, "node_id": "MDU6SXNzdWU1NTQ4MjQ0NTI=", "number": 348, "title": "Can I use custom distance as input for UMAP", "user": {"login": "LiLin-biosoft", "id": 42806894, "node_id": "MDQ6VXNlcjQyODA2ODk0", "avatar_url": "https://avatars2.githubusercontent.com/u/42806894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LiLin-biosoft", "html_url": "https://github.com/LiLin-biosoft", "followers_url": "https://api.github.com/users/LiLin-biosoft/followers", "following_url": "https://api.github.com/users/LiLin-biosoft/following{/other_user}", "gists_url": "https://api.github.com/users/LiLin-biosoft/gists{/gist_id}", "starred_url": "https://api.github.com/users/LiLin-biosoft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LiLin-biosoft/subscriptions", "organizations_url": "https://api.github.com/users/LiLin-biosoft/orgs", "repos_url": "https://api.github.com/users/LiLin-biosoft/repos", "events_url": "https://api.github.com/users/LiLin-biosoft/events{/privacy}", "received_events_url": "https://api.github.com/users/LiLin-biosoft/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-24T16:11:55Z", "updated_at": "2020-02-03T18:04:50Z", "closed_at": "2020-02-03T18:04:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a nxn distance matrix for n objects. Can I directly use this as input rather than letting UMAP calculate the distance? The R package UMAP accepts a distance matrix but I cannot find corresponding setting  in python version.  Thank you for your help", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/346", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/346/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/346/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/346/events", "html_url": "https://github.com/lmcinnes/umap/issues/346", "id": 553157251, "node_id": "MDU6SXNzdWU1NTMxNTcyNTE=", "number": 346, "title": "THEORY: is the visualization of the result dependent on the n_components chosen?", "user": {"login": "PabloRR100", "id": 23745991, "node_id": "MDQ6VXNlcjIzNzQ1OTkx", "avatar_url": "https://avatars0.githubusercontent.com/u/23745991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PabloRR100", "html_url": "https://github.com/PabloRR100", "followers_url": "https://api.github.com/users/PabloRR100/followers", "following_url": "https://api.github.com/users/PabloRR100/following{/other_user}", "gists_url": "https://api.github.com/users/PabloRR100/gists{/gist_id}", "starred_url": "https://api.github.com/users/PabloRR100/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PabloRR100/subscriptions", "organizations_url": "https://api.github.com/users/PabloRR100/orgs", "repos_url": "https://api.github.com/users/PabloRR100/repos", "events_url": "https://api.github.com/users/PabloRR100/events{/privacy}", "received_events_url": "https://api.github.com/users/PabloRR100/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-21T21:54:47Z", "updated_at": "2020-01-27T09:58:50Z", "closed_at": "2020-01-27T09:58:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "With this question I mean the following.\r\n\r\nIf you run PCA with 50 components and you then visualize the first 3, the result is equivalent as running PCA with 3 component and visualize them.\r\n\r\nHowever, I have done the same thing with UMAP and it doesn't hold. \r\nI have run it with 3 components to later on run HDBSCAN on it. Then, visualize my clusters on a 3D scatter plot. This works fine.\r\nI repeat the experiment but projecting the data into 50 components prior to HDBSCAN, and then taken the first 3 columns of the projected data along with the labels_ from HDBSCAN. The results are very different.\r\n\r\nAny explanation behind this behaviour?\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/345", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/345/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/345/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/345/events", "html_url": "https://github.com/lmcinnes/umap/issues/345", "id": 552045392, "node_id": "MDU6SXNzdWU1NTIwNDUzOTI=", "number": 345, "title": "obtain the distance", "user": {"login": "rojinsafavi", "id": 19545198, "node_id": "MDQ6VXNlcjE5NTQ1MTk4", "avatar_url": "https://avatars3.githubusercontent.com/u/19545198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rojinsafavi", "html_url": "https://github.com/rojinsafavi", "followers_url": "https://api.github.com/users/rojinsafavi/followers", "following_url": "https://api.github.com/users/rojinsafavi/following{/other_user}", "gists_url": "https://api.github.com/users/rojinsafavi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rojinsafavi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rojinsafavi/subscriptions", "organizations_url": "https://api.github.com/users/rojinsafavi/orgs", "repos_url": "https://api.github.com/users/rojinsafavi/repos", "events_url": "https://api.github.com/users/rojinsafavi/events{/privacy}", "received_events_url": "https://api.github.com/users/rojinsafavi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-20T03:27:49Z", "updated_at": "2020-01-20T04:43:18Z", "closed_at": "2020-01-20T04:13:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way to extract the measured metric? (ex the euclidian distance used for the embedding)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/343", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/343/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/343/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/343/events", "html_url": "https://github.com/lmcinnes/umap/issues/343", "id": 551500638, "node_id": "MDU6SXNzdWU1NTE1MDA2Mzg=", "number": 343, "title": "Beginners manual", "user": {"login": "dklinkebiel", "id": 50635753, "node_id": "MDQ6VXNlcjUwNjM1NzUz", "avatar_url": "https://avatars3.githubusercontent.com/u/50635753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dklinkebiel", "html_url": "https://github.com/dklinkebiel", "followers_url": "https://api.github.com/users/dklinkebiel/followers", "following_url": "https://api.github.com/users/dklinkebiel/following{/other_user}", "gists_url": "https://api.github.com/users/dklinkebiel/gists{/gist_id}", "starred_url": "https://api.github.com/users/dklinkebiel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dklinkebiel/subscriptions", "organizations_url": "https://api.github.com/users/dklinkebiel/orgs", "repos_url": "https://api.github.com/users/dklinkebiel/repos", "events_url": "https://api.github.com/users/dklinkebiel/events{/privacy}", "received_events_url": "https://api.github.com/users/dklinkebiel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-17T16:07:17Z", "updated_at": "2020-02-03T18:05:17Z", "closed_at": "2020-02-03T18:05:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have installed both versions, 0.3.10 and 0.2.4, for \"umap-learn\". Is there a good beginners manual to get me started yet. Thanks\r\nDave", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/340", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/340/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/340/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/340/events", "html_url": "https://github.com/lmcinnes/umap/issues/340", "id": 549701097, "node_id": "MDU6SXNzdWU1NDk3MDEwOTc=", "number": 340, "title": "show_legend missing in umap.plot.connectivity", "user": {"login": "JulioBarros", "id": 17699, "node_id": "MDQ6VXNlcjE3Njk5", "avatar_url": "https://avatars3.githubusercontent.com/u/17699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JulioBarros", "html_url": "https://github.com/JulioBarros", "followers_url": "https://api.github.com/users/JulioBarros/followers", "following_url": "https://api.github.com/users/JulioBarros/following{/other_user}", "gists_url": "https://api.github.com/users/JulioBarros/gists{/gist_id}", "starred_url": "https://api.github.com/users/JulioBarros/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JulioBarros/subscriptions", "organizations_url": "https://api.github.com/users/JulioBarros/orgs", "repos_url": "https://api.github.com/users/JulioBarros/repos", "events_url": "https://api.github.com/users/JulioBarros/events{/privacy}", "received_events_url": "https://api.github.com/users/JulioBarros/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-14T17:05:37Z", "updated_at": "2020-01-15T14:06:07Z", "closed_at": "2020-01-15T14:06:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "When calling umap.plot.connectivity(mapper, show_points=True) the function tries to call  _datashade_points and pass the parameter show_legend but this variable is not defined.\r\n\r\nThis is in the version installed with:\r\n pip install git+https://github.com/lmcinnes/umap.git@0.4dev\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/337", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/337/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/337/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/337/events", "html_url": "https://github.com/lmcinnes/umap/issues/337", "id": 548483615, "node_id": "MDU6SXNzdWU1NDg0ODM2MTU=", "number": 337, "title": "Plotting a subset of points in umap.plot", "user": {"login": "gclen", "id": 4321675, "node_id": "MDQ6VXNlcjQzMjE2NzU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4321675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gclen", "html_url": "https://github.com/gclen", "followers_url": "https://api.github.com/users/gclen/followers", "following_url": "https://api.github.com/users/gclen/following{/other_user}", "gists_url": "https://api.github.com/users/gclen/gists{/gist_id}", "starred_url": "https://api.github.com/users/gclen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gclen/subscriptions", "organizations_url": "https://api.github.com/users/gclen/orgs", "repos_url": "https://api.github.com/users/gclen/repos", "events_url": "https://api.github.com/users/gclen/events{/privacy}", "received_events_url": "https://api.github.com/users/gclen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-11T21:41:09Z", "updated_at": "2020-01-14T03:35:05Z", "closed_at": "2020-01-14T03:35:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Creating this issue to go along with a pull request. \r\n\r\nIt's often useful to be able to select a subset of points to plot when exploring your data (e.g. ignoring outliers). It should be easy to select the subset (just an array of booleans) with the same number of points as the input data.\r\n\r\n```python\r\nimport pandas as pd\r\n#import numpy as np\r\nimport umap\r\nimport umap.plot\r\nfrom sklearn.datasets import load_digits\r\n#Some plotting libraries\r\nimport matplotlib.pyplot as plt\r\n%matplotlib notebook\r\nfrom bokeh.plotting import show, save, output_notebook, output_file\r\nfrom bokeh.resources import INLINE \r\noutput_notebook(resources=INLINE)\r\n\r\ndigits = load_digits()\r\n\r\nembedding = umap.UMAP().fit(digits.data)\r\n\r\nhover_df = pd.DataFrame(digits.target, columns=['target'])\r\n# Select digits less than 5\r\n# This is just an array of True/False\r\nsubset = hover_df['target'] < 5\r\n\r\nf = umap.plot.interactive(embedding, labels=hover_df['target'], hover_data=hover_df, subset_points=subset)\r\nshow(f)\r\n```\r\n\r\n\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/334", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/334/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/334/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/334/events", "html_url": "https://github.com/lmcinnes/umap/issues/334", "id": 545345409, "node_id": "MDU6SXNzdWU1NDUzNDU0MDk=", "number": 334, "title": "Import Lowering Error", "user": {"login": "adamgayoso", "id": 10859440, "node_id": "MDQ6VXNlcjEwODU5NDQw", "avatar_url": "https://avatars2.githubusercontent.com/u/10859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adamgayoso", "html_url": "https://github.com/adamgayoso", "followers_url": "https://api.github.com/users/adamgayoso/followers", "following_url": "https://api.github.com/users/adamgayoso/following{/other_user}", "gists_url": "https://api.github.com/users/adamgayoso/gists{/gist_id}", "starred_url": "https://api.github.com/users/adamgayoso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adamgayoso/subscriptions", "organizations_url": "https://api.github.com/users/adamgayoso/orgs", "repos_url": "https://api.github.com/users/adamgayoso/repos", "events_url": "https://api.github.com/users/adamgayoso/events{/privacy}", "received_events_url": "https://api.github.com/users/adamgayoso/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-04T23:32:13Z", "updated_at": "2020-02-03T18:05:52Z", "closed_at": "2020-02-03T18:05:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI'm having the same issue as in #225, except I'm on Ubuntu. This occurred for several numba versions and seems to be fixed in 0.47.0.\r\n\r\nUpdate: the issue may be coming from llvmlite==0.31.0. Downgrading to 0.30.0 fixed the issue. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/326", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/326/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/326/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/326/events", "html_url": "https://github.com/lmcinnes/umap/issues/326", "id": 536435699, "node_id": "MDU6SXNzdWU1MzY0MzU2OTk=", "number": 326, "title": "cheating UMAP when you know many pairs of proximal neighbors", "user": {"login": "bzip2", "id": 12174276, "node_id": "MDQ6VXNlcjEyMTc0Mjc2", "avatar_url": "https://avatars2.githubusercontent.com/u/12174276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bzip2", "html_url": "https://github.com/bzip2", "followers_url": "https://api.github.com/users/bzip2/followers", "following_url": "https://api.github.com/users/bzip2/following{/other_user}", "gists_url": "https://api.github.com/users/bzip2/gists{/gist_id}", "starred_url": "https://api.github.com/users/bzip2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bzip2/subscriptions", "organizations_url": "https://api.github.com/users/bzip2/orgs", "repos_url": "https://api.github.com/users/bzip2/repos", "events_url": "https://api.github.com/users/bzip2/events{/privacy}", "received_events_url": "https://api.github.com/users/bzip2/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-11T15:14:10Z", "updated_at": "2019-12-11T23:40:26Z", "closed_at": "2019-12-11T22:53:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\r\n\r\nUMAP is extraordinary and I'm trying to avoid resorting to PCA, partly out of curiosity, partly so I can claim, \"this is pure UMAP - no PCA here\". Let's say that I know of many pairs of proximal vectors, either because I've done UMAP already, or from calculating Euclidean distances on the original data. Now, I want to do UMAP on the combination of multiple data sets, and they're sufficiently different that applying the embedding of one to the other(s) might give me weird results (e.g. some degree of forced conformity). I haven't tried, but let's say it's true. At least one data set takes a long time to give me an embedding, so I'm looking for a shortcut.\r\n\r\nAn obvious shortcut to try is to avoid reclustering many pairs of vectors that I already know belong fairly close to each other in the embedding, but 1) excluding a member of each such pair, 2) doing the embedding, and 3) reapplying the embedding on excluded vectors would skew the results by altering the determination of neighboring vectors.\r\n\r\nCould I feed UMAP an initial mapping that is random except that I've set the positions of proximal pairs of vectors to be identical, or nearly identical? This seems easy to try, but I worry about violating some underlying assumption, and maybe it won't save any time.\r\n\r\nHere's another possible approach, though it would involve modifying the code, or might be completely redundant. Could I assign an optional weight to each vector (let's call it \"ego\"), an integer that represents the number of neighbors it really represents (1 by default), so that if I exclude some vectors, do the mapping with egos >=1, save the embedding, then map the excluded samples with egos = 1, I should get results similar to doing UMAP on everything, but faster?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/325", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/325/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/325/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/325/events", "html_url": "https://github.com/lmcinnes/umap/issues/325", "id": 536049612, "node_id": "MDU6SXNzdWU1MzYwNDk2MTI=", "number": 325, "title": "inverse_transform() is very slow (?) for n_components > 2", "user": {"login": "aparrish", "id": 125839, "node_id": "MDQ6VXNlcjEyNTgzOQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/125839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aparrish", "html_url": "https://github.com/aparrish", "followers_url": "https://api.github.com/users/aparrish/followers", "following_url": "https://api.github.com/users/aparrish/following{/other_user}", "gists_url": "https://api.github.com/users/aparrish/gists{/gist_id}", "starred_url": "https://api.github.com/users/aparrish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aparrish/subscriptions", "organizations_url": "https://api.github.com/users/aparrish/orgs", "repos_url": "https://api.github.com/users/aparrish/repos", "events_url": "https://api.github.com/users/aparrish/events{/privacy}", "received_events_url": "https://api.github.com/users/aparrish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-10T23:18:19Z", "updated_at": "2019-12-11T15:53:06Z", "closed_at": "2019-12-11T15:53:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The `inverse_transform()` function works great with `n_components=2`, but runs very slowly for models with `n_components` greater than 2.\r\n\r\nAbridged ipython session:\r\n\r\n```\r\nIn [1]: import umap\r\nIn [2]: import numpy as np\r\nIn [5]: from sklearn.datasets import load_digits\r\nIn [6]: X = load_digits()['data']\r\nIn [7]: %time mapper2 = umap.UMAP(n_components=2).fit(X)\r\nCPU times: user 11.8 s, sys: 107 ms, total: 11.9 s\r\nWall time: 7.66 s\r\nIn [8]: %time mapper8 = umap.UMAP(n_components=8).fit(X)\r\nCPU times: user 8.34 s, sys: 208 ms, total: 8.55 s\r\nWall time: 5.54 s\r\nIn [9]: %time t2 = mapper2.transform(X)\r\nCPU times: user 1.98 ms, sys: 975 \u00b5s, total: 2.95 ms\r\nWall time: 1.97 ms\r\nIn [10]: %time t8 = mapper8.transform(X)\r\nCPU times: user 2.09 ms, sys: 938 \u00b5s, total: 3.02 ms\r\nWall time: 1.99 ms\r\nIn [11]: %time inv_t2 = mapper2.inverse_transform(t2)\r\nCPU times: user 32.9 s, sys: 108 ms, total: 33 s\r\nWall time: 32.9 s\r\nIn [13]: %time inv_t8 = mapper8.inverse_transform(t8)\r\n```\r\n\r\nIn several experiments I've never been able to get that last line to even finish, despite waiting hours. The Python process keeps consuming more and more memory while it's working (6GB right now and growing). Experiments with `n_components=3` will finish, but seem to take 2x\u201310x as long as `n_components=2`. (This is using the `0.4dev_fix#306` branch\u2014happy to try out another!  Python 3.6.8, MacOS 10.14.6, on my aging MacBook Air, which is never going to be a machine learning workhorse but I thought it might at least be a useful data point.)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/324", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/324/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/324/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/324/events", "html_url": "https://github.com/lmcinnes/umap/issues/324", "id": 535918781, "node_id": "MDU6SXNzdWU1MzU5MTg3ODE=", "number": 324, "title": "\"No conversion from array(float64, 2d, A) to array(float32, 2d, C) for 'knn_dists'\" when calling .transform() in 0.4.0rc1", "user": {"login": "aparrish", "id": 125839, "node_id": "MDQ6VXNlcjEyNTgzOQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/125839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aparrish", "html_url": "https://github.com/aparrish", "followers_url": "https://api.github.com/users/aparrish/followers", "following_url": "https://api.github.com/users/aparrish/following{/other_user}", "gists_url": "https://api.github.com/users/aparrish/gists{/gist_id}", "starred_url": "https://api.github.com/users/aparrish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aparrish/subscriptions", "organizations_url": "https://api.github.com/users/aparrish/orgs", "repos_url": "https://api.github.com/users/aparrish/repos", "events_url": "https://api.github.com/users/aparrish/events{/privacy}", "received_events_url": "https://api.github.com/users/aparrish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-12-10T18:52:22Z", "updated_at": "2019-12-13T01:49:48Z", "closed_at": "2019-12-13T01:49:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "After installing `umap-learn` from (what looked to me like) the dev branch like so:\r\n\r\n```\r\npip install https://github.com/lmcinnes/umap/archive/0.4dev.zip\r\n```\r\n\r\nI get a weird error apparently about the data type of some internal value. Example code with stack trace included below.\r\n\r\nThis code works fine for me (in the same environment) with 0.3.10 installed instead. Strangely, it also works when I install the `0.4dev_fix#306` branch (with the pip/github zip method mentioned above). But I couldn't decipher from looking at the compare interface if `0.4dev_fix#306` is actually newer than `0.4dev`?\r\n\r\n```\r\n>>> import numpy as np\r\n>>> import umap\r\n>>> X = np.random.uniform(size=(10000, 100))\r\n>>> mapper = umap.UMAP().fit(X)\r\n>>> mapper.transform(X[:10])\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/Users/allison/tmp/umap-testing/env3/lib/python3.7/site-packages/umap/umap_.py\", line 1972, in transform\r\n    rows, cols, vals = compute_membership_strengths(indices, dists, sigmas, rhos)\r\n  File \"/Users/allison/tmp/umap-testing/env3/lib/python3.7/site-packages/numba/dispatcher.py\", line 401, in _compile_for_args\r\n    error_rewrite(e, 'typing')\r\n  File \"/Users/allison/tmp/umap-testing/env3/lib/python3.7/site-packages/numba/dispatcher.py\", line 344, in error_rewrite\r\n    reraise(type(e), e, None)\r\n  File \"/Users/allison/tmp/umap-testing/env3/lib/python3.7/site-packages/numba/six.py\", line 668, in reraise\r\n    raise value.with_traceback(tb)\r\nnumba.errors.TypingError: Failed in nopython mode pipeline (step: nopython frontend)\r\nNo conversion from array(float64, 2d, A) to array(float32, 2d, C) for 'knn_dists', defined at None\r\n\r\nFile \"env3/lib/python3.7/site-packages/umap/umap_.py\", line 440:\r\ndef compute_membership_strengths(knn_indices, knn_dists, sigmas, rhos):\r\n    <source elided>\r\n    \"\"\"\r\n    n_samples = knn_indices.shape[0]\r\n    ^\r\n```\r\n\r\nThis is in a fresh Python 3.7.0 venv (MacOS 10.14.6). My `pip list`:\r\n\r\n```\r\nPackage      Version \r\n------------ --------\r\njoblib       0.14.1  \r\nllvmlite     0.30.0  \r\nnumba        0.46.0  \r\nnumpy        1.17.4  \r\npip          10.0.1  \r\nscikit-learn 0.22    \r\nscipy        1.3.3   \r\nsetuptools   39.0.1  \r\ntbb          2019.0  \r\numap-learn   0.4.0rc1\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/321", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/321/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/321/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/321/events", "html_url": "https://github.com/lmcinnes/umap/issues/321", "id": 532503921, "node_id": "MDU6SXNzdWU1MzI1MDM5MjE=", "number": 321, "title": "AttributeError: module 'umap' has no attribute 'plot'", "user": {"login": "ssimontacchi", "id": 29785389, "node_id": "MDQ6VXNlcjI5Nzg1Mzg5", "avatar_url": "https://avatars2.githubusercontent.com/u/29785389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssimontacchi", "html_url": "https://github.com/ssimontacchi", "followers_url": "https://api.github.com/users/ssimontacchi/followers", "following_url": "https://api.github.com/users/ssimontacchi/following{/other_user}", "gists_url": "https://api.github.com/users/ssimontacchi/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssimontacchi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssimontacchi/subscriptions", "organizations_url": "https://api.github.com/users/ssimontacchi/orgs", "repos_url": "https://api.github.com/users/ssimontacchi/repos", "events_url": "https://api.github.com/users/ssimontacchi/events{/privacy}", "received_events_url": "https://api.github.com/users/ssimontacchi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-12-04T07:38:49Z", "updated_at": "2020-03-26T18:12:32Z", "closed_at": "2019-12-05T10:55:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am having a hard time installing umap.plot. My goal is to make the interactive plot [here](https://umap-learn.readthedocs.io/en/0.4dev/plotting.html). \r\n\r\nI am using iOS Mojave 10.14.5, umap-learn 0.3.10, Python 3.7.4. \r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/320", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/320/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/320/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/320/events", "html_url": "https://github.com/lmcinnes/umap/issues/320", "id": 526667534, "node_id": "MDU6SXNzdWU1MjY2Njc1MzQ=", "number": 320, "title": "Warning message: failed creating initial embedding; using random embedding instead", "user": {"login": "GMFranceschini", "id": 26085801, "node_id": "MDQ6VXNlcjI2MDg1ODAx", "avatar_url": "https://avatars3.githubusercontent.com/u/26085801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GMFranceschini", "html_url": "https://github.com/GMFranceschini", "followers_url": "https://api.github.com/users/GMFranceschini/followers", "following_url": "https://api.github.com/users/GMFranceschini/following{/other_user}", "gists_url": "https://api.github.com/users/GMFranceschini/gists{/gist_id}", "starred_url": "https://api.github.com/users/GMFranceschini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GMFranceschini/subscriptions", "organizations_url": "https://api.github.com/users/GMFranceschini/orgs", "repos_url": "https://api.github.com/users/GMFranceschini/repos", "events_url": "https://api.github.com/users/GMFranceschini/events{/privacy}", "received_events_url": "https://api.github.com/users/GMFranceschini/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-21T15:29:41Z", "updated_at": "2019-11-21T19:40:19Z", "closed_at": "2019-11-21T17:44:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, \r\nI am trying to perform umap on a dataset of ~5000 observations and 20 features (selected with previous PCA), using the R implementation provided by the `umap` package.\r\n\r\nWhen computing UMAP I get this warning message: `Warning message:\r\nfailed to create initial embedding; using random embedding insteadx`.\r\nSo the spectral initialization is not working.\r\nHow should I tackle this sort of instability?\r\n\r\nPlots are quite different from each other in different runs, and I would like something reproducible and possibly robust. I imagine this could be due to my data, but I wasn't able to find help about that in the UMAP documentation.\r\n\r\nFeel free to close this issue if it's not appropriate for this repo,\r\nThank you for your kind attention", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/318", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/318/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/318/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/318/events", "html_url": "https://github.com/lmcinnes/umap/issues/318", "id": 524643121, "node_id": "MDU6SXNzdWU1MjQ2NDMxMjE=", "number": 318, "title": "Temporal embeddings with output_metric?", "user": {"login": "MNoichl", "id": 34612138, "node_id": "MDQ6VXNlcjM0NjEyMTM4", "avatar_url": "https://avatars0.githubusercontent.com/u/34612138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MNoichl", "html_url": "https://github.com/MNoichl", "followers_url": "https://api.github.com/users/MNoichl/followers", "following_url": "https://api.github.com/users/MNoichl/following{/other_user}", "gists_url": "https://api.github.com/users/MNoichl/gists{/gist_id}", "starred_url": "https://api.github.com/users/MNoichl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MNoichl/subscriptions", "organizations_url": "https://api.github.com/users/MNoichl/orgs", "repos_url": "https://api.github.com/users/MNoichl/repos", "events_url": "https://api.github.com/users/MNoichl/events{/privacy}", "received_events_url": "https://api.github.com/users/MNoichl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-11-18T21:57:00Z", "updated_at": "2019-12-11T10:33:31Z", "closed_at": "2019-12-11T10:33:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "TLDR: _Could the new output_metric feature be used to produce a umap-embedding with one interpretable axis?_\r\n\r\nThanks for the library in general, and the great maintainance!\r\n\r\nI'm trying to improve on embeddings with a temporal axis, as discussed here:\r\nhttps://github.com/lmcinnes/umap/issues/137\r\n\r\nI was wondering if this was possible by defining an embedding space (https://umap-learn.readthedocs.io/en/0.4dev/embedding_space.html), in which one dimenson is fixed to the timestamps of the datapoints, while they can freely arrange themselves on the other dimension(s). \r\n\r\nSomewhat like what is happening here:\r\nhttps://blockbuilder.org/MNoichl/8fa55c9b03008a1138f22be87444fe19\r\n\r\nIs this possible, and how could one go about implementing it?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/315", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/315/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/315/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/315/events", "html_url": "https://github.com/lmcinnes/umap/issues/315", "id": 511832109, "node_id": "MDU6SXNzdWU1MTE4MzIxMDk=", "number": 315, "title": "Arxiv UMAP paper algorithm 2 typo?", "user": {"login": "sleighsoft", "id": 9438971, "node_id": "MDQ6VXNlcjk0Mzg5NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/9438971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sleighsoft", "html_url": "https://github.com/sleighsoft", "followers_url": "https://api.github.com/users/sleighsoft/followers", "following_url": "https://api.github.com/users/sleighsoft/following{/other_user}", "gists_url": "https://api.github.com/users/sleighsoft/gists{/gist_id}", "starred_url": "https://api.github.com/users/sleighsoft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sleighsoft/subscriptions", "organizations_url": "https://api.github.com/users/sleighsoft/orgs", "repos_url": "https://api.github.com/users/sleighsoft/repos", "events_url": "https://api.github.com/users/sleighsoft/events{/privacy}", "received_events_url": "https://api.github.com/users/sleighsoft/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-24T09:46:38Z", "updated_at": "2019-11-04T10:33:35Z", "closed_at": "2019-11-04T10:33:34Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "![grafik](https://user-images.githubusercontent.com/9438971/67473923-d226fe00-f653-11e9-9520-19ccbb29db80.png)\r\n\r\nShould the function return `fs-set_1`?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/312", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/312/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/312/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/312/events", "html_url": "https://github.com/lmcinnes/umap/issues/312", "id": 511326056, "node_id": "MDU6SXNzdWU1MTEzMjYwNTY=", "number": 312, "title": "loading umap with joblib error (\"RuntimeError: incompatible bytecode version\")", "user": {"login": "shashi-netra", "id": 7644847, "node_id": "MDQ6VXNlcjc2NDQ4NDc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7644847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shashi-netra", "html_url": "https://github.com/shashi-netra", "followers_url": "https://api.github.com/users/shashi-netra/followers", "following_url": "https://api.github.com/users/shashi-netra/following{/other_user}", "gists_url": "https://api.github.com/users/shashi-netra/gists{/gist_id}", "starred_url": "https://api.github.com/users/shashi-netra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shashi-netra/subscriptions", "organizations_url": "https://api.github.com/users/shashi-netra/orgs", "repos_url": "https://api.github.com/users/shashi-netra/repos", "events_url": "https://api.github.com/users/shashi-netra/events{/privacy}", "received_events_url": "https://api.github.com/users/shashi-netra/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-23T13:32:07Z", "updated_at": "2019-10-23T21:25:02Z", "closed_at": "2019-10-23T21:25:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am saving a UMAP object into a `joblib` file on an Ubuntu box and then loading the Umap object on my mbp. I get this error:\r\n\r\n```\r\nxxx@xxx-MBP jobs % python3                   \r\nPython 3.7.3 (default, May 29 2019, 13:53:17) \r\n[Clang 10.0.1 (clang-1001.0.46.4)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import joblib\r\n>>> umap = joblib.load(\"clf_umap-1000.job\")\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.7/site-packages/joblib/numpy_pickle.py\", line 605, in load\r\n    obj = _unpickle(fobj, filename, mmap_mode)\r\n  File \"/usr/local/lib/python3.7/site-packages/joblib/numpy_pickle.py\", line 529, in _unpickle\r\n    obj = unpickler.load()\r\n  File \"/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/pickle.py\", line 1085, in load\r\n    dispatch[key[0]](self)\r\n  File \"/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/pickle.py\", line 1433, in load_reduce\r\n    stack[-1] = func(*args)\r\n  File \"/usr/local/lib/python3.7/site-packages/numba/serialize.py\", line 31, in _rebuild_reduction\r\n    return cls._rebuild(*args)\r\n  File \"/usr/local/lib/python3.7/site-packages/numba/dispatcher.py\", line 715, in _rebuild\r\n    py_func = serialize._rebuild_function(*func_reduced)\r\n  File \"/usr/local/lib/python3.7/site-packages/numba/serialize.py\", line 99, in _rebuild_function\r\n    code = _rebuild_code(*code_reduced)\r\n  File \"/usr/local/lib/python3.7/site-packages/numba/serialize.py\", line 118, in _rebuild_code\r\n    raise RuntimeError(\"incompatible bytecode version\")\r\nRuntimeError: incompatible bytecode version\r\n```\r\nI can run the same Umap object fine on the Ubuntu box. I have verified the `joblib`, `numba` and `umap` libraries are both the same version on both. what could I be doing wrong? I suspect this is some dependency incompatibility.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/309", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/309/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/309/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/309/events", "html_url": "https://github.com/lmcinnes/umap/issues/309", "id": 505355252, "node_id": "MDU6SXNzdWU1MDUzNTUyNTI=", "number": 309, "title": "Dead kernel when fitting UMAP", "user": {"login": "ydennisy", "id": 10243849, "node_id": "MDQ6VXNlcjEwMjQzODQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/10243849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ydennisy", "html_url": "https://github.com/ydennisy", "followers_url": "https://api.github.com/users/ydennisy/followers", "following_url": "https://api.github.com/users/ydennisy/following{/other_user}", "gists_url": "https://api.github.com/users/ydennisy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ydennisy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ydennisy/subscriptions", "organizations_url": "https://api.github.com/users/ydennisy/orgs", "repos_url": "https://api.github.com/users/ydennisy/repos", "events_url": "https://api.github.com/users/ydennisy/events{/privacy}", "received_events_url": "https://api.github.com/users/ydennisy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-10-10T15:42:10Z", "updated_at": "2020-05-14T10:53:06Z", "closed_at": "2019-10-12T15:21:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have installed UMAP, when I try and run it in my notebook I do not get any errors, but rather a dead kernel.\r\n\r\nThe terminal in which I have started the notebook has the following error:\r\n\r\n```\r\nAssertion failed: (PassInf && \"Expected all immutable passes to be initialized\"), function addImmutablePass, file /Users/buildbot/miniconda3/conda-bld/llvmdev_1556270736866/work/lib/IR/LegacyPassManager.cpp, line 849.\r\n```\r\n\r\nAny ideas?\r\n\r\n**EDIT**:\r\n\r\nSo I managed to get it to work by executing each of the following lines separately:\r\n```\r\nimport umap\r\nreducer = umap.UMAP()\r\nembedding = reducer.fit_transform(X)\r\n```\r\n\r\nHowever when they are in a single notebook block they kill the kernel... how odd!!!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/306", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/306/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/306/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/306/events", "html_url": "https://github.com/lmcinnes/umap/issues/306", "id": 504481150, "node_id": "MDU6SXNzdWU1MDQ0ODExNTA=", "number": 306, "title": "Setting numba threading layer triggers other numba bug", "user": {"login": "ivirshup", "id": 8238804, "node_id": "MDQ6VXNlcjgyMzg4MDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/8238804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivirshup", "html_url": "https://github.com/ivirshup", "followers_url": "https://api.github.com/users/ivirshup/followers", "following_url": "https://api.github.com/users/ivirshup/following{/other_user}", "gists_url": "https://api.github.com/users/ivirshup/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivirshup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivirshup/subscriptions", "organizations_url": "https://api.github.com/users/ivirshup/orgs", "repos_url": "https://api.github.com/users/ivirshup/repos", "events_url": "https://api.github.com/users/ivirshup/events{/privacy}", "received_events_url": "https://api.github.com/users/ivirshup/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605079251, "node_id": "MDU6TGFiZWwxNjA1MDc5MjUx", "url": "https://api.github.com/repos/lmcinnes/umap/labels/0.4", "name": "0.4", "color": "f2e559", "default": false, "description": ""}, {"id": 638315744, "node_id": "MDU6TGFiZWw2MzgzMTU3NDQ=", "url": "https://api.github.com/repos/lmcinnes/umap/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-09T08:00:13Z", "updated_at": "2019-10-16T16:21:42Z", "closed_at": "2019-10-16T16:21:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Setting the default threading layer here:\r\n\r\nhttps://github.com/lmcinnes/umap/blob/c61cdfe124ff570ba69a0bc7cdb024ae941531ee/umap/__init__.py#L3-L6\r\n\r\nCauses the workaround of installing `tbb` for this (https://github.com/numba/numba/issues/4484) numba parallelism bug not to work. \r\n\r\nIt's a little unclear to me if the original issue is resolved. If so, could these lines just get removed?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/305", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/305/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/305/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/305/events", "html_url": "https://github.com/lmcinnes/umap/issues/305", "id": 504314947, "node_id": "MDU6SXNzdWU1MDQzMTQ5NDc=", "number": 305, "title": "Problem in using umap.plot", "user": {"login": "Zafiirah13", "id": 20860570, "node_id": "MDQ6VXNlcjIwODYwNTcw", "avatar_url": "https://avatars2.githubusercontent.com/u/20860570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zafiirah13", "html_url": "https://github.com/Zafiirah13", "followers_url": "https://api.github.com/users/Zafiirah13/followers", "following_url": "https://api.github.com/users/Zafiirah13/following{/other_user}", "gists_url": "https://api.github.com/users/Zafiirah13/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zafiirah13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zafiirah13/subscriptions", "organizations_url": "https://api.github.com/users/Zafiirah13/orgs", "repos_url": "https://api.github.com/users/Zafiirah13/repos", "events_url": "https://api.github.com/users/Zafiirah13/events{/privacy}", "received_events_url": "https://api.github.com/users/Zafiirah13/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-10-08T22:39:24Z", "updated_at": "2020-04-03T20:32:37Z", "closed_at": "2019-10-09T08:03:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm trying to use umap.plot following the instruction from this [umap-plotting](https://umap-learn.readthedocs.io/en/0.4dev/plotting.html) but I am unsuccesful. I am getting this error:\r\n\r\n`import umap.plot`\r\n\r\nImportError                               Traceback (most recent call last)\r\n<ipython-input-7-ce12e43d9970> in <module>()\r\n----> 1 import umap.plot\r\n\r\nImportError: No module named 'umap.plot'\r\n\r\nI have installed all dependencies mentioned in the link above but I'm still getting the same error.\r\nAny help will be useful, thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/301", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/301/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/301/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/301/events", "html_url": "https://github.com/lmcinnes/umap/issues/301", "id": 500026077, "node_id": "MDU6SXNzdWU1MDAwMjYwNzc=", "number": 301, "title": "Does UMAP1 captures more variance than UMAP2?", "user": {"login": "danshu", "id": 9067238, "node_id": "MDQ6VXNlcjkwNjcyMzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/9067238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danshu", "html_url": "https://github.com/danshu", "followers_url": "https://api.github.com/users/danshu/followers", "following_url": "https://api.github.com/users/danshu/following{/other_user}", "gists_url": "https://api.github.com/users/danshu/gists{/gist_id}", "starred_url": "https://api.github.com/users/danshu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danshu/subscriptions", "organizations_url": "https://api.github.com/users/danshu/orgs", "repos_url": "https://api.github.com/users/danshu/repos", "events_url": "https://api.github.com/users/danshu/events{/privacy}", "received_events_url": "https://api.github.com/users/danshu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-30T03:09:15Z", "updated_at": "2019-10-03T04:06:09Z", "closed_at": "2019-10-03T04:06:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm using UMAP for analyzing some single cell RNA-seq data. In practice, I usually find out that UMAP1 separates cells with more biological distances.  In other words,  if there are two divergent groups of cells, they will usually be separated by UMAP1 instead of UMAP2. However, unlike PCA, UMAP seems doesn't seem to have such a property. Any possible explanations?\r\n\r\nBest,\r\nDanshu", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/300", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/300/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/300/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/300/events", "html_url": "https://github.com/lmcinnes/umap/issues/300", "id": 498731299, "node_id": "MDU6SXNzdWU0OTg3MzEyOTk=", "number": 300, "title": "Should be resolved in 0.3.10", "user": {"login": "penglbio", "id": 16201392, "node_id": "MDQ6VXNlcjE2MjAxMzky", "avatar_url": "https://avatars2.githubusercontent.com/u/16201392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penglbio", "html_url": "https://github.com/penglbio", "followers_url": "https://api.github.com/users/penglbio/followers", "following_url": "https://api.github.com/users/penglbio/following{/other_user}", "gists_url": "https://api.github.com/users/penglbio/gists{/gist_id}", "starred_url": "https://api.github.com/users/penglbio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penglbio/subscriptions", "organizations_url": "https://api.github.com/users/penglbio/orgs", "repos_url": "https://api.github.com/users/penglbio/repos", "events_url": "https://api.github.com/users/penglbio/events{/privacy}", "received_events_url": "https://api.github.com/users/penglbio/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-26T08:17:01Z", "updated_at": "2019-09-26T08:59:10Z", "closed_at": "2019-09-26T08:59:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Should be resolved in 0.3.10\r\nI also have same problem with you. So is the warning caused by the umap-learn package? \r\n_Originally posted by @sleighsoft in https://github.com/lmcinnes/umap/issues/252#issuecomment-528449868_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/290", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/290/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/290/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/290/events", "html_url": "https://github.com/lmcinnes/umap/issues/290", "id": 489516944, "node_id": "MDU6SXNzdWU0ODk1MTY5NDQ=", "number": 290, "title": "Typing Error, on Jupyter, Anaconda, Windows 10, Python 3", "user": {"login": "Schrodinger-cat-kz", "id": 48585802, "node_id": "MDQ6VXNlcjQ4NTg1ODAy", "avatar_url": "https://avatars1.githubusercontent.com/u/48585802?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Schrodinger-cat-kz", "html_url": "https://github.com/Schrodinger-cat-kz", "followers_url": "https://api.github.com/users/Schrodinger-cat-kz/followers", "following_url": "https://api.github.com/users/Schrodinger-cat-kz/following{/other_user}", "gists_url": "https://api.github.com/users/Schrodinger-cat-kz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Schrodinger-cat-kz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Schrodinger-cat-kz/subscriptions", "organizations_url": "https://api.github.com/users/Schrodinger-cat-kz/orgs", "repos_url": "https://api.github.com/users/Schrodinger-cat-kz/repos", "events_url": "https://api.github.com/users/Schrodinger-cat-kz/events{/privacy}", "received_events_url": "https://api.github.com/users/Schrodinger-cat-kz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2019-09-05T04:09:24Z", "updated_at": "2019-09-07T20:58:07Z", "closed_at": "2019-09-05T19:09:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\ntried on MNIST\r\nand tried all versions of installation,\r\nAnaconda constantly throws following error\r\n\r\n![image](https://user-images.githubusercontent.com/48585802/64311199-058acc00-cfc5-11e9-9748-a621ceafaafb.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/289", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/289/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/289/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/289/events", "html_url": "https://github.com/lmcinnes/umap/issues/289", "id": 489452298, "node_id": "MDU6SXNzdWU0ODk0NTIyOTg=", "number": 289, "title": "ccccccjdejdtvedicnfnehgblgbdrfhrrvvrftluehnv", "user": {"login": "hy395", "id": 5845484, "node_id": "MDQ6VXNlcjU4NDU0ODQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/5845484?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hy395", "html_url": "https://github.com/hy395", "followers_url": "https://api.github.com/users/hy395/followers", "following_url": "https://api.github.com/users/hy395/following{/other_user}", "gists_url": "https://api.github.com/users/hy395/gists{/gist_id}", "starred_url": "https://api.github.com/users/hy395/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hy395/subscriptions", "organizations_url": "https://api.github.com/users/hy395/orgs", "repos_url": "https://api.github.com/users/hy395/repos", "events_url": "https://api.github.com/users/hy395/events{/privacy}", "received_events_url": "https://api.github.com/users/hy395/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-04T23:31:31Z", "updated_at": "2019-09-04T23:32:28Z", "closed_at": "2019-09-04T23:32:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/288", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/288/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/288/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/288/events", "html_url": "https://github.com/lmcinnes/umap/issues/288", "id": 487738704, "node_id": "MDU6SXNzdWU0ODc3Mzg3MDQ=", "number": 288, "title": "What is the mathematical logic of running UMAP multiple times?", "user": {"login": "davisidarta", "id": 44589562, "node_id": "MDQ6VXNlcjQ0NTg5NTYy", "avatar_url": "https://avatars0.githubusercontent.com/u/44589562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davisidarta", "html_url": "https://github.com/davisidarta", "followers_url": "https://api.github.com/users/davisidarta/followers", "following_url": "https://api.github.com/users/davisidarta/following{/other_user}", "gists_url": "https://api.github.com/users/davisidarta/gists{/gist_id}", "starred_url": "https://api.github.com/users/davisidarta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davisidarta/subscriptions", "organizations_url": "https://api.github.com/users/davisidarta/orgs", "repos_url": "https://api.github.com/users/davisidarta/repos", "events_url": "https://api.github.com/users/davisidarta/events{/privacy}", "received_events_url": "https://api.github.com/users/davisidarta/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-08-31T06:53:42Z", "updated_at": "2019-09-11T04:09:23Z", "closed_at": "2019-09-11T04:09:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi! I love UMAP and use it extensively for my analysis. \r\n\r\nI'm developing new single-cell visualization methods and came up with a particularly interesting Riemannian-manifold learning solution. I'm then using UMAP on this data, rather than using traditional PCA metrics. \r\n\r\nWhile running UMAP in these settings, it happened to me that data intrinsic dimensionality was too high for a more intuitive interpretation of the data even with 3D UMAP plots. I then tried running UMAP with 100 components and then gave these as an input to a new UMAP embedding.\r\n```\r\n\r\n#In Seurat v3:\r\n\r\nneu <- RunUMAP(neu, reduction = 'Beltrami', dims = 1:100, min.dist = 0.5, reduction.key = 'dbMAP_', n.components = 100)\r\ndual <- neu@reductions$umap@cell.embeddings\r\nneu@reductions$dual@cell.embeddings <- dual\r\n\r\nneu <- RunUMAP(neu, reduction = 'dual', dims = 1:100, min.dist = 0.5, reduction.key = 'dbMAP_', n.components = 3)\r\ntriple <- neu@reductions$umap@cell.embeddings\r\nneu@reductions$triple <- neu@reductions$dual\r\nrownames(triple) <- colnames(neu)\r\nneu@reductions$triple@cell.embeddings <- triple\r\n\r\nneu <- RunUMAP(neu, reduction = 'triple', dims = 1:100, min.dist = 0.5, reduction.key = 'dbMAP_', n.components = 3)\r\n\r\n```\r\nI've uploaded the resulting plots [here](https://gofile.io/?c=eRndhk).  Surprisingly, initial clusters were more aligned after this. Although the results are reasonably similar, they do differ in the resulting branching resolution. This is **interesting**.\r\n\r\nHowever, as I don't understand the internal mechanics of UMAP, I'm unsure if visualizing data through these 'multi-embedded-embeddings' is reliable at all. What is the mathematical logic of running UMAP multiple times? Is there any logic at all in it? \r\n\r\n Any clues from the developers or the UMAP community?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/280", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/280/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/280/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/280/events", "html_url": "https://github.com/lmcinnes/umap/issues/280", "id": 481971243, "node_id": "MDU6SXNzdWU0ODE5NzEyNDM=", "number": 280, "title": "import umap fails due to inability to load share object file llvmlite when importing numba ", "user": {"login": "LaithYZumot", "id": 15268563, "node_id": "MDQ6VXNlcjE1MjY4NTYz", "avatar_url": "https://avatars1.githubusercontent.com/u/15268563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LaithYZumot", "html_url": "https://github.com/LaithYZumot", "followers_url": "https://api.github.com/users/LaithYZumot/followers", "following_url": "https://api.github.com/users/LaithYZumot/following{/other_user}", "gists_url": "https://api.github.com/users/LaithYZumot/gists{/gist_id}", "starred_url": "https://api.github.com/users/LaithYZumot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LaithYZumot/subscriptions", "organizations_url": "https://api.github.com/users/LaithYZumot/orgs", "repos_url": "https://api.github.com/users/LaithYZumot/repos", "events_url": "https://api.github.com/users/LaithYZumot/events{/privacy}", "received_events_url": "https://api.github.com/users/LaithYZumot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-18T09:03:37Z", "updated_at": "2019-08-18T09:22:45Z", "closed_at": "2019-08-18T09:22:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Python 3.6.9 (default, Jul  3 2019, 15:36:16) \r\n[GCC 5.4.0 20160609] on linux\r\n>>> import umap\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.6/dist-packages/umap/__init__.py\", line 1, in <module>\r\n    from .umap_ import UMAP\r\n  File \"/usr/local/lib/python3.6/dist-packages/umap/umap_.py\", line 24, in <module>\r\n    import numba\r\n  File \"/usr/local/lib/python3.6/dist-packages/numba-0.45.1-py3.6-linux-x86_64.egg/numba/__init__.py\", line 15, in <module>\r\n    from . import config, errors, _runtests as runtests, types\r\n  File \"/usr/local/lib/python3.6/dist-packages/numba-0.45.1-py3.6-linux-x86_64.egg/numba/config.py\", line 18, in <module>\r\n    import llvmlite.binding as ll\r\n  File \"/usr/local/lib/python3.6/dist-packages/llvmlite-0.29.0-py3.6.egg/llvmlite/binding/__init__.py\", line 6, in <module>\r\n    from .dylib import *\r\n  File \"/usr/local/lib/python3.6/dist-packages/llvmlite-0.29.0-py3.6.egg/llvmlite/binding/dylib.py\", line 4, in <module>\r\n    from . import ffi\r\n  File \"/usr/local/lib/python3.6/dist-packages/llvmlite-0.29.0-py3.6.egg/llvmlite/binding/ffi.py\", line 154, in <module>\r\n    raise OSError(\"Could not load shared object file: {}\".format(_lib_name))\r\nOSError: Could not load shared object file: libllvmlite.so", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/277", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/277/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/277/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/277/events", "html_url": "https://github.com/lmcinnes/umap/issues/277", "id": 481069246, "node_id": "MDU6SXNzdWU0ODEwNjkyNDY=", "number": 277, "title": "Error in py_call_impl(callable, dots$args, dots$keywords) :   AttributeError: eliminate_zeros not found", "user": {"login": "lay-lei", "id": 54137476, "node_id": "MDQ6VXNlcjU0MTM3NDc2", "avatar_url": "https://avatars3.githubusercontent.com/u/54137476?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lay-lei", "html_url": "https://github.com/lay-lei", "followers_url": "https://api.github.com/users/lay-lei/followers", "following_url": "https://api.github.com/users/lay-lei/following{/other_user}", "gists_url": "https://api.github.com/users/lay-lei/gists{/gist_id}", "starred_url": "https://api.github.com/users/lay-lei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lay-lei/subscriptions", "organizations_url": "https://api.github.com/users/lay-lei/orgs", "repos_url": "https://api.github.com/users/lay-lei/repos", "events_url": "https://api.github.com/users/lay-lei/events{/privacy}", "received_events_url": "https://api.github.com/users/lay-lei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-15T09:26:37Z", "updated_at": "2019-09-05T16:24:36Z", "closed_at": "2019-09-05T16:24:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "hello, I use pip3 install umap-learn and want to use it in R, but I get error when it running:\r\nleft_lung <- RunUMAP(left_lung, dims = 1:15)\r\nUMAP(a=None, angular_rp_forest=False, b=None, init='spectral',\r\n   learning_rate=1.0, local_connectivity=1, metric='correlation',\r\n   metric_kwds=None, min_dist=0.3, n_components=2, n_epochs=None,\r\n   n_neighbors=30, negative_sample_rate=5, random_state=None,\r\n   repulsion_strength=1.0, set_op_mix_ratio=1.0, spread=1.0,\r\n   target_metric='categorical', target_metric_kwds=None,\r\n   target_n_neighbors=-1, target_weight=0.5, transform_queue_size=4.0,\r\n   transform_seed=42, verbose=True)\r\nConstruct fuzzy simplicial set\r\n         0  /  13\r\n         1  /  13\r\n         2  /  13\r\nError in py_call_impl(callable, dots$args, dots$keywords) :\r\n  AttributeError: eliminate_zeros not found\r\n\r\nDetailed traceback:\r\n  File \"/usr/local/lib/python2.7/dist-packages/umap/umap_.py\", line 1564, in fit_transform\r\n    self.fit(X, y)\r\n  File \"/usr/local/lib/python2.7/dist-packages/umap/umap_.py\", line 1422, in fit\r\n    self.verbose,\r\n  File \"/usr/lib/python2.7/dist-packages/scipy/sparse/base.py\", line 525, in __getattr__\r\n    raise AttributeError(attr + \" not found\")\r\n\r\n\r\nI want to know how to deal with this problem,thank you!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/275", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/275/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/275/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/275/events", "html_url": "https://github.com/lmcinnes/umap/issues/275", "id": 480591271, "node_id": "MDU6SXNzdWU0ODA1OTEyNzE=", "number": 275, "title": "fuzzy_simplical_set has more than n_neighbors", "user": {"login": "sleighsoft", "id": 9438971, "node_id": "MDQ6VXNlcjk0Mzg5NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/9438971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sleighsoft", "html_url": "https://github.com/sleighsoft", "followers_url": "https://api.github.com/users/sleighsoft/followers", "following_url": "https://api.github.com/users/sleighsoft/following{/other_user}", "gists_url": "https://api.github.com/users/sleighsoft/gists{/gist_id}", "starred_url": "https://api.github.com/users/sleighsoft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sleighsoft/subscriptions", "organizations_url": "https://api.github.com/users/sleighsoft/orgs", "repos_url": "https://api.github.com/users/sleighsoft/repos", "events_url": "https://api.github.com/users/sleighsoft/events{/privacy}", "received_events_url": "https://api.github.com/users/sleighsoft/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-14T10:03:24Z", "updated_at": "2019-08-20T08:16:15Z", "closed_at": "2019-08-19T11:10:09Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "In the below example setting `n_neighbors=3` on a `[5,2]` dataset will yield a fuzzy simplical set where some points have only 2 neighbors and others have 4. Am I interpreting the data structure incorrectly or is this a bug?\r\n\r\n```python\r\nimport warnings\r\nwarnings.filterwarnings(\"ignore\")\r\n\r\nimport umap\r\nimport numpy as np\r\nfrom sklearn.metrics import pairwise_distances\r\n\r\nn_neighbors = 3\r\nrandom_state = np.random.seed()\r\nmetric = 'euclidean'\r\n\r\ndef fuzzy(data):\r\n    d_mat = pairwise_distances(data, metric=metric)\r\n\r\n    print(d_mat)\r\n\r\n    fuzzy_set = umap.umap_.fuzzy_simplicial_set(\r\n        d_mat,\r\n        n_neighbors,\r\n        random_state,\r\n        'precomputed',\r\n        metric_kwds={},\r\n        knn_indices=None,\r\n        knn_dists=None,\r\n        angular=False,\r\n        set_op_mix_ratio=1.0,\r\n        local_connectivity=1.0,\r\n        verbose=False,\r\n    )\r\n\r\n    print(fuzzy_set)\r\n    return fuzzy_set\r\n\r\ndata = np.array([\r\n    [1., 0.],\r\n    [2., 0.],\r\n    [4., 0.],\r\n    [8., 0.],\r\n    [13., 0.],\r\n])\r\n\r\nprint('Data:', data)\r\ndata_fuzzy = fuzzy(data)\r\n```\r\nThis will print\r\n```\r\n  (0, 1)        1.0\r\n  (0, 2)        0.827749554284373\r\n  (1, 0)        1.0\r\n  (1, 2)        1.0\r\n  (2, 0)        0.827749554284373\r\n  (2, 1)        1.0\r\n  (2, 3)        1.0\r\n  (2, 4)        0.5849693436435967\r\n  (3, 2)        1.0\r\n  (3, 4)        1.0\r\n  (4, 2)        0.5849693436435967\r\n  (4, 3)        1.0\r\n```\r\n\r\nNow `Point 2` has 3 neighbors but it should have only 2. The additional neighbor is introduced here:\r\nhttps://github.com/lmcinnes/umap/blob/74a7b3e75362fa6eb3318a292e5364c12c43df62/umap/umap_.py#L490\r\n\r\nIf you don't mind could you explain what the code at 490 does?\r\n\r\n**Edit:**\r\nAh, that is probably the union of the edges `a + b - a * b`.\r\nBut that is also the code part that introduces the additional edges.\r\n\r\n**Another issue:**\r\nhttps://github.com/lmcinnes/umap/blob/74a7b3e75362fa6eb3318a292e5364c12c43df62/umap/umap_.py#L340\r\n\r\nIf I understand it correctly this is meant to do the following (taken from umap readthedocs):\r\n```\r\nFor the practical problem we are working with, where we only have a finite approximation of the \r\nmanifold, this means that no point should be completely isolated \u2013 it should connect to at least one \r\nother point. In terms of fuzzy open sets what this amounts to is that we should have complete \r\nconfidence that the open set extends as far as the closest neighbor of each point.\r\n```\r\nHowever, in the case above where the distances for the first two points are\r\n```\r\ndistances = \r\n[[ 0.  1.  3.  7. 12.]\r\n [ 1.  0.  2.  6. 11.]\r\n```\r\n`distances[1,0] == distances[1,2] == distances[0,1]` even though `[1,2]` is not the closest neighbor of `[1]`.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/274", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/274/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/274/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/274/events", "html_url": "https://github.com/lmcinnes/umap/issues/274", "id": 480393724, "node_id": "MDU6SXNzdWU0ODAzOTM3MjQ=", "number": 274, "title": "in concatenated files, how to see that each data set is separated or overlapping", "user": {"login": "hihyein99", "id": 54084366, "node_id": "MDQ6VXNlcjU0MDg0MzY2", "avatar_url": "https://avatars0.githubusercontent.com/u/54084366?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hihyein99", "html_url": "https://github.com/hihyein99", "followers_url": "https://api.github.com/users/hihyein99/followers", "following_url": "https://api.github.com/users/hihyein99/following{/other_user}", "gists_url": "https://api.github.com/users/hihyein99/gists{/gist_id}", "starred_url": "https://api.github.com/users/hihyein99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hihyein99/subscriptions", "organizations_url": "https://api.github.com/users/hihyein99/orgs", "repos_url": "https://api.github.com/users/hihyein99/repos", "events_url": "https://api.github.com/users/hihyein99/events{/privacy}", "received_events_url": "https://api.github.com/users/hihyein99/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-13T22:13:13Z", "updated_at": "2019-09-05T16:26:09Z", "closed_at": "2019-09-05T16:26:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi, I am doing my clustering with 4 concatenated hdf5 files. I am doing the scanpy.pl.umap for the concatenated data and color the each genes that I want to see. Is there any way that I can use scanpy.pl.umap function to see each file's ID?\r\nThank you!\r\n\r\nwhat I did so far:\r\nfilenames = ['filename1.h5','filename2.h5','filename3.h5','filename4.h5']\r\nadatas = [sc.read_10x_h5(filename, gex_only = True) for filename in filenames]\r\nadata = adatas[0].concatenate(adatas[1:])\r\n.......\r\n(did basic filtering, logarithmizing,..., until sc.tl.umap(adata))\r\n.......\r\nsc.pl.umap(adata, color=['Cd4','Foxp3','Cd19'])\r\n\r\nand now I want to see the filename1.h5's sc.pl.umap(adata, color=['Cd4','Foxp3','Cd19']), not adata which is concatenated", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/271", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/271/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/271/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/271/events", "html_url": "https://github.com/lmcinnes/umap/issues/271", "id": 478055743, "node_id": "MDU6SXNzdWU0NzgwNTU3NDM=", "number": 271, "title": "UMAP codes and scripts", "user": {"login": "NDUFB11", "id": 29838349, "node_id": "MDQ6VXNlcjI5ODM4MzQ5", "avatar_url": "https://avatars0.githubusercontent.com/u/29838349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NDUFB11", "html_url": "https://github.com/NDUFB11", "followers_url": "https://api.github.com/users/NDUFB11/followers", "following_url": "https://api.github.com/users/NDUFB11/following{/other_user}", "gists_url": "https://api.github.com/users/NDUFB11/gists{/gist_id}", "starred_url": "https://api.github.com/users/NDUFB11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NDUFB11/subscriptions", "organizations_url": "https://api.github.com/users/NDUFB11/orgs", "repos_url": "https://api.github.com/users/NDUFB11/repos", "events_url": "https://api.github.com/users/NDUFB11/events{/privacy}", "received_events_url": "https://api.github.com/users/NDUFB11/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-07T17:37:27Z", "updated_at": "2019-09-05T16:26:33Z", "closed_at": "2019-09-05T16:26:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello everyone, \r\n\r\nI am new to coding and scripting with python and I am looking for a guide to make UMAP graph.\r\nI know there is lots of staff online but  I wish to find a tutorial that contains examples file\r\nwith step by step codes for making the graph. \r\nOr, do you have any suggestions about where/how to start? \r\n\r\nThank you ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/266", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/266/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/266/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/266/events", "html_url": "https://github.com/lmcinnes/umap/issues/266", "id": 468569310, "node_id": "MDU6SXNzdWU0Njg1NjkzMTA=", "number": 266, "title": "UserWarning: n_neighbors is larger than the dataset size; truncating to X.shape[0] - 1   \"n_neighbors is larger than the dataset size; truncating to \"", "user": {"login": "fsalmasri", "id": 5776719, "node_id": "MDQ6VXNlcjU3NzY3MTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/5776719?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fsalmasri", "html_url": "https://github.com/fsalmasri", "followers_url": "https://api.github.com/users/fsalmasri/followers", "following_url": "https://api.github.com/users/fsalmasri/following{/other_user}", "gists_url": "https://api.github.com/users/fsalmasri/gists{/gist_id}", "starred_url": "https://api.github.com/users/fsalmasri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fsalmasri/subscriptions", "organizations_url": "https://api.github.com/users/fsalmasri/orgs", "repos_url": "https://api.github.com/users/fsalmasri/repos", "events_url": "https://api.github.com/users/fsalmasri/events{/privacy}", "received_events_url": "https://api.github.com/users/fsalmasri/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-16T10:15:42Z", "updated_at": "2019-07-16T10:53:50Z", "closed_at": "2019-07-16T10:53:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "umap on small dataset. \r\n\r\nI have a small dataset, each image has different size and each of these images has different version. so in order to visualize their embedded distribution. I want to use umap on each image with it is versions. \r\n\r\nso my input is of size (4, 786432). once I run \r\n```\r\nreducer = umap.UMAP(random_state=42)\r\nreducer.fit(imgs)\r\n```\r\n\r\nI have this error \r\n\r\n> Compilation is falling back to object mode WITH looplifting enabled because Function \"fuzzy_simplicial_set\" failed type inference due to: Untyped global name 'nearest_neighbors': cannot determine Numba type of <class 'function'>\r\n> \r\n> File \"..\\..\\..\\..\\Python\\Python37\\lib\\site-packages\\umap\\umap_.py\", line 467:\r\n> def fuzzy_simplicial_set(\r\n>     <source elided>\r\n>     if knn_indices is None or knn_dists is None:\r\n>         knn_indices, knn_dists, _ = nearest_neighbors(\r\n>         ^\r\n> \r\n>   @numba.jit()\r\n> C:\\Users\\fedai\\Python\\Python37\\lib\\site-packages\\numba\\compiler.py:725: NumbaWarning: Function \"fuzzy_simplicial_set\" was compiled in object mode without forceobj=True.\r\n> \r\n> File \"..\\..\\..\\..\\Python\\Python37\\lib\\site-packages\\umap\\umap_.py\", line 350:\r\n> @numba.jit()\r\n> def fuzzy_simplicial_set(\r\n> ^\r\n> \r\n>   self.func_ir.loc))\r\n> C:\\Users\\fedai\\Python\\Python37\\lib\\site-packages\\numba\\compiler.py:734: NumbaDeprecationWarning: \r\n> Fall-back from the nopython compilation path to the object mode compilation path has been detected, this is deprecated behaviour.\r\n> \r\n> For more information visit http://numba.pydata.org/numba-doc/latest/reference/deprecation.html#deprecation-of-object-mode-fall-back-behaviour-when-using-jit\r\n> \r\n> File \"..\\..\\..\\..\\Python\\Python37\\lib\\site-packages\\umap\\umap_.py\", line 350:\r\n> @numba.jit()\r\n> def fuzzy_simplicial_set(\r\n> ^\r\n> \r\n>   warnings.warn(errors.NumbaDeprecationWarning(msg, self.func_ir.loc))\r\n> \r\n> \r\n\r\nIs there any way to make it on small dataset or any other way to apply it on all different inputs size?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/265", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/265/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/265/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/265/events", "html_url": "https://github.com/lmcinnes/umap/issues/265", "id": 467235863, "node_id": "MDU6SXNzdWU0NjcyMzU4NjM=", "number": 265, "title": "UMAP segfault error", "user": {"login": "asmariyaz23", "id": 6908226, "node_id": "MDQ6VXNlcjY5MDgyMjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/6908226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asmariyaz23", "html_url": "https://github.com/asmariyaz23", "followers_url": "https://api.github.com/users/asmariyaz23/followers", "following_url": "https://api.github.com/users/asmariyaz23/following{/other_user}", "gists_url": "https://api.github.com/users/asmariyaz23/gists{/gist_id}", "starred_url": "https://api.github.com/users/asmariyaz23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asmariyaz23/subscriptions", "organizations_url": "https://api.github.com/users/asmariyaz23/orgs", "repos_url": "https://api.github.com/users/asmariyaz23/repos", "events_url": "https://api.github.com/users/asmariyaz23/events{/privacy}", "received_events_url": "https://api.github.com/users/asmariyaz23/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-07-12T05:59:06Z", "updated_at": "2019-10-11T13:53:44Z", "closed_at": "2019-10-11T13:53:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "I get the following error when running UMAP through Seurat (which uses UMAP)\r\n\r\n```\r\nUMAP(a=None, angular_rp_forest=False, b=None, init='spectral',\r\n     learning_rate=1.0, local_connectivity=1, metric='correlation',\r\n     metric_kwds=None, min_dist=0.3, n_components=2, n_epochs=None,\r\n     n_neighbors=30, negative_sample_rate=5, random_state=None,\r\n     repulsion_strength=1.0, set_op_mix_ratio=1.0, spread=1.0,\r\n     target_metric='categorical', target_metric_kwds=None,\r\n     target_n_neighbors=-1, target_weight=0.5, transform_queue_size=4.0,\r\n     transform_seed=42, verbose=True)\r\nConstruct fuzzy simplicial set\r\nFri Jul 12 09:51:05 2019 Finding Nearest Neighbors\r\nFri Jul 12 09:51:05 2019 Building RP forest with 10 trees\r\n/Users/asmaimran/Library/Python/3.7/lib/python/site-packages/umap/rp_tree.py:469: NumbaWarning: \r\nCompilation is falling back to object mode WITH looplifting enabled because Function \"make_angular_tree\" failed type inference due to: Cannot unify RandomProjectionTreeNode(array(int64, 1d, C), bool, none, none, none, none) and RandomProjectionTreeNode(none, bool, array(float32, 1d, C), none, RandomProjectionTreeNode(array(int64, 1d, C), bool, none, none, none, none), RandomProjectionTreeNode(array(int64, 1d, C), bool, none, none, none, none)) for '$14.16', defined at /Users/asmaimran/Library/Python/3.7/lib/python/site-packages/umap/rp_tree.py (476)\r\n\r\nFile \"Library/Python/3.7/lib/python/site-packages/umap/rp_tree.py\", line 476:\r\ndef make_angular_tree(data, indices, rng_state, leaf_size=30):\r\n    <source elided>\r\n\r\n        left_node = make_angular_tree(data, left_indices, rng_state, leaf_size)\r\n        ^\r\n\r\n[1] During: resolving callee type: recursive(type(CPUDispatcher(<function make_angular_tree at 0x1b264f440>)))\r\n[2] During: typing of call at /Users/asmaimran/Library/Python/3.7/lib/python/site-packages/umap/rp_tree.py (476)\r\n\r\n\r\nFile \"Library/Python/3.7/lib/python/site-packages/umap/rp_tree.py\", line 476:\r\ndef make_angular_tree(data, indices, rng_state, leaf_size=30):\r\n    <source elided>\r\n\r\n        left_node = make_angular_tree(data, left_indices, rng_state, leaf_size)\r\n        ^\r\n\r\n  @numba.jit()\r\n/Users/asmaimran/Library/Python/3.7/lib/python/site-packages/numba/compiler.py:725: NumbaWarning: Function \"make_angular_tree\" was compiled in object mode without forceobj=True.\r\n\r\nFile \"Library/Python/3.7/lib/python/site-packages/umap/rp_tree.py\", line 470:\r\n@numba.jit()\r\ndef make_angular_tree(data, indices, rng_state, leaf_size=30):\r\n^\r\n\r\n  self.func_ir.loc))\r\n/Users/asmaimran/Library/Python/3.7/lib/python/site-packages/numba/compiler.py:734: NumbaDeprecationWarning: \r\nFall-back from the nopython compilation path to the object mode compilation path has been detected, this is deprecated behaviour.\r\n\r\nFor more information visit http://numba.pydata.org/numba-doc/latest/reference/deprecation.html#deprecation-of-object-mode-fall-back-behaviour-when-using-jit\r\n\r\nFile \"Library/Python/3.7/lib/python/site-packages/umap/rp_tree.py\", line 470:\r\n@numba.jit()\r\ndef make_angular_tree(data, indices, rng_state, leaf_size=30):\r\n^\r\n\r\n  warnings.warn(errors.NumbaDeprecationWarning(msg, self.func_ir.loc))\r\nFri Jul 12 09:51:05 2019 NN descent for 13 iterations\r\n/Users/asmaimran/Library/Python/3.7/lib/python/site-packages/umap/nndescent.py:92: NumbaPerformanceWarning: \r\nThe keyword argument 'parallel=True' was specified but no transformation for parallel execution was possible.\r\n\r\nTo find out why, try turning on parallel diagnostics, see http://numba.pydata.org/numba-doc/latest/user/parallel.html#diagnostics for help.\r\n\r\nFile \"Library/Python/3.7/lib/python/site-packages/umap/utils.py\", line 409:\r\n@numba.njit(parallel=True)\r\ndef build_candidates(current_graph, n_vertices, n_neighbors, max_candidates, rng_state):\r\n^\r\n\r\n  current_graph, n_vertices, n_neighbors, max_candidates, rng_state\r\n/Users/asmaimran/Library/Python/3.7/lib/python/site-packages/numba/compiler.py:588: NumbaPerformanceWarning: \r\nThe keyword argument 'parallel=True' was specified but no transformation for parallel execution was possible.\r\n\r\nTo find out why, try turning on parallel diagnostics, see http://numba.pydata.org/numba-doc/latest/user/parallel.html#diagnostics for help.\r\n\r\nFile \"Library/Python/3.7/lib/python/site-packages/umap/nndescent.py\", line 47:\r\n    @numba.njit(parallel=True)\r\n    def nn_descent(\r\n    ^\r\n\r\n  self.func_ir.loc))\r\n\t 0  /  13\r\n\t 1  /  13\r\n\t 2  /  13\r\nFri Jul 12 09:51:10 2019 Finished Nearest Neighbor Search\r\n\r\n *** caught segfault ***\r\naddress 0xfffffffffffffffa, cause 'memory not mapped'\r\n\r\nTraceback:\r\n 1: py_call_impl(callable, dots$args, dots$keywords)\r\n 2: umap$fit_transform(as.matrix(x = object))\r\n 3: RunUMAP.default(object = data.use, assay = assay, n.neighbors = n.neighbors,     n.components = n.components, metric = metric, n.epochs = n.epochs,     learning.rate = learning.rate, min.dist = min.dist, spread = spread,     set.op.mix.ratio = set.op.mix.ratio, local.connectivity = local.connectivity,     repulsion.strength = repulsion.strength, negative.sample.rate = negative.sample.rate,     a = a, b = b, seed.use = seed.use, metric.kwds = metric.kwds,     angular.rp.forest = angular.rp.forest, reduction.key = reduction.key,     verbose = verbose)\r\n 4: RunUMAP(object = data.use, assay = assay, n.neighbors = n.neighbors,     n.components = n.components, metric = metric, n.epochs = n.epochs,     learning.rate = learning.rate, min.dist = min.dist, spread = spread,     set.op.mix.ratio = set.op.mix.ratio, local.connectivity = local.connectivity,     repulsion.strength = repulsion.strength, negative.sample.rate = negative.sample.rate,     a = a, b = b, seed.use = seed.use, metric.kwds = metric.kwds,     angular.rp.forest = angular.rp.forest, reduction.key = reduction.key,     verbose = verbose)\r\n 5: RunUMAP.Seurat(object = visp, dims = 1:26, min_dist = 0.75)\r\n 6: RunUMAP(object = visp, dims = 1:26, min_dist = 0.75)\r\n```\r\n\r\nI am running python3, installed UMAP using pip and running on MacOSX. Any ideas about what maybe happening?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/264", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/264/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/264/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/264/events", "html_url": "https://github.com/lmcinnes/umap/issues/264", "id": 466536895, "node_id": "MDU6SXNzdWU0NjY1MzY4OTU=", "number": 264, "title": "word embedding aggregation through UMAP?", "user": {"login": "alonsopg", "id": 13632106, "node_id": "MDQ6VXNlcjEzNjMyMTA2", "avatar_url": "https://avatars1.githubusercontent.com/u/13632106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alonsopg", "html_url": "https://github.com/alonsopg", "followers_url": "https://api.github.com/users/alonsopg/followers", "following_url": "https://api.github.com/users/alonsopg/following{/other_user}", "gists_url": "https://api.github.com/users/alonsopg/gists{/gist_id}", "starred_url": "https://api.github.com/users/alonsopg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alonsopg/subscriptions", "organizations_url": "https://api.github.com/users/alonsopg/orgs", "repos_url": "https://api.github.com/users/alonsopg/repos", "events_url": "https://api.github.com/users/alonsopg/events{/privacy}", "received_events_url": "https://api.github.com/users/alonsopg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-10T21:42:57Z", "updated_at": "2019-07-22T17:10:13Z", "closed_at": "2019-07-22T17:10:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to aggregate, merge or fuse two different word embedding representations with umap? For instance, consider:\r\n```\r\nword_embedding_1 \\ ______  |UMAP|________ then concat or apply any other operation?\r\nword_embedding_2 /\r\n```\r\n\r\nAs far as I understand this is not possible out of the box, you should need to project the two different spaces into a similar space. For example by using PCA in theory you could learn a projection from k dimensions to k \u2032 dimensions that removes the redundancy that comes from concatenating multiple sources of embedding. Is it possible to do this with umap?, then how can I do it properly", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/257", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/257/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/257/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/257/events", "html_url": "https://github.com/lmcinnes/umap/issues/257", "id": 458788159, "node_id": "MDU6SXNzdWU0NTg3ODgxNTk=", "number": 257, "title": "UMAP for regression", "user": {"login": "lcrmorin", "id": 4086709, "node_id": "MDQ6VXNlcjQwODY3MDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/4086709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcrmorin", "html_url": "https://github.com/lcrmorin", "followers_url": "https://api.github.com/users/lcrmorin/followers", "following_url": "https://api.github.com/users/lcrmorin/following{/other_user}", "gists_url": "https://api.github.com/users/lcrmorin/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcrmorin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcrmorin/subscriptions", "organizations_url": "https://api.github.com/users/lcrmorin/orgs", "repos_url": "https://api.github.com/users/lcrmorin/repos", "events_url": "https://api.github.com/users/lcrmorin/events{/privacy}", "received_events_url": "https://api.github.com/users/lcrmorin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1552527348, "node_id": "MDU6TGFiZWwxNTUyNTI3MzQ4", "url": "https://api.github.com/repos/lmcinnes/umap/labels/Good%20Reads", "name": "Good Reads", "color": "00e52d", "default": false, "description": "Issues that discuss important topics regarding UMAP, that provide useful code or nice visualizations"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-20T17:47:10Z", "updated_at": "2019-09-17T13:53:09Z", "closed_at": "2019-09-17T13:53:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "From my understanding UMAP is a fast unsupervised dimension reduction technique. I am personnaly interested in scalable supervised probabilistic models for unbalanced classes.\r\n\r\nI had some occasions to play with UMAP for data visualisation purposes (which led to deeper work on anomalies). I have been astounded by the result and, more importantly, by its efficiency and scalability. Still struggling to grasp all the concepts of topological data analysis, I was wondering if it would be possible / make sense to use UMAP in the following ways:\r\n\r\n1) As an encoder tool, not necessarily reducing the dimension. The idea is to apply umap while keeping the number of dimension constant. Unsupervisingly reducing dimension can be tricky with unbalanced class (for exemple in Applied Predictive Modelling Kuhn & Jhonson advise to switch from PCA to Partial Least Square - which is essentialy a supervised version of PCA). Is an application of umap without reducing the dimension of the data likely to help improve performance of probabilistic models for unbalanced classes ? (from my experiments with simple models on tabular data, the answer seems to be : not significantly)\r\n\r\n2) As a supervised tool. I tried different ways to include the unbalanced binary output in my data without much sucess. Any idea on how to modify umap to use it as a supervised dimension reduction technique while preserving meaningfull relationships between variables and outputs (like PLS is the supervised version of PCA) ?\r\n\r\n3) Still on the topic of probabilistic models for unbalanced classes, I have tried to embed the majority class in the space where the minority class has a uniform distribution. The idea is to estimate the density of the whole population in a space of constant density for the minority class. The probability of being in the minority class would then be given by the ratio of the easy to determine constant minority density over the easy to estimate overall density. It seems to work on simple exemples, but I have a hard time dealing with data domains (data from the majority class will fall out of the minority class data domain in the space where they are uniformly distributed. Any hint on how to make that work ?\r\n\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/256", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/256/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/256/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/256/events", "html_url": "https://github.com/lmcinnes/umap/issues/256", "id": 458247054, "node_id": "MDU6SXNzdWU0NTgyNDcwNTQ=", "number": 256, "title": "UMAP doesn't work upon second run", "user": {"login": "goodheman", "id": 32035734, "node_id": "MDQ6VXNlcjMyMDM1NzM0", "avatar_url": "https://avatars0.githubusercontent.com/u/32035734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goodheman", "html_url": "https://github.com/goodheman", "followers_url": "https://api.github.com/users/goodheman/followers", "following_url": "https://api.github.com/users/goodheman/following{/other_user}", "gists_url": "https://api.github.com/users/goodheman/gists{/gist_id}", "starred_url": "https://api.github.com/users/goodheman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goodheman/subscriptions", "organizations_url": "https://api.github.com/users/goodheman/orgs", "repos_url": "https://api.github.com/users/goodheman/repos", "events_url": "https://api.github.com/users/goodheman/events{/privacy}", "received_events_url": "https://api.github.com/users/goodheman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-19T22:05:10Z", "updated_at": "2019-06-19T22:52:39Z", "closed_at": "2019-06-19T22:52:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Greetings,\r\n\r\nI had UMAP up and running alongside a number of ML packages without any issues. I took about a month hiatus from using UMAP and now when I try to run it, it works the first time I call it (in a Spyder session, for example) but if I run it a second time I get:\r\n\r\n\"\r\n  File \"/home/jon/.local/lib/python3.6/site-packages/scipy/sparse/base.py\", line 551, in __rmul__\r\n    return (self.transpose() * tr).transpose()\r\n\r\n  File \"/home/jon/.local/lib/python3.6/site-packages/scipy/sparse/base.py\", line 499, in __mul__\r\n    raise ValueError('dimension mismatch')\r\n\r\nValueError: dimension mismatch\"\r\n\r\nIf I close Spyder and re-run the code, it works the first time every time, but never works the second time I run the code. I'm fairly new to ML and python, so maybe I'm not clearing something the second time around?\r\n\r\nThe code can be as simple as follows:\r\n\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\nimport umap\r\n\r\ndata = np.random.rand(800,4)\r\n\r\nfit = umap.UMAP()\r\nu = fit.fit_transform(data)\r\n\r\nplt.scatter(u[:,0],u[:,1])", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/252", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/252/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/252/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/252/events", "html_url": "https://github.com/lmcinnes/umap/issues/252", "id": 454495620, "node_id": "MDU6SXNzdWU0NTQ0OTU2MjA=", "number": 252, "title": "Numba warnings", "user": {"login": "mbr085", "id": 7124203, "node_id": "MDQ6VXNlcjcxMjQyMDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/7124203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbr085", "html_url": "https://github.com/mbr085", "followers_url": "https://api.github.com/users/mbr085/followers", "following_url": "https://api.github.com/users/mbr085/following{/other_user}", "gists_url": "https://api.github.com/users/mbr085/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbr085/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbr085/subscriptions", "organizations_url": "https://api.github.com/users/mbr085/orgs", "repos_url": "https://api.github.com/users/mbr085/repos", "events_url": "https://api.github.com/users/mbr085/events{/privacy}", "received_events_url": "https://api.github.com/users/mbr085/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1552527348, "node_id": "MDU6TGFiZWwxNTUyNTI3MzQ4", "url": "https://api.github.com/repos/lmcinnes/umap/labels/Good%20Reads", "name": "Good Reads", "color": "00e52d", "default": false, "description": "Issues that discuss important topics regarding UMAP, that provide useful code or nice visualizations"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2019-06-11T06:04:06Z", "updated_at": "2020-02-09T17:57:00Z", "closed_at": "2019-09-05T16:28:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "First I want to thank you for sharing this great work. It is very useful for me.\r\nThe first time I execute UMAP fit and transform I get some numba warnings. They do not seem to be critical, but they are somewhat  disturbing.\r\n\r\n`numba.__version__`\r\n`'0.44.0'`\r\n\r\n`sys.version`\r\n`'3.7.3 (default, Mar 27 2019, 22:11:17) \\n[GCC 7.3.0]'`\r\n\r\n ```\r\nreducer = umap.UMAP(random_state=42)\r\nreducer.fit(X)\r\nY = reducer.transform(X)\r\n```\r\n\r\n```\r\n/home/mbr085/anaconda3/envs/divisivegater/lib/python3.7/site-packages/umap/umap_.py:349: NumbaWarning: \r\nCompilation is falling back to object mode WITH looplifting enabled because Function \"fuzzy_simplicial_set\" failed type inference due to: Untyped global name 'nearest_neighbors': cannot determine Numba type of <class 'function'>\r\n\r\nFile \"../../../../../anaconda3/envs/divisivegater/lib/python3.7/site-packages/umap/umap_.py\", line 467:\r\ndef fuzzy_simplicial_set(\r\n    <source elided>\r\n    if knn_indices is None or knn_dists is None:\r\n        knn_indices, knn_dists, _ = nearest_neighbors(\r\n        ^\r\n\r\n  @numba.jit()\r\n/home/mbr085/anaconda3/envs/divisivegater/lib/python3.7/site-packages/numba/compiler.py:725: NumbaWarning: Function \"fuzzy_simplicial_set\" was compiled in object mode without forceobj=True.\r\n\r\nFile \"../../../../../anaconda3/envs/divisivegater/lib/python3.7/site-packages/umap/umap_.py\", line 350:\r\n@numba.jit()\r\ndef fuzzy_simplicial_set(\r\n^\r\n\r\n  self.func_ir.loc))\r\n/home/mbr085/anaconda3/envs/divisivegater/lib/python3.7/site-packages/numba/compiler.py:734: NumbaDeprecationWarning: \r\nFall-back from the nopython compilation path to the object mode compilation path has been detected, this is deprecated behaviour.\r\n\r\nFor more information visit http://numba.pydata.org/numba-doc/latest/reference/deprecation.html#deprecation-of-object-mode-fall-back-behaviour-when-using-jit\r\n\r\nFile \"../../../../../anaconda3/envs/divisivegater/lib/python3.7/site-packages/umap/umap_.py\", line 350:\r\n@numba.jit()\r\ndef fuzzy_simplicial_set(\r\n^\r\n\r\n  warnings.warn(errors.NumbaDeprecationWarning(msg, self.func_ir.loc))\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/249", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/249/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/249/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/249/events", "html_url": "https://github.com/lmcinnes/umap/issues/249", "id": 453025432, "node_id": "MDU6SXNzdWU0NTMwMjU0MzI=", "number": 249, "title": "Interplay of `min_dist` and `spread`", "user": {"login": "emathian", "id": 33092597, "node_id": "MDQ6VXNlcjMzMDkyNTk3", "avatar_url": "https://avatars0.githubusercontent.com/u/33092597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emathian", "html_url": "https://github.com/emathian", "followers_url": "https://api.github.com/users/emathian/followers", "following_url": "https://api.github.com/users/emathian/following{/other_user}", "gists_url": "https://api.github.com/users/emathian/gists{/gist_id}", "starred_url": "https://api.github.com/users/emathian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emathian/subscriptions", "organizations_url": "https://api.github.com/users/emathian/orgs", "repos_url": "https://api.github.com/users/emathian/repos", "events_url": "https://api.github.com/users/emathian/events{/privacy}", "received_events_url": "https://api.github.com/users/emathian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1552527348, "node_id": "MDU6TGFiZWwxNTUyNTI3MzQ4", "url": "https://api.github.com/repos/lmcinnes/umap/labels/Good%20Reads", "name": "Good Reads", "color": "00e52d", "default": false, "description": "Issues that discuss important topics regarding UMAP, that provide useful code or nice visualizations"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-06T13:17:14Z", "updated_at": "2019-09-12T15:55:48Z", "closed_at": "2019-09-12T15:55:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear all,\r\nI noticed that `min_dist` parameter on python implementation goes from 0 to 1, whereas it is not bound on R implementation. Could you tell me why ?\r\n\r\nThank you", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/246", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/246/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/246/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/246/events", "html_url": "https://github.com/lmcinnes/umap/issues/246", "id": 450911479, "node_id": "MDU6SXNzdWU0NTA5MTE0Nzk=", "number": 246, "title": "smooth_knn_dist crashes when using Numba with fastmath=True on some computers", "user": {"login": "mikeriedel", "id": 15795274, "node_id": "MDQ6VXNlcjE1Nzk1Mjc0", "avatar_url": "https://avatars2.githubusercontent.com/u/15795274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikeriedel", "html_url": "https://github.com/mikeriedel", "followers_url": "https://api.github.com/users/mikeriedel/followers", "following_url": "https://api.github.com/users/mikeriedel/following{/other_user}", "gists_url": "https://api.github.com/users/mikeriedel/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikeriedel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikeriedel/subscriptions", "organizations_url": "https://api.github.com/users/mikeriedel/orgs", "repos_url": "https://api.github.com/users/mikeriedel/repos", "events_url": "https://api.github.com/users/mikeriedel/events{/privacy}", "received_events_url": "https://api.github.com/users/mikeriedel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-31T17:48:31Z", "updated_at": "2019-06-03T17:44:30Z", "closed_at": "2019-06-03T17:44:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I isolated a crash that is repeatable on my machine. The function smooth_knn_dist and the use of numba with fastmath=true are causing problems. Setting fastmath=false for this function, causes the crash to go away and allows me to complete my simple test case as well as run fit_transform.\r\n\r\nThe exception I had was : \r\n`Windows fatal exception: access violation`\r\n\r\nMy test case is : \r\n`import numpy as np`\r\n`import umap`\r\n`np_features = np.random.rand(100, 100)`\r\n`sigmas, rhos = umap.umap_.smooth_knn_dist(np_features, 20)`\r\n\r\nI tried turning off fastmath (line 47 of umap_.py) and the crash went away.\r\n`@numba.njit(parallel=True, fastmath=False)`.\r\n\r\n_Originally posted by @mikeriedel in https://github.com/lmcinnes/umap/issues/243#issuecomment-497528216_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/244", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/244/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/244/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/244/events", "html_url": "https://github.com/lmcinnes/umap/issues/244", "id": 448841099, "node_id": "MDU6SXNzdWU0NDg4NDEwOTk=", "number": 244, "title": "Build failures :: numba-integration-testing", "user": {"login": "esc", "id": 41563, "node_id": "MDQ6VXNlcjQxNTYz", "avatar_url": "https://avatars2.githubusercontent.com/u/41563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/esc", "html_url": "https://github.com/esc", "followers_url": "https://api.github.com/users/esc/followers", "following_url": "https://api.github.com/users/esc/following{/other_user}", "gists_url": "https://api.github.com/users/esc/gists{/gist_id}", "starred_url": "https://api.github.com/users/esc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/esc/subscriptions", "organizations_url": "https://api.github.com/users/esc/orgs", "repos_url": "https://api.github.com/users/esc/repos", "events_url": "https://api.github.com/users/esc/events{/privacy}", "received_events_url": "https://api.github.com/users/esc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-05-27T12:48:08Z", "updated_at": "2019-05-28T16:29:08Z", "closed_at": "2019-05-28T06:45:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "We are currently experiencing build failures with the numba-integration-testing repo. The error is:\r\n\r\n```\r\n======================================================================\r\nERROR: Failure: ImportError (cannot import name 'if_matplotlib' from 'sklearn.utils.testing' (/home/circleci/repo/miniconda3/envs/umap/lib/python3.7/site-packages/sklearn/utils/testing.py))\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/repo/miniconda3/envs/umap/lib/python3.7/site-packages/nose/failure.py\", line 39, in runTest\r\n    raise self.exc_val.with_traceback(self.tb)\r\n  File \"/home/circleci/repo/miniconda3/envs/umap/lib/python3.7/site-packages/nose/loader.py\", line 417, in loadTestsFromName\r\n    addr.filename, addr.module)\r\n  File \"/home/circleci/repo/miniconda3/envs/umap/lib/python3.7/site-packages/nose/importer.py\", line 47, in importFromPath\r\n    return self.importFromDir(dir_path, fqname)\r\n  File \"/home/circleci/repo/miniconda3/envs/umap/lib/python3.7/site-packages/nose/importer.py\", line 94, in importFromDir\r\n    mod = load_module(part_fqname, fh, filename, desc)\r\n  File \"/home/circleci/repo/miniconda3/envs/umap/lib/python3.7/imp.py\", line 234, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/home/circleci/repo/miniconda3/envs/umap/lib/python3.7/imp.py\", line 171, in load_source\r\n    module = _load(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 696, in _load\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/circleci/repo/umap/umap/tests/test_umap.py\", line 12, in <module>\r\n    from sklearn.utils.testing import (\r\nImportError: cannot import name 'if_matplotlib' from 'sklearn.utils.testing' (/home/circleci/repo/miniconda3/envs/umap/lib/python3.7/site-packages/sklearn/utils/testing.py)\r\n```\r\n\r\nHere is an example build:\r\n\r\nhttps://circleci.com/gh/numba/numba-integration-testing/250", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/243", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/243/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/243/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/243/events", "html_url": "https://github.com/lmcinnes/umap/issues/243", "id": 447899175, "node_id": "MDU6SXNzdWU0NDc4OTkxNzU=", "number": 243, "title": "Construct fuzzy simplicial set abort without raising exception ", "user": {"login": "artiom-zayats", "id": 6099874, "node_id": "MDQ6VXNlcjYwOTk4NzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/6099874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/artiom-zayats", "html_url": "https://github.com/artiom-zayats", "followers_url": "https://api.github.com/users/artiom-zayats/followers", "following_url": "https://api.github.com/users/artiom-zayats/following{/other_user}", "gists_url": "https://api.github.com/users/artiom-zayats/gists{/gist_id}", "starred_url": "https://api.github.com/users/artiom-zayats/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/artiom-zayats/subscriptions", "organizations_url": "https://api.github.com/users/artiom-zayats/orgs", "repos_url": "https://api.github.com/users/artiom-zayats/repos", "events_url": "https://api.github.com/users/artiom-zayats/events{/privacy}", "received_events_url": "https://api.github.com/users/artiom-zayats/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-05-23T22:23:27Z", "updated_at": "2019-06-03T17:48:55Z", "closed_at": "2019-06-03T17:48:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am running umap fit and my python program just fails without raising any exception. \r\nThis only happens on one machine out of 3.\r\n\r\nWith exactly the same code:\r\n\r\nThis is the verbosity. \r\n\r\nConstruct fuzzy simplicial set\r\n0 / 11\r\n1 / 11\r\n2 / 11\r\n\r\nThank you,\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/242", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/242/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/242/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/242/events", "html_url": "https://github.com/lmcinnes/umap/issues/242", "id": 447623431, "node_id": "MDU6SXNzdWU0NDc2MjM0MzE=", "number": 242, "title": "Influence 2D projection (seed)", "user": {"login": "datrinh", "id": 3518618, "node_id": "MDQ6VXNlcjM1MTg2MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/3518618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/datrinh", "html_url": "https://github.com/datrinh", "followers_url": "https://api.github.com/users/datrinh/followers", "following_url": "https://api.github.com/users/datrinh/following{/other_user}", "gists_url": "https://api.github.com/users/datrinh/gists{/gist_id}", "starred_url": "https://api.github.com/users/datrinh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/datrinh/subscriptions", "organizations_url": "https://api.github.com/users/datrinh/orgs", "repos_url": "https://api.github.com/users/datrinh/repos", "events_url": "https://api.github.com/users/datrinh/events{/privacy}", "received_events_url": "https://api.github.com/users/datrinh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-05-23T12:10:41Z", "updated_at": "2019-05-27T11:36:53Z", "closed_at": "2019-05-27T11:36:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nmy problem case is summed up here: https://datascience.stackexchange.com/questions/52391/how-to-reduce-position-changes-after-dimensionality-reduction\r\n\r\nSince no1 could help me so far, I'm reaching out in this repo. Is there any way to seed the positions of the 2D projection? If not, how would I go about modifiying the algorithm to my needs?\r\n\r\nSimilar issues here:\r\n[1] https://stackoverflow.com/questions/30066268/provide-starting-positions-to-t-distributed-stochastic-neighbor-embedding-tsne?rq=1\r\n[2] https://ieeexplore.ieee.org/document/7539329", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/238", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/238/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/238/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/238/events", "html_url": "https://github.com/lmcinnes/umap/issues/238", "id": 445316696, "node_id": "MDU6SXNzdWU0NDUzMTY2OTY=", "number": 238, "title": "Random state parameter is ignored", "user": {"login": "candalfigomoro", "id": 50733646, "node_id": "MDQ6VXNlcjUwNzMzNjQ2", "avatar_url": "https://avatars3.githubusercontent.com/u/50733646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/candalfigomoro", "html_url": "https://github.com/candalfigomoro", "followers_url": "https://api.github.com/users/candalfigomoro/followers", "following_url": "https://api.github.com/users/candalfigomoro/following{/other_user}", "gists_url": "https://api.github.com/users/candalfigomoro/gists{/gist_id}", "starred_url": "https://api.github.com/users/candalfigomoro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/candalfigomoro/subscriptions", "organizations_url": "https://api.github.com/users/candalfigomoro/orgs", "repos_url": "https://api.github.com/users/candalfigomoro/repos", "events_url": "https://api.github.com/users/candalfigomoro/events{/privacy}", "received_events_url": "https://api.github.com/users/candalfigomoro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-17T08:06:12Z", "updated_at": "2019-05-20T17:48:35Z", "closed_at": "2019-05-20T17:48:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nin this line:\r\n\r\nhttps://github.com/lmcinnes/umap/blob/7041502068e7bc3aa28fc00a12fffa66435410dd/umap/umap_.py#L981\r\n\r\nshouldn't it be `random_state.normal`  instead of `np.random.normal`? The random_state parameter is ignored when init is not random/spectral string.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/233", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/233/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/233/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/233/events", "html_url": "https://github.com/lmcinnes/umap/issues/233", "id": 440841701, "node_id": "MDU6SXNzdWU0NDA4NDE3MDE=", "number": 233, "title": "Confusing Streak Projections", "user": {"login": "MattConflitti", "id": 12801051, "node_id": "MDQ6VXNlcjEyODAxMDUx", "avatar_url": "https://avatars3.githubusercontent.com/u/12801051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MattConflitti", "html_url": "https://github.com/MattConflitti", "followers_url": "https://api.github.com/users/MattConflitti/followers", "following_url": "https://api.github.com/users/MattConflitti/following{/other_user}", "gists_url": "https://api.github.com/users/MattConflitti/gists{/gist_id}", "starred_url": "https://api.github.com/users/MattConflitti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MattConflitti/subscriptions", "organizations_url": "https://api.github.com/users/MattConflitti/orgs", "repos_url": "https://api.github.com/users/MattConflitti/repos", "events_url": "https://api.github.com/users/MattConflitti/events{/privacy}", "received_events_url": "https://api.github.com/users/MattConflitti/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-05-06T19:06:30Z", "updated_at": "2019-05-29T15:53:22Z", "closed_at": "2019-05-29T15:53:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello! First of all, this is an awesome project. I have been integrating this into a pipeline that clusters various datasets. I have been noticing that I am consistently getting streaks when projecting to 2 dimensions instead of round clusters like the common MNIST example. I would assume that the type of data I am using (customer-item sales matrix, customer data, etc) has a certain characteristic(s) that would cause this, but I wanted to make sure that it isn't due to some weird value I may or may not be setting a certain parameter to.\r\n\r\n![](https://i.imgur.com/v8ZoaIw.png) \r\n\r\nn_components=2, n_neighbors=30, min_dist = 0.0, n_epochs = 500\r\n\r\nThis occurs with 15 neighbors, min_dist up to 0.5 and combinations thereof. I haven't touched spread much.\r\n\r\nTh data for this projection consists of a lot of binary features and is somewhat sparse. The clusters are detected by HDBSCAN (another awesome addition to the community).\r\n\r\nI just wanted to reach out to see if others have seen this type of behavior instead of the more traditional thought of clusters (more circular).\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/228", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/228/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/228/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/228/events", "html_url": "https://github.com/lmcinnes/umap/issues/228", "id": 438954504, "node_id": "MDU6SXNzdWU0Mzg5NTQ1MDQ=", "number": 228, "title": "UMAP with R", "user": {"login": "arararararararar8", "id": 49823305, "node_id": "MDQ6VXNlcjQ5ODIzMzA1", "avatar_url": "https://avatars2.githubusercontent.com/u/49823305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arararararararar8", "html_url": "https://github.com/arararararararar8", "followers_url": "https://api.github.com/users/arararararararar8/followers", "following_url": "https://api.github.com/users/arararararararar8/following{/other_user}", "gists_url": "https://api.github.com/users/arararararararar8/gists{/gist_id}", "starred_url": "https://api.github.com/users/arararararararar8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arararararararar8/subscriptions", "organizations_url": "https://api.github.com/users/arararararararar8/orgs", "repos_url": "https://api.github.com/users/arararararararar8/repos", "events_url": "https://api.github.com/users/arararararararar8/events{/privacy}", "received_events_url": "https://api.github.com/users/arararararararar8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1552527348, "node_id": "MDU6TGFiZWwxNTUyNTI3MzQ4", "url": "https://api.github.com/repos/lmcinnes/umap/labels/Good%20Reads", "name": "Good Reads", "color": "00e52d", "default": false, "description": "Issues that discuss important topics regarding UMAP, that provide useful code or nice visualizations"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-30T20:06:18Z", "updated_at": "2019-09-12T15:54:25Z", "closed_at": "2019-09-12T15:54:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI am trying to use umap through R for seurat. What exactly is the code that I should be entering in conda and in R for me to be able to use umap through R?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/227", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/227/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/227/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/227/events", "html_url": "https://github.com/lmcinnes/umap/issues/227", "id": 438909525, "node_id": "MDU6SXNzdWU0Mzg5MDk1MjU=", "number": 227, "title": "FAQ slightly out of date", "user": {"login": "vicramr", "id": 42707603, "node_id": "MDQ6VXNlcjQyNzA3NjAz", "avatar_url": "https://avatars0.githubusercontent.com/u/42707603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vicramr", "html_url": "https://github.com/vicramr", "followers_url": "https://api.github.com/users/vicramr/followers", "following_url": "https://api.github.com/users/vicramr/following{/other_user}", "gists_url": "https://api.github.com/users/vicramr/gists{/gist_id}", "starred_url": "https://api.github.com/users/vicramr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vicramr/subscriptions", "organizations_url": "https://api.github.com/users/vicramr/orgs", "repos_url": "https://api.github.com/users/vicramr/repos", "events_url": "https://api.github.com/users/vicramr/events{/privacy}", "received_events_url": "https://api.github.com/users/vicramr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-30T18:15:08Z", "updated_at": "2019-05-04T12:39:38Z", "closed_at": "2019-05-04T02:08:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The section of the FAQ which discusses R implementations ([here](https://umap-learn.readthedocs.io/en/latest/faq.html#is-the-support-for-the-r-language)) appears to be slightly out of date. Specifically, it implies that [umapr](https://github.com/ropenscilabs/umapr) is the preferred R wrapper for this library. But in many of the closed issues in the umapr github ([example](https://github.com/ropenscilabs/umapr/issues/23#issuecomment-402317489)), the devs point users towards [umap](https://github.com/tkonopka/umap) and [uwot](https://github.com/jlmelville/uwot) instead. The FAQ should probably be updated to address this.\r\n\r\nI'd open a pull request myself but I'm not sure how the Read the Docs site is generated. Would I just be able to modify `doc/faq.rst`? If so I'll go ahead and create the PR.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/226", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/226/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/226/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/226/events", "html_url": "https://github.com/lmcinnes/umap/issues/226", "id": 438730571, "node_id": "MDU6SXNzdWU0Mzg3MzA1NzE=", "number": 226, "title": "[Question] Is it safe to fit-transform once to get multiple embeddings?", "user": {"login": "jlopezpena", "id": 3518950, "node_id": "MDQ6VXNlcjM1MTg5NTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/3518950?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlopezpena", "html_url": "https://github.com/jlopezpena", "followers_url": "https://api.github.com/users/jlopezpena/followers", "following_url": "https://api.github.com/users/jlopezpena/following{/other_user}", "gists_url": "https://api.github.com/users/jlopezpena/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlopezpena/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlopezpena/subscriptions", "organizations_url": "https://api.github.com/users/jlopezpena/orgs", "repos_url": "https://api.github.com/users/jlopezpena/repos", "events_url": "https://api.github.com/users/jlopezpena/events{/privacy}", "received_events_url": "https://api.github.com/users/jlopezpena/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-04-30T11:30:05Z", "updated_at": "2019-05-08T06:08:20Z", "closed_at": "2019-05-07T13:19:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Quick question, a bit of the mathsy side.\r\n\r\nSuppose I want to test different embeddings of my data, say in 2, 5 and 10 dimensions;\r\nis the UMAP algorithm amenable to fit only once using `n_components=10` and then take\r\nthe first 2 or 5 components, or would this be complete nonsense and I should make separate fittings?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/225", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/225/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/225/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/225/events", "html_url": "https://github.com/lmcinnes/umap/issues/225", "id": 438427868, "node_id": "MDU6SXNzdWU0Mzg0Mjc4Njg=", "number": 225, "title": "UMAP on Windows", "user": {"login": "hlmeng", "id": 36086227, "node_id": "MDQ6VXNlcjM2MDg2MjI3", "avatar_url": "https://avatars2.githubusercontent.com/u/36086227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hlmeng", "html_url": "https://github.com/hlmeng", "followers_url": "https://api.github.com/users/hlmeng/followers", "following_url": "https://api.github.com/users/hlmeng/following{/other_user}", "gists_url": "https://api.github.com/users/hlmeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/hlmeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hlmeng/subscriptions", "organizations_url": "https://api.github.com/users/hlmeng/orgs", "repos_url": "https://api.github.com/users/hlmeng/repos", "events_url": "https://api.github.com/users/hlmeng/events{/privacy}", "received_events_url": "https://api.github.com/users/hlmeng/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-04-29T17:37:06Z", "updated_at": "2020-02-27T02:53:44Z", "closed_at": "2019-09-05T16:29:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I installed UMAP on a 64-bit Window's machine with python 3.7.3 using \"pip install umap-learn\" and the installation seems good. But when I call UMAP in R, I got \"Cannot find UMAP, please install through pip (e.g. pip install umap-learn).\" If I run \"import umap\" in python, I got following error:\r\n\"numba.errors.LoweringError: Failed in nopython mode pipeline (step: nopython mode backend)\r\nOperands must be the same type, got (i32, i64)\r\n\r\nFile \"AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\umap\\utils.py\", line 129:\r\ndef make_heap(n_points, size):\r\n    <source elided>\r\n    \"\"\"\r\n    result = np.zeros((3, int(n_points), int(size)), dtype=np.float64)\"\r\n\r\nThank you for the help!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/224", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/224/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/224/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/224/events", "html_url": "https://github.com/lmcinnes/umap/issues/224", "id": 437137314, "node_id": "MDU6SXNzdWU0MzcxMzczMTQ=", "number": 224, "title": "Is validation check for integers too narrow?", "user": {"login": "usul83", "id": 26001406, "node_id": "MDQ6VXNlcjI2MDAxNDA2", "avatar_url": "https://avatars1.githubusercontent.com/u/26001406?v=4", "gravatar_id": "", "url": "https://api.github.com/users/usul83", "html_url": "https://github.com/usul83", "followers_url": "https://api.github.com/users/usul83/followers", "following_url": "https://api.github.com/users/usul83/following{/other_user}", "gists_url": "https://api.github.com/users/usul83/gists{/gist_id}", "starred_url": "https://api.github.com/users/usul83/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/usul83/subscriptions", "organizations_url": "https://api.github.com/users/usul83/orgs", "repos_url": "https://api.github.com/users/usul83/repos", "events_url": "https://api.github.com/users/usul83/events{/privacy}", "received_events_url": "https://api.github.com/users/usul83/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605079251, "node_id": "MDU6TGFiZWwxNjA1MDc5MjUx", "url": "https://api.github.com/repos/lmcinnes/umap/labels/0.4", "name": "0.4", "color": "f2e559", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-25T10:59:51Z", "updated_at": "2019-10-16T16:22:40Z", "closed_at": "2019-10-16T16:22:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm trying to incorporate UMAP into a pipeline which sets my n_component parameter to a numpy int64 at some point. This leads to a failed validation check (_validate_parameters(), line 1309 of umap_.py), since this is not an instance of a Python int. \r\n\r\nI suggest either making the check more broad or just converting to an int?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/217", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/217/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/217/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/217/events", "html_url": "https://github.com/lmcinnes/umap/issues/217", "id": 433104641, "node_id": "MDU6SXNzdWU0MzMxMDQ2NDE=", "number": 217, "title": "If fit on a view of an array, transformation of other arrays of same size mutates `.embedding_`", "user": {"login": "ivirshup", "id": 8238804, "node_id": "MDQ6VXNlcjgyMzg4MDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/8238804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivirshup", "html_url": "https://github.com/ivirshup", "followers_url": "https://api.github.com/users/ivirshup/followers", "following_url": "https://api.github.com/users/ivirshup/following{/other_user}", "gists_url": "https://api.github.com/users/ivirshup/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivirshup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivirshup/subscriptions", "organizations_url": "https://api.github.com/users/ivirshup/orgs", "repos_url": "https://api.github.com/users/ivirshup/repos", "events_url": "https://api.github.com/users/ivirshup/events{/privacy}", "received_events_url": "https://api.github.com/users/ivirshup/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-15T05:48:17Z", "updated_at": "2019-08-27T12:00:06Z", "closed_at": "2019-08-27T12:00:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If a umap object is fit on a view of a recarray, then used to transform other data (but only if the new data is of the same shape) the `embedding_` field of the umap object will be mutated. Here's a quick example:\r\n\r\n```python\r\nimport numpy as np\r\nimport joblib\r\nfrom umap import UMAP\r\n\r\nr = np.recarray((1000,), dtype=[(\"X\", \"<f8\", (50,))])\r\nr[\"X\"] = np.random.random((1000, 50))\r\n\r\na = np.random.random((1000, 50))\r\n\r\numap = UMAP()\r\nu1 = umap.fit_transform(r[\"X\"])\r\nu1_orig = u1.copy()\r\nassert np.allclose(u1_orig, umap.embedding_)\r\nprint(joblib.hash(u1))\r\n# 744c0f0d8a85e605beb3c0d8b9f210f5\r\nu2 = umap.transform(a)\r\nprint(joblib.hash(u1))\r\n# c1544edfe163b05bbd1925a0deab0326\r\nassert np.allclose(u1_orig, umap.embedding_)\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-216-a95f50467de3> in <module>\r\n     15 u2 = umap.transform(a)\r\n     16 print(joblib.hash(u1))\r\n---> 17 assert np.allclose(u1_orig, umap.embedding_)\r\n\r\nAssertionError:\r\n```\r\n\r\nIf you'd like, I could probably show a more meaningful case where you can see the embedding gets pretty messed up as well. I originally opened this up over in AnnData (https://github.com/theislab/anndata/issues/138), when I wasn't able to factor out that object from the bug.\r\n\r\nUpdate: Turns out it generalizes to views of normal ndarrays:\r\n\r\n```python\r\nimport numpy as np\r\nimport joblib\r\nfrom umap import UMAP\r\n\r\na = np.random.random((1000, 10))\r\nb = np.random.random((1000, 5))\r\n\r\numap = UMAP()\r\nu1 = umap.fit_transform(a[:, :5])\r\nu1_orig = u1.copy()\r\nassert np.allclose(u1_orig, umap.embedding_)\r\nprint(joblib.hash(u1))\r\n# e0988cd1976ce6a450f2258411a0cd9e\r\nu2 = umap.transform(b)\r\nprint(joblib.hash(u1))\r\n# 834b4d5a039272bc16cce3d511806ce1\r\nassert np.allclose(u1_orig, umap.embedding_)\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-1-062e92b99645> in <module>\r\n     13 u2 = umap.transform(b)\r\n     14 print(joblib.hash(u1))\r\n---> 15 assert np.allclose(u1_orig, umap.embedding_)\r\n\r\nAssertionError:\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/210", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/210/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/210/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/210/events", "html_url": "https://github.com/lmcinnes/umap/issues/210", "id": 422767369, "node_id": "MDU6SXNzdWU0MjI3NjczNjk=", "number": 210, "title": "An error with numba0.43", "user": {"login": "sheetsvicky", "id": 20784347, "node_id": "MDQ6VXNlcjIwNzg0MzQ3", "avatar_url": "https://avatars3.githubusercontent.com/u/20784347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sheetsvicky", "html_url": "https://github.com/sheetsvicky", "followers_url": "https://api.github.com/users/sheetsvicky/followers", "following_url": "https://api.github.com/users/sheetsvicky/following{/other_user}", "gists_url": "https://api.github.com/users/sheetsvicky/gists{/gist_id}", "starred_url": "https://api.github.com/users/sheetsvicky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sheetsvicky/subscriptions", "organizations_url": "https://api.github.com/users/sheetsvicky/orgs", "repos_url": "https://api.github.com/users/sheetsvicky/repos", "events_url": "https://api.github.com/users/sheetsvicky/events{/privacy}", "received_events_url": "https://api.github.com/users/sheetsvicky/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-19T14:34:19Z", "updated_at": "2019-09-05T16:33:23Z", "closed_at": "2019-09-05T16:33:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi @lmcinnes. I am new to Python and running UMAP-learn via an interface from R package Seurat. It gives the following error related to Numba, any suggestion? Thank you!\r\n\r\nmacOS10.12.6; python 2.7; numba 0.43.0\r\n\r\n`Error in py_call_impl(callable, dots$args, dots$keywords) \r\nTypingError: Failed in nopython mode pipeline (step: nopython frontend)\r\nUnknown attribute 'shape' of type none`\r\n\r\n`File \"../../../../../../Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/umap/umap_.py\", line 88: `\r\n`def smooth_knn_dist(distances, k, n_iter=64, local_connectivity=1.0, bandwidth=1.0):`\r\n`    <source elided>`\r\n`    target = np.log2(k) * bandwidth`\r\n`    rho = np.zeros(distances.shape[0])`\r\n     ` ^`\r\n\r\n`[1] During: typing of get attribute at /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/umap/umap_.py (88)\r\n`\r\n\r\n```\r\nFile \"../../../../../../Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/umap/umap_.py\", line 88:\r\ndef smooth_knn_dist(distances, k, n_iter=64, local_connectivity=1.0, bandwidth=1.0):\r\n<source elided>\r\n    target = np.log2(k) * bandwidth\r\n    rho = np.zeros(distances.shape[0])\r\n     ^\r\n```\r\n    \r\n\r\n`This is not usually a problem with Numba itself but instead often caused by`\r\n`the use of unsupported features or an i`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/209", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/209/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/209/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/209/events", "html_url": "https://github.com/lmcinnes/umap/issues/209", "id": 421668186, "node_id": "MDU6SXNzdWU0MjE2NjgxODY=", "number": 209, "title": "UMAP broken with numba==0.43", "user": {"login": "sauln", "id": 5808961, "node_id": "MDQ6VXNlcjU4MDg5NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/5808961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sauln", "html_url": "https://github.com/sauln", "followers_url": "https://api.github.com/users/sauln/followers", "following_url": "https://api.github.com/users/sauln/following{/other_user}", "gists_url": "https://api.github.com/users/sauln/gists{/gist_id}", "starred_url": "https://api.github.com/users/sauln/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sauln/subscriptions", "organizations_url": "https://api.github.com/users/sauln/orgs", "repos_url": "https://api.github.com/users/sauln/repos", "events_url": "https://api.github.com/users/sauln/events{/privacy}", "received_events_url": "https://api.github.com/users/sauln/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-03-15T19:17:02Z", "updated_at": "2019-03-28T16:41:11Z", "closed_at": "2019-03-28T16:41:11Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Hi @lmcinnes, I wanted to let you know about a new dependency issue that just popped up. It looks like the most recent Numba release and UMAP don't play nice together. There was a ton of updates included in the [Numba release notes](http://numba.pydata.org/numba-doc/latest/release-notes.html), so it's not clear what exactly the problem is. \r\n\r\nWith Python 3.7.1, `umap-learn==0.3.7`, and `numba==0.43.0` (released March 13th), this simple UMAP test script produces the following error: \r\n\r\n```\r\nimport umap\r\nimport numpy as np\r\nr = np.random.random((100,3))\r\nr2d = umap.UMAP().fit_transform(r)\r\n```\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 4, in <module>\r\n    r2d = umap.UMAP().fit_transform(r)\r\n  File \"/Users/sauln/research/scratch/test_umap/venv/lib/python3.7/site-packages/umap/umap_.py\", line 1566, in fit_transform\r\n    self.fit(X, y)\r\n  File \"/Users/sauln/research/scratch/test_umap/venv/lib/python3.7/site-packages/umap/umap_.py\", line 1398, in fit\r\n    self.verbose,\r\n  File \"/Users/sauln/research/scratch/test_umap/venv/lib/python3.7/site-packages/numba/dispatcher.py\", line 350, in _compile_for_args\r\n    error_rewrite(e, 'typing')\r\n  File \"/Users/sauln/research/scratch/test_umap/venv/lib/python3.7/site-packages/numba/dispatcher.py\", line 317, in error_rewrite\r\n    reraise(type(e), e, None)\r\n  File \"/Users/sauln/research/scratch/test_umap/venv/lib/python3.7/site-packages/numba/six.py\", line 658, in reraise\r\n    raise value.with_traceback(tb)\r\nnumba.errors.TypingError: Failed in nopython mode pipeline (step: nopython frontend)\r\nUnknown attribute 'shape' of type none\r\n\r\nFile \"venv/lib/python3.7/site-packages/umap/umap_.py\", line 88:\r\ndef smooth_knn_dist(distances, k, n_iter=64, local_connectivity=1.0, bandwidth=1.0):\r\n    <source elided>\r\n    target = np.log2(k) * bandwidth\r\n    rho = np.zeros(distances.shape[0])\r\n    ^\r\n\r\n[1] During: typing of get attribute at /Users/sauln/research/scratch/test_umap/venv/lib/python3.7/site-packages/umap/umap_.py (88)\r\n\r\nFile \"venv/lib/python3.7/site-packages/umap/umap_.py\", line 88:\r\ndef smooth_knn_dist(distances, k, n_iter=64, local_connectivity=1.0, bandwidth=1.0):\r\n    <source elided>\r\n    target = np.log2(k) * bandwidth\r\n    rho = np.zeros(distances.shape[0])\r\n    ^\r\n\r\nThis is not usually a problem with Numba itself but instead often caused by\r\nthe use of unsupported features or an issue in resolving types.\r\n\r\nTo see Python/NumPy features supported by the latest release of Numba visit:\r\nhttp://numba.pydata.org/numba-doc/dev/reference/pysupported.html\r\nand\r\nhttp://numba.pydata.org/numba-doc/dev/reference/numpysupported.html\r\n\r\nFor more information about typing errors and how to debug them visit:\r\nhttp://numba.pydata.org/numba-doc/latest/user/troubleshoot.html#my-code-doesn-t-compile\r\n\r\nIf you think your code should work with Numba, please report the error message\r\nand traceback, along with a minimal reproducer at:\r\nhttps://github.com/numba/numba/issues/new\r\n```\r\n\r\nAfter downgrading to `numba==0.42`, everything ran perfectly fine, so this is a fine temporary solution. \r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/205", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/205/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/205/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/205/events", "html_url": "https://github.com/lmcinnes/umap/issues/205", "id": 417694067, "node_id": "MDU6SXNzdWU0MTc2OTQwNjc=", "number": 205, "title": "poincare disk model of hyperbolic geometry", "user": {"login": "kousun12", "id": 1912669, "node_id": "MDQ6VXNlcjE5MTI2Njk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1912669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kousun12", "html_url": "https://github.com/kousun12", "followers_url": "https://api.github.com/users/kousun12/followers", "following_url": "https://api.github.com/users/kousun12/following{/other_user}", "gists_url": "https://api.github.com/users/kousun12/gists{/gist_id}", "starred_url": "https://api.github.com/users/kousun12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kousun12/subscriptions", "organizations_url": "https://api.github.com/users/kousun12/orgs", "repos_url": "https://api.github.com/users/kousun12/repos", "events_url": "https://api.github.com/users/kousun12/events{/privacy}", "received_events_url": "https://api.github.com/users/kousun12/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-03-06T09:06:54Z", "updated_at": "2019-09-17T22:46:34Z", "closed_at": "2019-09-17T21:18:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Any chance we can get in a poincare metric? I'm working on embeddings in hyperbolic space in the poincare ball model, and would love to get some visualizations of points in the n-d unit balls down to the poincare disk. \r\n\r\nIs my premise even reasonable, given how umap works?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/204", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/204/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/204/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/204/events", "html_url": "https://github.com/lmcinnes/umap/issues/204", "id": 414287226, "node_id": "MDU6SXNzdWU0MTQyODcyMjY=", "number": 204, "title": "Default parameters and choice of distance metric", "user": {"login": "atarashansky", "id": 16548075, "node_id": "MDQ6VXNlcjE2NTQ4MDc1", "avatar_url": "https://avatars1.githubusercontent.com/u/16548075?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atarashansky", "html_url": "https://github.com/atarashansky", "followers_url": "https://api.github.com/users/atarashansky/followers", "following_url": "https://api.github.com/users/atarashansky/following{/other_user}", "gists_url": "https://api.github.com/users/atarashansky/gists{/gist_id}", "starred_url": "https://api.github.com/users/atarashansky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atarashansky/subscriptions", "organizations_url": "https://api.github.com/users/atarashansky/orgs", "repos_url": "https://api.github.com/users/atarashansky/repos", "events_url": "https://api.github.com/users/atarashansky/events{/privacy}", "received_events_url": "https://api.github.com/users/atarashansky/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-02-25T20:16:30Z", "updated_at": "2019-05-06T20:40:17Z", "closed_at": "2019-05-06T20:40:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was wondering if the default choice of hyperparameters (such as local_connectivity, min_dist, spread, etc) were chosen / optimized with respect to a particular distance metric (i.e. Euclidean distance).\r\n\r\nIn your experience, have you found that the default values typically work \"well\" (whether aesthetically for visualization or quantitatively for classification tasks) for other distance metrics like correlation, or should I be fiddling with the hyperparameters when I change distance metrics?\r\n\r\nThanks!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/203", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/203/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/203/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/203/events", "html_url": "https://github.com/lmcinnes/umap/issues/203", "id": 413675107, "node_id": "MDU6SXNzdWU0MTM2NzUxMDc=", "number": 203, "title": "How can I take computed distance matrix as the input of UMAP?", "user": {"login": "odorea", "id": 29854520, "node_id": "MDQ6VXNlcjI5ODU0NTIw", "avatar_url": "https://avatars3.githubusercontent.com/u/29854520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odorea", "html_url": "https://github.com/odorea", "followers_url": "https://api.github.com/users/odorea/followers", "following_url": "https://api.github.com/users/odorea/following{/other_user}", "gists_url": "https://api.github.com/users/odorea/gists{/gist_id}", "starred_url": "https://api.github.com/users/odorea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odorea/subscriptions", "organizations_url": "https://api.github.com/users/odorea/orgs", "repos_url": "https://api.github.com/users/odorea/repos", "events_url": "https://api.github.com/users/odorea/events{/privacy}", "received_events_url": "https://api.github.com/users/odorea/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-23T08:59:04Z", "updated_at": "2019-02-23T09:05:52Z", "closed_at": "2019-02-23T09:05:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Cause I have to reapt my experiment on a large datasets with cosine metric, computing neighbor matrix is too expensive for me. I've read the documentation but find no api suitable for distance matrix input. Is there any solution available? THX", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/202", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/202/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/202/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/202/events", "html_url": "https://github.com/lmcinnes/umap/issues/202", "id": 408572610, "node_id": "MDU6SXNzdWU0MDg1NzI2MTA=", "number": 202, "title": "Can tau_rand return values < 0 ?", "user": {"login": "jlmelville", "id": 1936393, "node_id": "MDQ6VXNlcjE5MzYzOTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/1936393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlmelville", "html_url": "https://github.com/jlmelville", "followers_url": "https://api.github.com/users/jlmelville/followers", "following_url": "https://api.github.com/users/jlmelville/following{/other_user}", "gists_url": "https://api.github.com/users/jlmelville/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlmelville/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlmelville/subscriptions", "organizations_url": "https://api.github.com/users/jlmelville/orgs", "repos_url": "https://api.github.com/users/jlmelville/repos", "events_url": "https://api.github.com/users/jlmelville/events{/privacy}", "received_events_url": "https://api.github.com/users/jlmelville/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-02-10T20:02:17Z", "updated_at": "2019-03-28T15:26:36Z", "closed_at": "2019-03-28T15:26:36Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The description of `tau_rand` says that it returns \"A (pseudo)-random float32 in the interval [0, 1]\". Using \r\nversion 0.3.7 (installed via Anaconda on Windows 10), it seems to generate floats in the interval [-1, 1]:\r\n\r\n```python\r\nimport umap\r\nimport numpy as np\r\n\r\nrng_state = np.array([1000, 2000, 3000], dtype = np.int64)\r\nfor i in range(10):\r\n     print(umap.utils.tau_rand(rng_state))\r\n\r\n0.18258631229400635\r\n-0.18693089485168457\r\n0.1864445060491562\r\n0.3614959716796875\r\n-0.8346158862113953\r\n-0.5668963193893433\r\n-0.7467218637466431\r\n0.7167382836341858\r\n-0.21391557157039642\r\n-0.009349984116852283\r\n```\r\n\r\nIf I am doing it right, this would seem to have implications only for the nearest neighbor descent part of the code, but I think it means that the sample rate, `rho` is effectively larger than expected. \r\n\r\nIn the current master, it effects the main loop of the `nn_descent` code. I see there have been some changes on the 0.4 branch, where I think it would have an effect on `new_build_candidates`?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/201", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/201/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/201/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/201/events", "html_url": "https://github.com/lmcinnes/umap/issues/201", "id": 408486894, "node_id": "MDU6SXNzdWU0MDg0ODY4OTQ=", "number": 201, "title": "TypeError: Cannot use scipy.linalg.eigh for sparse A with k >= N. Use scipy.linalg.eigh(A.toarray()) or reduce k.", "user": {"login": "Cristianasp", "id": 29759874, "node_id": "MDQ6VXNlcjI5NzU5ODc0", "avatar_url": "https://avatars0.githubusercontent.com/u/29759874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cristianasp", "html_url": "https://github.com/Cristianasp", "followers_url": "https://api.github.com/users/Cristianasp/followers", "following_url": "https://api.github.com/users/Cristianasp/following{/other_user}", "gists_url": "https://api.github.com/users/Cristianasp/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cristianasp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cristianasp/subscriptions", "organizations_url": "https://api.github.com/users/Cristianasp/orgs", "repos_url": "https://api.github.com/users/Cristianasp/repos", "events_url": "https://api.github.com/users/Cristianasp/events{/privacy}", "received_events_url": "https://api.github.com/users/Cristianasp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-10T00:40:03Z", "updated_at": "2019-02-10T12:31:36Z", "closed_at": "2019-02-10T12:31:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, I am using umap on Kaggle competition\u00b4s dataset:\r\nhttps://www.kaggle.com/c/dont-overfit-ii\r\n\r\nI have scaled the dataset and ran umap using different values for n_neighbors and n_components.\r\nfor n_components in (2,3,4,5,6,7,9,10,15, 20, 30, 37, 40, 50, 75, 100, 250)\r\nfor n_neighbors in (2,3,5,7,9,13,15, 16, 19, 20, 35, 30, 35, 40, 50 , 60, 100)\r\n\r\nFor ALL variations of n-neighbors and n-component I got a warning message:\r\nC:\\ProgramData\\Anaconda3\\envs\\NOVO\\lib\\site-packages\\sklearn\\metrics\\pairwise.py:258: RuntimeWarning: invalid value encountered in sqrt\r\n  return distances if squared else np.sqrt(distances, out=distances)\r\n\r\nAnd specifically when running for 250 components and 60 neighbors, I got the following warnings and an exception:\r\nC:\\ProgramData\\Anaconda3\\envs\\NOVO\\lib\\site-packages\\sklearn\\metrics\\pairwise.py:258: RuntimeWarning: invalid value encountered in sqrt\r\n  return distances if squared else np.sqrt(distances, out=distances)\r\nC:\\ProgramData\\Anaconda3\\envs\\NOVO\\lib\\site-packages\\scipy\\sparse\\linalg\\eigen\\arpack\\arpack.py:1556: RuntimeWarning: k >= N for N * N square matrix. Attempting to use scipy.linalg.eigh instead.\r\n  RuntimeWarning)\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-25-4582e1cee6b1> in <module>()\r\n      2     for n in (60, 100):\r\n      3         print(c, n)\r\n----> 4         embedding = umap.UMAP(n_neighbors=n, n_components=c).fit(X)\r\n      5         pd.DataFrame(embedding.transform(X)).to_csv(\"processadas/train_umap_n\"+str(n)+\"_c\"+str(c)+\".csv\")\r\n      6         pd.DataFrame(embedding.transform(final)).to_csv(\"processadas/test_umap_n\"+str(n)+\"_c\"+str(c)+\".csv\")\r\n\r\nC:\\ProgramData\\Anaconda3\\envs\\NOVO\\lib\\site-packages\\umap\\umap_.py in fit(self, X, y)\r\n   1536             self.metric,\r\n   1537             self._metric_kwds,\r\n-> 1538             self.verbose,\r\n   1539         )\r\n   1540 \r\n\r\nC:\\ProgramData\\Anaconda3\\envs\\NOVO\\lib\\site-packages\\umap\\umap_.py in simplicial_set_embedding(data, graph, n_components, initial_alpha, a, b, gamma, negative_sample_rate, n_epochs, init, random_state, metric, metric_kwds, verbose)\r\n    941             random_state,\r\n    942             metric=metric,\r\n--> 943             metric_kwds=metric_kwds,\r\n    944         )\r\n    945         expansion = 10.0 / initialisation.max()\r\n\r\nC:\\ProgramData\\Anaconda3\\envs\\NOVO\\lib\\site-packages\\umap\\spectral.py in spectral_layout(data, graph, dim, random_state, metric, metric_kwds)\r\n    263                 tol=1e-4,\r\n    264                 v0=np.ones(L.shape[0]),\r\n--> 265                 maxiter=graph.shape[0] * 5,\r\n    266             )\r\n    267         else:\r\n\r\nC:\\ProgramData\\Anaconda3\\envs\\NOVO\\lib\\site-packages\\scipy\\sparse\\linalg\\eigen\\arpack\\arpack.py in eigsh(A, k, M, sigma, which, v0, ncv, maxiter, tol, return_eigenvectors, Minv, OPinv, mode)\r\n   1557 \r\n   1558         if issparse(A):\r\n-> 1559             raise TypeError(\"Cannot use scipy.linalg.eigh for sparse A with \"\r\n   1560                             \"k >= N. Use scipy.linalg.eigh(A.toarray()) or\"\r\n   1561                             \" reduce k.\")\r\n\r\nTypeError: Cannot use scipy.linalg.eigh for sparse A with k >= N. Use scipy.linalg.eigh(A.toarray()) or reduce k.\r\n\r\nsklearn - 0.20.0\r\nscipy - 1.1.0\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/200", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/200/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/200/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/200/events", "html_url": "https://github.com/lmcinnes/umap/issues/200", "id": 406802592, "node_id": "MDU6SXNzdWU0MDY4MDI1OTI=", "number": 200, "title": "Approximate the transform of a single new data item (on-line embedding)", "user": {"login": "dhemgren", "id": 12336473, "node_id": "MDQ6VXNlcjEyMzM2NDcz", "avatar_url": "https://avatars0.githubusercontent.com/u/12336473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhemgren", "html_url": "https://github.com/dhemgren", "followers_url": "https://api.github.com/users/dhemgren/followers", "following_url": "https://api.github.com/users/dhemgren/following{/other_user}", "gists_url": "https://api.github.com/users/dhemgren/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhemgren/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhemgren/subscriptions", "organizations_url": "https://api.github.com/users/dhemgren/orgs", "repos_url": "https://api.github.com/users/dhemgren/repos", "events_url": "https://api.github.com/users/dhemgren/events{/privacy}", "received_events_url": "https://api.github.com/users/dhemgren/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-05T14:16:03Z", "updated_at": "2019-02-11T09:22:10Z", "closed_at": "2019-02-11T09:22:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nThank you for your awesome work on this! Have I understood correctly that \".transform(new_data)\" performs the SGD all over again with the new data included? I'm trying to get the corresponding 2D position of a single new data item via \".transform(new_item)\", but it is proving to be quite slow (as in several seconds) for a single 13-dimensional input on a UMAP of ~1000 data points. I read in #125 that running transform() on partial sets is not more efficient than using the full data set in its entirety which led me to this question.\r\n\r\nIs there a better way to approximate / transform a single data point from the high dimensional space to the UMAP-embedding than via another call to .transform()? I don't have the wits to understand a lot of the math presented in the paper, so the question might be quite silly. \r\n\r\nSincerely,\r\nDan\r\n\r\n(edited for clarity)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/198", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/198/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/198/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/198/events", "html_url": "https://github.com/lmcinnes/umap/issues/198", "id": 405934027, "node_id": "MDU6SXNzdWU0MDU5MzQwMjc=", "number": 198, "title": "x and y in fit() are not required to be the same length", "user": {"login": "kylemcdonald", "id": 157106, "node_id": "MDQ6VXNlcjE1NzEwNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/157106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylemcdonald", "html_url": "https://github.com/kylemcdonald", "followers_url": "https://api.github.com/users/kylemcdonald/followers", "following_url": "https://api.github.com/users/kylemcdonald/following{/other_user}", "gists_url": "https://api.github.com/users/kylemcdonald/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylemcdonald/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylemcdonald/subscriptions", "organizations_url": "https://api.github.com/users/kylemcdonald/orgs", "repos_url": "https://api.github.com/users/kylemcdonald/repos", "events_url": "https://api.github.com/users/kylemcdonald/events{/privacy}", "received_events_url": "https://api.github.com/users/kylemcdonald/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 638315744, "node_id": "MDU6TGFiZWw2MzgzMTU3NDQ=", "url": "https://api.github.com/repos/lmcinnes/umap/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}, {"id": 1031419982, "node_id": "MDU6TGFiZWwxMDMxNDE5OTgy", "url": "https://api.github.com/repos/lmcinnes/umap/labels/good%20first%20issue", "name": "good first issue", "color": "513ae8", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "lmcinnes", "id": 11962885, "node_id": "MDQ6VXNlcjExOTYyODg1", "avatar_url": "https://avatars0.githubusercontent.com/u/11962885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmcinnes", "html_url": "https://github.com/lmcinnes", "followers_url": "https://api.github.com/users/lmcinnes/followers", "following_url": "https://api.github.com/users/lmcinnes/following{/other_user}", "gists_url": "https://api.github.com/users/lmcinnes/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmcinnes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmcinnes/subscriptions", "organizations_url": "https://api.github.com/users/lmcinnes/orgs", "repos_url": "https://api.github.com/users/lmcinnes/repos", "events_url": "https://api.github.com/users/lmcinnes/events{/privacy}", "received_events_url": "https://api.github.com/users/lmcinnes/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lmcinnes", "id": 11962885, "node_id": "MDQ6VXNlcjExOTYyODg1", "avatar_url": "https://avatars0.githubusercontent.com/u/11962885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmcinnes", "html_url": "https://github.com/lmcinnes", "followers_url": "https://api.github.com/users/lmcinnes/followers", "following_url": "https://api.github.com/users/lmcinnes/following{/other_user}", "gists_url": "https://api.github.com/users/lmcinnes/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmcinnes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmcinnes/subscriptions", "organizations_url": "https://api.github.com/users/lmcinnes/orgs", "repos_url": "https://api.github.com/users/lmcinnes/repos", "events_url": "https://api.github.com/users/lmcinnes/events{/privacy}", "received_events_url": "https://api.github.com/users/lmcinnes/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-02T01:43:42Z", "updated_at": "2019-02-03T19:53:30Z", "closed_at": "2019-02-03T19:53:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just ran some code that basically boils down to:\r\n\r\n```python\r\nx = np.random.uniform(0, 1, (256, 10))\r\ny = np.random.randint(10, size=(257, 1))\r\nout = umap.UMAP().fit_transform(x, y)\r\n```\r\n\r\nAnd it took me a while to realize I made a bit mistake (the x and y weren't matched with each other) because the output still looked sort of plausible. It could be really good to add a `if y is not None and len(x) == len(y)` exception to the `fit()` and `fit_transform()` functions, just to help out other folks making similar dumb mistakes.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/197", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/197/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/197/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/197/events", "html_url": "https://github.com/lmcinnes/umap/issues/197", "id": 404741862, "node_id": "MDU6SXNzdWU0MDQ3NDE4NjI=", "number": 197, "title": "Extract knn-graph for resulting embeddings", "user": {"login": "buhrmann", "id": 190342, "node_id": "MDQ6VXNlcjE5MDM0Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/190342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/buhrmann", "html_url": "https://github.com/buhrmann", "followers_url": "https://api.github.com/users/buhrmann/followers", "following_url": "https://api.github.com/users/buhrmann/following{/other_user}", "gists_url": "https://api.github.com/users/buhrmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/buhrmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/buhrmann/subscriptions", "organizations_url": "https://api.github.com/users/buhrmann/orgs", "repos_url": "https://api.github.com/users/buhrmann/repos", "events_url": "https://api.github.com/users/buhrmann/events{/privacy}", "received_events_url": "https://api.github.com/users/buhrmann/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-01-30T12:10:59Z", "updated_at": "2019-09-17T08:06:26Z", "closed_at": "2019-09-17T07:55:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, just a quick question: the nearest neighbours for each output embedding are not already calculated internally and accessible somehow after a fit(), right? (As opposed to the knn in input space). If I wanted to calculate these myself, would the following be the right way?\r\n\r\n```python\r\nembeddings = umap.UMAP(n_neighbors=100, min_dist=0.5).fit_transform(X)\r\nknn = umap.umap_.nearest_neighbors(embeddings, n_neighbors=N, \r\n                                   metric='euclidean', metric_kwds={},\r\n                                   angular=True, random_state=np.random.RandomState(42))\r\n``` ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/196", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/196/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/196/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/196/events", "html_url": "https://github.com/lmcinnes/umap/issues/196", "id": 404122386, "node_id": "MDU6SXNzdWU0MDQxMjIzODY=", "number": 196, "title": "Validation and clarification of MNIST visualization", "user": {"login": "farleylai", "id": 158540, "node_id": "MDQ6VXNlcjE1ODU0MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/158540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/farleylai", "html_url": "https://github.com/farleylai", "followers_url": "https://api.github.com/users/farleylai/followers", "following_url": "https://api.github.com/users/farleylai/following{/other_user}", "gists_url": "https://api.github.com/users/farleylai/gists{/gist_id}", "starred_url": "https://api.github.com/users/farleylai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/farleylai/subscriptions", "organizations_url": "https://api.github.com/users/farleylai/orgs", "repos_url": "https://api.github.com/users/farleylai/repos", "events_url": "https://api.github.com/users/farleylai/events{/privacy}", "received_events_url": "https://api.github.com/users/farleylai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-29T04:55:13Z", "updated_at": "2019-09-16T14:20:35Z", "closed_at": "2019-09-16T14:20:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI just installed the latest release (0.3.7) of UMAP and scikit-learn (0.20) through conda.\r\nThe MNIST example does not work for the deprecated fetch_mldata().\r\nThe API seems changed to fetch_openml() so I modifies the example a bit as attached:\r\n\r\n[example.py.txt](https://github.com/lmcinnes/umap/files/2808380/example.py.txt)\r\n\r\nThe major change is to enlarge the point size to default by removing the `s` param and fix the target string type to match the color type for comparison with t-SNE later on.\r\nThe resulting figures of small MNIST from load_digits() and full MNIST from fetch_openml() are shown below:\r\n\r\n![example-small-15-0 1-euclidean](https://user-images.githubusercontent.com/158540/51919867-4cbb3980-23b2-11e9-898f-716fc9d0c38c.png)\r\n**Small MNIST from load_digits()**\r\n\r\n![example-full-15-0 1-euclidean](https://user-images.githubusercontent.com/158540/51919900-5cd31900-23b2-11e9-8c34-a66f84f3a3d3.png)\r\n**Full MNIST from fetch_openml()**\r\n\r\nI make sure the default parameters are the same as the original example:\r\n- n_neighbors = 15\r\n- min_dist = 0.1\r\n- metric = 'euclidean'\r\n\r\nThe running time of both are 7.99s and 357.24s on i7-6850K CPU @ 3.60GHz.\r\nHowever, the figures don't look as clean as shown in the paper anymore but with many points from other classes.\r\nAm I missing something or is it expected?\r\n\r\n\r\nFor comparison, the visualization by Multicore t-SNE is attached below:\r\n\r\n![MNIST by Multicore t-SNE](https://raw.githubusercontent.com/DmitryUlyanov/Multicore-TSNE/master/mnist-tsne.png)\r\n\r\nTheir `s` param is also left to default.\r\nThough there are more points between different classes, it looks cleaner within a class meaning out-of-class points seem to come in a fewer number of colors from nearby classes.\r\nAny justifications would be appreciated.\r\n\r\n\r\nLast but not least, is there any guarantee that UMAP retains more nearest neighbors in the low dimensional embedding space as in the original high dimensional space than t-SNE?\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/195", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/195/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/195/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/195/events", "html_url": "https://github.com/lmcinnes/umap/issues/195", "id": 403581276, "node_id": "MDU6SXNzdWU0MDM1ODEyNzY=", "number": 195, "title": "UMAP - how to link embedding to input data?", "user": {"login": "seaspray09", "id": 25420907, "node_id": "MDQ6VXNlcjI1NDIwOTA3", "avatar_url": "https://avatars2.githubusercontent.com/u/25420907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seaspray09", "html_url": "https://github.com/seaspray09", "followers_url": "https://api.github.com/users/seaspray09/followers", "following_url": "https://api.github.com/users/seaspray09/following{/other_user}", "gists_url": "https://api.github.com/users/seaspray09/gists{/gist_id}", "starred_url": "https://api.github.com/users/seaspray09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seaspray09/subscriptions", "organizations_url": "https://api.github.com/users/seaspray09/orgs", "repos_url": "https://api.github.com/users/seaspray09/repos", "events_url": "https://api.github.com/users/seaspray09/events{/privacy}", "received_events_url": "https://api.github.com/users/seaspray09/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-27T18:41:28Z", "updated_at": "2019-09-05T16:34:57Z", "closed_at": "2019-09-05T16:34:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "How would one track mapping of clusters produced by UMAP to the original input data?\r\nThis is different from the issue raised in #169.  Thank you.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/192", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/192/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/192/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/192/events", "html_url": "https://github.com/lmcinnes/umap/issues/192", "id": 398034287, "node_id": "MDU6SXNzdWUzOTgwMzQyODc=", "number": 192, "title": "Using UMAP for Reconstructions (low rank approximation)", "user": {"login": "beelze-b", "id": 7582471, "node_id": "MDQ6VXNlcjc1ODI0NzE=", "avatar_url": "https://avatars2.githubusercontent.com/u/7582471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beelze-b", "html_url": "https://github.com/beelze-b", "followers_url": "https://api.github.com/users/beelze-b/followers", "following_url": "https://api.github.com/users/beelze-b/following{/other_user}", "gists_url": "https://api.github.com/users/beelze-b/gists{/gist_id}", "starred_url": "https://api.github.com/users/beelze-b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beelze-b/subscriptions", "organizations_url": "https://api.github.com/users/beelze-b/orgs", "repos_url": "https://api.github.com/users/beelze-b/repos", "events_url": "https://api.github.com/users/beelze-b/events{/privacy}", "received_events_url": "https://api.github.com/users/beelze-b/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-10T22:01:22Z", "updated_at": "2019-01-11T06:41:29Z", "closed_at": "2019-01-11T06:40:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Instead of using UMAP as a dimension reduction technique, is it possible to also use it to reconstruct the original data by using the eigenvectors, similar to how you can use PCA or LLE for a low rank approximation? \r\n\r\nSince it uses the spectral embeddings, it doesn't seem that you can get the original data, from looking at the umap.graph_ object and its eigenvectors. Just wanted to confirm this suspicion. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/189", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/189/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/189/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/189/events", "html_url": "https://github.com/lmcinnes/umap/issues/189", "id": 395300934, "node_id": "MDU6SXNzdWUzOTUzMDA5MzQ=", "number": 189, "title": "Using an alternative approximate KNN algorithm", "user": {"login": "GWW", "id": 918016, "node_id": "MDQ6VXNlcjkxODAxNg==", "avatar_url": "https://avatars2.githubusercontent.com/u/918016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GWW", "html_url": "https://github.com/GWW", "followers_url": "https://api.github.com/users/GWW/followers", "following_url": "https://api.github.com/users/GWW/following{/other_user}", "gists_url": "https://api.github.com/users/GWW/gists{/gist_id}", "starred_url": "https://api.github.com/users/GWW/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GWW/subscriptions", "organizations_url": "https://api.github.com/users/GWW/orgs", "repos_url": "https://api.github.com/users/GWW/repos", "events_url": "https://api.github.com/users/GWW/events{/privacy}", "received_events_url": "https://api.github.com/users/GWW/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-02T16:21:57Z", "updated_at": "2019-01-02T23:44:24Z", "closed_at": "2019-01-02T23:44:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI was wondering if it would be difficult to use an alternative KNN algorithm with UMAP.  I have found that UMAP has issues with a particular set of samples from one of my datasets:\r\n\r\n```\r\npython3.6/site-packages/umap/rp_tree.py:712: UserWarning: Random Projection forest initialisation failed due to recursionlimit being reached. Something is a little strange with your data, and this may take longer than normal to compute.\r\n  \"Random Projection forest initialisation failed due to recursion\"\r\n```\r\n\r\nFrom reading previous issues with similar errors I suspect it has something to do with the these datasets being highly asymmetric, ie. 90% of the 250,000 data points are derived from a single cluster.  From a cursory examination of the UMAP source code it seems that I would only need to change the `nearest_neighbors` function to accomplish this but I wanted to make sure I am not missing something important.\r\n\r\nThanks\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/lmcinnes/umap/issues/188", "repository_url": "https://api.github.com/repos/lmcinnes/umap", "labels_url": "https://api.github.com/repos/lmcinnes/umap/issues/188/labels{/name}", "comments_url": "https://api.github.com/repos/lmcinnes/umap/issues/188/comments", "events_url": "https://api.github.com/repos/lmcinnes/umap/issues/188/events", "html_url": "https://github.com/lmcinnes/umap/issues/188", "id": 394706720, "node_id": "MDU6SXNzdWUzOTQ3MDY3MjA=", "number": 188, "title": "erreur", "user": {"login": "zebobs", "id": 26971235, "node_id": "MDQ6VXNlcjI2OTcxMjM1", "avatar_url": "https://avatars2.githubusercontent.com/u/26971235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zebobs", "html_url": "https://github.com/zebobs", "followers_url": "https://api.github.com/users/zebobs/followers", "following_url": "https://api.github.com/users/zebobs/following{/other_user}", "gists_url": "https://api.github.com/users/zebobs/gists{/gist_id}", "starred_url": "https://api.github.com/users/zebobs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zebobs/subscriptions", "organizations_url": "https://api.github.com/users/zebobs/orgs", "repos_url": "https://api.github.com/users/zebobs/repos", "events_url": "https://api.github.com/users/zebobs/events{/privacy}", "received_events_url": "https://api.github.com/users/zebobs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-12-28T19:45:41Z", "updated_at": "2018-12-28T19:54:22Z", "closed_at": "2018-12-28T19:54:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Bonjour,\r\n\r\nUne fois d\u00e9termin\u00e9s et enregistr\u00e9s les zooms min et max de fond de carte personnalis\u00e9e ne sont pas enregistrables. (Il ne d\u00e9clenche pas le bouton enregistrer et ne sont pas enregistr\u00e9 si on fait une autre modif)\r\n\r\nSolution provisoire : effacer toutes les infos de carte personnalis\u00e9e et recommencer.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}]}