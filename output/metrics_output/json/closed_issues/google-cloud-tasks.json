{"total_count": 4, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/googleapis/python-tasks/issues/28", "repository_url": "https://api.github.com/repos/googleapis/python-tasks", "labels_url": "https://api.github.com/repos/googleapis/python-tasks/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/googleapis/python-tasks/issues/28/comments", "events_url": "https://api.github.com/repos/googleapis/python-tasks/issues/28/events", "html_url": "https://github.com/googleapis/python-tasks/issues/28", "id": 643825788, "node_id": "MDU6SXNzdWU2NDM4MjU3ODg=", "number": 28, "title": "Inconsistent documentation on creating a task", "user": {"login": "jacobg", "id": 736985, "node_id": "MDQ6VXNlcjczNjk4NQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/736985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jacobg", "html_url": "https://github.com/jacobg", "followers_url": "https://api.github.com/users/jacobg/followers", "following_url": "https://api.github.com/users/jacobg/following{/other_user}", "gists_url": "https://api.github.com/users/jacobg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jacobg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jacobg/subscriptions", "organizations_url": "https://api.github.com/users/jacobg/orgs", "repos_url": "https://api.github.com/users/jacobg/repos", "events_url": "https://api.github.com/users/jacobg/events{/privacy}", "received_events_url": "https://api.github.com/users/jacobg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1814836562, "node_id": "MDU6TGFiZWwxODE0ODM2NTYy", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/api:%20cloudtasks", "name": "api: cloudtasks", "color": "b316fa", "default": false, "description": "Issues related to the Cloud Tasks API."}, {"id": 1814838028, "node_id": "MDU6TGFiZWwxODE0ODM4MDI4", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/triage%20me", "name": "triage me", "color": "FF69B4", "default": false, "description": "I really want to be triaged."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-23T13:05:35Z", "updated_at": "2020-06-24T19:02:53Z", "closed_at": "2020-06-24T18:50:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "This client library's documentation for the `create_task` function includes optional parameters for `retry`, `timeout`, and `metadata`, as shown here:\r\nhttps://googleapis.dev/python/cloudtasks/latest/gapic/v2/api.html?highlight=create_task#google.cloud.tasks_v2.CloudTasksClient.create_task\r\n\r\nHowever, the Cloud Tasks REST API does not include such parameters, as shown here:\r\nhttps://cloud.google.com/tasks/docs/reference/rest/v2/projects.locations.queues.tasks/create\r\n\r\nIn fact, on another REST API web page, it explicitly states:\r\n\r\n> RetryConfig\r\n> Settings that determine the retry behavior.\r\n> \r\n> For tasks created using Cloud Tasks: the queue-level retry settings apply to all tasks in the queue that were created using Cloud Tasks. Retry settings cannot be set on individual tasks.\r\n>\r\n> For tasks created using the App Engine SDK: the queue-level retry settings apply to all tasks in the queue which do not have retry settings explicitly set on the task and were created by the App Engine SDK. See App Engine documentation.\r\n\r\nhttps://googleapis.github.io/google-cloud-dotnet/docs/Google.Cloud.Tasks.V2/api/Google.Cloud.Tasks.V2.Queue.html#Google_Cloud_Tasks_V2_Queue_RetryConfig\r\n\r\nIt's not clear what to rely on here. Can you please clarify? Thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/googleapis/python-tasks/issues/27", "repository_url": "https://api.github.com/repos/googleapis/python-tasks", "labels_url": "https://api.github.com/repos/googleapis/python-tasks/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/googleapis/python-tasks/issues/27/comments", "events_url": "https://api.github.com/repos/googleapis/python-tasks/issues/27/events", "html_url": "https://github.com/googleapis/python-tasks/issues/27", "id": 642398434, "node_id": "MDU6SXNzdWU2NDIzOTg0MzQ=", "number": 27, "title": "Synthesis failed for python-tasks", "user": {"login": "yoshi-automation", "id": 44816363, "node_id": "MDQ6VXNlcjQ0ODE2MzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/44816363?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yoshi-automation", "html_url": "https://github.com/yoshi-automation", "followers_url": "https://api.github.com/users/yoshi-automation/followers", "following_url": "https://api.github.com/users/yoshi-automation/following{/other_user}", "gists_url": "https://api.github.com/users/yoshi-automation/gists{/gist_id}", "starred_url": "https://api.github.com/users/yoshi-automation/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yoshi-automation/subscriptions", "organizations_url": "https://api.github.com/users/yoshi-automation/orgs", "repos_url": "https://api.github.com/users/yoshi-automation/repos", "events_url": "https://api.github.com/users/yoshi-automation/events{/privacy}", "received_events_url": "https://api.github.com/users/yoshi-automation/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1814836562, "node_id": "MDU6TGFiZWwxODE0ODM2NTYy", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/api:%20cloudtasks", "name": "api: cloudtasks", "color": "b316fa", "default": false, "description": "Issues related to the Cloud Tasks API."}, {"id": 1859984455, "node_id": "MDU6TGFiZWwxODU5OTg0NDU1", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/autosynth%20failure", "name": "autosynth failure", "color": "ededed", "default": false, "description": null}, {"id": 1814837822, "node_id": "MDU6TGFiZWwxODE0ODM3ODIy", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/priority:%20p1", "name": "priority: p1", "color": "ffa03e", "default": false, "description": "Medium priority. Will be fixed prior to next release."}, {"id": 1814837708, "node_id": "MDU6TGFiZWwxODE0ODM3NzA4", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/type:%20bug", "name": "type: bug", "color": "db4437", "default": false, "description": "Error or flaw in code with unintended results or allowing sub-optimal usage patterns."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-20T15:40:48Z", "updated_at": "2020-06-25T14:03:39Z", "closed_at": "2020-06-25T14:03:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello! Autosynth couldn't regenerate python-tasks. :broken_heart:\n\nHere's the output from running `synth.py`:\n\n```\nzel_kbuilder/a732f932c2cbeb7e37e1543f189a2a73/external/bazel_tools/tools/build_defs/repo/http.bzl:296:16):\n - <builtin>\n - /home/kbuilder/.cache/synthtool/googleapis/WORKSPACE:209:1\nAnalyzing: target //google/cloud/tasks/v2beta2:tasks-v2beta2-py (1 packages loaded, 0 targets configured)\nINFO: Call stack for the definition of repository 'go_sdk' which is a _go_download_sdk (rule definition at /home/kbuilder/.cache/bazel/_bazel_kbuilder/a732f932c2cbeb7e37e1543f189a2a73/external/io_bazel_rules_go/go/private/sdk.bzl:79:20):\n - <builtin>\n - /home/kbuilder/.cache/bazel/_bazel_kbuilder/a732f932c2cbeb7e37e1543f189a2a73/external/io_bazel_rules_go/go/private/sdk.bzl:92:5\n - /home/kbuilder/.cache/bazel/_bazel_kbuilder/a732f932c2cbeb7e37e1543f189a2a73/external/io_bazel_rules_go/go/private/sdk.bzl:260:13\n - /home/kbuilder/.cache/synthtool/googleapis/WORKSPACE:81:1\nERROR: While resolving toolchains for target @pypi_black//:black: invalid registered toolchain '@gapic_generator_python//:pyenv3_toolchain': no such package '@gapic_generator_python//': The repository '@gapic_generator_python' could not be resolved\nERROR: Analysis of target '//google/cloud/tasks/v2beta2:tasks-v2beta2-py' failed; build aborted: invalid registered toolchain '@gapic_generator_python//:pyenv3_toolchain': no such package '@gapic_generator_python//': The repository '@gapic_generator_python' could not be resolved\nINFO: Elapsed time: 4.019s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (20 packages loaded, 14 targets configured)\nFAILED: Build did NOT complete successfully (20 packages loaded, 14 targets configured)\n\nERROR:synthtool:Failed executing bazel --max_idle_secs=60 build //google/cloud/tasks/v2beta2:tasks-v2beta2-py:\n\nLoading: \nLoading: 0 packages loaded\nLoading: 0 packages loaded\nLoading: 0 packages loaded\nINFO: SHA256 (https://github.com/googleapis/gapic-generator/archive/4cb5d58f258afdb8abc0b99706370b4a59252b22.zip) = 3cb59685c8a4ae3db1dec60b286f22d8d3aa3d3b36bb08bf003b5e088fac83cb\nDEBUG: Rule 'com_google_api_codegen' indicated that a canonical reproducible form can be obtained by modifying arguments sha256 = \"3cb59685c8a4ae3db1dec60b286f22d8d3aa3d3b36bb08bf003b5e088fac83cb\"\nDEBUG: Call stack for the definition of repository 'com_google_api_codegen' which is a http_archive (rule definition at /home/kbuilder/.cache/bazel/_bazel_kbuilder/a732f932c2cbeb7e37e1543f189a2a73/external/bazel_tools/tools/build_defs/repo/http.bzl:296:16):\n - <builtin>\n - /home/kbuilder/.cache/synthtool/googleapis/WORKSPACE:62:1\nLoading: 0 packages loaded\nINFO: SHA256 (https://github.com/googleapis/protoc-java-resource-names-plugin/archive/5bd90a1f67c1c128291702cc320d667060f40f95.zip) = c3c0661b6c30fce5c63b1d5f473b1c6c4d59e19853ce3b9e8f5a447f953af906\nDEBUG: Rule 'com_google_protoc_java_resource_names_plugin' indicated that a canonical reproducible form can be obtained by modifying arguments sha256 = \"c3c0661b6c30fce5c63b1d5f473b1c6c4d59e19853ce3b9e8f5a447f953af906\"\nDEBUG: Call stack for the definition of repository 'com_google_protoc_java_resource_names_plugin' which is a http_archive (rule definition at /home/kbuilder/.cache/bazel/_bazel_kbuilder/a732f932c2cbeb7e37e1543f189a2a73/external/bazel_tools/tools/build_defs/repo/http.bzl:296:16):\n - <builtin>\n - /home/kbuilder/.cache/synthtool/googleapis/WORKSPACE:155:1\nINFO: SHA256 (https://github.com/googleapis/gapic-generator-go/archive/v0.13.2.tar.gz) = ab7a2ffd74e6a6dac6da38027d4acadb84d0075c055289e3335d86a46f9f3b22\nDEBUG: Rule 'com_googleapis_gapic_generator_go' indicated that a canonical reproducible form can be obtained by modifying arguments sha256 = \"ab7a2ffd74e6a6dac6da38027d4acadb84d0075c055289e3335d86a46f9f3b22\"\nDEBUG: Call stack for the definition of repository 'com_googleapis_gapic_generator_go' which is a http_archive (rule definition at /home/kbuilder/.cache/bazel/_bazel_kbuilder/a732f932c2cbeb7e37e1543f189a2a73/external/bazel_tools/tools/build_defs/repo/http.bzl:296:16):\n - <builtin>\n - /home/kbuilder/.cache/synthtool/googleapis/WORKSPACE:209:1\nAnalyzing: target //google/cloud/tasks/v2beta2:tasks-v2beta2-py (1 packages loaded, 0 targets configured)\nINFO: Call stack for the definition of repository 'go_sdk' which is a _go_download_sdk (rule definition at /home/kbuilder/.cache/bazel/_bazel_kbuilder/a732f932c2cbeb7e37e1543f189a2a73/external/io_bazel_rules_go/go/private/sdk.bzl:79:20):\n - <builtin>\n - /home/kbuilder/.cache/bazel/_bazel_kbuilder/a732f932c2cbeb7e37e1543f189a2a73/external/io_bazel_rules_go/go/private/sdk.bzl:92:5\n - /home/kbuilder/.cache/bazel/_bazel_kbuilder/a732f932c2cbeb7e37e1543f189a2a73/external/io_bazel_rules_go/go/private/sdk.bzl:260:13\n - /home/kbuilder/.cache/synthtool/googleapis/WORKSPACE:81:1\nERROR: While resolving toolchains for target @pypi_black//:black: invalid registered toolchain '@gapic_generator_python//:pyenv3_toolchain': no such package '@gapic_generator_python//': The repository '@gapic_generator_python' could not be resolved\nERROR: Analysis of target '//google/cloud/tasks/v2beta2:tasks-v2beta2-py' failed; build aborted: invalid registered toolchain '@gapic_generator_python//:pyenv3_toolchain': no such package '@gapic_generator_python//': The repository '@gapic_generator_python' could not be resolved\nINFO: Elapsed time: 4.019s\nINFO: 0 processes.\nFAILED: Build did NOT complete successfully (20 packages loaded, 14 targets configured)\nFAILED: Build did NOT complete successfully (20 packages loaded, 14 targets configured)\n\n2020-06-20 08:40:45,152 synthtool [DEBUG] > Wrote metadata to synth.metadata.\nDEBUG:synthtool:Wrote metadata to synth.metadata.\nTraceback (most recent call last):\n  File \"/home/kbuilder/.pyenv/versions/3.6.9/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/kbuilder/.pyenv/versions/3.6.9/lib/python3.6/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/tmpfs/src/github/synthtool/synthtool/__main__.py\", line 102, in <module>\n    main()\n  File \"/tmpfs/src/github/synthtool/env/lib/python3.6/site-packages/click/core.py\", line 829, in __call__\n    return self.main(*args, **kwargs)\n  File \"/tmpfs/src/github/synthtool/env/lib/python3.6/site-packages/click/core.py\", line 782, in main\n    rv = self.invoke(ctx)\n  File \"/tmpfs/src/github/synthtool/env/lib/python3.6/site-packages/click/core.py\", line 1066, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/tmpfs/src/github/synthtool/env/lib/python3.6/site-packages/click/core.py\", line 610, in invoke\n    return callback(*args, **kwargs)\n  File \"/tmpfs/src/github/synthtool/synthtool/__main__.py\", line 94, in main\n    spec.loader.exec_module(synth_module)  # type: ignore\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/home/kbuilder/.cache/synthtool/python-tasks/synth.py\", line 35, in <module>\n    include_protos=True,\n  File \"/tmpfs/src/github/synthtool/synthtool/gcp/gapic_bazel.py\", line 46, in py_library\n    return self._generate_code(service, version, \"python\", **kwargs)\n  File \"/tmpfs/src/github/synthtool/synthtool/gcp/gapic_bazel.py\", line 180, in _generate_code\n    shell.run(bazel_run_args)\n  File \"/tmpfs/src/github/synthtool/synthtool/shell.py\", line 39, in run\n    raise exc\n  File \"/tmpfs/src/github/synthtool/synthtool/shell.py\", line 33, in run\n    encoding=\"utf-8\",\n  File \"/home/kbuilder/.pyenv/versions/3.6.9/lib/python3.6/subprocess.py\", line 438, in run\n    output=stdout, stderr=stderr)\nsubprocess.CalledProcessError: Command '['bazel', '--max_idle_secs=60', 'build', '//google/cloud/tasks/v2beta2:tasks-v2beta2-py']' returned non-zero exit status 1.\n2020-06-20 08:40:45,201 autosynth [ERROR] > Synthesis failed\n2020-06-20 08:40:45,201 autosynth [DEBUG] > Running: git reset --hard HEAD\nHEAD is now at 01304e7 chore: Migrate python-tasks synth.py from artman to bazel (#21)\n2020-06-20 08:40:45,206 autosynth [DEBUG] > Running: git checkout autosynth-self\nSwitched to branch 'autosynth-self'\n2020-06-20 08:40:45,211 autosynth [ERROR] > Command '['/tmpfs/src/github/synthtool/env/bin/python3', '-m', 'synthtool', '--metadata', 'synth.metadata', 'synth.py', '--']' returned non-zero exit status 1.\n2020-06-20 08:40:45,493 autosynth [INFO] > PR already exists: https://github.com/googleapis/python-tasks/pull/24\n2020-06-20 08:40:45,493 autosynth [DEBUG] > Running: git clean -fdx\nRemoving __pycache__/\nRemoving google/__pycache__/\nTraceback (most recent call last):\n  File \"/home/kbuilder/.pyenv/versions/3.6.9/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/kbuilder/.pyenv/versions/3.6.9/lib/python3.6/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/tmpfs/src/github/synthtool/autosynth/synth.py\", line 649, in <module>\n    main()\n  File \"/tmpfs/src/github/synthtool/autosynth/synth.py\", line 506, in main\n    return _inner_main(temp_dir)\n  File \"/tmpfs/src/github/synthtool/autosynth/synth.py\", line 629, in _inner_main\n    commit_count = synthesize_loop(x, multiple_prs, change_pusher, synthesizer)\n  File \"/tmpfs/src/github/synthtool/autosynth/synth.py\", line 367, in synthesize_loop\n    synthesize_inner_loop(fork, synthesizer)\n  File \"/tmpfs/src/github/synthtool/autosynth/synth.py\", line 411, in synthesize_inner_loop\n    synthesizer, len(toolbox.versions) - 1\n  File \"/tmpfs/src/github/synthtool/autosynth/synth.py\", line 266, in synthesize_version_in_new_branch\n    synthesizer.synthesize(synth_log_path, self.environ)\n  File \"/tmpfs/src/github/synthtool/autosynth/synthesizer.py\", line 120, in synthesize\n    synth_proc.check_returncode()  # Raise an exception.\n  File \"/home/kbuilder/.pyenv/versions/3.6.9/lib/python3.6/subprocess.py\", line 389, in check_returncode\n    self.stderr)\nsubprocess.CalledProcessError: Command '['/tmpfs/src/github/synthtool/env/bin/python3', '-m', 'synthtool', '--metadata', 'synth.metadata', 'synth.py', '--']' returned non-zero exit status 1.\n\n```\n\nGoogle internal developers can see the full log [here](http://sponge2/results/invocations/e93a3b66-0b9d-4731-8049-5d33389af1dc/targets/github%2Fsynthtool;config=default/tests;query=python-tasks;failed=false).\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/googleapis/python-tasks/issues/20", "repository_url": "https://api.github.com/repos/googleapis/python-tasks", "labels_url": "https://api.github.com/repos/googleapis/python-tasks/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/googleapis/python-tasks/issues/20/comments", "events_url": "https://api.github.com/repos/googleapis/python-tasks/issues/20/events", "html_url": "https://github.com/googleapis/python-tasks/issues/20", "id": 600544949, "node_id": "MDU6SXNzdWU2MDA1NDQ5NDk=", "number": 20, "title": "Possible memory leak when creating tasks", "user": {"login": "jer-tx", "id": 2834149, "node_id": "MDQ6VXNlcjI4MzQxNDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2834149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jer-tx", "html_url": "https://github.com/jer-tx", "followers_url": "https://api.github.com/users/jer-tx/followers", "following_url": "https://api.github.com/users/jer-tx/following{/other_user}", "gists_url": "https://api.github.com/users/jer-tx/gists{/gist_id}", "starred_url": "https://api.github.com/users/jer-tx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jer-tx/subscriptions", "organizations_url": "https://api.github.com/users/jer-tx/orgs", "repos_url": "https://api.github.com/users/jer-tx/repos", "events_url": "https://api.github.com/users/jer-tx/events{/privacy}", "received_events_url": "https://api.github.com/users/jer-tx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1814838005, "node_id": "MDU6TGFiZWwxODE0ODM4MDA1", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/:rotating_light:", "name": ":rotating_light:", "color": "FFFFFF", "default": false, "description": "This issue needs some love."}, {"id": 1814836562, "node_id": "MDU6TGFiZWwxODE0ODM2NTYy", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/api:%20cloudtasks", "name": "api: cloudtasks", "color": "b316fa", "default": false, "description": "Issues related to the Cloud Tasks API."}, {"id": 1814838028, "node_id": "MDU6TGFiZWwxODE0ODM4MDI4", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/triage%20me", "name": "triage me", "color": "FF69B4", "default": false, "description": "I really want to be triaged."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-15T19:45:32Z", "updated_at": "2020-04-30T23:56:56Z", "closed_at": "2020-04-30T23:56:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "We're trying to migrate from Appengine Standard to Appengine Flexible, and we're also changing frameworks from Webapp2 to Pyramid, as webapp2 doesn't support python 3 (and is quite old)\r\n\r\nWe have an endpoint that receives 1 request per second, roughly, and that endpoint kicks off a task. It seems that the process of creating a task isn't releasing memory. I'll try to give as much info as I can.\r\n\r\n#### Environment details\r\n\r\n  - OS type and version: Appengine Flexible custom runtime using gcr.io/google-appengine/python\r\n  - Python version: 3.7\r\n  - `google-cloud-tasks` version: Unsure how to check on appengine but probably 1.5\r\n\r\n#### Steps to reproduce\r\n\r\n  1. Create a task\r\n\r\n#### Code example\r\n\r\nTask class to help facilitate creating tasks in various handlers. Bulk of this is from [Cloud Tasks documentation](https://cloud.google.com/tasks/docs/creating-appengine-tasks):\r\n```python\r\nimport json\r\nimport logging\r\n\r\nfrom google.cloud import tasks_v2\r\n\r\n\r\nclass TasksQueue(object):\r\n    def __init__(self):\r\n        self.client = tasks_v2.CloudTasksClient()\r\n\r\n    def add(self, url, payload=None, queue_name='default'):\r\n        if type(payload) == dict:\r\n            payload = json.dumps(payload)\r\n\r\n        # Construct the fully qualified queue name.\r\n        parent = self.client.queue_path('my-project', 'us-central1', queue_name)\r\n\r\n        # Construct the request body.\r\n        task = {\r\n            'app_engine_http_request': {  # Specify the type of request.\r\n                'http_method': 'POST',\r\n                'relative_uri': url\r\n            }\r\n        }\r\n        if payload is not None:\r\n            # The API expects a payload of type bytes.\r\n            converted_payload = payload.encode()\r\n\r\n            # Add the payload to the request.\r\n            task['app_engine_http_request']['body'] = converted_payload\r\n        logging.info(task)\r\n        # Use the client to build and send the task.\r\n        response = self.client.create_task(parent, task)\r\n\r\n        logging.info('Created task {}'.format(response.name))\r\n        return response\r\n\r\n```\r\n\r\nAnd our usage of the above class:\r\n\r\n```python\r\ntaskqueue = TasksQueue()\r\ntaskqueue.add(url='/other_endpoint', queue_name='my-queue', payload={'data': 1})\r\n```\r\n\r\nThe full handler itself has a connection to a redis MemoryStore but I ran a bunch of requests through another handler that solely gets/sets redis entries and saw no increase in memory usage on the instances, so that leads me to believe theres an issue with cloud tasks. \r\n\r\nFurther, I used `tracemalloc` to check memory usage before and after each request. These are unfortunately backwards (bottom row is the biggest difference) because of the way logs are displayed in Logging under flexible when new lines are present. As you can see though, `pyasn1/type/base.py` and pyasn1/type/integer.py` have objects that balloon in size after the request and never seem to go down.\r\n\r\nBefore: \r\n```A 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/google/api_core/grpc_helpers.py:57: size=536 B (-536 B), count=1 (-1), average=536 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/grpc/_channel.py:770: size=960 B (+560 B), count=12 (+7), average=80 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/google/api_core/retry.py:286: size=576 B (-576 B), count=1 (-1), average=576 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/pyramid/router.py:139: size=576 B (+576 B), count=1 (+1), average=576 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/grpc/_channel.py:825: size=584 B (-584 B), count=1 (-1), average=584 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/urllib3/util/retry.py:196: size=284 KiB (+588 B), count=1980 (+4), average=147 B\r\nA 2020-04-14T21:43:44Z /opt/python3.7/lib/python3.7/threading.py:235: size=1048 B (+592 B), count=5 (+2), average=210 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/google/protobuf/json_format.py:481: size=1200 B (-600 B), count=2 (-1), average=600 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/grpc/_channel.py:1353: size=1968 B (+712 B), count=17 (+5), average=116 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/grpc/_channel.py:99: size=744 B (+744 B), count=2 (+2), average=372 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/gunicorn/http/message.py:110: size=817 B (-766 B), count=12 (-11), average=68 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/gunicorn/http/wsgi.py:136: size=827 B (-827 B), count=12 (-12), average=69 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/pyasn1/compat/integer.py:99: size=461 KiB (+956 B), count=2470 (+5), average=191 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/grpc/_channel.py:1149: size=1728 B (+1008 B), count=12 (+7), average=144 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/pyasn1/type/base.py:373: size=418 KiB (+1008 B), count=2558 (+6), average=167 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/gunicorn/http/wsgi.py:139: size=1112 B (-1112 B), count=1 (-1), average=1112 B\r\nA 2020-04-14T21:43:44Z /env/lib/python3.7/site-packages/pyasn1/codec/ber/decoder.py:609: size=12.3 KiB (-1472 B), count=37 (-2), average=341 B\r\nA 2020-04-14T21:43:44Z /home/vmagent/app/externalping/AppengineLogHandler.py:106: size=58.8 KiB (+1504 B), count=742 (+10), average=81 B\r\nA 2020-04-14T21:43:44Z /opt/python3.7/lib/python3.7/tracemalloc.py:185: size=29.2 KiB (-60.6 KiB), count=466 (-970), average=64 B\r\nA 2020-04-14T21:43:44Z /opt/python3.7/lib/python3.7/tracemalloc.py:113: size=1152 B (-97.0 KiB), count=12 (-1035), average=96 B\r\nA 2020-04-14T21:43:44Z [ Top 20 differences ]\r\n```\r\n\r\nAfter roughly 1 hour:\r\n\r\n```2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/google/protobuf/json_format.py:582: size=472 B (-472 B), count=1 (-1), average=472 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/pyasn1/type/base.py:54: size=1870 KiB (+480 B), count=21036 (+6), average=91 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/grpc/_common.py:70: size=936 B (+513 B), count=12 (+7), average=78 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/grpc/_channel.py:770: size=960 B (+560 B), count=12 (+7), average=80 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/pyramid/router.py:139: size=576 B (+576 B), count=1 (+1), average=576 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/urllib3/util/retry.py:196: size=1839 KiB (+588 B), count=12808 (+4), average=147 BA \r\n2020-04-14T22:39:23Z /opt/python3.7/lib/python3.7/threading.py:235: size=1048 B (+592 B), count=5 (+2), average=210 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/google/protobuf/json_format.py:481: size=1200 B (-600 B), count=2 (-1), average=600 BA \r\n2020-04-14T22:39:23Z /home/vmagent/app/externalping/AppengineLogHandler.py:106: size=451 KiB (+672 B), count=5760 (+4), average=80 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/grpc/_channel.py:1353: size=1968 B (+712 B), count=17 (+5), average=116 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/grpc/_channel.py:99: size=744 B (+744 B), count=2 (+2), average=372 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/gunicorn/http/message.py:110: size=818 B (-766 B), count=12 (-11), average=68 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/gunicorn/http/wsgi.py:136: size=827 B (-827 B), count=12 (-12), average=69 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/pyasn1/compat/integer.py:99: size=2988 KiB (+956 B), count=16005 (+5), average=191 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/grpc/_channel.py:1149: size=1728 B (+1008 B), count=12 (+7), average=144 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/gunicorn/http/wsgi.py:139: size=1112 B (-1112 B), count=1 (-1), average=1112 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/functools.py:60: size=675 KiB (+1168 B), count=6627 (+7), average=104 BA \r\n2020-04-14T22:39:23Z /env/lib/python3.7/site-packages/pyasn1/type/base.py:373: size=3045 KiB (+1176 B), count=18740 (+7), average=166 BA \r\n2020-04-14T22:39:23Z /opt/python3.7/lib/python3.7/tracemalloc.py:185: size=67.7 KiB (-59.5 KiB), count=1083 (-952), average=64 BA \r\n2020-04-14T22:39:23Z /opt/python3.7/lib/python3.7/tracemalloc.py:113: size=1152 B (-98.7 KiB), count=12 (-1053), average=96 BA \r\n2020-04-14T22:39:23Z [ Top 20 differences ] \r\n```\r\n\r\n\r\nHere is a screenshot of the memory usage on the instance \r\n\r\n![](https://i.imgur.com/BlHt80D.png)\r\n\r\nat 11am I changed it to an instance with more memory. This is where its sitting right now \r\n\r\n![](https://i.imgur.com/1mopNKV.png)\r\n\r\nI've tried `gc.collect()` after the handler is done, `del taskqueue` after the task is created, and `taskqueue.client.transport.channel.close()`, nothing works to keep memory usage in check. I'm not sure what else I can do here or what other logs I can provide to help nail this down. Any help would be greatly appreciated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/googleapis/python-tasks/issues/7", "repository_url": "https://api.github.com/repos/googleapis/python-tasks", "labels_url": "https://api.github.com/repos/googleapis/python-tasks/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/googleapis/python-tasks/issues/7/comments", "events_url": "https://api.github.com/repos/googleapis/python-tasks/issues/7/events", "html_url": "https://github.com/googleapis/python-tasks/issues/7", "id": 568303118, "node_id": "MDU6SXNzdWU1NjgzMDMxMTg=", "number": 7, "title": "Synthesis failed for python-tasks", "user": {"login": "yoshi-automation", "id": 44816363, "node_id": "MDQ6VXNlcjQ0ODE2MzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/44816363?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yoshi-automation", "html_url": "https://github.com/yoshi-automation", "followers_url": "https://api.github.com/users/yoshi-automation/followers", "following_url": "https://api.github.com/users/yoshi-automation/following{/other_user}", "gists_url": "https://api.github.com/users/yoshi-automation/gists{/gist_id}", "starred_url": "https://api.github.com/users/yoshi-automation/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yoshi-automation/subscriptions", "organizations_url": "https://api.github.com/users/yoshi-automation/orgs", "repos_url": "https://api.github.com/users/yoshi-automation/repos", "events_url": "https://api.github.com/users/yoshi-automation/events{/privacy}", "received_events_url": "https://api.github.com/users/yoshi-automation/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1814838005, "node_id": "MDU6TGFiZWwxODE0ODM4MDA1", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/:rotating_light:", "name": ":rotating_light:", "color": "FFFFFF", "default": false, "description": "This issue needs some love."}, {"id": 1814836562, "node_id": "MDU6TGFiZWwxODE0ODM2NTYy", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/api:%20cloudtasks", "name": "api: cloudtasks", "color": "b316fa", "default": false, "description": "Issues related to the Cloud Tasks API."}, {"id": 1859984455, "node_id": "MDU6TGFiZWwxODU5OTg0NDU1", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/autosynth%20failure", "name": "autosynth failure", "color": "ededed", "default": false, "description": null}, {"id": 1814837822, "node_id": "MDU6TGFiZWwxODE0ODM3ODIy", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/priority:%20p1", "name": "priority: p1", "color": "ffa03e", "default": false, "description": "Medium priority. Will be fixed prior to next release."}, {"id": 1814837708, "node_id": "MDU6TGFiZWwxODE0ODM3NzA4", "url": "https://api.github.com/repos/googleapis/python-tasks/labels/type:%20bug", "name": "type: bug", "color": "db4437", "default": false, "description": "Error or flaw in code with unintended results or allowing sub-optimal usage patterns."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-20T13:34:35Z", "updated_at": "2020-04-06T17:09:56Z", "closed_at": "2020-02-20T23:25:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello! Autosynth couldn't regenerate python-tasks. :broken_heart:\n\nHere's the output from running `synth.py`:\n\n```\nCloning into 'working_repo'...\nSwitched to branch 'autosynth'\nRunning synthtool\n['/tmpfs/src/git/autosynth/env/bin/python3', '-m', 'synthtool', 'synth.py', '--']\nsynthtool > Executing /tmpfs/src/git/autosynth/working_repo/synth.py.\nOn branch autosynth\nnothing to commit, working tree clean\nHEAD detached at FETCH_HEAD\nnothing to commit, working tree clean\nsynthtool > Ensuring dependencies.\nsynthtool > Pulling artman image.\nlatest: Pulling from googleapis/artman\nDigest: sha256:6aec9c34db0e4be221cdaf6faba27bdc07cfea846808b3d3b964dfce3a9a0f9b\nStatus: Image is up to date for googleapis/artman:latest\nsynthtool > Cloning googleapis.\nsynthtool > Running generator for google/cloud/tasks/artman_cloudtasks_v2beta2.yaml.\nsynthtool > Generated code into /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta2.\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2beta2/cloudtasks.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta2/google/cloud/tasks_v2beta2/proto/cloudtasks.proto\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2beta2/queue.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta2/google/cloud/tasks_v2beta2/proto/queue.proto\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2beta2/target.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta2/google/cloud/tasks_v2beta2/proto/target.proto\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2beta2/task.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta2/google/cloud/tasks_v2beta2/proto/task.proto\nsynthtool > Placed proto files into /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta2/google/cloud/tasks_v2beta2/proto.\nsynthtool > Replaced '(Google IAM .*?_) ' in google/cloud/tasks_v2beta2/gapic/cloud_tasks_client.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2beta2/proto/queue_pb2.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2beta2/proto/task_pb2.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2beta2/proto/target_pb2.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2beta2/proto/cloudtasks_pb2.py.\nsynthtool > Running generator for google/cloud/tasks/artman_cloudtasks_v2beta3.yaml.\nsynthtool > Generated code into /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta3.\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2beta3/cloudtasks.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta3/google/cloud/tasks_v2beta3/proto/cloudtasks.proto\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2beta3/queue.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta3/google/cloud/tasks_v2beta3/proto/queue.proto\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2beta3/target.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta3/google/cloud/tasks_v2beta3/proto/target.proto\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2beta3/task.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta3/google/cloud/tasks_v2beta3/proto/task.proto\nsynthtool > Placed proto files into /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2beta3/google/cloud/tasks_v2beta3/proto.\nsynthtool > Replaced '(Google IAM .*?_) ' in google/cloud/tasks_v2beta3/gapic/cloud_tasks_client.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2beta3/proto/queue_pb2.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2beta3/proto/task_pb2.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2beta3/proto/target_pb2.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2beta3/proto/cloudtasks_pb2.py.\nsynthtool > Running generator for google/cloud/tasks/artman_cloudtasks_v2.yaml.\nsynthtool > Generated code into /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2.\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2/cloudtasks.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2/google/cloud/tasks_v2/proto/cloudtasks.proto\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2/queue.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2/google/cloud/tasks_v2/proto/queue.proto\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2/target.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2/google/cloud/tasks_v2/proto/target.proto\nsynthtool > Copy: /home/kbuilder/.cache/synthtool/googleapis/google/cloud/tasks/v2/task.proto to /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2/google/cloud/tasks_v2/proto/task.proto\nsynthtool > Placed proto files into /home/kbuilder/.cache/synthtool/googleapis/artman-genfiles/python/tasks-v2/google/cloud/tasks_v2/proto.\nsynthtool > Replaced '(Google IAM .*?_) ' in google/cloud/tasks_v2/gapic/cloud_tasks_client.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2/proto/queue_pb2.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2/proto/task_pb2.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2/proto/target_pb2.py.\nsynthtool > Replaced '>`__' in google/cloud/tasks_v2/proto/cloudtasks_pb2.py.\nsynthtool > Replaced '(in queue.yaml/xml) <\\n\\\\s+' in google/cloud/tasks_v2beta2/proto/queue_pb2.py.\nsynthtool > Replaced '#retry_parameters>\\n          `__\\\\.' in google/cloud/tasks_v2/proto/queue_pb2.py.\nsynthtool > Replaced '>>> # TODO: Initialize `queue`:' in google/cloud/tasks_v2beta3/gapic/cloud_tasks_client.py.\nsynthtool > Replaced '^(\\\\s+)>>> queue = {}\\n' in google/cloud/tasks_v2beta3/gapic/cloud_tasks_client.py.\nsynthtool > Replaced 'types\\\\.View' in google/cloud/tasks_v2beta2/gapic/cloud_tasks_client.py.\nsynthtool > Replaced 'types\\\\.View' in google/cloud/tasks_v2/gapic/cloud_tasks_client.py.\nsynthtool > Replaced 'types\\\\.View' in google/cloud/tasks_v2beta3/gapic/cloud_tasks_client.py.\nsynthtool > Replaced '            retry \\\\(Optional\\\\[google\\\\.api_core\\\\.retry\\\\.Retry\\\\]\\\\):  A retry object used\\n                to retry requests\\\\. If ``None`` is specified, requests will\\n                be retried using a default configuration\\\\.\\n            timeout \\\\(Optional\\\\[float\\\\]\\\\): The amount of time, in seconds, to wait\\n                for the request to complete\\\\. Note that if ``retry`` is\\n                specified, the timeout applies to each individual attempt\\\\.\\n            metadata \\\\(Optional\\\\[Sequence\\\\[Tuple\\\\[str, str\\\\]\\\\]\\\\]\\\\): Additional metadata\\n                that is provided to the method\\\\.\\n\\n' in google/cloud/tasks_v2beta2/gapic/cloud_tasks_client.py.\nsynthtool > Replaced '            retry \\\\(Optional\\\\[google\\\\.api_core\\\\.retry\\\\.Retry\\\\]\\\\):  A retry object used\\n                to retry requests\\\\. If ``None`` is specified, requests will\\n                be retried using a default configuration\\\\.\\n            timeout \\\\(Optional\\\\[float\\\\]\\\\): The amount of time, in seconds, to wait\\n                for the request to complete\\\\. Note that if ``retry`` is\\n                specified, the timeout applies to each individual attempt\\\\.\\n            metadata \\\\(Optional\\\\[Sequence\\\\[Tuple\\\\[str, str\\\\]\\\\]\\\\]\\\\): Additional metadata\\n                that is provided to the method\\\\.\\n\\n' in google/cloud/tasks_v2/gapic/cloud_tasks_client.py.\nsynthtool > Replaced '            retry \\\\(Optional\\\\[google\\\\.api_core\\\\.retry\\\\.Retry\\\\]\\\\):  A retry object used\\n                to retry requests\\\\. If ``None`` is specified, requests will\\n                be retried using a default configuration\\\\.\\n            timeout \\\\(Optional\\\\[float\\\\]\\\\): The amount of time, in seconds, to wait\\n                for the request to complete\\\\. Note that if ``retry`` is\\n                specified, the timeout applies to each individual attempt\\\\.\\n            metadata \\\\(Optional\\\\[Sequence\\\\[Tuple\\\\[str, str\\\\]\\\\]\\\\]\\\\): Additional metadata\\n                that is provided to the method\\\\.\\n\\n' in google/cloud/tasks_v2beta3/gapic/cloud_tasks_client.py.\n.coveragerc\n.flake8\n.github/CONTRIBUTING.md\n.github/ISSUE_TEMPLATE/bug_report.md\n.github/ISSUE_TEMPLATE/feature_request.md\n.github/ISSUE_TEMPLATE/support_request.md\n.github/PULL_REQUEST_TEMPLATE.md\n.github/release-please.yml\n.gitignore\n.kokoro/build.sh\n.kokoro/continuous/common.cfg\n.kokoro/continuous/continuous.cfg\n.kokoro/docs/common.cfg\n.kokoro/docs/docs.cfg\n.kokoro/presubmit/common.cfg\n.kokoro/presubmit/presubmit.cfg\n.kokoro/publish-docs.sh\n.kokoro/release.sh\n.kokoro/release/common.cfg\n.kokoro/release/release.cfg\n.kokoro/trampoline.sh\nCODE_OF_CONDUCT.md\nCONTRIBUTING.rst\nLICENSE\nMANIFEST.in\ndocs/_static/custom.css\ndocs/_templates/layout.html\ndocs/conf.py.j2\nnoxfile.py.j2\nrenovate.json\nsetup.cfg\nRunning session blacken\nCreating virtual environment (virtualenv) using python3.6 in .nox/blacken\npip install black==19.3b0\nError: pip is not installed into the virtualenv, it is located at /tmpfs/src/git/autosynth/env/bin/pip. Pass external=True into run() to explicitly allow this.\nSession blacken failed.\nsynthtool > Failed executing nox -s blacken:\n\nNone\nsynthtool > Wrote metadata to synth.metadata.\nTraceback (most recent call last):\n  File \"/home/kbuilder/.pyenv/versions/3.6.1/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/kbuilder/.pyenv/versions/3.6.1/lib/python3.6/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/tmpfs/src/git/autosynth/env/lib/python3.6/site-packages/synthtool/__main__.py\", line 102, in <module>\n    main()\n  File \"/tmpfs/src/git/autosynth/env/lib/python3.6/site-packages/click/core.py\", line 764, in __call__\n    return self.main(*args, **kwargs)\n  File \"/tmpfs/src/git/autosynth/env/lib/python3.6/site-packages/click/core.py\", line 717, in main\n    rv = self.invoke(ctx)\n  File \"/tmpfs/src/git/autosynth/env/lib/python3.6/site-packages/click/core.py\", line 956, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/tmpfs/src/git/autosynth/env/lib/python3.6/site-packages/click/core.py\", line 555, in invoke\n    return callback(*args, **kwargs)\n  File \"/tmpfs/src/git/autosynth/env/lib/python3.6/site-packages/synthtool/__main__.py\", line 94, in main\n    spec.loader.exec_module(synth_module)  # type: ignore\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 205, in _call_with_frames_removed\n  File \"/tmpfs/src/git/autosynth/working_repo/synth.py\", line 121, in <module>\n    s.shell.run([\"nox\", \"-s\", \"blacken\"], hide_output=False)\n  File \"/tmpfs/src/git/autosynth/env/lib/python3.6/site-packages/synthtool/shell.py\", line 39, in run\n    raise exc\n  File \"/tmpfs/src/git/autosynth/env/lib/python3.6/site-packages/synthtool/shell.py\", line 33, in run\n    encoding=\"utf-8\",\n  File \"/home/kbuilder/.pyenv/versions/3.6.1/lib/python3.6/subprocess.py\", line 418, in run\n    output=stdout, stderr=stderr)\nsubprocess.CalledProcessError: Command '['nox', '-s', 'blacken']' returned non-zero exit status 1.\n\nSynthesis failed\n\n```\n\nGoogle internal developers can see the full log [here](https://sponge/bc296324-7867-4eae-a113-8090e6bcc834).\n", "performed_via_github_app": null, "score": 1.0}]}