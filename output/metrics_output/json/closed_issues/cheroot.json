{"total_count": 105, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/cherrypy/cheroot/issues/305", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/305/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/305/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/305/events", "html_url": "https://github.com/cherrypy/cheroot/issues/305", "id": 664625641, "node_id": "MDU6SXNzdWU2NjQ2MjU2NDE=", "number": 305, "title": "[cheroot==8.1.0 regression] Significant performance drop", "user": {"login": "mar10", "id": 41663, "node_id": "MDQ6VXNlcjQxNjYz", "avatar_url": "https://avatars3.githubusercontent.com/u/41663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mar10", "html_url": "https://github.com/mar10", "followers_url": "https://api.github.com/users/mar10/followers", "following_url": "https://api.github.com/users/mar10/following{/other_user}", "gists_url": "https://api.github.com/users/mar10/gists{/gist_id}", "starred_url": "https://api.github.com/users/mar10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mar10/subscriptions", "organizations_url": "https://api.github.com/users/mar10/orgs", "repos_url": "https://api.github.com/users/mar10/repos", "events_url": "https://api.github.com/users/mar10/events{/privacy}", "received_events_url": "https://api.github.com/users/mar10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 893194325, "node_id": "MDU6TGFiZWw4OTMxOTQzMjU=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/regression", "name": "regression", "color": "bf3b5a", "default": false, "description": "Something that worked earlier got broken in new release"}, {"id": 965607071, "node_id": "MDU6TGFiZWw5NjU2MDcwNzE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20missing", "name": "reproducer: missing", "color": "e23c36", "default": false, "description": "This PR or issue lacks code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-07-23T16:50:23Z", "updated_at": "2020-08-13T06:11:04Z", "closed_at": "2020-08-01T05:33:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n\r\nThis more a note than a bug report:\r\nI run some benchmark against my project ([WsgiDAV](https://github.com/mar10/wsgidav)] and found that there is a drastical drop in performance between cheroot versions 8.0.0 and 8.1.0.\r\n\r\nThe test uses a homegrown tool ([stressor](https://github.com/mar10/stressor)) that runs a test script ([see here](https://github.com/mar10/wsgidav/blob/master/tests/stressor/test_rw.yaml)):\r\n\r\n- 10 users in parallel\r\n  - GET a common file \r\n  - PUT another file (one per user)\r\n  - GET that file\r\n- Running for 30 seconds\r\n\r\nBenchmarks show 11k activities per 30 seconds until v8.0.\r\nStarting with cheroot 8.1 this drops to 2.9k activities per 30 sec.\r\n\r\nI also tried with gevent as backend, and it delivered 12.4k activities.\r\n\r\nPlease note that these results may be due to poor implementation on my tools, but all I changed was WSGI server behind WsgiDAV, so I thought I let you know.\r\n \r\n\r\n\ud83d\udca1 **To Reproduce**\r\n\r\nSee https://github.com/mar10/wsgidav/blob/master/tests/stressor/results.md\r\n\r\nIf you are interested, I can provide more details.\r\n\r\nCheers\r\nMartin", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/304", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/304/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/304/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/304/events", "html_url": "https://github.com/cherrypy/cheroot/issues/304", "id": 664536717, "node_id": "MDU6SXNzdWU2NjQ1MzY3MTc=", "number": 304, "title": "[TODO] Refactor `cheroot.connections` to use `selectors.get_map()`", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-23T14:43:07Z", "updated_at": "2020-08-12T21:43:59Z", "closed_at": "2020-08-12T21:43:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [ ] \ud83d\udc1e bug report\r\n- [X] \ud83d\udc23 refactoring request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Is your feature request related to a problem? Please describe.**\r\n<!--\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n-->\r\n_@liamstask suggested in https://github.com/cherrypy/cheroot/pull/301/files#r458248844:_\r\n> not strictly necessary, but it would be preferable to avoid re-registering and unregistering all sockets each time this `select()`s - each `register()` and `unregister()` will typically incur a syscall per socket, which reduces performance unnecessarily, particularly with large numbers of sockets.\r\n>\r\n> the selector already maintains a map of which sockets are registered - see [`get_map()`](https://docs.python.org/3/library/selectors.html#selectors.BaseSelector.get_map) for instance, and the [SelectorKey](https://docs.python.org/3/library/selectors.html#selectors.SelectorKey) allows storing application-specific state in the `data` field if desired.\r\n>\r\n> this may require a bit more reorganization than the current patch, so could be deferred to a separate PR (if the performance impact is acceptable), but should be considered in a follow up.\r\n\r\n_@tommilligan said in https://github.com/cherrypy/cheroot/pull/301#issuecomment-662916411:_\r\n> I like the suggestion of refactoring how we manage connections a bit so that the use of `selectors` is more ergonomic - I have started looking at it. I need to think about it a bit more, as we also care about the **order** of the connections, and `selectors.get_map()` will just return an unordered mapping I think. Will keep thinking about it over the weekend.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/302", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/302/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/302/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/302/events", "html_url": "https://github.com/cherrypy/cheroot/issues/302", "id": 660115372, "node_id": "MDU6SXNzdWU2NjAxMTUzNzI=", "number": 302, "title": "A TLS-related traceback shows up during CherryPy startup on Windows 10", "user": {"login": "joaompinto", "id": 1143125, "node_id": "MDQ6VXNlcjExNDMxMjU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1143125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joaompinto", "html_url": "https://github.com/joaompinto", "followers_url": "https://api.github.com/users/joaompinto/followers", "following_url": "https://api.github.com/users/joaompinto/following{/other_user}", "gists_url": "https://api.github.com/users/joaompinto/gists{/gist_id}", "starred_url": "https://api.github.com/users/joaompinto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joaompinto/subscriptions", "organizations_url": "https://api.github.com/users/joaompinto/orgs", "repos_url": "https://api.github.com/users/joaompinto/repos", "events_url": "https://api.github.com/users/joaompinto/events{/privacy}", "received_events_url": "https://api.github.com/users/joaompinto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610776818, "node_id": "MDU6TGFiZWwxNjEwNzc2ODE4", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Windows", "name": "Windows", "color": "07b26b", "default": false, "description": ""}, {"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 893194325, "node_id": "MDU6TGFiZWw4OTMxOTQzMjU=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/regression", "name": "regression", "color": "bf3b5a", "default": false, "description": "Something that worked earlier got broken in new release"}, {"id": 965606811, "node_id": "MDU6TGFiZWw5NjU2MDY4MTE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20present", "name": "reproducer: present", "color": "c2e0c6", "default": false, "description": "This PR or issue contains code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 27, "created_at": "2020-07-18T12:15:29Z", "updated_at": "2020-07-26T19:08:52Z", "closed_at": "2020-07-26T19:06:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n\r\nWhen attempting to run cherrypy with SSL I get the error:\r\n```python-traceback\r\nConnectionAbortedError: [WinError 10053]\r\n```\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nNeed an HTTPS listener\r\n\r\n\ud83d\udca1 **To Reproduce**\r\nRun the folllowing script:\r\n```python\r\nimport cherrypy\r\n\r\nclass RootServer:\r\n    @cherrypy.expose\r\n    def index(self, **keywords):\r\n        return \"it works!\"\r\n\r\nif __name__ == '__main__':\r\n    server_config={\r\n        'server.socket_host': '127.0.0.1',\r\n        'server.socket_port': 8443,\r\n        'server.ssl_certificate':'cert.pem',\r\n        'server.ssl_private_key':'privkey.pem'\r\n    }\r\n\r\n    cherrypy.config.update(server_config)\r\n    cherrypy.quickstart(RootServer())\r\n```\r\n\r\n\r\n\ud83d\udccb **Details**\r\n```python-traceback\r\n18/Jul/2020:14:01:24] ENGINE Started monitor thread 'Autoreloader'.\r\nException in thread Thread-2:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\lameg\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\threading.py\", line 932, in _bootstrap_inner\r\n    self.run()\r\n  File \"C:\\Users\\lameg\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"C:\\Users\\lameg\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\site-packages\\cheroot\\ssl\\builtin.py\", line 72, in <lambda>\r\n    target=lambda: context.wrap_socket(\r\n  File \"C:\\Users\\lameg\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\ssl.py\", line 500, in wrap_socket\r\n    return self.sslsocket_class._create(\r\n  File \"C:\\Users\\lameg\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\ssl.py\", line 1040, in _create\r\n    self.do_handshake()\r\n  File \"C:\\Users\\lameg\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\ssl.py\", line 1309, in do_handshake\r\n    self._sslobj.do_handshake()\r\nConnectionAbortedError: [WinError 10053] An established connection was aborted by the software in your host machine\r\n[18/Jul/2020:14:01:24] ENGINE Serving on https://127.0.0.1:8443\r\n```\r\n\r\n\r\n\ud83d\udccb **Environment**\r\n- CherryPy version: 18.6.0\r\n- Python version: 3.8.3rc1\r\n- OS: Windows 10\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/297", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/297/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/297/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/297/events", "html_url": "https://github.com/cherrypy/cheroot/issues/297", "id": 642556040, "node_id": "MDU6SXNzdWU2NDI1NTYwNDA=", "number": 297, "title": "Cheroot 8.2.1 & 8.3.0 [abstract] tests fail in Python 3.8", "user": {"login": "unode", "id": 122319, "node_id": "MDQ6VXNlcjEyMjMxOQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/122319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unode", "html_url": "https://github.com/unode", "followers_url": "https://api.github.com/users/unode/followers", "following_url": "https://api.github.com/users/unode/following{/other_user}", "gists_url": "https://api.github.com/users/unode/gists{/gist_id}", "starred_url": "https://api.github.com/users/unode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unode/subscriptions", "organizations_url": "https://api.github.com/users/unode/orgs", "repos_url": "https://api.github.com/users/unode/repos", "events_url": "https://api.github.com/users/unode/events{/privacy}", "received_events_url": "https://api.github.com/users/unode/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-21T12:40:23Z", "updated_at": "2020-07-13T15:16:31Z", "closed_at": "2020-07-13T15:16:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\nSee original issue report on [Nixpkgs repository](https://github.com/NixOS/nixpkgs/issues/91220)\r\nIn nixpkgs tests must pass for a build to be successful. Currently two tests fail on Python 3.8.\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\nThis seems to be a Python 3.8 issue. All tests pass in Python 3.7.\r\n\r\n\ud83d\udca1 **To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `git clone git@github.com:NixOS/nixpkgs-channels`\r\n2. Install [nix or NixOS](https://nixos.org/download.html)\r\n3. `nix-build -A python38Packages.cheroot`\r\n\r\n\ud83d\udca1 **Expected behavior**\r\nAll tests should pass\r\n\r\n\ud83d\udccb **Details**\r\nSee original issue report on [Nixpkgs repository](https://github.com/NixOS/nixpkgs/issues/91220)\r\n\r\n\ud83d\udccb **Environment**\r\nSee original issue report on [Nixpkgs repository](https://github.com/NixOS/nixpkgs/issues/91220)\r\n\r\n- Cheroot version: 8.2.1 but also reproducible with 8.3.0\r\n- CherryPy version: X.X.X (if applicable)\r\n- Python version: 3.8.3\r\n- OS: NixOS\r\n- Browser: not applicable", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/290", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/290/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/290/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/290/events", "html_url": "https://github.com/cherrypy/cheroot/issues/290", "id": 631403882, "node_id": "MDU6SXNzdWU2MzE0MDM4ODI=", "number": 290, "title": "with \"-X dev\": ResourceWarning: unclosed <ssl.SSLSocket fd=4 ...", "user": {"login": "sanderjo", "id": 1273502, "node_id": "MDQ6VXNlcjEyNzM1MDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1273502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanderjo", "html_url": "https://github.com/sanderjo", "followers_url": "https://api.github.com/users/sanderjo/followers", "following_url": "https://api.github.com/users/sanderjo/following{/other_user}", "gists_url": "https://api.github.com/users/sanderjo/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanderjo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanderjo/subscriptions", "organizations_url": "https://api.github.com/users/sanderjo/orgs", "repos_url": "https://api.github.com/users/sanderjo/repos", "events_url": "https://api.github.com/users/sanderjo/events{/privacy}", "received_events_url": "https://api.github.com/users/sanderjo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 965606811, "node_id": "MDU6TGFiZWw5NjU2MDY4MTE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20present", "name": "reproducer: present", "color": "c2e0c6", "default": false, "description": "This PR or issue contains code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2020-06-05T08:15:39Z", "updated_at": "2020-06-11T10:07:22Z", "closed_at": "2020-06-11T10:07:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\nWith `python3 -X dev -X tracemalloc=5` on cheroot code with SSL, python gives a ResourceWarning\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nA python ResourceWarning is an good indication code can be improved: it's not closing a resource.\r\nIt generates warnings in other code (SABnzbd) this is using cherrypy / cheroot (when running that code with `-X dev`), which makes cleaning up own code more difficult.\r\n\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n\r\n```\r\n$ python3 -X dev -X tracemalloc=5 cheroot_only.py \r\n/usr/lib/python3.8/threading.py:870: ResourceWarning: unclosed <ssl.SSLSocket fd=4, family=AddressFamily.AF_UNIX, type=SocketKind.SOCK_STREAM, proto=0>\r\n  self._target(*self._args, **self._kwargs)\r\nObject allocated at (most recent call last):\r\n  File \"/usr/lib/python3.8/threading.py\", lineno 932\r\n    self.run()\r\n  File \"/usr/lib/python3.8/threading.py\", lineno 870\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/sander/.local/lib/python3.8/site-packages/cheroot/ssl/builtin.py\", lineno 68\r\n    target=lambda: context.wrap_socket(\r\n  File \"/usr/lib/python3.8/ssl.py\", lineno 500\r\n    return self.sslsocket_class._create(\r\n  File \"/usr/lib/python3.8/ssl.py\", lineno 1003\r\n    self = cls.__new__(cls, **kwargs)\r\n/home/sander/.local/lib/python3.8/site-packages/cheroot/ssl/builtin.py:75: ResourceWarning: unclosed <ssl.SSLSocket fd=3, family=AddressFamily.AF_UNIX, type=SocketKind.SOCK_STREAM, proto=0>\r\n  return context.wrap_socket(\r\nObject allocated at (most recent call last):\r\n  File \"/home/sander/.local/lib/python3.8/site-packages/cheroot/ssl/builtin.py\", lineno 198\r\n    _parse_cert(certificate, private_key, self.certificate_chain),\r\n  File \"/home/sander/.local/lib/python3.8/site-packages/cheroot/ssl/builtin.py\", lineno 94\r\n    return _loopback_for_cert(certificate, private_key, certificate_chain)\r\n  File \"/home/sander/.local/lib/python3.8/site-packages/cheroot/ssl/builtin.py\", lineno 75\r\n    return context.wrap_socket(\r\n  File \"/usr/lib/python3.8/ssl.py\", lineno 500\r\n    return self.sslsocket_class._create(\r\n  File \"/usr/lib/python3.8/ssl.py\", lineno 1003\r\n    self = cls.__new__(cls, **kwargs)\r\n```\r\nwith this code:\r\n```\r\n#!/usr/bin/python3\r\n\r\nfrom cheroot import wsgi\r\ndef my_crazy_app(environ, start_response):\r\n    status = '200 OK'\r\n    response_headers = [('Content-type','text/plain')]\r\n    start_response(status, response_headers)\r\n    return [b'Hello world!']\r\naddr = '0.0.0.0', 8070\r\nserver = wsgi.Server(addr, my_crazy_app)\r\n\r\n# the SSL stuff:\r\nfrom cheroot.server import get_ssl_adapter_class\r\nserver.ssl_adapter = get_ssl_adapter_class(name='builtin')('./server.cert', './server.key')\r\n\r\nserver.start()\r\n```\r\n\r\n\r\n\ud83d\udca1 **Expected behavior**\r\nNo ResourceWarning\r\n\r\n\ud83d\udccb **Details**\r\nSee above\r\n\r\n\ud83d\udccb **Environment**\r\n\r\n- Cheroot version: 8.3.0\r\n- CherryPy version: 18.5.0\r\n- Python version: 3.8\r\n- OS: Ubuntu 20.04\r\n- Browser: not involved to get ResourceWarning\r\n\r\n\r\n\r\n\r\n\ud83d\udccb **Additional context**\r\n\r\nRelated to https://github.com/sabnzbd/sabnzbd/issues/1489\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/279", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/279/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/279/events", "html_url": "https://github.com/cherrypy/cheroot/issues/279", "id": 598075331, "node_id": "MDU6SXNzdWU1OTgwNzUzMzE=", "number": 279, "title": "Tests fail to run at maint/8.0.x", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-04-10T20:22:32Z", "updated_at": "2020-04-11T22:14:18Z", "closed_at": "2020-04-11T21:23:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Check out the code at maint/8.0.x, and the tests fail to run:\r\n\r\n```\r\ncheroot maint/8.0.x $ tox -r                                                                                                                                              \r\npython recreate: /Users/jaraco/code/public/cherrypy/cheroot/.tox/python\r\npython installdeps: setuptools>=31.0.1\r\npython develop-inst: /Users/jaraco/code/public/cherrypy/cheroot\r\npython installed: apipkg==1.5,attrs==19.3.0,certifi==2020.4.5.1,cffi==1.14.0,chardet==3.0.4,-e git+gh://cherrypy/cheroot@679bc266717de634a4ca8877a70deff12920c57e#egg=cheroot,codecov==2.0.15,colorama==0.4.3,coverage==4.5.3,cryptography==2.9,docopt==0.6.2,execnet==1.7.1,idna==2.9,jaraco.functools==3.0.0,more-itertools==8.2.0,packaging==20.3,pathtools==0.1.2,pluggy==0.13.1,py==1.8.1,pycparser==2.20,pyOpenSSL==19.1.0,pyparsing==2.4.7,pytest==5.4.1,pytest-cov==2.7.1,pytest-forked==1.1.3,pytest-mock==1.10.4,pytest-sugar==0.9.2,pytest-testmon==1.0.2,pytest-watch==4.2.0,pytest-xdist==1.31.0,requests==2.23.0,requests-unixsocket==0.2.0,six==1.14.0,termcolor==1.1.0,trustme==0.6.0,urllib3==1.25.8,watchdog==0.10.2,wcwidth==0.1.9\r\npython run-test-pre: PYTHONHASHSEED='1827473805'\r\npython run-test: commands[0] | pytest --testmon-off\r\nERROR: usage: pytest [options] [file_or_dir] [file_or_dir] [...]\r\npytest: error: unrecognized arguments: --testmon-off\r\n  inifile: /Users/jaraco/code/public/cherrypy/cheroot/pytest.ini\r\n  rootdir: /Users/jaraco/code/public/cherrypy/cheroot\r\n\r\nERROR: InvocationError for command /Users/jaraco/code/public/cherrypy/cheroot/.tox/python/bin/pytest --testmon-off (exited with code 4)\r\n________________________________________________________________________________ summary _________________________________________________________________________________\r\nERROR:   python: commands failed\r\n\r\n```\r\n\r\nI don't know what `--testmon-off` is, but searching for that error, I found no results on a web search.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/276", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/276/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/276/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/276/events", "html_url": "https://github.com/cherrypy/cheroot/issues/276", "id": 596420555, "node_id": "MDU6SXNzdWU1OTY0MjA1NTU=", "number": 276, "title": "[TODO] Fix `test_peercreds_unix_sock[abstract]` and `test_peercreds_unix_sock_with_lookup[abstract]` @ nightly", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610776725, "node_id": "MDU6TGFiZWwxNjEwNzc2NzI1", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Linux", "name": "Linux", "color": "d1854b", "default": false, "description": ""}, {"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 965606811, "node_id": "MDU6TGFiZWw5NjU2MDY4MTE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20present", "name": "reproducer: present", "color": "c2e0c6", "default": false, "description": "This PR or issue contains code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-04-08T08:58:53Z", "updated_at": "2020-04-12T21:07:03Z", "closed_at": "2020-04-12T21:07:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\nCI is red for nightly Python.\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nPassing CI\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nRun the tests under the latest Python dev release under Linux because abstract sockets are only supported there and these tests are skipped on other platforms.\r\n\r\n\ud83d\udca1 **Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\nGreen CI.\r\n\r\n\ud83d\udccb **Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\n```python-traceback\r\n     def _validate_host(self, host):\r\n        \"\"\"Validate a host so it doesn't contain control characters.\"\"\"\r\n        # Prevent CVE-2019-18348.\r\n        match = _contains_disallowed_url_pchar_re.search(host)\r\n        if match:\r\n>           raise InvalidURL(f\"URL can't contain control characters. {host!r} \"\r\n                             f\"(found at least {match.group()!r})\")\r\nE           http.client.InvalidURL: URL can't contain control characters. '\\x00cheroot-test-socketd5260955-8000-467d-856a-0fc47d7d720e' (found at least '\\x00')\r\n```\r\n\r\n\ud83d\udccb **Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\nTravis CI python-nightly\r\n\r\n\ud83d\udccb **Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n(e.g. detailed explanation, tracebacks, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\nhttps://travis-ci.com/github/cherrypy/cheroot/jobs/316761085#L635", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/263", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/263/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/263/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/263/events", "html_url": "https://github.com/cherrypy/cheroot/issues/263", "id": 559133644, "node_id": "MDU6SXNzdWU1NTkxMzM2NDQ=", "number": 263, "title": "[cheroot==8.1.0 regression] Occasional connection resets with concurrent requests", "user": {"login": "tobiashenkel", "id": 3810159, "node_id": "MDQ6VXNlcjM4MTAxNTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/3810159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tobiashenkel", "html_url": "https://github.com/tobiashenkel", "followers_url": "https://api.github.com/users/tobiashenkel/followers", "following_url": "https://api.github.com/users/tobiashenkel/following{/other_user}", "gists_url": "https://api.github.com/users/tobiashenkel/gists{/gist_id}", "starred_url": "https://api.github.com/users/tobiashenkel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tobiashenkel/subscriptions", "organizations_url": "https://api.github.com/users/tobiashenkel/orgs", "repos_url": "https://api.github.com/users/tobiashenkel/repos", "events_url": "https://api.github.com/users/tobiashenkel/events{/privacy}", "received_events_url": "https://api.github.com/users/tobiashenkel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 893194325, "node_id": "MDU6TGFiZWw4OTMxOTQzMjU=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/regression", "name": "regression", "color": "bf3b5a", "default": false, "description": "Something that worked earlier got broken in new release"}, {"id": 965606811, "node_id": "MDU6TGFiZWw5NjU2MDY4MTE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20present", "name": "reproducer: present", "color": "c2e0c6", "default": false, "description": "This PR or issue contains code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-02-03T13:00:59Z", "updated_at": "2020-07-13T14:20:28Z", "closed_at": "2020-07-13T14:20:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "**I'm submitting a ...**\r\n- [x] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Do you want to request a *feature* or report a *bug*?**\r\n\r\nReporting a bug\r\n\r\n**What is the current behavior?**\r\n\r\nWhen running concurrent requests against a cherrypy the client occasionally gets 'Connection reset by peer' errors.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\n\r\nThis can be reproduced by running the following server and client code. Tested both on MacOS with python 3.7 and Ubuntu bionic on python 3.6. Both reveal the same connection errors:\r\n\r\n```console\r\nERROR:test:FAILED http://localhost:5000/info: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))\r\n(...)\r\nERROR:test:FAILED http://localhost:5000/info: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))\r\nERROR:test:FAILED http://localhost:5000/info: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))\r\nINFO:test:921 out of 1000 successful\r\n```\r\n\r\nWhen reproducing locally the issue reproduces already with 20 workers occasionally and with 50 workers on every run of the client script. I also played with various values of threadpool and queue size settings but couldn't get it working.\r\n\r\nServer code:\r\n\r\n```python\r\nimport logging\r\nimport cherrypy\r\n\r\nlogging.basicConfig(level=logging.DEBUG)\r\n\r\n\r\nclass TestAPI:\r\n\r\n    @cherrypy.expose\r\n    def info(self):\r\n        return 'test\\n'\r\n\r\n\r\ndef main():\r\n    route_map = cherrypy.dispatch.RoutesDispatcher()\r\n    api = TestAPI()\r\n    route_map.connect('info', '/info', controller=api, action='info')\r\n\r\n    conf = {\r\n        '/': {\r\n            'request.dispatch': route_map\r\n        }\r\n    }\r\n\r\n    cherrypy.tree.mount(api, '/', config=conf)\r\n\r\n    cherrypy.config.update({\r\n        'global': {\r\n            'environment': 'production',\r\n            'server.socket_host': '0.0.0.0',\r\n            'server.socket_port': 5000,\r\n            # 'server.thread_pool': 20,\r\n            # 'server.thread_pool_max': 20,\r\n            # 'server.socket_queue_size': 128,\r\n            # 'server.accepted_queue_size': 100000,\r\n        },\r\n    })\r\n\r\n    cherrypy.engine.start()\r\n    cherrypy.engine.block()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\nClient code:\r\n\r\n```python\r\nfrom concurrent.futures.thread import ThreadPoolExecutor\r\nfrom urllib.parse import urljoin\r\n\r\nimport requests\r\nimport logging\r\n\r\nbaseurl = 'http://localhost:5000/'\r\n\r\nlog = logging.getLogger('test')\r\n\r\n\r\ndef configure_logging(context):\r\n    logger = logging.getLogger(context)\r\n    logger.setLevel(logging.DEBUG)\r\n\r\n\r\ndef request_info(session):\r\n    url = urljoin(baseurl, f'info')\r\n    try:\r\n        r = session.get(url)\r\n    except requests.exceptions.ConnectionError as e:\r\n        log.error('FAILED %s: %s', url, e)\r\n        return False\r\n    r.raise_for_status()\r\n    return True\r\n\r\n\r\ndef main():\r\n    session = requests.session()\r\n    a = requests.adapters.HTTPAdapter(pool_connections=1, pool_maxsize=1000)\r\n    session.mount('http://', a)\r\n\r\n    count = 1000\r\n    success = 0\r\n    with ThreadPoolExecutor(max_workers=50) as tp:\r\n        tasks = []\r\n        for i in range(count):\r\n            tasks.append(tp.submit(request_info, session))\r\n\r\n        for task in tasks:\r\n            if task.result():\r\n                success += 1\r\n\r\n    log.info('%s out of %s successful', success, count)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    logging.basicConfig()\r\n    configure_logging('test')\r\n    main()\r\n```\r\n\r\nWe see the same behavior when running a production service between apache as a reverse proxy.\r\n\r\n\r\n**What is the expected behavior?**\r\n\r\nThere are no 'Connection reset by peer' errors.\r\n\r\n**What is the motivation / use case for changing the behavior?**\r\n\r\n\r\n\r\n**Please tell us about your environment:**\r\n\r\n- Cheroot version: 8.2.1\r\n- CherryPy version: 18.5.0\r\n- Python version: 3.6.9 (Ubuntu bionic) and python 3.7 (MacOS)\r\n- OS: MacOS and Ubuntu bionic\r\n- Browser: requests library and apache reverse proxy\r\n\r\n\r\n\r\n**Other information** (e.g. detailed explanation, stacktraces, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n\r\nNote that when running with Tornado as HTTP server the problem doesn't reproduce:\r\n\r\n```python\r\nimport logging\r\nimport cherrypy\r\n\r\nlogging.basicConfig(level=logging.DEBUG)\r\n\r\n\r\nclass TestAPI:\r\n\r\n    @cherrypy.expose\r\n    def info(self):\r\n        return 'test\\n'\r\n\r\n\r\ndef main():\r\n    import tornado\r\n    import tornado.httpserver\r\n    import tornado.wsgi\r\n\r\n    route_map = cherrypy.dispatch.RoutesDispatcher()\r\n    api = TestAPI()\r\n    route_map.connect('info', '/info', controller=api, action='info')\r\n\r\n    conf = {\r\n        '/': {\r\n            'request.dispatch': route_map\r\n        }\r\n    }\r\n\r\n    wsgiapp = cherrypy.tree.mount(api, '/', config=conf)\r\n\r\n    # Disable the autoreload which won't play well\r\n    cherrypy.config.update({'engine.autoreload.on': False})\r\n\r\n    # let's not start the CherryPy HTTP server\r\n    cherrypy.server.unsubscribe()\r\n\r\n    # use CherryPy's signal handling\r\n    cherrypy.engine.signals.subscribe()\r\n\r\n    # Prevent CherryPy logs to be propagated\r\n    # to the Tornado logger\r\n    cherrypy.log.error_log.propagate = False\r\n\r\n    # Run the engine but don't block on it\r\n    cherrypy.engine.start()\r\n\r\n    # Run thr tornado stack\r\n    container = tornado.wsgi.WSGIContainer(wsgiapp)\r\n    http_server = tornado.httpserver.HTTPServer(container)\r\n    http_server.listen(5000)\r\n\r\n    # Publish to the CherryPy engine as if\r\n    # we were using its mainloop\r\n    tornado.ioloop.PeriodicCallback(\r\n        lambda: cherrypy.engine.publish('main'), 100).start()\r\n    tornado.ioloop.IOLoop.instance().start()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/258", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/258/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/258/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/258/events", "html_url": "https://github.com/cherrypy/cheroot/issues/258", "id": 542009261, "node_id": "MDU6SXNzdWU1NDIwMDkyNjE=", "number": 258, "title": "cheroot breaking with jaraco.functools 3.0.0 release", "user": {"login": "adityatoshniwal", "id": 31855755, "node_id": "MDQ6VXNlcjMxODU1NzU1", "avatar_url": "https://avatars2.githubusercontent.com/u/31855755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adityatoshniwal", "html_url": "https://github.com/adityatoshniwal", "followers_url": "https://api.github.com/users/adityatoshniwal/followers", "following_url": "https://api.github.com/users/adityatoshniwal/following{/other_user}", "gists_url": "https://api.github.com/users/adityatoshniwal/gists{/gist_id}", "starred_url": "https://api.github.com/users/adityatoshniwal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adityatoshniwal/subscriptions", "organizations_url": "https://api.github.com/users/adityatoshniwal/orgs", "repos_url": "https://api.github.com/users/adityatoshniwal/repos", "events_url": "https://api.github.com/users/adityatoshniwal/events{/privacy}", "received_events_url": "https://api.github.com/users/adityatoshniwal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272679, "node_id": "MDU6TGFiZWw3OTI3MjY3OQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": "This is irrelevant"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-24T06:25:06Z", "updated_at": "2019-12-27T06:17:57Z", "closed_at": "2019-12-26T21:16:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n\u2753 **I'm submitting a ...**\r\n- [x] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\nI've have wheel package of my application which uses cheroot. But now when I try to install the wheel on Python 3.5, cheroot does not install as jaraco.functool 3.0.0 does not work below Python 3.6, which indirectly makes cheroot to work only above 3.6\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\nI think jaraco.functools==2.0 should be pinned\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nSteps to reproduce the behavior:\r\nDownload the wheel file - https://ftp.postgresql.org/pub/pgadmin/pgadmin4/snapshots/2019-12-24/pgadmin4-4.16-py2.py3-none-any.whl\r\nand install in a venv with Python 3.5\r\n\r\n\ud83d\udccb **Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\n`Requirement already satisfied: more-itertools>=2.6 in ./pgwhl/lib/python3.5/site-packages (from cheroot==8.2.1->pgadmin4==4.16) (8.0.2)\r\nRequirement already satisfied: jaraco.functools in ./pgwhl/lib/python3.5/site-packages (from cheroot==8.2.1->pgadmin4==4.16) (3.0.0)\r\nERROR: Package 'jaraco.functools' requires a different Python: 3.5.2 not in '>=3.6'\r\n`\r\n\r\n\ud83d\udccb **Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: 8.2.1\r\n- Python version: 3.5.2\r\n- OS: Ubuntu 16\r\n- Browser: all\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/249", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/249/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/249/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/249/events", "html_url": "https://github.com/cherrypy/cheroot/issues/249", "id": 527301757, "node_id": "MDU6SXNzdWU1MjczMDE3NTc=", "number": 249, "title": "[cheroot==8.1.0 regression] Spin on Linux when socket filedescriptor is too big for select", "user": {"login": "kmduk", "id": 37832521, "node_id": "MDQ6VXNlcjM3ODMyNTIx", "avatar_url": "https://avatars3.githubusercontent.com/u/37832521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmduk", "html_url": "https://github.com/kmduk", "followers_url": "https://api.github.com/users/kmduk/followers", "following_url": "https://api.github.com/users/kmduk/following{/other_user}", "gists_url": "https://api.github.com/users/kmduk/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmduk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmduk/subscriptions", "organizations_url": "https://api.github.com/users/kmduk/orgs", "repos_url": "https://api.github.com/users/kmduk/repos", "events_url": "https://api.github.com/users/kmduk/events{/privacy}", "received_events_url": "https://api.github.com/users/kmduk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1610776725, "node_id": "MDU6TGFiZWwxNjEwNzc2NzI1", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Linux", "name": "Linux", "color": "d1854b", "default": false, "description": ""}, {"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 893194325, "node_id": "MDU6TGFiZWw4OTMxOTQzMjU=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/regression", "name": "regression", "color": "bf3b5a", "default": false, "description": "Something that worked earlier got broken in new release"}, {"id": 965606811, "node_id": "MDU6TGFiZWw5NjU2MDY4MTE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20present", "name": "reproducer: present", "color": "c2e0c6", "default": false, "description": "This PR or issue contains code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2019-11-22T16:44:52Z", "updated_at": "2020-07-26T19:30:00Z", "closed_at": "2020-07-22T22:03:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Once the filedescriptor for a socket used by cherrypy has a value greater than 1024 a thread goes in to a loop just writing blocks like the following to stderr:\r\n```python-traceback\r\n[22/Nov/2019:11:55:07] ENGINE Error in HTTPServer.tick\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.6/dist-packages/cheroot/server.py\", line 1770, in serve\r\n    self.tick()\r\n  File \"/usr/lib/python3.6/dist-packages/cheroot/server.py\", line 1993, in tick\r\n    conn = self.connections.get_conn(self.socket)\r\n  File \"/usr/lib/python3.6/dist-packages/cheroot/connections.py\", line 142, in get_conn\r\n    rlist, _, _ = select.select(list(socket_dict), [], [], 0.1)\r\nValueError: filedescriptor out of range in select()\r\n```\r\n\r\nThis does not happen with cheroot versions prior to 8.1.0\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/246", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/246/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/246/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/246/events", "html_url": "https://github.com/cherrypy/cheroot/issues/246", "id": 519037677, "node_id": "MDU6SXNzdWU1MTkwMzc2Nzc=", "number": 246, "title": "`started_request` can not judge socket timeout just because system can not", "user": {"login": "naivelife", "id": 38353946, "node_id": "MDQ6VXNlcjM4MzUzOTQ2", "avatar_url": "https://avatars3.githubusercontent.com/u/38353946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naivelife", "html_url": "https://github.com/naivelife", "followers_url": "https://api.github.com/users/naivelife/followers", "following_url": "https://api.github.com/users/naivelife/following{/other_user}", "gists_url": "https://api.github.com/users/naivelife/gists{/gist_id}", "starred_url": "https://api.github.com/users/naivelife/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naivelife/subscriptions", "organizations_url": "https://api.github.com/users/naivelife/orgs", "repos_url": "https://api.github.com/users/naivelife/repos", "events_url": "https://api.github.com/users/naivelife/events{/privacy}", "received_events_url": "https://api.github.com/users/naivelife/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272680, "node_id": "MDU6TGFiZWw3OTI3MjY4MA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/question", "name": "question", "color": "cc317c", "default": true, "description": "StackOverflow"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-07T04:45:44Z", "updated_at": "2020-01-13T16:21:21Z", "closed_at": "2020-01-13T16:21:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n\r\n\u2753 **I'm submitting a ...**\r\n- [ ] \ud83d\udc1e bug report\r\n- [X] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Is your feature request related to a problem? Please describe.**\r\n<!--\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n-->\r\n[not filled in]\r\n\r\n\ud83d\udc23 **Describe the solution you'd like**\r\n\r\n`httpconnection` `communicate()`, it will catch socket timeout exception, but it accross `request_seen` and `started_request` to judge the reason for socket timeout.\r\nFirst judge `request_seen` whether it is `True`. If it is `True`, it proves that the system response is slow, then it should not respond to 408.\r\nIf `request_seen` is `False`, it proves that the request has not been processed, but it needs to be judged whether the data is not received or the processing is slow.\r\nif we `recv` data (the first request line), then, `started_request` is `true`, but If the system is slower to process next and the other data has arrived, we do not processed in time, it will lead to timeout, so we can not response 408, but we did\r\n\r\n\r\n\ud83d\udccb **Describe alternatives you've considered**\r\n<!--\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n-->\r\n[not filled in]\r\n\r\n\ud83d\udccb **Additional context**\r\n<!--\r\nAdd any other context or screenshots about the feature request here.\r\n(e.g. detailed explanation, related issues, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n[not filled in]", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/244", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/244/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/244/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/244/events", "html_url": "https://github.com/cherrypy/cheroot/issues/244", "id": 509759398, "node_id": "MDU6SXNzdWU1MDk3NTkzOTg=", "number": 244, "title": "ModuleNotFoundError: No module named 'cheroot' v8.2.1", "user": {"login": "KrishnaAnanthi", "id": 5318326, "node_id": "MDQ6VXNlcjUzMTgzMjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5318326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KrishnaAnanthi", "html_url": "https://github.com/KrishnaAnanthi", "followers_url": "https://api.github.com/users/KrishnaAnanthi/followers", "following_url": "https://api.github.com/users/KrishnaAnanthi/following{/other_user}", "gists_url": "https://api.github.com/users/KrishnaAnanthi/gists{/gist_id}", "starred_url": "https://api.github.com/users/KrishnaAnanthi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KrishnaAnanthi/subscriptions", "organizations_url": "https://api.github.com/users/KrishnaAnanthi/orgs", "repos_url": "https://api.github.com/users/KrishnaAnanthi/repos", "events_url": "https://api.github.com/users/KrishnaAnanthi/events{/privacy}", "received_events_url": "https://api.github.com/users/KrishnaAnanthi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272679, "node_id": "MDU6TGFiZWw3OTI3MjY3OQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": "This is irrelevant"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-10-21T06:35:11Z", "updated_at": "2019-11-05T08:58:11Z", "closed_at": "2019-10-21T06:43:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\nTill v8.2.0 things were working fine. from friday i am getting no module found error for the below line **from cheroot.wsgi import Server**\r\n```python-traceback\r\n  File \"/usr/local/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/local/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/edge/siemens/automation/server/__main__.py\", line 18, in <module>\r\n    from server.server import Inventory\r\n  File \"server.py\", line 22, in init server\r\nModuleNotFoundError: No module named 'cheroot'\r\n```\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nSteps to reproduce the behavior:\r\n1. Run '...'\r\n2. Make request '....'\r\n3. See error\r\n\r\n\ud83d\udca1 **Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\n\r\n\ud83d\udccb **Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\n\r\n\ud83d\udccb **Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version:8.2.0\r\n- CherryPy version:18.3.0 (if applicable)\r\n- Python version: 3.7\r\n- OS: debian\r\n- Browser: [all | Chrome XX | Firefox XX | IE XX | Safari XX | Mobile Chrome XX | Android X.X Web Browser | iOS XX Safari | iOS XX UIWebView | iOS XX WKWebView ]\r\n\r\n\ud83d\udccb **Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n(e.g. detailed explanation, tracebacks, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/239", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/239/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/239/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/239/events", "html_url": "https://github.com/cherrypy/cheroot/issues/239", "id": 506373752, "node_id": "MDU6SXNzdWU1MDYzNzM3NTI=", "number": 239, "title": "macOS tests failing to run in CircleCI", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 1610776592, "node_id": "MDU6TGFiZWwxNjEwNzc2NTky", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/macOS", "name": "macOS", "color": "5319e7", "default": false, "description": ""}, {"id": 893194325, "node_id": "MDU6TGFiZWw4OTMxOTQzMjU=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/regression", "name": "regression", "color": "bf3b5a", "default": false, "description": "Something that worked earlier got broken in new release"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-13T19:58:12Z", "updated_at": "2019-10-14T08:55:07Z", "closed_at": "2019-10-14T08:55:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The tests are failing to run on macOS in CircleCI with the error message \"unknown flag: --split-by\".\r\n\r\nThe [error message started in 1718](https://circleci.com/gh/cherrypy/cheroot/1718) after the `circleci` command was whitelisted to be allowed to run again after not running for many builds.\r\n\r\nIt seems the tests recently [ran successfully in 1702](https://circleci.com/gh/cherrypy/cheroot/1702).\r\n\r\nI suspect the issue lies with how tox launches commands on macOS, not honoring the `|` character as a pipe.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/238", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/238/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/238/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/238/events", "html_url": "https://github.com/cherrypy/cheroot/issues/238", "id": 506326863, "node_id": "MDU6SXNzdWU1MDYzMjY4NjM=", "number": 238, "title": "Intermittent error in teardown of wsgi_server fixture", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1434727083, "node_id": "MDU6TGFiZWwxNDM0NzI3MDgz", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/triage", "name": "triage", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-13T13:40:21Z", "updated_at": "2019-10-13T17:12:25Z", "closed_at": "2019-10-13T17:12:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In [this test](https://circleci.com/gh/cherrypy/cheroot/1716#tests/containers/1), I observe failures during teardown leading to failed CI runs:\r\n\r\n```\r\n\u2015 ERROR at teardown of test_Content_Length_out[/wrong_cl_unbuffered-200-I too] \u2015\r\n[gw29] linux -- Python 3.6.1 /root/project/.tox/py36/bin/python\r\n\r\n    @pytest.fixture(scope='module')\r\n    def wsgi_server():\r\n        \"\"\"Set up and tear down a Cheroot WSGI server instance.\"\"\"\r\n>       for srv in cheroot_server(cheroot.wsgi.Server):\r\n\r\nsrv        = <cheroot.wsgi.Server object at 0x7f7183501320>\r\n\r\ncheroot/testing.py:67: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\ncheroot/testing.py:61: in cheroot_server\r\n    httpserver.stop()  # destroy it\r\ncheroot/server.py:2064: in stop\r\n    self.requests.stop(self.shutdown_timeout)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <cheroot.workers.threadpool.ThreadPool object at 0x7f7183501518>\r\ntimeout = 0\r\n\r\n    def stop(self, timeout=5):\r\n        \"\"\"Terminate all worker threads.\r\n    \r\n        Args:\r\n            timeout (int): time to wait for threads to stop gracefully\r\n        \"\"\"\r\n        # Must shut down threads here so the code that calls\r\n        # this method can know when all threads are stopped.\r\n        for worker in self._threads:\r\n            self._queue.put(_SHUTDOWNREQUEST)\r\n    \r\n        # Don't join currentThread (when stop is called inside a request).\r\n        current = threading.currentThread()\r\n        if timeout is not None and timeout >= 0:\r\n            endtime = time.time() + timeout\r\n        while self._threads:\r\n            worker = self._threads.pop()\r\n            if worker is not current and worker.is_alive():\r\n                try:\r\n                    if timeout is None or timeout < 0:\r\n                        worker.join()\r\n                    else:\r\n                        remaining_time = endtime - time.time()\r\n                        if remaining_time > 0:\r\n                            worker.join(remaining_time)\r\n                        if worker.is_alive():\r\n                            # We exhausted the timeout.\r\n                            # Forcibly shut down the socket.\r\n                            c = worker.conn\r\n                            if c and not c.rfile.closed:\r\n                                try:\r\n>                                   c.socket.shutdown(socket.SHUT_RD)\r\nE                                   OSError: [Errno 107] Transport endpoint is not connected\r\n\r\nc          = <cheroot.server.HTTPConnection object at 0x7f718359da58>\r\ncurrent    = <_MainThread(MainThread, started 140125736597248)>\r\nendtime    = 1570937005.8063483\r\nremaining_time = -0.0005140304565429688\r\nself       = <cheroot.workers.threadpool.ThreadPool object at 0x7f7183501518>\r\ntimeout    = 0\r\nworker     = <WorkerThread(CP Server Thread-2, stopped 140125502588672)>\r\n\r\ncheroot/workers/threadpool.py:280: OSError\r\n----------------------------- Captured stderr call -----------------------------\r\nValueError('Response body exceeds the declared Content-Length.',)\r\n--------------------------- Captured stderr teardown ---------------------------\r\nTraceback (most recent call last):\r\n  File \"/root/project/cheroot/server.py\", line 1280, in communicate\r\n    req.respond()\r\n  File \"/root/project/cheroot/server.py\", line 1083, in respond\r\n    self.server.gateway(self).respond()\r\n  File \"/root/project/cheroot/wsgi.py\", line 148, in respond\r\n    self.write(chunk)\r\n  File \"/root/project/cheroot/wsgi.py\", line 240, in write\r\n    'Response body exceeds the declared Content-Length.',\r\nValueError: Response body exceeds the declared Content-Length.\r\n\r\n                                                                  26% \u2588\u2588\u258b       \r\n\r\n\u2015 ERROR at teardown of test_Content_Length_out[/wrong_cl_buffered-500-The requested resource returned more bytes than the declared Content-Length.] \u2015\r\n[gw28] linux -- Python 3.6.1 /root/project/.tox/py36/bin/python\r\n\r\n    @pytest.fixture(scope='module')\r\n    def wsgi_server():\r\n        \"\"\"Set up and tear down a Cheroot WSGI server instance.\"\"\"\r\n>       for srv in cheroot_server(cheroot.wsgi.Server):\r\n\r\nsrv        = <cheroot.wsgi.Server object at 0x7fe8a9743320>\r\n\r\ncheroot/testing.py:67: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\ncheroot/testing.py:61: in cheroot_server\r\n    httpserver.stop()  # destroy it\r\ncheroot/server.py:2064: in stop\r\n    self.requests.stop(self.shutdown_timeout)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <cheroot.workers.threadpool.ThreadPool object at 0x7fe8a9743518>\r\ntimeout = 0\r\n\r\n    def stop(self, timeout=5):\r\n        \"\"\"Terminate all worker threads.\r\n    \r\n        Args:\r\n            timeout (int): time to wait for threads to stop gracefully\r\n        \"\"\"\r\n        # Must shut down threads here so the code that calls\r\n        # this method can know when all threads are stopped.\r\n        for worker in self._threads:\r\n            self._queue.put(_SHUTDOWNREQUEST)\r\n    \r\n        # Don't join currentThread (when stop is called inside a request).\r\n        current = threading.currentThread()\r\n        if timeout is not None and timeout >= 0:\r\n            endtime = time.time() + timeout\r\n        while self._threads:\r\n            worker = self._threads.pop()\r\n            if worker is not current and worker.is_alive():\r\n                try:\r\n                    if timeout is None or timeout < 0:\r\n                        worker.join()\r\n                    else:\r\n                        remaining_time = endtime - time.time()\r\n                        if remaining_time > 0:\r\n                            worker.join(remaining_time)\r\n                        if worker.is_alive():\r\n                            # We exhausted the timeout.\r\n                            # Forcibly shut down the socket.\r\n                            c = worker.conn\r\n                            if c and not c.rfile.closed:\r\n                                try:\r\n>                                   c.socket.shutdown(socket.SHUT_RD)\r\nE                                   OSError: [Errno 107] Transport endpoint is not connected\r\n\r\nc          = <cheroot.server.HTTPConnection object at 0x7fe8a97dfa58>\r\ncurrent    = <_MainThread(MainThread, started 140637477525248)>\r\nendtime    = 1570937005.8055036\r\nremaining_time = -0.0004260540008544922\r\nself       = <cheroot.workers.threadpool.ThreadPool object at 0x7fe8a9743518>\r\ntimeout    = 0\r\nworker     = <WorkerThread(CP Server Thread-2, stopped 140637243598592)>\r\n\r\ncheroot/workers/threadpool.py:280: OSError\r\n----------------------------- Captured stderr call -----------------------------\r\nValueError('Response body exceeds the declared Content-Length.',)\r\n--------------------------- Captured stderr teardown ---------------------------\r\nTraceback (most recent call last):\r\n  File \"/root/project/cheroot/server.py\", line 1280, in communicate\r\n    req.respond()\r\n  File \"/root/project/cheroot/server.py\", line 1083, in respond\r\n    self.server.gateway(self).respond()\r\n  File \"/root/project/cheroot/wsgi.py\", line 148, in respond\r\n    self.write(chunk)\r\n  File \"/root/project/cheroot/wsgi.py\", line 240, in write\r\n    'Response body exceeds the declared Content-Length.',\r\nValueError: Response body exceeds the declared Content-Length.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/236", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/236/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/236/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/236/events", "html_url": "https://github.com/cherrypy/cheroot/issues/236", "id": 505363530, "node_id": "MDU6SXNzdWU1MDUzNjM1MzA=", "number": 236, "title": "cheroot-8.1.0 failed to be installed on CentOS 7", "user": {"login": "iredmail", "id": 2048991, "node_id": "MDQ6VXNlcjIwNDg5OTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/2048991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iredmail", "html_url": "https://github.com/iredmail", "followers_url": "https://api.github.com/users/iredmail/followers", "following_url": "https://api.github.com/users/iredmail/following{/other_user}", "gists_url": "https://api.github.com/users/iredmail/gists{/gist_id}", "starred_url": "https://api.github.com/users/iredmail/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iredmail/subscriptions", "organizations_url": "https://api.github.com/users/iredmail/orgs", "repos_url": "https://api.github.com/users/iredmail/repos", "events_url": "https://api.github.com/users/iredmail/events{/privacy}", "received_events_url": "https://api.github.com/users/iredmail/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272679, "node_id": "MDU6TGFiZWw3OTI3MjY3OQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": "This is irrelevant"}, {"id": 965606811, "node_id": "MDU6TGFiZWw5NjU2MDY4MTE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20present", "name": "reproducer: present", "color": "c2e0c6", "default": false, "description": "This PR or issue contains code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-10T15:56:15Z", "updated_at": "2019-10-10T16:03:21Z", "closed_at": "2019-10-10T15:58:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n\r\nOn fresh CentOS 7.7, install cheroot:\r\n\r\n```\r\n# easy_install-2.7 cheroot\r\nSearching for cheroot\r\nReading https://pypi.python.org/simple/cheroot/\r\nBest match: cheroot 8.1.0\r\nDownloading https://files.pythonhosted.org/packages/a1/6c/899c7de9323e440f7eda28fead4a84bd0ae5a557e6ebf8f12270cc502043/cheroot-8.1.0.tar.gz#sha256=3ff64073efa35b39d5e107410f5c79664dc8c6c5990651e970740c80ab8878a8\r\nProcessing cheroot-8.1.0.tar.gz\r\nWriting /tmp/easy_install-7t6Pby/cheroot-8.1.0/setup.cfg\r\nRunning cheroot-8.1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-7t6Pby/cheroot-8.1.0/egg-dist-tmp-ZAQYCf\r\n/usr/lib64/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'use_scm_version'\r\n  warnings.warn(msg)\r\nwarning: install_lib: 'build/lib' does not exist -- no Python modules to install\r\n\r\nzip_safe flag not set; analyzing archive contents...\r\nAdding UNKNOWN 0.0.0 to easy-install.pth file\r\n\r\nInstalled /usr/lib/python2.7/site-packages/UNKNOWN-0.0.0-py2.7.egg\r\nSkipping dependencies for UNKNOWN 0.0.0\r\n```\r\n\r\nTry to use it:\r\n\r\n```\r\n[root@c7 ~]# python\r\nPython 2.7.5 (default, Aug  7 2019, 00:51:29) \r\n[GCC 4.8.5 20150623 (Red Hat 4.8.5-39)] on linux2\r\n...\r\n>>> import cheroot\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nImportError: No module named cheroot\r\n```\r\n\r\n\ud83d\udccb **Environment**\r\n- Cheroot version: 8.0.0, 8.1.0\r\n- Python version: 2.7.5\r\n- OS: CentOS 7.7\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/235", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/235/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/235/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/235/events", "html_url": "https://github.com/cherrypy/cheroot/issues/235", "id": 505135647, "node_id": "MDU6SXNzdWU1MDUxMzU2NDc=", "number": 235, "title": "Latest releases are only tags?", "user": {"login": "mar10", "id": 41663, "node_id": "MDQ6VXNlcjQxNjYz", "avatar_url": "https://avatars3.githubusercontent.com/u/41663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mar10", "html_url": "https://github.com/mar10", "followers_url": "https://api.github.com/users/mar10/followers", "following_url": "https://api.github.com/users/mar10/following{/other_user}", "gists_url": "https://api.github.com/users/mar10/gists{/gist_id}", "starred_url": "https://api.github.com/users/mar10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mar10/subscriptions", "organizations_url": "https://api.github.com/users/mar10/orgs", "repos_url": "https://api.github.com/users/mar10/repos", "events_url": "https://api.github.com/users/mar10/events{/privacy}", "received_events_url": "https://api.github.com/users/mar10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1434727083, "node_id": "MDU6TGFiZWwxNDM0NzI3MDgz", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/triage", "name": "triage", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-10T09:04:58Z", "updated_at": "2019-10-10T09:41:02Z", "closed_at": "2019-10-10T09:35:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Probably not a big deal, but it seems that starting with v6.5.7 releases are not marked as such in GitHub (PyPI visions are correct):\r\n![image](https://user-images.githubusercontent.com/41663/66554467-573aef00-eb4d-11e9-8289-ef8d7c84e526.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/234", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/234/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/234/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/234/events", "html_url": "https://github.com/cherrypy/cheroot/issues/234", "id": 504964377, "node_id": "MDU6SXNzdWU1MDQ5NjQzNzc=", "number": 234, "title": "Test suite fails to run on Windows", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1434727083, "node_id": "MDU6TGFiZWwxNDM0NzI3MDgz", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/triage", "name": "triage", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-10T00:32:07Z", "updated_at": "2019-10-10T01:37:30Z", "closed_at": "2019-10-10T01:37:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Today I tried to run the tests on Windows to try to see if I could replicate the Appveyor failures, but running tox fails with this error:\r\n\r\n`ERROR: InvocationError for command could not find executable rm`\r\n\r\nWindows doesn't come with coreutils and this test suite shouldn't depend on tools outside of Python.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/231", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/231/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/231/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/231/events", "html_url": "https://github.com/cherrypy/cheroot/issues/231", "id": 504355123, "node_id": "MDU6SXNzdWU1MDQzNTUxMjM=", "number": 231, "title": "SpecifierSet object has no attribute split", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-09T01:13:57Z", "updated_at": "2019-10-09T18:30:33Z", "closed_at": "2019-10-09T18:30:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Running the tests on cheroot, I'm seeing this error:\r\n\r\n```\r\n  Installing backend dependencies: finished with status 'done'\r\n    Preparing wheel metadata: started\r\n    Preparing wheel metadata: finished with status 'error'\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /Users/jaraco/code/public/cherrypy/cheroot/.tox/python/bin/python /Users/jaraco/code/public/cherrypy/cheroot/.tox/python/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/tmpkxgh82j6\r\n         cwd: /Users/jaraco/code/public/cherrypy/cheroot\r\n    Complete output (28 lines):\r\n    Traceback (most recent call last):\r\n      File \"/Users/jaraco/code/public/cherrypy/cheroot/.tox/python/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 207, in <module>\r\n        main()\r\n      File \"/Users/jaraco/code/public/cherrypy/cheroot/.tox/python/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 197, in main\r\n        json_out['return_val'] = hook(**hook_input['kwargs'])\r\n      File \"/Users/jaraco/code/public/cherrypy/cheroot/.tox/python/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 69, in prepare_metadata_for_build_wheel\r\n        return hook(metadata_directory, config_settings)\r\n      File \"/private/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/pip-build-env-2krlo7y7/overlay/lib/python3.8/site-packages/setuptools/build_meta.py\", line 156, in prepare_metadata_for_build_wheel\r\n        self.run_setup()\r\n      File \"/private/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/pip-build-env-2krlo7y7/overlay/lib/python3.8/site-packages/setuptools/build_meta.py\", line 142, in run_setup\r\n        exec(compile(code, __file__, 'exec'), locals())\r\n      File \"setup.py\", line 138, in <module>\r\n        __name__ == '__main__' and setuptools.setup(**setup_params)\r\n      File \"/private/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/pip-build-env-2krlo7y7/overlay/lib/python3.8/site-packages/setuptools/__init__.py\", line 145, in setup\r\n        return distutils.core.setup(**attrs)\r\n      File \"/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/distutils/core.py\", line 108, in setup\r\n        _setup_distribution = dist = klass(attrs)\r\n      File \"/private/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/pip-build-env-2krlo7y7/overlay/lib/python3.8/site-packages/setuptools/dist.py\", line 446, in __init__\r\n        _Distribution.__init__(self, {\r\n      File \"/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/distutils/dist.py\", line 292, in __init__\r\n        self.finalize_options()\r\n      File \"/private/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/pip-build-env-2krlo7y7/overlay/lib/python3.8/site-packages/setuptools/dist.py\", line 735, in finalize_options\r\n        ep.load()(self, ep.name, value)\r\n      File \"/private/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/pip-build-env-2krlo7y7/overlay/lib/python3.8/site-packages/setuptools/dist.py\", line 291, in check_specifier\r\n        packaging.specifiers.SpecifierSet(value)\r\n      File \"/private/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/pip-build-env-2krlo7y7/overlay/lib/python3.8/site-packages/setuptools/_vendor/packaging/specifiers.py\", line 594, in __init__\r\n        specifiers = [s.strip() for s in specifiers.split(\",\") if s.strip()]\r\n    AttributeError: 'SpecifierSet' object has no attribute 'split'\r\n```\r\n\r\nI originally reported this in setuptools thinking it was due to pypa/setuptools#1847, but then I realized the issue is probably due to the involved way that cheroot is trying to replicate declarative config support in setup.py. Due to the changes in setuptools 41.4, this support no longer works.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/227", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/227/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/227/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/227/events", "html_url": "https://github.com/cherrypy/cheroot/issues/227", "id": 499087648, "node_id": "MDU6SXNzdWU0OTkwODc2NDg=", "number": 227, "title": "Appveyor tests failing on Python 2.7", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272679, "node_id": "MDU6TGFiZWw3OTI3MjY3OQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": "This is irrelevant"}], "state": "closed", "locked": false, "assignee": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-09-26T20:01:00Z", "updated_at": "2019-09-26T20:22:47Z", "closed_at": "2019-09-26T20:22:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See [this build](https://ci.appveyor.com/project/CherryPy/cheroot/builds/27698452/job/ycolss9esm3ngl1a) for an example. The virtualenv gets created with an old version of pip and while tox is in the process of upgrading pip to `>=9`, it's already too late because `tox >= 3.11.2` or `tox-run-command >= 0.4.` creates an implied dependency on more_itertools, which gets resolved before pip is recent enough to honor the `python_requires`.\r\n\r\nThis environment needs to be updated to upgrade virtualenv before invoking tox... or maybe drop Python 2.7 support.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/223", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/223/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/223/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/223/events", "html_url": "https://github.com/cherrypy/cheroot/issues/223", "id": 491724385, "node_id": "MDU6SXNzdWU0OTE3MjQzODU=", "number": 223, "title": "Unable to resolve merge commit due to pre-commit checks", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272680, "node_id": "MDU6TGFiZWw3OTI3MjY4MA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/question", "name": "question", "color": "cc317c", "default": true, "description": "StackOverflow"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-10T14:52:04Z", "updated_at": "2019-09-10T15:47:03Z", "closed_at": "2019-09-10T15:47:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm trying to resolve a merge conflict locally, but when I do, the pre-commit checks reject my commit:\r\n\r\n```\r\ncheroot dcermak-master $ git merge master                                                                                                    \r\nAuto-merging setup.cfg\r\nAuto-merging CHANGES.rst\r\nCONFLICT (content): Merge conflict in CHANGES.rst\r\nAutomatic merge failed; fix conflicts and then commit the result.\r\ncheroot dcermak-master $ git mergetool                                                                                                       \r\nMerging:\r\nCHANGES.rst\r\n\r\nNormal merge conflict for 'CHANGES.rst':\r\n  {local}: modified file\r\n  {remote}: modified file\r\ncheroot dcermak-master $ git commit                                                                                                          \r\n[WARNING] Unexpected key(s) present on git://github.com/pre-commit/pre-commit-hooks => name-tests-test: include\r\n[INFO] Checking merge-conflict files only.\r\nAdd trailing commas..................................(no files to check)Skipped\r\nTrim Trailing Whitespace.................................................Passed\r\nFlake8...............................................(no files to check)Skipped\r\nCheck for merge conflicts................................................Failed\r\nhookid: check-merge-conflict\r\n\r\nMerge conflict string \"=======\r\n\" found in CHANGES.rst:240\r\nMerge conflict string \"=======\r\n\" found in CHANGES.rst:248\r\n\r\nFix double quoted strings............................(no files to check)Skipped\r\nFix End of Files.........................................................Passed\r\nTests should end in _test.py.........................(no files to check)Skipped\r\nDebug Statements (Python)............................(no files to check)Skipped\r\nCheck for added large files..............................................Passed\r\nCheck python ast.....................................(no files to check)Skipped\r\nCheck for byte-order marker..............................................Passed\r\nCheck for case conflicts.................................................Passed\r\nCheck JSON...........................................(no files to check)Skipped\r\nCheck for broken symlinks............................(no files to check)Skipped\r\nCheck Yaml...........................................(no files to check)Skipped\r\nDetect Private Key.......................................................Passed\r\nFix requirements.txt.................................(no files to check)Skipped\r\nVerifying PEP257 Compliance..........................(no files to check)Skipped\r\nTabs remover.............................................................Passed\r\nHTML img tag alt text checker........................(no files to check)Skipped\r\ncheroot dcermak-master $ git status                                                                                                          \r\nOn branch dcermak-master\r\nAll conflicts fixed but you are still merging.\r\n  (use \"git commit\" to conclude merge)\r\n\r\nChanges to be committed:\r\n        modified:   .gitignore\r\n        modified:   .travis.yml\r\n        modified:   CHANGES.rst\r\n        modified:   cheroot/_compat.py\r\n        modified:   cheroot/server.py\r\n        modified:   cheroot/test/conftest.py\r\n        modified:   cheroot/test/test_server.py\r\n        modified:   cheroot/test/test_ssl.py\r\n        modified:   setup.cfg\r\n\r\n```\r\n\r\nI suspect this finding reveals a bug in pre-commit, but I don't have time to shave that yak.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/222", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/222/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/222/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/222/events", "html_url": "https://github.com/cherrypy/cheroot/issues/222", "id": 488708863, "node_id": "MDU6SXNzdWU0ODg3MDg4NjM=", "number": 222, "title": "get_peer_creds failed in two tests for ppc64le", "user": {"login": "michelmno", "id": 7001040, "node_id": "MDQ6VXNlcjcwMDEwNDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/7001040?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michelmno", "html_url": "https://github.com/michelmno", "followers_url": "https://api.github.com/users/michelmno/followers", "following_url": "https://api.github.com/users/michelmno/following{/other_user}", "gists_url": "https://api.github.com/users/michelmno/gists{/gist_id}", "starred_url": "https://api.github.com/users/michelmno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michelmno/subscriptions", "organizations_url": "https://api.github.com/users/michelmno/orgs", "repos_url": "https://api.github.com/users/michelmno/repos", "events_url": "https://api.github.com/users/michelmno/events{/privacy}", "received_events_url": "https://api.github.com/users/michelmno/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 965607071, "node_id": "MDU6TGFiZWw5NjU2MDcwNzE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20missing", "name": "reproducer: missing", "color": "e23c36", "default": false, "description": "This PR or issue lacks code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2019-09-03T16:35:43Z", "updated_at": "2019-09-05T09:25:49Z", "closed_at": "2019-09-04T21:48:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\ncheroot has two failing tests with same reported error when executing on ppc64le.\r\n```\r\n[  171s] cheroot/test/test_server.py::test_peercreds_unix_sock FAILED             [ 88%]\r\n[  171s] cheroot/test/test_server.py::test_peercreds_unix_sock_with_lookup FAILED [ 89%]\r\n...\r\n[  177s] ___________________________ test_peercreds_unix_sock ___________________________\r\n...\r\n[  177s] E           HTTPError: 500 Server Error: Internal Server Error for url: http+unix://%2Ftmp%2Ftmp3WSNw9/peer_creds/ids\r\n...\r\n[  177s]   File \"/home/abuild/rpmbuild/BUILD/cheroot-6.5.5/cheroot/server.py\", line 1399, in get_peer_creds\r\n[  177s]     pid, uid, gid = struct.unpack(PEERCRED_STRUCT_DEF, peer_creds)\r\n[  177s] error: unpack requires a string argument of length 12\r\n[  177s] _____________________ test_peercreds_unix_sock_with_lookup _____________________\r\n...\r\n[  177s] E           HTTPError: 500 Server Error: Internal Server Error for url: http+unix://%2Ftmp%2FtmpVe2REm/peer_creds/texts\r\n...\r\n[  177s]   File \"/home/abuild/rpmbuild/BUILD/cheroot-6.5.5/cheroot/server.py\", line 1399, in get_peer_creds\r\n[  177s]     pid, uid, gid = struct.unpack(PEERCRED_STRUCT_DEF, peer_creds)\r\n[  177s] error: unpack requires a string argument of length 12\r\n[  177s] == 2 failed, 70 passed, 1 skipped, 30 deselected, 3 xfailed in 43.27 seconds ===\r\n[  177s] error: Bad exit status from /var/tmp/rpm-tmp.C8h9wf (%check)\r\n```\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nSteps to reproduce the behavior:\r\nThe error is reported in OBS tool while building python-cheroot package for openSUSE ppc64le at https://build.opensuse.org/package/live_build_log/devel:languages:python/python-cheroot/openSUSE_Factory_PowerPC/ppc64le\r\n\r\n\ud83d\udca1 **Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\n\r\n\ud83d\udccb **Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\n\r\n\r\n\ud83d\udccb **Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: 3.5.5\r\n- CherryPy version: X.X.X (if applicable)\r\n- Python version: 3.6.7\r\n- OS: openSUSE\r\n\r\n\r\n- Browser: [all | Chrome XX | Firefox XX | IE XX | Safari XX | Mobile Chrome XX | Android X.X Web Browser | iOS XX Safari | iOS XX UIWebView | iOS XX WKWebView ]\r\n\r\n\ud83d\udccb **Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n(e.g. detailed explanation, tracebacks, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n[python_cheroot_standard_ppc64le_201908231005.log](https://github.com/cherrypy/cheroot/files/3570473/python_cheroot_standard_ppc64le_201908231005.log)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/218", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/218/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/218/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/218/events", "html_url": "https://github.com/cherrypy/cheroot/issues/218", "id": 479152103, "node_id": "MDU6SXNzdWU0NzkxNTIxMDM=", "number": 218, "title": "cheroot/server.py:968: TypeError: not enough arguments for format string", "user": {"login": "alpire", "id": 111427, "node_id": "MDQ6VXNlcjExMTQyNw==", "avatar_url": "https://avatars0.githubusercontent.com/u/111427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alpire", "html_url": "https://github.com/alpire", "followers_url": "https://api.github.com/users/alpire/followers", "following_url": "https://api.github.com/users/alpire/following{/other_user}", "gists_url": "https://api.github.com/users/alpire/gists{/gist_id}", "starred_url": "https://api.github.com/users/alpire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alpire/subscriptions", "organizations_url": "https://api.github.com/users/alpire/orgs", "repos_url": "https://api.github.com/users/alpire/repos", "events_url": "https://api.github.com/users/alpire/events{/privacy}", "received_events_url": "https://api.github.com/users/alpire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 965606811, "node_id": "MDU6TGFiZWw5NjU2MDY4MTE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20present", "name": "reproducer: present", "color": "c2e0c6", "default": false, "description": "This PR or issue contains code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-09T20:21:38Z", "updated_at": "2019-08-12T11:28:04Z", "closed_at": "2019-08-12T11:28:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n\r\ncherrypy returns a 500 on some malformed HTTP request due to a missing argument in a format string in [server.read_request_line](https://github.com/cherrypy/cheroot/blob/master/cheroot/server.py#L968).\r\n\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nI believe that web servers should not return 500s in general. If you disagree, feel free to close this issue. Otherwise, I'll keep fuzzing cherrypy and reporting issues.\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nSteps to reproduce the behavior:\r\n1. Run a cherrypy server, like the following:\r\n```python\r\nimport cherrypy\r\n\r\nclass HelloWorld(object):\r\n    @cherrypy.expose\r\n    def index(self):\r\n        return \"Hello World!\"\r\n\r\ncherrypy.quickstart(HelloWorld())\r\n```\r\n\r\n2. Make request with `echo -ne \"GET / HTTP/1\\r\\n\\r\\n\" | nc localhost 8080`\r\n3. See the 500 response\r\n\r\n\r\n\r\n\ud83d\udca1 **Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\n\r\nI would expect a 4xx request, probably a 400\r\n\r\n\ud83d\udccb **Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\n\r\n```\r\n[09/Aug/2019:15:50:52] ENGINE TypeError('not enough arguments for format string')\r\nTraceback (most recent call last):\r\n  File \"/Users/apr/.pyenv/versions/3.7.2/lib/python3.7/site-packages/cheroot/server.py\", line 1263, in communicate\r\n    req.parse_request()\r\n  File \"/Users/apr/.pyenv/versions/3.7.2/lib/python3.7/site-packages/cheroot/server.py\", line 719, in parse_request\r\n    success = self.read_request_line()\r\n  File \"/Users/apr/.pyenv/versions/3.7.2/lib/python3.7/site-packages/cheroot/server.py\", line 968, in read_request_line\r\n    self.response_protocol = 'HTTP/%s.%s' % min(rp, sp)\r\nTypeError: not enough arguments for format string\r\n```\r\n\r\n\r\n\ud83d\udccb **Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: 6.5.5\r\n- CherryPy version: 18.1.2\r\n- Python version: 3.7.2\r\n- OS: MacOS Mojave\r\n- Browser: N/A\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/214", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/214/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/214/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/214/events", "html_url": "https://github.com/cherrypy/cheroot/issues/214", "id": 472940740, "node_id": "MDU6SXNzdWU0NzI5NDA3NDA=", "number": 214, "title": "Use an API token for uploading to PyPI from Travis CI instead of account creds", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}], "state": "closed", "locked": false, "assignee": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-07-25T15:46:34Z", "updated_at": "2019-10-11T19:44:18Z", "closed_at": "2019-10-11T19:44:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It is now possible to create an API token at https://pypi.org/manage/account/token/. Travis CI autoreleases should switch to that.\r\n\r\n\u2753 **I'm submitting a ...**\r\n- [ ] \ud83d\udc23 infra improvement\r\n\r\n\u2753 **Do you want to request a *feature* or report a *bug*?**\r\n\r\nN/A\r\n\r\n\u2753 **What is the current behavior?**\r\n\r\nAccount creds used.\r\n\r\n\ud83d\udca1 **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\n\r\nN/A\r\n\r\n\ud83d\udca1 **What is the expected behavior?**\r\n\r\nToken auth used for uploading to PyPI.\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nSecurity\r\n\r\n\ud83d\udccb **Please tell us about your environment:**\r\n\r\nN/A\r\n\r\n\ud83d\udccb **Other information** (e.g. detailed explanation, stacktraces, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n\r\nRef: https://discuss.python.org/t/pypi-security-work-multifactor-auth-progress-help-needed/1042/31\r\n\r\nUse `@token` for a username and the token itself for a password when using Twine: https://github.com/pypa/warehouse/issues/994#issuecomment-512634222", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/203", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/203/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/203/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/203/events", "html_url": "https://github.com/cherrypy/cheroot/issues/203", "id": 445756427, "node_id": "MDU6SXNzdWU0NDU3NTY0Mjc=", "number": 203, "title": "cheroot on python 3.x is broken in MacPorts due to backports.functools.lru_cache missing", "user": {"login": "mrdomino", "id": 23019, "node_id": "MDQ6VXNlcjIzMDE5", "avatar_url": "https://avatars3.githubusercontent.com/u/23019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrdomino", "html_url": "https://github.com/mrdomino", "followers_url": "https://api.github.com/users/mrdomino/followers", "following_url": "https://api.github.com/users/mrdomino/following{/other_user}", "gists_url": "https://api.github.com/users/mrdomino/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrdomino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrdomino/subscriptions", "organizations_url": "https://api.github.com/users/mrdomino/orgs", "repos_url": "https://api.github.com/users/mrdomino/repos", "events_url": "https://api.github.com/users/mrdomino/events{/privacy}", "received_events_url": "https://api.github.com/users/mrdomino/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-18T21:35:31Z", "updated_at": "2019-05-19T18:41:13Z", "closed_at": "2019-05-19T18:41:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [X] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n\r\ncheroot on Python 3.x seems to be broken in MacPorts at the moment due to backports.functools_lru_cache only being packaged for Python 2.7 there. It seems based on inspection that their current general approach to backports is to only package them for versions where the functionality is missing. (FYI, I'm not connected with MacPorts; I just use it.)\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nI'd hope to be able to install cheroot from MacPorts.\r\n\r\n\ud83d\udca1 **To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Run `port install py37-cheroot`\r\n2. Create `foo.py` with contents:\r\n```py\r\n__requires__ = 'cheroot'\r\nfrom pkg_resources import load_entry_point\r\n```\r\n3. Run `python foo.py`\r\n4. See error\r\n\r\n(I first encountered this issue with [fava](https://github.com/beancount/fava); the above is an attempt to minimize the failing case. Importing cheroot directly from the console does not have this issue.)\r\n\r\n\ud83d\udca1 **Expected behavior**\r\n\r\nThe script completes successfully.\r\n\r\n\ud83d\udccb **Details**\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"foo.py\", line 4, in <module>\r\n    from pkg_resources import load_entry_point\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 3241, in <module>\r\n    @_call_aside\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 3225, in _call_aside\r\n    f(*args, **kwargs)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 3254, in _initialize_master_working_set\r\n    working_set = WorkingSet._build_master()\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 583, in _build_master\r\n    ws.require(__requires__)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 900, in require\r\n    needed = self.resolve(parse_requirements(requirements))\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 786, in resolve\r\n    raise DistributionNotFound(req, requirers)\r\npkg_resources.DistributionNotFound: The 'backports.functools_lru_cache' distribution was not found and is required by cheroot\r\n```\r\n\r\n\ud83d\udccb **Environment**\r\n- Cheroot version: 6.5.4\r\n- Python version: 3.7.3\r\n- OS: OSX 10.14.5, MacPorts 2.5.4\r\n\r\n\ud83d\udccb **Additional context**\r\n\r\nIt seems like the options for fixing this are:\r\n1. cheroot makes its backports.functools.lru_cache dependency conditional on Python 2.7.\r\n2. MacPorts provides py-backports and py-backports-functools_lru_cache for Python 3.x, and makes py-cheroot depend on them.\r\n3. MacPorts adds a patch in its py-cheroot port to simulate option 1.\r\n\r\nI'd imagined that option 1 would be most straightforward, but then I found #181, and it seems like there are some disadvantages to that approach that I wasn't aware of. So I'm mentioning this to see which approach we want to take.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/202", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/202/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/202/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/202/events", "html_url": "https://github.com/cherrypy/cheroot/issues/202", "id": 445716880, "node_id": "MDU6SXNzdWU0NDU3MTY4ODA=", "number": 202, "title": "Question related to #91", "user": {"login": "mar10", "id": 41663, "node_id": "MDQ6VXNlcjQxNjYz", "avatar_url": "https://avatars3.githubusercontent.com/u/41663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mar10", "html_url": "https://github.com/mar10", "followers_url": "https://api.github.com/users/mar10/followers", "following_url": "https://api.github.com/users/mar10/following{/other_user}", "gists_url": "https://api.github.com/users/mar10/gists{/gist_id}", "starred_url": "https://api.github.com/users/mar10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mar10/subscriptions", "organizations_url": "https://api.github.com/users/mar10/orgs", "repos_url": "https://api.github.com/users/mar10/repos", "events_url": "https://api.github.com/users/mar10/events{/privacy}", "received_events_url": "https://api.github.com/users/mar10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272680, "node_id": "MDU6TGFiZWw3OTI3MjY4MA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/question", "name": "question", "color": "cc317c", "default": true, "description": "StackOverflow"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-05-18T13:40:31Z", "updated_at": "2019-10-12T11:04:18Z", "closed_at": "2019-10-12T11:04:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, \r\n\r\nThis is a question related to #91. I did not want to mess up the discussion there:\r\n\r\nI don't know, if this helps, but I experience a situation where I run my WebDAV server on top of Cheroot.\r\nBenchmarks show that it is very slow compared to using Gevent. \r\nThis only occurs when uploading a lot of files using File Explorer. macOS Finder behaves way better, so it is also related to the request sequence used (see mar10/wsgidav#149).\r\nI am not sure what exactly is happening there, but increasing the thread count helps.\r\nWhen it's slow, the console output looks like timeouts every few seconds, so I figured it may be addressed by this issue\r\nI tried with `pip install git+https://github.com/cherrypy/cheroot.git@feature/91-non-blocking-sockets` and setting back to 10 threads, which I think is the default. but the performance did not increase compared to Gevent.\r\nI you think this is related to issue 91, I can send more debug info or run test versions here.\r\nOtherwise, simply close this...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/200", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/200/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/200/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/200/events", "html_url": "https://github.com/cherrypy/cheroot/issues/200", "id": 443888833, "node_id": "MDU6SXNzdWU0NDM4ODg4MzM=", "number": 200, "title": "test_tls_client_auth failing (1-False-localhost-builtin, 1-False-localhost-pyopenssl, 2-False-localhost-pyopenssl and 2-False-localhost-builtin) with OpenSSL 1.1.1", "user": {"login": "mcepl", "id": 198999, "node_id": "MDQ6VXNlcjE5ODk5OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/198999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcepl", "html_url": "https://github.com/mcepl", "followers_url": "https://api.github.com/users/mcepl/followers", "following_url": "https://api.github.com/users/mcepl/following{/other_user}", "gists_url": "https://api.github.com/users/mcepl/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcepl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcepl/subscriptions", "organizations_url": "https://api.github.com/users/mcepl/orgs", "repos_url": "https://api.github.com/users/mcepl/repos", "events_url": "https://api.github.com/users/mcepl/events{/privacy}", "received_events_url": "https://api.github.com/users/mcepl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272679, "node_id": "MDU6TGFiZWw3OTI3MjY3OQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": "This is irrelevant"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-14T12:33:06Z", "updated_at": "2019-05-16T14:39:08Z", "closed_at": "2019-05-16T14:39:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\nMultiple tests are failing on openSUSE/Tumbleweed with new OpenSSL 1.1.1:\r\n```\r\n[   87s] =================================== FAILURES ===================================\r\n[   87s] _______________ test_tls_client_auth[1-False-localhost-builtin] ________________\r\n[   87s] \r\n[   87s] mocker = <pytest_mock.MockFixture object at 0x7f8124c1fd50>\r\n[   87s] tls_http_server = <generator object start_srv at 0x7f811f46b9b0>\r\n[   87s] adapter_type = 'builtin', ca = <trustme.CA object at 0x7f8124c12d10>\r\n[   87s] tls_certificate = <trustme.LeafCert object at 0x7f8124c09250>\r\n[   87s] tls_certificate_chain_pem_path = '/tmp/tmpvO4LqR.pem'\r\n[   87s] tls_certificate_private_key_pem_path = '/tmp/tmpV0oZYc.pem'\r\n[   87s] tls_ca_certificate_pem_path = '/tmp/tmpl6z2dm.pem', is_trusted_cert = False\r\n[   87s] tls_client_identity = 'localhost', tls_verify_mode = 1\r\n[   87s] \r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'adapter_type',\r\n[   87s]         (\r\n[   87s]             'builtin',\r\n[   87s]             'pyopenssl',\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'is_trusted_cert,tls_client_identity',\r\n[   87s]         (\r\n[   87s]             (True, 'localhost'), (True, '127.0.0.1'),\r\n[   87s]             (True, '*.localhost'), (True, 'not_localhost'),\r\n[   87s]             (False, 'localhost'),\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'tls_verify_mode',\r\n[   87s]         (\r\n[   87s]             ssl.CERT_NONE,  # server shouldn't validate client cert\r\n[   87s]             ssl.CERT_OPTIONAL,  # same as CERT_REQUIRED in client mode, don't use\r\n[   87s]             ssl.CERT_REQUIRED,  # server should validate if client cert CA is OK\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     def test_tls_client_auth(\r\n[   87s]         # FIXME: remove twisted logic, separate tests\r\n[   87s]         mocker,\r\n[   87s]         tls_http_server, adapter_type,\r\n[   87s]         ca,\r\n[   87s]         tls_certificate,\r\n[   87s]         tls_certificate_chain_pem_path,\r\n[   87s]         tls_certificate_private_key_pem_path,\r\n[   87s]         tls_ca_certificate_pem_path,\r\n[   87s]         is_trusted_cert, tls_client_identity,\r\n[   87s]         tls_verify_mode,\r\n[   87s]     ):\r\n[   87s]         \"\"\"Verify that client TLS certificate auth works correctly.\"\"\"\r\n[   87s]         test_cert_rejection = (\r\n[   87s]             tls_verify_mode != ssl.CERT_NONE\r\n[   87s]             and not is_trusted_cert\r\n[   87s]         )\r\n[   87s]         interface, _host, port = _get_conn_data(ANY_INTERFACE_IPV4)\r\n[   87s]     \r\n[   87s]         client_cert_root_ca = ca if is_trusted_cert else trustme.CA()\r\n[   87s]         with mocker.mock_module.patch(\r\n[   87s]             'idna.core.ulabel',\r\n[   87s]             return_value=ntob(tls_client_identity),\r\n[   87s]         ):\r\n[   87s]             client_cert = client_cert_root_ca.issue_server_cert(\r\n[   87s]                 # FIXME: change to issue_cert once new trustme is out\r\n[   87s]                 ntou(tls_client_identity),\r\n[   87s]             )\r\n[   87s]             del client_cert_root_ca\r\n[   87s]     \r\n[   87s]         with client_cert.private_key_and_cert_chain_pem.tempfile() as cl_pem:\r\n[   87s]             tls_adapter_cls = get_ssl_adapter_class(name=adapter_type)\r\n[   87s]             tls_adapter = tls_adapter_cls(\r\n[   87s]                 tls_certificate_chain_pem_path,\r\n[   87s]                 tls_certificate_private_key_pem_path,\r\n[   87s]             )\r\n[   87s]             if adapter_type == 'pyopenssl':\r\n[   87s]                 tls_adapter.context = tls_adapter.get_context()\r\n[   87s]                 tls_adapter.context.set_verify(\r\n[   87s]                     _stdlib_to_openssl_verify[tls_verify_mode],\r\n[   87s]                     lambda conn, cert, errno, depth, preverify_ok: preverify_ok,\r\n[   87s]                 )\r\n[   87s]             else:\r\n[   87s]                 tls_adapter.context.verify_mode = tls_verify_mode\r\n[   87s]     \r\n[   87s]             ca.configure_trust(tls_adapter.context)\r\n[   87s]             tls_certificate.configure_cert(tls_adapter.context)\r\n[   87s]     \r\n[   87s]             tlshttpserver = tls_http_server.send(\r\n[   87s]                 (\r\n[   87s]                     (interface, port),\r\n[   87s]                     tls_adapter,\r\n[   87s]                 ),\r\n[   87s]             )\r\n[   87s]     \r\n[   87s]             interface, _host, port = _get_conn_data(tlshttpserver.bind_addr)\r\n[   87s]     \r\n[   87s]             make_https_request = functools.partial(\r\n[   87s]                 requests.get,\r\n[   87s]                 'https://' + interface + ':' + str(port) + '/',\r\n[   87s]     \r\n[   87s]                 # Server TLS certificate verification:\r\n[   87s]                 verify=tls_ca_certificate_pem_path,\r\n[   87s]     \r\n[   87s]                 # Client TLS certificate verification:\r\n[   87s]                 cert=cl_pem,\r\n[   87s]             )\r\n[   87s]     \r\n[   87s]             if not test_cert_rejection:\r\n[   87s]                 resp = make_https_request()\r\n[   87s]                 is_req_successful = resp.status_code == 200\r\n[   87s]                 if (\r\n[   87s]                         not is_req_successful\r\n[   87s]                         and IS_PYOPENSSL_SSL_VERSION_1_0\r\n[   87s]                         and adapter_type == 'builtin'\r\n[   87s]                         and tls_verify_mode == ssl.CERT_REQUIRED\r\n[   87s]                         and tls_client_identity == 'localhost'\r\n[   87s]                         and is_trusted_cert\r\n[   87s]                 ):\r\n[   87s]                     pytest.xfail(\r\n[   87s]                         'OpenSSL 1.0 has problems with verifying client certs',\r\n[   87s]                     )\r\n[   87s]                 assert is_req_successful\r\n[   87s]                 assert resp.text == 'Hello world!'\r\n[   87s]                 return\r\n[   87s]     \r\n[   87s]             with pytest.raises(requests.exceptions.SSLError) as ssl_err:\r\n[   87s] >               make_https_request()\r\n[   87s] \r\n[   87s] cheroot/test/test_ssl.py:316: \r\n[   87s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   87s] /usr/lib/python2.7/site-packages/requests/api.py:75: in get\r\n[   87s]     return request('get', url, params=params, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/api.py:60: in request\r\n[   87s]     return session.request(method=method, url=url, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/sessions.py:533: in request\r\n[   87s]     resp = self.send(prep, **send_kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/sessions.py:646: in send\r\n[   87s]     r = adapter.send(request, **kwargs)\r\n[   87s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   87s] \r\n[   87s] self = <requests.adapters.HTTPAdapter object at 0x7f8124b90a90>\r\n[   87s] request = <PreparedRequest [GET]>, stream = False\r\n[   87s] timeout = <urllib3.util.timeout.Timeout object at 0x7f8124bbfd10>\r\n[   87s] verify = '/tmp/tmpl6z2dm.pem', cert = '/tmp/tmpF4asyA.pem'\r\n[   87s] proxies = OrderedDict()\r\n[   87s] \r\n[   87s]     def send(self, request, stream=False, timeout=None, verify=True, cert=None, proxies=None):\r\n[   87s]         \"\"\"Sends PreparedRequest object. Returns Response object.\r\n[   87s]     \r\n[   87s]         :param request: The :class:`PreparedRequest <PreparedRequest>` being sent.\r\n[   87s]         :param stream: (optional) Whether to stream the request content.\r\n[   87s]         :param timeout: (optional) How long to wait for the server to send\r\n[   87s]             data before giving up, as a float, or a :ref:`(connect timeout,\r\n[   87s]             read timeout) <timeouts>` tuple.\r\n[   87s]         :type timeout: float or tuple or urllib3 Timeout object\r\n[   87s]         :param verify: (optional) Either a boolean, in which case it controls whether\r\n[   87s]             we verify the server's TLS certificate, or a string, in which case it\r\n[   87s]             must be a path to a CA bundle to use\r\n[   87s]         :param cert: (optional) Any user-provided SSL certificate to be trusted.\r\n[   87s]         :param proxies: (optional) The proxies dictionary to apply to the request.\r\n[   87s]         :rtype: requests.Response\r\n[   87s]         \"\"\"\r\n[   87s]     \r\n[   87s]         try:\r\n[   87s]             conn = self.get_connection(request.url, proxies)\r\n[   87s]         except LocationValueError as e:\r\n[   87s]             raise InvalidURL(e, request=request)\r\n[   87s]     \r\n[   87s]         self.cert_verify(conn, request.url, verify, cert)\r\n[   87s]         url = self.request_url(request, proxies)\r\n[   87s]         self.add_headers(request, stream=stream, timeout=timeout, verify=verify, cert=cert, proxies=proxies)\r\n[   87s]     \r\n[   87s]         chunked = not (request.body is None or 'Content-Length' in request.headers)\r\n[   87s]     \r\n[   87s]         if isinstance(timeout, tuple):\r\n[   87s]             try:\r\n[   87s]                 connect, read = timeout\r\n[   87s]                 timeout = TimeoutSauce(connect=connect, read=read)\r\n[   87s]             except ValueError as e:\r\n[   87s]                 # this may raise a string formatting error.\r\n[   87s]                 err = (\"Invalid timeout {}. Pass a (connect, read) \"\r\n[   87s]                        \"timeout tuple, or a single float to set \"\r\n[   87s]                        \"both timeouts to the same value\".format(timeout))\r\n[   87s]                 raise ValueError(err)\r\n[   87s]         elif isinstance(timeout, TimeoutSauce):\r\n[   87s]             pass\r\n[   87s]         else:\r\n[   87s]             timeout = TimeoutSauce(connect=timeout, read=timeout)\r\n[   87s]     \r\n[   87s]         try:\r\n[   87s]             if not chunked:\r\n[   87s]                 resp = conn.urlopen(\r\n[   87s]                     method=request.method,\r\n[   87s]                     url=url,\r\n[   87s]                     body=request.body,\r\n[   87s]                     headers=request.headers,\r\n[   87s]                     redirect=False,\r\n[   87s]                     assert_same_host=False,\r\n[   87s]                     preload_content=False,\r\n[   87s]                     decode_content=False,\r\n[   87s]                     retries=self.max_retries,\r\n[   87s]                     timeout=timeout\r\n[   87s]                 )\r\n[   87s]     \r\n[   87s]             # Send the request.\r\n[   87s]             else:\r\n[   87s]                 if hasattr(conn, 'proxy_pool'):\r\n[   87s]                     conn = conn.proxy_pool\r\n[   87s]     \r\n[   87s]                 low_conn = conn._get_conn(timeout=DEFAULT_POOL_TIMEOUT)\r\n[   87s]     \r\n[   87s]                 try:\r\n[   87s]                     low_conn.putrequest(request.method,\r\n[   87s]                                         url,\r\n[   87s]                                         skip_accept_encoding=True)\r\n[   87s]     \r\n[   87s]                     for header, value in request.headers.items():\r\n[   87s]                         low_conn.putheader(header, value)\r\n[   87s]     \r\n[   87s]                     low_conn.endheaders()\r\n[   87s]     \r\n[   87s]                     for i in request.body:\r\n[   87s]                         low_conn.send(hex(len(i))[2:].encode('utf-8'))\r\n[   87s]                         low_conn.send(b'\\r\\n')\r\n[   87s]                         low_conn.send(i)\r\n[   87s]                         low_conn.send(b'\\r\\n')\r\n[   87s]                     low_conn.send(b'0\\r\\n\\r\\n')\r\n[   87s]     \r\n[   87s]                     # Receive the response from the server\r\n[   87s]                     try:\r\n[   87s]                         # For Python 2.7, use buffering of HTTP responses\r\n[   87s]                         r = low_conn.getresponse(buffering=True)\r\n[   87s]                     except TypeError:\r\n[   87s]                         # For compatibility with Python 3.3+\r\n[   87s]                         r = low_conn.getresponse()\r\n[   87s]     \r\n[   87s]                     resp = HTTPResponse.from_httplib(\r\n[   87s]                         r,\r\n[   87s]                         pool=conn,\r\n[   87s]                         connection=low_conn,\r\n[   87s]                         preload_content=False,\r\n[   87s]                         decode_content=False\r\n[   87s]                     )\r\n[   87s]                 except:\r\n[   87s]                     # If we hit any problems here, clean up the connection.\r\n[   87s]                     # Then, reraise so that we can handle the actual exception.\r\n[   87s]                     low_conn.close()\r\n[   87s]                     raise\r\n[   87s]     \r\n[   87s]         except (ProtocolError, socket.error) as err:\r\n[   87s] >           raise ConnectionError(err, request=request)\r\n[   87s] E           ConnectionError: ('Connection aborted.', error(\"(104, 'ECONNRESET')\",))\r\n[   87s] \r\n[   87s] /usr/lib/python2.7/site-packages/requests/adapters.py:498: ConnectionError\r\n[   87s] ______________ test_tls_client_auth[1-False-localhost-pyopenssl] _______________\r\n[   87s] \r\n[   87s] mocker = <pytest_mock.MockFixture object at 0x7f8124cf6790>\r\n[   87s] tls_http_server = <generator object start_srv at 0x7f811f46b230>\r\n[   87s] adapter_type = 'pyopenssl', ca = <trustme.CA object at 0x7f811f34b790>\r\n[   87s] tls_certificate = <trustme.LeafCert object at 0x7f8124b70a10>\r\n[   87s] tls_certificate_chain_pem_path = '/tmp/tmpzlMkUm.pem'\r\n[   87s] tls_certificate_private_key_pem_path = '/tmp/tmpHIQaCY.pem'\r\n[   87s] tls_ca_certificate_pem_path = '/tmp/tmpt3y3JK.pem', is_trusted_cert = False\r\n[   87s] tls_client_identity = 'localhost', tls_verify_mode = 1\r\n[   87s] \r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'adapter_type',\r\n[   87s]         (\r\n[   87s]             'builtin',\r\n[   87s]             'pyopenssl',\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'is_trusted_cert,tls_client_identity',\r\n[   87s]         (\r\n[   87s]             (True, 'localhost'), (True, '127.0.0.1'),\r\n[   87s]             (True, '*.localhost'), (True, 'not_localhost'),\r\n[   87s]             (False, 'localhost'),\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'tls_verify_mode',\r\n[   87s]         (\r\n[   87s]             ssl.CERT_NONE,  # server shouldn't validate client cert\r\n[   87s]             ssl.CERT_OPTIONAL,  # same as CERT_REQUIRED in client mode, don't use\r\n[   87s]             ssl.CERT_REQUIRED,  # server should validate if client cert CA is OK\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     def test_tls_client_auth(\r\n[   87s]         # FIXME: remove twisted logic, separate tests\r\n[   87s]         mocker,\r\n[   87s]         tls_http_server, adapter_type,\r\n[   87s]         ca,\r\n[   87s]         tls_certificate,\r\n[   87s]         tls_certificate_chain_pem_path,\r\n[   87s]         tls_certificate_private_key_pem_path,\r\n[   87s]         tls_ca_certificate_pem_path,\r\n[   87s]         is_trusted_cert, tls_client_identity,\r\n[   87s]         tls_verify_mode,\r\n[   87s]     ):\r\n[   87s]         \"\"\"Verify that client TLS certificate auth works correctly.\"\"\"\r\n[   87s]         test_cert_rejection = (\r\n[   87s]             tls_verify_mode != ssl.CERT_NONE\r\n[   87s]             and not is_trusted_cert\r\n[   87s]         )\r\n[   87s]         interface, _host, port = _get_conn_data(ANY_INTERFACE_IPV4)\r\n[   87s]     \r\n[   87s]         client_cert_root_ca = ca if is_trusted_cert else trustme.CA()\r\n[   87s]         with mocker.mock_module.patch(\r\n[   87s]             'idna.core.ulabel',\r\n[   87s]             return_value=ntob(tls_client_identity),\r\n[   87s]         ):\r\n[   87s]             client_cert = client_cert_root_ca.issue_server_cert(\r\n[   87s]                 # FIXME: change to issue_cert once new trustme is out\r\n[   87s]                 ntou(tls_client_identity),\r\n[   87s]             )\r\n[   87s]             del client_cert_root_ca\r\n[   87s]     \r\n[   87s]         with client_cert.private_key_and_cert_chain_pem.tempfile() as cl_pem:\r\n[   87s]             tls_adapter_cls = get_ssl_adapter_class(name=adapter_type)\r\n[   87s]             tls_adapter = tls_adapter_cls(\r\n[   87s]                 tls_certificate_chain_pem_path,\r\n[   87s]                 tls_certificate_private_key_pem_path,\r\n[   87s]             )\r\n[   87s]             if adapter_type == 'pyopenssl':\r\n[   87s]                 tls_adapter.context = tls_adapter.get_context()\r\n[   87s]                 tls_adapter.context.set_verify(\r\n[   87s]                     _stdlib_to_openssl_verify[tls_verify_mode],\r\n[   87s]                     lambda conn, cert, errno, depth, preverify_ok: preverify_ok,\r\n[   87s]                 )\r\n[   87s]             else:\r\n[   87s]                 tls_adapter.context.verify_mode = tls_verify_mode\r\n[   87s]     \r\n[   87s]             ca.configure_trust(tls_adapter.context)\r\n[   87s]             tls_certificate.configure_cert(tls_adapter.context)\r\n[   87s]     \r\n[   87s]             tlshttpserver = tls_http_server.send(\r\n[   87s]                 (\r\n[   87s]                     (interface, port),\r\n[   87s]                     tls_adapter,\r\n[   87s]                 ),\r\n[   87s]             )\r\n[   87s]     \r\n[   87s]             interface, _host, port = _get_conn_data(tlshttpserver.bind_addr)\r\n[   87s]     \r\n[   87s]             make_https_request = functools.partial(\r\n[   87s]                 requests.get,\r\n[   87s]                 'https://' + interface + ':' + str(port) + '/',\r\n[   87s]     \r\n[   87s]                 # Server TLS certificate verification:\r\n[   87s]                 verify=tls_ca_certificate_pem_path,\r\n[   87s]     \r\n[   87s]                 # Client TLS certificate verification:\r\n[   87s]                 cert=cl_pem,\r\n[   87s]             )\r\n[   87s]     \r\n[   87s]             if not test_cert_rejection:\r\n[   87s]                 resp = make_https_request()\r\n[   87s]                 is_req_successful = resp.status_code == 200\r\n[   87s]                 if (\r\n[   87s]                         not is_req_successful\r\n[   87s]                         and IS_PYOPENSSL_SSL_VERSION_1_0\r\n[   87s]                         and adapter_type == 'builtin'\r\n[   87s]                         and tls_verify_mode == ssl.CERT_REQUIRED\r\n[   87s]                         and tls_client_identity == 'localhost'\r\n[   87s]                         and is_trusted_cert\r\n[   87s]                 ):\r\n[   87s]                     pytest.xfail(\r\n[   87s]                         'OpenSSL 1.0 has problems with verifying client certs',\r\n[   87s]                     )\r\n[   87s]                 assert is_req_successful\r\n[   87s]                 assert resp.text == 'Hello world!'\r\n[   87s]                 return\r\n[   87s]     \r\n[   87s]             with pytest.raises(requests.exceptions.SSLError) as ssl_err:\r\n[   87s] >               make_https_request()\r\n[   87s] \r\n[   87s] cheroot/test/test_ssl.py:316: \r\n[   87s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   87s] /usr/lib/python2.7/site-packages/requests/api.py:75: in get\r\n[   87s]     return request('get', url, params=params, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/api.py:60: in request\r\n[   87s]     return session.request(method=method, url=url, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/sessions.py:533: in request\r\n[   87s]     resp = self.send(prep, **send_kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/sessions.py:646: in send\r\n[   87s]     r = adapter.send(request, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/adapters.py:449: in send\r\n[   87s]     timeout=timeout\r\n[   87s] /usr/lib/python2.7/site-packages/urllib3/connectionpool.py:600: in urlopen\r\n[   87s]     chunked=chunked)\r\n[   87s] /usr/lib/python2.7/site-packages/urllib3/connectionpool.py:377: in _make_request\r\n[   87s]     httplib_response = conn.getresponse(buffering=True)\r\n[   87s] /usr/lib64/python2.7/httplib.py:1121: in getresponse\r\n[   87s]     response.begin()\r\n[   87s] /usr/lib64/python2.7/httplib.py:438: in begin\r\n[   87s]     version, status, reason = self._read_status()\r\n[   87s] /usr/lib64/python2.7/httplib.py:394: in _read_status\r\n[   87s]     line = self.fp.readline(_MAXLINE + 1)\r\n[   87s] /usr/lib64/python2.7/socket.py:480: in readline\r\n[   87s]     data = self._sock.recv(self._rbufsize)\r\n[   87s] /usr/lib/python2.7/site-packages/urllib3/contrib/pyopenssl.py:276: in recv\r\n[   87s]     data = self.connection.recv(*args, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/OpenSSL/SSL.py:1791: in recv\r\n[   87s]     self._raise_ssl_error(self._ssl, result)\r\n[   87s] /usr/lib/python2.7/site-packages/OpenSSL/SSL.py:1647: in _raise_ssl_error\r\n[   87s]     _raise_current_error()\r\n[   87s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   87s] \r\n[   87s] exception_type = <class 'OpenSSL.SSL.Error'>\r\n[   87s] \r\n[   87s]     def exception_from_error_queue(exception_type):\r\n[   87s]         \"\"\"\r\n[   87s]         Convert an OpenSSL library failure into a Python exception.\r\n[   87s]     \r\n[   87s]         When a call to the native OpenSSL library fails, this is usually signalled\r\n[   87s]         by the return value, and an error code is stored in an error queue\r\n[   87s]         associated with the current thread. The err library provides functions to\r\n[   87s]         obtain these error codes and textual error messages.\r\n[   87s]         \"\"\"\r\n[   87s]         errors = []\r\n[   87s]     \r\n[   87s]         while True:\r\n[   87s]             error = lib.ERR_get_error()\r\n[   87s]             if error == 0:\r\n[   87s]                 break\r\n[   87s]             errors.append((\r\n[   87s]                 text(lib.ERR_lib_error_string(error)),\r\n[   87s]                 text(lib.ERR_func_error_string(error)),\r\n[   87s]                 text(lib.ERR_reason_error_string(error))))\r\n[   87s]     \r\n[   87s] >       raise exception_type(errors)\r\n[   87s] E       Error: [('SSL routines', 'ssl3_read_bytes', 'tlsv1 alert unknown ca')]\r\n[   87s] \r\n[   87s] /usr/lib/python2.7/site-packages/OpenSSL/_util.py:54: Error\r\n[   87s] _______________ test_tls_client_auth[2-False-localhost-builtin] ________________\r\n[   87s] \r\n[   87s] mocker = <pytest_mock.MockFixture object at 0x7f8124c12a50>\r\n[   87s] tls_http_server = <generator object start_srv at 0x7f8120b5c230>\r\n[   87s] adapter_type = 'builtin', ca = <trustme.CA object at 0x7f8120768650>\r\n[   87s] tls_certificate = <trustme.LeafCert object at 0x7f8124baa6d0>\r\n[   87s] tls_certificate_chain_pem_path = '/tmp/tmppvmQk5.pem'\r\n[   87s] tls_certificate_private_key_pem_path = '/tmp/tmp0C1rNu.pem'\r\n[   87s] tls_ca_certificate_pem_path = '/tmp/tmphCe4LF.pem', is_trusted_cert = False\r\n[   87s] tls_client_identity = 'localhost', tls_verify_mode = 2\r\n[   87s] \r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'adapter_type',\r\n[   87s]         (\r\n[   87s]             'builtin',\r\n[   87s]             'pyopenssl',\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'is_trusted_cert,tls_client_identity',\r\n[   87s]         (\r\n[   87s]             (True, 'localhost'), (True, '127.0.0.1'),\r\n[   87s]             (True, '*.localhost'), (True, 'not_localhost'),\r\n[   87s]             (False, 'localhost'),\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'tls_verify_mode',\r\n[   87s]         (\r\n[   87s]             ssl.CERT_NONE,  # server shouldn't validate client cert\r\n[   87s]             ssl.CERT_OPTIONAL,  # same as CERT_REQUIRED in client mode, don't use\r\n[   87s]             ssl.CERT_REQUIRED,  # server should validate if client cert CA is OK\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     def test_tls_client_auth(\r\n[   87s]         # FIXME: remove twisted logic, separate tests\r\n[   87s]         mocker,\r\n[   87s]         tls_http_server, adapter_type,\r\n[   87s]         ca,\r\n[   87s]         tls_certificate,\r\n[   87s]         tls_certificate_chain_pem_path,\r\n[   87s]         tls_certificate_private_key_pem_path,\r\n[   87s]         tls_ca_certificate_pem_path,\r\n[   87s]         is_trusted_cert, tls_client_identity,\r\n[   87s]         tls_verify_mode,\r\n[   87s]     ):\r\n[   87s]         \"\"\"Verify that client TLS certificate auth works correctly.\"\"\"\r\n[   87s]         test_cert_rejection = (\r\n[   87s]             tls_verify_mode != ssl.CERT_NONE\r\n[   87s]             and not is_trusted_cert\r\n[   87s]         )\r\n[   87s]         interface, _host, port = _get_conn_data(ANY_INTERFACE_IPV4)\r\n[   87s]     \r\n[   87s]         client_cert_root_ca = ca if is_trusted_cert else trustme.CA()\r\n[   87s]         with mocker.mock_module.patch(\r\n[   87s]             'idna.core.ulabel',\r\n[   87s]             return_value=ntob(tls_client_identity),\r\n[   87s]         ):\r\n[   87s]             client_cert = client_cert_root_ca.issue_server_cert(\r\n[   87s]                 # FIXME: change to issue_cert once new trustme is out\r\n[   87s]                 ntou(tls_client_identity),\r\n[   87s]             )\r\n[   87s]             del client_cert_root_ca\r\n[   87s]     \r\n[   87s]         with client_cert.private_key_and_cert_chain_pem.tempfile() as cl_pem:\r\n[   87s]             tls_adapter_cls = get_ssl_adapter_class(name=adapter_type)\r\n[   87s]             tls_adapter = tls_adapter_cls(\r\n[   87s]                 tls_certificate_chain_pem_path,\r\n[   87s]                 tls_certificate_private_key_pem_path,\r\n[   87s]             )\r\n[   87s]             if adapter_type == 'pyopenssl':\r\n[   87s]                 tls_adapter.context = tls_adapter.get_context()\r\n[   87s]                 tls_adapter.context.set_verify(\r\n[   87s]                     _stdlib_to_openssl_verify[tls_verify_mode],\r\n[   87s]                     lambda conn, cert, errno, depth, preverify_ok: preverify_ok,\r\n[   87s]                 )\r\n[   87s]             else:\r\n[   87s]                 tls_adapter.context.verify_mode = tls_verify_mode\r\n[   87s]     \r\n[   87s]             ca.configure_trust(tls_adapter.context)\r\n[   87s]             tls_certificate.configure_cert(tls_adapter.context)\r\n[   87s]     \r\n[   87s]             tlshttpserver = tls_http_server.send(\r\n[   87s]                 (\r\n[   87s]                     (interface, port),\r\n[   87s]                     tls_adapter,\r\n[   87s]                 ),\r\n[   87s]             )\r\n[   87s]     \r\n[   87s]             interface, _host, port = _get_conn_data(tlshttpserver.bind_addr)\r\n[   87s]     \r\n[   87s]             make_https_request = functools.partial(\r\n[   87s]                 requests.get,\r\n[   87s]                 'https://' + interface + ':' + str(port) + '/',\r\n[   87s]     \r\n[   87s]                 # Server TLS certificate verification:\r\n[   87s]                 verify=tls_ca_certificate_pem_path,\r\n[   87s]     \r\n[   87s]                 # Client TLS certificate verification:\r\n[   87s]                 cert=cl_pem,\r\n[   87s]             )\r\n[   87s]     \r\n[   87s]             if not test_cert_rejection:\r\n[   87s]                 resp = make_https_request()\r\n[   87s]                 is_req_successful = resp.status_code == 200\r\n[   87s]                 if (\r\n[   87s]                         not is_req_successful\r\n[   87s]                         and IS_PYOPENSSL_SSL_VERSION_1_0\r\n[   87s]                         and adapter_type == 'builtin'\r\n[   87s]                         and tls_verify_mode == ssl.CERT_REQUIRED\r\n[   87s]                         and tls_client_identity == 'localhost'\r\n[   87s]                         and is_trusted_cert\r\n[   87s]                 ):\r\n[   87s]                     pytest.xfail(\r\n[   87s]                         'OpenSSL 1.0 has problems with verifying client certs',\r\n[   87s]                     )\r\n[   87s]                 assert is_req_successful\r\n[   87s]                 assert resp.text == 'Hello world!'\r\n[   87s]                 return\r\n[   87s]     \r\n[   87s]             with pytest.raises(requests.exceptions.SSLError) as ssl_err:\r\n[   87s] >               make_https_request()\r\n[   87s] \r\n[   87s] cheroot/test/test_ssl.py:316: \r\n[   87s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   87s] /usr/lib/python2.7/site-packages/requests/api.py:75: in get\r\n[   87s]     return request('get', url, params=params, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/api.py:60: in request\r\n[   87s]     return session.request(method=method, url=url, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/sessions.py:533: in request\r\n[   87s]     resp = self.send(prep, **send_kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/sessions.py:646: in send\r\n[   87s]     r = adapter.send(request, **kwargs)\r\n[   87s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   87s] \r\n[   87s] self = <requests.adapters.HTTPAdapter object at 0x7f8120a94a90>\r\n[   87s] request = <PreparedRequest [GET]>, stream = False\r\n[   87s] timeout = <urllib3.util.timeout.Timeout object at 0x7f8120a703d0>\r\n[   87s] verify = '/tmp/tmphCe4LF.pem', cert = '/tmp/tmp1UR6JX.pem'\r\n[   87s] proxies = OrderedDict()\r\n[   87s] \r\n[   87s]     def send(self, request, stream=False, timeout=None, verify=True, cert=None, proxies=None):\r\n[   87s]         \"\"\"Sends PreparedRequest object. Returns Response object.\r\n[   87s]     \r\n[   87s]         :param request: The :class:`PreparedRequest <PreparedRequest>` being sent.\r\n[   87s]         :param stream: (optional) Whether to stream the request content.\r\n[   87s]         :param timeout: (optional) How long to wait for the server to send\r\n[   87s]             data before giving up, as a float, or a :ref:`(connect timeout,\r\n[   87s]             read timeout) <timeouts>` tuple.\r\n[   87s]         :type timeout: float or tuple or urllib3 Timeout object\r\n[   87s]         :param verify: (optional) Either a boolean, in which case it controls whether\r\n[   87s]             we verify the server's TLS certificate, or a string, in which case it\r\n[   87s]             must be a path to a CA bundle to use\r\n[   87s]         :param cert: (optional) Any user-provided SSL certificate to be trusted.\r\n[   87s]         :param proxies: (optional) The proxies dictionary to apply to the request.\r\n[   87s]         :rtype: requests.Response\r\n[   87s]         \"\"\"\r\n[   87s]     \r\n[   87s]         try:\r\n[   87s]             conn = self.get_connection(request.url, proxies)\r\n[   87s]         except LocationValueError as e:\r\n[   87s]             raise InvalidURL(e, request=request)\r\n[   87s]     \r\n[   87s]         self.cert_verify(conn, request.url, verify, cert)\r\n[   87s]         url = self.request_url(request, proxies)\r\n[   87s]         self.add_headers(request, stream=stream, timeout=timeout, verify=verify, cert=cert, proxies=proxies)\r\n[   87s]     \r\n[   87s]         chunked = not (request.body is None or 'Content-Length' in request.headers)\r\n[   87s]     \r\n[   87s]         if isinstance(timeout, tuple):\r\n[   87s]             try:\r\n[   87s]                 connect, read = timeout\r\n[   87s]                 timeout = TimeoutSauce(connect=connect, read=read)\r\n[   87s]             except ValueError as e:\r\n[   87s]                 # this may raise a string formatting error.\r\n[   87s]                 err = (\"Invalid timeout {}. Pass a (connect, read) \"\r\n[   87s]                        \"timeout tuple, or a single float to set \"\r\n[   87s]                        \"both timeouts to the same value\".format(timeout))\r\n[   87s]                 raise ValueError(err)\r\n[   87s]         elif isinstance(timeout, TimeoutSauce):\r\n[   87s]             pass\r\n[   87s]         else:\r\n[   87s]             timeout = TimeoutSauce(connect=timeout, read=timeout)\r\n[   87s]     \r\n[   87s]         try:\r\n[   87s]             if not chunked:\r\n[   87s]                 resp = conn.urlopen(\r\n[   87s]                     method=request.method,\r\n[   87s]                     url=url,\r\n[   87s]                     body=request.body,\r\n[   87s]                     headers=request.headers,\r\n[   87s]                     redirect=False,\r\n[   87s]                     assert_same_host=False,\r\n[   87s]                     preload_content=False,\r\n[   87s]                     decode_content=False,\r\n[   87s]                     retries=self.max_retries,\r\n[   87s]                     timeout=timeout\r\n[   87s]                 )\r\n[   87s]     \r\n[   87s]             # Send the request.\r\n[   87s]             else:\r\n[   87s]                 if hasattr(conn, 'proxy_pool'):\r\n[   87s]                     conn = conn.proxy_pool\r\n[   87s]     \r\n[   87s]                 low_conn = conn._get_conn(timeout=DEFAULT_POOL_TIMEOUT)\r\n[   87s]     \r\n[   87s]                 try:\r\n[   87s]                     low_conn.putrequest(request.method,\r\n[   87s]                                         url,\r\n[   87s]                                         skip_accept_encoding=True)\r\n[   87s]     \r\n[   87s]                     for header, value in request.headers.items():\r\n[   87s]                         low_conn.putheader(header, value)\r\n[   87s]     \r\n[   87s]                     low_conn.endheaders()\r\n[   87s]     \r\n[   87s]                     for i in request.body:\r\n[   87s]                         low_conn.send(hex(len(i))[2:].encode('utf-8'))\r\n[   87s]                         low_conn.send(b'\\r\\n')\r\n[   87s]                         low_conn.send(i)\r\n[   87s]                         low_conn.send(b'\\r\\n')\r\n[   87s]                     low_conn.send(b'0\\r\\n\\r\\n')\r\n[   87s]     \r\n[   87s]                     # Receive the response from the server\r\n[   87s]                     try:\r\n[   87s]                         # For Python 2.7, use buffering of HTTP responses\r\n[   87s]                         r = low_conn.getresponse(buffering=True)\r\n[   87s]                     except TypeError:\r\n[   87s]                         # For compatibility with Python 3.3+\r\n[   87s]                         r = low_conn.getresponse()\r\n[   87s]     \r\n[   87s]                     resp = HTTPResponse.from_httplib(\r\n[   87s]                         r,\r\n[   87s]                         pool=conn,\r\n[   87s]                         connection=low_conn,\r\n[   87s]                         preload_content=False,\r\n[   87s]                         decode_content=False\r\n[   87s]                     )\r\n[   87s]                 except:\r\n[   87s]                     # If we hit any problems here, clean up the connection.\r\n[   87s]                     # Then, reraise so that we can handle the actual exception.\r\n[   87s]                     low_conn.close()\r\n[   87s]                     raise\r\n[   87s]     \r\n[   87s]         except (ProtocolError, socket.error) as err:\r\n[   87s] >           raise ConnectionError(err, request=request)\r\n[   87s] E           ConnectionError: ('Connection aborted.', error(\"(104, 'ECONNRESET')\",))\r\n[   87s] \r\n[   87s] /usr/lib/python2.7/site-packages/requests/adapters.py:498: ConnectionError\r\n[   87s] ______________ test_tls_client_auth[2-False-localhost-pyopenssl] _______________\r\n[   87s] \r\n[   87s] mocker = <pytest_mock.MockFixture object at 0x7f8120b22f90>\r\n[   87s] tls_http_server = <generator object start_srv at 0x7f8120b51280>\r\n[   87s] adapter_type = 'pyopenssl', ca = <trustme.CA object at 0x7f8120a94fd0>\r\n[   87s] tls_certificate = <trustme.LeafCert object at 0x7f8120b3f950>\r\n[   87s] tls_certificate_chain_pem_path = '/tmp/tmp6OVLwI.pem'\r\n[   87s] tls_certificate_private_key_pem_path = '/tmp/tmpv6sN3S.pem'\r\n[   87s] tls_ca_certificate_pem_path = '/tmp/tmpfuqxWc.pem', is_trusted_cert = False\r\n[   87s] tls_client_identity = 'localhost', tls_verify_mode = 2\r\n[   87s] \r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'adapter_type',\r\n[   87s]         (\r\n[   87s]             'builtin',\r\n[   87s]             'pyopenssl',\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'is_trusted_cert,tls_client_identity',\r\n[   87s]         (\r\n[   87s]             (True, 'localhost'), (True, '127.0.0.1'),\r\n[   87s]             (True, '*.localhost'), (True, 'not_localhost'),\r\n[   87s]             (False, 'localhost'),\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     @pytest.mark.parametrize(\r\n[   87s]         'tls_verify_mode',\r\n[   87s]         (\r\n[   87s]             ssl.CERT_NONE,  # server shouldn't validate client cert\r\n[   87s]             ssl.CERT_OPTIONAL,  # same as CERT_REQUIRED in client mode, don't use\r\n[   87s]             ssl.CERT_REQUIRED,  # server should validate if client cert CA is OK\r\n[   87s]         ),\r\n[   87s]     )\r\n[   87s]     def test_tls_client_auth(\r\n[   87s]         # FIXME: remove twisted logic, separate tests\r\n[   87s]         mocker,\r\n[   87s]         tls_http_server, adapter_type,\r\n[   87s]         ca,\r\n[   87s]         tls_certificate,\r\n[   87s]         tls_certificate_chain_pem_path,\r\n[   87s]         tls_certificate_private_key_pem_path,\r\n[   87s]         tls_ca_certificate_pem_path,\r\n[   87s]         is_trusted_cert, tls_client_identity,\r\n[   87s]         tls_verify_mode,\r\n[   87s]     ):\r\n[   87s]         \"\"\"Verify that client TLS certificate auth works correctly.\"\"\"\r\n[   87s]         test_cert_rejection = (\r\n[   87s]             tls_verify_mode != ssl.CERT_NONE\r\n[   87s]             and not is_trusted_cert\r\n[   87s]         )\r\n[   87s]         interface, _host, port = _get_conn_data(ANY_INTERFACE_IPV4)\r\n[   87s]     \r\n[   87s]         client_cert_root_ca = ca if is_trusted_cert else trustme.CA()\r\n[   87s]         with mocker.mock_module.patch(\r\n[   87s]             'idna.core.ulabel',\r\n[   87s]             return_value=ntob(tls_client_identity),\r\n[   87s]         ):\r\n[   87s]             client_cert = client_cert_root_ca.issue_server_cert(\r\n[   87s]                 # FIXME: change to issue_cert once new trustme is out\r\n[   87s]                 ntou(tls_client_identity),\r\n[   87s]             )\r\n[   87s]             del client_cert_root_ca\r\n[   87s]     \r\n[   87s]         with client_cert.private_key_and_cert_chain_pem.tempfile() as cl_pem:\r\n[   87s]             tls_adapter_cls = get_ssl_adapter_class(name=adapter_type)\r\n[   87s]             tls_adapter = tls_adapter_cls(\r\n[   87s]                 tls_certificate_chain_pem_path,\r\n[   87s]                 tls_certificate_private_key_pem_path,\r\n[   87s]             )\r\n[   87s]             if adapter_type == 'pyopenssl':\r\n[   87s]                 tls_adapter.context = tls_adapter.get_context()\r\n[   87s]                 tls_adapter.context.set_verify(\r\n[   87s]                     _stdlib_to_openssl_verify[tls_verify_mode],\r\n[   87s]                     lambda conn, cert, errno, depth, preverify_ok: preverify_ok,\r\n[   87s]                 )\r\n[   87s]             else:\r\n[   87s]                 tls_adapter.context.verify_mode = tls_verify_mode\r\n[   87s]     \r\n[   87s]             ca.configure_trust(tls_adapter.context)\r\n[   87s]             tls_certificate.configure_cert(tls_adapter.context)\r\n[   87s]     \r\n[   87s]             tlshttpserver = tls_http_server.send(\r\n[   87s]                 (\r\n[   87s]                     (interface, port),\r\n[   87s]                     tls_adapter,\r\n[   87s]                 ),\r\n[   87s]             )\r\n[   87s]     \r\n[   87s]             interface, _host, port = _get_conn_data(tlshttpserver.bind_addr)\r\n[   87s]     \r\n[   87s]             make_https_request = functools.partial(\r\n[   87s]                 requests.get,\r\n[   87s]                 'https://' + interface + ':' + str(port) + '/',\r\n[   87s]     \r\n[   87s]                 # Server TLS certificate verification:\r\n[   87s]                 verify=tls_ca_certificate_pem_path,\r\n[   87s]     \r\n[   87s]                 # Client TLS certificate verification:\r\n[   87s]                 cert=cl_pem,\r\n[   87s]             )\r\n[   87s]     \r\n[   87s]             if not test_cert_rejection:\r\n[   87s]                 resp = make_https_request()\r\n[   87s]                 is_req_successful = resp.status_code == 200\r\n[   87s]                 if (\r\n[   87s]                         not is_req_successful\r\n[   87s]                         and IS_PYOPENSSL_SSL_VERSION_1_0\r\n[   87s]                         and adapter_type == 'builtin'\r\n[   87s]                         and tls_verify_mode == ssl.CERT_REQUIRED\r\n[   87s]                         and tls_client_identity == 'localhost'\r\n[   87s]                         and is_trusted_cert\r\n[   87s]                 ):\r\n[   87s]                     pytest.xfail(\r\n[   87s]                         'OpenSSL 1.0 has problems with verifying client certs',\r\n[   87s]                     )\r\n[   87s]                 assert is_req_successful\r\n[   87s]                 assert resp.text == 'Hello world!'\r\n[   87s]                 return\r\n[   87s]     \r\n[   87s]             with pytest.raises(requests.exceptions.SSLError) as ssl_err:\r\n[   87s] >               make_https_request()\r\n[   87s] \r\n[   87s] cheroot/test/test_ssl.py:316: \r\n[   87s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   87s] /usr/lib/python2.7/site-packages/requests/api.py:75: in get\r\n[   87s]     return request('get', url, params=params, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/api.py:60: in request\r\n[   87s]     return session.request(method=method, url=url, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/sessions.py:533: in request\r\n[   87s]     resp = self.send(prep, **send_kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/sessions.py:646: in send\r\n[   87s]     r = adapter.send(request, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/requests/adapters.py:449: in send\r\n[   87s]     timeout=timeout\r\n[   87s] /usr/lib/python2.7/site-packages/urllib3/connectionpool.py:600: in urlopen\r\n[   87s]     chunked=chunked)\r\n[   87s] /usr/lib/python2.7/site-packages/urllib3/connectionpool.py:377: in _make_request\r\n[   87s]     httplib_response = conn.getresponse(buffering=True)\r\n[   87s] /usr/lib64/python2.7/httplib.py:1121: in getresponse\r\n[   87s]     response.begin()\r\n[   87s] /usr/lib64/python2.7/httplib.py:438: in begin\r\n[   87s]     version, status, reason = self._read_status()\r\n[   87s] /usr/lib64/python2.7/httplib.py:394: in _read_status\r\n[   87s]     line = self.fp.readline(_MAXLINE + 1)\r\n[   87s] /usr/lib64/python2.7/socket.py:480: in readline\r\n[   87s]     data = self._sock.recv(self._rbufsize)\r\n[   87s] /usr/lib/python2.7/site-packages/urllib3/contrib/pyopenssl.py:276: in recv\r\n[   87s]     data = self.connection.recv(*args, **kwargs)\r\n[   87s] /usr/lib/python2.7/site-packages/OpenSSL/SSL.py:1791: in recv\r\n[   87s]     self._raise_ssl_error(self._ssl, result)\r\n[   87s] /usr/lib/python2.7/site-packages/OpenSSL/SSL.py:1647: in _raise_ssl_error\r\n[   87s]     _raise_current_error()\r\n[   87s] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n[   87s] \r\n[   87s] exception_type = <class 'OpenSSL.SSL.Error'>\r\n[   87s] \r\n[   87s]     def exception_from_error_queue(exception_type):\r\n[   87s]         \"\"\"\r\n[   87s]         Convert an OpenSSL library failure into a Python exception.\r\n[   87s]     \r\n[   87s]         When a call to the native OpenSSL library fails, this is usually signalled\r\n[   87s]         by the return value, and an error code is stored in an error queue\r\n[   87s]         associated with the current thread. The err library provides functions to\r\n[   87s]         obtain these error codes and textual error messages.\r\n[   87s]         \"\"\"\r\n[   87s]         errors = []\r\n[   87s]     \r\n[   87s]         while True:\r\n[   87s]             error = lib.ERR_get_error()\r\n[   87s]             if error == 0:\r\n[   87s]                 break\r\n[   87s]             errors.append((\r\n[   87s]                 text(lib.ERR_lib_error_string(error)),\r\n[   87s]                 text(lib.ERR_func_error_string(error)),\r\n[   87s]                 text(lib.ERR_reason_error_string(error))))\r\n[   87s]     \r\n[   87s] >       raise exception_type(errors)\r\n[   87s] E       Error: [('SSL routines', 'ssl3_read_bytes', 'tlsv1 alert unknown ca')]\r\n[   87s] \r\n[   87s] /usr/lib/python2.7/site-packages/OpenSSL/_util.py:54: Error\r\n[   87s] ========== 4 failed, 98 passed, 1 skipped, 3 xfailed in 69.23 seconds ==========\r\n[   87s] error: Bad exit status from /var/tmp/rpm-tmp.A2bJoL (%check)\r\n[   87s]\r\n```\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\nThe testsuite is failing when building openSUSE packages with OpenSSL\r\n1.1.1 installed.\r\n\r\n\ud83d\udca1 **To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Run the full testsuite\r\n2. Observe the error\r\n\r\n\ud83d\udca1 **Expected behavior**\r\nThe testsuite should pass without a failure.\r\n\r\n\r\n\ud83d\udccb **Details**\r\n[Full build log](https://github.com/cherrypy/cheroot/files/3177621/log.txt)\r\n\r\n\ud83d\udccb **Environment**\r\n- Cheroot version: 6.5.5\r\n- CherryPy version: not available in the build environment\r\n- Python version: 2.7.16 and 3.7.2\r\n- OS: Linux openSUSE/Tumbleweed\r\n- Browser: NA\r\n\r\n\ud83d\udccb **Additional context**", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/198", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/198/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/198/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/198/events", "html_url": "https://github.com/cherrypy/cheroot/issues/198", "id": 440051112, "node_id": "MDU6SXNzdWU0NDAwNTExMTI=", "number": 198, "title": "Race condition in accept loop when stats are enabled", "user": {"login": "jshiell", "id": 1030482, "node_id": "MDQ6VXNlcjEwMzA0ODI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1030482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jshiell", "html_url": "https://github.com/jshiell", "followers_url": "https://api.github.com/users/jshiell/followers", "following_url": "https://api.github.com/users/jshiell/following{/other_user}", "gists_url": "https://api.github.com/users/jshiell/gists{/gist_id}", "starred_url": "https://api.github.com/users/jshiell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jshiell/subscriptions", "organizations_url": "https://api.github.com/users/jshiell/orgs", "repos_url": "https://api.github.com/users/jshiell/repos", "events_url": "https://api.github.com/users/jshiell/events{/privacy}", "received_events_url": "https://api.github.com/users/jshiell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 965607071, "node_id": "MDU6TGFiZWw5NjU2MDcwNzE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20missing", "name": "reproducer: missing", "color": "e23c36", "default": false, "description": "This PR or issue lacks code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-05-03T13:40:25Z", "updated_at": "2019-09-04T09:02:40Z", "closed_at": "2019-09-02T10:53:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n\r\nWhen starting a server with monitoring enabled, there seems to be an intermittent race condition where the start time is accessed before it has been initialised, resulting in an exception.\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nFewer exceptions :-)\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n\r\nToggle stats reporting on while a request is in progress, e.g. starting the server while an uptime monitoring query is being performed.\r\n\r\n\ud83d\udca1 **Expected behavior**\r\n\r\nStats are recorded.\r\n\r\n\ud83d\udccb **Details**\r\n\r\nExample stack trace:\r\n```python-traceback\r\n[03/May/2019:14:29:50] ENGINE Bus STARTING\r\n[03/May/2019:14:29:50] ENGINE Started monitor thread 'Autoreloader'.\r\n[03/May/2019:14:29:50] ENGINE Serving on http://0.0.0.0:50001\r\n[03/May/2019:14:29:50] ENGINE Bus STARTED\r\nException in thread CP Server Thread-3:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py\", line 917, in _bootstrap_inner\r\n    self.run()\r\n  File \"/path/to/project/venv/lib/python3.7/site-packages/cheroot/workers/threadpool.py\", line 121, in run\r\n    self.work_time += time.time() - self.start_time\r\nTypeError: unsupported operand type(s) for -: 'float' and 'NoneType'\r\n```\r\n\r\n\ud83d\udccb **Environment**\r\n\r\n- Cheroot version: 6.5.5\r\n- CherryPy version: 18.1.1\r\n- Python version: 3.7.3\r\n- OS: OS X 10.14.4\r\n- Browser: all\r\n\r\n\ud83d\udccb **Additional context**\r\n\r\nI believe this is probably occurring as [`threadpool.py`](https://github.com/cherrypy/cheroot/blob/25c3a277f311739f85980493f19123ceb2731939/cheroot/workers/threadpool.py#L111) does two independent checks on `self.server.stats['Enabled']` - one to initialise the start time, one to record the results. If the value of `self.server.stats['Enabled']` changes while a request is in progress then we can assume there's a chance that we'll try the result block without the initialising the start time.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/196", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/196/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/196/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/196/events", "html_url": "https://github.com/cherrypy/cheroot/issues/196", "id": 439661227, "node_id": "MDU6SXNzdWU0Mzk2NjEyMjc=", "number": 196, "title": "Cherrypy doesn`t encode UTF-8 filename in HTTP header \"Content-Disposition\" and returns \"download\" browser default filename instead.", "user": {"login": "jrxpert", "id": 1029807, "node_id": "MDQ6VXNlcjEwMjk4MDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1029807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrxpert", "html_url": "https://github.com/jrxpert", "followers_url": "https://api.github.com/users/jrxpert/followers", "following_url": "https://api.github.com/users/jrxpert/following{/other_user}", "gists_url": "https://api.github.com/users/jrxpert/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrxpert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrxpert/subscriptions", "organizations_url": "https://api.github.com/users/jrxpert/orgs", "repos_url": "https://api.github.com/users/jrxpert/repos", "events_url": "https://api.github.com/users/jrxpert/events{/privacy}", "received_events_url": "https://api.github.com/users/jrxpert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-02T15:47:34Z", "updated_at": "2019-05-02T17:22:38Z", "closed_at": "2019-05-02T17:22:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n\r\ncherrypy.lib.static.serve_file() method sets wrong \"Content-Disposition\" and doesn't encode UTF-8 filename properly. It causes error with browser suggested filename - when downloading the file, the value is \"download\" and it doesn't matter what the original filename is. This could be fixed with RFC6266 (https://tools.ietf.org/html/rfc6266#appendix-D) solution, e.g. filename=\"my-resume.pdf\"; filename*=utf-8''My%20R%C3%A9sum%C3%A9.pdf.\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nTo be able return file with czech diacritics in name for download under its original name.\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n\r\nCode:\r\n```\r\nreturn cherrypy.lib.static.serve_file(\r\n    path='file_path',\r\n    content_type='file_mime_type',\r\n    disposition='attachment',\r\n    name='has_utf-8_character_\u2603.html',\r\n    debug=True)\r\n```\r\n\r\nDEBUG:\r\nTOOLS.STATIC Content-Disposition: 'attachment; filename=\"has_utf-8_character_\u2603.html\"'\r\n\r\n\ud83d\udca1 **Expected behavior**\r\n\r\nDEBUG:\r\nTOOLS.STATIC Content-Disposition: 'attachment; filename=\"has_utf-8_character_.html\"; filename*=utf-8\\'\\'has_utf-8_character_%E2%98%83.html'\r\n\r\n\ud83d\udccb **Details**\r\n\r\n\r\n\ud83d\udccb **Environment**\r\n\r\n- Cheroot version: v6.5.4\r\n- CherryPy version: v18.0.1\r\n- Python version: v3.6.6\r\n- OS: Windows 10\r\n- Browser: [all]\r\n\r\n\ud83d\udccb **Additional context**\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/194", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/194/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/194/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/194/events", "html_url": "https://github.com/cherrypy/cheroot/issues/194", "id": 438617760, "node_id": "MDU6SXNzdWU0Mzg2MTc3NjA=", "number": 194, "title": "Tests failing on pip 19.1", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-30T06:15:26Z", "updated_at": "2019-05-16T14:23:15Z", "closed_at": "2019-05-16T14:23:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Like many projects relying on `pip install -e`, this project is failing following the release of pip 19.1 due to pypa/pip#6434. There's a fix in jaraco/skeleton from which you might draw inspiration.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/193", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/193/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/193/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/193/events", "html_url": "https://github.com/cherrypy/cheroot/issues/193", "id": 435878471, "node_id": "MDU6SXNzdWU0MzU4Nzg0NzE=", "number": 193, "title": "Sphinx 2.0 fails to build the docs", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-22T20:28:08Z", "updated_at": "2019-05-17T21:58:36Z", "closed_at": "2019-05-17T21:58:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\nCurrent docs building config is incompatible with the new major Sphinx version which results into a build failure.\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nN/A\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\n`tox -e build-docs -r`\r\n\r\n\ud83d\udca1 **Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\nDocs are built.\r\n\r\n\ud83d\udccb **Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\nN/A\r\n\r\n\ud83d\udccb **Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: `master`\r\n- CherryPy version: N/A\r\n- Python version: N/A\r\n- OS: N/A\r\n- Browser: N/A\r\n\r\n\ud83d\udccb **Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n(e.g. detailed explanation, tracebacks, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\nhttps://readthedocs.org/projects/cheroot/builds/8881232/:\r\n```console\r\nRunning Sphinx v2.0.0\r\nloading translations [en]... done\r\nmaking output directory... done\r\nloading pickled environment... done\r\n/home/docs/checkouts/readthedocs.org/user_builds/cheroot/checkouts/latest/.eggs/setuptools_scm-3.2.0-py3.6.egg/setuptools_scm/git.py:68: UserWarning: \"/home/docs/checkouts/readthedocs.org/user_builds/cheroot/checkouts/latest\" is shallow and may cause errors\r\n  warnings.warn('\"%s\" is shallow and may cause errors' % (wd.path,))\r\nbuilding [mo]: targets for 0 po files that are out of date\r\nbuilding [latex]: all documents\r\nupdating environment: [config changed] 12 added, 1 changed, 0 removed\r\nreading sources... [  8%] contribute\r\nreading sources... [ 16%] history\r\nreading sources... [ 25%] index\r\nreading sources... [ 33%] pkg/cheroot._compat\r\nreading sources... [ 41%] pkg/cheroot.errors\r\nreading sources... [ 50%] pkg/cheroot.makefile\r\nreading sources... [ 58%] pkg/cheroot.server\r\nreading sources... [ 66%] pkg/cheroot.ssl\r\nreading sources... [ 75%] pkg/cheroot.ssl.builtin\r\nreading sources... [ 83%] pkg/cheroot.ssl.pyopenssl\r\nreading sources... [ 91%] pkg/cheroot.testing\r\nreading sources... [100%] pkg/cheroot.wsgi\r\n\r\n/home/docs/checkouts/readthedocs.org/user_builds/cheroot/checkouts/latest/docs/contribute.rst:8: WARNING: Bullet list ends without a blank line; unexpected unindent.\r\n../CHANGES (links).rst:4: WARNING: Inline interpreted text or phrase reference start-string without end-string.\r\n../CHANGES (links).rst:58: WARNING: Unexpected indentation.\r\n../CHANGES (links).rst:69: WARNING: Unexpected indentation.\r\nWARNING: autodoc: failed to import module 'testing' from module 'cheroot'; the following exception was raised:\r\nNo module named 'pytest'\r\nlooking for now-outdated files... none found\r\npickling environment... done\r\nchecking consistency... done\r\nprocessing cheroot.tex... index contribute history pkg/cheroot._compat pkg/cheroot.errors pkg/cheroot.makefile pkg/cheroot.server pkg/cheroot.ssl pkg/cheroot.ssl.builtin pkg/cheroot.ssl.pyopenssl pkg/cheroot.testing pkg/cheroot.wsgi \r\nresolving references...\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://img.shields.io/pypi/v/cheroot.svg)\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://img.shields.io/travis/cherrypy/cheroot/master.svg?label=Linux%20build%20%40%20Travis%20CI)\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://circleci.com/gh/cherrypy/cheroot/tree/master.svg?style=svg)\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://img.shields.io/appveyor/ci/cherrypy/cheroot/master.svg?label=Windows%20build%20%40%20Appveyor)\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://img.shields.io/badge/license-BSD-blue.svg?maxAge=3600)\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://img.shields.io/pypi/pyversions/cheroot.svg)\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://codecov.io/gh/cherrypy/cheroot/branch/master/graph/badge.svg)\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://readthedocs.org/projects/cheroot/badge/?version=latest)\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://img.shields.io/badge/StackOverflow-Cheroot-blue.svg)\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://img.shields.io/gitter/room/cherrypy/cherrypy.svg)\r\n../README.rst:: WARNING: a suitable image for latex builder not found: ['image/svg+xml'] (https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)\r\ndone\r\nwriting... done\r\ncopying images... [ 50%] https://app.fossa.io/api/projects/git%2Bgithub.com%2Fcherrypy%2Fcheroot.svg?type=shield\r\ncopying images... [100%] https://app.fossa.io/api/projects/git%2Bgithub.com%2Fcherrypy%2Fcheroot.svg?type=large\r\n\r\ncopying TeX support files... copying TeX support files...\r\ndone\r\nbuild succeeded, 16 warnings.\r\n\r\nThe LaTeX files are in _build/latex.\r\nRun 'make' in that directory to run these through (pdf)latex\r\n(use `make latexpdf' here to do that automatically).\r\n\r\nException occurred:\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/cheroot/envs/latest/lib/python3.6/site-packages/sphinx_tabs/tabs.py\", line 301, in copy_assets\r\n    app.warn(\r\nAttributeError: 'Sphinx' object has no attribute 'warn'\r\nThe full traceback has been saved in /tmp/sphinx-err-e3_6h1yr.log, if you want to report the issue to the developers.\r\nPlease also report this if it was a user error, so that a better error message can be provided next time.\r\nA bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/181", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/181/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/181/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/181/events", "html_url": "https://github.com/cherrypy/cheroot/issues/181", "id": 419117695, "node_id": "MDU6SXNzdWU0MTkxMTc2OTU=", "number": 181, "title": "cheroot 6.5.4 traceback for python 3.6 complaining about backports.functools_lru_cache requirement not being met", "user": {"login": "williamh", "id": 64355, "node_id": "MDQ6VXNlcjY0MzU1", "avatar_url": "https://avatars0.githubusercontent.com/u/64355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/williamh", "html_url": "https://github.com/williamh", "followers_url": "https://api.github.com/users/williamh/followers", "following_url": "https://api.github.com/users/williamh/following{/other_user}", "gists_url": "https://api.github.com/users/williamh/gists{/gist_id}", "starred_url": "https://api.github.com/users/williamh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/williamh/subscriptions", "organizations_url": "https://api.github.com/users/williamh/orgs", "repos_url": "https://api.github.com/users/williamh/repos", "events_url": "https://api.github.com/users/williamh/events{/privacy}", "received_events_url": "https://api.github.com/users/williamh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 965607071, "node_id": "MDU6TGFiZWw5NjU2MDcwNzE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20missing", "name": "reproducer: missing", "color": "e23c36", "default": false, "description": "This PR or issue lacks code, which reproduce the problem described or clearly understandable STR"}, {"id": 79272681, "node_id": "MDU6TGFiZWw3OTI3MjY4MQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This is not smth we're going to fix"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-03-09T21:31:17Z", "updated_at": "2019-04-08T09:47:16Z", "closed_at": "2019-04-08T09:47:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\n\r\ncheroot crashes with a traceback on python 3.6 on Gentoo Linux, but it shouldn't because the function it needs is in the standard library.\r\n\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nSteps to reproduce the behavior:\r\n1. Run '...'\r\n2. Make request '....'\r\n3. See error\r\n```python-traceback\r\nwhubbs@whubbs1 ~ $ cheroot\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python-exec/python3.6/cheroot\", line 6, in <module>\r\n    from pkg_resources import load_entry_point\r\n  File \"/usr/lib64/python3.6/site-packages/pkg_resources/__init__.py\", line 3126, in <module>\r\n    @_call_aside\r\n  File \"/usr/lib64/python3.6/site-packages/pkg_resources/__init__.py\", line 3110, in _call_aside\r\n    f(*args, **kwargs)\r\n  File \"/usr/lib64/python3.6/site-packages/pkg_resources/__init__.py\", line 3139, in _initialize_master_working_set\r\n    working_set = WorkingSet._build_master()\r\n  File \"/usr/lib64/python3.6/site-packages/pkg_resources/__init__.py\", line 581, in _build_master\r\n    ws.require(__requires__)\r\n  File \"/usr/lib64/python3.6/site-packages/pkg_resources/__init__.py\", line 898, in require\r\n    needed = self.resolve(parse_requirements(requirements))\r\n  File \"/usr/lib64/python3.6/site-packages/pkg_resources/__init__.py\", line 784, in resolve\r\n    raise DistributionNotFound(req, requirers)\r\npkg_resources.DistributionNotFound: The 'backports.functools_lru_cache' distribution was not found and is required by cheroot\r\nwhubbs@whubbs1 ~ $ python\r\nPython 3.6.5 (default, Jul 24 2018, 10:46:29)\r\n[GCC 7.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from functools import lru_cache\r\n>>>\r\nwhubbs@whubbs1 ~ $\r\n```\r\n\ud83d\udca1 **Expected behavior**\r\n\r\nNo crash, because as shown, the function is available.\r\n\r\n\ud83d\udccb **Details**\r\n\r\nSee above.\r\n\r\n\ud83d\udccb **Environment**\r\n- Cheroot version: 6.5.4\r\n- Python version: 3.6.5\r\n- OS: Linux\r\n\r\n\ud83d\udccb **Additional context**\r\n\r\nI am a packager for Gentoo Linux working on upgrading cheroot/cherrypy for us.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/173", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/173/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/173/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/173/events", "html_url": "https://github.com/cherrypy/cheroot/issues/173", "id": 406515214, "node_id": "MDU6SXNzdWU0MDY1MTUyMTQ=", "number": 173, "title": "SSL tests fail with uncaught SSL validation", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2019-02-04T20:55:02Z", "updated_at": "2019-04-22T21:56:34Z", "closed_at": "2019-04-22T21:56:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\nRunning tests on macOS, two tests fail:\r\n\r\n```\r\n       2 failed\r\n         - cheroot/test/test_ssl.py:192 test_tls_client_auth[VerifyMode.CERT_OPTIONAL-False-localhost-pyopenssl]\r\n         - cheroot/test/test_ssl.py:192 test_tls_client_auth[VerifyMode.CERT_REQUIRED-False-localhost-pyopenssl]\r\n```\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nTests should pass on master.\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nSteps to reproduce the behavior:\r\n1. Run `tox -r` on macOS\r\n\r\n\ud83d\udca1 **Expected behavior**\r\n\r\nTests should pass.\r\n\r\n\ud83d\udccb **Details**\r\n\r\nFailures look like:\r\n\r\n```\r\n\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015 test_tls_client_auth[VerifyMode.CERT_OPTIONAL-False-localhost-pyopenssl] \u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\r\n\r\nmocker = <pytest_mock.MockFixture object at 0x103995ba8>, tls_http_server = <generator object tls_http_server.<locals>.start_srv at 0x10392c228>, adapter_type = 'pyopenssl'\r\nca = <trustme.CA object at 0x103995fd0>, tls_certificate = <trustme.LeafCert object at 0x10396bb70>\r\ntls_certificate_chain_pem_path = '/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/tmpg0wjfzji.pem'\r\ntls_certificate_private_key_pem_path = '/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/tmpii4yp07w.pem'\r\ntls_ca_certificate_pem_path = '/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/tmpyv5h7s8l.pem', is_trusted_cert = False, tls_client_identity = 'localhost'\r\ntls_verify_mode = <VerifyMode.CERT_OPTIONAL: 1>\r\n\r\n    @pytest.mark.parametrize(\r\n        'adapter_type',\r\n        (\r\n            'builtin',\r\n            'pyopenssl',\r\n        ),\r\n    )\r\n    @pytest.mark.parametrize(\r\n        'is_trusted_cert,tls_client_identity',\r\n        (\r\n            (True, 'localhost'), (True, '127.0.0.1'),\r\n            (True, '*.localhost'), (True, 'not_localhost'),\r\n            (False, 'localhost'),\r\n        ),\r\n    )\r\n    @pytest.mark.parametrize(\r\n        'tls_verify_mode',\r\n        (\r\n            ssl.CERT_NONE,  # server shouldn't validate client cert\r\n            ssl.CERT_OPTIONAL,  # same as CERT_REQUIRED in client mode, don't use\r\n            ssl.CERT_REQUIRED,  # server should validate if client cert CA is OK\r\n        ),\r\n    )\r\n    def test_tls_client_auth(\r\n        # FIXME: remove twisted logic, separate tests\r\n        mocker,\r\n        tls_http_server, adapter_type,\r\n        ca,\r\n        tls_certificate,\r\n        tls_certificate_chain_pem_path,\r\n        tls_certificate_private_key_pem_path,\r\n        tls_ca_certificate_pem_path,\r\n        is_trusted_cert, tls_client_identity,\r\n        tls_verify_mode,\r\n    ):\r\n        \"\"\"Verify that client TLS certificate auth works correctly.\"\"\"\r\n        test_cert_rejection = (\r\n            tls_verify_mode != ssl.CERT_NONE\r\n            and not is_trusted_cert\r\n        )\r\n        interface, _host, port = _get_conn_data(ANY_INTERFACE_IPV4)\r\n    \r\n        client_cert_root_ca = ca if is_trusted_cert else trustme.CA()\r\n        with mocker.mock_module.patch(\r\n            'idna.core.ulabel',\r\n            return_value=ntob(tls_client_identity),\r\n        ):\r\n            client_cert = client_cert_root_ca.issue_server_cert(\r\n                # FIXME: change to issue_cert once new trustme is out\r\n                ntou(tls_client_identity),\r\n            )\r\n            del client_cert_root_ca\r\n    \r\n        with client_cert.private_key_and_cert_chain_pem.tempfile() as cl_pem:\r\n            tls_adapter_cls = get_ssl_adapter_class(name=adapter_type)\r\n            tls_adapter = tls_adapter_cls(\r\n                tls_certificate_chain_pem_path,\r\n                tls_certificate_private_key_pem_path,\r\n            )\r\n            if adapter_type == 'pyopenssl':\r\n                tls_adapter.context = tls_adapter.get_context()\r\n                tls_adapter.context.set_verify(\r\n                    _stdlib_to_openssl_verify[tls_verify_mode],\r\n                    lambda conn, cert, errno, depth, preverify_ok: preverify_ok,\r\n                )\r\n            else:\r\n                tls_adapter.context.verify_mode = tls_verify_mode\r\n    \r\n            ca.configure_trust(tls_adapter.context)\r\n            tls_certificate.configure_cert(tls_adapter.context)\r\n    \r\n            tlshttpserver = tls_http_server.send(\r\n                (\r\n                    (interface, port),\r\n                    tls_adapter,\r\n                ),\r\n            )\r\n    \r\n            interface, _host, port = _get_conn_data(tlshttpserver.bind_addr)\r\n    \r\n            make_https_request = functools.partial(\r\n                requests.get,\r\n                'https://' + interface + ':' + str(port) + '/',\r\n    \r\n                # Server TLS certificate verification:\r\n                verify=tls_ca_certificate_pem_path,\r\n    \r\n                # Client TLS certificate verification:\r\n                cert=cl_pem,\r\n            )\r\n    \r\n            if not test_cert_rejection:\r\n                resp = make_https_request()\r\n                assert resp.status_code == 200\r\n                assert resp.text == 'Hello world!'\r\n                return\r\n    \r\n            with pytest.raises(requests.exceptions.SSLError) as ssl_err:\r\n>               make_https_request()\r\n\r\ncheroot/test/test_ssl.py:290: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n.tox/python/lib/python3.7/site-packages/requests/api.py:75: in get\r\n    return request('get', url, params=params, **kwargs)\r\n.tox/python/lib/python3.7/site-packages/requests/api.py:60: in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n.tox/python/lib/python3.7/site-packages/requests/sessions.py:533: in request\r\n    resp = self.send(prep, **send_kwargs)\r\n.tox/python/lib/python3.7/site-packages/requests/sessions.py:646: in send\r\n    r = adapter.send(request, **kwargs)\r\n.tox/python/lib/python3.7/site-packages/requests/adapters.py:449: in send\r\n    timeout=timeout\r\n.tox/python/lib/python3.7/site-packages/urllib3/connectionpool.py:600: in urlopen\r\n    chunked=chunked)\r\n.tox/python/lib/python3.7/site-packages/urllib3/connectionpool.py:384: in _make_request\r\n    six.raise_from(e, None)\r\n<string>:2: in raise_from\r\n    ???\r\n.tox/python/lib/python3.7/site-packages/urllib3/connectionpool.py:380: in _make_request\r\n    httplib_response = conn.getresponse()\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/client.py:1321: in getresponse\r\n    response.begin()\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/client.py:296: in begin\r\n    version, status, reason = self._read_status()\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/client.py:257: in _read_status\r\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socket.py:589: in readinto\r\n    return self._sock.recv_into(b)\r\n.tox/python/lib/python3.7/site-packages/urllib3/contrib/pyopenssl.py:294: in recv_into\r\n    return self.connection.recv_into(*args, **kwargs)\r\n.tox/python/lib/python3.7/site-packages/OpenSSL/SSL.py:1822: in recv_into\r\n    self._raise_ssl_error(self._ssl, result)\r\n.tox/python/lib/python3.7/site-packages/OpenSSL/SSL.py:1647: in _raise_ssl_error\r\n    _raise_current_error()\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nexception_type = <class 'OpenSSL.SSL.Error'>\r\n\r\n    def exception_from_error_queue(exception_type):\r\n        \"\"\"\r\n        Convert an OpenSSL library failure into a Python exception.\r\n    \r\n        When a call to the native OpenSSL library fails, this is usually signalled\r\n        by the return value, and an error code is stored in an error queue\r\n        associated with the current thread. The err library provides functions to\r\n        obtain these error codes and textual error messages.\r\n        \"\"\"\r\n        errors = []\r\n    \r\n        while True:\r\n            error = lib.ERR_get_error()\r\n            if error == 0:\r\n                break\r\n            errors.append((\r\n                text(lib.ERR_lib_error_string(error)),\r\n                text(lib.ERR_func_error_string(error)),\r\n                text(lib.ERR_reason_error_string(error))))\r\n    \r\n>       raise exception_type(errors)\r\nE       OpenSSL.SSL.Error: [('SSL routines', 'ssl3_read_bytes', 'tlsv1 alert unknown ca')]\r\n\r\n.tox/python/lib/python3.7/site-packages/OpenSSL/_util.py:54: Error\r\n\r\n cheroot/test/test_ssl.py::test_tls_client_auth[VerifyMode.CERT_OPTIONAL-False-localhost-pyopenssl] \u2a2f                                                                      84% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258d \r\n cheroot/test/test_ssl.py::test_tls_client_auth[VerifyMode.CERT_REQUIRED-True-localhost-builtin] \u2713                                                                         85% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258c \r\n cheroot/test/test_ssl.py::test_tls_client_auth[VerifyMode.CERT_REQUIRED-True-localhost-pyopenssl] \u2713                                                                       86% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258b \r\n cheroot/test/test_ssl.py::test_tls_client_auth[VerifyMode.CERT_REQUIRED-True-127.0.0.1-builtin] \u2713                                                                         87% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258b \r\n cheroot/test/test_ssl.py::test_tls_client_auth[VerifyMode.CERT_REQUIRED-True-127.0.0.1-pyopenssl] \u2713                                                                       88% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258a \r\n cheroot/test/test_ssl.py::test_tls_client_auth[VerifyMode.CERT_REQUIRED-True-*.localhost-builtin] \u2713                                                                       89% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2589 \r\n cheroot/test/test_ssl.py::test_tls_client_auth[VerifyMode.CERT_REQUIRED-True-*.localhost-pyopenssl] \u2713                                                                     90% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2589 \r\n cheroot/test/test_ssl.py::test_tls_client_auth[VerifyMode.CERT_REQUIRED-True-not_localhost-builtin] \u2713                                                                     90% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258f\r\n cheroot/test/test_ssl.py::test_tls_client_auth[VerifyMode.CERT_REQUIRED-True-not_localhost-pyopenssl] \u2713                                                                   91% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e\r\n cheroot/test/test_ssl.py::test_tls_client_auth[VerifyMode.CERT_REQUIRED-False-localhost-builtin] \u2713                                                                        92% \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e\r\n\r\n\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015 test_tls_client_auth[VerifyMode.CERT_REQUIRED-False-localhost-pyopenssl] \u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\r\n\r\nmocker = <pytest_mock.MockFixture object at 0x10395c6d8>, tls_http_server = <generator object tls_http_server.<locals>.start_srv at 0x103a1ae58>, adapter_type = 'pyopenssl'\r\nca = <trustme.CA object at 0x103ee1160>, tls_certificate = <trustme.LeafCert object at 0x103c2f630>\r\ntls_certificate_chain_pem_path = '/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/tmp78479eyf.pem'\r\ntls_certificate_private_key_pem_path = '/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/tmpwdexlrl7.pem'\r\ntls_ca_certificate_pem_path = '/var/folders/c6/v7hnmq453xb6p2dbz1gqc6rr0000gn/T/tmpf3obdeu1.pem', is_trusted_cert = False, tls_client_identity = 'localhost'\r\ntls_verify_mode = <VerifyMode.CERT_REQUIRED: 2>\r\n\r\n    @pytest.mark.parametrize(\r\n        'adapter_type',\r\n        (\r\n            'builtin',\r\n            'pyopenssl',\r\n        ),\r\n    )\r\n    @pytest.mark.parametrize(\r\n        'is_trusted_cert,tls_client_identity',\r\n        (\r\n            (True, 'localhost'), (True, '127.0.0.1'),\r\n            (True, '*.localhost'), (True, 'not_localhost'),\r\n            (False, 'localhost'),\r\n        ),\r\n    )\r\n    @pytest.mark.parametrize(\r\n        'tls_verify_mode',\r\n        (\r\n            ssl.CERT_NONE,  # server shouldn't validate client cert\r\n            ssl.CERT_OPTIONAL,  # same as CERT_REQUIRED in client mode, don't use\r\n            ssl.CERT_REQUIRED,  # server should validate if client cert CA is OK\r\n        ),\r\n    )\r\n    def test_tls_client_auth(\r\n        # FIXME: remove twisted logic, separate tests\r\n        mocker,\r\n        tls_http_server, adapter_type,\r\n        ca,\r\n        tls_certificate,\r\n        tls_certificate_chain_pem_path,\r\n        tls_certificate_private_key_pem_path,\r\n        tls_ca_certificate_pem_path,\r\n        is_trusted_cert, tls_client_identity,\r\n        tls_verify_mode,\r\n    ):\r\n        \"\"\"Verify that client TLS certificate auth works correctly.\"\"\"\r\n        test_cert_rejection = (\r\n            tls_verify_mode != ssl.CERT_NONE\r\n            and not is_trusted_cert\r\n        )\r\n        interface, _host, port = _get_conn_data(ANY_INTERFACE_IPV4)\r\n    \r\n        client_cert_root_ca = ca if is_trusted_cert else trustme.CA()\r\n        with mocker.mock_module.patch(\r\n            'idna.core.ulabel',\r\n            return_value=ntob(tls_client_identity),\r\n        ):\r\n            client_cert = client_cert_root_ca.issue_server_cert(\r\n                # FIXME: change to issue_cert once new trustme is out\r\n                ntou(tls_client_identity),\r\n            )\r\n            del client_cert_root_ca\r\n    \r\n        with client_cert.private_key_and_cert_chain_pem.tempfile() as cl_pem:\r\n            tls_adapter_cls = get_ssl_adapter_class(name=adapter_type)\r\n            tls_adapter = tls_adapter_cls(\r\n                tls_certificate_chain_pem_path,\r\n                tls_certificate_private_key_pem_path,\r\n            )\r\n            if adapter_type == 'pyopenssl':\r\n                tls_adapter.context = tls_adapter.get_context()\r\n                tls_adapter.context.set_verify(\r\n                    _stdlib_to_openssl_verify[tls_verify_mode],\r\n                    lambda conn, cert, errno, depth, preverify_ok: preverify_ok,\r\n                )\r\n            else:\r\n                tls_adapter.context.verify_mode = tls_verify_mode\r\n    \r\n            ca.configure_trust(tls_adapter.context)\r\n            tls_certificate.configure_cert(tls_adapter.context)\r\n    \r\n            tlshttpserver = tls_http_server.send(\r\n                (\r\n                    (interface, port),\r\n                    tls_adapter,\r\n                ),\r\n            )\r\n    \r\n            interface, _host, port = _get_conn_data(tlshttpserver.bind_addr)\r\n    \r\n            make_https_request = functools.partial(\r\n                requests.get,\r\n                'https://' + interface + ':' + str(port) + '/',\r\n    \r\n                # Server TLS certificate verification:\r\n                verify=tls_ca_certificate_pem_path,\r\n    \r\n                # Client TLS certificate verification:\r\n                cert=cl_pem,\r\n            )\r\n    \r\n            if not test_cert_rejection:\r\n                resp = make_https_request()\r\n                assert resp.status_code == 200\r\n                assert resp.text == 'Hello world!'\r\n                return\r\n    \r\n            with pytest.raises(requests.exceptions.SSLError) as ssl_err:\r\n>               make_https_request()\r\n\r\ncheroot/test/test_ssl.py:290: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n.tox/python/lib/python3.7/site-packages/requests/api.py:75: in get\r\n    return request('get', url, params=params, **kwargs)\r\n.tox/python/lib/python3.7/site-packages/requests/api.py:60: in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n.tox/python/lib/python3.7/site-packages/requests/sessions.py:533: in request\r\n    resp = self.send(prep, **send_kwargs)\r\n.tox/python/lib/python3.7/site-packages/requests/sessions.py:646: in send\r\n    r = adapter.send(request, **kwargs)\r\n.tox/python/lib/python3.7/site-packages/requests/adapters.py:449: in send\r\n    timeout=timeout\r\n.tox/python/lib/python3.7/site-packages/urllib3/connectionpool.py:600: in urlopen\r\n    chunked=chunked)\r\n.tox/python/lib/python3.7/site-packages/urllib3/connectionpool.py:384: in _make_request\r\n    six.raise_from(e, None)\r\n<string>:2: in raise_from\r\n    ???\r\n.tox/python/lib/python3.7/site-packages/urllib3/connectionpool.py:380: in _make_request\r\n    httplib_response = conn.getresponse()\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/client.py:1321: in getresponse\r\n    response.begin()\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/client.py:296: in begin\r\n    version, status, reason = self._read_status()\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/client.py:257: in _read_status\r\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socket.py:589: in readinto\r\n    return self._sock.recv_into(b)\r\n.tox/python/lib/python3.7/site-packages/urllib3/contrib/pyopenssl.py:294: in recv_into\r\n    return self.connection.recv_into(*args, **kwargs)\r\n.tox/python/lib/python3.7/site-packages/OpenSSL/SSL.py:1822: in recv_into\r\n    self._raise_ssl_error(self._ssl, result)\r\n.tox/python/lib/python3.7/site-packages/OpenSSL/SSL.py:1647: in _raise_ssl_error\r\n    _raise_current_error()\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nexception_type = <class 'OpenSSL.SSL.Error'>\r\n\r\n    def exception_from_error_queue(exception_type):\r\n        \"\"\"\r\n        Convert an OpenSSL library failure into a Python exception.\r\n    \r\n        When a call to the native OpenSSL library fails, this is usually signalled\r\n        by the return value, and an error code is stored in an error queue\r\n        associated with the current thread. The err library provides functions to\r\n        obtain these error codes and textual error messages.\r\n        \"\"\"\r\n        errors = []\r\n    \r\n        while True:\r\n            error = lib.ERR_get_error()\r\n            if error == 0:\r\n                break\r\n            errors.append((\r\n                text(lib.ERR_lib_error_string(error)),\r\n                text(lib.ERR_func_error_string(error)),\r\n                text(lib.ERR_reason_error_string(error))))\r\n    \r\n>       raise exception_type(errors)\r\nE       OpenSSL.SSL.Error: [('SSL routines', 'ssl3_read_bytes', 'tlsv1 alert unknown ca')]\r\n\r\n.tox/python/lib/python3.7/site-packages/OpenSSL/_util.py:54: Error\r\n```\r\n\r\n\ud83d\udccb **Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: master (e616c254)\r\n- CherryPy version: n/a\r\n- Python version: 3.7.2\r\n- OS: macOS 10.14.3\r\n- Browser: n/a\r\n\r\n\ud83d\udccb **Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n(e.g. detailed explanation, tracebacks, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/172", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/172/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/172/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/172/events", "html_url": "https://github.com/cherrypy/cheroot/issues/172", "id": 406486224, "node_id": "MDU6SXNzdWU0MDY0ODYyMjQ=", "number": 172, "title": "Unable to run tests locally (macOS)", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-04T19:38:56Z", "updated_at": "2019-02-04T20:48:38Z", "closed_at": "2019-02-04T20:45:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n\r\nRunning `tox` on macOS with Python 3.7.2, I get an error: `/bin/sh: circleci: command not found`, and tests \"succeed\".\r\n\r\n```\r\ncheroot hexaclock-master $ tox                                                                                                                                                           \r\npython recreate: /Users/jaraco/code/public/cherrypy/cheroot/.tox/python\r\npython installdeps: setuptools>=31.0.1\r\npython develop-inst: /Users/jaraco/code/public/cherrypy/cheroot\r\npython installed: argh==0.26.2,asn1crypto==0.24.0,atomicwrites==1.3.0,attrs==18.2.0,backports.functools-lru-cache==1.5,backports.unittest-mock==1.4,certifi==2018.11.29,cffi==1.11.5,chardet==3.0.4,-e git+gh://cherrypy/cheroot@1be10238164f82a7d83bfa8a404a3f1f9961cdf3#egg=cheroot,codecov==2.0.15,colorama==0.4.1,coverage==4.5.2,cryptography==2.5,ddt==1.2.0,docopt==0.6.2,idna==2.8,more-itertools==5.0.0,packaging==19.0,pathtools==0.1.2,pluggy==0.8.1,py==1.7.0,pycparser==2.19,pyOpenSSL==19.0.0,pyparsing==2.3.1,pytest==4.2.0,pytest-cov==2.6.1,pytest-sugar==0.9.2,pytest-testmon==0.9.14,pytest-watch==4.2.0,PyYAML==3.13,requests==2.21.0,six==1.12.0,termcolor==1.1.0,trustme==0.5.0,urllib3==1.24.1,watchdog==0.9.0\r\npython run-test-pre: PYTHONHASHSEED='1582271056'\r\npython runtests: commands[0] | rm -rf .eggs/\r\npython runtests: commands[1] | sh -c 'if [ -z '\"'\"'$CIRCLECI'\"'\"' ]; then pytest --testmon-off ; fi'\r\npython runtests: commands[2] | sh -c 'if [ -n '\"'\"'$CIRCLECI'\"'\"' ]; then circleci tests glob **/test/**.py | circleci tests split --split-by=timings | xargs pytest --testmon-off ; fi'\r\n/bin/sh: circleci: command not found\r\n/bin/sh: circleci: command not found\r\npython runtests: commands[3] | codecov -f coverage.xml -X gcov\r\n\r\n      _____          _\r\n     / ____|        | |\r\n    | |     ___   __| | ___  ___ _____   __\r\n    | |    / _ \\ / _  |/ _ \\/ __/ _ \\ \\ / /\r\n    | |___| (_) | (_| |  __/ (_| (_) \\ V /\r\n     \\_____\\___/ \\____|\\___|\\___\\___/ \\_/\r\n                                    v2.0.15\r\n\r\n==> Detecting CI provider\r\n  -> Got branch from git/hg\r\n  -> Got sha from git/hg\r\n==> Preparing upload\r\nError: Missing repository upload token\r\n\r\nTip: See all example repositories: https://github.com/codecov?query=example\r\nSupport channels:\r\n  Email:   hello@codecov.io\r\n  IRC:     #codecov\r\n  Gitter:  https://gitter.im/codecov/support\r\n  Twitter: @codecov\r\n\r\n________________________________________________________________________________________ summary ________________________________________________________________________________________\r\n  python: commands succeeded\r\n  congratulations :)\r\n```\r\n\r\n\u2753 **What is the motivation / use case for changing the behavior?**\r\n\r\nIt should be possible for anyone on any major platform to run `tox` and tests should run on the Python in which tox is installed. Ideally, there should be no other environment dependencies such as \"sh\" and \"rm\" and \"xargs\" and \"circleci\". It's okay if there are scripts for those environments that rely on tools generally provided by those environments, but the base tests should be runnable with only tox.\r\n\r\n\ud83d\udca1 **To Reproduce**\r\n\r\nSee problem description.\r\n\r\n\ud83d\udca1 **Expected behavior**\r\n\r\nTests should run before succeeding.\r\n\r\n\ud83d\udccb **Details**\r\n\r\nn/a\r\n\r\n\ud83d\udccb **Environment**\r\n\r\n- Cheroot version: https://github.com/hexaclock/cheroot/tree/12471991b2b202ea1a5bb21c818f59b54415e207\r\n- CherryPy version: n/a\r\n- Python version: 3.7.2\r\n- OS: macOS 10.14.3\r\n- Browser: n/a\r\n\r\n\ud83d\udccb **Additional context**\r\n\r\nn/a", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/168", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/168/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/168/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/168/events", "html_url": "https://github.com/cherrypy/cheroot/issues/168", "id": 401503868, "node_id": "MDU6SXNzdWU0MDE1MDM4Njg=", "number": 168, "title": "Include a current readme file into the front page of docs", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-21T20:41:41Z", "updated_at": "2019-01-23T21:34:24Z", "closed_at": "2019-01-23T21:34:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It's a task for @serhii73.\r\n\r\n\u2753 **I'm submitting a ...**\r\n- [ ] \ud83d\udc1e bug report\r\n- [X] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Is your feature request related to a problem? Please describe.**\r\n<!--\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n-->\r\nIndex page is half-empty.\r\n\r\n\ud83d\udc23 **Describe the solution you'd like**\r\n<!--\r\nA clear and concise description of what you want to happen.\r\n-->\r\nAdd `README.rst` to `index.rst` using sphinx include directive.\r\n\r\n\ud83d\udccb **Describe alternatives you've considered**\r\n<!--\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n-->\r\nN/A\r\n\r\n\ud83d\udccb **Additional context**\r\n<!--\r\nAdd any other context or screenshots about the feature request here.\r\n(e.g. detailed explanation, related issues, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\nN/A", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/167", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/167/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/167/events", "html_url": "https://github.com/cherrypy/cheroot/issues/167", "id": 401502744, "node_id": "MDU6SXNzdWU0MDE1MDI3NDQ=", "number": 167, "title": "Improve contributing page with context UI", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-21T20:37:22Z", "updated_at": "2019-02-12T13:28:06Z", "closed_at": "2019-02-12T13:28:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It's a task for @serhii73.\r\n\r\n\u2753 **I'm submitting a ...**\r\n- [ ] \ud83d\udc1e bug report\r\n- [X] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Is your feature request related to a problem? Please describe.**\r\n<!--\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n-->\r\nMove code snippets to side panel separate from the raw text. Use tabs to show only one alternative option at a time.\r\n\r\n\ud83d\udc23 **Describe the solution you'd like**\r\n<!--\r\nA clear and concise description of what you want to happen.\r\n-->\r\nImprove #165 by using https://sphinxcontrib-contentui.readthedocs.io/en/latest/tabs.html / https://github.com/djungelorm/sphinx-tabs.\r\n\r\n\ud83d\udccb **Describe alternatives you've considered**\r\n<!--\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n-->\r\nN/A\r\n\r\n\ud83d\udccb **Additional context**\r\n<!--\r\nAdd any other context or screenshots about the feature request here.\r\n(e.g. detailed explanation, related issues, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\nN/A", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/162", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/162/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/162/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/162/events", "html_url": "https://github.com/cherrypy/cheroot/issues/162", "id": 396293044, "node_id": "MDU6SXNzdWUzOTYyOTMwNDQ=", "number": 162, "title": "ChunkedRFile fails with pyopenssl.SSLFileobjectStreamReader", "user": {"login": "mar10", "id": 41663, "node_id": "MDQ6VXNlcjQxNjYz", "avatar_url": "https://avatars3.githubusercontent.com/u/41663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mar10", "html_url": "https://github.com/mar10", "followers_url": "https://api.github.com/users/mar10/followers", "following_url": "https://api.github.com/users/mar10/following{/other_user}", "gists_url": "https://api.github.com/users/mar10/gists{/gist_id}", "starred_url": "https://api.github.com/users/mar10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mar10/subscriptions", "organizations_url": "https://api.github.com/users/mar10/orgs", "repos_url": "https://api.github.com/users/mar10/repos", "events_url": "https://api.github.com/users/mar10/events{/privacy}", "received_events_url": "https://api.github.com/users/mar10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 965607071, "node_id": "MDU6TGFiZWw5NjU2MDcwNzE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20missing", "name": "reproducer: missing", "color": "e23c36", "default": false, "description": "This PR or issue lacks code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-06T20:48:52Z", "updated_at": "2019-04-08T10:24:46Z", "closed_at": "2019-04-08T10:24:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n\u2753 **I'm submitting a ...**\r\n- [X] \ud83d\udc1e bug report\r\n- [ ] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Describe the bug. What is the current behavior?**\r\n\r\n\r\n\ud83d\udccb **Environment**\r\n- Cheroot version: 6.4.5 and master\r\n- Python version: 3.7.X\r\n- OS: macOS\r\n\r\n\ud83d\udccb **Additional context**\r\nException\r\n```pytb\r\nTraceback (most recent call last):\r\n  File \"/Users/martin/prj/git/wsgidav/wsgidav/request_server.py\", line 830, in do_PUT\r\n    fileobj.writelines(data_stream)\r\n  File \"/Users/martin/prj/git/wsgidav/wsgidav/request_server.py\", line 682, in _stream_data_chunked\r\n    buf = environ[\"wsgi.input\"].read(block_size)\r\n  File \"/Users/martin/.local/share/virtualenvs/wsgidav-9PbuForg/lib/python3.7/site-packages/cheroot/server.py\", line 524, in read\r\n    self._fetch()\r\n  File \"/Users/martin/.local/share/virtualenvs/wsgidav-9PbuForg/lib/python3.7/site-packages/cheroot/server.py\", line 470, in _fetch\r\n    line = self.rfile.readline()\r\nTypeError: readline() missing 1 required positional argument: 'size'\r\n```\r\n\r\nThe wsgi.input value contains a cheroot.server.ChunkedRFile object, which in turn contains a cheroot.ssl.pyopenssl.SSLFileobjectStreamReader:\r\n\r\n<img width=\"924\" alt=\"bildschirmfoto 2019-01-06 um 21 25 46\" src=\"https://user-images.githubusercontent.com/41663/50741173-f5360d80-11f9-11e9-8011-f3462a007830.png\">\r\n\r\ncheroot/server.py\", line 470, in _fetch() calls \r\n```py\r\n    def _fetch(self):\r\n        if self.closed:\r\n            return\r\n\r\n        line = self.rfile.readline()\r\n```\r\n\r\nwhich is not valid, because `size` is mandatory in /cheroot/ssl/pyopenssl.py readline(size)\r\n```py\r\nclass SSLFileobjectStreamReader(SSLFileobjectMixin, StreamReader):\r\n    \"\"\"SSL file object attached to a socket object.\"\"\"\r\n\r\nclass SSLFileobjectMixin:\r\n    \"\"\"Base mixin for an SSL socket stream.\"\"\"\r\n    ...\r\n    def readline(self, size):\r\n        \"\"\"Receive message of a size from the socket.\"\"\"\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/161", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/161/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/161/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/161/events", "html_url": "https://github.com/cherrypy/cheroot/issues/161", "id": 395113450, "node_id": "MDU6SXNzdWUzOTUxMTM0NTA=", "number": 161, "title": "[TODO] Design a good cheroot.testing API", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-01T21:28:34Z", "updated_at": "2019-10-13T22:43:00Z", "closed_at": "2019-10-13T22:43:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\u2753 **I'm submitting a ...**\r\n- [ ] \ud83d\udc1e bug report\r\n- [X] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Is your feature request related to a problem? Please describe.**\r\n<!--\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n-->\r\nIt's a follow-up for https://github.com/cherrypy/cheroot/issues/42#issuecomment-418195852\r\n\r\n\ud83d\udc23 **Describe the solution you'd like**\r\n<!--\r\nA clear and concise description of what you want to happen.\r\n-->\r\n`cheroot.testing` should provide a way for testing HTTP and WSGI apps by our end-users. Wrapping [`pyriform`](https://pypi.org/project/pyriform/) ([src](https://github.com/the-allanc/pyriform/)/[doc](https://pyriform.readthedocs.io/en/stable/)) and/or [`webtest`](https://pypi.org/project/WebTest/) ([src](https://github.com/Pylons/webtest)/[doc](https://docs.pylonsproject.org/projects/webtest/en/latest/)) is probably a good idea too. I'm thinking of a set of pytest fixtures available to users and deprecating `cheroot.test.webtest` and `cheroot.test.helpers` modules.\r\n\r\n\ud83d\udccb **Describe alternatives you've considered**\r\n<!--\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n-->\r\nN/A\r\n\r\n\ud83d\udccb **Additional context**\r\n<!--\r\nAdd any other context or screenshots about the feature request here.\r\n(e.g. detailed explanation, related issues, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/156", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/156/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/156/events", "html_url": "https://github.com/cherrypy/cheroot/issues/156", "id": 394754545, "node_id": "MDU6SXNzdWUzOTQ3NTQ1NDU=", "number": 156, "title": "Setuptools version required for sdist is old", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-12-29T02:54:35Z", "updated_at": "2019-10-09T22:29:06Z", "closed_at": "2019-10-09T22:29:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The pyproject.toml specifies setuptools 30.x, but for python_requires to be supported in declarative config, setuptools 34.4 is required. This bug was fixed in jaraco/skeleton.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/155", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/155/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/155/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/155/events", "html_url": "https://github.com/cherrypy/cheroot/issues/155", "id": 394754308, "node_id": "MDU6SXNzdWUzOTQ3NTQzMDg=", "number": 155, "title": "Project should avoid invoking setup.py", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-12-29T02:50:59Z", "updated_at": "2019-12-16T16:25:30Z", "closed_at": "2019-12-16T16:25:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As easy_install and eggs are deprecated and as setup_requires of 'setuptools_scm' indicates for easy_install to install an egg if the requirement isn't met, any invocation of setup.py that hasn't already satisfied the setup_requires will invoke easy install. Let's work to remove those invocations. Feel free to draw inspiration from jaraco/skeleton, which demonstrates how to not to rely on setup_requires while still checking the docs (pytest-checkdocs).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/154", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/154/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/154/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/154/events", "html_url": "https://github.com/cherrypy/cheroot/issues/154", "id": 394754109, "node_id": "MDU6SXNzdWUzOTQ3NTQxMDk=", "number": 154, "title": "setup.cfg shouldn't supply 'license'", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-29T02:48:07Z", "updated_at": "2018-12-31T12:53:06Z", "closed_at": "2018-12-31T12:53:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The license parameter to setup should be removed. The docs for that parameter indicate that the parameter is only intended when the license can't be specified by the trove classifiers.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/152", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/152/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/152/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/152/events", "html_url": "https://github.com/cherrypy/cheroot/issues/152", "id": 393888918, "node_id": "MDU6SXNzdWUzOTM4ODg5MTg=", "number": 152, "title": "Document dev env setup and how to run tests locally", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-12-24T14:14:53Z", "updated_at": "2019-02-07T13:06:18Z", "closed_at": "2019-02-07T13:06:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is a task for @serhii73.\r\n\r\n\u2753 **I'm submitting a ...**\r\n- [ ] \ud83d\udc1e bug report\r\n- [X] \ud83d\udc23 feature request\r\n- [ ] \u2753 question about the decisions made in the repository\r\n\r\n\ud83d\udc1e **Is your feature request related to a problem? Please describe.**\r\n<!--\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n-->\r\nPython newbies fail to identify that [tox](https://tox.readthedocs.io/) is a key dev env tool allowing us to run tests locally the same way as CI does.\r\n\r\n\ud83d\udc23 **Describe the solution you'd like**\r\n<!--\r\nA clear and concise description of what you want to happen.\r\n-->\r\nI want our RTD site to have a page https://cheroot.cherrypy.org/en/latest/contribute.html outlining the details of how to start contributing into the project, how to set up a dev env, how to run full test suite, separate envs or tests and how to build docs locally.\r\nIt should also include https://github.com/cherrypy/cheroot/blob/master/.github/CONTRIBUTING.rst using SphinX's `include` directive.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/138", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/138/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/138/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/138/events", "html_url": "https://github.com/cherrypy/cheroot/issues/138", "id": 379444974, "node_id": "MDU6SXNzdWUzNzk0NDQ5NzQ=", "number": 138, "title": "Google App Engine - ImportError: No module named grp ", "user": {"login": "zippy84", "id": 373343, "node_id": "MDQ6VXNlcjM3MzM0Mw==", "avatar_url": "https://avatars1.githubusercontent.com/u/373343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zippy84", "html_url": "https://github.com/zippy84", "followers_url": "https://api.github.com/users/zippy84/followers", "following_url": "https://api.github.com/users/zippy84/following{/other_user}", "gists_url": "https://api.github.com/users/zippy84/gists{/gist_id}", "starred_url": "https://api.github.com/users/zippy84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zippy84/subscriptions", "organizations_url": "https://api.github.com/users/zippy84/orgs", "repos_url": "https://api.github.com/users/zippy84/repos", "events_url": "https://api.github.com/users/zippy84/events{/privacy}", "received_events_url": "https://api.github.com/users/zippy84/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 893194325, "node_id": "MDU6TGFiZWw4OTMxOTQzMjU=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/regression", "name": "regression", "color": "bf3b5a", "default": false, "description": "Something that worked earlier got broken in new release"}, {"id": 965607071, "node_id": "MDU6TGFiZWw5NjU2MDcwNzE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20missing", "name": "reproducer: missing", "color": "e23c36", "default": false, "description": "This PR or issue lacks code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2018-11-09T16:56:24Z", "updated_at": "2018-11-23T13:18:54Z", "closed_at": "2018-11-23T13:18:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm trying to run CherryPy in Googles App Engine. Because I only can use Python 2.7 I installed an older version of CherryPy with pip install -t /home/zippy/ecl/ecl_cherrypy/lib \"CherryPy==17.4.0\". \r\n\r\nAnd now I get:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/zippy/ecl/google_appengine/google/appengine/runtime/wsgi.py\", line 240, in Handle\r\n    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())\r\n  File \"/home/zippy/ecl/google_appengine/google/appengine/runtime/wsgi.py\", line 299, in _LoadHandler\r\n    handler, path, err = LoadObject(self._handler)\r\n  File \"/home/zippy/ecl/google_appengine/google/appengine/runtime/wsgi.py\", line 85, in LoadObject\r\n    obj = __import__(path[0])\r\n  File \"/home/zippy/ecl/ecl_cherrypy/ecl.py\", line 9, in <module>\r\n    import cherrypy\r\n  File \"/home/zippy/ecl/ecl_cherrypy/lib/cherrypy/__init__.py\", line 76, in <module>\r\n    from . import _cprequest, _cpserver, _cptree, _cplogging, _cpconfig\r\n  File \"/home/zippy/ecl/ecl_cherrypy/lib/cherrypy/_cprequest.py\", line 13, in <module>\r\n    from cherrypy import _cpreqbody\r\n  File \"/home/zippy/ecl/ecl_cherrypy/lib/cherrypy/_cpreqbody.py\", line 135, in <module>\r\n    import cheroot.server\r\n  File \"/home/zippy/ecl/ecl_cherrypy/lib/cheroot/server.py\", line 102, in <module>\r\n    import grp\r\n  File \"/home/zippy/ecl/google_appengine/google/appengine/tools/devappserver2/python/runtime/sandbox.py\", line 1095, in load_module\r\n    raise ImportError('No module named %s' % fullname)\r\nImportError: No module named grp\r\n```\r\nCould you say what's wrong with it?\r\n\r\n`python2 -c \"import grp\"` works fine.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/136", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/136/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/136/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/136/events", "html_url": "https://github.com/cherrypy/cheroot/issues/136", "id": 376356638, "node_id": "MDU6SXNzdWUzNzYzNTY2Mzg=", "number": 136, "title": "Travis CI: Should pypy and pypy3 be upgraded to v6.0.0?", "user": {"login": "cclauss", "id": 3709715, "node_id": "MDQ6VXNlcjM3MDk3MTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3709715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cclauss", "html_url": "https://github.com/cclauss", "followers_url": "https://api.github.com/users/cclauss/followers", "following_url": "https://api.github.com/users/cclauss/following{/other_user}", "gists_url": "https://api.github.com/users/cclauss/gists{/gist_id}", "starred_url": "https://api.github.com/users/cclauss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cclauss/subscriptions", "organizations_url": "https://api.github.com/users/cclauss/orgs", "repos_url": "https://api.github.com/users/cclauss/repos", "events_url": "https://api.github.com/users/cclauss/events{/privacy}", "received_events_url": "https://api.github.com/users/cclauss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-01T11:35:30Z", "updated_at": "2018-12-08T01:42:30Z", "closed_at": "2018-12-08T01:42:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Update: Blocked by https://travis-ci.community/t/support-for-pypy-pypy3-v6-0-python/1249 (travis-ci/travis-ci#9542)\r\n\r\n<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n\r\n**I'm submitting a ...**\r\n- [ ] bug report\r\n- [X] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n<!--\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n-->\r\nThe current .travis.yml seems to be [running old PyPy versions](https://github.com/cherrypy/cheroot/blob/master/.travis.yml#L12-L13) and the comments are saying that PyPy does not work on macOS.  On my Mac...\r\n\r\n$ __pypy -V__\r\n```\r\nPython 2.7.13 (ab0b9caf307db6592905a80b8faffd69b39005b8, Jun 17 2018, 13:50:59)\r\n[PyPy 6.0.0 with GCC 4.2.1 Compatible Apple LLVM 9.1.0 (clang-902.0.39.2)]\r\n```\r\n$ __pypy3 -V__\r\n```\r\nPython 3.5.3 (fdd60ed87e941677e8ea11acf9f1819466521bf2, Apr 26 2018, 01:25:35)\r\n[PyPy 6.0.0 with GCC 4.2.1 Compatible Apple LLVM 9.1.0 (clang-902.0.39.1)]\r\n```\r\n\r\n**Describe the solution you'd like**\r\n<!--\r\nA clear and concise description of what you want to happen.\r\n-->\r\nTravis CI tests with PyPy v6 and PyPy3 v6\r\n\r\n**Describe alternatives you've considered**\r\n<!--\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n-->\r\n\r\n\r\n\r\n**Additional context**\r\n<!--\r\nAdd any other context or screenshots about the feature request here.\r\n(e.g. detailed explanation, related issues, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/135", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/135/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/135/events", "html_url": "https://github.com/cherrypy/cheroot/issues/135", "id": 372896186, "node_id": "MDU6SXNzdWUzNzI4OTYxODY=", "number": 135, "title": "cheroot.wsgi lacks ssl support", "user": {"login": "vanrein", "id": 1358341, "node_id": "MDQ6VXNlcjEzNTgzNDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1358341?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vanrein", "html_url": "https://github.com/vanrein", "followers_url": "https://api.github.com/users/vanrein/followers", "following_url": "https://api.github.com/users/vanrein/following{/other_user}", "gists_url": "https://api.github.com/users/vanrein/gists{/gist_id}", "starred_url": "https://api.github.com/users/vanrein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vanrein/subscriptions", "organizations_url": "https://api.github.com/users/vanrein/orgs", "repos_url": "https://api.github.com/users/vanrein/repos", "events_url": "https://api.github.com/users/vanrein/events{/privacy}", "received_events_url": "https://api.github.com/users/vanrein/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-23T09:21:41Z", "updated_at": "2018-10-23T12:42:09Z", "closed_at": "2018-10-23T09:33:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n\r\n**I'm submitting a ...**\r\n- [ ] bug report\r\n- [X] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nI was trying to use `cheroot.wsgi` with an `ssl_module` but, as far as I can tell, this is not a supported combination.  I tried the documentation and code to find the link.\r\n\r\n\r\n**Describe the solution you'd like**\r\nA parameter in `cheroot.wsgi.Server` that welcomes a subclass of `cheroot.ssl.Adapter` would be welcome.\r\n\r\n**Describe alternatives you've considered**\r\nThe `HTTPServer` supports it, but this is not a WSGI `Gateway`.\r\n\r\n\r\n\r\n**Additional context**\r\nN/A", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/133", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/133/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/133/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/133/events", "html_url": "https://github.com/cherrypy/cheroot/issues/133", "id": 372211283, "node_id": "MDU6SXNzdWUzNzIyMTEyODM=", "number": 133, "title": "Slow writes for large response body for HTTPS connection ", "user": {"login": "nav-agarwal", "id": 4910144, "node_id": "MDQ6VXNlcjQ5MTAxNDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4910144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nav-agarwal", "html_url": "https://github.com/nav-agarwal", "followers_url": "https://api.github.com/users/nav-agarwal/followers", "following_url": "https://api.github.com/users/nav-agarwal/following{/other_user}", "gists_url": "https://api.github.com/users/nav-agarwal/gists{/gist_id}", "starred_url": "https://api.github.com/users/nav-agarwal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nav-agarwal/subscriptions", "organizations_url": "https://api.github.com/users/nav-agarwal/orgs", "repos_url": "https://api.github.com/users/nav-agarwal/repos", "events_url": "https://api.github.com/users/nav-agarwal/events{/privacy}", "received_events_url": "https://api.github.com/users/nav-agarwal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-20T13:20:39Z", "updated_at": "2018-12-04T09:20:55Z", "closed_at": "2018-10-23T00:06:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n**I'm submitting a ...**\r\n- [X] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Describe the bug. What is the current behavior?**\r\n\r\nPerformance Bug\r\nSlow writes observed(<2MB/permin) in case of large response body(around 300MB) when using HTTPS connection\r\n\r\n\r\n**What is the motivation / use case for changing the behavior?**\r\nPoor download performance for HTTPS connection on local server\r\n\r\n**To Reproduce**\r\n\r\nSteps to reproduce the behavior:\r\n1. Setup HTTPS cherrypy server\r\n ```python\r\nimport cherrypy\r\nclass Root(object):\r\n    @cherrypy.expose\r\n    def index(self):\r\n        cherrypy.log(\"Inside index\")\r\n        buff = \"a\" * 1024 * 1024 * 300\r\n        return buff\r\n\r\nif __name__ == '__main__':\r\n    config = {\r\n            'server.ssl_certificate': 'cert.pem',\r\n            'server.ssl_private_key': 'privkey.pem',\r\n            'server.ssl_module' : 'pyopenssl',\r\n    }\r\n    cherrypy.config.update(config)\r\n    cherrypy.quickstart(Root())\r\n\r\n```\r\n2. Make requests\r\n```python\r\nimport requests\r\nr = requests.post(\"https://localhost:8080\", verify=False)\r\n```\r\n\r\n**Expected behavior**\r\nOn HTTP connection same requests finishes within seconds\r\n\r\n\r\n**Details**\r\nRoot Cause:Bug is due to following code in write function of makefile. This function is used for HTTPS connection writes only:\r\n`data = data[bytes_sent:]`\r\nHere we are copying almost complete buffer after every socket write. In python. slices leads to copy of remaining buffere as strings are immutable.\r\nPossible fix:\r\nDo chunking in small buffers by matining idx till which write has happened\r\n\r\n**Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: 6.5.2\r\n- CherryPy version: 17.4.0\r\n- Python version: 2.7.13\r\n- OS: Ubuntu 14.04.5 LTS\r\n- Browser: -\r\n\r\n**Additional context**\r\nPerformance Bug\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/132", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/132/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/132/events", "html_url": "https://github.com/cherrypy/cheroot/issues/132", "id": 369401505, "node_id": "MDU6SXNzdWUzNjk0MDE1MDU=", "number": 132, "title": "OpenSSL fails to do handshake (or smth else?) after upgrading from Python 2.7 to Python 3.7", "user": {"login": "matingara", "id": 2230635, "node_id": "MDQ6VXNlcjIyMzA2MzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2230635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matingara", "html_url": "https://github.com/matingara", "followers_url": "https://api.github.com/users/matingara/followers", "following_url": "https://api.github.com/users/matingara/following{/other_user}", "gists_url": "https://api.github.com/users/matingara/gists{/gist_id}", "starred_url": "https://api.github.com/users/matingara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matingara/subscriptions", "organizations_url": "https://api.github.com/users/matingara/orgs", "repos_url": "https://api.github.com/users/matingara/repos", "events_url": "https://api.github.com/users/matingara/events{/privacy}", "received_events_url": "https://api.github.com/users/matingara/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 965607071, "node_id": "MDU6TGFiZWw5NjU2MDcwNzE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20missing", "name": "reproducer: missing", "color": "e23c36", "default": false, "description": "This PR or issue lacks code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-10-12T05:10:39Z", "updated_at": "2018-12-30T23:42:23Z", "closed_at": "2018-12-30T23:42:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n**I'm submitting a ...**\r\n- [X] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Describe the bug. What is the current behavior?**\r\n\r\nBelow is a REPL session using Python 2.7 and another REPL session using Python 3.7.\r\nCan anyone please shed any light on this?\r\nThanks.\r\n\r\n**What is the motivation / use case for changing the behavior?**\r\n\r\n???\r\n\r\n**To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nSteps to reproduce the behavior:\r\nPYTHON 3.7 REPL SESSION\r\n```python\r\nPython 3.7.0 (v3.7.0:1bf9cc5093, Jun 26 2018, 23:26:24)\r\n[Clang 6.0 (clang-600.0.57)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import cherrypy\r\n>>> server_config={\r\n...       'server.ssl_module':'pyopenssl',\r\n...       'server.ssl_certificate':'cert.pem',\r\n...       'server.ssl_private_key':'key.pem'\r\n... }\r\n>>> cherrypy.config.update(server_config)\r\n>>> cherrypy.server.socket_host = '127.0.0.1'\r\n>>> cherrypy.server.socket_port = 443\r\n>>> cherrypy.quickstart()\r\n[12/Oct/2018:16:08:55] ENGINE Listening for SIGTERM.\r\n[12/Oct/2018:16:08:55] ENGINE Listening for SIGHUP.\r\n[12/Oct/2018:16:08:55] ENGINE Listening for SIGUSR1.\r\n[12/Oct/2018:16:08:55] ENGINE Bus STARTING\r\nCherryPy Checker:\r\nThe Application mounted at '' has an empty config.\r\n\r\n[12/Oct/2018:16:08:55] ENGINE Started monitor thread 'Autoreloader'.\r\n[12/Oct/2018:16:08:55] ENGINE Serving on https://127.0.0.1\r\n[12/Oct/2018:16:08:55] ENGINE Bus STARTED\r\n[12/Oct/2018:16:08:55] ENGINE SysCallError(-1, 'Unexpected EOF')\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/cheroot/server.py\", line 1219, in communicate\r\n    req.parse_request()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/cheroot/server.py\", line 689, in parse_request\r\n    success = self.read_request_line()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/cheroot/server.py\", line 728, in read_request_line\r\n    request_line = self.rfile.readline()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/cheroot/server.py\", line 277, in readline\r\n    data = self.rfile.readline(256)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/_pyio.py\", line 513, in readline\r\n    b = self.read(nreadahead())\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/_pyio.py\", line 492, in nreadahead\r\n    readahead = self.peek(1)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/_pyio.py\", line 1076, in peek\r\n    return self._peek_unlocked(size)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/_pyio.py\", line 1083, in _peek_unlocked\r\n    current = self.raw.read(to_read)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socket.py\", line 589, in readinto\r\n    return self._sock.recv_into(b)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/OpenSSL/SSL.py\", line 1814, in recv_into\r\n    self._raise_ssl_error(self._ssl, result)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/OpenSSL/SSL.py\", line 1632, in _raise_ssl_error\r\n    raise SysCallError(-1, \"Unexpected EOF\")\r\nOpenSSL.SSL.SysCallError: (-1, 'Unexpected EOF')\r\n```\r\n\r\n**Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\nPYTHON 2.7 REPL SESSION\r\n```python\r\nPython 2.7.10 (default, Oct  6 2017, 22:29:07)\r\n[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)] on darwin\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import cherrypy\r\n>>> server_config={\r\n...       'server.ssl_module':'pyopenssl',\r\n...       'server.ssl_certificate':'cert.pem',\r\n...       'server.ssl_private_key':'key.pem'\r\n... }\r\n>>> cherrypy.config.update(server_config)\r\n>>> cherrypy.server.socket_host = '127.0.0.1'\r\n>>> cherrypy.server.socket_port = 443\r\n>>> cherrypy.quickstart()\r\n[12/Oct/2018:15:48:37] ENGINE Listening for SIGHUP.\r\n[12/Oct/2018:15:48:37] ENGINE Listening for SIGTERM.\r\n[12/Oct/2018:15:48:37] ENGINE Listening for SIGUSR1.\r\n[12/Oct/2018:15:48:37] ENGINE Bus STARTING\r\nCherryPy Checker:\r\nThe Application mounted at '' has an empty config.\r\n\r\n[12/Oct/2018:15:48:37] ENGINE Started monitor thread 'Autoreloader'.\r\n[12/Oct/2018:15:48:37] ENGINE Started monitor thread '_TimeoutMonitor'\r\n```\r\n\r\n**Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\n???\r\n\r\n**Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: X.X.X???\r\n- CherryPy version: X.X.X???\r\n- Python version: v3.7.0:1bf9cc5093\r\n- OS: macOS ???\r\n- Browser: ???\r\n\r\n**Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n(e.g. detailed explanation, tracebacks, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n???", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/118", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/118/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/118/events", "html_url": "https://github.com/cherrypy/cheroot/issues/118", "id": 366264834, "node_id": "MDU6SXNzdWUzNjYyNjQ4MzQ=", "number": 118, "title": "Handling an handshake timeout error when using ssl with the builtin module causes an \"IndexError: tuple index out of range\" error", "user": {"login": "mthornet", "id": 2540000, "node_id": "MDQ6VXNlcjI1NDAwMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/2540000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mthornet", "html_url": "https://github.com/mthornet", "followers_url": "https://api.github.com/users/mthornet/followers", "following_url": "https://api.github.com/users/mthornet/following{/other_user}", "gists_url": "https://api.github.com/users/mthornet/gists{/gist_id}", "starred_url": "https://api.github.com/users/mthornet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mthornet/subscriptions", "organizations_url": "https://api.github.com/users/mthornet/orgs", "repos_url": "https://api.github.com/users/mthornet/repos", "events_url": "https://api.github.com/users/mthornet/events{/privacy}", "received_events_url": "https://api.github.com/users/mthornet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 965607071, "node_id": "MDU6TGFiZWw5NjU2MDcwNzE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20missing", "name": "reproducer: missing", "color": "e23c36", "default": false, "description": "This PR or issue lacks code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-03T10:11:02Z", "updated_at": "2018-10-03T15:12:34Z", "closed_at": "2018-10-03T15:12:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**I'm submitting a ...**\r\n- [X] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Describe the bug. What is the current behavior?**\r\nUsing the builtin ssl module I sometimes get the following error\r\n```python-traceback\r\nENGINE Error in HTTPServer.tick\r\nTraceback (most recent call last):\r\n  File \".\\python-2.7.13\\Lib\\site-packages\\cheroot\\server.py\", line 1721, in serve\r\n  File \".\\python-2.7.13\\Lib\\site-packages\\cheroot\\server.py\", line 1914, in tick\r\n  File \".\\python-2.7.13\\Lib\\site-packages\\cheroot\\ssl\\builtin.py\", line 138, in wrap\r\n  File \".\\python-2.7.13\\Lib\\site-packages\\cheroot\\ssl\\builtin.py\", line 47, in _assert_ssl_exc_contains\r\nIndexError: tuple index out of range\r\n```\r\n**What is the motivation / use case for changing the behavior?**\r\n\r\n\r\n**To Reproduce**\r\nThis is difficult to reproduce, but basically this happens once in a while when running a https server using the builtin ssl module, seems to happen more frequently when the client is Chrome\r\n\r\n**Expected behavior**\r\nis to not throw this exception\r\n\r\n**Details**\r\nThis happens when checking if an SSLError is a 'handshake operation timed out' error. so it seems that not all SSLErrors are thrown in the same way\r\n\r\n**Environment**\r\n- Cheroot version: 6.5.2\r\n- CherryPy version: 17.3.0 (if applicable)\r\n- Python version: 2.7.13\r\n- OS: Windows 10\r\n- Browser: all (but mostly chrome)\r\n\r\n**Additional context**\r\ncould be fixed by changing the way the exception message is being extracted from the SSLError exception\r\nin builtin.py line 47\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/114", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/114/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/114/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/114/events", "html_url": "https://github.com/cherrypy/cheroot/issues/114", "id": 358272207, "node_id": "MDU6SXNzdWUzNTgyNzIyMDc=", "number": 114, "title": "[TODO] Ensure that ephemeral port does not have reuse flag", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-08T07:20:22Z", "updated_at": "2018-11-25T22:41:59Z", "closed_at": "2018-11-25T22:41:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\n**** DELETE THIS BLOCK ****  \r\n\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n\r\n**** /DELETE THIS BLOCK ****  \r\n-->\r\nThere's information that SO_REUSEADDR is harmful when combined with an ephemeral port: https://gavv.github.io/blog/ephemeral-port-reuse/\r\nWe need to check this.\r\n\r\n* **I'm submitting a ...**\r\n- [x] bug report\r\n- [ ] feature request\r\n- [x] question about the decisions made in the repository\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\nDunno yet\r\n\r\n\r\n* **What is the current behavior?**\r\n-\r\n\r\n\r\n* **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\nUse port=0 when binding.\r\n\r\n\r\n* **What is the expected behavior?**\r\nsocket allocation doesn't steal port from other apps.\r\n\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\nProbably reusing ephemeral port causes problems, haven't checked yet.\r\n\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Cheroot version: master\r\n- CherryPy version: N/A\r\n- Python version: 3.6.X\r\n- OS: POSIX?\r\n- Browser: N/A\r\n\r\n\r\n\r\n* **Other information** (e.g. detailed explanation, stacktraces, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\nhttps://github.com/Lawouach/WebSocket-for-Python/pull/243", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/113", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/113/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/113/events", "html_url": "https://github.com/cherrypy/cheroot/issues/113", "id": 356434961, "node_id": "MDU6SXNzdWUzNTY0MzQ5NjE=", "number": 113, "title": "Fix pyopenssl adapter under Python 3", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-09-03T09:53:59Z", "updated_at": "2018-12-31T13:56:45Z", "closed_at": "2018-12-30T16:27:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It works under Python 2, but not under Python 3.\r\nIt's a follow-up for #6\r\n\r\n**I'm submitting a ...**\r\n- [X] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Describe the bug. What is the current behavior?**\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\nIt raises exception `OpenSSL.SSL.WantReadError`.\r\n\r\n**What is the motivation / use case for changing the behavior?**\r\nI want consistency in SSL.\r\n\r\n**To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nSteps to reproduce the behavior: `tox -- --no-cov -s cheroot/test/test_ssl.py`\r\n\r\n**Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\nThat it'd work.\r\n\r\n**Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\n\r\n```python-traceback\r\n cheroot/test/test_ssl.py::test_ssl_adapters[builtin] \u2713                                                          50% \u2588\u2588\u2588\u2588\u2588     \r\nWantReadError()                                                                                                               \r\nTraceback (most recent call last):        \r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 1219, in communicate                                    \r\n    req.parse_request()            \r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 689, in parse_request                                   \r\n    success = self.read_request_line()        \r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 728, in read_request_line                               \r\n    request_line = self.rfile.readline()\r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 277, in readline                                        \r\n    data = self.rfile.readline(256)         \r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/_pyio.py\", line 513, in readline                                          \r\n    b = self.read(nreadahead())     \r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/_pyio.py\", line 492, in nreadahead\r\n    readahead = self.peek(1)      \r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/_pyio.py\", line 1076, in peek                                           \r\n    return self._peek_unlocked(size)                                                                                          \r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/_pyio.py\", line 1083, in _peek_unlocked                                   \r\n    current = self.raw.read(to_read)                                                                                           \r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/socket.py\", line 589, in readinto\r\n    return self._sock.recv_into(b)                                                                                             \r\n  File \"/home/wk/src/github/cherrypy/cheroot/.tox/python/lib/python3.7/site-packages/OpenSSL/SSL.py\", line 1814, in recv_into\r\n    self._raise_ssl_error(self._ssl, result)                       \r\n  File \"/home/wk/src/github/cherrypy/cheroot/.tox/python/lib/python3.7/site-packages/OpenSSL/SSL.py\", line 1614, in _raise_ssl_error\r\n    raise WantReadError()                                                                        \r\nOpenSSL.SSL.WantReadError\r\nException in thread CP Server Thread-13:                                                                                      Traceback (most recent call last):\r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 1219, in communicate\r\n    req.parse_request()\r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 689, in parse_request\r\n    success = self.read_request_line()\r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 728, in read_request_line\r\n    request_line = self.rfile.readline()\r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 277, in readline\r\n    data = self.rfile.readline(256)\r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/_pyio.py\", line 513, in readline\r\n    b = self.read(nreadahead())\r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/_pyio.py\", line 492, in nreadahead\r\n    readahead = self.peek(1)\r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/_pyio.py\", line 1076, in peek\r\n    return self._peek_unlocked(size)\r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/_pyio.py\", line 1083, in _peek_unlocked\r\n    current = self.raw.read(to_read)\r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/socket.py\", line 589, in readinto\r\n    return self._sock.recv_into(b)\r\n  File \"/home/wk/src/github/cherrypy/cheroot/.tox/python/lib/python3.7/site-packages/OpenSSL/SSL.py\", line 1814, in recv_into\r\n    self._raise_ssl_error(self._ssl, result)\r\n  File \"/home/wk/src/github/cherrypy/cheroot/.tox/python/lib/python3.7/site-packages/OpenSSL/SSL.py\", line 1614, in _raise_ssl_error\r\n    raise WantReadError()\r\nOpenSSL.SSL.WantReadError\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/threading.py\", line 917, in _bootstrap_inner\r\n    self.run()\r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/workers/threadpool.py\", line 112, in run                                     conn.communicate()\r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 1256, in communicate\r\n    self._conditional_error(req, '500 Internal Server Error')\r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 1282, in _conditional_error                                 req.simple_response(response)                             \r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/server.py\", line 1071, in simple_response\r\n    self.conn.wfile.write(EMPTY.join(buf))\r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/makefile.py\", line 31, in write\r\n    self._flush_unlocked()\r\n  File \"/home/wk/src/github/cherrypy/cheroot/cheroot/makefile.py\", line 40, in _flush_unlocked\r\n    n = self.raw.write(bytes(self._write_buf))\r\n  File \"/home/wk/.pyenv/versions/3.7.0/lib/python3.7/socket.py\", line 607, in write\r\n    return self._sock.send(b)\r\n  File \"/home/wk/src/github/cherrypy/cheroot/.tox/python/lib/python3.7/site-packages/OpenSSL/SSL.py\", line 1729, in send\r\n    self._raise_ssl_error(self._ssl, result)\r\n  File \"/home/wk/src/github/cherrypy/cheroot/.tox/python/lib/python3.7/site-packages/OpenSSL/SSL.py\", line 1614, in _raise_ssl_error\r\n    raise WantReadError()\r\nOpenSSL.SSL.WantReadError\r\n```\r\n\r\n**Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: master (6.5.2)\r\n- CherryPy version: N/A\r\n- Python version: 3.X\r\n- OS: XXX\r\n- Browser: N/A\r\n\r\n**Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n(e.g. detailed explanation, tracebacks, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/112", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/112/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/112/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/112/events", "html_url": "https://github.com/cherrypy/cheroot/issues/112", "id": 356244117, "node_id": "MDU6SXNzdWUzNTYyNDQxMTc=", "number": 112, "title": "v6.5.0 release failed", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 893194325, "node_id": "MDU6TGFiZWw4OTMxOTQzMjU=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/regression", "name": "regression", "color": "bf3b5a", "default": false, "description": "Something that worked earlier got broken in new release"}], "state": "closed", "locked": false, "assignee": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-09-02T01:12:11Z", "updated_at": "2018-09-02T09:05:10Z", "closed_at": "2018-09-02T03:26:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It looks like doctests are failing under macOS\r\n\r\n**I'm submitting a ...**\r\n- [X] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Describe the bug. What is the current behavior?**\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\n\r\n**What is the motivation / use case for changing the behavior?**\r\nFix release process\r\n\r\n**To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\n\r\nhttps://travis-ci.org/cherrypy/cheroot/builds/422117270\r\n\r\n**Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\n\r\nRelease published on PyPI\r\n\r\n**Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\n\r\n**Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: 6.5.0\r\n- CherryPy version: NA\r\n- Python version: 3.6/3.7\r\n- OS: macOS @ Travis CI\r\n- Browser: N/A\r\n\r\n**Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n(e.g. detailed explanation, tracebacks, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/111", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/111/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/111/events", "html_url": "https://github.com/cherrypy/cheroot/issues/111", "id": 356226158, "node_id": "MDU6SXNzdWUzNTYyMjYxNTg=", "number": 111, "title": "TODO: create a structure (attrs dataclass?) for holding details of the bind socket", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-09-01T19:15:06Z", "updated_at": "2019-10-13T22:43:01Z", "closed_at": "2019-10-13T22:43:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "**I'm submitting a ...**\r\n- [ ] bug report\r\n- [X] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n<!--\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n-->\r\n\r\nI want to have a good way to store bound socket details. It should support (subclasses?) IP sockets, UNIX file sockets, abstract sockets, sockets from fd=3 (socket activation).\r\n\r\n**Describe the solution you'd like**\r\n<!--\r\nA clear and concise description of what you want to happen.\r\n-->\r\n\r\n\r\n**Describe alternatives you've considered**\r\n<!--\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n-->\r\n\r\n\r\n\r\n**Additional context**\r\n<!--\r\nAdd any other context or screenshots about the feature request here.\r\n(e.g. detailed explanation, related issues, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n\r\n`man -s 7 unix`\r\n\r\nhttps://troydhanson.github.io/network/Unix_domain_sockets.html", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/107", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/107/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/107/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/107/events", "html_url": "https://github.com/cherrypy/cheroot/issues/107", "id": 344453593, "node_id": "MDU6SXNzdWUzNDQ0NTM1OTM=", "number": 107, "title": "Lock setuptools_scm version to prevent breaking updates", "user": {"login": "macbeth322", "id": 4066500, "node_id": "MDQ6VXNlcjQwNjY1MDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4066500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/macbeth322", "html_url": "https://github.com/macbeth322", "followers_url": "https://api.github.com/users/macbeth322/followers", "following_url": "https://api.github.com/users/macbeth322/following{/other_user}", "gists_url": "https://api.github.com/users/macbeth322/gists{/gist_id}", "starred_url": "https://api.github.com/users/macbeth322/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/macbeth322/subscriptions", "organizations_url": "https://api.github.com/users/macbeth322/orgs", "repos_url": "https://api.github.com/users/macbeth322/repos", "events_url": "https://api.github.com/users/macbeth322/events{/privacy}", "received_events_url": "https://api.github.com/users/macbeth322/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 79272680, "node_id": "MDU6TGFiZWw3OTI3MjY4MA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/question", "name": "question", "color": "cc317c", "default": true, "description": "StackOverflow"}, {"id": 79272681, "node_id": "MDU6TGFiZWw3OTI3MjY4MQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This is not smth we're going to fix"}], "state": "closed", "locked": false, "assignee": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-07-25T13:53:38Z", "updated_at": "2018-09-03T23:15:13Z", "closed_at": "2018-09-03T23:15:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "**I'm submitting a ...**\r\n- [X] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Describe the bug. What is the current behavior?**\r\nCurrently, `setup.py` has `setup_requires` of `setuptools_scm>=1.15.0` https://github.com/cherrypy/cheroot/blob/master/setup.py#L79\r\nCurrent `3.x` versions of `setuptools_scm` have breaking issues which cascade to cheroot. Since `setup_requires` is no lockable by normal means such as a `requirements.txt` or `Pipfile.lock`, it makes it very difficult to avoid this issue.\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\n\r\n**What is the motivation / use case for changing the behavior?**\r\nChanging the `setup_requires` to use absolute version numbers would prevent these unlockable dependencies from updating and pulling in breaking changes.\r\n\r\n**To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\n`pip install cheroot --no-binary :all:` in python3 fails\r\n\r\n**Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\n`pip install cheroot  --no-binary :all:` succeeds\r\n\r\n**Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\nhttps://github.com/pypa/setuptools_scm/issues/286\r\nThe issue has been addressed but not yet released to pypi.\r\n\r\nI would be willing to make a pull request to address this issue if this is something you are willing to do.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/100", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/100/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/100/events", "html_url": "https://github.com/cherrypy/cheroot/issues/100", "id": 331851955, "node_id": "MDU6SXNzdWUzMzE4NTE5NTU=", "number": 100, "title": "Non-int Content-Length raises ValueError and returns 408 error", "user": {"login": "Dobatymo", "id": 7647594, "node_id": "MDQ6VXNlcjc2NDc1OTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/7647594?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dobatymo", "html_url": "https://github.com/Dobatymo", "followers_url": "https://api.github.com/users/Dobatymo/followers", "following_url": "https://api.github.com/users/Dobatymo/following{/other_user}", "gists_url": "https://api.github.com/users/Dobatymo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dobatymo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dobatymo/subscriptions", "organizations_url": "https://api.github.com/users/Dobatymo/orgs", "repos_url": "https://api.github.com/users/Dobatymo/repos", "events_url": "https://api.github.com/users/Dobatymo/events{/privacy}", "received_events_url": "https://api.github.com/users/Dobatymo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-13T05:58:06Z", "updated_at": "2018-06-15T22:00:23Z", "closed_at": "2018-06-15T22:00:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "**I'm submitting a ...**\r\n- [X] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Describe the bug. What is the current behavior?**\r\nIf the Content-Length header has a value which cannot be converted to string a ValueError is raised which is not handled explicitly. A 408 Request Timeout is returned.\r\n\r\n**What is the motivation / use case for changing the behavior?**\r\nMy logs are littered with entries like\r\n```python-traceback\r\n[13/Jun/2018:00:28:17] ENGINE ValueError(\"invalid literal for int() with base 10: b'<script>alert(Content-Length)</script>'\",)\r\nTraceback (most recent call last):\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\cheroot\\server.py\", line 1152, in communicate\r\n    req.respond()\r\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\cheroot\\server.py\", line 964, in respond\r\n    cl = int(self.inheaders.get(b'Content-Length', 0))\r\nValueError: invalid literal for int() with base 10: b'<script>alert(Content-Length)</script>'\r\n```\r\n\r\n**To Reproduce**\r\nSimply send a http request with a non-int content-length header.\r\n```python\r\n>>> import requests\r\n>>> requests.get(\"https://cheroot.example\", headers={\"Content-Length\":\"asd\"})\r\n<Response [408]>\r\n```\r\n\r\n**Expected behavior**\r\nExplicitly handle that case and return 'Bad Request' or whatever the correct status code for this situation is.\r\n\r\n**Environment**\r\n- Cheroot version: 6.0.0\r\n- CherryPy version: 14.0.1\r\n- Python version: 3.5.4\r\n- OS: Windows\r\n- Browser: all\r\n\r\nI know I am not using the latest version, but the code looks like it should still give the same error.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/99", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/99/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/99/events", "html_url": "https://github.com/cherrypy/cheroot/issues/99", "id": 331506427, "node_id": "MDU6SXNzdWUzMzE1MDY0Mjc=", "number": 99, "title": "Extrapolating statistics from Cheroot doesn't work", "user": {"login": "sanitec", "id": 2684572, "node_id": "MDQ6VXNlcjI2ODQ1NzI=", "avatar_url": "https://avatars0.githubusercontent.com/u/2684572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanitec", "html_url": "https://github.com/sanitec", "followers_url": "https://api.github.com/users/sanitec/followers", "following_url": "https://api.github.com/users/sanitec/following{/other_user}", "gists_url": "https://api.github.com/users/sanitec/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanitec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanitec/subscriptions", "organizations_url": "https://api.github.com/users/sanitec/orgs", "repos_url": "https://api.github.com/users/sanitec/repos", "events_url": "https://api.github.com/users/sanitec/events{/privacy}", "received_events_url": "https://api.github.com/users/sanitec/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 965606811, "node_id": "MDU6TGFiZWw5NjU2MDY4MTE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20present", "name": "reproducer: present", "color": "c2e0c6", "default": false, "description": "This PR or issue contains code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2018-06-12T09:22:34Z", "updated_at": "2019-03-27T19:23:24Z", "closed_at": "2019-03-27T19:23:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n**I'm submitting a ...**\r\n- [X] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Describe the bug. What is the current behavior?**\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\nGetting the following error when trying to extrapolate statistics from Cheroot:\r\nAttributeError: 'BufferedReader' object has no attribute 'bytes_read'\r\n\r\n**What is the motivation / use case for changing the behavior?**\r\nIt's broken\r\n\r\n**To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nSteps to reproduce the behavior:\r\n1. Configure Cherrypy to use the following plugin:\r\n\r\n```python\r\nimport logging\r\n\r\nimport cherrypy\r\n\r\nclass CherootStatistics(cherrypy.process.plugins.SimplePlugin):\r\n    def __init__(self, bus):\r\n        super(CherootStatistics, self).__init__(bus)\r\n        self._enabled = False\r\n\r\n    def main(self):\r\n        if not self._enabled:\r\n            self.bus.log('Enabling Cheroot statistics')\r\n            for key in logging.statistics.keys():\r\n                if 'Cheroot HTTPServer' in key:\r\n                    logging.statistics[key]['Enabled'] = True\r\n                    break\r\n            self._enabled = True\r\n```\r\n2.  Mount cpstats to '/cpstats'\r\n3.  Open localhost:8080/cpstats in browser\r\n\r\n**Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\nTo see the beautiful statistics of Cheroot\r\n\r\n**Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\n```python-traceback\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/cherrypy/_cprequest.py\", line 631, in respond\r\n    self._do_respond(path_info)\r\n  File \"/usr/local/lib/python3.6/site-packages/cherrypy/_cprequest.py\", line 690, in _do_respond\r\n    response.body = self.handler()\r\n  File \"/usr/local/lib/python3.6/site-packages/cherrypy/lib/encoding.py\", line 264, in __call__\r\n    ct.params['charset'] = self.find_acceptable_charset()\r\n  File \"/usr/local/lib/python3.6/site-packages/cherrypy/lib/encoding.py\", line 173, in find_acceptable_charset\r\n    if encoder(self.default_encoding):\r\n  File \"/usr/local/lib/python3.6/site-packages/cherrypy/lib/encoding.py\", line 114, in encode_string\r\n    for chunk in self.body:\r\n  File \"/usr/local/lib/python3.6/site-packages/cherrypy/lib/cpstats.py\", line 522, in index\r\n    for title, scalars, collections in self.get_namespaces():\r\n  File \"/usr/local/lib/python3.6/site-packages/cherrypy/lib/cpstats.py\", line 587, in get_namespaces\r\n    s = extrapolate_statistics(logging.statistics)\r\n  File \"/usr/local/lib/python3.6/site-packages/cherrypy/lib/cpstats.py\", line 212, in extrapolate_statistics\r\n    v = extrapolate_statistics(v)\r\n  File \"/usr/local/lib/python3.6/site-packages/cherrypy/lib/cpstats.py\", line 216, in extrapolate_statistics\r\n    v = v(scope)\r\n  File \"/usr/local/lib/python3.6/site-packages/cheroot/server.py\", line 1529, in <lambda>\r\n    [w['Bytes Read'](w) for w in s['Worker Threads'].values()], 0),\r\n  File \"/usr/local/lib/python3.6/site-packages/cheroot/server.py\", line 1529, in <listcomp>\r\n    [w['Bytes Read'](w) for w in s['Worker Threads'].values()], 0),\r\n  File \"/usr/local/lib/python3.6/site-packages/cheroot/workers/threadpool.py\", line 76, in <lambda>\r\n    self.conn.rfile.bytes_read\r\nAttributeError: 'BufferedReader' object has no attribute 'bytes_read'\r\n```\r\n\r\n**Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: 6.3.1\r\n- CherryPy version: 15.0.0 (if applicable)\r\n- Python version: 3.6.5\r\n- OS: MacOS 10.13.x\r\n\r\n**Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n(e.g. detailed explanation, tracebacks, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/97", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/97/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/97/events", "html_url": "https://github.com/cherrypy/cheroot/issues/97", "id": 325594657, "node_id": "MDU6SXNzdWUzMjU1OTQ2NTc=", "number": 97, "title": "Ship stubs with detached annotations", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-05-23T08:11:04Z", "updated_at": "2019-10-13T22:42:58Z", "closed_at": "2019-10-13T22:42:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\n**** DELETE THIS BLOCK ****  \r\n\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n\r\n**** /DELETE THIS BLOCK ****  \r\n-->\r\nNow that there's a PEP and mypy support for shipping stubs, it would be useful to have them.\r\n\r\n* **I'm submitting a ...**\r\n- [ ] bug report\r\n- [x] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\nidea \ud83d\udca1\r\n\r\n\r\n* **What is the current behavior?**\r\nNo annotations\r\n\r\n\r\n* **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\n-\r\n\r\n\r\n* **What is the expected behavior?**\r\n\r\n\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\nHaving autocomplete for at least public interfaces. Consider this as an essential part of the public API.\r\n\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Cheroot version: master\r\n- CherryPy version: -\r\n- Python version: - \r\n- OS: -\r\n- Browser: -\r\n\r\n\r\n\r\n* **Other information** (e.g. detailed explanation, stacktraces, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/96", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/96/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/96/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/96/events", "html_url": "https://github.com/cherrypy/cheroot/issues/96", "id": 324834461, "node_id": "MDU6SXNzdWUzMjQ4MzQ0NjE=", "number": 96, "title": "[Idea] Create an example with Sentry integration", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-05-21T08:42:05Z", "updated_at": "2019-10-13T22:43:00Z", "closed_at": "2019-10-13T22:43:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/95", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/95/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/95/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/95/events", "html_url": "https://github.com/cherrypy/cheroot/issues/95", "id": 324731912, "node_id": "MDU6SXNzdWUzMjQ3MzE5MTI=", "number": 95, "title": "Drop in integration testing for SSL/TLS stuff", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-05-20T18:50:37Z", "updated_at": "2020-01-26T09:28:28Z", "closed_at": "2018-12-30T17:20:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Consider:\r\n* [ ] using [python-trio/trustme](https://github.com/python-trio/trustme), while looks like a really simple interface to what we need (spawns a fake CA, issues certificates and lets us set up ssl context to trust it) / https://trustme.readthedocs.io\r\n* [ ] checking pyca/cryptography test suite for their ways of generating SSL certificates for testing\r\n* [ ] studying https://github.com/wolfSSL/wolfssl/blob/master/certs/renewcerts.sh and https://github.com/wolfSSL/wolfssl/blob/master/certs/gen_revoked.sh for their approaches\r\n* [ ] using [jsha/minica](https://github.com/jsha/minica)\r\n* [ ] https://letsencrypt.org/docs/certificates-for-localhost/\r\n* [ ] https://www.decalage.info/security/cert4tests\r\n* [ ] https://gist.github.com/scottvrosenthal/5691305\r\n* [ ] https://devcenter.heroku.com/articles/ssl-certificate-self\r\n* [ ] https://github.com/aio-libs/aioredis/blob/master/tests/ssl/Makefile#L2\r\n* [ ] https://github.com/hynek/pem\r\n* [ ] https://github.com/tiran/multissl\r\n* [ ] https://github.com/secure-systems-lab/securesystemslib / https://github.com/theupdateframework/tuf\r\n* [ ] https://github.com/FiloSottile/mkcert\r\n* [ ] https://pypi.org/project/certauth/\r\n* [ ] https://github.com/globalsign/certlint\r\n* [ ] https://github.com/sgallagher/sscg", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/93", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/93/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/93/events", "html_url": "https://github.com/cherrypy/cheroot/issues/93", "id": 321378356, "node_id": "MDU6SXNzdWUzMjEzNzgzNTY=", "number": 93, "title": "Unix socket mode not set to 0o777", "user": {"login": "hvenev", "id": 1391845, "node_id": "MDQ6VXNlcjEzOTE4NDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1391845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hvenev", "html_url": "https://github.com/hvenev", "followers_url": "https://api.github.com/users/hvenev/followers", "following_url": "https://api.github.com/users/hvenev/following{/other_user}", "gists_url": "https://api.github.com/users/hvenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/hvenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hvenev/subscriptions", "organizations_url": "https://api.github.com/users/hvenev/orgs", "repos_url": "https://api.github.com/users/hvenev/repos", "events_url": "https://api.github.com/users/hvenev/events{/privacy}", "received_events_url": "https://api.github.com/users/hvenev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}], "state": "closed", "locked": false, "assignee": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, {"login": "hvenev", "id": 1391845, "node_id": "MDQ6VXNlcjEzOTE4NDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1391845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hvenev", "html_url": "https://github.com/hvenev", "followers_url": "https://api.github.com/users/hvenev/followers", "following_url": "https://api.github.com/users/hvenev/following{/other_user}", "gists_url": "https://api.github.com/users/hvenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/hvenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hvenev/subscriptions", "organizations_url": "https://api.github.com/users/hvenev/orgs", "repos_url": "https://api.github.com/users/hvenev/repos", "events_url": "https://api.github.com/users/hvenev/events{/privacy}", "received_events_url": "https://api.github.com/users/hvenev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-05-08T23:16:08Z", "updated_at": "2018-09-02T01:15:01Z", "closed_at": "2018-09-02T01:15:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently, cheroot deletes any pre-existing AF_UNIX socket file, then attempts to chmod the now non-existent file to 0o777, and only then creates it.\r\n\r\nThe correct behaviour would be to chmod the socket after creating it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/92", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/92/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/92/events", "html_url": "https://github.com/cherrypy/cheroot/issues/92", "id": 320667855, "node_id": "MDU6SXNzdWUzMjA2Njc4NTU=", "number": 92, "title": "TypeError('WSGI response header value 469 is not of type str.',)", "user": {"login": "itzMeerkat", "id": 2298985, "node_id": "MDQ6VXNlcjIyOTg5ODU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2298985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itzMeerkat", "html_url": "https://github.com/itzMeerkat", "followers_url": "https://api.github.com/users/itzMeerkat/followers", "following_url": "https://api.github.com/users/itzMeerkat/following{/other_user}", "gists_url": "https://api.github.com/users/itzMeerkat/gists{/gist_id}", "starred_url": "https://api.github.com/users/itzMeerkat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itzMeerkat/subscriptions", "organizations_url": "https://api.github.com/users/itzMeerkat/orgs", "repos_url": "https://api.github.com/users/itzMeerkat/repos", "events_url": "https://api.github.com/users/itzMeerkat/events{/privacy}", "received_events_url": "https://api.github.com/users/itzMeerkat/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-07T04:08:05Z", "updated_at": "2018-05-09T22:47:24Z", "closed_at": "2018-05-09T22:45:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n-->\r\n**I'm submitting a ...**\r\n- [X] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n**Describe the bug. What is the current behavior?**\r\n<!--\r\nA clear and concise description of what the bug is.\r\n-->\r\nI'm using web.py and Vue.js, when it gives a response header the bug occurs. I found that was because of in the header, Content-Length field was provided in number not string. I have to look up for the standard, and the standard didn't specify the Content-Length field has to be a string.\r\n\r\nI tried my compiled Vue page with default python http.server, it works fine. \r\n\r\n**What is the motivation / use case for changing the behavior?**\r\n\r\n\r\n**To Reproduce**\r\n<!--\r\nPlease provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.\r\n-->\r\nSteps to reproduce the behavior:\r\n1. Run '...'\r\n2. Make request '....'\r\n3. See error\r\n\r\nTo be honest, I'm pretty new to python web dev, I'm not sure if this is a bug or it's a mistake made by myself. Here's the log:\r\n```python-traceback\r\n127.0.0.1:49575 - - [06/May/2018 20:56:23] \"HTTP/1.1 GET /\" - 200 OK\r\n-------------------[('Connection', 'close'), ('Content-Type', 'text/html;charset=utf-8'), ('Content-Length', 469)]\r\nTypeError('WSGI response header value 469 is not of type str.',)\r\n-------------------[('Connection', 'close'), ('Content-Type', 'text/html;charset=utf-8'), ('Content-Length', 469)]\r\n-------------------[('Connection', 'close'), ('Content-Type', 'text/html;charset=utf-8'), ('Content-Length', 469)]\r\nTypeError('WSGI response header value 469 is not of type str.',)\r\n-------------------[('Connection', 'close'), ('Content-Type', 'text/html;charset=utf-8'), ('Content-Length', 469)]\r\nTypeError('WSGI response header value 469 is not of type str.',)\r\nTraceback (most recent call last):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 1193, in communicate\r\n    req.respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 997, in respond\r\n    self.server.gateway(self).respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 140, in respond\r\n    for chunk in filter(None, response):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 234, in __iter__\r\n    self.start_response(self.status, self.headers)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 287, in xstart_response\r\n    out = start_response(status, response_headers, *args)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 176, in start_response\r\n    'WSGI response header value %r is not of type str.' % v)\r\nTypeError: WSGI response header value 469 is not of type str.\r\nTraceback (most recent call last):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 1193, in communicate\r\n    req.respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 997, in respond\r\n    self.server.gateway(self).respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 140, in respond\r\n    for chunk in filter(None, response):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 234, in __iter__\r\n    self.start_response(self.status, self.headers)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 287, in xstart_response\r\n    out = start_response(status, response_headers, *args)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 176, in start_response\r\n    'WSGI response header value %r is not of type str.' % v)\r\nTypeError: WSGI response header value 469 is not of type str.\r\nTypeError('WSGI response header value 469 is not of type str.',)\r\nTraceback (most recent call last):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 1193, in communicate\r\n    req.respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 997, in respond\r\n    self.server.gateway(self).respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 140, in respond\r\n    for chunk in filter(None, response):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 234, in __iter__\r\n    self.start_response(self.status, self.headers)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 287, in xstart_response\r\n    out = start_response(status, response_headers, *args)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 176, in start_response\r\n    'WSGI response header value %r is not of type str.' % v)\r\nTypeError: WSGI response header value 469 is not of type str.\r\nTraceback (most recent call last):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 1193, in communicate\r\n    req.respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 997, in respond\r\n    self.server.gateway(self).respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 140, in respond\r\n    for chunk in filter(None, response):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 234, in __iter__\r\n    self.start_response(self.status, self.headers)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 287, in xstart_response\r\n    out = start_response(status, response_headers, *args)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 176, in start_response\r\n    'WSGI response header value %r is not of type str.' % v)\r\nTypeError: WSGI response header value 469 is not of type str.\r\n-------------------[('Connection', 'close'), ('Content-Type', 'text/html;charset=utf-8'), ('Content-Length', 469)]\r\nTypeError('WSGI response header value 469 is not of type str.',)\r\nTraceback (most recent call last):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 1193, in communicate\r\n    req.respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 997, in respond\r\n    self.server.gateway(self).respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 140, in respond\r\n    for chunk in filter(None, response):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 234, in __iter__\r\n    self.start_response(self.status, self.headers)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 287, in xstart_response\r\n    out = start_response(status, response_headers, *args)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 176, in start_response\r\n    'WSGI response header value %r is not of type str.' % v)\r\nTypeError: WSGI response header value 469 is not of type str.\r\n-------------------[('Connection', 'close'), ('Content-Type', 'text/html;charset=utf-8'), ('Content-Length', 469)]\r\nTypeError('WSGI response header value 469 is not of type str.',)\r\nTraceback (most recent call last):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 1193, in communicate\r\n    req.respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\server.py\", line 997, in respond\r\n    self.server.gateway(self).respond()\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 140, in respond\r\n    for chunk in filter(None, response):\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 234, in __iter__\r\n    self.start_response(self.status, self.headers)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\web\\httpserver.py\", line 287, in xstart_response\r\n    out = start_response(status, response_headers, *args)\r\n  File \"D:\\Env\\Python\\lib\\site-packages\\cheroot\\wsgi.py\", line 176, in start_response\r\n    'WSGI response header value %r is not of type str.' % v)\r\nTypeError: WSGI response header value 469 is not of type str.\r\n```\r\nLines starting with \"-----------\" are my debug output.\r\n\r\n**Expected behavior**\r\n<!--\r\nA clear and concise description of what you expected to happen.\r\n-->\r\nAs I posted above.\r\n**Details**\r\n<!--\r\nIf applicable, add tracebacks/logs to help explain your problem.\r\n-->\r\n\r\n**Environment**\r\n<!--\r\nPlease complete the following information:\r\n-->\r\n- Cheroot version: 6.2.4\r\n- CherryPy version: X.X.X (if applicable)\r\n- Python version: 3.6.5\r\n- OS: Windows 10\r\n- Browser:  Chrome 66 | Edge\r\n\r\n**Additional context**\r\n<!--\r\nAdd any other context about the problem here.\r\n(e.g. detailed explanation, tracebacks, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n-->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/91", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/91/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/91/events", "html_url": "https://github.com/cherrypy/cheroot/issues/91", "id": 320339731, "node_id": "MDU6SXNzdWUzMjAzMzk3MzE=", "number": 91, "title": "HTTP Keep-Alive Connections not handled correctly", "user": {"login": "hexaclock", "id": 931659, "node_id": "MDQ6VXNlcjkzMTY1OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/931659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hexaclock", "html_url": "https://github.com/hexaclock", "followers_url": "https://api.github.com/users/hexaclock/followers", "following_url": "https://api.github.com/users/hexaclock/following{/other_user}", "gists_url": "https://api.github.com/users/hexaclock/gists{/gist_id}", "starred_url": "https://api.github.com/users/hexaclock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hexaclock/subscriptions", "organizations_url": "https://api.github.com/users/hexaclock/orgs", "repos_url": "https://api.github.com/users/hexaclock/repos", "events_url": "https://api.github.com/users/hexaclock/events{/privacy}", "received_events_url": "https://api.github.com/users/hexaclock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}, {"id": 965606811, "node_id": "MDU6TGFiZWw5NjU2MDY4MTE=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/reproducer:%20present", "name": "reproducer: present", "color": "c2e0c6", "default": false, "description": "This PR or issue contains code, which reproduce the problem described or clearly understandable STR"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-05-04T16:25:27Z", "updated_at": "2019-10-10T09:15:39Z", "closed_at": "2019-10-10T09:15:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "* **I'm submitting a ...**\r\n- [x] bug report\r\n- [ ] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\nBug\r\n\r\n\r\n* **What is the current behavior?**\r\nWhen the number of open Keep-Alive sessions exceeds CherryPy's thread count specified by `server.thread_pool`, CherryPy queues all new Keep-Alive connections up to the timeout specified by `server.socket_timeout`.\r\n\r\n\r\n* **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\n```python\r\n# mini_cherrypy_server.py\r\nimport cherrypy\r\n\r\n\r\nclass HelloWorld(object):\r\n    @cherrypy.expose\r\n    def index(self):\r\n        print(cherrypy.request.headers)\r\n        return \"Hello world!\"\r\n\r\n\r\nif __name__ == '__main__':\r\n    cherrypy.config.update({'server.thread_pool': 5})\r\n    cherrypy.quickstart(HelloWorld())\r\n```\r\n\r\n```python\r\n# mini_client.py\r\nimport requests\r\nfrom multiprocessing.dummy import Pool as ThreadPool\r\n\r\nurls = ['http://localhost:8080/index'] * 10\r\n\r\ndef do_request(url):\r\n    sess = requests.Session() # forces a keep-alive session\r\n    resp = sess.get(url)\r\n    print(resp.text)\r\n\r\ndef main():\r\n    thread_pool = ThreadPool()\r\n    results = thread_pool.map(do_request, urls)\r\n    thread_pool.close()\r\n    thread_pool.join()\r\n    \r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n\r\n\r\n* **What is the expected behavior?**\r\nAllow threads in the thread pool to answer and process new connections by rotating \"sleeping\" sessions back into the queue.\r\n\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\nCorrectly support the HTTP/1.1 spec.\r\n\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Cheroot version: 6.0.0\r\n- CherryPy version: 13.1.0 (if applicable)\r\n- Python version: 3.5.2 32-bit\r\n- OS: Windows 10\r\n- Browser: [all]\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/90", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/90/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/90/events", "html_url": "https://github.com/cherrypy/cheroot/issues/90", "id": 319116479, "node_id": "MDU6SXNzdWUzMTkxMTY0Nzk=", "number": 90, "title": "Make Python 2 behave closer to Python 3 standard behavior", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-05-01T04:57:39Z", "updated_at": "2019-08-20T20:42:01Z", "closed_at": "2019-08-20T20:42:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\n**** DELETE THIS BLOCK ****  \r\n\r\nThanks for filing an issue!  Please keep keep issues limited to bug reports,\r\nfeature requests, and other general issues. For support questions, please feel\r\nfree to reach out on stackoverflow:\r\nhttps://stackoverflow.com/questions/tagged/cheroot+or+cherrypy\r\n\r\n**** /DELETE THIS BLOCK ****  \r\n-->\r\nAdd the following snippet to the top of all modules:\r\n\r\n```python\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\n__metaclass__ = type\r\n```\r\n\r\n* **I'm submitting a ...**\r\n- [ ] bug report\r\n- [X] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\ncode cross-compatibility improvement for better Python 3/2 support.\r\n\r\n\r\n* **What is the current behavior?**\r\nHas old-style classes. Python 2-centric syntax present.\r\n\r\n\r\n* **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\n\r\n\r\n\r\n* **What is the expected behavior?**\r\nNew-style classes by default. New syntax all over the place.\r\n\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\nMake project code in Python 2 env behave more like Python 3.\r\n\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Cheroot version: master branch\r\n- CherryPy version: N/A\r\n- Python version: N/A\r\n- OS: N/A\r\n- Browser: N/A\r\n\r\n\r\n\r\n* **Other information** (e.g. detailed explanation, stacktraces, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\nAgeed via Gitter: https://gitter.im/cherrypy/cherrypy?at=5ae1d28f60ddf96c97e3eed3\r\ncc: @jaraco ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/89", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/89/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/89/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/89/events", "html_url": "https://github.com/cherrypy/cheroot/issues/89", "id": 317609076, "node_id": "MDU6SXNzdWUzMTc2MDkwNzY=", "number": 89, "title": "get the access log", "user": {"login": "boumboum", "id": 17336267, "node_id": "MDQ6VXNlcjE3MzM2MjY3", "avatar_url": "https://avatars1.githubusercontent.com/u/17336267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boumboum", "html_url": "https://github.com/boumboum", "followers_url": "https://api.github.com/users/boumboum/followers", "following_url": "https://api.github.com/users/boumboum/following{/other_user}", "gists_url": "https://api.github.com/users/boumboum/gists{/gist_id}", "starred_url": "https://api.github.com/users/boumboum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boumboum/subscriptions", "organizations_url": "https://api.github.com/users/boumboum/orgs", "repos_url": "https://api.github.com/users/boumboum/repos", "events_url": "https://api.github.com/users/boumboum/events{/privacy}", "received_events_url": "https://api.github.com/users/boumboum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-25T12:36:19Z", "updated_at": "2018-07-15T22:42:34Z", "closed_at": "2018-07-15T22:42:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "* **I'm submitting a ...**\r\n- [ ] bug report\r\n- [x] feature request\r\n- [ ] question about the decisions made in the repository\r\n\r\nIs there any way to display (and optionally write to a file) the access log?\r\nIf yes, how?\r\nIf not, would it possible in the near future?\r\n\r\n* **Please tell us about your environment:**\r\n- Python version: 3.6.4\r\n- Cheroot version: 6.2.4\r\n- OS: Windows\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/86", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/86/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/86/events", "html_url": "https://github.com/cherrypy/cheroot/issues/86", "id": 315789412, "node_id": "MDU6SXNzdWUzMTU3ODk0MTI=", "number": 86, "title": "A stand-alone command for running a Cheroot server", "user": {"login": "scottp-dpaw", "id": 5644631, "node_id": "MDQ6VXNlcjU2NDQ2MzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5644631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottp-dpaw", "html_url": "https://github.com/scottp-dpaw", "followers_url": "https://api.github.com/users/scottp-dpaw/followers", "following_url": "https://api.github.com/users/scottp-dpaw/following{/other_user}", "gists_url": "https://api.github.com/users/scottp-dpaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottp-dpaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottp-dpaw/subscriptions", "organizations_url": "https://api.github.com/users/scottp-dpaw/orgs", "repos_url": "https://api.github.com/users/scottp-dpaw/repos", "events_url": "https://api.github.com/users/scottp-dpaw/events{/privacy}", "received_events_url": "https://api.github.com/users/scottp-dpaw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-19T09:06:48Z", "updated_at": "2018-06-18T11:46:31Z", "closed_at": "2018-06-18T11:46:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "* **I'm submitting a ...**\r\n[ ] bug report\r\n[x] feature request\r\n[ ] question about the decisions made in the repository\r\n\r\n* **What is the current behavior?**\r\nApplications wishing to support Cheroot have to provide a loader stub to interface with the generic WSGI application.\r\n\r\n* **What is the expected behavior?**\r\nApplications can start a Cheroot instance for a WSGI application from the command line without any additional Python code.\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\nMy organisation is in the process of migrating several Python WSGI apps to an automated deployment environment (Red Hat OpenShift + S2I). We would be interested in testing Cheroot as a server backend now it has been decoupled from CherryPy, but we do miss being able to spin up an instance from the command line in the manner of Gunicorn and uWSGI.\r\nIn short, having a stand-alone application is useful from a testing and deployment standpoint, as it removes the need to ship a dedicated Cheroot loader for a web app. All that is required is a Python WSGI application exposed as a module. \r\n\r\n* **Other information**\r\nThe attached pull request contains a proof of concept script (bin/cheroot) which starts a cheroot.wsgi.Server() based on command line arguments, similar in functionality to the standalone gunicorn and uwsgi programs. Given that this is an early stage I would love feedback on the viability of this proposal, the specific command line arguments, etc. (I am holding off on changing the documentation until the design is approved)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/84", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/84/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/84/events", "html_url": "https://github.com/cherrypy/cheroot/issues/84", "id": 314161274, "node_id": "MDU6SXNzdWUzMTQxNjEyNzQ=", "number": 84, "title": "Cheroot uses _pyio incorrectly", "user": {"login": "bangorr", "id": 2245398, "node_id": "MDQ6VXNlcjIyNDUzOTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/2245398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bangorr", "html_url": "https://github.com/bangorr", "followers_url": "https://api.github.com/users/bangorr/followers", "following_url": "https://api.github.com/users/bangorr/following{/other_user}", "gists_url": "https://api.github.com/users/bangorr/gists{/gist_id}", "starred_url": "https://api.github.com/users/bangorr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bangorr/subscriptions", "organizations_url": "https://api.github.com/users/bangorr/orgs", "repos_url": "https://api.github.com/users/bangorr/repos", "events_url": "https://api.github.com/users/bangorr/events{/privacy}", "received_events_url": "https://api.github.com/users/bangorr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 893194325, "node_id": "MDU6TGFiZWw4OTMxOTQzMjU=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/regression", "name": "regression", "color": "bf3b5a", "default": false, "description": "Something that worked earlier got broken in new release"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-04-13T15:53:27Z", "updated_at": "2018-04-13T23:27:01Z", "closed_at": "2018-04-13T22:54:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Attempting to use Cheroot (via CherryPy) on Cygwin has revealed that Cheroot imports a private module, _pyio. \"Outside\" use of _pyio this way is not supported.\r\n\r\nCherryPy should use a different module or interface for this functionality (https://github.com/cherrypy/cheroot/blob/86c6b246ec7cb704c6f96123556db1a083301634/cheroot/makefile.py#L5).\r\n\r\nA side-effect of fixing this issue is that this may help CherryPy run on Cygwin once again.\r\n\r\nSee https://bugs.python.org/issue32287 for more discussion or context.\r\n\r\n(originally posted here: https://github.com/cherrypy/cherrypy/issues/1704#issuecomment-381174191)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/82", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/82/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/82/events", "html_url": "https://github.com/cherrypy/cheroot/issues/82", "id": 312496281, "node_id": "MDU6SXNzdWUzMTI0OTYyODE=", "number": 82, "title": "cheroot 6.1.x  breaks cherrypy.test.webtest  14.0.1 - TerseTestResult", "user": {"login": "lsmithso", "id": 3511141, "node_id": "MDQ6VXNlcjM1MTExNDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/3511141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lsmithso", "html_url": "https://github.com/lsmithso", "followers_url": "https://api.github.com/users/lsmithso/followers", "following_url": "https://api.github.com/users/lsmithso/following{/other_user}", "gists_url": "https://api.github.com/users/lsmithso/gists{/gist_id}", "starred_url": "https://api.github.com/users/lsmithso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lsmithso/subscriptions", "organizations_url": "https://api.github.com/users/lsmithso/orgs", "repos_url": "https://api.github.com/users/lsmithso/repos", "events_url": "https://api.github.com/users/lsmithso/events{/privacy}", "received_events_url": "https://api.github.com/users/lsmithso/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272680, "node_id": "MDU6TGFiZWw3OTI3MjY4MA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/question", "name": "question", "color": "cc317c", "default": true, "description": "StackOverflow"}, {"id": 79272681, "node_id": "MDU6TGFiZWw3OTI3MjY4MQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This is not smth we're going to fix"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-09T11:37:54Z", "updated_at": "2018-04-10T13:19:46Z", "closed_at": "2018-04-10T13:19:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "cherrypy.test.webtest import fails with the latest 6.1.x cheroot.\r\n\r\nPython 2.7.12 (default, Feb  9 2018, 15:46:55) \r\n[GCC 4.6.3] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n> from cherrypy.test import webtest\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/lsmithso/yg/panoptic_1/.tox/python/lib/python2.7/site-packages/cherrypy/test/webtest.py\", line 4, in <module>\r\n    from cheroot.test.webtest import (  # noqa\r\nImportError: cannot import name TerseTestResult\r\n\r\n\r\nThis works if cheroot is pinned to 6.0.0. Is this a breaking change in 6.1.x?\r\n\r\nThanks.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/81", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/81/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/81/events", "html_url": "https://github.com/cherrypy/cheroot/issues/81", "id": 312190733, "node_id": "MDU6SXNzdWUzMTIxOTA3MzM=", "number": 81, "title": "Windows regression: tests get stuck in CI after first one", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 893194325, "node_id": "MDU6TGFiZWw4OTMxOTQzMjU=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/regression", "name": "regression", "color": "bf3b5a", "default": false, "description": "Something that worked earlier got broken in new release"}], "state": "closed", "locked": false, "assignee": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-04-07T09:20:35Z", "updated_at": "2018-04-08T17:51:37Z", "closed_at": "2018-04-08T17:49:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It looks like smth in #80 breaks the build in CI. \r\n\r\n* **I'm submitting a ...**\r\n[x] bug report\r\n[ ] feature request\r\n[ ] question about the decisions made in the repository\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\nbug\r\n\r\n\r\n* **What is the current behavior?**\r\nwin build gets stuck\r\n\r\n\r\n* **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\nsee: https://ci.appveyor.com/project/CherryPy/cheroot/build/291\r\n\r\n\r\n* **What is the expected behavior?**\r\nwin build succeeds\r\n\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\ngreen CI\r\n\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Python version: 3.6/2.7\r\n- Cheroot version: 6.1.1\r\n- CherryPy version: \u2012\r\n- OS: Windows\r\n- Browser: \u2012\r\n\r\n\r\n* **Other information** (e.g. detailed explanation, stacktraces, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\nbuild gets stuck at this point\r\n```log\r\ncheroot/server.py::cheroot.server PASSED                                 [  1%]\r\ncheroot/test/test_conn.py::test_HTTP11_persistent_connections \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/79", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/79/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/79/events", "html_url": "https://github.com/cherrypy/cheroot/issues/79", "id": 306251760, "node_id": "MDU6SXNzdWUzMDYyNTE3NjA=", "number": 79, "title": "Configuration options?", "user": {"login": "S1M0NH", "id": 3520646, "node_id": "MDQ6VXNlcjM1MjA2NDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/3520646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/S1M0NH", "html_url": "https://github.com/S1M0NH", "followers_url": "https://api.github.com/users/S1M0NH/followers", "following_url": "https://api.github.com/users/S1M0NH/following{/other_user}", "gists_url": "https://api.github.com/users/S1M0NH/gists{/gist_id}", "starred_url": "https://api.github.com/users/S1M0NH/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/S1M0NH/subscriptions", "organizations_url": "https://api.github.com/users/S1M0NH/orgs", "repos_url": "https://api.github.com/users/S1M0NH/repos", "events_url": "https://api.github.com/users/S1M0NH/events{/privacy}", "received_events_url": "https://api.github.com/users/S1M0NH/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-18T15:49:11Z", "updated_at": "2018-03-26T22:42:17Z", "closed_at": "2018-03-26T22:42:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n* **I'm submitting a ...**\r\n[ ] bug report\r\n[x] feature request\r\n[ ] question about the decisions made in the repository\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\n\r\nHello. I'm using cheroot with bottle and am wondering if options can be passed in -- such as force https, serve multiple sites etc. I'm using cheroot on it's own (no apache or nginx) and would prefer to keep it that way unless not possible.\r\n\r\n\r\n* **What is the current behavior?**\r\n\r\n\r\n\r\n* **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\n\r\n\r\n\r\n* **What is the expected behavior?**\r\n\r\n\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\n\r\n\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Python version: 2.7.9\r\n- Cheroot version: 6.0.0\r\n- CherryPy version: X.X.X (if applicable)\r\n- OS: LInux \r\n- Browser: [all | Chrome XX | Firefox XX | IE XX | Safari XX | Mobile Chrome XX | Android X.X Web Browser | iOS XX Safari | iOS XX UIWebView | iOS XX WKWebView ]\r\n\r\n\r\n\r\n* **Other information** (e.g. detailed explanation, stacktraces, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/77", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/77/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/77/events", "html_url": "https://github.com/cherrypy/cheroot/issues/77", "id": 304126924, "node_id": "MDU6SXNzdWUzMDQxMjY5MjQ=", "number": 77, "title": "Server docstring example incompatible with Python 3", "user": {"login": "jaymcgrath", "id": 17018863, "node_id": "MDQ6VXNlcjE3MDE4ODYz", "avatar_url": "https://avatars0.githubusercontent.com/u/17018863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaymcgrath", "html_url": "https://github.com/jaymcgrath", "followers_url": "https://api.github.com/users/jaymcgrath/followers", "following_url": "https://api.github.com/users/jaymcgrath/following{/other_user}", "gists_url": "https://api.github.com/users/jaymcgrath/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaymcgrath/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaymcgrath/subscriptions", "organizations_url": "https://api.github.com/users/jaymcgrath/orgs", "repos_url": "https://api.github.com/users/jaymcgrath/repos", "events_url": "https://api.github.com/users/jaymcgrath/events{/privacy}", "received_events_url": "https://api.github.com/users/jaymcgrath/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-03-11T03:27:55Z", "updated_at": "2018-03-12T12:48:38Z", "closed_at": "2018-03-12T12:48:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "* **I'm submitting a ...**\r\n[x] bug report\r\n[ ] feature request\r\n[ ] question about the decisions made in the repository\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\nReport a bug\r\n\r\n\r\n* **What is the current behavior?**\r\nThe wsgi docstring \"hello world\" example is incompatible with Python 3\r\n\r\n* **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\nRequests to the server return HTTP ERROR 408\r\nThe console shows `ValueError: WSGI Applications must yield bytes`\r\n* **What is the expected behavior?**\r\n200 OK, \"Hello world!\"\r\n\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\nThis was frustrating as someone evaluating cheroot \r\n\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Python version: 3.6.4\r\n- Cheroot version: 6.0.0\r\n- OS: Mac- Browser: [all ]\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/73", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/73/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/73/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/73/events", "html_url": "https://github.com/cherrypy/cheroot/issues/73", "id": 291804034, "node_id": "MDU6SXNzdWUyOTE4MDQwMzQ=", "number": 73, "title": "TypeError in catch exception ssl.SSLerror ", "user": {"login": "hevel", "id": 3393998, "node_id": "MDQ6VXNlcjMzOTM5OTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/3393998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hevel", "html_url": "https://github.com/hevel", "followers_url": "https://api.github.com/users/hevel/followers", "following_url": "https://api.github.com/users/hevel/following{/other_user}", "gists_url": "https://api.github.com/users/hevel/gists{/gist_id}", "starred_url": "https://api.github.com/users/hevel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hevel/subscriptions", "organizations_url": "https://api.github.com/users/hevel/orgs", "repos_url": "https://api.github.com/users/hevel/repos", "events_url": "https://api.github.com/users/hevel/events{/privacy}", "received_events_url": "https://api.github.com/users/hevel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-01-26T05:32:52Z", "updated_at": "2018-02-04T13:36:52Z", "closed_at": "2018-02-04T13:36:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "* **I'm submitting a bug report**\r\n\r\nI got traceback error.\r\n```python\r\ncheroot/server.py line 1515, in start\r\ncheroot/server.py line 1590, in tick\r\ncheroot/ssl/builtin.py line 100, in wrap\r\nTypeError: argument of type 'int' is not iterable\r\n```\r\nbuiltin.py line 100 code:\r\n```\r\nelif 'handshake operation timed out' in ex.args[0]:\r\n```\r\n\r\n\r\n\r\n- Python version: 2.7.11\r\n- Cheroot version: 5.8.3\r\n- CherryPy version: 11.0.0 (if applicable)\r\n- OS: debian7.7\r\n- Apache-HttpClient/4.2.1 (java 1.5)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/72", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/72/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/72/events", "html_url": "https://github.com/cherrypy/cheroot/issues/72", "id": 288666160, "node_id": "MDU6SXNzdWUyODg2NjYxNjA=", "number": 72, "title": "static support should be moved to cheroot?", "user": {"login": "absurd34", "id": 15631146, "node_id": "MDQ6VXNlcjE1NjMxMTQ2", "avatar_url": "https://avatars3.githubusercontent.com/u/15631146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/absurd34", "html_url": "https://github.com/absurd34", "followers_url": "https://api.github.com/users/absurd34/followers", "following_url": "https://api.github.com/users/absurd34/following{/other_user}", "gists_url": "https://api.github.com/users/absurd34/gists{/gist_id}", "starred_url": "https://api.github.com/users/absurd34/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/absurd34/subscriptions", "organizations_url": "https://api.github.com/users/absurd34/orgs", "repos_url": "https://api.github.com/users/absurd34/repos", "events_url": "https://api.github.com/users/absurd34/events{/privacy}", "received_events_url": "https://api.github.com/users/absurd34/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272679, "node_id": "MDU6TGFiZWw3OTI3MjY3OQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": "This is irrelevant"}, {"id": 79272680, "node_id": "MDU6TGFiZWw3OTI3MjY4MA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/question", "name": "question", "color": "cc317c", "default": true, "description": "StackOverflow"}, {"id": 79272681, "node_id": "MDU6TGFiZWw3OTI3MjY4MQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This is not smth we're going to fix"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-01-15T17:20:29Z", "updated_at": "2018-02-05T13:49:21Z", "closed_at": "2018-02-05T13:49:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n* **I'm submitting a ...**\r\n[ ] bug report\r\n[x] feature request\r\n[x] question about the decisions made in the repository\r\n\r\nHi!\r\n\r\nI am using cherrypy's internal HTTP implementation only.\r\n\r\nWith cherrypy up to version 8.9, I could just modules\r\ncherrypy.lib.* to provide delivery of static files.\r\n\r\nWith the cheroot split, these tools remain with cherrypy, so, in simple terms, \"staticdir\"\r\nis not possible with cheroot alone.\r\n\r\nAm I missing s.th. here?\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/71", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/71/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/71/events", "html_url": "https://github.com/cherrypy/cheroot/issues/71", "id": 286567180, "node_id": "MDU6SXNzdWUyODY1NjcxODA=", "number": 71, "title": "[TODO] Re-enable `--testmon` once the coverage issue is fixed", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-01-07T12:57:00Z", "updated_at": "2018-04-21T13:04:13Z", "closed_at": "2018-04-21T13:04:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Because of tarpas/pytest-testmon#86 `--testmon` corrupts coverage data, so I'm dropping it from `pytest.ini` (8a161e87). This should be reverted once upstream issue fixed.\r\n \r\nTODO: `git revert 8a161e87`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/68", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/68/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/68/events", "html_url": "https://github.com/cherrypy/cheroot/issues/68", "id": 281369699, "node_id": "MDU6SXNzdWUyODEzNjk2OTk=", "number": 68, "title": "is there any right way to interrupt a started server?", "user": {"login": "polymorphm", "id": 422741, "node_id": "MDQ6VXNlcjQyMjc0MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/422741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/polymorphm", "html_url": "https://github.com/polymorphm", "followers_url": "https://api.github.com/users/polymorphm/followers", "following_url": "https://api.github.com/users/polymorphm/following{/other_user}", "gists_url": "https://api.github.com/users/polymorphm/gists{/gist_id}", "starred_url": "https://api.github.com/users/polymorphm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/polymorphm/subscriptions", "organizations_url": "https://api.github.com/users/polymorphm/orgs", "repos_url": "https://api.github.com/users/polymorphm/repos", "events_url": "https://api.github.com/users/polymorphm/events{/privacy}", "received_events_url": "https://api.github.com/users/polymorphm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272680, "node_id": "MDU6TGFiZWw3OTI3MjY4MA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/question", "name": "question", "color": "cc317c", "default": true, "description": "StackOverflow"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-12-12T12:39:46Z", "updated_at": "2018-08-01T11:47:11Z", "closed_at": "2018-08-01T11:47:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "* **I'm submitting a ...**\r\n[x] bug report\r\n[ ] feature request\r\n[ ] question about the decisions made in the repository\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\n\r\nbug? or may be it is a feature request?... no.. I think it is a bug (I don't know)\r\n\r\n* **What is the current behavior?**\r\n\r\nthe method ``server.interrupt`` [of class ``cherrot.Server``] seems like useless.\r\n\r\nI can not invoke the method ``server._set_interrupt()`` [the property  ``server.interrupt``] from *the same thread* where I just invoked ``server.start()``, because the method ``server.start()`` is blocking the thread.\r\n\r\nand I can not invoke ``server.interrupt()`` *in another thread*, because ``server._set_interrupt()`` invokes ``server.stop()`` inside himself. but ``server.stop()`` isn't threadsafe!\r\n\r\nthe method ``server.stop()`` isn't threadsafe -- because it has *a race condition* with the method ``server.start()``. and there isn't a way how to wait for the moment when the method  ``server.start()`` will pass his initialization (dangerous) point.\r\n\r\nhow can I use right way to interrupt a server?\r\n\r\nI've found the way (the workaround?) like this:\r\n\r\n```\r\n### thread A ###\r\ntry:\r\n    server.start()\r\nexcept MyStopError:\r\n    pass\r\nfinally:\r\n    server.stop() # ---- will be invoked always after ``server.start()`` and always in the same thread\r\n```\r\n\r\n```\r\n### thread B ###\r\nserver._interrupt = MyStopError() # ---- doesn't do anything except setting a flag\r\n```\r\ni.e I've tried to avoid using ``server._set_interrupt()``, so I've got ability to invoke the method ``server.stop()`` inside the ``thread A`` *after* invoking the method ``server.start()`` in the same thread (the race condition wouldn't happen).\r\n\r\n* **What is the expected behavior?**\r\n\r\nif the method ``server.start()`` an ``server.stop()`` would be use **synchronization primitives -- it would NOT fix the problem(!)** . because in this case the race contition with  ``server.stop()``  will still happen at moment before starting the method ``server.start()`` (in detail: in ``thread B`` we can at random invoke ``stop()`` before invoking ``start()``, so the ``stop()`` will not stop anything).\r\n\r\nand of course -- I can not set ``server.ready = False`` in the ``thread B``, because I still have race condition for this variable with the method ``server.start()`` invoked in the ``thread A``. it is the real problem..\r\n\r\nI think one of the way -- it is to split the method ``server.start()`` to **two separated methods**:\r\n\r\n* the first method for a start-initialization phase (not blocking method)\r\n* the second method for a serving phase (blocking method).\r\n\r\nthis separation will allow to know that you can correctly invoke the method ``server.stop()`` -- *after* the start-initialization phase is done.\r\n\r\nthank you in advance!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/65", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/65/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/65/events", "html_url": "https://github.com/cherrypy/cheroot/issues/65", "id": 277279265, "node_id": "MDU6SXNzdWUyNzcyNzkyNjU=", "number": 65, "title": "Pytest 3.3.0 (released Nov 23) dropped support for 2.6 and 3.3", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-28T07:03:54Z", "updated_at": "2017-12-12T14:59:07Z", "closed_at": "2017-12-12T14:59:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Ref: https://docs.pytest.org/en/latest/changelog.html\r\n\r\nTODO: act accordingly", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/64", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/64/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/64/events", "html_url": "https://github.com/cherrypy/cheroot/issues/64", "id": 276455805, "node_id": "MDU6SXNzdWUyNzY0NTU4MDU=", "number": 64, "title": "macOS Python nightly tests failing", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2017-11-23T18:55:28Z", "updated_at": "2017-12-02T17:52:38Z", "closed_at": "2017-12-02T17:52:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The [nightly tests are failing](https://travis-ci.org/cherrypy/cheroot/jobs/306348821) and blocking releases.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/63", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/63/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/63/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/63/events", "html_url": "https://github.com/cherrypy/cheroot/issues/63", "id": 276455663, "node_id": "MDU6SXNzdWUyNzY0NTU2NjM=", "number": 63, "title": "Tests take too long to run", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-11-23T18:54:20Z", "updated_at": "2017-12-02T17:52:38Z", "closed_at": "2017-12-02T17:52:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It shouldn't take two hours to cut a release.\r\n\r\n![image](https://user-images.githubusercontent.com/308610/33186207-cd499094-d055-11e7-9c61-f5171c1cc5e8.png)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/62", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/62/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/62/events", "html_url": "https://github.com/cherrypy/cheroot/issues/62", "id": 276400918, "node_id": "MDU6SXNzdWUyNzY0MDA5MTg=", "number": 62, "title": "Add tests against CherryPy (master or latest stable)", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-23T14:50:08Z", "updated_at": "2018-01-29T15:53:04Z", "closed_at": "2018-01-29T15:53:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently, CherryPy has tests against cheroot master.\r\n\r\nAnd while that's interesting and good to know, it often too late to effectively capture regressions in cheroot (as they would have to already have been merged into master _and_ the tests in cherrypy run). It's additionally difficult to correlate changes in cheroot with failures in CherryPy.\r\n\r\nI propose instead that cheroot should run CherryPy's tests against itself, such that a PR could be validated against CherryPy before being accepted (and other commits as well).\r\n\r\nI'm not yet fully sure how this proposal could work. There are some challenges:\r\n\r\n- Which CherryPy version to use?\r\n- Which Python(s) to use?\r\n- Which tox env to use?\r\n- What about chicken/egg problem (CherryPy changes depend on Cheroot changes)?\r\n- How to integrate with CI? Should it be allowed to fail?\r\n\r\nFor now, I'm tempted to start with a tox env that can be invoked manually to validate the current code against CherryPy master... and we can build from there.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/61", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/61/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/61/events", "html_url": "https://github.com/cherrypy/cheroot/issues/61", "id": 276393863, "node_id": "MDU6SXNzdWUyNzYzOTM4NjM=", "number": 61, "title": "Cheroot 5.9.1 has invalid files", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2017-11-23T14:26:25Z", "updated_at": "2017-12-11T18:32:57Z", "closed_at": "2017-12-05T16:52:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Yegor Y. sent me an e-mail reporting an issue with the cheroot 5.9.1 package. It contains invalid files like \"test_core_BACKUP_1440.py\". These files cause issues in compilation.\r\n\r\nThese files were not intended to be in the distribution. They happened to be on my machine when I cut the release manually. I cut the release manually because the CI process takes half an eternity to complete.\r\n\r\nI'll cut a new 5.9.2 release to correct the issue.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/59", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/59/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/59/events", "html_url": "https://github.com/cherrypy/cheroot/issues/59", "id": 275508420, "node_id": "MDU6SXNzdWUyNzU1MDg0MjA=", "number": 59, "title": "test_core.HTTPTests.test_parse_uri_invalid_uri assertion invalid", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272679, "node_id": "MDU6TGFiZWw3OTI3MjY3OQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": "This is irrelevant"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-11-20T21:41:41Z", "updated_at": "2017-11-26T10:41:10Z", "closed_at": "2017-11-21T02:58:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently, the [test_parse_uri_invalid_uri asserts that a UTF-8 encoded resource identifier is invalid](https://github.com/cherrypy/cheroot/blob/1995c6cd0ee0345483ceb1499d74c6cf16a449ed/cheroot/test/test_core.py#L129-L137). However, the HTTP spec allows for any byte sequence for the URI, and in fact, when using curl to request a unicode string, I see that it transmits unquoted UTF-8 bytes:\r\n\r\n```\r\ncurl http://localhost:8080/\u0439\u043e\u043f\u0442\u0430!\r\n```\r\n\r\nIt's difficult for me to illustrate here how that transmits UTF-8, but trust me, it does.\r\n\r\nIt seems [we're not alone](https://github.com/kennethreitz/httpbin/issues/402), but I still consider `curl` to be a widely-accepted HTTP client (perhaps the most widely accepted command-line client), so I consider them a de facto authority in correctness.\r\n\r\nMoreover, older versions of CherryPy supported these requests (at least on Python 2), as I reported in #55. Therefore, I believe this test should be removed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/58", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/58/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/58/events", "html_url": "https://github.com/cherrypy/cheroot/issues/58", "id": 275049630, "node_id": "MDU6SXNzdWUyNzUwNDk2MzA=", "number": 58, "title": "Python 2.7 test failures since 5.9 release", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-18T03:31:16Z", "updated_at": "2017-11-18T03:33:51Z", "closed_at": "2017-11-18T03:33:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Tests [are failing thus](https://travis-ci.org/cherrypy/cherrypy/jobs/303233495) in CherryPy. Offending commit is e0c117a6db5fadd37fe8551323725d97e7dc65f3.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/57", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/57/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/57/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/57/events", "html_url": "https://github.com/cherrypy/cheroot/issues/57", "id": 274644330, "node_id": "MDU6SXNzdWUyNzQ2NDQzMzA=", "number": 57, "title": "CherryPy tests crashing on macOS", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-16T19:58:38Z", "updated_at": "2017-11-16T20:13:54Z", "closed_at": "2017-11-16T20:13:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While testing on a mac, I find the CherryPy tests fail reliably if I include the change from #53 and proceed normally if I use 3e3ef2341af5064f710cf4106952833d7be8ca2a instead.\r\n\r\nAnnoyingly, the tests crash silently and apparently between tests, so it's difficult to tell why.\r\n\r\n```\r\n$ tox -- -k test_conn.py\r\npython develop-inst-noop: /Users/jaraco/Dropbox/code/public/cherrypy\r\npython installed: backports.unittest-mock==1.3,certifi==2017.11.5,chardet==3.0.4,-e git+gh://cherrypy/cheroot@93d77a279728bdf22de2fac4e7ecab1205988d46#egg=cheroot,-e git+gh://cherrypy/cherrypy@32471496cf39901b6cae587dd36f9759dde27969#egg=CherryPy,codecov==2.0.9,coverage==4.4.2,graphviz==0.8.1,idna==2.6,jaraco.classes==1.4.3,objgraph==3.1.1,path.py==10.5,portend==2.2,py==1.5.2,pytest==3.2.5,pytest-cov==2.5.1,pytest-sugar==0.9.0,pytz==2017.3,repoze.lru==0.7,requests==2.18.4,Routes==2.4.1,six==1.11.0,tempora==1.9,termcolor==1.1.0,urllib3==1.22\r\npython runtests: PYTHONHASHSEED='3343766152'\r\npython runtests: commands[0] | pytest -k test_conn.py\r\nTest session starts (platform: darwin, Python 3.6.3, pytest 3.2.5, pytest-sugar 0.9.0)\r\ncachedir: .cache\r\nrootdir: /Users/jaraco/Dropbox/code/public/cherrypy, inifile: pytest.ini\r\nplugins: sugar-0.9.0, cov-2.5.1, backports.unittest-mock-1.3\r\n\r\n cherrypy/test/test_conn.py::ConnectionCloseTests.test_HTTP10_KeepAlive \u2713            5% \u258c         \r\n cherrypy/test/test_conn.py::ConnectionCloseTests.test_HTTP11 \u2713                      9% \u2589         \r\n cherrypy/test/test_conn.py::ConnectionCloseTests.test_Streaming_no_len \u2713           14% \u2588\u258d        \r\n cherrypy/test/test_conn.py::ConnectionCloseTests.test_Streaming_with_len \u2713         18% \u2588\u258a        \r\n cherrypy/test/helper.py::ConnectionCloseTests.test_gc \u2713                            23% \u2588\u2588\u258d       ERROR: InvocationError: '/Users/jaraco/Dropbox/code/public/cherrypy/.tox/python/bin/pytest -k test_conn.py'\r\n____________________________________________ summary _____________________________________________\r\nERROR:   python: commands failed\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/56", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/56/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/56/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/56/events", "html_url": "https://github.com/cherrypy/cheroot/issues/56", "id": 274306923, "node_id": "MDU6SXNzdWUyNzQzMDY5MjM=", "number": 56, "title": "Tests hang on macOS", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-11-15T21:15:35Z", "updated_at": "2017-11-16T20:13:54Z", "closed_at": "2017-11-16T20:13:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While running the tests on my macOS 10.13.1, Python 3.6.3, the tests got to this point and stalled:\r\n\r\n```\r\n...\r\n cheroot/test/test_conn.py::ConnectionCloseTests.test_Streaming_with_len_10 \u2713       43% \u2588\u2588\u2588\u2588\u258d     \r\n cheroot/test/test_conn.py::ConnectionCloseTests.test_Streaming_with_len_11 \u2713       45% \u2588\u2588\u2588\u2588\u258c     \r\n cheroot/test/test_conn.py::ConnectionCloseTests.test_readall_or_close \u2713            47% \u2588\u2588\u2588\u2588\u258a     ^CERROR: KEYBOARDINTERRUPT\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/55", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/55/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/55/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/55/events", "html_url": "https://github.com/cherrypy/cheroot/issues/55", "id": 274297910, "node_id": "MDU6SXNzdWUyNzQyOTc5MTA=", "number": 55, "title": "Non-ascii no longer allowed in URIs on Python 2 only", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}, {"id": 79272679, "node_id": "MDU6TGFiZWw3OTI3MjY3OQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": "This is irrelevant"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-15T20:43:35Z", "updated_at": "2017-11-21T02:51:46Z", "closed_at": "2017-11-21T02:51:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\r\n* **I'm submitting a ...**\r\n[X] bug report\r\n[ ] feature request\r\n[ ] question about the decisions made in the repository\r\n\r\n* **What is the current behavior?**\r\n\r\nSince the commit in 51c004ac65, committed in #39 and released as 5.8.0, cheroot no longer accepts non-ascii in the URI. Prior versions of CherryPy allowed this (under some conditions) and one of our key applications relies on that behavior.\r\n\r\n* **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\n\r\nI'll put together a test in the suite.\r\n\r\n* **What is the expected behavior?**\r\n\r\ncheroot should provide some mechanism to accept non-ascii in URIs.\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\n\r\nExisting applications still stuck on Python 2 require the ability to support these URIs.\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Python version: 2.7\r\n- Cheroot version: 5.8.3\r\n- CherryPy version: 11.x (if applicable)\r\n- OS: macOS 10.13.1\r\n- Browser: n/a\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/51", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/51/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/51/events", "html_url": "https://github.com/cherrypy/cheroot/issues/51", "id": 263368128, "node_id": "MDU6SXNzdWUyNjMzNjgxMjg=", "number": 51, "title": "[TODO] Enable PyPy v5.9.0 in Travis CI once it's available there", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-06T08:17:10Z", "updated_at": "2017-12-22T12:44:08Z", "closed_at": "2017-12-22T12:44:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Ref: https://morepypy.blogspot.com/2017/10/pypy-v59-released-now-supports-pandas.html", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/49", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/49/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/49/events", "html_url": "https://github.com/cherrypy/cheroot/issues/49", "id": 257475823, "node_id": "MDU6SXNzdWUyNTc0NzU4MjM=", "number": 49, "title": "Integrate support for setup.cfg declarative config into distribution", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970082552, "node_id": "MDU6TGFiZWw5NzAwODI1NTI=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "This is what we believe is newcomer-friendly, feel free to contribute!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-09-13T18:21:52Z", "updated_at": "2018-10-05T12:23:25Z", "closed_at": "2018-10-05T12:23:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've been playing with this during some time in other projects and I think it would make distribution declaration cleaner.\r\n\r\n\r\n* **I'm submitting a ...**\r\n[ ] bug report\r\n[X] feature request\r\n[X] question about the decisions made in the repository\r\n\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\n\r\nIt's a suggestion to use declarative config for static stuff/metadata for setuptools\r\n\r\n\r\n* **What is the current behavior?**\r\n\r\nThere's just purely pythonic module `setup.py`.\r\n\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\n\r\nI want config data to be in a separate file `setup.cfg`, which restricts doing dynamic non-deterministic stuff, which is currently possible within `setup.py`.\r\n\r\n#### Advantages\r\n* `setup.cfg` is clean and readable ini-config\r\n* in prevents us from making stupid mistakes\r\n* the config leaves in a structured file, not in code\r\n\r\n#### Drawbacks\r\n* `setup.py` is still needed\r\n* some of stuff will still go to `setup.py`\r\n* adds prerequisite dependency of higher setuptools version, but _this affects only for dev env and ones who install source distribution instead of binary one, which we also provide_\r\n\r\n\r\n@jaraco any objections against implementing this?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/48", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/48/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/48/events", "html_url": "https://github.com/cherrypy/cheroot/issues/48", "id": 251688903, "node_id": "MDU6SXNzdWUyNTE2ODg5MDM=", "number": 48, "title": "Need support for certificate FILETYPE_ASN1", "user": {"login": "jimkimball", "id": 10201087, "node_id": "MDQ6VXNlcjEwMjAxMDg3", "avatar_url": "https://avatars1.githubusercontent.com/u/10201087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jimkimball", "html_url": "https://github.com/jimkimball", "followers_url": "https://api.github.com/users/jimkimball/followers", "following_url": "https://api.github.com/users/jimkimball/following{/other_user}", "gists_url": "https://api.github.com/users/jimkimball/gists{/gist_id}", "starred_url": "https://api.github.com/users/jimkimball/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jimkimball/subscriptions", "organizations_url": "https://api.github.com/users/jimkimball/orgs", "repos_url": "https://api.github.com/users/jimkimball/repos", "events_url": "https://api.github.com/users/jimkimball/events{/privacy}", "received_events_url": "https://api.github.com/users/jimkimball/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 706424324, "node_id": "MDU6TGFiZWw3MDY0MjQzMjQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/Hacktoberfest%20%F0%9F%8E%83%F0%9F%90%B1%E2%80%8D%F0%9F%92%BB", "name": "Hacktoberfest \ud83c\udf83\ud83d\udc31\u200d\ud83d\udcbb", "color": "ff6604", "default": false, "description": "DO's annual PR encouragement"}, {"id": 669259159, "node_id": "MDU6TGFiZWw2NjkyNTkxNTk=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/stale", "name": "stale", "color": "ffffff", "default": false, "description": "This thing has been ignored for too long"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-08-21T15:12:17Z", "updated_at": "2018-02-10T19:08:25Z", "closed_at": "2018-02-10T19:08:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n* **I'm submitting a ...**\r\n[ ] bug report\r\n[x ] feature request\r\n[ ] question about the decisions made in the repository\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\n\r\nI would call this a new feature.\r\n\r\n* **What is the current behavior?**\r\n\r\nCurrently, cheroot hardcodes the certificate as FILETYPE_PEM in two places. The first in the call to SSL.Context.use_certificate_file() by not passing the FILETYPE parameter. The second is in the call to crypto.load_certificate() where FILETYPE_PEM is hard-coded.\r\n\r\n* **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\n\r\n\r\n\r\n* **What is the expected behavior?**\r\n\r\n\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\n\r\nSince both FILETYPEs exist, it would be nice for cheroot to support them.\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Python version: 2.7\r\n- Cheroot version: 5.7.0\r\n- CherryPy version: X.X.X (if applicable)\r\n- OS: Windows 7 (I know...)\r\n- Browser: Chrome  57.0.2987.133 (64-bit)\r\n\r\n\r\n\r\n* **Other information** (e.g. detailed explanation, stacktraces, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/45", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/45/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/45/events", "html_url": "https://github.com/cherrypy/cheroot/issues/45", "id": 250118137, "node_id": "MDU6SXNzdWUyNTAxMTgxMzc=", "number": 45, "title": "server_name is not being used as the Server header", "user": {"login": "Siecje", "id": 4069476, "node_id": "MDQ6VXNlcjQwNjk0NzY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4069476?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Siecje", "html_url": "https://github.com/Siecje", "followers_url": "https://api.github.com/users/Siecje/followers", "following_url": "https://api.github.com/users/Siecje/following{/other_user}", "gists_url": "https://api.github.com/users/Siecje/gists{/gist_id}", "starred_url": "https://api.github.com/users/Siecje/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Siecje/subscriptions", "organizations_url": "https://api.github.com/users/Siecje/orgs", "repos_url": "https://api.github.com/users/Siecje/repos", "events_url": "https://api.github.com/users/Siecje/events{/privacy}", "received_events_url": "https://api.github.com/users/Siecje/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272679, "node_id": "MDU6TGFiZWw3OTI3MjY3OQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": "This is irrelevant"}, {"id": 79272680, "node_id": "MDU6TGFiZWw3OTI3MjY4MA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/question", "name": "question", "color": "cc317c", "default": true, "description": "StackOverflow"}, {"id": 79272681, "node_id": "MDU6TGFiZWw3OTI3MjY4MQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This is not smth we're going to fix"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2017-08-14T18:44:57Z", "updated_at": "2017-08-16T14:32:23Z", "closed_at": "2017-08-16T14:32:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "* **I'm submitting a ...**\r\n[x] bug report\r\n[ ] feature request\r\n[ ] question about the decisions made in the repository\r\n\r\n* **Do you want to request a *feature* or report a *bug*?**\r\nReport a bug\r\n\r\n* **What is the current behavior?**\r\n\r\nThe server_name keyword argument is not used as the `Server` header value  in the response.\r\n\r\n* **If the current behavior is a bug, please provide the steps to reproduce and if possible a screenshots and logs of the problem. If you can, show us your code.**\r\n\r\nIn one terminal run\r\n```\r\nfrom cheroot.wsgi import Server\r\nimport cherrypy\r\n\r\nclass HelloWorld(object):\r\n    @cherrypy.expose\r\n    def index(self):\r\n        return \"Hello World!\"\r\n\r\n\r\ncherrypy.tree.mount(HelloWorld(), \"/\")\r\nserver = Server(('localhost', 8090), cherrypy.tree, server_name = 'Siecje')\r\nserver.start()\r\n```\r\n\r\nIn another terminal run\r\n```\r\nimport requests\r\nr = requests.get('http://localhost:8090')\r\nprint(r.headers['Server])\r\n# I believe it should be 'Siecje'\r\n```\r\n\r\n* **What is the expected behavior?**\r\n\r\nThe server_name should be used as the `Server` header value.\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\n\r\nIn the docs for `wsgi.Server` it says\r\n`server_name (str): web server name to be advertised via Server HTTP header`\r\n\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Python version: 2.7.13\r\n- Cheroot version: 5.8.3\r\n- CherryPy version: 11.0.0\r\n- OS: Linux Ubuntu 16.04 64bit\r\n- Browser: [all]\r\n\r\n\r\n\r\n* **Other information** (e.g. detailed explanation, stacktraces, related issues, suggestions how to fix, links for us to have context, e.g. stackoverflow, gitter, etc.)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/43", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/43/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/43/events", "html_url": "https://github.com/cherrypy/cheroot/issues/43", "id": 248387906, "node_id": "MDU6SXNzdWUyNDgzODc5MDY=", "number": 43, "title": "Timeouts not working?", "user": {"login": "f11r", "id": 7826519, "node_id": "MDQ6VXNlcjc4MjY1MTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/7826519?v=4", "gravatar_id": "", "url": "https://api.github.com/users/f11r", "html_url": "https://github.com/f11r", "followers_url": "https://api.github.com/users/f11r/followers", "following_url": "https://api.github.com/users/f11r/following{/other_user}", "gists_url": "https://api.github.com/users/f11r/gists{/gist_id}", "starred_url": "https://api.github.com/users/f11r/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/f11r/subscriptions", "organizations_url": "https://api.github.com/users/f11r/orgs", "repos_url": "https://api.github.com/users/f11r/repos", "events_url": "https://api.github.com/users/f11r/events{/privacy}", "received_events_url": "https://api.github.com/users/f11r/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272679, "node_id": "MDU6TGFiZWw3OTI3MjY3OQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": "This is irrelevant"}, {"id": 79272680, "node_id": "MDU6TGFiZWw3OTI3MjY4MA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/question", "name": "question", "color": "cc317c", "default": true, "description": "StackOverflow"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-08-07T11:54:53Z", "updated_at": "2017-08-21T08:23:52Z", "closed_at": "2017-08-21T07:54:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "* **I'm submitting a ...**\r\n[ x ] bug report\r\n[ ] feature request\r\n[ ] question about the decisions made in the repository\r\n\r\n* **What is the current behavior?**\r\n\r\nI'm running the following code:\r\n~~~python\r\nimport time\r\n\r\nfrom cheroot.wsgi import PathInfoDispatcher\r\nfrom cheroot.wsgi import Server\r\nfrom flask import Flask\r\n\r\napp = Flask(__name__)\r\n\r\n@app.route('/')\r\ndef hello_world():\r\n    time.sleep(10)\r\n    return 'Hello, World!'\r\n\r\nserver = Server(('0.0.0.0', 5000), PathInfoDispatcher({'/': app}), numthreads=1,\r\n                timeout=1, shutdown_timeout=1)\r\nserver.safe_start()\r\n~~~\r\n\r\n1. When I `curl localhost:5000` it responds after 10 seconds.  \r\n2. When I set `timeout=11`, then `curl localhost:5000` and send an interrupt signal (`Ctrl-C`) to the webserver, it prints `Keyboard Interrupt: shutting down`, responds after 10 seconds and then exits.\r\n\r\n\r\n\r\n\r\n* **What is the expected behavior?**\r\n\r\n1. (When `timeout=1`) I would expect the request to timeout after 1 second and before a response can be sent.  \r\n2. (When `timeout=11` and interrupt signal sent) I would expect the server to shut down after 1 second and before the response can be sent.\r\n\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Python version: `Python 3.6.1 :: Continuum Analytics, Inc.`\r\n- Cheroot version: 5.8.2\r\n- OS: Linux\r\n\r\n\r\nDid I misunderstand what `timeout` and `shutdown_timeout` do?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/42", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/42/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/42/events", "html_url": "https://github.com/cherrypy/cheroot/issues/42", "id": 246720202, "node_id": "MDU6SXNzdWUyNDY3MjAyMDI=", "number": 42, "title": "[TODO] Get rid of unittest.TestCase", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 970081544, "node_id": "MDU6TGFiZWw5NzAwODE1NDQ=", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Somebody help us, please!"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 24, "created_at": "2017-07-31T11:02:56Z", "updated_at": "2019-01-01T21:29:14Z", "closed_at": "2019-01-01T21:29:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is needed to fully take advantage of `py.test` testing framework.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/40", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/40/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/40/events", "html_url": "https://github.com/cherrypy/cheroot/issues/40", "id": 243238522, "node_id": "MDU6SXNzdWUyNDMyMzg1MjI=", "number": 40, "title": "[Task] Add encrypted password to Appveyor config", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}, {"id": 79272681, "node_id": "MDU6TGFiZWw3OTI3MjY4MQ==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This is not smth we're going to fix"}], "state": "closed", "locked": false, "assignee": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-07-16T13:08:55Z", "updated_at": "2017-07-26T18:55:09Z", "closed_at": "2017-07-26T14:23:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@jaraco I'm implementing support for [PEP 513](https://www.python.org/dev/peps/pep-0513/) and want to have win32 tagged wheel built as well. Since I don't have maintainer access to PYPI, I'm asking you to do the following:\r\n\r\n1. Please use [this tool](https://ci.appveyor.com/tools/encrypt) to encrypt your PYPI password.\r\n2. After that put it into [Appveyor config](https://github.com/cherrypy/cheroot/blob/8593dc2/appveyor.yml#L9) or post in here and I'll do the rest.\r\n\r\nRef: 8593dc2", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/38", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/38/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/38/events", "html_url": "https://github.com/cherrypy/cheroot/issues/38", "id": 242215389, "node_id": "MDU6SXNzdWUyNDIyMTUzODk=", "number": 38, "title": "cheroot.server.Server() does not correctly parse the request_uri and set the query string.", "user": {"login": "bertjwregeer", "id": 649426, "node_id": "MDQ6VXNlcjY0OTQyNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/649426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bertjwregeer", "html_url": "https://github.com/bertjwregeer", "followers_url": "https://api.github.com/users/bertjwregeer/followers", "following_url": "https://api.github.com/users/bertjwregeer/following{/other_user}", "gists_url": "https://api.github.com/users/bertjwregeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bertjwregeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bertjwregeer/subscriptions", "organizations_url": "https://api.github.com/users/bertjwregeer/orgs", "repos_url": "https://api.github.com/users/bertjwregeer/repos", "events_url": "https://api.github.com/users/bertjwregeer/events{/privacy}", "received_events_url": "https://api.github.com/users/bertjwregeer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-11T23:40:39Z", "updated_at": "2017-08-01T08:07:20Z", "closed_at": "2017-08-01T08:07:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "* **I'm submitting a bug report**\r\n\r\n* **What is the current behavior?**\r\n\r\nUnfortunately the code is broken and doesn't correctly set `self.qs`.\r\n\r\nhttps://github.com/cherrypy/cheroot/blob/60ec5b6bd665b97ed8b46b34dc5a86738764d4d7/cheroot/server.py#L709-L724\r\n\r\nDoes not currently correct parse the `reques_uri` and set `self.qs`.\r\n\r\nAnyone using cheroot with CherryPy will not have `environ['QUERY_STRING']` set correctly, which was fun to debug.\r\n\r\n* **What is the expected behavior?**\r\n\r\nTo parse the `request_uri` correctly and set `self.qs` so that it may be set in the WSGI `environ`.\r\n\r\n* **What is the motivation / use case for changing the behavior?**\r\n\r\n`urlparse` will not return the query string in the path, so it needs to be appended again, or returned from `parse_request_uri`, then the check on line https://github.com/cherrypy/cheroot/blob/60ec5b6bd665b97ed8b46b34dc5a86738764d4d7/cheroot/server.py#L723 will no longer be necessary.\r\n\r\n* **Please tell us about your environment:**\r\n\r\n- Python version: 2.7.x\r\n- Cheroot version: 5.7.0 (issue has existed since 5.0.0: https://github.com/cherrypy/cheroot/blob/v5.0.0/cheroot/server.py#L785)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/36", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/36/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/36/events", "html_url": "https://github.com/cherrypy/cheroot/issues/36", "id": 237868082, "node_id": "MDU6SXNzdWUyMzc4NjgwODI=", "number": 36, "title": "Introduce GitHub templates for issues and PRs", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2017-06-22T14:38:29Z", "updated_at": "2017-06-23T21:58:07Z", "closed_at": "2017-06-23T21:57:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/35", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/35/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/35/events", "html_url": "https://github.com/cherrypy/cheroot/issues/35", "id": 237858189, "node_id": "MDU6SXNzdWUyMzc4NTgxODk=", "number": 35, "title": "Worker thread is exiting abnormally", "user": {"login": "dhanavaths", "id": 17666008, "node_id": "MDQ6VXNlcjE3NjY2MDA4", "avatar_url": "https://avatars3.githubusercontent.com/u/17666008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhanavaths", "html_url": "https://github.com/dhanavaths", "followers_url": "https://api.github.com/users/dhanavaths/followers", "following_url": "https://api.github.com/users/dhanavaths/following{/other_user}", "gists_url": "https://api.github.com/users/dhanavaths/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhanavaths/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhanavaths/subscriptions", "organizations_url": "https://api.github.com/users/dhanavaths/orgs", "repos_url": "https://api.github.com/users/dhanavaths/repos", "events_url": "https://api.github.com/users/dhanavaths/events{/privacy}", "received_events_url": "https://api.github.com/users/dhanavaths/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-22T14:08:52Z", "updated_at": "2017-06-22T14:39:14Z", "closed_at": "2017-06-22T14:10:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nWe are getting following error in cherrypy worker thread and leading it to exit.\r\n```python\r\n[2017-06-22 04:15:43,892] [ERROR] 'module' object has no attribute 'esocket_errors_to_ignore'. Traceback -   File \"/usr/local/lib/python2.7/dist-packages/cheroot/workers/threadpool.py\", line 100, in run\r\n    conn.communicate()\r\n  File \"/usr/local/lib/python2.7/dist-packages/cheroot/server.py\", line 962, in communicate\r\n    req.simple_response('408 Request Timeout')\r\n  File \"/usr/local/lib/python2.7/dist-packages/cheroot/server.py\", line 813, in simple_response\r\n    if x.args[0] not in errors.esocket_errors_to_ignore:\r\n```\r\n\r\nThere is a typo in 'errors.(e)socket_errors_to_ignore'. Can you please fix it?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/34", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/34/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/34/events", "html_url": "https://github.com/cherrypy/cheroot/issues/34", "id": 237623546, "node_id": "MDU6SXNzdWUyMzc2MjM1NDY=", "number": 34, "title": "Insufficient arguments are passed while calling handle_no_ssl method. ", "user": {"login": "dhanavaths", "id": 17666008, "node_id": "MDQ6VXNlcjE3NjY2MDA4", "avatar_url": "https://avatars3.githubusercontent.com/u/17666008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhanavaths", "html_url": "https://github.com/dhanavaths", "followers_url": "https://api.github.com/users/dhanavaths/followers", "following_url": "https://api.github.com/users/dhanavaths/following{/other_user}", "gists_url": "https://api.github.com/users/dhanavaths/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhanavaths/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhanavaths/subscriptions", "organizations_url": "https://api.github.com/users/dhanavaths/orgs", "repos_url": "https://api.github.com/users/dhanavaths/repos", "events_url": "https://api.github.com/users/dhanavaths/events{/privacy}", "received_events_url": "https://api.github.com/users/dhanavaths/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-21T18:25:22Z", "updated_at": "2017-06-22T07:12:20Z", "closed_at": "2017-06-22T07:12:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "![cheroot_api_error](https://user-images.githubusercontent.com/17666008/27399934-16371f18-56dc-11e7-83a4-5ff7f7f0f596.png)\r\n\r\nPlease refer the the image attached. have taken this screenshot from cheroot/server.py file.\r\n\r\nIs it possible to log an error to server logger when worker exits for unexpected reasons? All threads in threadpool has exited in our cherrypy web server and no requests were served(have checked it with the help of all python threads stackdump). I am expecting that its happening due to arguments mismatch.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/28", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/28/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/28/events", "html_url": "https://github.com/cherrypy/cheroot/issues/28", "id": 227997448, "node_id": "MDU6SXNzdWUyMjc5OTc0NDg=", "number": 28, "title": "[TODO] Change Travis CI config to use newly presented build stages feature", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2017-05-11T13:48:04Z", "updated_at": "2017-05-25T06:03:29Z", "closed_at": "2017-05-25T06:03:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Refs:\r\n* https://blog.travis-ci.com/2017-05-11-introducing-build-stages\r\n* https://docs.travis-ci.com/user/build-stages#Examples\r\n\r\n*Note: I'm going to move PYPI deployment to separate stage, so it would wait for tests in all envs to complete.*", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/27", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/27/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/27/events", "html_url": "https://github.com/cherrypy/cheroot/issues/27", "id": 226554103, "node_id": "MDU6SXNzdWUyMjY1NTQxMDM=", "number": 27, "title": "Get rid of default Server header being non-ascii/unicode", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2017-05-05T12:10:42Z", "updated_at": "2017-06-24T16:42:14Z", "closed_at": "2017-06-24T16:42:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Problem\r\n-----------\r\n\r\n- `socket.gethostname()` returns current hostname and is used by `cheroot.server.HTTPServer` as a default fallback;\r\n- it **is** a user-defined input (one may set it to any value);\r\n- it **may** use unicode charset (confirmed at Linux and Win);\r\n- we forcefully `.encode('ISO-8859-1')` it when constructing headers, which leads to `UnicodeEncodeError` being raised therefore.\r\n\r\nProposal\r\n------------\r\n- urlencode header contents;\r\n- this looks allowed (and recommended by RFC);\r\n- think about other headers.\r\n\r\nLinks\r\n-------\r\nRef: https://tools.ietf.org/html/rfc2231#section-4\r\nRef: https://github.com/werwolfby/monitorrent/issues/214", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/23", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/23/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/23/events", "html_url": "https://github.com/cherrypy/cheroot/issues/23", "id": 217474618, "node_id": "MDU6SXNzdWUyMTc0NzQ2MTg=", "number": 23, "title": "Error while build & install cheroot & CherryPy from sources", "user": {"login": "gabriel-yahav", "id": 12141271, "node_id": "MDQ6VXNlcjEyMTQxMjcx", "avatar_url": "https://avatars3.githubusercontent.com/u/12141271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabriel-yahav", "html_url": "https://github.com/gabriel-yahav", "followers_url": "https://api.github.com/users/gabriel-yahav/followers", "following_url": "https://api.github.com/users/gabriel-yahav/following{/other_user}", "gists_url": "https://api.github.com/users/gabriel-yahav/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabriel-yahav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabriel-yahav/subscriptions", "organizations_url": "https://api.github.com/users/gabriel-yahav/orgs", "repos_url": "https://api.github.com/users/gabriel-yahav/repos", "events_url": "https://api.github.com/users/gabriel-yahav/events{/privacy}", "received_events_url": "https://api.github.com/users/gabriel-yahav/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-03-28T07:47:47Z", "updated_at": "2017-03-29T19:07:58Z", "closed_at": "2017-03-29T19:07:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nI'm trying to build & intall CherryPy 10.2.1 from sources . For doing that, I've already installed \r\nall the dependency python modules needed successfully. \r\n\r\n\r\nHowever, when i tried finally to build the cheroot and cherrypy modules I got the following error : \r\n\r\n\"error in CherryPy setup command: 'extras_require' must be a dictionary whose values are strings or lists of strings containing valid project/version requirement specifiers.\"\r\n\r\n\"error in cheroot setup command: 'extras_require' must be a dictionary whose values are strings or lists of strings containing valid project/version requirement specifiers.\"\r\n \r\ncheroot sources  : cheroot-5.3.0.tar.gz\r\nCherryPy sources : cherrypy-10.2.1.tar.gz\r\nPython version : 2.7.5\r\n\r\n\r\nI'll be glad for any help , \r\nThanks !", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/21", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/21/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/21/events", "html_url": "https://github.com/cherrypy/cheroot/issues/21", "id": 213748881, "node_id": "MDU6SXNzdWUyMTM3NDg4ODE=", "number": 21, "title": "PyPy test hangs on test_conn", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272676, "node_id": "MDU6TGFiZWw3OTI3MjY3Ng==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": "Something is broken"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-03-13T12:12:30Z", "updated_at": "2017-06-23T21:32:43Z", "closed_at": "2017-06-23T21:32:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Beginning with 3e1efa3, in test_conn, the test is [consistently hanging in Travis](https://travis-ci.org/cherrypy/cheroot/jobs/210301090). As you can see, the only changes were to the project layout, not to any of the code. Additionally, these tests pass without error on my local version of PyPy (5.6).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/17", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/17/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/17/events", "html_url": "https://github.com/cherrypy/cheroot/issues/17", "id": 212577360, "node_id": "MDU6SXNzdWUyMTI1NzczNjA=", "number": 17, "title": "New option to drop headers that contain underscores", "user": {"login": "mar10", "id": 41663, "node_id": "MDQ6VXNlcjQxNjYz", "avatar_url": "https://avatars3.githubusercontent.com/u/41663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mar10", "html_url": "https://github.com/mar10", "followers_url": "https://api.github.com/users/mar10/followers", "following_url": "https://api.github.com/users/mar10/following{/other_user}", "gists_url": "https://api.github.com/users/mar10/gists{/gist_id}", "starred_url": "https://api.github.com/users/mar10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mar10/subscriptions", "organizations_url": "https://api.github.com/users/mar10/orgs", "repos_url": "https://api.github.com/users/mar10/repos", "events_url": "https://api.github.com/users/mar10/events{/privacy}", "received_events_url": "https://api.github.com/users/mar10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-03-07T22:20:50Z", "updated_at": "2017-04-29T14:09:36Z", "closed_at": "2017-04-29T14:09:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'd like to propose a new option to drop headers that contain underscores ('_').\r\n\r\nCheroot / CherryPy convert HTTP headers for WSGI to upper case and replace hyphen ('-') with  underscore ('_'):\r\n\r\n```py\r\nenv.update(\r\n    ('HTTP_' + bton(k).upper().replace('-', '_'), bton(v))\r\n    for k, v in req.inheaders.items()\r\n)\r\n```   \r\n\r\nSo this headers\r\n\r\n```py\r\nheaders = {\"Sm-User\": \"val1\",\r\n           \"Sm_User\": \"val2\",}\r\nres = requests.get(\"http://127.0.0.1:8080\", headers=headers)\r\n```\r\n\r\nwill result in a **single** WSGI environment entry `\"HTTP_SM_USER\": \"val1\"` *or* `\"HTTP_SM_USER\": \"val2\".` \r\n(The concrete behavior is undefined, since the order of dict key iteration is hard to control.)\r\n\r\n### Proposed solution\r\n\r\nThis *could* be fixed by modifying the wsgi server code above, but I would suggest to drop those headers in the core code.\r\n\r\nWhile underscores in header fields are allowed ([rfc7230](https://tools.ietf.org/html/rfc7230#section-3.2)), they are uncommon, AFAIK.  \r\nFor example Apache and nginx seem to drop them by default:\r\nhttp://stackoverflow.com/a/18205049/19166\r\nhttp://stackoverflow.com/a/22856867/19166\r\n\r\nSo a solution could look like this:\r\n```py\r\ndef read_headers(rfile, hdict=None, drop_underscores=False):\r\n    ...\r\n    while True:\r\n        line = rfile.readline()\r\n            ...\r\n            if drop_underscores and '_' in k:\r\n                continue\r\n            k = k.strip().title()\r\n            v = v.strip()\r\n            hname = k\r\n            ...\r\n```\r\n\r\nI tried to prepare a PR, but I could need some advice how and where to make this configurable:\r\n\r\n```py\r\n        try:\r\n            read_headers(self.rfile, self.inheaders)\r\n            # Configurable using \"`server.underscores_in_headers\": False`\r\n            drop_underscores = not self.server.server_adapter.underscores_in_headers\r\n            read_headers(self.rfile, self.inheaders, drop_underscores)\r\n        except ValueError:\r\n            ex = sys.exc_info()[1]\r\n            self.simple_response('400 Bad Request', ex.args[0])\r\n```\r\n\r\nFor example I tried adding this to cheroot.HTTPServer:\r\n\r\n```py\r\nclass HTTPServer(object):\r\n    ...\r\n    underscores_in_headers = True\r\n    \"\"\"If False, silently discards headers containing underscores ('_').\"\"\"\r\n```\r\n\r\nand then make it configurable from cherrypy like so:\r\n\r\n```py\r\ncherrypy.config.update({\"server.underscores_in_headers\": False})\r\ncherrypy.quickstart(HelloWorld())\r\n``` \r\n=> this seems to set the attribute on the ServerAdapter instead of the HttpServer.\r\n\r\nor \r\n\r\n```py\r\ncherrypy.quickstart(HelloWorld(), config={\r\n    \"/\": {\r\n        \"server.underscores_in_headers\": False,\r\n        }\r\n    })\r\n``` \r\n\r\ndoesn't work, because the `server`namespace is not registered when quickstart is running?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/15", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/15/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/15/events", "html_url": "https://github.com/cherrypy/cheroot/issues/15", "id": 210347085, "node_id": "MDU6SXNzdWUyMTAzNDcwODU=", "number": 15, "title": "[TODO] Add valid .gitignore and .gitattributes", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 79272678, "node_id": "MDU6TGFiZWw3OTI3MjY3OA==", "url": "https://api.github.com/repos/cherrypy/cheroot/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "Improvement"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-26T20:45:43Z", "updated_at": "2017-03-03T06:42:11Z", "closed_at": "2017-03-03T06:42:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cherrypy/cheroot/issues/10", "repository_url": "https://api.github.com/repos/cherrypy/cheroot", "labels_url": "https://api.github.com/repos/cherrypy/cheroot/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/cherrypy/cheroot/issues/10/comments", "events_url": "https://api.github.com/repos/cherrypy/cheroot/issues/10/events", "html_url": "https://github.com/cherrypy/cheroot/issues/10", "id": 210302289, "node_id": "MDU6SXNzdWUyMTAzMDIyODk=", "number": 10, "title": "test_core.py cannot pass on Python3.5", "user": {"login": "rim99", "id": 13381463, "node_id": "MDQ6VXNlcjEzMzgxNDYz", "avatar_url": "https://avatars1.githubusercontent.com/u/13381463?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rim99", "html_url": "https://github.com/rim99", "followers_url": "https://api.github.com/users/rim99/followers", "following_url": "https://api.github.com/users/rim99/following{/other_user}", "gists_url": "https://api.github.com/users/rim99/gists{/gist_id}", "starred_url": "https://api.github.com/users/rim99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rim99/subscriptions", "organizations_url": "https://api.github.com/users/rim99/orgs", "repos_url": "https://api.github.com/users/rim99/repos", "events_url": "https://api.github.com/users/rim99/events{/privacy}", "received_events_url": "https://api.github.com/users/rim99/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-02-26T09:23:14Z", "updated_at": "2017-03-03T09:46:33Z", "closed_at": "2017-03-03T09:46:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While running pytest, I ran into a problem.\r\n\r\nThe `test_core.py` cannot pass on codes line.522 to line.555 .\r\n\r\n```\r\n# Get a partial file.\r\n        if cherrypy.server.protocol_version == 'HTTP/1.1':\r\n            self.getPage('/ranges/slice_file', [('Range', 'bytes=2-5')])\r\n            self.assertStatus(206) # ERROR: Status ('404 Not Found') != 206\r\n            self.assertHeader('Content-Type', 'text/html;charset=utf-8')\r\n            self.assertHeader('Content-Range', 'bytes 2-5/14') # ERROR: 'Content-Range':'bytes 2-5/14' not in headers\r\n            self.assertBody('llo,') # ERROR: much more than that\r\n\r\n            # What happens with overlapping ranges (and out of order, too)?\r\n            self.getPage('/ranges/slice_file', [('Range', 'bytes=4-6,2-5')])\r\n            self.assertStatus(206) # ERROR: Status ('404 Not Found') != 206\r\n            ct = self.assertHeader('Content-Type')\r\n            expected_type = 'multipart/byteranges; boundary='\r\n            self.assert_(ct.startswith(expected_type)) # AssertionError: False is not true\r\n            boundary = ct[len(expected_type):]\r\n            expected_body = ('\\r\\n--%s\\r\\n'\r\n                             'Content-type: text/html\\r\\n'\r\n                             'Content-range: bytes 4-6/14\\r\\n'\r\n                             '\\r\\n'\r\n                             'o, \\r\\n'\r\n                             '--%s\\r\\n'\r\n                             'Content-type: text/html\\r\\n'\r\n                             'Content-range: bytes 2-5/14\\r\\n'\r\n                             '\\r\\n'\r\n                             'llo,\\r\\n'\r\n                             '--%s--\\r\\n' % (boundary, boundary, boundary))\r\n            self.assertBody(expected_body) # ERROR: much more than that\r\n            self.assertHeader('Content-Length')\r\n\r\n            self.getPage('/ranges/slice_file', [('Range', 'bytes=2300-2900')])\r\n            self.assertStatus(416) # ERROR: Status ('404 Not Found') != 416\r\n            self.assertHeader('Content-Range', 'bytes */14') # ERROR: 'Content-Range':'bytes */14' not in headers\r\n```\r\n\r\nI removed the original comments, and put test error messages as comments behind actually unpassed codes.\r\n\r\n\r\n-----------------------\r\n\r\n\r\nIt looks like need a static file named static/index.html.\r\n\r\nI try to create the file manually, which content is \"Hello\". But the response code is 416 other than 206.\r\n\r\n\r\n---------------------\r\n\r\nI set the content to be <html><head></head><body>Hello</body></html>.\r\n\r\nThe first ERROR is fixed, now it is the 2nd ERROR: 'Content-Range':'bytes 2-5/14' not in headers\r\n\r\n-------\r\n\r\nRight, it's \"Hello, world.\"\r\n\r\nI solved this, how can I remove  this issue?", "performed_via_github_app": null, "score": 1.0}]}