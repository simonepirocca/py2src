{"total_count": 46, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/78", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/78/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/78/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/78", "id": 608007263, "node_id": "MDU6SXNzdWU2MDgwMDcyNjM=", "number": 78, "title": "Is this repository maintained by elastic at all?", "user": {"login": "shadiramadan", "id": 875944, "node_id": "MDQ6VXNlcjg3NTk0NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/875944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shadiramadan", "html_url": "https://github.com/shadiramadan", "followers_url": "https://api.github.com/users/shadiramadan/followers", "following_url": "https://api.github.com/users/shadiramadan/following{/other_user}", "gists_url": "https://api.github.com/users/shadiramadan/gists{/gist_id}", "starred_url": "https://api.github.com/users/shadiramadan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shadiramadan/subscriptions", "organizations_url": "https://api.github.com/users/shadiramadan/orgs", "repos_url": "https://api.github.com/users/shadiramadan/repos", "events_url": "https://api.github.com/users/shadiramadan/events{/privacy}", "received_events_url": "https://api.github.com/users/shadiramadan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-28T04:01:49Z", "updated_at": "2020-04-28T22:47:49Z", "closed_at": "2020-04-28T12:05:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Has elastic abandoned this repository?\r\n\r\nThere are a bunch of MRs up with no replies what so ever for over a year.\r\n\r\nYou can't expect anyone to make an effort to contribute if they can't even expect anything to be upstreamed.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/77", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/77/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/77/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/77", "id": 605780938, "node_id": "MDU6SXNzdWU2MDU3ODA5Mzg=", "number": 77, "title": "ServerDisconnectedError", "user": {"login": "paulnovacovici", "id": 29131489, "node_id": "MDQ6VXNlcjI5MTMxNDg5", "avatar_url": "https://avatars0.githubusercontent.com/u/29131489?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulnovacovici", "html_url": "https://github.com/paulnovacovici", "followers_url": "https://api.github.com/users/paulnovacovici/followers", "following_url": "https://api.github.com/users/paulnovacovici/following{/other_user}", "gists_url": "https://api.github.com/users/paulnovacovici/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulnovacovici/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulnovacovici/subscriptions", "organizations_url": "https://api.github.com/users/paulnovacovici/orgs", "repos_url": "https://api.github.com/users/paulnovacovici/repos", "events_url": "https://api.github.com/users/paulnovacovici/events{/privacy}", "received_events_url": "https://api.github.com/users/paulnovacovici/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-23T18:57:09Z", "updated_at": "2020-07-20T19:29:22Z", "closed_at": "2020-07-20T19:28:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying to save many documents to an index I'm running into the occasional disconnect for some reason:\r\n\r\n`elasticsearch.exceptions.ConnectionError: ConnectionError() caused by: ServerDisconnectedError()`\r\n\r\nAny way we to remedy this? Not sure why it happens, but setting up a retry on error may help mitigate this error. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/76", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/76/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/76/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/76/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/76", "id": 604886291, "node_id": "MDU6SXNzdWU2MDQ4ODYyOTE=", "number": 76, "title": "Does this project follow semantic versioning?", "user": {"login": "alvassin", "id": 1497444, "node_id": "MDQ6VXNlcjE0OTc0NDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1497444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alvassin", "html_url": "https://github.com/alvassin", "followers_url": "https://api.github.com/users/alvassin/followers", "following_url": "https://api.github.com/users/alvassin/following{/other_user}", "gists_url": "https://api.github.com/users/alvassin/gists{/gist_id}", "starred_url": "https://api.github.com/users/alvassin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alvassin/subscriptions", "organizations_url": "https://api.github.com/users/alvassin/orgs", "repos_url": "https://api.github.com/users/alvassin/repos", "events_url": "https://api.github.com/users/alvassin/events{/privacy}", "received_events_url": "https://api.github.com/users/alvassin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-22T16:18:31Z", "updated_at": "2020-04-23T11:19:48Z", "closed_at": "2020-04-22T22:55:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can i use this project with `~=` operator?\r\n \r\n```\r\nelasticsearch-async~=6.2.0\r\n```\r\n\r\nDoes it follow [Semantic versioning](https://semver.org)?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/75", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/75/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/75/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/75", "id": 579331956, "node_id": "MDU6SXNzdWU1NzkzMzE5NTY=", "number": 75, "title": "ping() raises instead of returning False", "user": {"login": "danielzgtg", "id": 25646384, "node_id": "MDQ6VXNlcjI1NjQ2Mzg0", "avatar_url": "https://avatars1.githubusercontent.com/u/25646384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielzgtg", "html_url": "https://github.com/danielzgtg", "followers_url": "https://api.github.com/users/danielzgtg/followers", "following_url": "https://api.github.com/users/danielzgtg/following{/other_user}", "gists_url": "https://api.github.com/users/danielzgtg/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielzgtg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielzgtg/subscriptions", "organizations_url": "https://api.github.com/users/danielzgtg/orgs", "repos_url": "https://api.github.com/users/danielzgtg/repos", "events_url": "https://api.github.com/users/danielzgtg/events{/privacy}", "received_events_url": "https://api.github.com/users/danielzgtg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-11T15:04:11Z", "updated_at": "2020-07-20T19:28:29Z", "closed_at": "2020-07-20T19:28:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "The ping() method should not crash in the async version of the Elasticsearch client, and behave like the synchronous version of the client. This async version returns True properly, but raises instead of returning False.\r\n\r\n# Expected behavior\r\n\r\nIt should return a boolean like the synchronous version:\r\n\r\n```\r\n$ python3\r\nPython 3.8.2 (default, Feb 25 2020, 13:04:52) \r\n[GCC 9.2.1 20200224] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import elasticsearch\r\n>>> es = elasticsearch.Elasticsearch(\"127.0.0.1:9\")\r\n>>> es.ping()\r\nFalse\r\n>>>\r\n```\r\n\r\n# Actual behavior\r\n\r\nThe async version raises instead of returning False:\r\n\r\n```\r\n$ python3 -m asyncio\r\nasyncio REPL 3.8.2 (default, Feb 25 2020, 13:04:52) \r\n[GCC 9.2.1 20200224] on linux\r\nUse \"await\" directly instead of \"asyncio.run()\".\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import asyncio\r\n>>> import elasticsearch_async\r\n>>> es = elasticsearch_async.AsyncElasticsearch(\"127.0.0.1:9\")\r\n>>> await es.ping()\r\nTraceback (most recent call last):\r\n  File \"/home/home/venv/lib/python3.8/site-packages/aiohttp/connector.py\", line 936, in _wrap_create_connection\r\n    return await self._loop.create_connection(*args, **kwargs)  # type: ignore  # noqa\r\n  File \"/usr/lib/python3.8/asyncio/base_events.py\", line 1025, in create_connection\r\n    raise exceptions[0]\r\n  File \"/usr/lib/python3.8/asyncio/base_events.py\", line 1010, in create_connection\r\n    sock = await self._connect_sock(\r\n  File \"/usr/lib/python3.8/asyncio/base_events.py\", line 924, in _connect_sock\r\n    await self.sock_connect(sock, address)\r\n  File \"/usr/lib/python3.8/asyncio/selector_events.py\", line 494, in sock_connect\r\n    return await fut\r\n  File \"/usr/lib/python3.8/asyncio/selector_events.py\", line 526, in _sock_connect_cb\r\n    raise OSError(err, f'Connect call failed {address}')\r\nConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 9)\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/home/venv/lib/python3.8/site-packages/elasticsearch_async/connection.py\", line 98, in perform_request\r\n    response = yield from self.session.request(method, url, data=body, headers=headers)\r\n  File \"/home/home/venv/lib/python3.8/site-packages/aiohttp/client.py\", line 480, in _request\r\n    conn = await self._connector.connect(\r\n  File \"/home/home/venv/lib/python3.8/site-packages/aiohttp/connector.py\", line 523, in connect\r\n    proto = await self._create_connection(req, traces, timeout)\r\n  File \"/home/home/venv/lib/python3.8/site-packages/aiohttp/connector.py\", line 858, in _create_connection\r\n    _, proto = await self._create_direct_connection(\r\n  File \"/home/home/venv/lib/python3.8/site-packages/aiohttp/connector.py\", line 1004, in _create_direct_connection\r\n    raise last_exc\r\n  File \"/home/home/venv/lib/python3.8/site-packages/aiohttp/connector.py\", line 980, in _create_direct_connection\r\n    transp, proto = await self._wrap_create_connection(\r\n  File \"/home/home/venv/lib/python3.8/site-packages/aiohttp/connector.py\", line 943, in _wrap_create_connection\r\n    raise client_error(req.connection_key, exc) from exc\r\naiohttp.client_exceptions.ClientConnectorError: Cannot connect to host 127.0.0.1:9 ssl:default [Connect call failed ('127.0.0.1', 9)]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/concurrent/futures/_base.py\", line 439, in result\r\n    return self.__get_result()\r\n  File \"/usr/lib/python3.8/concurrent/futures/_base.py\", line 388, in __get_result\r\n    raise self._exception\r\n  File \"<console>\", line 1, in <module>\r\n  File \"/home/home/venv/lib/python3.8/site-packages/elasticsearch_async/transport.py\", line 149, in main_loop\r\n    status, headers, data = yield from connection.perform_request(\r\n  File \"/home/home/venv/lib/python3.8/site-packages/elasticsearch_async/connection.py\", line 111, in perform_request\r\n    raise ConnectionError('N/A', str(e), e)\r\nelasticsearch.exceptions.ConnectionError: ConnectionError(Cannot connect to host 127.0.0.1:9 ssl:default [Connect call failed ('127.0.0.1', 9)]) caused by: ClientConnectorError(Cannot connect to host 127.0.0.1:9 ssl:default [Connect call failed ('127.0.0.1', 9)])\r\n>>>\r\n```\r\n\r\n# Environment\r\n\r\nNothing is listening on port 9.\r\n\r\nInstalled packages:\r\n\r\n```\r\n$ pipdeptree\r\nelasticsearch-async==6.2.0\r\n  - aiohttp [required: Any, installed: 3.6.2]\r\n    - async-timeout [required: >=3.0,<4.0, installed: 3.0.1]\r\n    - attrs [required: >=17.3.0, installed: 19.3.0]\r\n    - chardet [required: >=2.0,<4.0, installed: 3.0.4]\r\n    - multidict [required: >=4.5,<5.0, installed: 4.7.5]\r\n    - yarl [required: >=1.0,<2.0, installed: 1.4.2]\r\n      - idna [required: >=2.0, installed: 2.9]\r\n      - multidict [required: >=4.0, installed: 4.7.5]\r\n  - async-timeout [required: Any, installed: 3.0.1]\r\n  - elasticsearch [required: >=6.0.0, installed: 7.5.1]\r\n    - urllib3 [required: >=1.21.1, installed: 1.25.8]\r\npipdeptree==0.13.2\r\n  - pip [required: >=6.0.0, installed: 18.1]\r\npkg-resources==0.0.0\r\nsetuptools==44.0.0\r\nwheel==0.34.2\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/74", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/74/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/74/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/74", "id": 572832359, "node_id": "MDU6SXNzdWU1NzI4MzIzNTk=", "number": 74, "title": "Incompatible with aiohttp>=3.6 ", "user": {"login": "ibt23sec5", "id": 2109258, "node_id": "MDQ6VXNlcjIxMDkyNTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/2109258?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibt23sec5", "html_url": "https://github.com/ibt23sec5", "followers_url": "https://api.github.com/users/ibt23sec5/followers", "following_url": "https://api.github.com/users/ibt23sec5/following{/other_user}", "gists_url": "https://api.github.com/users/ibt23sec5/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibt23sec5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibt23sec5/subscriptions", "organizations_url": "https://api.github.com/users/ibt23sec5/orgs", "repos_url": "https://api.github.com/users/ibt23sec5/repos", "events_url": "https://api.github.com/users/ibt23sec5/events{/privacy}", "received_events_url": "https://api.github.com/users/ibt23sec5/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-28T15:39:39Z", "updated_at": "2020-07-20T19:32:57Z", "closed_at": "2020-07-20T19:32:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, \r\n`elasticsearch_async` is no more compatible with `aiohttp`, since version 3.6 due to [dropping](https://github.com/aio-libs/aiohttp/pull/3580) of explicit parameter `loop`:\r\n```\r\nTraceback (most recent call last):\r\n  ... \r\n    self.client = elasticsearch_async.AsyncElasticsearch(hosts=es_addresses)\r\n  File \"/home/ibt23sec5/projects/urpp/venv/lib/python3.7/site-packages/elasticsearch_async-6.2.0-py3.7.egg/elasticsearch_async/__init__.py\", line 8, in __init__\r\n    super().__init__(hosts, transport_class=transport_class, **kwargs)\r\n  File \"/home/ibt23sec5/projects/urpp/venv/lib/python3.7/site-packages/elasticsearch-7.5.1-py3.7.egg/elasticsearch/client/__init__.py\", line 227, in __init__\r\n    self.transport = transport_class(_normalize_hosts(hosts), **kwargs)\r\n  File \"/home/ibt23sec5/projects/urpp/venv/lib/python3.7/site-packages/elasticsearch_async-6.2.0-py3.7.egg/elasticsearch_async/transport.py\", line 23, in __init__\r\n    connection_pool_class=connection_pool_class, **kwargs)\r\n  File \"/home/ibt23sec5/projects/urpp/venv/lib/python3.7/site-packages/elasticsearch-7.5.1-py3.7.egg/elasticsearch/transport.py\", line 129, in __init__\r\n    self.set_connections(hosts)\r\n  File \"/home/ibt23sec5/projects/urpp/venv/lib/python3.7/site-packages/elasticsearch_async-6.2.0-py3.7.egg/elasticsearch_async/transport.py\", line 56, in set_connections\r\n    super().set_connections(hosts)\r\n  File \"/home/ibt23sec5/projects/urpp/venv/lib/python3.7/site-packages/elasticsearch-7.5.1-py3.7.egg/elasticsearch/transport.py\", line 179, in set_connections\r\n    connections = list(zip(connections, hosts))\r\n  File \"/home/ibt23sec5/projects/urpp/venv/lib/python3.7/site-packages/elasticsearch-7.5.1-py3.7.egg/elasticsearch/transport.py\", line 175, in _create_connection\r\n    return self.connection_class(**kwargs)\r\n  File \"/home/ibt23sec5/projects/urpp/venv/lib/python3.7/site-packages/elasticsearch_async-6.2.0-py3.7.egg/elasticsearch_async/connection.py\", line 73, in __init__\r\n    ssl_context=ssl_context,\r\nTypeError: __init__() got an unexpected keyword argument 'loop'\r\n```\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/71", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/71/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/71/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/71", "id": 518579853, "node_id": "MDU6SXNzdWU1MTg1Nzk4NTM=", "number": 71, "title": "How to pass querystring params to search?", "user": {"login": "arnaudsj", "id": 9855, "node_id": "MDQ6VXNlcjk4NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/9855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arnaudsj", "html_url": "https://github.com/arnaudsj", "followers_url": "https://api.github.com/users/arnaudsj/followers", "following_url": "https://api.github.com/users/arnaudsj/following{/other_user}", "gists_url": "https://api.github.com/users/arnaudsj/gists{/gist_id}", "starred_url": "https://api.github.com/users/arnaudsj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arnaudsj/subscriptions", "organizations_url": "https://api.github.com/users/arnaudsj/orgs", "repos_url": "https://api.github.com/users/arnaudsj/repos", "events_url": "https://api.github.com/users/arnaudsj/events{/privacy}", "received_events_url": "https://api.github.com/users/arnaudsj/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-06T16:20:47Z", "updated_at": "2020-07-20T20:28:50Z", "closed_at": "2020-07-20T20:28:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am trying to pass the following parameter to some of my queries (during tests, to ensure consistency of scoring): ?search_type=dfs_query_then_fetch (as instructed in https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-body.html#request-body-search-search-type)\r\n\r\nWhat's the best way to pass this along to the search method? I see params in there, but according to a section of the code in transport.py (https://github.com/elastic/elasticsearch-py-async/blob/master/elasticsearch_async/transport.py#L187-L197), it is not clear whether or not the content of params gets serialized in the querystring part for the url request, when a body is present.\r\n\r\nThank you in advance for any pointers!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/70", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/70/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/70/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/70", "id": 509495308, "node_id": "MDU6SXNzdWU1MDk0OTUzMDg=", "number": 70, "title": "Drop Python 3.4 support", "user": {"login": "vEpiphyte", "id": 26100278, "node_id": "MDQ6VXNlcjI2MTAwMjc4", "avatar_url": "https://avatars2.githubusercontent.com/u/26100278?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vEpiphyte", "html_url": "https://github.com/vEpiphyte", "followers_url": "https://api.github.com/users/vEpiphyte/followers", "following_url": "https://api.github.com/users/vEpiphyte/following{/other_user}", "gists_url": "https://api.github.com/users/vEpiphyte/gists{/gist_id}", "starred_url": "https://api.github.com/users/vEpiphyte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vEpiphyte/subscriptions", "organizations_url": "https://api.github.com/users/vEpiphyte/orgs", "repos_url": "https://api.github.com/users/vEpiphyte/repos", "events_url": "https://api.github.com/users/vEpiphyte/events{/privacy}", "received_events_url": "https://api.github.com/users/vEpiphyte/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-19T18:56:57Z", "updated_at": "2020-07-20T18:58:32Z", "closed_at": "2020-07-20T18:58:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can we drop Python 3.4 support from this library?  It has reached end-of-life and is no longer maintained by the Python Software Foundation. See https://www.python.org/dev/peps/pep-0429/#release-schedule for the 3.4 EOL notice.\r\n\r\nDropping 3.4 would allow us to migrate everything into a modern `async def` syntax and use async generators.  Async generators would allows this library to support scroll/scan API as well as Bulk api's easier.  I've got a fork which implements most of those helpers as async versions already; and it was trivial to do with async generator support.\r\n\r\n@HonzaKral @fxdgear ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/67", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/67/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/67/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/67/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/67", "id": 481245254, "node_id": "MDU6SXNzdWU0ODEyNDUyNTQ=", "number": 67, "title": "Elasticsearch 7.x support", "user": {"login": "ipeluffo", "id": 889705, "node_id": "MDQ6VXNlcjg4OTcwNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/889705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ipeluffo", "html_url": "https://github.com/ipeluffo", "followers_url": "https://api.github.com/users/ipeluffo/followers", "following_url": "https://api.github.com/users/ipeluffo/following{/other_user}", "gists_url": "https://api.github.com/users/ipeluffo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ipeluffo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ipeluffo/subscriptions", "organizations_url": "https://api.github.com/users/ipeluffo/orgs", "repos_url": "https://api.github.com/users/ipeluffo/repos", "events_url": "https://api.github.com/users/ipeluffo/events{/privacy}", "received_events_url": "https://api.github.com/users/ipeluffo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-08-15T17:04:20Z", "updated_at": "2020-07-20T18:56:24Z", "closed_at": "2020-07-20T18:56:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there any plan to release a version of this library to support Elasticsearch 7.x?\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/66", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/66/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/66/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/66", "id": 477056866, "node_id": "MDU6SXNzdWU0NzcwNTY4NjY=", "number": 66, "title": "Why schedule Task instead of just returning Future?", "user": {"login": "boc0", "id": 27312313, "node_id": "MDQ6VXNlcjI3MzEyMzEz", "avatar_url": "https://avatars1.githubusercontent.com/u/27312313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boc0", "html_url": "https://github.com/boc0", "followers_url": "https://api.github.com/users/boc0/followers", "following_url": "https://api.github.com/users/boc0/following{/other_user}", "gists_url": "https://api.github.com/users/boc0/gists{/gist_id}", "starred_url": "https://api.github.com/users/boc0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boc0/subscriptions", "organizations_url": "https://api.github.com/users/boc0/orgs", "repos_url": "https://api.github.com/users/boc0/repos", "events_url": "https://api.github.com/users/boc0/events{/privacy}", "received_events_url": "https://api.github.com/users/boc0/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-05T21:02:02Z", "updated_at": "2020-07-20T19:25:40Z", "closed_at": "2020-07-20T19:25:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "First, thanks for making this.\r\n\r\nTrying to await an indexing operation transport.py ensure_future()s the request so it's attached to its own loop. So the task cannot be started in my loop. Why not just return the future without ensure/create_task-ing it?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/65", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/65/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/65/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/65", "id": 461043285, "node_id": "MDU6SXNzdWU0NjEwNDMyODU=", "number": 65, "title": "Asyncio.run Not Supported ", "user": {"login": "mathfish", "id": 14007933, "node_id": "MDQ6VXNlcjE0MDA3OTMz", "avatar_url": "https://avatars1.githubusercontent.com/u/14007933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mathfish", "html_url": "https://github.com/mathfish", "followers_url": "https://api.github.com/users/mathfish/followers", "following_url": "https://api.github.com/users/mathfish/following{/other_user}", "gists_url": "https://api.github.com/users/mathfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/mathfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mathfish/subscriptions", "organizations_url": "https://api.github.com/users/mathfish/orgs", "repos_url": "https://api.github.com/users/mathfish/repos", "events_url": "https://api.github.com/users/mathfish/events{/privacy}", "received_events_url": "https://api.github.com/users/mathfish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-06-26T15:35:21Z", "updated_at": "2020-06-23T21:31:17Z", "closed_at": "2020-06-23T21:31:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to use the Python 3.7 approach for asyncio via asyncio.run() and not loop.run_until_complete(). This produces the following error: \r\n\r\n`RuntimeError: Task <Task pending coro=<query_elasticsearch() running at <ipython-input-10-b627b3d0f9d9>:23> cb=[as_completed.<locals>._on_completion() at /miniconda3.7/lib/python3.7/asyncio/tasks.py:520]> got Future <Task pending coro=<AsyncTransport.main_loop() running at /lib/python3.7/site-packages/elasticsearch_async/transport.py:143>> attached to a different loop`\r\n\r\nIf this is not a bug but just not supported yet, is there plans to include this? Thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/64", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/64/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/64/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/64", "id": 434621292, "node_id": "MDU6SXNzdWU0MzQ2MjEyOTI=", "number": 64, "title": "Connect elasticsearch with ipv6 address", "user": {"login": "YvanZ", "id": 10861189, "node_id": "MDQ6VXNlcjEwODYxMTg5", "avatar_url": "https://avatars3.githubusercontent.com/u/10861189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YvanZ", "html_url": "https://github.com/YvanZ", "followers_url": "https://api.github.com/users/YvanZ/followers", "following_url": "https://api.github.com/users/YvanZ/following{/other_user}", "gists_url": "https://api.github.com/users/YvanZ/gists{/gist_id}", "starred_url": "https://api.github.com/users/YvanZ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YvanZ/subscriptions", "organizations_url": "https://api.github.com/users/YvanZ/orgs", "repos_url": "https://api.github.com/users/YvanZ/repos", "events_url": "https://api.github.com/users/YvanZ/events{/privacy}", "received_events_url": "https://api.github.com/users/YvanZ/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-18T07:07:08Z", "updated_at": "2020-07-20T20:33:53Z", "closed_at": "2020-07-20T20:33:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I connect my elsaticsearch with an ipv6 address like this:\r\n\r\n```python\r\nES_CLIENT = AsyncElasticsearch(\r\n    hosts=['http://[2002:ac1f:91c8::127.0.0.1]:9200'],\r\n    timeout=120,\r\n    sniff_on_start=True,\r\n    retry_on_timeout=True,\r\n    max_retries=5,\r\n    loop=self.loop\r\n)\r\n```\r\n\r\nThe connection will be failed because of the address will be converted to `2002:ac1f:91c8::127.0.0.1`, and aiohttp can't establish the connection with that kind of address.\r\n\r\nWith this situation, I have prepared a pull request if you think this is a bug, or how can I connect my elasticsearch with IP address like that.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/62", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/62/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/62/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/62", "id": 427696450, "node_id": "MDU6SXNzdWU0Mjc2OTY0NTA=", "number": 62, "title": "please fix non UTF-8 surrogateescapes", "user": {"login": "x0day", "id": 6091595, "node_id": "MDQ6VXNlcjYwOTE1OTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/6091595?v=4", "gravatar_id": "", "url": "https://api.github.com/users/x0day", "html_url": "https://github.com/x0day", "followers_url": "https://api.github.com/users/x0day/followers", "following_url": "https://api.github.com/users/x0day/following{/other_user}", "gists_url": "https://api.github.com/users/x0day/gists{/gist_id}", "starred_url": "https://api.github.com/users/x0day/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/x0day/subscriptions", "organizations_url": "https://api.github.com/users/x0day/orgs", "repos_url": "https://api.github.com/users/x0day/repos", "events_url": "https://api.github.com/users/x0day/events{/privacy}", "received_events_url": "https://api.github.com/users/x0day/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-01T13:10:51Z", "updated_at": "2020-07-20T19:09:57Z", "closed_at": "2020-07-20T19:09:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "It's already fixed in elasticsearch-py, but not in elasticsearch-py-async.\r\n\r\nhttps://github.com/elastic/elasticsearch-py/issues/611\r\nhttps://github.com/elastic/elasticsearch-py/pull/612\r\nhttps://github.com/elastic/elasticsearch-py-async/blob/master/elasticsearch_async/transport.py#L201", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/61", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/61/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/61/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/61", "id": 424725660, "node_id": "MDU6SXNzdWU0MjQ3MjU2NjA=", "number": 61, "title": "RuntimeError: Task got bad yield: 200", "user": {"login": "bisoldi", "id": 9962726, "node_id": "MDQ6VXNlcjk5NjI3MjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/9962726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bisoldi", "html_url": "https://github.com/bisoldi", "followers_url": "https://api.github.com/users/bisoldi/followers", "following_url": "https://api.github.com/users/bisoldi/following{/other_user}", "gists_url": "https://api.github.com/users/bisoldi/gists{/gist_id}", "starred_url": "https://api.github.com/users/bisoldi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bisoldi/subscriptions", "organizations_url": "https://api.github.com/users/bisoldi/orgs", "repos_url": "https://api.github.com/users/bisoldi/repos", "events_url": "https://api.github.com/users/bisoldi/events{/privacy}", "received_events_url": "https://api.github.com/users/bisoldi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-03-25T05:08:44Z", "updated_at": "2020-07-20T20:30:40Z", "closed_at": "2020-07-20T20:30:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting a `Task got bad yield: 200` error while using the bulk method.  I've tried this different ways (i.e. without my own generator function).  I've also tried an unofficial Helpers class that was written and I get the same error.\r\n\r\nHere is the stack trace:\r\n\r\n```\r\nFile \"/Users/brooks.isoldi/git/Futures/css/ingest/PythonElasticsearchIngest/venv/lib/python3.6/site-packages/elasticsearch_async/transport.py\", line 150, in main_loop\r\n    method, url, params, body, headers=headers, ignore=ignore, timeout=timeout)\r\nRuntimeError: Task got bad yield: 200\r\n```\r\n\r\nBelow is the relevant code:\r\n\r\n```\r\nfrom elasticsearch import RequestsHttpConnection\r\nfrom elasticsearch_async import AsyncElasticsearch\r\nfrom assume_role_aws4auth import AssumeRoleAWS4Auth\r\n\r\ncredentials = boto3.Session().get_credentials()\r\nawsauth = AssumeRoleAWS4Auth(credentials, 'us-east-1', 'es')\r\nevent_loop = asyncio.get_event_loop()\r\nes_client = AsyncElasticsearch(hosts=['https://MY-ES_HOST'], http_compress=True, http_auth=awsauth, use_ssl=True,\r\n                               verify_certs=True, connection_class=RequestsHttpConnection, loop=event_loop)\r\n\r\n\r\ndef read_chunk(file_path: str, max_batch_size: int, max_records: int):\r\n    actions: str = ''\r\n    actions_size: int = 0\r\n    num_actions: int = 0\r\n    with gzip.open(file_path, 'rt') as f:\r\n        for line in f:\r\n            request = json.dumps(dict({'index': dict({})})) + '\\n' + line + '\\n'\r\n            request_size = len(request.encode('utf-8'))\r\n\r\n            # Check to see if this record will put us over the limits\r\n            if (actions_size + request_size) > max_batch_size or num_actions == max_records:\r\n                yield actions\r\n                actions = ''\r\n                num_actions = 0\r\n                actions_size = 0\r\n\r\n            # Add the record\r\n            actions += request\r\n            num_actions += 1\r\n            actions_size += request_size\r\n\r\n    if actions != '':\r\n        yield actions\r\n\r\n\r\nasync def process(filename: str):\r\n    for action_chunk in read_chunk(filename, 10000000, 500):\r\n        try:\r\n            resp = await es_client.bulk(body=action_chunk, index='logs', doc_type='doc', _source=False)\r\n            logger.error(resp)\r\n        except Exception as ex:\r\n            logger.error('Found an exception')\r\n            logger.error(''.join(traceback.format_exception(etype=type(ex), value=ex, tb=ex.__traceback__)))\r\n        await asyncio.sleep(.1)\r\n\r\n\r\nevent_loop.run_until_complete(process(filename))\r\npending = asyncio.Task.all_tasks()\r\nevent_loop.run_until_complete(asyncio.gather(*pending))\r\n```\r\n\r\nAny thoughts?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/58", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/58/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/58/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/58", "id": 376686829, "node_id": "MDU6SXNzdWUzNzY2ODY4Mjk=", "number": 58, "title": "How can I use proxy to connect to elasticsearch ?", "user": {"login": "RatanShreshtha", "id": 10801618, "node_id": "MDQ6VXNlcjEwODAxNjE4", "avatar_url": "https://avatars3.githubusercontent.com/u/10801618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RatanShreshtha", "html_url": "https://github.com/RatanShreshtha", "followers_url": "https://api.github.com/users/RatanShreshtha/followers", "following_url": "https://api.github.com/users/RatanShreshtha/following{/other_user}", "gists_url": "https://api.github.com/users/RatanShreshtha/gists{/gist_id}", "starred_url": "https://api.github.com/users/RatanShreshtha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RatanShreshtha/subscriptions", "organizations_url": "https://api.github.com/users/RatanShreshtha/orgs", "repos_url": "https://api.github.com/users/RatanShreshtha/repos", "events_url": "https://api.github.com/users/RatanShreshtha/events{/privacy}", "received_events_url": "https://api.github.com/users/RatanShreshtha/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-02T06:36:11Z", "updated_at": "2020-07-20T20:32:18Z", "closed_at": "2020-07-20T20:32:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to connect elasticsearch cluster when I am behind a corporate proxy maybe something like \r\n\r\n```\r\nfrom elasticsearch import Elasticsearch, RequestsHttpConnection\r\n\r\n\r\nclass MyConnection(RequestsHttpConnection):\r\n    def __init__(self, *args, **kwargs):\r\n        proxies = kwargs.pop(\"proxies\", {})\r\n        super(MyConnection, self).__init__(*args, **kwargs)\r\n        self.session.proxies = proxies\r\n\r\n\r\nes = Elasticsearch(\r\n    [\"https://url_to_elasticsearch\"],\r\n    connection_class=MyConnection,\r\n    proxies=proxies,\r\n    use_ssl=True,\r\n    http_auth=(\"username\", \"password\"),\r\n)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/54", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/54/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/54/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/54", "id": 356415047, "node_id": "MDU6SXNzdWUzNTY0MTUwNDc=", "number": 54, "title": "TypeError: '_asyncio.Task' object is not subscriptable", "user": {"login": "zsk1993", "id": 42371914, "node_id": "MDQ6VXNlcjQyMzcxOTE0", "avatar_url": "https://avatars0.githubusercontent.com/u/42371914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zsk1993", "html_url": "https://github.com/zsk1993", "followers_url": "https://api.github.com/users/zsk1993/followers", "following_url": "https://api.github.com/users/zsk1993/following{/other_user}", "gists_url": "https://api.github.com/users/zsk1993/gists{/gist_id}", "starred_url": "https://api.github.com/users/zsk1993/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zsk1993/subscriptions", "organizations_url": "https://api.github.com/users/zsk1993/orgs", "repos_url": "https://api.github.com/users/zsk1993/repos", "events_url": "https://api.github.com/users/zsk1993/events{/privacy}", "received_events_url": "https://api.github.com/users/zsk1993/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-03T08:58:22Z", "updated_at": "2020-07-20T18:57:10Z", "closed_at": "2020-07-20T18:57:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to index the documents with command: ./manage.py search_index --rebuild\r\nthe errors as follows:\r\nTraceback (most recent call last):\r\n  File \"./manage.py\", line 15, in <module>\r\n    execute_from_command_line(sys.argv)\r\n  File \"E:\\codes\\xtsearch\\venv\\lib\\site-packages\\django\\                                                                                                                                      core\\management\\__init__.py\", line 371, in execute_from_                                                                                                                                      command_line\r\n    utility.execute()\r\n  File \"E:\\codes\\xtsearch\\venv\\lib\\site-packages\\django\\                                                                                                                                      core\\management\\__init__.py\", line 365, in execute\r\n    self.fetch_command(subcommand).run_from_argv(self.ar                                                                                                                                      gv)\r\n  File \"E:\\codes\\xtsearch\\venv\\lib\\site-packages\\django\\                                                                                                                                      core\\management\\base.py\", line 288, in run_from_argv\r\n    self.execute(*args, **cmd_options)\r\n  File \"E:\\codes\\xtsearch\\venv\\lib\\site-packages\\django\\                                                                                                                                      core\\management\\base.py\", line 335, in execute\r\n    output = self.handle(*args, **options)\r\n  File \"D:\\es_test\\xtsearch\\django_elasticsearch_dsl\\man                                                                                                                                      agement\\commands\\search_index.py\", line 134, in handle\r\n    self._rebuild(models, options)\r\n  File \"D:\\es_test\\xtsearch\\django_elasticsearch_dsl\\man                                                                                                                                      agement\\commands\\search_index.py\", line 115, in _rebuild\r\n    self._populate(models, options)\r\n  File \"D:\\es_test\\xtsearch\\django_elasticsearch_dsl\\man                                                                                                                                      agement\\commands\\search_index.py\", line 92, in _populate\r\n    doc().update(qs)\r\n  File \"D:\\es_test\\xtsearch\\django_elasticsearch_dsl\\doc                                                                                                                                      uments.py\", line 231, in update\r\n    self._get_actions(object_list, action), **kwargs\r\n  File \"D:\\es_test\\xtsearch\\django_elasticsearch_dsl\\doc                                                                                                                                      uments.py\", line 191, in bulk\r\n    return bulk(client=self.connection, actions=actions,                                                                                                                                       **kwargs)\r\n  File \"D:\\es_test\\xtsearch\\elasticsearch\\helpers\\__init                                                                                                                                      __.py\", line 257, in bulk\r\n    for ok, item in streaming_bulk(client, actions, **kw                                                                                                                                      args):\r\n  File \"D:\\es_test\\xtsearch\\elasticsearch\\helpers\\__init                                                                                                                                      __.py\", line 192, in streaming_bulk\r\n    raise_on_error, **kwargs)\r\n  File \"D:\\es_test\\xtsearch\\elasticsearch\\helpers\\__init                                                                                                                                      __.py\", line 123, in _process_bulk_chunk\r\n    for data, (op_type, item) in zip(bulk_data, map(meth                                                                                                                                      odcaller('popitem'), resp['items'])):\r\nTypeError: '_asyncio.Task' object is not subscriptable\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/53", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/53/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/53/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/53", "id": 354997482, "node_id": "MDU6SXNzdWUzNTQ5OTc0ODI=", "number": 53, "title": "Can't access ElasticSearch in docker container by domain name", "user": {"login": "lly123", "id": 892978, "node_id": "MDQ6VXNlcjg5Mjk3OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/892978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lly123", "html_url": "https://github.com/lly123", "followers_url": "https://api.github.com/users/lly123/followers", "following_url": "https://api.github.com/users/lly123/following{/other_user}", "gists_url": "https://api.github.com/users/lly123/gists{/gist_id}", "starred_url": "https://api.github.com/users/lly123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lly123/subscriptions", "organizations_url": "https://api.github.com/users/lly123/orgs", "repos_url": "https://api.github.com/users/lly123/repos", "events_url": "https://api.github.com/users/lly123/events{/privacy}", "received_events_url": "https://api.github.com/users/lly123/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-29T05:01:06Z", "updated_at": "2020-07-20T19:09:26Z", "closed_at": "2020-07-20T19:09:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi guys,\r\n\r\nI found in docker container your lib can't access es by domain name directly, so I have to convert domain to ip address by \"socket.gethostbyname\".\r\n\r\nThis issue maybe relates to https://stackoverflow.com/questions/40347726/python-3-5-asyncio-and-aiohttp-errno-101-network-is-unreachable\r\n\r\nPlease check", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/48", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/48/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/48/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/48", "id": 339753344, "node_id": "MDU6SXNzdWUzMzk3NTMzNDQ=", "number": 48, "title": "[Feature request] AsyncElasticsearch should implement an async context manager", "user": {"login": "albins", "id": 102855, "node_id": "MDQ6VXNlcjEwMjg1NQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/102855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albins", "html_url": "https://github.com/albins", "followers_url": "https://api.github.com/users/albins/followers", "following_url": "https://api.github.com/users/albins/following{/other_user}", "gists_url": "https://api.github.com/users/albins/gists{/gist_id}", "starred_url": "https://api.github.com/users/albins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albins/subscriptions", "organizations_url": "https://api.github.com/users/albins/orgs", "repos_url": "https://api.github.com/users/albins/repos", "events_url": "https://api.github.com/users/albins/events{/privacy}", "received_events_url": "https://api.github.com/users/albins/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-10T09:02:16Z", "updated_at": "2019-04-12T16:10:28Z", "closed_at": "2019-04-12T16:10:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It would be nice if `AsyncElasticsearch` implemented the magic methods (specifically `__aenter__()` and `__aexit__()`) to become an async context manager, which would allow code like this:\r\n```python\r\nasync with AsyncElasticsearch() as client:\r\n    print(await client.info()) \r\n```\r\nand have the session closed.\r\n\r\nHappy to implement this[ similar to how aiohttp has done it](https://github.com/aio-libs/aiohttp/blob/master/aiohttp/client.py#L820) if you are interested!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/46", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/46/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/46/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/46", "id": 332661754, "node_id": "MDU6SXNzdWUzMzI2NjE3NTQ=", "number": 46, "title": "latest aiohttp support for 5.x branch", "user": {"login": "amatai", "id": 609781, "node_id": "MDQ6VXNlcjYwOTc4MQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/609781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amatai", "html_url": "https://github.com/amatai", "followers_url": "https://api.github.com/users/amatai/followers", "following_url": "https://api.github.com/users/amatai/following{/other_user}", "gists_url": "https://api.github.com/users/amatai/gists{/gist_id}", "starred_url": "https://api.github.com/users/amatai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amatai/subscriptions", "organizations_url": "https://api.github.com/users/amatai/orgs", "repos_url": "https://api.github.com/users/amatai/repos", "events_url": "https://api.github.com/users/amatai/events{/privacy}", "received_events_url": "https://api.github.com/users/amatai/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-15T06:38:40Z", "updated_at": "2020-07-20T19:05:39Z", "closed_at": "2020-07-20T19:05:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Issue #37 was fixed for elasticsearch-py-async versions 6.x and above.\r\nVersion 6.0.0 depends on elasticsearch 6.0.0, with has compatability with ElasticSearch 6.x\r\n\r\nIn real world, Elasticsearch 5.x is widely installed, which means elasticsearch-py-async 5.x is needed to talk to ES 5.x cluster.\r\n\r\nUsing 5.x causes the same issue as #37 with latest aiohttp.\r\n\r\nIs there a way to get the `Timeout` to `async_timeout` change implemented for 5.x branch?\r\nIn essence, similar to how https://github.com/elastic/elasticsearch-py package is available for different version of ElasticSearch, similarly, the async version of the client should be available. \r\n\r\nI am willing to contribute.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/44", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/44/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/44/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/44", "id": 320555456, "node_id": "MDU6SXNzdWUzMjA1NTU0NTY=", "number": 44, "title": "Python 3.7.0b4 async keyword incompatibility", "user": {"login": "mingwandroid", "id": 1042804, "node_id": "MDQ6VXNlcjEwNDI4MDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1042804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mingwandroid", "html_url": "https://github.com/mingwandroid", "followers_url": "https://api.github.com/users/mingwandroid/followers", "following_url": "https://api.github.com/users/mingwandroid/following{/other_user}", "gists_url": "https://api.github.com/users/mingwandroid/gists{/gist_id}", "starred_url": "https://api.github.com/users/mingwandroid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mingwandroid/subscriptions", "organizations_url": "https://api.github.com/users/mingwandroid/orgs", "repos_url": "https://api.github.com/users/mingwandroid/repos", "events_url": "https://api.github.com/users/mingwandroid/events{/privacy}", "received_events_url": "https://api.github.com/users/mingwandroid/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-05-06T01:50:15Z", "updated_at": "2019-01-15T09:28:05Z", "closed_at": "2018-08-08T17:16:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nimport: 'elasticsearch_async'\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/conda-bld/elasticsearch-async_1525571278323/test_tmp/run_test.py\", line 2, in <module>\r\n    import elasticsearch_async\r\n  File \"/opt/conda/conda-bld/elasticsearch-async_1525571278323/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_/lib/python3.7/site-packages/elasticsearch_async/__init__.py\", line 1, in <module>\r\n    from .transport import AsyncTransport\r\n  File \"/opt/conda/conda-bld/elasticsearch-async_1525571278323/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_/lib/python3.7/site-packages/elasticsearch_async/transport.py\", line 9, in <module>\r\n    from .helpers import ensure_future\r\n  File \"/opt/conda/conda-bld/elasticsearch-async_1525571278323/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_/lib/python3.7/site-packages/elasticsearch_async/helpers.py\", line 3\r\n    ensure_future = getattr(asyncio, 'ensure_future', asyncio.async)\r\n                                                                  ^\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/43", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/43/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/43/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/43", "id": 315404166, "node_id": "MDU6SXNzdWUzMTU0MDQxNjY=", "number": 43, "title": "Unclosed connector", "user": {"login": "joejuzl", "id": 1702538, "node_id": "MDQ6VXNlcjE3MDI1Mzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1702538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joejuzl", "html_url": "https://github.com/joejuzl", "followers_url": "https://api.github.com/users/joejuzl/followers", "following_url": "https://api.github.com/users/joejuzl/following{/other_user}", "gists_url": "https://api.github.com/users/joejuzl/gists{/gist_id}", "starred_url": "https://api.github.com/users/joejuzl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joejuzl/subscriptions", "organizations_url": "https://api.github.com/users/joejuzl/orgs", "repos_url": "https://api.github.com/users/joejuzl/repos", "events_url": "https://api.github.com/users/joejuzl/events{/privacy}", "received_events_url": "https://api.github.com/users/joejuzl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-04-18T09:37:51Z", "updated_at": "2020-07-20T19:08:58Z", "closed_at": "2020-07-20T19:08:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI am getting an error message when using the client.\r\n\r\n**Error message**\r\n```\r\nUnclosed connector\r\nconnections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x7fb608150c88>, 170770.66)]']\r\nconnector: <aiohttp.connector.TCPConnector object at 0x7fb608128588>\r\n```\r\n\r\n**My code:**\r\n```\r\nelastic_client = AsyncElasticsearch([f'{ES_USER}:{ES_PASSWORD}@{ES_HOST}'], loop=eloop)\r\nawait elastic_client.index(index=es_index(doc_type), doc_type=doc_type, body=activity)\r\nelastic_client.transport.close()\r\n```\r\n\r\nThis is called in an `aiohttp.web.Application` middleware. The loop is created when the app is created using `asyncio.get_event_loop()`.\r\n\r\nThe request still succeeds, but the message is noisy.\r\n\r\nI have tried with and without the line `elastic_client.transport.close()` to no avail. And sometimes (sporadically) with it there I get the error message: \r\n```\r\n/usr/local/lib/python3.6/site-packages/elasticsearch/connection_pool.py:255: RuntimeWarning: coroutine 'ClientSession.close' was never awaited\r\n```\r\nHowever `await` the same line throws a different error.\r\n\r\n**Versions:**\r\n\r\npython ==3.6.4\r\nelasticsearch-async ==6.0.0\r\naiohttp ==3.1.3\r\n\r\nAm I doing something wrong, or is this a bug?\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/42", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/42/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/42/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/42", "id": 313309043, "node_id": "MDU6SXNzdWUzMTMzMDkwNDM=", "number": 42, "title": "Non-async Elasticsearch kwargs sniffer_timeout should be dropped", "user": {"login": "eLvErDe", "id": 1586757, "node_id": "MDQ6VXNlcjE1ODY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1586757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eLvErDe", "html_url": "https://github.com/eLvErDe", "followers_url": "https://api.github.com/users/eLvErDe/followers", "following_url": "https://api.github.com/users/eLvErDe/following{/other_user}", "gists_url": "https://api.github.com/users/eLvErDe/gists{/gist_id}", "starred_url": "https://api.github.com/users/eLvErDe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eLvErDe/subscriptions", "organizations_url": "https://api.github.com/users/eLvErDe/orgs", "repos_url": "https://api.github.com/users/eLvErDe/repos", "events_url": "https://api.github.com/users/eLvErDe/events{/privacy}", "received_events_url": "https://api.github.com/users/eLvErDe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-11T12:49:05Z", "updated_at": "2020-07-20T19:33:38Z", "closed_at": "2020-07-20T19:33:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nAfter switching from classic driver to async one I kept the same init kwargs:\r\n\r\n```\r\nself.conn = AsyncElasticsearch(\r\n    hosts=self.hosts,\r\n    # http://elasticsearch-py.readthedocs.io/en/master/api.html?highlight=search#elasticsearch\r\n    sniff_on_start=True,\r\n    sniff_on_connection_fail=True,\r\n    sniffer_timeout=60\r\n)\r\n```\r\n\r\nThis setting gives the traceback below. Removing sniffer_timeout make it work again. As the sniffing is probably handled completely different in async driver, I suggest dropping it from calling super.\r\n\r\n```\r\n File \"/usr/lib/python3.5/asyncio/futures.py\", line 380, in __iter__\r\n    yield self  # This tells Task to wait for completion.\r\n  File \"/usr/lib/python3.5/asyncio/tasks.py\", line 304, in _wakeup\r\n    future.result()\r\n  File \"/usr/lib/python3.5/asyncio/futures.py\", line 293, in result\r\n    raise self._exception\r\n  File \"/usr/lib/python3.5/asyncio/tasks.py\", line 239, in _step\r\n    result = coro.send(None)\r\n  File \"/usr/lib/python3/dist-packages/elasticsearch_async2/transport.py\", line 136, in main_loop\r\n    connection = self.get_connection()\r\n  File \"/usr/lib/python3/dist-packages/elasticsearch_async2/transport.py\", line 53, in get_connection\r\n    self.initiate_sniff()\r\n  File \"/usr/lib/python3/dist-packages/elasticsearch_async2/transport.py\", line 35, in initiate_sniff\r\n    self.sniffing_task.result()\r\n  File \"/usr/lib/python3.5/asyncio/futures.py\", line 293, in result\r\n    raise self._exception\r\n  File \"/usr/lib/python3.5/asyncio/tasks.py\", line 239, in _step\r\n    result = coro.send(None)\r\n  File \"/usr/lib/python3/dist-packages/elasticsearch_async2/transport.py\", line 116, in sniff_hosts\r\n    node_info = yield from self._get_sniff_data(initial)\r\n  File \"/usr/lib/python3/dist-packages/elasticsearch_async2/transport.py\", line 86, in _get_sniff_data\r\n    _, headers, node_info = t.result()\r\n  File \"/usr/lib/python3.5/asyncio/futures.py\", line 293, in result\r\n    raise self._exception\r\n  File \"/usr/lib/python3.5/asyncio/tasks.py\", line 239, in _step\r\n    result = coro.send(None)\r\n  File \"/usr/lib/python3/dist-packages/elasticsearch_async2/connection.py\", line 55, in perform_request\r\n    response = yield from self.session.request(method, url, data=body)\r\n  File \"/usr/lib/python3/dist-packages/aiohttp/helpers.py\", line 91, in __iter__\r\n    ret = yield from self._coro\r\n  File \"/usr/lib/python3/dist-packages/aiohttp/client.py\", line 168, in _request\r\n    raise RuntimeError('Session is closed')\r\nRuntimeError: Session is closed\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/41", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/41/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/41/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/41/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/41", "id": 303363833, "node_id": "MDU6SXNzdWUzMDMzNjM4MzM=", "number": 41, "title": "Name error in connection.py", "user": {"login": "Hardtack", "id": 415292, "node_id": "MDQ6VXNlcjQxNTI5Mg==", "avatar_url": "https://avatars3.githubusercontent.com/u/415292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hardtack", "html_url": "https://github.com/Hardtack", "followers_url": "https://api.github.com/users/Hardtack/followers", "following_url": "https://api.github.com/users/Hardtack/following{/other_user}", "gists_url": "https://api.github.com/users/Hardtack/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hardtack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hardtack/subscriptions", "organizations_url": "https://api.github.com/users/Hardtack/orgs", "repos_url": "https://api.github.com/users/Hardtack/repos", "events_url": "https://api.github.com/users/Hardtack/events{/privacy}", "received_events_url": "https://api.github.com/users/Hardtack/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-08T05:46:10Z", "updated_at": "2018-03-08T05:47:44Z", "closed_at": "2018-03-08T05:47:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/elastic/elasticsearch-py-async/blob/78d2ad3057552ce52b09b16ad932a12f0a3d3732/elasticsearch_async/connection.py#L56\r\n\r\nNever defined variable `ssl`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/40", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/40/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/40/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/40", "id": 300479817, "node_id": "MDU6SXNzdWUzMDA0Nzk4MTc=", "number": 40, "title": "Async Bulk support", "user": {"login": "smlbiobot", "id": 25040297, "node_id": "MDQ6VXNlcjI1MDQwMjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/25040297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smlbiobot", "html_url": "https://github.com/smlbiobot", "followers_url": "https://api.github.com/users/smlbiobot/followers", "following_url": "https://api.github.com/users/smlbiobot/following{/other_user}", "gists_url": "https://api.github.com/users/smlbiobot/gists{/gist_id}", "starred_url": "https://api.github.com/users/smlbiobot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smlbiobot/subscriptions", "organizations_url": "https://api.github.com/users/smlbiobot/orgs", "repos_url": "https://api.github.com/users/smlbiobot/repos", "events_url": "https://api.github.com/users/smlbiobot/events{/privacy}", "received_events_url": "https://api.github.com/users/smlbiobot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-27T03:19:57Z", "updated_at": "2018-02-27T19:32:24Z", "closed_at": "2018-02-27T19:32:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is bulk supported in this library? I can\u2019t find it. On the aioes library, it recommends that we use aioelasticsearch but they also said that it is not supported: https://github.com/aio-libs/aioelasticsearch/issues/82\r\n\r\nDoes that mean that if I want to use bulk, then I must use the blocking code here:\r\n\r\nhttp://elasticsearch-py.readthedocs.io/en/5.5.1/helpers.html#elasticsearch.helpers.bulk", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/37", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/37/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/37/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/37", "id": 296320429, "node_id": "MDU6SXNzdWUyOTYzMjA0Mjk=", "number": 37, "title": "Pin aiohttp version", "user": {"login": "pquentin", "id": 42327, "node_id": "MDQ6VXNlcjQyMzI3", "avatar_url": "https://avatars1.githubusercontent.com/u/42327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pquentin", "html_url": "https://github.com/pquentin", "followers_url": "https://api.github.com/users/pquentin/followers", "following_url": "https://api.github.com/users/pquentin/following{/other_user}", "gists_url": "https://api.github.com/users/pquentin/gists{/gist_id}", "starred_url": "https://api.github.com/users/pquentin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pquentin/subscriptions", "organizations_url": "https://api.github.com/users/pquentin/orgs", "repos_url": "https://api.github.com/users/pquentin/repos", "events_url": "https://api.github.com/users/pquentin/events{/privacy}", "received_events_url": "https://api.github.com/users/pquentin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-02-12T10:08:08Z", "updated_at": "2018-03-20T22:07:02Z", "closed_at": "2018-03-20T22:07:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "aiohttp 3.0 was just released, and it [drops support for `aiohttp.Timeout`](\r\nhttps://docs.aiohttp.org/en/stable/changes.html#deprecations-and-removals). Is it possible to pin the aiohttp major version (or port the code to aiohttp 3.x) to avoid this kind of issue?\r\n\r\nThanks for elasticsearch-py-async!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/36", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/36/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/36/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/36", "id": 295371120, "node_id": "MDU6SXNzdWUyOTUzNzExMjA=", "number": 36, "title": "Proper way to create the client: inside each method or one for the app?", "user": {"login": "smlbiobot", "id": 25040297, "node_id": "MDQ6VXNlcjI1MDQwMjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/25040297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smlbiobot", "html_url": "https://github.com/smlbiobot", "followers_url": "https://api.github.com/users/smlbiobot/followers", "following_url": "https://api.github.com/users/smlbiobot/following{/other_user}", "gists_url": "https://api.github.com/users/smlbiobot/gists{/gist_id}", "starred_url": "https://api.github.com/users/smlbiobot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smlbiobot/subscriptions", "organizations_url": "https://api.github.com/users/smlbiobot/orgs", "repos_url": "https://api.github.com/users/smlbiobot/repos", "events_url": "https://api.github.com/users/smlbiobot/events{/privacy}", "received_events_url": "https://api.github.com/users/smlbiobot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-08T03:13:17Z", "updated_at": "2018-02-09T04:12:59Z", "closed_at": "2018-02-08T16:10:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can\u2019t find any documentation on this and it\u2019s hard to tell from the code sample.\r\n\r\nIs it preferred to create the ElasticSearch client on the app level and re-use for the duration of the app, or is it better to create a new client for every method? I am using this on a webapp that makes frequent ES requests.\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/35", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/35/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/35/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/35", "id": 294353085, "node_id": "MDU6SXNzdWUyOTQzNTMwODU=", "number": 35, "title": "NameError: name 'warnings' is not defined in ", "user": {"login": "wowkin2", "id": 1820114, "node_id": "MDQ6VXNlcjE4MjAxMTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1820114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wowkin2", "html_url": "https://github.com/wowkin2", "followers_url": "https://api.github.com/users/wowkin2/followers", "following_url": "https://api.github.com/users/wowkin2/following{/other_user}", "gists_url": "https://api.github.com/users/wowkin2/gists{/gist_id}", "starred_url": "https://api.github.com/users/wowkin2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wowkin2/subscriptions", "organizations_url": "https://api.github.com/users/wowkin2/orgs", "repos_url": "https://api.github.com/users/wowkin2/repos", "events_url": "https://api.github.com/users/wowkin2/events{/privacy}", "received_events_url": "https://api.github.com/users/wowkin2/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-02-05T11:02:51Z", "updated_at": "2018-07-09T11:56:30Z", "closed_at": "2018-07-09T11:56:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "File [`connection.py`](https://github.com/elastic/elasticsearch-py-async/blob/master/elasticsearch_async/connection.py) doesn't contain `import warnings` but it should.\r\nPlease add as it is using twice on lines [:44](https://github.com/elastic/elasticsearch-py-async/blob/master/elasticsearch_async/connection.py#L44) and [:57](https://github.com/elastic/elasticsearch-py-async/blob/master/elasticsearch_async/connection.py#L57)\r\n\r\n```\r\n  File \"/usr/local/lib/python3.6/site-packages/elasticsearch_async/connection.py\", line 44, in init\r\n    warnings.warn('Use of `verify_certs`, `ca_certs` have been deprecated in favor of using SSLContext`', DeprecationWarning)\r\nNameError: name 'warnings' is not defined\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/33", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/33/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/33/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/33", "id": 284176854, "node_id": "MDU6SXNzdWUyODQxNzY4NTQ=", "number": 33, "title": "5.2.0 release fluke?", "user": {"login": "3lnc", "id": 1926776, "node_id": "MDQ6VXNlcjE5MjY3NzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1926776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/3lnc", "html_url": "https://github.com/3lnc", "followers_url": "https://api.github.com/users/3lnc/followers", "following_url": "https://api.github.com/users/3lnc/following{/other_user}", "gists_url": "https://api.github.com/users/3lnc/gists{/gist_id}", "starred_url": "https://api.github.com/users/3lnc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/3lnc/subscriptions", "organizations_url": "https://api.github.com/users/3lnc/orgs", "repos_url": "https://api.github.com/users/3lnc/repos", "events_url": "https://api.github.com/users/3lnc/events{/privacy}", "received_events_url": "https://api.github.com/users/3lnc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-22T14:32:11Z", "updated_at": "2017-12-26T10:38:04Z", "closed_at": "2017-12-26T10:38:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've spotted that 5.2.0 versoin at PyPI ~week ago was built from `nick/ssl_context` branch (at least, content of `connections.py`). More funny thing \u2013 this is cached in travis somehow, so building projects with es-async requirements ends up with code different from tar/whl in PyPI.\r\n\r\n1. Is this known thing?\r\n2. Is there any plans to change versioning somehow? As far as I know, idea was to follow elastic products versioning in python libs. Does anyone have ideas how to protect dependent projects from some accident PyPI builds/publishes?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/32", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/32/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/32/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/32", "id": 282427284, "node_id": "MDU6SXNzdWUyODI0MjcyODQ=", "number": 32, "title": "Release a ES6.0 compatible version", "user": {"login": "nsbk", "id": 483549, "node_id": "MDQ6VXNlcjQ4MzU0OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/483549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nsbk", "html_url": "https://github.com/nsbk", "followers_url": "https://api.github.com/users/nsbk/followers", "following_url": "https://api.github.com/users/nsbk/following{/other_user}", "gists_url": "https://api.github.com/users/nsbk/gists{/gist_id}", "starred_url": "https://api.github.com/users/nsbk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nsbk/subscriptions", "organizations_url": "https://api.github.com/users/nsbk/orgs", "repos_url": "https://api.github.com/users/nsbk/repos", "events_url": "https://api.github.com/users/nsbk/events{/privacy}", "received_events_url": "https://api.github.com/users/nsbk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-12-15T13:28:07Z", "updated_at": "2018-03-30T19:50:12Z", "closed_at": "2018-03-30T19:50:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\r\n\r\nWe are moving to ES6.0 and would very much like to keep using `elasticsearch-py-async`. Since support for the new ES version is there thanks to https://github.com/elastic/elasticsearch-py-async/pull/29, do you think it would be possible to release a new version that includes this changes?\r\n\r\nThanks a lot!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/31", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/31/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/31/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/31", "id": 280008943, "node_id": "MDU6SXNzdWUyODAwMDg5NDM=", "number": 31, "title": "Compatible with elasticsearch-dsl", "user": {"login": "digitaldavenyc", "id": 243799, "node_id": "MDQ6VXNlcjI0Mzc5OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/243799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/digitaldavenyc", "html_url": "https://github.com/digitaldavenyc", "followers_url": "https://api.github.com/users/digitaldavenyc/followers", "following_url": "https://api.github.com/users/digitaldavenyc/following{/other_user}", "gists_url": "https://api.github.com/users/digitaldavenyc/gists{/gist_id}", "starred_url": "https://api.github.com/users/digitaldavenyc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/digitaldavenyc/subscriptions", "organizations_url": "https://api.github.com/users/digitaldavenyc/orgs", "repos_url": "https://api.github.com/users/digitaldavenyc/repos", "events_url": "https://api.github.com/users/digitaldavenyc/events{/privacy}", "received_events_url": "https://api.github.com/users/digitaldavenyc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-12-07T05:45:31Z", "updated_at": "2020-07-20T18:58:00Z", "closed_at": "2020-07-20T18:57:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to use this with [elasticsearch-dsl](https://github.com/elastic/elasticsearch-dsl-py)?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/27", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/27/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/27/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/27", "id": 276715059, "node_id": "MDU6SXNzdWUyNzY3MTUwNTk=", "number": 27, "title": "Support for Elasticsearch 6.x", "user": {"login": "szborows", "id": 1025646, "node_id": "MDQ6VXNlcjEwMjU2NDY=", "avatar_url": "https://avatars1.githubusercontent.com/u/1025646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szborows", "html_url": "https://github.com/szborows", "followers_url": "https://api.github.com/users/szborows/followers", "following_url": "https://api.github.com/users/szborows/following{/other_user}", "gists_url": "https://api.github.com/users/szborows/gists{/gist_id}", "starred_url": "https://api.github.com/users/szborows/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szborows/subscriptions", "organizations_url": "https://api.github.com/users/szborows/orgs", "repos_url": "https://api.github.com/users/szborows/repos", "events_url": "https://api.github.com/users/szborows/events{/privacy}", "received_events_url": "https://api.github.com/users/szborows/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-25T00:54:17Z", "updated_at": "2017-11-27T14:28:59Z", "closed_at": "2017-11-27T14:28:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Elastic 6.x doesn't seem to be supported. For instance, when trying to create document, 406 response is sent back by ES server.\r\n\r\nAlso, diagnostics is poor. `elasticsearch.exceptions.TransportError: <exception str() failed>` doesn't tell much.\r\n\r\n```\r\n>>> loop.run_until_complete(client.create(index='qpa', doc_type='qpa', id=42, body={'data': 'str'}))\r\nPUT http://172.99.0.10:9200/qpa/qpa/42/_create [status:406 request:0.010s]\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.6/asyncio/base_events.py\", line 466, in run_until_complete\r\n    return future.result()\r\n  File \"/usr/local/lib/python3.6/site-packages/elasticsearch_async/transport.py\", line 140, in main_loop\r\n    method, url, params, body, ignore=ignore, timeout=timeout)\r\n  File \"/usr/local/lib/python3.6/site-packages/elasticsearch_async/connection.py\", line 74, in perform_request\r\n    self._raise_error(response.status, raw_data)\r\n  File \"/usr/local/lib/python3.6/site-packages/elasticsearch/connection/base.py\", line 125, in _raise_error\r\n    raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)\r\nelasticsearch.exceptions.TransportError: <exception str() failed>\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/25", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/25/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/25/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/25", "id": 274752988, "node_id": "MDU6SXNzdWUyNzQ3NTI5ODg=", "number": 25, "title": "Exception when using explicit loop", "user": {"login": "redixin", "id": 103634, "node_id": "MDQ6VXNlcjEwMzYzNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/103634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/redixin", "html_url": "https://github.com/redixin", "followers_url": "https://api.github.com/users/redixin/followers", "following_url": "https://api.github.com/users/redixin/following{/other_user}", "gists_url": "https://api.github.com/users/redixin/gists{/gist_id}", "starred_url": "https://api.github.com/users/redixin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/redixin/subscriptions", "organizations_url": "https://api.github.com/users/redixin/orgs", "repos_url": "https://api.github.com/users/redixin/repos", "events_url": "https://api.github.com/users/redixin/events{/privacy}", "received_events_url": "https://api.github.com/users/redixin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-11-17T05:05:31Z", "updated_at": "2017-11-27T14:35:00Z", "closed_at": "2017-11-27T14:35:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "\r\nWhen client constructed with custom loop:\r\n```python\r\nclient = AsyncElasticsearch(hosts=hosts, loop=loop)\r\nawait client.get(...whatever...)\r\n```\r\n\r\nexception is raised:\r\n\r\n```python-traceback\r\nTraceback (most recent call last):\r\n  File \"/store/code/hce/venv/lib/python3.5/site-packages/elasticsearch_async/connection.py\", line 54, in perform_request\r\n    with aiohttp.Timeout(timeout or self.timeout):\r\n  File \"/store/code/hce/venv/lib/python3.5/site-packages/async_timeout/__init__.py\", line 24, in __init__\r\n    loop = asyncio.get_event_loop()\r\n  File \"/usr/lib/python3.5/asyncio/events.py\", line 632, in get_event_loop\r\n    return get_event_loop_policy().get_event_loop()\r\n  File \"/usr/lib/python3.5/asyncio/events.py\", line 578, in get_event_loop\r\n    % threading.current_thread().name)\r\nRuntimeError: There is no current event loop in thread 'MainThread'.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/24", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/24/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/24/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/24", "id": 264890659, "node_id": "MDU6SXNzdWUyNjQ4OTA2NTk=", "number": 24, "title": "1.x version of the library with aiohttp v2 support", "user": {"login": "o-fedorov", "id": 2283679, "node_id": "MDQ6VXNlcjIyODM2Nzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/2283679?v=4", "gravatar_id": "", "url": "https://api.github.com/users/o-fedorov", "html_url": "https://github.com/o-fedorov", "followers_url": "https://api.github.com/users/o-fedorov/followers", "following_url": "https://api.github.com/users/o-fedorov/following{/other_user}", "gists_url": "https://api.github.com/users/o-fedorov/gists{/gist_id}", "starred_url": "https://api.github.com/users/o-fedorov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/o-fedorov/subscriptions", "organizations_url": "https://api.github.com/users/o-fedorov/orgs", "repos_url": "https://api.github.com/users/o-fedorov/repos", "events_url": "https://api.github.com/users/o-fedorov/events{/privacy}", "received_events_url": "https://api.github.com/users/o-fedorov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-12T10:29:48Z", "updated_at": "2020-03-18T11:36:02Z", "closed_at": "2020-03-18T11:36:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Any chance adding this change to the repo to a branch 1.x, and adding an official release to PyPi?\r\n\r\nhttps://github.com/Fedorof/elasticsearch-py-async/releases/tag/1.1.0\r\n\r\nThis is a backport of most of the changes from 5.2.0 version, excluding replacement `'GET', '/_nodes/_all/clear'` with `'GET', '/_nodes/_all/http'` for `_get_sniff_data`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/23", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/23/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/23/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/23", "id": 262007986, "node_id": "MDU6SXNzdWUyNjIwMDc5ODY=", "number": 23, "title": "LICENSE missing from source tarball on pypi", "user": {"login": "nehaljwani", "id": 1779189, "node_id": "MDQ6VXNlcjE3NzkxODk=", "avatar_url": "https://avatars0.githubusercontent.com/u/1779189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nehaljwani", "html_url": "https://github.com/nehaljwani", "followers_url": "https://api.github.com/users/nehaljwani/followers", "following_url": "https://api.github.com/users/nehaljwani/following{/other_user}", "gists_url": "https://api.github.com/users/nehaljwani/gists{/gist_id}", "starred_url": "https://api.github.com/users/nehaljwani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nehaljwani/subscriptions", "organizations_url": "https://api.github.com/users/nehaljwani/orgs", "repos_url": "https://api.github.com/users/nehaljwani/repos", "events_url": "https://api.github.com/users/nehaljwani/events{/privacy}", "received_events_url": "https://api.github.com/users/nehaljwani/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-02T08:03:24Z", "updated_at": "2017-11-27T14:35:00Z", "closed_at": "2017-11-27T14:35:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "The [source tarball](https://pypi.io/packages/source/e/elasticsearch-async/elasticsearch-async-5.2.0.tar.gz) on pypi is missing the license file.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/21", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/21/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/21/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/21", "id": 252874679, "node_id": "MDU6SXNzdWUyNTI4NzQ2Nzk=", "number": 21, "title": "Import failed", "user": {"login": "smlbiobot", "id": 25040297, "node_id": "MDQ6VXNlcjI1MDQwMjk3", "avatar_url": "https://avatars0.githubusercontent.com/u/25040297?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smlbiobot", "html_url": "https://github.com/smlbiobot", "followers_url": "https://api.github.com/users/smlbiobot/followers", "following_url": "https://api.github.com/users/smlbiobot/following{/other_user}", "gists_url": "https://api.github.com/users/smlbiobot/gists{/gist_id}", "starred_url": "https://api.github.com/users/smlbiobot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smlbiobot/subscriptions", "organizations_url": "https://api.github.com/users/smlbiobot/orgs", "repos_url": "https://api.github.com/users/smlbiobot/repos", "events_url": "https://api.github.com/users/smlbiobot/events{/privacy}", "received_events_url": "https://api.github.com/users/smlbiobot/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-25T11:38:14Z", "updated_at": "2017-08-25T11:43:02Z", "closed_at": "2017-08-25T11:43:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to import:\r\n\r\n```py\r\nfrom elasticsearch_async import AsyncElasticsearch\r\n```\r\n\r\nand it gives this error:\r\n\r\n```\r\nfrom aiohttp.client_exceptions import ServerFingerprintMismatch\r\nModuleNotFoundError: No module named 'aiohttp.client_exceptions'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/17", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/17/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/17/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/17", "id": 219286734, "node_id": "MDU6SXNzdWUyMTkyODY3MzQ=", "number": 17, "title": "Problems with CA_CERTS", "user": {"login": "quasiben", "id": 1403768, "node_id": "MDQ6VXNlcjE0MDM3Njg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1403768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/quasiben", "html_url": "https://github.com/quasiben", "followers_url": "https://api.github.com/users/quasiben/followers", "following_url": "https://api.github.com/users/quasiben/following{/other_user}", "gists_url": "https://api.github.com/users/quasiben/gists{/gist_id}", "starred_url": "https://api.github.com/users/quasiben/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/quasiben/subscriptions", "organizations_url": "https://api.github.com/users/quasiben/orgs", "repos_url": "https://api.github.com/users/quasiben/repos", "events_url": "https://api.github.com/users/quasiben/events{/privacy}", "received_events_url": "https://api.github.com/users/quasiben/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-04-04T15:19:22Z", "updated_at": "2017-11-28T19:17:35Z", "closed_at": "2017-11-28T17:30:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I need to use certs with my ES connection.  In the code it appears as though `ca_certs` is accepted in the constructor but is unused.  Is that correct?  Is this a bug or am I not correctly using ca_certs?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/15", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/15/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/15/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/15", "id": 217143588, "node_id": "MDU6SXNzdWUyMTcxNDM1ODg=", "number": 15, "title": "aiohttp 2.0 incompatibility", "user": {"login": "stephen84s", "id": 2060823, "node_id": "MDQ6VXNlcjIwNjA4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2060823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stephen84s", "html_url": "https://github.com/stephen84s", "followers_url": "https://api.github.com/users/stephen84s/followers", "following_url": "https://api.github.com/users/stephen84s/following{/other_user}", "gists_url": "https://api.github.com/users/stephen84s/gists{/gist_id}", "starred_url": "https://api.github.com/users/stephen84s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stephen84s/subscriptions", "organizations_url": "https://api.github.com/users/stephen84s/orgs", "repos_url": "https://api.github.com/users/stephen84s/repos", "events_url": "https://api.github.com/users/stephen84s/events{/privacy}", "received_events_url": "https://api.github.com/users/stephen84s/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-03-27T05:54:50Z", "updated_at": "2017-11-15T12:22:10Z", "closed_at": "2017-07-26T18:33:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Looks like elasticsearch-py-async is incompatible with the 2.0 version of aiohttp.\r\nReason: recently I started getting the following error:-\r\n```\r\n  File \".../lib/python3.5/site-packages/elasticsearch_async/__init__.py\", line 1, in <module>\r\n    from .transport import AsyncTransport\r\n  File \".../lib/python3.5/site-packages/elasticsearch_async/transport.py\", line 8, in <module>\r\n    from .connection import AIOHttpConnection\r\n  File \".../lib/python3.5/site-packages/elasticsearch_async/connection.py\", line 4, in <module>\r\n    from aiohttp.errors import FingerprintMismatch, ClientError\r\nImportError: No module named 'aiohttp.errors'\r\n```\r\nAlso on checking the master branch I couldn't find a module by the name `aiohttp.errors` however I found it on the `1.3` branch not to mention that forcing the `aiohttp` version down to 1.3 also got rid of the error for me.\r\nSo wanted to suggest to fix the `aiohttp` version to `>1.3,<2.0` till elasticsearch_async is migrated to use `aiohttp` 2.0\r\n\r\nPS: Still in my early stages of python so feel free to correct me at any point", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/13", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/13/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/13/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/13", "id": 207347799, "node_id": "MDU6SXNzdWUyMDczNDc3OTk=", "number": 13, "title": "Elasticsearch 2.x support?", "user": {"login": "hanula", "id": 446998, "node_id": "MDQ6VXNlcjQ0Njk5OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/446998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hanula", "html_url": "https://github.com/hanula", "followers_url": "https://api.github.com/users/hanula/followers", "following_url": "https://api.github.com/users/hanula/following{/other_user}", "gists_url": "https://api.github.com/users/hanula/gists{/gist_id}", "starred_url": "https://api.github.com/users/hanula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hanula/subscriptions", "organizations_url": "https://api.github.com/users/hanula/orgs", "repos_url": "https://api.github.com/users/hanula/repos", "events_url": "https://api.github.com/users/hanula/events{/privacy}", "received_events_url": "https://api.github.com/users/hanula/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-02-13T21:42:17Z", "updated_at": "2017-02-14T09:38:19Z", "closed_at": "2017-02-14T09:23:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`master` branch only supports Elasticsearch>=5.0.0, but some people still need to use `2.x` and want to use `elasticsearch-py-async` with it. \r\nCan we have a separate enhancements and bugfixes branch for `2.x` like `elasticsearch-py` does?\r\n\r\nI've created [2.x branch](https://github.com/hanula/elasticsearch-py-async/tree/2.x) to which I'd like to backport #12.\r\n\r\nWhat do you think? If possible, how to proceed with it?\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/11", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/11/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/11/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/11", "id": 206836788, "node_id": "MDU6SXNzdWUyMDY4MzY3ODg=", "number": 11, "title": "DNS cache in `aiohttp.TCPConnector` causes client requests to timeout when host address changes", "user": {"login": "hanula", "id": 446998, "node_id": "MDQ6VXNlcjQ0Njk5OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/446998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hanula", "html_url": "https://github.com/hanula", "followers_url": "https://api.github.com/users/hanula/followers", "following_url": "https://api.github.com/users/hanula/following{/other_user}", "gists_url": "https://api.github.com/users/hanula/gists{/gist_id}", "starred_url": "https://api.github.com/users/hanula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hanula/subscriptions", "organizations_url": "https://api.github.com/users/hanula/orgs", "repos_url": "https://api.github.com/users/hanula/repos", "events_url": "https://api.github.com/users/hanula/events{/privacy}", "received_events_url": "https://api.github.com/users/hanula/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-10T16:12:21Z", "updated_at": "2017-02-15T06:56:31Z", "closed_at": "2017-02-14T09:34:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi!\r\n\r\nUsing domain-based elasticsearch hosts that change their IP over time can cause `AsyncElasticsearch` client to timeout requests as the default DNS cache resolves the hostname with old address.\r\n \r\nFor example, with Elasticsearch Heroku Add-ons that run on AWS, the host URL doesn't change and looks like `https://abcdef-123455.eu-west-1.bonsaisearch.net`, but the IP address can change over time. Because of the DNS cache - which isn't flushed - the client tries to send requests to wrong host IP and failes.\r\n\r\nSolution might be to pass explicit `use_dns_cache` param to `aiohttp.TCPConnector` [in the constructor of `AIOHttpConnection`](https://github.com/elastic/elasticsearch-py-async/blob/c76817dd24e4cfa0ced0fa13fa4a70721d649df0/elasticsearch_async/connection.py#L29). \r\nAdditionally, because of the default DNS resolver being [thread-based](https://github.com/KeepSafe/aiohttp/blob/9fbb7d708375e0ba01d435c1e8cf41912381c0fc/aiohttp/resolver.py#L17), a `dns_resolver` param could be used to specify own, for example `aiodns`-based [AsyncResolver](https://github.com/KeepSafe/aiohttp/blob/9fbb7d708375e0ba01d435c1e8cf41912381c0fc/aiohttp/resolver.py#L47), although it was removed as default one because of compatibility [issues with IPv6 systems](https://github.com/KeepSafe/aiohttp/issues/559).\r\n\r\nI can submit a PR with this solution soon.\r\nWhat do you think?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/10", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/10/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/10/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/10", "id": 199531051, "node_id": "MDU6SXNzdWUxOTk1MzEwNTE=", "number": 10, "title": "ERROR: Creating a client session outside of coroutine", "user": {"login": "Tim-Erwin", "id": 802148, "node_id": "MDQ6VXNlcjgwMjE0OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/802148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tim-Erwin", "html_url": "https://github.com/Tim-Erwin", "followers_url": "https://api.github.com/users/Tim-Erwin/followers", "following_url": "https://api.github.com/users/Tim-Erwin/following{/other_user}", "gists_url": "https://api.github.com/users/Tim-Erwin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tim-Erwin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tim-Erwin/subscriptions", "organizations_url": "https://api.github.com/users/Tim-Erwin/orgs", "repos_url": "https://api.github.com/users/Tim-Erwin/repos", "events_url": "https://api.github.com/users/Tim-Erwin/events{/privacy}", "received_events_url": "https://api.github.com/users/Tim-Erwin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-01-09T11:32:20Z", "updated_at": "2020-07-20T19:08:07Z", "closed_at": "2020-07-20T19:08:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using elasticsearch-py-async in a web application. The client gets instantiated during startup and is shared across requests. The whole startup process is synchronous, hence, there is no loop involved. As a result I get an \"ERROR: Creating a client session outside of coroutine\".\r\n\r\nMy understanding is, that during the creation of the client no connection / session should be opened. How am I supposed to do this correctly?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/8", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/8/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/8/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/8", "id": 192043515, "node_id": "MDU6SXNzdWUxOTIwNDM1MTU=", "number": 8, "title": "Add a note or constraint for elasticsearch 5 compatibility", "user": {"login": "mjrk", "id": 2457107, "node_id": "MDQ6VXNlcjI0NTcxMDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/2457107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjrk", "html_url": "https://github.com/mjrk", "followers_url": "https://api.github.com/users/mjrk/followers", "following_url": "https://api.github.com/users/mjrk/following{/other_user}", "gists_url": "https://api.github.com/users/mjrk/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjrk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjrk/subscriptions", "organizations_url": "https://api.github.com/users/mjrk/orgs", "repos_url": "https://api.github.com/users/mjrk/repos", "events_url": "https://api.github.com/users/mjrk/events{/privacy}", "received_events_url": "https://api.github.com/users/mjrk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-11-28T15:59:32Z", "updated_at": "2016-12-09T16:14:01Z", "closed_at": "2016-12-09T01:43:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "This library can partially be used with elasticsearch-py >= 5.0.0, but it breaks during error handling. There are different method signatures for log_request_fail\r\n\r\nelasticsearch_async/connection.py:\r\n\r\n    self.log_request_fail(method, url, body, self.loop.time() - start, exception=e)\r\n\r\nversus /elasticsearch/connection/base.py:\r\n\r\n    log_request_fail(self, method, full_url, path, body, duration, status_code=None, response=None, exception=None):\r\n\r\nNote the newly added 'path' argument.\r\n\r\nYou may want to update the setup.py (elasticsearch <= 5.0.0) or leave a note.\r\n\r\nBtw. this library is great work! \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/6", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/6/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/6/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/6", "id": 187548531, "node_id": "MDU6SXNzdWUxODc1NDg1MzE=", "number": 6, "title": "Is this package maintained?", "user": {"login": "amitripshtos", "id": 10770124, "node_id": "MDQ6VXNlcjEwNzcwMTI0", "avatar_url": "https://avatars0.githubusercontent.com/u/10770124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amitripshtos", "html_url": "https://github.com/amitripshtos", "followers_url": "https://api.github.com/users/amitripshtos/followers", "following_url": "https://api.github.com/users/amitripshtos/following{/other_user}", "gists_url": "https://api.github.com/users/amitripshtos/gists{/gist_id}", "starred_url": "https://api.github.com/users/amitripshtos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amitripshtos/subscriptions", "organizations_url": "https://api.github.com/users/amitripshtos/orgs", "repos_url": "https://api.github.com/users/amitripshtos/repos", "events_url": "https://api.github.com/users/amitripshtos/events{/privacy}", "received_events_url": "https://api.github.com/users/amitripshtos/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-11-06T09:23:46Z", "updated_at": "2016-11-06T15:01:06Z", "closed_at": "2016-11-06T15:01:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey guys,\r\nthanks for your help with these package!\r\nI would like to know if this package is maintained , and if not, what are the other options for using elasticsearch and asyncio\r\n\r\nThank you guys in advance. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/5", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/5/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/5/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/5", "id": 179285421, "node_id": "MDU6SXNzdWUxNzkyODU0MjE=", "number": 5, "title": "Bulk Helpers", "user": {"login": "owaaa", "id": 5879373, "node_id": "MDQ6VXNlcjU4NzkzNzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/5879373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/owaaa", "html_url": "https://github.com/owaaa", "followers_url": "https://api.github.com/users/owaaa/followers", "following_url": "https://api.github.com/users/owaaa/following{/other_user}", "gists_url": "https://api.github.com/users/owaaa/gists{/gist_id}", "starred_url": "https://api.github.com/users/owaaa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/owaaa/subscriptions", "organizations_url": "https://api.github.com/users/owaaa/orgs", "repos_url": "https://api.github.com/users/owaaa/repos", "events_url": "https://api.github.com/users/owaaa/events{/privacy}", "received_events_url": "https://api.github.com/users/owaaa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2016-09-26T17:11:42Z", "updated_at": "2020-07-20T19:07:39Z", "closed_at": "2020-07-20T19:07:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way to call an async version of the bulk helpers? I couldn't find away to do this when looking around.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/4", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/4/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/4/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/4/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/4", "id": 179116461, "node_id": "MDU6SXNzdWUxNzkxMTY0NjE=", "number": 4, "title": "Twisted Backend", "user": {"login": "jomido", "id": 1469593, "node_id": "MDQ6VXNlcjE0Njk1OTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1469593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jomido", "html_url": "https://github.com/jomido", "followers_url": "https://api.github.com/users/jomido/followers", "following_url": "https://api.github.com/users/jomido/following{/other_user}", "gists_url": "https://api.github.com/users/jomido/gists{/gist_id}", "starred_url": "https://api.github.com/users/jomido/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jomido/subscriptions", "organizations_url": "https://api.github.com/users/jomido/orgs", "repos_url": "https://api.github.com/users/jomido/repos", "events_url": "https://api.github.com/users/jomido/events{/privacy}", "received_events_url": "https://api.github.com/users/jomido/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-09-25T23:43:25Z", "updated_at": "2020-07-20T19:06:39Z", "closed_at": "2020-07-20T19:06:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thank you for your work on this async adapter. Really great.\n\nI would like to implement a Twisted backend. This is prompted by [issue 458 from the elasticsearch-py](https://github.com/elastic/elasticsearch-py/issues/458) repository.\n\nShould I submit a PR against this repository, or would a separate repository be better (i.e. `elasticsearch-py-twisted`)? If the former, then I would create two new directories `elasticsearch-async/twisted` and `test_elasticsearch_async/twisted`. (Some code duplication might crop up, but a subsequent PR could take care of refactoring.)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/3", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/3/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/3/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/3", "id": 171877722, "node_id": "MDU6SXNzdWUxNzE4Nzc3MjI=", "number": 3, "title": "Package status", "user": {"login": "tomas-fp", "id": 19695060, "node_id": "MDQ6VXNlcjE5Njk1MDYw", "avatar_url": "https://avatars3.githubusercontent.com/u/19695060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomas-fp", "html_url": "https://github.com/tomas-fp", "followers_url": "https://api.github.com/users/tomas-fp/followers", "following_url": "https://api.github.com/users/tomas-fp/following{/other_user}", "gists_url": "https://api.github.com/users/tomas-fp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomas-fp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomas-fp/subscriptions", "organizations_url": "https://api.github.com/users/tomas-fp/orgs", "repos_url": "https://api.github.com/users/tomas-fp/repos", "events_url": "https://api.github.com/users/tomas-fp/events{/privacy}", "received_events_url": "https://api.github.com/users/tomas-fp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-08-18T11:19:23Z", "updated_at": "2016-08-29T12:53:43Z", "closed_at": "2016-08-29T12:53:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there any plan to improve or merge this package into the standard Python package? \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/2", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/2/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/2/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/2", "id": 154458788, "node_id": "MDU6SXNzdWUxNTQ0NTg3ODg=", "number": 2, "title": "Issues with Python 3.5", "user": {"login": "Arttii", "id": 2163944, "node_id": "MDQ6VXNlcjIxNjM5NDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/2163944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arttii", "html_url": "https://github.com/Arttii", "followers_url": "https://api.github.com/users/Arttii/followers", "following_url": "https://api.github.com/users/Arttii/following{/other_user}", "gists_url": "https://api.github.com/users/Arttii/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arttii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arttii/subscriptions", "organizations_url": "https://api.github.com/users/Arttii/orgs", "repos_url": "https://api.github.com/users/Arttii/repos", "events_url": "https://api.github.com/users/Arttii/events{/privacy}", "received_events_url": "https://api.github.com/users/Arttii/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-05-12T11:21:04Z", "updated_at": "2016-05-12T11:29:53Z", "closed_at": "2016-05-12T11:25:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nI am trying to run the example from the docs with Python 3.5 and the elasticsearch-py(5.0 I think) from the master branch and it does not seem to be working.\n\nI keep getting:\n`AssertionError: yield from wasn't used with future`\n\nNot sure whats the problem. Detailed stack trace.\n\n`Traceback (most recent call last):\n  File \"/home/arti/workdir/man/services/imp/search/query/test.py\", line 12, in <module>\n    loop.run_until_complete(print_info())\n  File \"/opt/anaconda3/envs/imp_search/lib/python3.5/asyncio/base_events.py\", line 337, in run_until_complete\n    return future.result()\n  File \"/opt/anaconda3/envs/imp_search/lib/python3.5/asyncio/futures.py\", line 274, in result\n    raise self._exception\n  File \"/opt/anaconda3/envs/imp_search/lib/python3.5/asyncio/tasks.py\", line 239, in _step\n    result = coro.send(None)\n  File \"/home/arti/workdir/man/services/imp/search/query/test.py\", line 8, in print_info\n    info = yield from client.info()\n  File \"/opt/anaconda3/envs/imp_search/lib/python3.5/site-packages/elasticsearch/client/utils.py\", line 69, in _wrapped\n    return func(*args, params=params, **kwargs)\n  File \"/opt/anaconda3/envs/imp_search/lib/python3.5/site-packages/elasticsearch/client/__init__.py\", line 219, in info\n    _, data = self.transport.perform_request('GET', '/', params=params)\n  File \"/opt/anaconda3/envs/imp_search/lib/python3.5/asyncio/futures.py\", line 359, in __iter__\n    assert self.done(), \"yield from wasn't used with future\"\nAssertionError: yield from wasn't used with future\nTask was destroyed but it is pending!\ntask: <Task pending coro=<TCPConnector._create_connection() running at /opt/anaconda3/envs/imp_search/lib/python3.5/site-packages/aiohttp/connector.py:558> cb=[_release_waiter(<Future pendi...sk._wakeup()]>)() at /opt/anaconda3/envs/imp_search/lib/python3.5/asyncio/tasks.py:344]>\nTask was destroyed but it is pending!\ntask: <Task pending coro=<AsyncTransport.main_loop() running at /opt/anaconda3/envs/imp_search/lib/python3.5/site-packages/elasticsearch_async/transport.py:140> wait_for=<Future pending cb=[Task._wakeup()]>>\nUnclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x7f208fb83240>\n`\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/1", "repository_url": "https://api.github.com/repos/elastic/elasticsearch-py-async", "labels_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/1/comments", "events_url": "https://api.github.com/repos/elastic/elasticsearch-py-async/issues/1/events", "html_url": "https://github.com/elastic/elasticsearch-py-async/issues/1", "id": 142042318, "node_id": "MDU6SXNzdWUxNDIwNDIzMTg=", "number": 1, "title": "Exceptions on sniffing error", "user": {"login": "asvetlov", "id": 356399, "node_id": "MDQ6VXNlcjM1NjM5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/356399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asvetlov", "html_url": "https://github.com/asvetlov", "followers_url": "https://api.github.com/users/asvetlov/followers", "following_url": "https://api.github.com/users/asvetlov/following{/other_user}", "gists_url": "https://api.github.com/users/asvetlov/gists{/gist_id}", "starred_url": "https://api.github.com/users/asvetlov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asvetlov/subscriptions", "organizations_url": "https://api.github.com/users/asvetlov/orgs", "repos_url": "https://api.github.com/users/asvetlov/repos", "events_url": "https://api.github.com/users/asvetlov/events{/privacy}", "received_events_url": "https://api.github.com/users/asvetlov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-03-19T08:12:41Z", "updated_at": "2016-04-02T13:32:34Z", "closed_at": "2016-04-02T13:32:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "After 2d82b1b1739ba92f4de6c3f2eb88bcac9563bc70 a next call to ElasticSearch server may raise an error if the last sniffing was failed.\n\nAs I see `elasticsearch-py` suppresses exceptions like `ConnectionError` but `elasticsearch-py-async` raises all errors (connections, timeouts, cancellations etc).\n`elasticsearch-py` raises `TransportError` only as I see.\n\nAnother problem is when the library reports about problems: `elasticsearch-py` raises immediatelly but `elasticsearch-py-async` will report about problem in sniffing in the past.\n\nI did not dig into the code too deep but maybe moving sniffing from synchronous `get_connection` into async `perform_request` makes sense?\n", "performed_via_github_app": null, "score": 1.0}]}