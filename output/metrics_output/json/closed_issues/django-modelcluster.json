{"total_count": 35, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/124", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/124/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/124/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/124/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/124", "id": 623457920, "node_id": "MDU6SXNzdWU2MjM0NTc5MjA=", "number": 124, "title": "modelcluster breaks with recent taggit upgrade to 1.3", "user": {"login": "nkuttler", "id": 505328, "node_id": "MDQ6VXNlcjUwNTMyOA==", "avatar_url": "https://avatars0.githubusercontent.com/u/505328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nkuttler", "html_url": "https://github.com/nkuttler", "followers_url": "https://api.github.com/users/nkuttler/followers", "following_url": "https://api.github.com/users/nkuttler/following{/other_user}", "gists_url": "https://api.github.com/users/nkuttler/gists{/gist_id}", "starred_url": "https://api.github.com/users/nkuttler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nkuttler/subscriptions", "organizations_url": "https://api.github.com/users/nkuttler/orgs", "repos_url": "https://api.github.com/users/nkuttler/repos", "events_url": "https://api.github.com/users/nkuttler/events{/privacy}", "received_events_url": "https://api.github.com/users/nkuttler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-22T20:23:02Z", "updated_at": "2020-05-26T09:48:59Z", "closed_at": "2020-05-26T09:48:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a page model that has tags, and a modeladmin for it. Simply creating an object and trying to save if fails.\r\n\r\n```\r\n  File \"/lib/python3.7/site-packages/modelcluster/contrib/taggit.py\", line 44, in add\r\n    tag_objs = self._to_tag_model_instances(tags)\r\n\r\nException Type: TypeError at /wtadmin/pages/add/wt/mypage/3/\r\nException Value: _to_tag_model_instances() missing 1 required positional argument: 'tag_kwargs'\r\n```\r\n\r\nPlease let me know if you need more info. See also https://github.com/jazzband/django-taggit/issues/675", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/116", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/116/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/116/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/116", "id": 485957545, "node_id": "MDU6SXNzdWU0ODU5NTc1NDU=", "number": 116, "title": "Commit method in DeferringRelatedManager deletes related records before adding.", "user": {"login": "supermanzer", "id": 8837217, "node_id": "MDQ6VXNlcjg4MzcyMTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/8837217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/supermanzer", "html_url": "https://github.com/supermanzer", "followers_url": "https://api.github.com/users/supermanzer/followers", "following_url": "https://api.github.com/users/supermanzer/following{/other_user}", "gists_url": "https://api.github.com/users/supermanzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/supermanzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/supermanzer/subscriptions", "organizations_url": "https://api.github.com/users/supermanzer/orgs", "repos_url": "https://api.github.com/users/supermanzer/repos", "events_url": "https://api.github.com/users/supermanzer/events{/privacy}", "received_events_url": "https://api.github.com/users/supermanzer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-27T18:13:12Z", "updated_at": "2019-08-28T17:10:01Z", "closed_at": "2019-08-27T22:01:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Summary\r\nWhen publishing a Page, child pages connected via a `ParentalKey` are deleted prior to being added.  This results in a `Page Not Found` error.  The issue occurs between lines 196 - 207 in `fields.py`\r\n```\r\n     live_items = list(original_manager.get_queryset())\r\n            for item in live_items:\r\n                if item not in final_items:  # <-- Both live_items and final_items point to same page but this returns false\r\n                    item.delete()  # <-- Page deleted\r\n\r\n            for item in final_items:\r\n                # Django 1.9+ bulk updates items by default which assumes\r\n                # that they have already been saved to the database.\r\n                # Disable this behaviour.\r\n                # https://code.djangoproject.com/ticket/18556\r\n                # https://github.com/django/django/commit/adc0c4fbac98f9cb975e8fa8220323b2de638b46\r\n                original_manager.add(item, bulk=False)  # <-- Page does not exist here.\r\n```\r\n\r\n### Environment\r\n* Python 3.6\r\n* Django 2.2.4\r\n* django-modelcluster 4.4\r\n* wagtail 2.6.1\r\n\r\n### Models\r\n```\r\nclass BulkGood(Page):\r\n    ....\r\n\r\n        def save(self, **kwargs):\r\n          # clear cached listing template\r\n          cache_key = make_template_fragment_key('bulks')\r\n          cache.delete(cache_key)\r\n          # Update our title and slug fields based on our name\r\n          self.title = self.name\r\n          self.slug = slugify(self.name)\r\n          return super().save(**kwargs)\r\n\r\n\r\nclass FinishedGood(Page):\r\n    ....\r\n   bulk = ParentalKey(\r\n        'faqs.BulkGood',\r\n        related_name='bulk_products',\r\n        null=True, blank=True,\r\n        on_delete=models.SET_NULL,\r\n    )\r\n    ....\r\n```\r\n\r\nPlease let me know if there are any further details required or perhaps a more \"proper\" way to relate these entities.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/113", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/113/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/113/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/113", "id": 435231626, "node_id": "MDU6SXNzdWU0MzUyMzE2MjY=", "number": 113, "title": "Nested OneToMany relationship results in 3 empty forms in wagtail admin", "user": {"login": "wfcarlson", "id": 13222183, "node_id": "MDQ6VXNlcjEzMjIyMTgz", "avatar_url": "https://avatars1.githubusercontent.com/u/13222183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wfcarlson", "html_url": "https://github.com/wfcarlson", "followers_url": "https://api.github.com/users/wfcarlson/followers", "following_url": "https://api.github.com/users/wfcarlson/following{/other_user}", "gists_url": "https://api.github.com/users/wfcarlson/gists{/gist_id}", "starred_url": "https://api.github.com/users/wfcarlson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wfcarlson/subscriptions", "organizations_url": "https://api.github.com/users/wfcarlson/orgs", "repos_url": "https://api.github.com/users/wfcarlson/repos", "events_url": "https://api.github.com/users/wfcarlson/events{/privacy}", "received_events_url": "https://api.github.com/users/wfcarlson/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-19T16:25:13Z", "updated_at": "2019-12-23T22:25:35Z", "closed_at": "2019-12-23T22:25:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have some Wagtail models that look like this:\r\n\r\nevents.models.py:\r\n\r\n```\r\nfrom django.db import models\r\nfrom wagtail.core.models import Page, Orderable\r\nfrom modelcluster.models import ClusterableModel\r\nfrom wagtail.admin.edit_handlers import InlinePanel\r\n\r\nclass Event(Page):\r\n    ...\r\n    content_panels = Page.content_panels + [\r\n        InlinePanel('event_presentations'),\r\n    ]\r\n\r\nclass Presentation(Orderable, ClusterableModel):\r\n    event = ParentalKey('events.Event', related_name='event_presentations')\r\n    ...\r\n\r\n    panels = [\r\n                InlinePanel('presentation_dates', label='Presentation date times'\r\n    ]\r\n\r\nclass PresentationDate(models.Model):\r\n    presentation = ParentalKey('events.Presentations', related_name='presentation_dates', on_delete=models.CASCADE)\r\n    date_time = models.DateTimeField(\"Presentation date and time\")\r\n\r\n```\r\n\r\nThis results in three extra empty 'Presentation Date' forms being present in the admin whenever a Presentation form is created. Changing the `extra_form_count` in the django-modelcluster ClusterFormMetaclass from 3 to 0 seems to fix the problem (django-modelcluster/forms.py line 215). Is there a way to override this value without editing the source code of django-modelcluster?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/105", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/105/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/105/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/105/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/105", "id": 399555521, "node_id": "MDU6SXNzdWUzOTk1NTU1MjE=", "number": 105, "title": "ClusterForm: Recurse over nested relationships", "user": {"login": "Sam-Costigan", "id": 2160222, "node_id": "MDQ6VXNlcjIxNjAyMjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/2160222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sam-Costigan", "html_url": "https://github.com/Sam-Costigan", "followers_url": "https://api.github.com/users/Sam-Costigan/followers", "following_url": "https://api.github.com/users/Sam-Costigan/following{/other_user}", "gists_url": "https://api.github.com/users/Sam-Costigan/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sam-Costigan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sam-Costigan/subscriptions", "organizations_url": "https://api.github.com/users/Sam-Costigan/orgs", "repos_url": "https://api.github.com/users/Sam-Costigan/repos", "events_url": "https://api.github.com/users/Sam-Costigan/events{/privacy}", "received_events_url": "https://api.github.com/users/Sam-Costigan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-15T22:03:09Z", "updated_at": "2019-03-06T15:05:44Z", "closed_at": "2019-03-06T15:05:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This relates to the following issue with wagtail: https://github.com/wagtail/wagtail/issues/1952\r\n\r\nWhen `ClusterFormMetaclass.__new__()` is called, it iterates over child relations for the given model and creates a `Formset` class by calling the factory function `childformset_factory`. The form created by the factory function is a subclass of django's base `ModelForm`, which means that `ClusterFormMetaclass` isn't used for those forms. If the factory function were to subclass from `ClusterForm` instead, then `ClusterFormMetaclass.__new__()` would be called recursively and `Formset` classes would be created for nested relationships.\r\n\r\nIt would then be the responsibility of `ClusterForm` to recurse over nested relationships on form initialisation and save. This would allow for creating nested models in wagtail using `InlinePanel`s, a feature that I would love to see implemented.\r\n\r\nIs this something you would be willing to consider?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/98", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/98/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/98/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/98/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/98", "id": 335806602, "node_id": "MDU6SXNzdWUzMzU4MDY2MDI=", "number": 98, "title": "problem with manage.py loaddata", "user": {"login": "hjwp", "id": 769730, "node_id": "MDQ6VXNlcjc2OTczMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/769730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjwp", "html_url": "https://github.com/hjwp", "followers_url": "https://api.github.com/users/hjwp/followers", "following_url": "https://api.github.com/users/hjwp/following{/other_user}", "gists_url": "https://api.github.com/users/hjwp/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjwp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjwp/subscriptions", "organizations_url": "https://api.github.com/users/hjwp/orgs", "repos_url": "https://api.github.com/users/hjwp/repos", "events_url": "https://api.github.com/users/hjwp/events{/privacy}", "received_events_url": "https://api.github.com/users/hjwp/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-26T12:56:58Z", "updated_at": "2020-01-06T18:33:28Z", "closed_at": "2020-01-06T18:33:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "from an app i'm working on\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"manage.py\", line 10, in <module>\r\n    execute_from_command_line(sys.argv)\r\n  File \".../lib/python3.6/site-packages/django/core/management/__init__.py\", line 364, in execute_from_command_line\r\n    utility.execute()\r\n  File \".../lib/python3.6/site-packages/django/core/management/__init__.py\", line 356, in execute\r\n    self.fetch_command(subcommand).run_from_argv(self.argv)\r\n  File \".../lib/python3.6/site-packages/django/core/management/base.py\", line 283, in run_from_argv\r\n    self.execute(*args, **cmd_options)\r\n  File \".../lib/python3.6/site-packages/django/core/management/base.py\", line 330, in execute\r\n    output = self.handle(*args, **options)\r\n  File \".../lib/python3.6/site-packages/django/core/management/commands/loaddata.py\", line 69, in handle\r\n    self.loaddata(fixture_labels)\r\n  File \".../lib/python3.6/site-packages/django/core/management/commands/loaddata.py\", line 109, in loaddata\r\n    self.load_label(fixture_label)\r\n  File \".../lib/python3.6/site-packages/django/core/management/commands/loaddata.py\", line 175, in load_label\r\n    obj.save(using=self.using)\r\n  File \".../lib/python3.6/site-packages/django/core/serializers/base.py\", line 208, in save\r\n    getattr(self.object, accessor_name).set(object_list)\r\n  File \".../lib/python3.6/site-packages/modelcluster/fields.py\", line 406, in set\r\n    sort_by_fields(objs, rel_model._meta.ordering)\r\n  File \".../lib/python3.6/site-packages/modelcluster/utils.py\", line 19, in sort_by_fields\r\n    items.sort(key=lambda x: (getattr(x, key, None) is not None, getattr(x, key)), reverse=reverse)\r\n  File \".../lib/python3.6/site-packages/modelcluster/utils.py\", line 19, in <lambda>\r\n    items.sort(key=lambda x: (getattr(x, key) is not None, getattr(x, key)), reverse=reverse)\r\nAttributeError: Problem installing fixture '.../prod.dump.json': 'int' object has no attribute 'title'\r\n```\r\n\r\nwill try and do a minimal repro if i get a spare mo.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/97", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/97/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/97/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/97", "id": 318862237, "node_id": "MDU6SXNzdWUzMTg4NjIyMzc=", "number": 97, "title": "Searching for limit_choices_to for ParentalManyToManyField", "user": {"login": "tombreit", "id": 1015232, "node_id": "MDQ6VXNlcjEwMTUyMzI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1015232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tombreit", "html_url": "https://github.com/tombreit", "followers_url": "https://api.github.com/users/tombreit/followers", "following_url": "https://api.github.com/users/tombreit/following{/other_user}", "gists_url": "https://api.github.com/users/tombreit/gists{/gist_id}", "starred_url": "https://api.github.com/users/tombreit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tombreit/subscriptions", "organizations_url": "https://api.github.com/users/tombreit/orgs", "repos_url": "https://api.github.com/users/tombreit/repos", "events_url": "https://api.github.com/users/tombreit/events{/privacy}", "received_events_url": "https://api.github.com/users/tombreit/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-30T11:40:42Z", "updated_at": "2018-05-03T11:58:00Z", "closed_at": "2018-05-03T11:58:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "For a plain Django many-to-many field exists an argument ``limit_choices_to``[1]. \r\n\r\nIs it possible  to have an argument like that for a modelcluster ``ParentalManyToManyField``?\r\n\r\nBackground is a wagtail project, were I would like to limit the choices for a ``ParentalManyToManyField`` to a specific value of the related model field (pseudocode):\r\n\r\n```\r\n# models.py\r\nMyPage(Page):\r\n    authors = ParentalManyToManyField(\r\n        'profile.ProfilePage',\r\n        blank=True,\r\n        limit_choices_to={'is_author': True},\r\n)\r\n```\r\n\r\n[1] https://docs.djangoproject.com/en/2.0/ref/models/fields/#django.db.models.ManyToManyField.limit_choices_to", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/92", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/92/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/92/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/92", "id": 304651338, "node_id": "MDU6SXNzdWUzMDQ2NTEzMzg=", "number": 92, "title": "ParentalKey relation .get() issue", "user": {"login": "einsfr", "id": 7319449, "node_id": "MDQ6VXNlcjczMTk0NDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7319449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/einsfr", "html_url": "https://github.com/einsfr", "followers_url": "https://api.github.com/users/einsfr/followers", "following_url": "https://api.github.com/users/einsfr/following{/other_user}", "gists_url": "https://api.github.com/users/einsfr/gists{/gist_id}", "starred_url": "https://api.github.com/users/einsfr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/einsfr/subscriptions", "organizations_url": "https://api.github.com/users/einsfr/orgs", "repos_url": "https://api.github.com/users/einsfr/repos", "events_url": "https://api.github.com/users/einsfr/events{/privacy}", "received_events_url": "https://api.github.com/users/einsfr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-13T07:14:46Z", "updated_at": "2018-04-13T15:22:03Z", "closed_at": "2018-04-13T15:22:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using modelcluster with wagtail CMS and faced a regress after packages upgrade (wagtail 1.13.1 > 2.0, django-modelcluster 3.1 > 4.1). For example:\r\n\r\n```\r\nfrom django.db import models\r\n\r\nfrom wagtail.core.models import Page\r\nfrom wagtail.admin.edit_handlers import InlinePanel\r\n\r\nfrom modelcluster.models import ParentalKey\r\n\r\n\r\nclass Product(Page):\r\n\r\n    content_panels = Page.content_panels + [\r\n        InlinePanel('prices')\r\n    ]\r\n\r\n    def get_price_by_type(self, price_type):\r\n        return self.prices.get(price_type=price_type)\r\n\r\n\r\nclass PriceType(models.Model):\r\n\r\n    name = models.CharField(\r\n        max_length=16,\r\n        unique=True,\r\n    )\r\n\r\n\r\nclass ProductPrice(models.Model):\r\n\r\n    class Meta:\r\n        unique_together = (('price_type', 'product'), )\r\n\r\n    value = models.DecimalField()\r\n\r\n    price_type = models.ForeignKey(\r\n        PriceType,\r\n        on_delete=models.CASCADE,\r\n        related_name='+',\r\n    )\r\n\r\n    product = ParentalKey(\r\n        Product,\r\n        on_delete=models.CASCADE,\r\n        related_name='prices',\r\n    )\r\n```\r\n\r\nCalling _get_price_by_type_ with modelcluster 3.1 results in:\r\n```\r\nSELECT \"appname_productprice\".\"id\", \"appname_productprice\".\"value\", \"appname_productprice\".\"price_type_id\", \"appname_productprice\".\"product_id\" FROM \"appname_productprice\" WHERE (\"appname_productprice\".\"product_id\" = 40 AND \"appname_productprice\".\"price_type_id\" = 1);\r\n```\r\nAnd with modelcluster 4.1:\r\n```\r\nSELECT \"appname_productprice\".\"id\", \"appname_productprice\".\"value\", \"appname_productprice\".\"price_type_id\", \"appname_productprice\".\"product_id\" FROM \"appname_productprice\" WHERE (\"appname_productprice\".\"price_type_id\" = 1 AND \"appname_productprice\".\"price_type_id\" = 1);\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/91", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/91/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/91/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/91", "id": 300477871, "node_id": "MDU6SXNzdWUzMDA0Nzc4NzE=", "number": 91, "title": "Missing 3.1 release and git tag", "user": {"login": "mojeto", "id": 5433957, "node_id": "MDQ6VXNlcjU0MzM5NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5433957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mojeto", "html_url": "https://github.com/mojeto", "followers_url": "https://api.github.com/users/mojeto/followers", "following_url": "https://api.github.com/users/mojeto/following{/other_user}", "gists_url": "https://api.github.com/users/mojeto/gists{/gist_id}", "starred_url": "https://api.github.com/users/mojeto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mojeto/subscriptions", "organizations_url": "https://api.github.com/users/mojeto/orgs", "repos_url": "https://api.github.com/users/mojeto/repos", "events_url": "https://api.github.com/users/mojeto/events{/privacy}", "received_events_url": "https://api.github.com/users/mojeto/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-27T03:07:43Z", "updated_at": "2018-02-27T10:36:35Z", "closed_at": "2018-02-27T10:36:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI found out there is a release 3.1 on [pypi ](https://pypi.python.org/pypi/django-modelcluster/3.1) \r\nand in CHANGELOG https://github.com/wagtail/django-modelcluster/blob/63e2dc466afcef202ce2c91e3ce4139b6575dd35/CHANGELOG.txt#L15-L24\r\n\r\nFor some reason 3.1 release isn't on [github release page](https://github.com/wagtail/django-modelcluster/releases) and `v3.1` tag is missing.\r\n\r\nCan we fix it please?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/89", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/89/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/89/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/89/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/89", "id": 282329950, "node_id": "MDU6SXNzdWUyODIzMjk5NTA=", "number": 89, "title": "Clarification about on_delete in Django 2.0", "user": {"login": "lb-", "id": 1396140, "node_id": "MDQ6VXNlcjEzOTYxNDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1396140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lb-", "html_url": "https://github.com/lb-", "followers_url": "https://api.github.com/users/lb-/followers", "following_url": "https://api.github.com/users/lb-/following{/other_user}", "gists_url": "https://api.github.com/users/lb-/gists{/gist_id}", "starred_url": "https://api.github.com/users/lb-/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lb-/subscriptions", "organizations_url": "https://api.github.com/users/lb-/orgs", "repos_url": "https://api.github.com/users/lb-/repos", "events_url": "https://api.github.com/users/lb-/events{/privacy}", "received_events_url": "https://api.github.com/users/lb-/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-12-15T06:12:19Z", "updated_at": "2018-03-20T12:25:55Z", "closed_at": "2018-02-12T14:46:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Will `ParentalKey` require the `on_delete` argument to be set when Django 2.0 support is implemented? Reflecting the requirement for `ForeignKey`?\r\n\r\nIt might be good to clarify the default in the readme if it is not required and will continue to default to `models.CASCADE`. Also, this might be a factor to consider for Django 2.0 support in general.\r\n\r\n**Context**\r\n\r\nDjango 2.0 will require `on_delete` to be set for ForeignKey.\r\n\r\n> A many-to-one relationship. Requires two positional arguments: the class to which the model is related and the on_delete option.\r\nhttps://docs.djangoproject.com/en/2.0/ref/models/fields/#foreignkey\r\n\r\nDjango 1.11 did not require it, and set it to the default `models.CASCADE`\r\nhttps://docs.djangoproject.com/en/1.11/ref/models/fields/#foreignkey\r\n\r\n\r\n**Related issues**\r\n\r\nDjango 2.0 support - #85 \r\n\r\nWagtail query about `on_delete` not in docs, but throwing error when not provided to `ParentalKey` - https://github.com/wagtail/wagtail/issues/4126", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/88", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/88/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/88/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/88/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/88", "id": 282029668, "node_id": "MDU6SXNzdWUyODIwMjk2Njg=", "number": 88, "title": "unique_together is not working in ClusterableModel", "user": {"login": "sowinski", "id": 1528746, "node_id": "MDQ6VXNlcjE1Mjg3NDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1528746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sowinski", "html_url": "https://github.com/sowinski", "followers_url": "https://api.github.com/users/sowinski/followers", "following_url": "https://api.github.com/users/sowinski/following{/other_user}", "gists_url": "https://api.github.com/users/sowinski/gists{/gist_id}", "starred_url": "https://api.github.com/users/sowinski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sowinski/subscriptions", "organizations_url": "https://api.github.com/users/sowinski/orgs", "repos_url": "https://api.github.com/users/sowinski/repos", "events_url": "https://api.github.com/users/sowinski/events{/privacy}", "received_events_url": "https://api.github.com/users/sowinski/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-12-14T09:14:34Z", "updated_at": "2017-12-15T14:04:54Z", "closed_at": "2017-12-14T10:08:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nis it possible to use the unique_together constraint somehow in a ClusterableModel?\r\n\r\nThank You!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/85", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/85/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/85/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/85/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/85", "id": 274901862, "node_id": "MDU6SXNzdWUyNzQ5MDE4NjI=", "number": 85, "title": "Django 2.0 support (dropping Django 1.8 support ?)", "user": {"login": "smendes", "id": 320835, "node_id": "MDQ6VXNlcjMyMDgzNQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/320835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smendes", "html_url": "https://github.com/smendes", "followers_url": "https://api.github.com/users/smendes/followers", "following_url": "https://api.github.com/users/smendes/following{/other_user}", "gists_url": "https://api.github.com/users/smendes/gists{/gist_id}", "starred_url": "https://api.github.com/users/smendes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smendes/subscriptions", "organizations_url": "https://api.github.com/users/smendes/orgs", "repos_url": "https://api.github.com/users/smendes/repos", "events_url": "https://api.github.com/users/smendes/events{/privacy}", "received_events_url": "https://api.github.com/users/smendes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-11-17T15:32:03Z", "updated_at": "2018-02-12T12:54:39Z", "closed_at": "2018-02-12T12:54:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We are using both Wagtail and ModelCluster on a project and after trying to run Django 2.0 Beta 1 I found some issues in ModelCluster.\r\n\r\nI've made a few changes locally to make it run:\r\n- `field.rel` -> `field.remote_field`  (in django.db.models.fields.Field)\r\n- `field.rel.to` -> `field.remote_field.model`  (in django.db.models.fields.reverse_related.ForeignObjectRel)\r\n\r\nLooking through the issues I've found your answer in [Wagtail's issue #3599](https://github.com/wagtail/wagtail/issues/3599). I was wondering if there are any plans to drop the support of Django 1.8 for ModelCluster and move forward with those changes.\r\n\r\nAnd if that's the case I can provide a PR of those changes if you want.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/80", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/80/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/80/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/80/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/80", "id": 229210836, "node_id": "MDU6SXNzdWUyMjkyMTA4MzY=", "number": 80, "title": "RemovedInDjango20Warning: Usage of field.rel has been deprecated. Use field.remote_field instead.", "user": {"login": "coredumperror", "id": 413571, "node_id": "MDQ6VXNlcjQxMzU3MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/413571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coredumperror", "html_url": "https://github.com/coredumperror", "followers_url": "https://api.github.com/users/coredumperror/followers", "following_url": "https://api.github.com/users/coredumperror/following{/other_user}", "gists_url": "https://api.github.com/users/coredumperror/gists{/gist_id}", "starred_url": "https://api.github.com/users/coredumperror/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coredumperror/subscriptions", "organizations_url": "https://api.github.com/users/coredumperror/orgs", "repos_url": "https://api.github.com/users/coredumperror/repos", "events_url": "https://api.github.com/users/coredumperror/events{/privacy}", "received_events_url": "https://api.github.com/users/coredumperror/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-17T01:10:42Z", "updated_at": "2017-05-17T08:40:23Z", "closed_at": "2017-05-17T08:40:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using `python -Wd manage.py test` on my codebase, to try to ferret out any changes I need to make in my own code for forward compatibility, I discovered that modelcluster throws this deprecation warning three times, all in `fields.py` (twice on line 257, once on 270):\r\n\r\n```\r\nRemovedInDjango20Warning: Usage of field.rel has been deprecated. Use field.remote_field instead.\r\n```\r\n\r\nI went in and edited those lines to replace `field.rel` with `field.remote_field`, and it seems to have worked fine. But I don't know how to run the modelcluster test suite against that change to find out.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/79", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/79/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/79/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/79", "id": 224050101, "node_id": "MDU6SXNzdWUyMjQwNTAxMDE=", "number": 79, "title": "Doesn't work with swappable models", "user": {"login": "benjaoming", "id": 374612, "node_id": "MDQ6VXNlcjM3NDYxMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/374612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjaoming", "html_url": "https://github.com/benjaoming", "followers_url": "https://api.github.com/users/benjaoming/followers", "following_url": "https://api.github.com/users/benjaoming/following{/other_user}", "gists_url": "https://api.github.com/users/benjaoming/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjaoming/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjaoming/subscriptions", "organizations_url": "https://api.github.com/users/benjaoming/orgs", "repos_url": "https://api.github.com/users/benjaoming/repos", "events_url": "https://api.github.com/users/benjaoming/events{/privacy}", "received_events_url": "https://api.github.com/users/benjaoming/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-04-25T07:46:18Z", "updated_at": "2017-04-25T12:50:52Z", "closed_at": "2017-04-25T12:49:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to create swappable models for wagtail-blog and seeing that `makemigrations` breaks because django's migration app cache isn't able to produce a correct lazy reference for `ParentalKey`.\r\n\r\nTraceback:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"manage.py\", line 10, in <module>\r\n    execute_from_command_line(sys.argv)\r\n  File \"site-packages/django/core/management/__init__.py\", line 367, in execute_from_command_line\r\n    utility.execute()\r\n  File \"site-packages/django/core/management/__init__.py\", line 359, in execute\r\n    self.fetch_command(subcommand).run_from_argv(self.argv)\r\n  File \"site-packages/django/core/management/base.py\", line 294, in run_from_argv\r\n    self.execute(*args, **cmd_options)\r\n  File \"site-packages/django/core/management/base.py\", line 345, in execute\r\n    output = self.handle(*args, **options)\r\n  File \"site-packages/django/core/management/commands/makemigrations.py\", line 176, in handle\r\n    migration_name=self.migration_name,\r\n  File \"site-packages/django/db/migrations/autodetector.py\", line 47, in changes\r\n    changes = self._detect_changes(convert_apps, graph)\r\n  File \"site-packages/django/db/migrations/autodetector.py\", line 132, in _detect_changes\r\n    self.old_apps = self.from_state.concrete_apps\r\n  File \"site-packages/django/db/migrations/state.py\", line 180, in concrete_apps\r\n    self.apps = StateApps(self.real_apps, self.models, ignore_swappable=True)\r\n  File \"site-packages/django/db/migrations/state.py\", line 249, in __init__\r\n    raise ValueError(\"\\n\".join(error.msg for error in errors))\r\nValueError: <function resolve_related_class at 0x7f4d8539b578> contains a lazy reference to pages.blogpagetag, but app 'pages' doesn't provide model 'blogpagetag'.\r\n<function resolve_through_model at 0x7f4d8539b8c0> contains a lazy reference to pages.blogcategoryblogpage, but app 'pages' doesn't provide model 'blogcategoryblogpage'.\r\nThe field blog.BlogCategoryBlogPage.page was declared with a lazy reference to 'pages.blogpage', but app 'pages' doesn't provide model 'blogpage'.\r\nThe field blog.BlogPageTag.content_object was declared with a lazy reference to 'pages.blogpage', but app 'pages' doesn't provide model 'blogpage'.\r\n```\r\n\r\nIn the traceback, `blog.BlogCategoryBlogPage.page` and `blog.BlogPageTag.content_object` are both `ParentalKey` fields. They both belong to models which have been swapped out.\r\n\r\nThe question is how to stop `model_checks._check_lazy_references` from checking these fields.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/72", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/72/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/72/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/72", "id": 212992410, "node_id": "MDU6SXNzdWUyMTI5OTI0MTA=", "number": 72, "title": "ClusterForm.is_multipart should return True if any child forms are multipart", "user": {"login": "gasman", "id": 85097, "node_id": "MDQ6VXNlcjg1MDk3", "avatar_url": "https://avatars2.githubusercontent.com/u/85097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gasman", "html_url": "https://github.com/gasman", "followers_url": "https://api.github.com/users/gasman/followers", "following_url": "https://api.github.com/users/gasman/following{/other_user}", "gists_url": "https://api.github.com/users/gasman/gists{/gist_id}", "starred_url": "https://api.github.com/users/gasman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gasman/subscriptions", "organizations_url": "https://api.github.com/users/gasman/orgs", "repos_url": "https://api.github.com/users/gasman/repos", "events_url": "https://api.github.com/users/gasman/events{/privacy}", "received_events_url": "https://api.github.com/users/gasman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-03-09T10:18:21Z", "updated_at": "2017-03-09T16:59:12Z", "closed_at": "2017-03-09T16:59:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/wagtail/wagtail/issues/3435", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/69", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/69/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/69/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/69", "id": 205445906, "node_id": "MDU6SXNzdWUyMDU0NDU5MDY=", "number": 69, "title": "ParentalManyToManyField.value_from_object fails on unsaved instances on Django 1.10", "user": {"login": "gasman", "id": 85097, "node_id": "MDQ6VXNlcjg1MDk3", "avatar_url": "https://avatars2.githubusercontent.com/u/85097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gasman", "html_url": "https://github.com/gasman", "followers_url": "https://api.github.com/users/gasman/followers", "following_url": "https://api.github.com/users/gasman/following{/other_user}", "gists_url": "https://api.github.com/users/gasman/gists{/gist_id}", "starred_url": "https://api.github.com/users/gasman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gasman/subscriptions", "organizations_url": "https://api.github.com/users/gasman/orgs", "repos_url": "https://api.github.com/users/gasman/repos", "events_url": "https://api.github.com/users/gasman/events{/privacy}", "received_events_url": "https://api.github.com/users/gasman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 77829199, "node_id": "MDU6TGFiZWw3NzgyOTE5OQ==", "url": "https://api.github.com/repos/wagtail/django-modelcluster/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-05T19:06:34Z", "updated_at": "2017-04-06T20:32:55Z", "closed_at": "2017-04-06T20:32:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In Django 1.10, ManyToManyField.value_from_object always returns an empty set of related objects when passed an instance without a primary key:\r\nhttps://github.com/django/django/commit/f529d0cb5855db2dfc8d0d39850dbb4793bc75c2\r\n\r\nThis is not valid for ParentalManyToManyField, since an unsaved instance can have related objects; we should therefore override value_from_object to bypass this test.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/67", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/67/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/67/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/67/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/67", "id": 204902681, "node_id": "MDU6SXNzdWUyMDQ5MDI2ODE=", "number": 67, "title": "Specify django-taggit as an optional dependency via extras_require", "user": {"login": "browniebroke", "id": 861044, "node_id": "MDQ6VXNlcjg2MTA0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/861044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/browniebroke", "html_url": "https://github.com/browniebroke", "followers_url": "https://api.github.com/users/browniebroke/followers", "following_url": "https://api.github.com/users/browniebroke/following{/other_user}", "gists_url": "https://api.github.com/users/browniebroke/gists{/gist_id}", "starred_url": "https://api.github.com/users/browniebroke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/browniebroke/subscriptions", "organizations_url": "https://api.github.com/users/browniebroke/orgs", "repos_url": "https://api.github.com/users/browniebroke/repos", "events_url": "https://api.github.com/users/browniebroke/events{/privacy}", "received_events_url": "https://api.github.com/users/browniebroke/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-02-02T15:17:25Z", "updated_at": "2017-02-02T17:29:41Z", "closed_at": "2017-02-02T17:29:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The new 3.0 version requires [`django-taggit>=0.20`](https://github.com/wagtail/django-modelcluster/blob/master/modelcluster/contrib/taggit.py#L12) but it's not specified in the install requires section of [`setup.py`](https://github.com/wagtail/django-modelcluster/blob/master/setup.py#L18). \r\n\r\nSince my project doesn't depend directly on taggit, upgrading to 3.0 is breaking my build. Having this requirement in the setup.py would have upgraded the downstream dependency automatically.\r\n\r\nWas this a conscious decision or was it forgotten?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/66", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/66/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/66/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/66", "id": 203690622, "node_id": "MDU6SXNzdWUyMDM2OTA2MjI=", "number": 66, "title": "Formset test failures on Django 1.11a1", "user": {"login": "gasman", "id": 85097, "node_id": "MDQ6VXNlcjg1MDk3", "avatar_url": "https://avatars2.githubusercontent.com/u/85097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gasman", "html_url": "https://github.com/gasman", "followers_url": "https://api.github.com/users/gasman/followers", "following_url": "https://api.github.com/users/gasman/following{/other_user}", "gists_url": "https://api.github.com/users/gasman/gists{/gist_id}", "starred_url": "https://api.github.com/users/gasman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gasman/subscriptions", "organizations_url": "https://api.github.com/users/gasman/orgs", "repos_url": "https://api.github.com/users/gasman/repos", "events_url": "https://api.github.com/users/gasman/events{/privacy}", "received_events_url": "https://api.github.com/users/gasman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-27T17:15:00Z", "updated_at": "2017-02-27T11:08:35Z", "closed_at": "2017-02-27T11:08:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Several tests are failing against Django 1.11a1, due to this change:\r\n\r\nhttps://github.com/django/django/commit/181f492ad021aeb43105aa9d38106ad7baf00211\r\nhttps://code.djangoproject.com/ticket/27416\r\n\r\n\tCreating test database for alias 'default'...\r\n\tSystem check identified no issues (0 silenced).\r\n\t..............................FF.........F..........F........................x..\r\n\t======================================================================\r\n\tFAIL: test_formsets_from_model_superclass_are_exposed (tests.tests.test_cluster_form.ClusterFormTest)\r\n\t----------------------------------------------------------------------\r\n\tTraceback (most recent call last):\r\n\t  File \"/home/vagrant/libs/django-modelcluster/tests/tests/test_cluster_form.py\", line 451, in test_formsets_from_model_superclass_are_exposed\r\n\t    self.assertEqual(instance.reviews.count(), 1)\r\n\tAssertionError: 0 != 1\r\n\r\n\t======================================================================\r\n\tFAIL: test_formsets_from_model_superclass_with_explicit_formsets_def (tests.tests.test_cluster_form.ClusterFormTest)\r\n\t----------------------------------------------------------------------\r\n\tTraceback (most recent call last):\r\n\t  File \"/home/vagrant/libs/django-modelcluster/tests/tests/test_cluster_form.py\", line 482, in test_formsets_from_model_superclass_with_explicit_formsets_def\r\n\t    self.assertEqual(instance.reviews.count(), 1)\r\n\tAssertionError: 0 != 1\r\n\r\n\t======================================================================\r\n\tFAIL: test_child_updates_without_ids (tests.tests.test_formset.ChildFormsetTest)\r\n\t----------------------------------------------------------------------\r\n\tTraceback (most recent call last):\r\n\t  File \"/home/vagrant/libs/django-modelcluster/tests/tests/test_formset.py\", line 240, in test_child_updates_without_ids\r\n\t    self.assertEqual(2, beatles.members.count())\r\n\tAssertionError: 2 != 1\r\n\r\n\t======================================================================\r\n\tFAIL: test_incoming_formset_data (tests.tests.test_formset.TransientFormsetTest)\r\n\t----------------------------------------------------------------------\r\n\tTraceback (most recent call last):\r\n\t  File \"/home/vagrant/libs/django-modelcluster/tests/tests/test_formset.py\", line 43, in test_incoming_formset_data\r\n\t    self.assertEqual(2, len(members))\r\n\tAssertionError: 2 != 1\r\n\r\n\t----------------------------------------------------------------------\r\n\tRan 80 tests in 0.608s\r\n\r\n\tFAILED (failures=4, expected failures=1)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/64", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/64/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/64/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/64", "id": 202118427, "node_id": "MDU6SXNzdWUyMDIxMTg0Mjc=", "number": 64, "title": "convert rel to remote_field", "user": {"login": "auvipy", "id": 6212603, "node_id": "MDQ6VXNlcjYyMTI2MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6212603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/auvipy", "html_url": "https://github.com/auvipy", "followers_url": "https://api.github.com/users/auvipy/followers", "following_url": "https://api.github.com/users/auvipy/following{/other_user}", "gists_url": "https://api.github.com/users/auvipy/gists{/gist_id}", "starred_url": "https://api.github.com/users/auvipy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/auvipy/subscriptions", "organizations_url": "https://api.github.com/users/auvipy/orgs", "repos_url": "https://api.github.com/users/auvipy/repos", "events_url": "https://api.github.com/users/auvipy/events{/privacy}", "received_events_url": "https://api.github.com/users/auvipy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-20T11:30:40Z", "updated_at": "2017-02-02T07:58:47Z", "closed_at": "2017-02-02T07:58:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/58", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/58/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/58/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/58", "id": 158369208, "node_id": "MDU6SXNzdWUxNTgzNjkyMDg=", "number": 58, "title": "ClusterForm.media should incorporate media from child formsets", "user": {"login": "gasman", "id": 85097, "node_id": "MDQ6VXNlcjg1MDk3", "avatar_url": "https://avatars2.githubusercontent.com/u/85097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gasman", "html_url": "https://github.com/gasman", "followers_url": "https://api.github.com/users/gasman/followers", "following_url": "https://api.github.com/users/gasman/following{/other_user}", "gists_url": "https://api.github.com/users/gasman/gists{/gist_id}", "starred_url": "https://api.github.com/users/gasman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gasman/subscriptions", "organizations_url": "https://api.github.com/users/gasman/orgs", "repos_url": "https://api.github.com/users/gasman/repos", "events_url": "https://api.github.com/users/gasman/events{/privacy}", "received_events_url": "https://api.github.com/users/gasman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-06-03T13:37:59Z", "updated_at": "2017-03-09T16:59:12Z", "closed_at": "2017-03-09T16:59:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If a field within a child formset defines form media, this won't currently get picked up as part of the base `form.media` property.\n\nA fix for this within Wagtail is pending at https://github.com/torchbox/wagtail/pull/2673, but it would be appropriate to fix this at the ClusterForm level too.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/54", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/54/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/54/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/54", "id": 149109612, "node_id": "MDU6SXNzdWUxNDkxMDk2MTI=", "number": 54, "title": "_ClusterTaggableManager breaking manage.py update_index", "user": {"login": "KaitCrawford", "id": 1230707, "node_id": "MDQ6VXNlcjEyMzA3MDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1230707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KaitCrawford", "html_url": "https://github.com/KaitCrawford", "followers_url": "https://api.github.com/users/KaitCrawford/followers", "following_url": "https://api.github.com/users/KaitCrawford/following{/other_user}", "gists_url": "https://api.github.com/users/KaitCrawford/gists{/gist_id}", "starred_url": "https://api.github.com/users/KaitCrawford/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KaitCrawford/subscriptions", "organizations_url": "https://api.github.com/users/KaitCrawford/orgs", "repos_url": "https://api.github.com/users/KaitCrawford/repos", "events_url": "https://api.github.com/users/KaitCrawford/events{/privacy}", "received_events_url": "https://api.github.com/users/KaitCrawford/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 77829199, "node_id": "MDU6TGFiZWw3NzgyOTE5OQ==", "url": "https://api.github.com/repos/wagtail/django-modelcluster/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-04-18T10:23:57Z", "updated_at": "2016-04-22T15:03:56Z", "closed_at": "2016-04-21T10:14:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "When running manage.py update_index we are encountering this error:\n\n```\nTraceback (most recent call last):\n  File \"/var/praekelt/molo-tuneme/manage.py\", line 11, in <module>\n    execute_from_command_line(sys.argv)\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/django/core/management/__init__.py\", line 354, in execute_from_command_line\n    utility.execute()\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/django/core/management/__init__.py\", line 346, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/django/core/management/base.py\", line 394, in run_from_argv\n    self.execute(*args, **cmd_options)\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/django/core/management/base.py\", line 445, in execute\n    output = self.handle(*args, **options)\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/wagtail/wagtailsearch/management/commands/update_index.py\", line 87, in handle\n    self.update_backend(backend_name, object_list)\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/wagtail/wagtailsearch/management/commands/update_index.py\", line 48, in update_backend\n    for chunk in self.print_iter_progress(self.queryset_chunks(queryset)):\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/wagtail/wagtailsearch/management/commands/update_index.py\", line 103, in print_iter_progress\n    for i, value in enumerate(iterable, start=1):\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/wagtail/wagtailsearch/management/commands/update_index.py\", line 127, in queryset_chunks\n    items = list(qs[i * chunk_size:][:chunk_size])\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/django/db/models/query.py\", line 162, in __iter__\n    self._fetch_all()\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/django/db/models/query.py\", line 967, in _fetch_all\n    self._prefetch_related_objects()\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/django/db/models/query.py\", line 591, in _prefetch_related_objects\n    prefetch_related_objects(self._result_cache, self._prefetch_related_lookups)\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/django/db/models/query.py\", line 1516, in prefetch_related_objects\n    obj_list, additional_lookups = prefetch_one_level(obj_list, prefetcher, lookup, level)\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/django/db/models/query.py\", line 1615, in prefetch_one_level\n    prefetcher.get_prefetch_queryset(instances, lookup.get_current_queryset(level)))\n  File \"/var/praekelt/python/local/lib/python2.7/site-packages/taggit/managers.py\", line 137, in get_prefetch_queryset\n    qs = self.get_queryset(query).using(db).extra(\nTypeError: get_query_set() takes exactly 1 argument (2 given)\n```\n\nRunning `print type(self)` just before the break gives:\n`<class 'modelcluster.contrib.taggit._ClusterTaggableManager'>`\n\nThe cause seems to be a call to `_TaggableManager.get_prefetch_queryset()` which calls `self.get_query_set(query)`. While `_TaggableManager.get_query_set()` accepts an optional parameter, the the overridden implementation in `_ClusterTaggableManager` doesn't.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/49", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/49/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/49/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/49", "id": 124144947, "node_id": "MDU6SXNzdWUxMjQxNDQ5NDc=", "number": 49, "title": "AttributeError: 'ModelName' object has no attribute '+'", "user": {"login": "jasonm", "id": 1031, "node_id": "MDQ6VXNlcjEwMzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasonm", "html_url": "https://github.com/jasonm", "followers_url": "https://api.github.com/users/jasonm/followers", "following_url": "https://api.github.com/users/jasonm/following{/other_user}", "gists_url": "https://api.github.com/users/jasonm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasonm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasonm/subscriptions", "organizations_url": "https://api.github.com/users/jasonm/orgs", "repos_url": "https://api.github.com/users/jasonm/repos", "events_url": "https://api.github.com/users/jasonm/events{/privacy}", "received_events_url": "https://api.github.com/users/jasonm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-12-29T00:30:41Z", "updated_at": "2016-04-20T16:24:49Z", "closed_at": "2016-04-20T16:24:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi folks!  I find that suppressing a backwards relation to a subclass of ModelCluster appears to cause an issue when saving the parent model.  I hope this is the right place to open an issue.\n\nHere's the full backtrace from our app and some related model code: https://gist.github.com/jasonm/a6f514026bc2b97c1b94\n\nIn the Wagtail CMS I'm working on, an `Event` is tagged with `EventLanguageTag` and `EventRegionTag` instances and the backwards relation is suppressed by specifying `related_name='+'`:\n\n``` python\nclass EventLanguageTag(TaggedItemBase):\n    content_object = ParentalKey('cms.Event', related_name='+')\n\nclass EventRegionTag(TaggedItemBase):\n    content_object = ParentalKey('cms.Event', related_name='+')\n\n@register_snippet\nclass Event(ClusterableModel, index.Indexed):\n    language_tags = TaggableManager(through=EventLanguageTag, blank=True, related_name=\"event_language\", verbose_name=\"Languages\")\n    region_tags = TaggableManager(through=EventRegionTag, blank=True, related_name=\"event_region\", verbose_name=\"Regions\")\n    # ...\n```\n\nThis causes `django-modelcluster` to look for relations named `+`:\n\n``` python\n# shell_plus session\nIn [13]: from modelcluster.models import get_all_child_relations\n\nIn [14]: get_all_child_relations(Event())\nOut[14]: [<ManyToOneRel: cms.eventlanguagetag>, <ManyToOneRel: cms.eventregiontag>]\n\nIn [15]: [rel.get_accessor_name() for rel in get_all_child_relations(Event())]\nOut[15]: [u'+', u'+']\n```\n\nwhich it then cannot find to save at https://github.com/torchbox/django-modelcluster/blob/eca7709065a6f82914ba47268e0127dbc8f6fe1a/modelcluster/models.py#L201\n\nThis is on Django 1.8.4, wagtail 1.2, django-taggit 0.17.1, django-modelcluster 1.1\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/42", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/42/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/42/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/42", "id": 110887974, "node_id": "MDU6SXNzdWUxMTA4ODc5NzQ=", "number": 42, "title": " 'FakeQuerySet' object has no attribute 'exclude' ", "user": {"login": "HitDaCa", "id": 2290450, "node_id": "MDQ6VXNlcjIyOTA0NTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/2290450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HitDaCa", "html_url": "https://github.com/HitDaCa", "followers_url": "https://api.github.com/users/HitDaCa/followers", "following_url": "https://api.github.com/users/HitDaCa/following{/other_user}", "gists_url": "https://api.github.com/users/HitDaCa/gists{/gist_id}", "starred_url": "https://api.github.com/users/HitDaCa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HitDaCa/subscriptions", "organizations_url": "https://api.github.com/users/HitDaCa/orgs", "repos_url": "https://api.github.com/users/HitDaCa/repos", "events_url": "https://api.github.com/users/HitDaCa/events{/privacy}", "received_events_url": "https://api.github.com/users/HitDaCa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-10-11T23:06:03Z", "updated_at": "2015-10-12T12:24:14Z", "closed_at": "2015-10-12T12:24:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Wagtails preview function fails on extended Page models which make use of djangos \"exclude\" queryset.\nhttps://docs.djangoproject.com/en/1.8/ref/models/querysets/.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/32", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/32/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/32/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/32", "id": 79898716, "node_id": "MDU6SXNzdWU3OTg5ODcxNg==", "number": 32, "title": "Drop support for django 1.6?", "user": {"login": "theju", "id": 33965, "node_id": "MDQ6VXNlcjMzOTY1", "avatar_url": "https://avatars2.githubusercontent.com/u/33965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theju", "html_url": "https://github.com/theju", "followers_url": "https://api.github.com/users/theju/followers", "following_url": "https://api.github.com/users/theju/following{/other_user}", "gists_url": "https://api.github.com/users/theju/gists{/gist_id}", "starred_url": "https://api.github.com/users/theju/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theju/subscriptions", "organizations_url": "https://api.github.com/users/theju/orgs", "repos_url": "https://api.github.com/users/theju/repos", "events_url": "https://api.github.com/users/theju/events{/privacy}", "received_events_url": "https://api.github.com/users/theju/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-05-23T17:01:12Z", "updated_at": "2015-05-26T04:02:16Z", "closed_at": "2015-05-25T21:09:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Please update tox.ini to remove support for django 1.6 now that it is unsupported. You may also consider removing Python 2.6 which isn't available on any Linux based distribution. RHEL 7, which is the slowest in terms of updates, also comes with Python 2.7.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/27", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/27/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/27/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/27", "id": 68107138, "node_id": "MDU6SXNzdWU2ODEwNzEzOA==", "number": 27, "title": "Errors when adding new field", "user": {"login": "kiwimind", "id": 114639, "node_id": "MDQ6VXNlcjExNDYzOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/114639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kiwimind", "html_url": "https://github.com/kiwimind", "followers_url": "https://api.github.com/users/kiwimind/followers", "following_url": "https://api.github.com/users/kiwimind/following{/other_user}", "gists_url": "https://api.github.com/users/kiwimind/gists{/gist_id}", "starred_url": "https://api.github.com/users/kiwimind/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kiwimind/subscriptions", "organizations_url": "https://api.github.com/users/kiwimind/orgs", "repos_url": "https://api.github.com/users/kiwimind/repos", "events_url": "https://api.github.com/users/kiwimind/events{/privacy}", "received_events_url": "https://api.github.com/users/kiwimind/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 77829199, "node_id": "MDU6TGFiZWw3NzgyOTE5OQ==", "url": "https://api.github.com/repos/wagtail/django-modelcluster/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-04-13T14:10:11Z", "updated_at": "2015-04-13T16:39:49Z", "closed_at": "2015-04-13T16:39:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying to add a new field, the following error occurred:\n\n```\n$ ./manage.py schemamigration --auto core\n/home/vagrant/.virtualenvs/myproject/local/lib/python2.7/site-packages/modelcluster/tags.py:8: DeprecationWarning: The modelcluster.tags module has been moved to modelcluster.contrib.taggit\n  \"modelcluster.contrib.taggit\", DeprecationWarning)\n\n ! Cannot freeze field 'core.postpage.tags'\n ! (this field has class modelcluster.contrib.taggit.ClusterTaggableManager)\n\n ! South cannot introspect some fields; this is probably because they are custom\n ! fields. If they worked in 0.6 or below, this is because we have removed the\n ! models parser (it often broke things).\n ! To fix this, read http://south.aeracode.org/wiki/MyFieldsDontWork\n```\n\nFor reference:\n\n```\n$ pip freeze\nDjango==1.6.7\nSouth==1.0\ndjango-modelcluster==0.6.1\nwagtail==0.8.5\n```\n\nRunning `$ pip install -U django-modelcluster==0.5` has solved the issue.\nIt was suggested that I post this as an issue in here.\nThanks.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/25", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/25/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/25/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/25", "id": 66227573, "node_id": "MDU6SXNzdWU2NjIyNzU3Mw==", "number": 25, "title": "Django 1.8 support", "user": {"login": "chhantyal", "id": 862941, "node_id": "MDQ6VXNlcjg2Mjk0MQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/862941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chhantyal", "html_url": "https://github.com/chhantyal", "followers_url": "https://api.github.com/users/chhantyal/followers", "following_url": "https://api.github.com/users/chhantyal/following{/other_user}", "gists_url": "https://api.github.com/users/chhantyal/gists{/gist_id}", "starred_url": "https://api.github.com/users/chhantyal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chhantyal/subscriptions", "organizations_url": "https://api.github.com/users/chhantyal/orgs", "repos_url": "https://api.github.com/users/chhantyal/repos", "events_url": "https://api.github.com/users/chhantyal/events{/privacy}", "received_events_url": "https://api.github.com/users/chhantyal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-04-03T21:05:13Z", "updated_at": "2015-04-09T10:16:42Z", "closed_at": "2015-04-09T10:16:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am getting this error while trying to use with 1.8.\n\n```\nImportError: cannot import name RelatedObject\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/21", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/21/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/21/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/21", "id": 65901161, "node_id": "MDU6SXNzdWU2NTkwMTE2MQ==", "number": 21, "title": "Add modelcluster to Travis", "user": {"login": "zerolab", "id": 31622, "node_id": "MDQ6VXNlcjMxNjIy", "avatar_url": "https://avatars0.githubusercontent.com/u/31622?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zerolab", "html_url": "https://github.com/zerolab", "followers_url": "https://api.github.com/users/zerolab/followers", "following_url": "https://api.github.com/users/zerolab/following{/other_user}", "gists_url": "https://api.github.com/users/zerolab/gists{/gist_id}", "starred_url": "https://api.github.com/users/zerolab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zerolab/subscriptions", "organizations_url": "https://api.github.com/users/zerolab/orgs", "repos_url": "https://api.github.com/users/zerolab/repos", "events_url": "https://api.github.com/users/zerolab/events{/privacy}", "received_events_url": "https://api.github.com/users/zerolab/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "kaedroho", "id": 1093808, "node_id": "MDQ6VXNlcjEwOTM4MDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1093808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaedroho", "html_url": "https://github.com/kaedroho", "followers_url": "https://api.github.com/users/kaedroho/followers", "following_url": "https://api.github.com/users/kaedroho/following{/other_user}", "gists_url": "https://api.github.com/users/kaedroho/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaedroho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaedroho/subscriptions", "organizations_url": "https://api.github.com/users/kaedroho/orgs", "repos_url": "https://api.github.com/users/kaedroho/repos", "events_url": "https://api.github.com/users/kaedroho/events{/privacy}", "received_events_url": "https://api.github.com/users/kaedroho/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kaedroho", "id": 1093808, "node_id": "MDQ6VXNlcjEwOTM4MDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1093808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaedroho", "html_url": "https://github.com/kaedroho", "followers_url": "https://api.github.com/users/kaedroho/followers", "following_url": "https://api.github.com/users/kaedroho/following{/other_user}", "gists_url": "https://api.github.com/users/kaedroho/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaedroho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaedroho/subscriptions", "organizations_url": "https://api.github.com/users/kaedroho/orgs", "repos_url": "https://api.github.com/users/kaedroho/repos", "events_url": "https://api.github.com/users/kaedroho/events{/privacy}", "received_events_url": "https://api.github.com/users/kaedroho/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2015-04-02T10:39:00Z", "updated_at": "2015-04-02T12:37:43Z", "closed_at": "2015-04-02T12:37:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "imho, this repo should be Travis CI-ed.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/19", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/19/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/19/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/19", "id": 61628527, "node_id": "MDU6SXNzdWU2MTYyODUyNw==", "number": 19, "title": "Django 1.8 support", "user": {"login": "kaedroho", "id": 1093808, "node_id": "MDQ6VXNlcjEwOTM4MDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1093808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaedroho", "html_url": "https://github.com/kaedroho", "followers_url": "https://api.github.com/users/kaedroho/followers", "following_url": "https://api.github.com/users/kaedroho/following{/other_user}", "gists_url": "https://api.github.com/users/kaedroho/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaedroho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaedroho/subscriptions", "organizations_url": "https://api.github.com/users/kaedroho/orgs", "repos_url": "https://api.github.com/users/kaedroho/repos", "events_url": "https://api.github.com/users/kaedroho/events{/privacy}", "received_events_url": "https://api.github.com/users/kaedroho/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-03-14T15:34:32Z", "updated_at": "2015-04-03T10:04:11Z", "closed_at": "2015-04-03T10:04:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Quite a lot of the related field internals have changed in Django 1.8.\n\nHeres some changes that are causing problems for django-modelcluster:\n- https://github.com/django/django/commit/f233bf47dde1d481108142c8d6b4bb3b3d8c6d08\n- https://github.com/django/django/commit/5643a3b51be338196d0b292d5626ad43648448d3\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/18", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/18/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/18/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/18", "id": 60686324, "node_id": "MDU6SXNzdWU2MDY4NjMyNA==", "number": 18, "title": "Tests have timezone issue", "user": {"login": "bufke", "id": 739307, "node_id": "MDQ6VXNlcjczOTMwNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/739307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bufke", "html_url": "https://github.com/bufke", "followers_url": "https://api.github.com/users/bufke/followers", "following_url": "https://api.github.com/users/bufke/following{/other_user}", "gists_url": "https://api.github.com/users/bufke/gists{/gist_id}", "starred_url": "https://api.github.com/users/bufke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bufke/subscriptions", "organizations_url": "https://api.github.com/users/bufke/orgs", "repos_url": "https://api.github.com/users/bufke/repos", "events_url": "https://api.github.com/users/bufke/events{/privacy}", "received_events_url": "https://api.github.com/users/bufke/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-03-11T16:27:51Z", "updated_at": "2015-04-09T12:00:49Z", "closed_at": "2015-04-09T12:00:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Pretty minor issue - but two of the tests fail for me due to different timezones. Running tests with `python runtests.py`\n\n```\n======================================================================\nFAIL: test_deserialise_with_utc_datetime (tests.tests.test_serialize.SerializeTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/code/tests/tests/test_serialize.py\", line 177, in test_deserialise_with_utc_datetime\n    self.assertEqual(log.time, expected_time)\nAssertionError: datet[21 chars] 1, 16, 1, 42, tzinfo=<django.utils.timezone.L[34 chars]e80>) != datet[21 chars] 1, 11, 1, 42, tzinfo=<django.utils.timezone.L[34 chars]e80>)\n\n======================================================================\nFAIL: test_serialise_with_naive_datetime (tests.tests.test_serialize.SerializeTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/code/tests/tests/test_serialize.py\", line 144, in test_serialise_with_naive_datetime\n    self.assertEqual(log_json['time'], '2014-08-01T16:01:42Z')\nAssertionError: '2014-08-01T11:01:42Z' != '2014-08-01T16:01:42Z'\n- 2014-08-01T11:01:42Z\n?             ^\n+ 2014-08-01T16:01:42Z\n?             ^\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/17", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/17/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/17/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/17", "id": 58324777, "node_id": "MDU6SXNzdWU1ODMyNDc3Nw==", "number": 17, "title": "Move tags.py to contrib/taggit.py?", "user": {"login": "kaedroho", "id": 1093808, "node_id": "MDQ6VXNlcjEwOTM4MDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1093808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaedroho", "html_url": "https://github.com/kaedroho", "followers_url": "https://api.github.com/users/kaedroho/followers", "following_url": "https://api.github.com/users/kaedroho/following{/other_user}", "gists_url": "https://api.github.com/users/kaedroho/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaedroho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaedroho/subscriptions", "organizations_url": "https://api.github.com/users/kaedroho/orgs", "repos_url": "https://api.github.com/users/kaedroho/repos", "events_url": "https://api.github.com/users/kaedroho/events{/privacy}", "received_events_url": "https://api.github.com/users/kaedroho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 77829201, "node_id": "MDU6TGFiZWw3NzgyOTIwMQ==", "url": "https://api.github.com/repos/wagtail/django-modelcluster/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 77829203, "node_id": "MDU6TGFiZWw3NzgyOTIwMw==", "url": "https://api.github.com/repos/wagtail/django-modelcluster/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-02-20T08:59:21Z", "updated_at": "2015-04-09T11:33:20Z", "closed_at": "2015-04-09T11:33:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "- Shows taggit support is optional\n- Gives space for other tagging systems to be supported\n- Removes non-essential stuff from the core part of modelcluster\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/14", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/14/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/14/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/14", "id": 53275289, "node_id": "MDU6SXNzdWU1MzI3NTI4OQ==", "number": 14, "title": "FakeQuerySets can't delete", "user": {"login": "johannes-torchbox", "id": 6793677, "node_id": "MDQ6VXNlcjY3OTM2Nzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/6793677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johannes-torchbox", "html_url": "https://github.com/johannes-torchbox", "followers_url": "https://api.github.com/users/johannes-torchbox/followers", "following_url": "https://api.github.com/users/johannes-torchbox/following{/other_user}", "gists_url": "https://api.github.com/users/johannes-torchbox/gists{/gist_id}", "starred_url": "https://api.github.com/users/johannes-torchbox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johannes-torchbox/subscriptions", "organizations_url": "https://api.github.com/users/johannes-torchbox/orgs", "repos_url": "https://api.github.com/users/johannes-torchbox/repos", "events_url": "https://api.github.com/users/johannes-torchbox/events{/privacy}", "received_events_url": "https://api.github.com/users/johannes-torchbox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-01-02T20:20:49Z", "updated_at": "2015-01-05T10:56:02Z", "closed_at": "2015-01-05T10:56:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm wondering about a strange situation I'm in. I'm doing something like this:\n\n```\n   model_name.related_name.all().delete()\n```\n\nAnd I get:\n\n```\nAttributeError: 'FakeQuerySet' object has no attribute 'delete'\n```\n\nThere are related items and they are also _not_ shown by the FakeQuerySet, so there's another problem there. This only happens in web requests, not on the console, and I have no idea where the FakeQuerySet comes from.\n\nI can think of two things that might be improved here:\n1. Don't let FakeQuerySets leak: I don't get them on the console and they're not documented as far as I can see, so why do I get one? The issue is repeatable for me, so I can investigate if needed.\n2. A FakeQuerySet might want to be able to delete its contents.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/13", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/13/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/13/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/13", "id": 51619287, "node_id": "MDU6SXNzdWU1MTYxOTI4Nw==", "number": 13, "title": "Preview doesn't reflect changes made to the order of Orderable items.", "user": {"login": "coredumperror", "id": 413571, "node_id": "MDQ6VXNlcjQxMzU3MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/413571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coredumperror", "html_url": "https://github.com/coredumperror", "followers_url": "https://api.github.com/users/coredumperror/followers", "following_url": "https://api.github.com/users/coredumperror/following{/other_user}", "gists_url": "https://api.github.com/users/coredumperror/gists{/gist_id}", "starred_url": "https://api.github.com/users/coredumperror/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coredumperror/subscriptions", "organizations_url": "https://api.github.com/users/coredumperror/orgs", "repos_url": "https://api.github.com/users/coredumperror/repos", "events_url": "https://api.github.com/users/coredumperror/events{/privacy}", "received_events_url": "https://api.github.com/users/coredumperror/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-12-10T22:22:25Z", "updated_at": "2015-02-03T10:08:35Z", "closed_at": "2015-02-03T10:08:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I created a detailed description of this problem in the wagtail issue queue: torchbox/wagtail#867. I'm not sure if the bug is in wagtail or django-modelcluster, which is why I'm posting this reference issue in this queue.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/10", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/10/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/10/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/10", "id": 40354069, "node_id": "MDU6SXNzdWU0MDM1NDA2OQ==", "number": 10, "title": "Serialised datetimes are not timezone aware", "user": {"login": "kaedroho", "id": 1093808, "node_id": "MDQ6VXNlcjEwOTM4MDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1093808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaedroho", "html_url": "https://github.com/kaedroho", "followers_url": "https://api.github.com/users/kaedroho/followers", "following_url": "https://api.github.com/users/kaedroho/following{/other_user}", "gists_url": "https://api.github.com/users/kaedroho/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaedroho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaedroho/subscriptions", "organizations_url": "https://api.github.com/users/kaedroho/orgs", "repos_url": "https://api.github.com/users/kaedroho/repos", "events_url": "https://api.github.com/users/kaedroho/events{/privacy}", "received_events_url": "https://api.github.com/users/kaedroho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 77829199, "node_id": "MDU6TGFiZWw3NzgyOTE5OQ==", "url": "https://api.github.com/repos/wagtail/django-modelcluster/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-08-15T14:54:11Z", "updated_at": "2014-09-01T18:40:25Z", "closed_at": "2014-09-01T18:40:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Reported by @timheap in: https://github.com/torchbox/wagtail/pull/494#issuecomment-49959294\n\nWhen datetimes are serialised, they are not converted to UTC nor any timezone information is saved with them.\n\nThe datetimes should be converted to UTC on serialisation and converted back to localtime on deserialisation.\n\nIf we do start converting datetimes to/from UTC, it's important to take into account the fact that old datetimes will still be in localtime and may have not been converted.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/9", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/9/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/9/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/9", "id": 37483795, "node_id": "MDU6SXNzdWUzNzQ4Mzc5NQ==", "number": 9, "title": "ClusterForm does not pick up child relations defined on a superclass of the model", "user": {"login": "gasman", "id": 85097, "node_id": "MDQ6VXNlcjg1MDk3", "avatar_url": "https://avatars2.githubusercontent.com/u/85097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gasman", "html_url": "https://github.com/gasman", "followers_url": "https://api.github.com/users/gasman/followers", "following_url": "https://api.github.com/users/gasman/following{/other_user}", "gists_url": "https://api.github.com/users/gasman/gists{/gist_id}", "starred_url": "https://api.github.com/users/gasman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gasman/subscriptions", "organizations_url": "https://api.github.com/users/gasman/orgs", "repos_url": "https://api.github.com/users/gasman/repos", "events_url": "https://api.github.com/users/gasman/events{/privacy}", "received_events_url": "https://api.github.com/users/gasman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 77829199, "node_id": "MDU6TGFiZWw3NzgyOTE5OQ==", "url": "https://api.github.com/repos/wagtail/django-modelcluster/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-07-09T16:28:03Z", "updated_at": "2014-09-05T11:00:36Z", "closed_at": "2014-09-03T16:08:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On wagtaildemo:\n\n```\nfrom demo.models import HomePage\nfrom wagtail.wagtailcore.models import Page\n\nclass HomePageForm(ClusterForm):\n    class Meta:\n        model = HomePage\n\nclass PageForm(ClusterForm):\n    class Meta:\n        model = Page\n\n>>> HomePageForm.formsets\n{'related_links': <class 'django.forms.formsets.HomePageRelatedLinkFormFormSet'>, 'carousel_items': <class 'django.forms.formsets.HomePageCarouselItemFormFormSet'>}\n\n>>> PageForm.formsets\n{'advert_placements': <class 'django.forms.formsets.AdvertPlacementFormFormSet'>}\n```\n\nHomePageForm.formsets should include the advert_placements formset, but doesn't. This is because it consults HomePage._meta.child_relations, which doesn't contain the advert_placements relation. Need to check the semantics of child_relations to figure out whether it ought to include relations on the superclass, or not (and if not, we should fix it within ClusterForm by walking the model's superclasses to build the list of formsets).\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/3", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/3/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/3/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/3", "id": 31658206, "node_id": "MDU6SXNzdWUzMTY1ODIwNg==", "number": 3, "title": "Can't save model with ManyToMany Field", "user": {"login": "artursmet", "id": 1754812, "node_id": "MDQ6VXNlcjE3NTQ4MTI=", "avatar_url": "https://avatars1.githubusercontent.com/u/1754812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/artursmet", "html_url": "https://github.com/artursmet", "followers_url": "https://api.github.com/users/artursmet/followers", "following_url": "https://api.github.com/users/artursmet/following{/other_user}", "gists_url": "https://api.github.com/users/artursmet/gists{/gist_id}", "starred_url": "https://api.github.com/users/artursmet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/artursmet/subscriptions", "organizations_url": "https://api.github.com/users/artursmet/orgs", "repos_url": "https://api.github.com/users/artursmet/repos", "events_url": "https://api.github.com/users/artursmet/events{/privacy}", "received_events_url": "https://api.github.com/users/artursmet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2014-04-16T16:38:58Z", "updated_at": "2017-01-12T11:55:43Z", "closed_at": "2017-01-12T11:55:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've found a bug in save of m2m related objects.\nSteps to reproduce:\n- Install wagtail CMS\n- Create single Page model\n- Create standard Django model\n- Add `ManyToManyField` from your Page model to standard django model\n- Try to create page instance\n\nWhen you try to save it, you'll receive following error:\n\n``` python\nTraceback:\nFile \"/home/artur/Projekty/demo/local/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  114.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)\nFile \"/home/artur/Projekty/demo/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py\" in _wrapped_view\n  22.                 return view_func(request, *args, **kwargs)\nFile \"/home/artur/Projekty/demo/src/wagtail/wagtail/wagtailadmin/views/pages.py\" in create\n  172.             page = form.save(commit=False)  # don't save yet, as we need treebeard to assign tree params\nFile \"/home/artur/Projekty/demo/local/lib/python2.7/site-packages/modelcluster/forms.py\" in save\n  257.             self.save_m2m()\nFile \"/home/artur/Projekty/demo/local/lib/python2.7/site-packages/django/forms/models.py\" in save_m2m\n  96.                 f.save_form_data(instance, cleaned_data[f.name])\nFile \"/home/artur/Projekty/demo/local/lib/python2.7/site-packages/django/db/models/fields/related.py\" in save_form_data\n  1527.         setattr(instance, self.attname, data)\nFile \"/home/artur/Projekty/demo/local/lib/python2.7/site-packages/django/db/models/fields/related.py\" in __set__\n  835.         manager = self.__get__(instance)\nFile \"/home/artur/Projekty/demo/local/lib/python2.7/site-packages/django/db/models/fields/related.py\" in __get__\n  825.             through=self.field.rel.through,\nFile \"/home/artur/Projekty/demo/local/lib/python2.7/site-packages/django/db/models/fields/related.py\" in __init__\n  522.                                  (instance, source_field_name))\n```\n\nIt tries to execute `save_m2m()` before saving page instance. Is there workaround for this issue?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/1", "repository_url": "https://api.github.com/repos/wagtail/django-modelcluster", "labels_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/1/comments", "events_url": "https://api.github.com/repos/wagtail/django-modelcluster/issues/1/events", "html_url": "https://github.com/wagtail/django-modelcluster/issues/1", "id": 26947496, "node_id": "MDU6SXNzdWUyNjk0NzQ5Ng==", "number": 1, "title": "ClusterTaggableManager broken with django-taggit 0.11", "user": {"login": "gasman", "id": 85097, "node_id": "MDQ6VXNlcjg1MDk3", "avatar_url": "https://avatars2.githubusercontent.com/u/85097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gasman", "html_url": "https://github.com/gasman", "followers_url": "https://api.github.com/users/gasman/followers", "following_url": "https://api.github.com/users/gasman/following{/other_user}", "gists_url": "https://api.github.com/users/gasman/gists{/gist_id}", "starred_url": "https://api.github.com/users/gasman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gasman/subscriptions", "organizations_url": "https://api.github.com/users/gasman/orgs", "repos_url": "https://api.github.com/users/gasman/repos", "events_url": "https://api.github.com/users/gasman/events{/privacy}", "received_events_url": "https://api.github.com/users/gasman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 77829199, "node_id": "MDU6TGFiZWw3NzgyOTE5OQ==", "url": "https://api.github.com/repos/wagtail/django-modelcluster/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-02-05T09:46:46Z", "updated_at": "2014-02-05T16:11:29Z", "closed_at": "2014-02-05T16:11:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://github.com/alex/django-taggit/commit/4f2e47f833a36ca3bce3bb31ebd6f25f88d4952c adds a new required parameter (prefetch_cache_name) in _TaggableManager.__init__, which we're not passing in https://github.com/torchbox/django-modelcluster/blob/c713d8f5f0d3261e06537346a78e6fc47ed89878/modelcluster/tags.py#L83 .\n", "performed_via_github_app": null, "score": 1.0}]}