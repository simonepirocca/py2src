{"total_count": 1140, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/ansible-community/molecule/issues/2792", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2792/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2792/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2792/events", "html_url": "https://github.com/ansible-community/molecule/issues/2792", "id": 682143056, "node_id": "MDU6SXNzdWU2ODIxNDMwNTY=", "number": 2792, "title": "Failed to download dependency collections: Unexpected Exception", "user": {"login": "xoxys", "id": 3391958, "node_id": "MDQ6VXNlcjMzOTE5NTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/3391958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xoxys", "html_url": "https://github.com/xoxys", "followers_url": "https://api.github.com/users/xoxys/followers", "following_url": "https://api.github.com/users/xoxys/following{/other_user}", "gists_url": "https://api.github.com/users/xoxys/gists{/gist_id}", "starred_url": "https://api.github.com/users/xoxys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xoxys/subscriptions", "organizations_url": "https://api.github.com/users/xoxys/orgs", "repos_url": "https://api.github.com/users/xoxys/repos", "events_url": "https://api.github.com/users/xoxys/events{/privacy}", "received_events_url": "https://api.github.com/users/xoxys/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-19T20:05:02Z", "updated_at": "2020-08-21T14:11:05Z", "closed_at": "2020-08-21T14:11:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.12\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.5 (default, Aug  4 2020, 04:11:56) [GCC 9.3.0]\r\nmolecule 3.0.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Actual Behaviour\r\n\r\nMolecule randomly failed due to dependency collection download:\r\n\r\n```\r\nInstalling 'community.general:1.1.0' to '/root/.cache/molecule/xoxys.postfix_relay/centos7/collections/ansible_collections/community/general'\r\nERROR! Unexpected Exception, this is probably a bug: <urlopen error [Errno -3] Try again>\r\n```\r\n\r\nSometimes it works without issues and a couple of minutes later if fails 3 times. You could see an example here: \r\nWorking: https://drone.rknet.org/ansible/xoxys.postfix_relay/39/2/2\r\nFailed: https://drone.rknet.org/ansible/xoxys.postfix_relay/40/2/2\r\n\r\nI don't really know how to debug this issue further.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2788", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2788/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2788/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2788/events", "html_url": "https://github.com/ansible-community/molecule/issues/2788", "id": 681719103, "node_id": "MDU6SXNzdWU2ODE3MTkxMDM=", "number": 2788, "title": "Tox py38-ansible28 missing pytest", "user": {"login": "rgarrigue", "id": 1872031, "node_id": "MDQ6VXNlcjE4NzIwMzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1872031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarrigue", "html_url": "https://github.com/rgarrigue", "followers_url": "https://api.github.com/users/rgarrigue/followers", "following_url": "https://api.github.com/users/rgarrigue/following{/other_user}", "gists_url": "https://api.github.com/users/rgarrigue/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarrigue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarrigue/subscriptions", "organizations_url": "https://api.github.com/users/rgarrigue/orgs", "repos_url": "https://api.github.com/users/rgarrigue/repos", "events_url": "https://api.github.com/users/rgarrigue/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarrigue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-19T10:13:48Z", "updated_at": "2020-08-20T06:54:21Z", "closed_at": "2020-08-20T06:54:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmaster branch / 33f1ec99\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- tox\r\n\r\nDetail any linters or test runners used:\r\n\r\n- Xubuntu 20.04 over Dell Precision M6700\r\n\r\n# Desired Behavior\r\n\r\nI want tox to install it however it's required for the test to run properly.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n...\r\npy38-ansible28-functional develop-inst-noop: /home/remy/personal/molecule\r\npy38-ansible28-functional installed: ansible==2.8.14,appdirs==1.4.3,CacheControl==0.12.6,certifi==2019.11.28,cffi==1.14.2,chardet==3.0.4,colorama==0.4.3,contextlib2==0.6.0,cryptography==3.0,distlib==0.3.0,distro==1.4.0,html5lib==1.0.1,idna==2.8,ipaddr==2.2.0,Jinja2==2.11.2,lockfile==0.12.2,MarkupSafe==1.1.1,molecule==3.0.8.dev2,msgpack==0.6.2,packaging==20.3,pep517==0.8.2,pkg-resources==0.0.0,progress==1.5,pycparser==2.20,pyparsing==2.4.6,pytoml==0.1.21,PyYAML==5.3.1,requests==2.22.0,retrying==1.3.3,selinux==0.2.1,six==1.14.0,urllib3==1.25.8,webencodings==0.5.1\r\npy38-ansible28-functional run-test-pre: PYTHONHASHSEED='19837123'\r\npy38-ansible28-functional run-test: commands[0] | pip check\r\nNo broken requirements found.\r\npy38-ansible28-functional run-test: commands[1] | sh -c 'PYTEST_ADDOPTS= python -m pytest -p no:cov --collect-only 2>&1 >/home/remy/personal/molecule/.tox/py38-ansible28-functional/log/collect.log'\r\n/home/remy/personal/molecule/.tox/py38-ansible28-functional/bin/python: No module named pytest\r\nERROR: InvocationError for command /usr/bin/sh -c 'PYTEST_ADDOPTS= python -m pytest -p no:cov --collect-only 2>&1 >/home/remy/personal/molecule/.tox/py38-ansible28-functional/log/collect.log' (exited with code 1)\r\npy38-ansible29-unit create: /home/remy/personal/molecule/.tox/py38-ansible29-unit\r\npy38-ansible29-unit installdeps: ansible>=2.9,<2.10, selinux\r\npy38-ansible29-unit develop-inst: /home/remy/personal/molecule\r\npy38-ansible29-unit installed: ansi2html==1.5.2,ansible==2.9.12,ansible-lint==4.3.0,apipkg==1.5,appdirs==1.4.3,arrow==0.15.8,attrs==19.3.0,bcrypt==3.2.0,binaryornot==0.4.4,CacheControl==0.12.6,Cerberus==1.3.2,certifi==2019.11.28,cffi==1.14.2,cfgv==3.2.0,chardet==3.0.4,click==7.1.2,click-completion==0.5.2,click-help-colors==0.8,colorama==0.4.3,contextlib2==0.6.0,cookiecutter==1.7.2,coverage==4.5.4,cryptography==3.0,distlib==0.3.1,distro==1.4.0,docker==4.3.0,execnet==1.7.1,fasteners==0.15,filelock==3.0.12,flake8==3.8.3,html5lib==1.0.1,identify==1.4.28,idna==2.8,ipaddr==2.2.0,Jinja2==2.11.2,jinja2-time==0.2.0,lockfile==0.12.2,MarkupSafe==1.1.1,mccabe==0.6.1,mock==3.0.5,-e git+git@github.com:ansible-community/molecule.git@33f1ec99680c0906395ae43c3c30a1e7dc0637f9#egg=molecule,monotonic==1.5,more-itertools==8.4.0,msgpack==0.6.2,nodeenv==1.4.0,ntlm-auth==1.5.0,packaging==20.3,paramiko==2.7.1,pathspec==0.8.0,pep517==0.8.2,pexpect==4.8.0,pkg-resources==0.0.0,pluggy==0.13.1,poyo==0.5.0,pre-commit==2.6.0,progress==1.5,ptyprocess==0.6.0,py==1.9.0,pycodestyle==2.6.0,pycparser==2.20,pyflakes==2.2.0,PyNaCl==1.4.0,pyparsing==2.4.6,pytest==5.4.3,pytest-cov==2.10.1,pytest-forked==1.3.0,pytest-helpers-namespace==2019.1.8,pytest-html==2.1.1,pytest-metadata==1.10.0,pytest-mock==1.13.0,pytest-plus==0.2,pytest-verbose-parametrize==1.7.0,pytest-xdist==1.34.0,python-dateutil==2.8.1,python-gilt==1.2.3,python-slugify==4.0.1,pytoml==0.1.21,pywinrm==0.4.1,PyYAML==5.3.1,requests==2.24.0,requests-ntlm==1.1.0,retrying==1.3.3,ruamel.yaml==0.16.10,ruamel.yaml.clib==0.2.0,selinux==0.2.1,sh==1.13.1,shellingham==1.3.2,six==1.14.0,tabulate==0.8.7,testinfra==5.2.2,text-unidecode==1.3,toml==0.10.1,tree-format==0.1.2,urllib3==1.25.8,virtualenv==20.0.31,wcwidth==0.2.5,webencodings==0.5.1,websocket-client==0.57.0,xmltodict==0.12.0,yamllint==1.24.2\r\npy38-ansible29-unit run-test-pre: PYTHONHASHSEED='19837123'\r\npy38-ansible29-unit run-test: commands[0] | pip check\r\nNo broken requirements found.\r\npy38-ansible29-unit run-test: commands[1] | sh -c 'PYTEST_ADDOPTS= python -m pytest -p no:cov --collect-only 2>&1 >/home/remy/personal/molecule/.tox/py38-ansible29-unit/log/collect.log'\r\npy38-ansible29-unit run-test: commands[2] | python -m pytest\r\n...\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2786", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2786/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2786/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2786/events", "html_url": "https://github.com/ansible-community/molecule/issues/2786", "id": 681699071, "node_id": "MDU6SXNzdWU2ODE2OTkwNzE=", "number": 2786, "title": "Tox's missing toml", "user": {"login": "rgarrigue", "id": 1872031, "node_id": "MDQ6VXNlcjE4NzIwMzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1872031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarrigue", "html_url": "https://github.com/rgarrigue", "followers_url": "https://api.github.com/users/rgarrigue/followers", "following_url": "https://api.github.com/users/rgarrigue/following{/other_user}", "gists_url": "https://api.github.com/users/rgarrigue/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarrigue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarrigue/subscriptions", "organizations_url": "https://api.github.com/users/rgarrigue/orgs", "repos_url": "https://api.github.com/users/rgarrigue/repos", "events_url": "https://api.github.com/users/rgarrigue/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarrigue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-19T09:41:57Z", "updated_at": "2020-08-20T10:20:10Z", "closed_at": "2020-08-20T10:20:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule details\r\n\r\n```\r\nmaster branch / 33f1ec99\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nDetail any linters or test runners used:\r\n\r\n- Xubuntu 20.04 over Dell Precision M6700\r\n\r\n# Desired Behavior\r\n\r\nI wanted to run `tox` before making a PR. \r\n\r\n# Actual Behaviour\r\n\r\n```\r\n~/personal/molecule (master \u2718)\u2739 \u1405 tox\r\n.package create: /home/remy/personal/molecule/.tox/.package\r\n.package installdeps: pip >= 19.3.1, setuptools >= 42, setuptools_scm[toml] >= 3.5.0, setuptools_scm_git_archive >= 1.1, wheel >= 0.33.6\r\nlint create: /home/remy/personal/molecule/.tox/lint\r\nlint installdeps: pre-commit>=1.18.1\r\nlint installed: appdirs==1.4.3,CacheControl==0.12.6,certifi==2019.11.28,cfgv==3.2.0,chardet==3.0.4,colorama==0.4.3,contextlib2==0.6.0,distlib==0.3.1,distro==1.4.0,filelock==3.0.12,html5lib==1.0.1,identify==1.4.28,idna==2.8,ipaddr==2.2.0,lockfile==0.12.2,molecule==3.0.8.dev2,msgpack==0.6.2,nodeenv==1.4.0,packaging==20.3,pep517==0.8.2,pkg-resources==0.0.0,pre-commit==2.6.0,progress==1.5,pyparsing==2.4.6,pytoml==0.1.21,PyYAML==5.3.1,requests==2.22.0,retrying==1.3.3,six==1.14.0,toml==0.10.1,urllib3==1.25.8,virtualenv==20.0.31,webencodings==0.5.1\r\nlint run-test-pre: PYTHONHASHSEED='4162847199'\r\nlint run-test: commands[0] | python -m pre_commit run --all\r\n[INFO] Initializing environment for https://github.com/pre-commit/mirrors-isort.\r\n[INFO] Initializing environment for https://github.com/python/black.git.\r\n[INFO] Initializing environment for https://github.com/pre-commit/pre-commit-hooks.git.\r\n[INFO] Initializing environment for https://gitlab.com/pycqa/flake8.git.\r\n[INFO] Initializing environment for https://gitlab.com/pycqa/flake8.git:flake8-absolute-import,flake8-black>=0.1.1,flake8-docstrings>=1.5.0.\r\n[INFO] Initializing environment for https://github.com/adrienverge/yamllint.git.\r\n[INFO] Initializing environment for https://github.com/pre-commit/mirrors-mypy.\r\n[INFO] Initializing environment for https://github.com/pre-commit/mirrors-mypy:packaging.\r\n[INFO] Installing environment for https://github.com/pre-commit/mirrors-isort.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://github.com/python/black.git.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://github.com/pre-commit/pre-commit-hooks.git.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://github.com/pre-commit/pre-commit-hooks.git.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://gitlab.com/pycqa/flake8.git.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://github.com/adrienverge/yamllint.git.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://github.com/pre-commit/mirrors-mypy.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\nisort....................................................................Passed\r\nblack....................................................................Passed\r\nFix End of Files.........................................................Passed\r\nTrim Trailing Whitespace.................................................Passed\r\nMixed line ending........................................................Passed\r\nCheck for byte-order marker..............................................Passed\r\nCheck that executables have shebangs.....................................Passed\r\nCheck for merge conflicts................................................Passed\r\nDebug Statements (Python)................................................Passed\r\nflake8...................................................................Passed\r\nyamllint.................................................................Passed\r\nmypy.....................................................................Passed\r\ndocs create: /home/remy/personal/molecule/.tox/docs\r\ndocs installdeps: selinux\r\ndocs inst: /home/remy/personal/molecule/.tox/.tmp/package/1/molecule-3.0.8.dev2.tar.gz\r\ndocs installed: alabaster==0.7.12,ansible==2.9.12,appdirs==1.4.3,arrow==0.15.8,Babel==2.8.0,bcrypt==3.2.0,binaryornot==0.4.4,CacheControl==0.12.6,Cerberus==1.3.2,certifi==2019.11.28,cffi==1.14.2,chardet==3.0.4,click==7.1.2,click-completion==0.5.2,click-help-colors==0.8,colorama==0.4.3,contextlib2==0.6.0,cookiecutter==1.7.2,cryptography==3.0,distlib==0.3.0,distro==1.4.0,docutils==0.16,fasteners==0.15,html5lib==1.0.1,idna==2.8,imagesize==1.2.0,ipaddr==2.2.0,Jinja2==2.11.2,jinja2-time==0.2.0,lockfile==0.12.2,MarkupSafe==1.1.1,molecule==3.0.8.dev2,monotonic==1.5,msgpack==0.6.2,packaging==20.3,paramiko==2.7.1,pathspec==0.8.0,pep517==0.8.2,pexpect==4.8.0,pkg-resources==0.0.0,pluggy==0.13.1,poyo==0.5.0,progress==1.5,ptyprocess==0.6.0,pycparser==2.20,Pygments==2.6.1,PyNaCl==1.4.0,pyparsing==2.4.6,python-dateutil==2.8.1,python-gilt==1.2.3,python-slugify==4.0.1,pytoml==0.1.21,pytz==2020.1,PyYAML==5.3.1,requests==2.24.0,retrying==1.3.3,selinux==0.2.1,sh==1.13.1,shellingham==1.3.2,simplejson==3.17.2,six==1.14.0,snowballstemmer==2.0.0,Sphinx==3.2.1,sphinx-ansible-theme==0.3.2,sphinx-notfound-page==0.5,sphinx-rtd-theme==0.5.0,sphinxcontrib-applehelp==1.0.2,sphinxcontrib-devhelp==1.0.2,sphinxcontrib-htmlhelp==1.0.3,sphinxcontrib-jsmath==1.0.1,sphinxcontrib-qthelp==1.0.3,sphinxcontrib-serializinghtml==1.1.4,tabulate==0.8.7,text-unidecode==1.3,tree-format==0.1.2,urllib3==1.25.8,webencodings==0.5.1,yamllint==1.24.2\r\ndocs run-test-pre: PYTHONHASHSEED='4162847199'\r\ndocs run-test: commands[0] | python -m sphinx -a -n -W -b html --color -d /home/remy/personal/molecule/docs/docstree docs/ /home/remy/personal/molecule/docs/docstree/html\r\nSphinx v3.2.1 en cours d'ex\u00e9cution\r\n/home/remy/personal/molecule/.tox/docs/lib/python3.8/site-packages/sphinx_ansible_theme/ext/pygments_lexer.py:228: RemovedInSphinx40Warning: app.add_lexer() API changed; Please give lexer class instead instance\r\n  app.add_lexer(lexer.name, lexer)\r\n/home/remy/personal/molecule/.tox/docs/lib/python3.8/site-packages/sphinx_ansible_theme/ext/pygments_lexer.py:230: RemovedInSphinx40Warning: app.add_lexer() API changed; Please give lexer class instead instance\r\n  app.add_lexer(alias, lexer)\r\ncr\u00e9ation du r\u00e9pertoire de sortie... fait\r\nchargement de l'inventaire intersphinx de https://docs.python.org/3/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.python.org/3/objects.inv...\r\nchargement de l'inventaire intersphinx de http://jinja.palletsprojects.com/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/2.9/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/2.8/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/2.7/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/2.6/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/2.5/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/latest/objects.inv...\r\nchargement de l'inventaire intersphinx de https://pip.pypa.io/en/latest/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.python.org/2/objects.inv...\r\nchargement de l'inventaire intersphinx de https://testinfra.readthedocs.io/en/latest/objects.inv...\r\nl\u2019inventaire intersphinx a boug\u00e9 : http://jinja.palletsprojects.com/objects.inv -> https://jinja.palletsprojects.com/en/2.11.x/objects.inv\r\nchargement de l'inventaire intersphinx de http://yamllint.readthedocs.io/en/latest/objects.inv...\r\nchargement de l'inventaire intersphinx de https://virtualenv.pypa.io/en/latest/objects.inv...\r\nl\u2019inventaire intersphinx a boug\u00e9 : http://yamllint.readthedocs.io/en/latest/objects.inv -> https://yamllint.readthedocs.io/en/latest/objects.inv\r\nconstruction en cours [mo]:tout les 0 fichiers po\r\nconstruction [html]:tous les fichiers source\r\nmise-\u00e0-jour de l'environnement :[nouvelle configuration] 9 ajout\u00e9, 0 modifi\u00e9, 0 supprim\u00e9\r\nlecture des sources... [100%] usage                                                                                                                                                                                                                                                                                                                                                                                                         \r\nrecherche des fichiers p\u00e9rim\u00e9s... aucun r\u00e9sultat\r\nenvironnement de s\u00e9rialisation... fait\r\nv\u00e9rification de la coh\u00e9rence... fait\r\ndocument en pr\u00e9paration... fait\r\n\u00e9criture... [100%] usage                                                                                                                                                                                                                                                                                                                                                                                                                    \r\ngenerating indices...  genindexfait\r\nwriting additional pages...  searchfait\r\ncopie des fichiers statiques... ... fait\r\ncopying extra files... fait\r\ndumping search index in English (code: en)... fait\r\ndumping object inventory... fait\r\nla compilation a r\u00e9ussi.\r\n\r\nLes pages HTML sont dans docs/docstree/html .\r\ndocs run-test: commands[1] | python -c 'import pathlib; docs_dir = pathlib.Path(r\"/home/remy/personal/molecule\") / \"docs/docstree/html\"; index_file = docs_dir / \"index.html\"; print(f\"\\nDocumentation available under `file://{index_file}`\\n\\nTo serve docs, use `python3 -m http.server --directory {docs_dir} 0`\\n\")'\r\n\r\nDocumentation available under `file:///home/remy/personal/molecule/docs/docstree/html/index.html`\r\n\r\nTo serve docs, use `python3 -m http.server --directory /home/remy/personal/molecule/docs/docstree/html 0`\r\n\r\npackaging create: /home/remy/personal/molecule/.tox/packaging\r\npackaging installdeps: collective.checkdocs==0.2, pep517 >= 0.5.0, twine==1.14.0\r\npackaging installed: appdirs==1.4.3,bleach==3.1.5,CacheControl==0.12.6,certifi==2019.11.28,chardet==3.0.4,collective.checkdocs==0.2,colorama==0.4.3,contextlib2==0.6.0,distlib==0.3.0,distro==1.4.0,docutils==0.16,html5lib==1.0.1,idna==2.8,ipaddr==2.2.0,lockfile==0.12.2,molecule==3.0.8.dev2,msgpack==0.6.2,packaging==20.3,pep517==0.8.2,pkg-resources==0.0.0,pkginfo==1.5.0.1,progress==1.5,Pygments==2.6.1,pyparsing==2.4.6,pytoml==0.1.21,readme-renderer==26.0,requests==2.22.0,requests-toolbelt==0.9.1,retrying==1.3.3,six==1.14.0,tqdm==4.48.2,twine==1.14.0,urllib3==1.25.8,webencodings==0.5.1\r\npackaging run-test-pre: PYTHONHASHSEED='4162847199'\r\npackaging run-test: commands[0] | rm -rfv /home/remy/personal/molecule/dist/\r\npackaging run-test: commands[1] | python -m pep517.build --source --binary --out-dir /home/remy/personal/molecule/dist/ /home/remy/personal/molecule\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/runpy.py\", line 193, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/usr/lib/python3.8/runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/remy/personal/molecule/.tox/packaging/lib/python3.8/site-packages/pep517/build.py\", line 6, in <module>\r\n    import toml\r\nModuleNotFoundError: No module named 'toml'\r\nERROR: InvocationError for command /home/remy/personal/molecule/.tox/packaging/bin/python -m pep517.build --source --binary --out-dir /home/remy/personal/molecule/dist/ . (exited with code 1)\r\n...\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2785", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2785/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2785/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2785/events", "html_url": "https://github.com/ansible-community/molecule/issues/2785", "id": 681678445, "node_id": "MDU6SXNzdWU2ODE2Nzg0NDU=", "number": 2785, "title": "Remove \"Specify 'mode'\" warning at Dockerfile image creation", "user": {"login": "rgarrigue", "id": 1872031, "node_id": "MDQ6VXNlcjE4NzIwMzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1872031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarrigue", "html_url": "https://github.com/rgarrigue", "followers_url": "https://api.github.com/users/rgarrigue/followers", "following_url": "https://api.github.com/users/rgarrigue/following{/other_user}", "gists_url": "https://api.github.com/users/rgarrigue/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarrigue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarrigue/subscriptions", "organizations_url": "https://api.github.com/users/rgarrigue/orgs", "repos_url": "https://api.github.com/users/rgarrigue/repos", "events_url": "https://api.github.com/users/rgarrigue/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarrigue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-19T09:11:34Z", "updated_at": "2020-08-19T15:26:54Z", "closed_at": "2020-08-19T15:26:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```molecule installed: \r\nansible==2.9.12,\r\nansible-lint==4.3.0,appdirs==1.4.3,arrow==0.15.8,attrs==19.3.0,bcrypt==3.2.0,binaryornot==0.4.4,CacheControl==0.12.6,Cerberus==1.3.2,certifi==2019.11.28,cffi==1.14.2,chardet==3.0.4,click==7.1.2,click-completion==0.5.2,click-help-colors==0.8,colorama==0.4.3,contextlib2==0.6.0,cookiecutter==1.7.2,cryptography==3.0,distlib==0.3.0,distro==1.4.0,docker==4.3.0,fasteners==0.15,flake8==3.8.3,html5lib==1.0.1,idna==2.8,iniconfig==1.0.1,ipaddr==2.2.0,Jinja2==2.11.2,jinja2-time==0.2.0,lockfile==0.12.2,MarkupSafe==1.1.1,mccabe==0.6.1,\r\nmolecule==3.0.3,\r\nmolecule-vagrant==0.3,monotonic==1.5,more-itertools==8.4.0,msgpack==0.6.2,netaddr==0.8.0,packaging==20.3,paramiko==2.7.1,pathspec==0.8.0,pep517==0.8.2,pexpect==4.8.0,pluggy==0.13.1,poyo==0.5.0,progress==1.5,ptyprocess==0.6.0,py==1.9.0,pycodestyle==2.6.0,pycparser==2.20,pyflakes==2.2.0,PyNaCl==1.4.0,pyparsing==2.4.6,pytest==6.0.1,python-dateutil==2.8.1,python-gilt==1.2.3,python-slugify==4.0.1,python-vagrant==0.5.15,pytoml==0.1.21,PyYAML==5.3.1,requests==2.22.0,retrying==1.3.3,ruamel.yaml==0.16.10,ruamel.yaml.clib==0.2.0,selinux==0.2.1,sh==1.13.1,shellingham==1.3.2,six==1.14.0,tabulate==0.8.7,testinfra==5.2.2,text-unidecode==1.3,toml==0.10.1,tree-format==0.1.2,urllib3==1.25.8,webencodings==0.5.1,websocket-client==0.57.0,yamllint==1.24.2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nOne less warning. \r\n\r\n# Actual Behaviour\r\n\r\n```\r\n...\r\n    TASK [Create Dockerfiles from image names] *************************************\r\n    changed: [localhost] => (item={'command': '/lib/systemd/systemd', 'groups': ['molecule_consul_service'], 'image': 'jrei/systemd-debian:10', 'name': 'molecule-consul-service-debian10', 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:ro']})\r\n[WARNING]: File '/home/remy/.cache/molecule/ansible-role-consul-\r\nservice/default/Dockerfile_jrei_systemd_debian_10' created with default\r\npermissions '600'. The previous default was '666'. Specify 'mode' to avoid this\r\nwarning.\r\n...\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2782", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2782/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2782/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2782/events", "html_url": "https://github.com/ansible-community/molecule/issues/2782", "id": 681138111, "node_id": "MDU6SXNzdWU2ODExMzgxMTE=", "number": 2782, "title": "tox tests fail on clean checkout", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-08-18T15:34:47Z", "updated_at": "2020-08-20T06:52:12Z", "closed_at": "2020-08-20T06:52:12Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\ngit master branch\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n\r\nDetail any linters or test runners used:\r\n\r\ntox -e py38-ansible29-functional\r\n\r\n# Desired Behavior\r\n\r\nTests should all pass\r\n\r\n# Actual Behaviour\r\n\r\nSome of the tests fail because they are incorrectly creating OpenStack based scenarios instead of docker/podman based scenarios.\r\n\r\n```\r\n========================= 4 failed, 33 passed, 2 skipped, 33 deselected in 938.37s (0:15:38) =========================\r\nERROR: InvocationError for command /home/ghelling/src/molecule/.tox/py38-ansible29-functional/bin/python -m pytest (exited with code 1)\r\n```\r\n\r\nSpecifically these tests are failing:\r\ntest_command_init_role[docker]\r\ntest_command_init_role[podman]\r\ntest_command_init_scenario[docker]\r\ntest_command_init_scenario[podman]\r\n\r\nThey are all failing with output similar to this:\r\n\r\n```\r\n------------------------------------------------ Captured stdout call ------------------------------------------------\r\n    --> Initializing new role test-init...\r\n    Initialized role in /tmp/pytest-of-ghelling/pytest-0/test_command_init_scenario_pod0/XOCKT/test-init successfully.\r\n    \r\n    --> Initializing new scenario test-scenario...\r\n    Initialized scenario in /tmp/pytest-of-ghelling/pytest-0/test_command_init_scenario_pod0/XOCKT/test-init/molecule/test-scenario successfully.\r\n    \r\n    ---\r\n    driver:\r\n      name: openstack\r\n    platforms:\r\n      - name: test-test-init\r\n    \r\n    \r\n------------------------------------------------ Captured stderr call ------------------------------------------------\r\nERROR: Failed to pre-validate.\r\n\r\n{'driver': [{'name': ['unallowed value openstack']}]}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2781", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2781/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2781/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2781/events", "html_url": "https://github.com/ansible-community/molecule/issues/2781", "id": 680542612, "node_id": "MDU6SXNzdWU2ODA1NDI2MTI=", "number": 2781, "title": "yamllint is not found when running 'lint' target as of Molecule 3.0.7", "user": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-08-17T21:40:47Z", "updated_at": "2020-08-19T07:00:36Z", "closed_at": "2020-08-19T07:00:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nAnsible 2.9.12\r\nMolecule 3.0.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nyamllint and ansible-lint, test is run in Travis CI environment\r\n\r\n# Desired Behavior\r\n\r\nLinters should run without issue.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing: set -e\r\nyamllint .\r\nansible-lint\r\n/bin/sh: 2: yamllint: not found\r\nERROR: Lint failed: Command 'set -e\r\nyamllint .\r\nansible-lint\r\n' returned non-zero exit status 127.: Command 'set -e\r\nyamllint .\r\nansible-lint\r\n' returned non-zero exit status 127.\r\n```\r\n\r\nSee failed build: https://travis-ci.org/github/geerlingguy/ansible-role-clamav/jobs/718754330#L470\r\n\r\nIt looks like this bug was introduced in the 3.0.7 release. If I `pip install molecule===3.0.6` the problem goes away.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2763", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2763/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2763/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2763/events", "html_url": "https://github.com/ansible-community/molecule/issues/2763", "id": 666445620, "node_id": "MDU6SXNzdWU2NjY0NDU2MjA=", "number": 2763, "title": "Idempotency on --debug doesn't help much", "user": {"login": "Yajo", "id": 973709, "node_id": "MDQ6VXNlcjk3MzcwOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/973709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yajo", "html_url": "https://github.com/Yajo", "followers_url": "https://api.github.com/users/Yajo/followers", "following_url": "https://api.github.com/users/Yajo/following{/other_user}", "gists_url": "https://api.github.com/users/Yajo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yajo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yajo/subscriptions", "organizations_url": "https://api.github.com/users/Yajo/orgs", "repos_url": "https://api.github.com/users/Yajo/repos", "events_url": "https://api.github.com/users/Yajo/events{/privacy}", "received_events_url": "https://api.github.com/users/Yajo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-27T17:03:05Z", "updated_at": "2020-08-01T14:55:56Z", "closed_at": "2020-07-28T07:41:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.9\r\n  config file = /var/home/yajo/mydevel/mando/ansible.cfg\r\n  configured module search path = ['/var/home/yajo/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /var/home/yajo/mydevel/mando/.venv/lib64/python3.8/site-packages/ansible\r\n  executable location = /var/home/yajo/mydevel/mando/.venv/bin/ansible\r\n  python version = 3.8.3 (default, May 29 2020, 00:00:00) [GCC 10.1.1 20200507 (Red Hat 10.1.1-1)]\r\nmolecule 3.0.4\r\n   ansible==2.9.9 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen idempotency fails with `--debug`, it should display the full log of the failed tasks.\r\n\r\n# Actual Behaviour\r\n\r\nI have some idempotency failure, but this is what `molecule --debug test --all` prints:\r\n\r\n```\r\nERROR: Idempotence test failed because of the following tasks:\r\n* [basic] => base : start traefik container\r\n* [basic] => nextcloud : start nextcloud container\r\n```\r\n\r\nNot much helpful to debug...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2761", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2761/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2761/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2761/events", "html_url": "https://github.com/ansible-community/molecule/issues/2761", "id": 664593369, "node_id": "MDU6SXNzdWU2NjQ1OTMzNjk=", "number": 2761, "title": "Molecule can't access group_vars/all/ and other global information", "user": {"login": "AquaL1te", "id": 6113099, "node_id": "MDQ6VXNlcjYxMTMwOTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/6113099?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AquaL1te", "html_url": "https://github.com/AquaL1te", "followers_url": "https://api.github.com/users/AquaL1te/followers", "following_url": "https://api.github.com/users/AquaL1te/following{/other_user}", "gists_url": "https://api.github.com/users/AquaL1te/gists{/gist_id}", "starred_url": "https://api.github.com/users/AquaL1te/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AquaL1te/subscriptions", "organizations_url": "https://api.github.com/users/AquaL1te/orgs", "repos_url": "https://api.github.com/users/AquaL1te/repos", "events_url": "https://api.github.com/users/AquaL1te/events{/privacy}", "received_events_url": "https://api.github.com/users/AquaL1te/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-23T15:57:46Z", "updated_at": "2020-07-23T16:00:48Z", "closed_at": "2020-07-23T16:00:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.10\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.3 (default, May 29 2020, 00:00:00) [GCC 10.1.1 20200507 (Red Hat 10.1.1-1)]\r\nmolecule 3.0.4\r\n   ansible==2.9.10 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- OS package: python3-molecule-3.0.4-1.fc32.noarch\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package: ansible-2.9.10-1.fc32.noarch\r\n\r\n# Desired Behavior\r\n\r\nBelow is a snippet of my Ansible directory structure:\r\n```\r\n.\r\n\u251c\u2500\u2500 ansible.cfg\r\n\u251c\u2500\u2500 group_vars\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 all\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 main.yml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 vault_crypto.yml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vault_password.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 researchproject.yml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 workstation.yml\r\n\u251c\u2500\u2500 hosts.cfg\r\n\u251c\u2500\u2500 host_vars\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 rp1.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 rp2.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 rp3.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ws1.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ws2.yml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 ws3.yml\r\n\u251c\u2500\u2500 lookup_plugins\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 neo.py\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 __pycache__\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 neo.cpython-38.pyc\r\n\u251c\u2500\u2500 molecule\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 default\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 converge.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 verify.yml\r\n\u251c\u2500\u2500 README.md\r\n\u251c\u2500\u2500 roles\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 git\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 tasks\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vars\r\n\u251c\u2500\u2500 site.yml\r\n\u251c\u2500\u2500 todo.txt\r\n\u2514\u2500\u2500 vault-pass\r\n\r\n77 directories, 22 files\r\n```\r\n\r\nWhich won't allow me to initiate role tests with Molecule from a central location, i.e. from the Ansible playbook root directory. I need to configure Molecule in each role, e.g. `roles/git/`. And when I do, I cannot access my `lookup_plugins/neo.py` or `group_vars/all/` directory containing global variables. Which my roles depend on. Therefore, I need to copy variables and files into all my roles/ in order to make them work. I find it hard to believe that this is intended by design, because it's a best practice to not repeat yourself. Managing multiple identical var files, and keep them in sync, is not sufficient. It would also be strange if `group_vars/all/` is something that's unsupported by Molecule. I believe it's a convenient way to manage global vars.\r\n\r\nWould it be possible to run a playbook in Molecule, the same as I would with `ansible-playbook`? And thus not limited to single roles which don't access e.g. `group_vars/all/`? **Or**, make a single role access the `group_vars/all/` and `lookup_plugins` directories, such that they don't run into missing information. That last one would of course already solve the whole situation. Because the core problem is that my roles depend on this globally available information, which i don't want to duplicate, unless there is a really good reason for that.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2757", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2757/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2757/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2757/events", "html_url": "https://github.com/ansible-community/molecule/issues/2757", "id": 662300510, "node_id": "MDU6SXNzdWU2NjIzMDA1MTA=", "number": 2757, "title": "Can't install Molecule with latest Ansible devel releases (2.11)", "user": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 864009245, "node_id": "MDU6TGFiZWw4NjQwMDkyNDU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/upstream-bug", "name": "upstream-bug", "color": "960a21", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-20T21:50:50Z", "updated_at": "2020-08-19T07:39:49Z", "closed_at": "2020-08-19T07:39:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible-base-2.11.0.dev0\r\n\r\n$ molecule --version\r\n3.0.6\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n```\r\npip install molecule\r\n```\r\n\r\nAnsible installation method (one of):\r\n\r\n```\r\npip uninstall -y ansible\r\npip install https://github.com/ansible/ansible/archive/devel.tar.gz --disable-pip-version-check\r\n```\r\n\r\n# Desired Behavior\r\n\r\nMolecule should be able to run with Ansible installed from devel.\r\n\r\n# Actual Behaviour\r\n\r\nMolecule seems to be failing with:\r\n\r\n```\r\npkg_resources.DistributionNotFound: The 'ansible' distribution was not found and is required by the application\r\n```\r\n\r\nThe problem here is that if I install Ansible at devel first, then install Molecule via pip, Ansible 2.9.10 is installed on top of the ansible-base devel install, and that breaks Ansible too.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2751", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2751/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2751/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2751/events", "html_url": "https://github.com/ansible-community/molecule/issues/2751", "id": 658276718, "node_id": "MDU6SXNzdWU2NTgyNzY3MTg=", "number": 2751, "title": "Add Podman support from official image.", "user": {"login": "kuzm1ch", "id": 32264674, "node_id": "MDQ6VXNlcjMyMjY0Njc0", "avatar_url": "https://avatars2.githubusercontent.com/u/32264674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kuzm1ch", "html_url": "https://github.com/kuzm1ch", "followers_url": "https://api.github.com/users/kuzm1ch/followers", "following_url": "https://api.github.com/users/kuzm1ch/following{/other_user}", "gists_url": "https://api.github.com/users/kuzm1ch/gists{/gist_id}", "starred_url": "https://api.github.com/users/kuzm1ch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kuzm1ch/subscriptions", "organizations_url": "https://api.github.com/users/kuzm1ch/orgs", "repos_url": "https://api.github.com/users/kuzm1ch/repos", "events_url": "https://api.github.com/users/kuzm1ch/events{/privacy}", "received_events_url": "https://api.github.com/users/kuzm1ch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}, {"id": 1439131192, "node_id": "MDU6TGFiZWwxNDM5MTMxMTky", "url": "https://api.github.com/repos/ansible-community/molecule/labels/podman", "name": "podman", "color": "23637f", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-16T14:55:52Z", "updated_at": "2020-07-20T07:46:07Z", "closed_at": "2020-07-19T10:05:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Feature request\r\n\r\n\r\nA lot of platforms like Openshift 4.x are not allowed to run docker:dind for now as they use another [container runtimes]( https://kubernetes.io/docs/setup/production-environment/container-runtimes/). CRI-O is used as a container engine in the case of OCP.\r\n\r\nThat's why podman should be a part of a container image for a better user experience.\r\nI was playing around of adding podman with these few lines to the final image in Dockerfile: \r\n```\r\nRUN echo \"http://dl-cdn.alpinelinux.org/alpine/edge/testing\" >> /etc/apk/repositories\r\nRUN apk add --update --no-cache podman\r\n```\r\n\r\nError received on OCP platform(container is run as a privileged one):\r\n```\r\n $ podman info\r\n host:\r\n   arch: amd64\r\n   buildahVersion: 1.15.0\r\n   cgroupVersion: v1\r\n   conmon:\r\n     package: Unknown\r\n     path: /usr/bin/conmon\r\n     version: 'conmon version 2.0.18, commit: 3d0712a385a019fe09d86ad207cdd27cf14f8f07'\r\n   cpus: *\r\n   distribution:\r\n     distribution: alpine\r\n     version: 3.13.0_alpha20200626\r\n   eventLogger: file\r\n   hostname: *****\r\n   idMappings:\r\n     gidmap: null\r\n     uidmap: null\r\n   kernel: 4.18.0-147.20.1.el8_1.x86_64\r\n   linkmode: dynamic\r\n   memFree: 5871435776\r\n   memTotal: 16815345664\r\n   ociRuntime:\r\n     name: runc\r\n     package: Unknown\r\n     path: /usr/bin/runc\r\n     version: |-\r\n       runc version 1.0.0-rc91\r\n       commit: 24a3cf88a7ae5f4995f6750654c0e2ca61ef4bb2\r\n       spec: 1.0.2-dev\r\n   os: linux\r\n   remoteSocket:\r\n     path: /run/podman/podman.sock\r\n   rootless: false\r\n   slirp4netns:\r\n     executable: \"\"\r\n     package: \"\"\r\n     version: \"\"\r\n   swapFree: 0\r\n   swapTotal: 0\r\n   uptime: 167h 8m 29.95s (Approximately 6.96 days)\r\n registries: {}\r\n store:\r\n   configFile: /etc/containers/storage.conf\r\n   containerStore:\r\n     number: 0\r\n     paused: 0\r\n     running: 0\r\n     stopped: 0\r\n   graphDriverName: vfs\r\n   graphOptions: {}\r\n   graphRoot: /var/lib/containers/storage\r\n   graphStatus: {}\r\n   imageStore:\r\n     number: 0\r\n   runRoot: /var/run/containers/storage\r\n   volumePath: /var/lib/containers/storage/volumes\r\n version:\r\n   APIVersion: 1\r\n   Built: 1594250177\r\n   BuiltTime: Wed Jul  8 23:16:17 2020\r\n   GitCommit: a7bddfae635f6922a1795c78b1674d39be0a71b3\r\n   GoVersion: go1.14.4\r\n   OsArch: linux/amd64\r\n   Version: 2.0.2\r\n $ podman run -it ****  /bin/sh\r\n Trying to pull    *****...\r\n Getting image source signatures\r\n Copying blob sha256:***\r\n Copying blob sha256:***\r\n Copying config sha256:***\r\n Writing manifest to image destination\r\n Storing signatures\r\n time=\"2020-07-16T08:55:33Z\" level=error msg=\"Error adding network: failed to list chains: running [/sbin/iptables -t nat -S --wait]: exit status 3: modprobe: can't change directory to '/lib/modules': No such file or directory\\niptables v1.8.5 (legacy): can't initialize iptables table `nat': Table does not exist (do you need to insmod?)\\nPerhaps iptables or your kernel needs to be upgraded.\\n\"\r\n time=\"2020-07-16T08:55:33Z\" level=error msg=\"Error while adding pod to CNI network \\\"podman\\\": failed to list chains: running [/sbin/iptables -t nat -S --wait]: exit status 3: modprobe: can't change directory to '/lib/modules': No such file or directory\\niptables v1.8.5 (legacy): can't initialize iptables table `nat': Table does not exist (do you need to insmod?)\\nPerhaps iptables or your kernel needs to be upgraded.\\n\"\r\n Error: error configuring network namespace for container d2bfc9ebcf618955ccccccd11e111195c944e5ae152b47c986eede30a065975: failed to list chains: running [/sbin/iptables -t nat -S --wait]: exit status 3: modprobe: can't change directory to '/lib/modules': No such file or directory\r\n iptables v1.8.5 (legacy): can't initialize iptables table `nat': Table does not exist (do you need to insmod?)\r\n Perhaps iptables or your kernel needs to be upgraded.\r\n```\r\n\r\n Platform is not blamed in this case a my custom Dockerfile which is based on podman image works fine:\r\n```\r\nFROM quay.io/podman/stable:v1.9.1\r\n\r\nRUN yum install -y \\\r\n    gcc \\\r\n    git \\\r\n    python3-pip \\\r\n    python3-devel \\\r\n    openssl-devel \\\r\n    python3-libselinux\r\n\r\nRUN python3 -m pip install --upgrade --user setuptools\r\n\r\nRUN python3 -m pip install \\\r\n    molecule \\\r\n    ansible-lint \\\r\n    ansible \\\r\n    yamllint \\\r\n    podman\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2743", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2743/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2743/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2743/events", "html_url": "https://github.com/ansible-community/molecule/issues/2743", "id": 653893124, "node_id": "MDU6SXNzdWU2NTM4OTMxMjQ=", "number": 2743, "title": "Patch-level breaking changes", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-09T09:01:36Z", "updated_at": "2020-07-24T16:30:05Z", "closed_at": "2020-07-19T10:13:12Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.10\r\nmolecule 3.0.5\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nPatch version updates should not be incompatible with other releases in the minor release stream.\r\n\r\nError message:\r\n\r\n```\r\n  msg: 'Unexpected templating type error occurred on ({{ molecule_yml.platforms | molecule_get_docker_networks }}): get_docker_networks() missing 1 required positional argument: ''state'''\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n0ed6809e196e97b4906549209fb25ca5b3f1bab2 introduce a breaking change to Molecule with the 3.0.5 release. Previous playbooks which ran fine against 3.0.4 now failed while provisioning their Docker target. Since there does not appear to be any way that the Ansible default provision/destroy code is deployed with Molecule in a manner that allows it to be updated in the future, this represents a problem. New scenarios will, obviously, get the new version of the create.yml but existing changes will not.\r\n\r\nPlease, either do not introduce changes that break the code, or move to a model of distributing the default create/destroy code as a role or collection that can be updated when Molecule is updated.\r\n\r\nFor our project, we have moved the provisioning of resources with Molecule into a collection and then just rely on that collection and role so that when changes like this come along our code is successful. You can find our collection's role, here: https://github.com/oasis-roles/ansible_collection_system/tree/master/roles/molecule_docker_ci and see it in use in various scenarios throughout the collection.\r\n\r\nThis particular bug was fixed by https://github.com/oasis-roles/ansible_collection_system/commit/7bc3d63a023c7f7fee21e880b0245d865da5e7f9 derived from the molecule changeset that introduced the break.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2734", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2734/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2734/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2734/events", "html_url": "https://github.com/ansible-community/molecule/issues/2734", "id": 645755365, "node_id": "MDU6SXNzdWU2NDU3NTUzNjU=", "number": 2734, "title": "Docker Image 3.0.4: Alpine Linux Removed Python Symlink", "user": {"login": "daurrutia", "id": 13512616, "node_id": "MDQ6VXNlcjEzNTEyNjE2", "avatar_url": "https://avatars3.githubusercontent.com/u/13512616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daurrutia", "html_url": "https://github.com/daurrutia", "followers_url": "https://api.github.com/users/daurrutia/followers", "following_url": "https://api.github.com/users/daurrutia/following{/other_user}", "gists_url": "https://api.github.com/users/daurrutia/gists{/gist_id}", "starred_url": "https://api.github.com/users/daurrutia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daurrutia/subscriptions", "organizations_url": "https://api.github.com/users/daurrutia/orgs", "repos_url": "https://api.github.com/users/daurrutia/repos", "events_url": "https://api.github.com/users/daurrutia/events{/privacy}", "received_events_url": "https://api.github.com/users/daurrutia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-25T18:08:43Z", "updated_at": "2020-07-19T10:14:47Z", "closed_at": "2020-07-19T10:14:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\nAlpine Linux seems to have deprecated the use of the `python` command. The command specifying the version seems to be required now (e.g., `python3`). \r\n\r\nThis may cause issues for the recent Molecule docker images.\r\n\r\nRelated:\r\n- https://github.com/docker-library/docker/issues/240\r\n- https://stackoverflow.com/questions/62169568/docker-alpine-linux-python-missing\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.10\r\n  config file = None\r\n  configured module search path = [u'/home/ec2-user/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ec2-user/project0/env/lib/python2.7/site-packages/ansible\r\n  executable location = /home/ec2-user/project0/env/bin/ansible\r\n  python version = 2.7.16 (default, Dec 12 2019, 23:58:22) [GCC 7.3.1 20180712 (Red Hat 7.3.1-6)]\r\nmolecule 3.0.2.1\r\n   ansible==2.9.10 python==2.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nMolecule creates the molecule:3.0.4 docker image successfully\r\n\r\n# Actual Behaviour\r\n\r\n```\r\nUsing module file /home/ec2-user/project0/env/lib/python2.7/site-packages/ansible/modules/cloud/docker/docker_image.py\r\n    Pipelining is enabled.\r\n    <127.0.0.1> EXEC /bin/sh -c '/home/ec2-user/project0/env/bin/python && sleep 0'\r\n    failed: [localhost] (item=molecule_local/quay.io/ansible/molecule:3.0.4) => {\r\n        \"ansible_loop_var\": \"item\", \r\n        \"attempts\": 3, \r\n        \"changed\": false, \r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"api_version\": \"auto\", \r\n                \"archive_path\": null, \r\n                \"build\": {\r\n                    \"args\": null, \r\n                    \"cache_from\": null, \r\n                    \"container_limits\": null, \r\n                    \"dockerfile\": \"/home/ec2-user/.cache/molecule/mymoleculerole/default/Dockerfile_quay_io_ansible_molecule_3_0_4\",\r\n                    \"etc_hosts\": null, \r\n                    \"http_timeout\": null, \r\n                    \"network\": null, \r\n                    \"nocache\": false, \r\n                    \"path\": \"/home/ec2-user/.cache/molecule/mymoleculerole/default\", \r\n                    \"pull\": true, \r\n                    \"rm\": true, \r\n                    \"target\": null, \r\n                    \"use_config_proxy\": null\r\n                }, \r\n                \"buildargs\": null, \r\n                \"ca_cert\": null, \r\n                \"client_cert\": null, \r\n                \"client_key\": null, \r\n                \"container_limits\": null, \r\n                \"debug\": false, \r\n                \"docker_host\": \"unix://var/run/docker.sock\", \r\n                \"dockerfile\": null, \r\n                \"force\": null, \r\n                \"force_absent\": false, \r\n                \"force_source\": true, \r\n                \"force_tag\": false, \r\n                \"http_timeout\": null, \r\n                \"load_path\": null, \r\n                \"name\": \"molecule_local/quay.io/ansible/molecule:3.0.4\", \r\n                \"nocache\": false, \r\n                \"path\": null, \r\n                \"pull\": null, \r\n                \"push\": false, \r\n                \"repository\": null, \r\n                \"rm\": true, \r\n                \"source\": \"build\", \r\n                \"ssl_version\": null, \r\n                \"state\": \"present\", \r\n                \"tag\": \"latest\", \r\n                \"timeout\": 60, \r\n                \"tls\": false, \r\n                \"tls_hostname\": \"localhost\", \r\n                \"tls_verify\": false, \r\n                \"use_tls\": null, \r\n                \"validate_certs\": false\r\n            }\r\n        }, \r\n        \"item\": {\r\n            \"ansible_index_var\": \"i\", \r\n            \"ansible_loop_var\": \"item\", \r\n            \"changed\": true, \r\n            \"checksum\": \"b634fe63c7c88748376fce315554b945ac07e496\", \r\n            \"dest\": \"/home/ec2-user/.cache/molecule/mymoleculerole/default/Dockerfile_quay_io_ansible_molecule_3_0_4\", \r\n            \"diff\": [\r\n                {\r\n                    \"after\": \" [[ Diff output has been hidden because 'no_log: true' was specified for this result ]]\\n\",        \r\n                    \"after_header\": \"/home/ec2-user/.ansible/tmp/ansible-local-56247_q8G3/tmpYJwpaN/Dockerfile.j2\", \r\n                    \"before\": \"\"\r\n                }\r\n            ], \r\n            \"failed\": false, \r\n            \"gid\": 1000, \r\n            \"group\": \"ec2-user\", \r\n            \"i\": 0, \r\n            \"invocation\": {\r\n                \"module_args\": {\r\n                    \"_original_basename\": \"Dockerfile.j2\", \r\n                    \"attributes\": null, \r\n                    \"backup\": false, \r\n                    \"checksum\": \"b634fe63c7c88748376fce315554b945ac07e496\", \r\n                    \"content\": null, \r\n                    \"delimiter\": null, \r\n                    \"dest\": \"/home/ec2-user/.cache/molecule/mymoleculerole/default/Dockerfile_quay_io_ansible_molecule_3_0_4\",   \r\n                    \"directory_mode\": null, \r\n                    \"follow\": false, \r\n                    \"force\": true, \r\n                    \"group\": null, \r\n                    \"local_follow\": null, \r\n                    \"mode\": null, \r\n                    \"owner\": null, \r\n                    \"regexp\": null, \r\n                    \"remote_src\": null, \r\n                    \"selevel\": null, \r\n                    \"serole\": null, \r\n                    \"setype\": null, \r\n                    \"seuser\": null, \r\n                    \"src\": \"/home/ec2-user/.ansible/tmp/ansible-tmp-1593100655.69-5646-265481846846146/source\", \r\n                    \"unsafe_writes\": null, \r\n                    \"validate\": null\r\n                }\r\n            }, \r\n            \"item\": {\r\n                \"image\": \"quay.io/ansible/molecule:3.0.4\", \r\n                \"name\": \"instance\", \r\n                \"pre_build_image\": false, \r\n                \"volumes\": [\r\n                    \"/var/run/docker.sock:/var/run/docker.sock\"\r\n                ]\r\n            }, \r\n            \"md5sum\": \"0e85cd8c7bca9916c8e0aa51a37e792b\", \r\n            \"mode\": \"0664\", \r\n            \"owner\": \"ec2-user\", \r\n            \"size\": 993, \r\n            \"src\": \"/home/ec2-user/.ansible/tmp/ansible-tmp-1593100655.69-5646-265481846846146/source\", \r\n            \"state\": \"file\", \r\n            \"uid\": 1000\r\n        }, \r\n        \"msg\": \"Error building molecule_local/quay.io/ansible/molecule - code: 1, message: The command '/bin/sh -c if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates iproute2 python-apt aptitude && apt-get clean;     elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install /usr/bin/python3 /usr/bin/python3-config /usr/bin/dnf-3 sudo bash iproute && dnf clean all;     elif [ $(command -v yum) ]; then yum makecache fast && yum install -y /usr/bin/python /usr/bin/python2-config sudo yum-plugin-ovl bash iproute && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all;     elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash python-xml iproute2 && zypper clean -a;     elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates;     elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates iproute2 && xbps-remove -O; fi' returned a non-zero code: 1, logs: [u'Step 1/2 : FROM quay.io/ansible/molecule:3.0.4', u'\\\\n', u' ---> fb05502b5f2f\\\\n', u\\\"Step 2/2 : RUN if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates iproute2 \r\npython-apt aptitude && apt-get clean;     elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install /usr/bin/python3 /usr/bin/python3-config /usr/bin/dnf-3 sudo bash iproute && dnf clean all;     elif [ $(command -v yum) ]; then yum makecache fast && yum install -y /usr/bin/python /usr/bin/python2-config sudo yum-plugin-ovl bash iproute && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all;     elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash \r\npython-xml iproute2 && zypper clean -a;     elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates;     elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates iproute2 && xbps-remove -O; fi\\\", u'\\\\n', u' ---> Running in 5f3463f7d8ef\\\\n', u'fetch http://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz\\\\n', u'fetch http://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\\\\n', u'v3.12.0-1300-g351d3917f1 [http://dl-cdn.alpinelinux.org/alpine/edge/main]\\\\n', u'v3.12.0-1306-g970e94e4f8 [http://dl-cdn.alpinelinux.org/alpine/edge/community]\\\\n', u'OK: 12918 distinct packages available\\\\n', u'fetch http://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz\\\\n', u'fetch http://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\\\\n', u'\\\\x1b[91mERROR: \\\\x1b[0m', u'\\\\x1b[91munsatisfiable constraints:\\\\x1b[0m', u'\\\\x1b[91m\\\\n\\\\x1b[0m', u'  python (missing):\\\\n    required \r\nby: world[python]\\\\n', u'Removing intermediate container 5f3463f7d8ef\\\\n']\"\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2733", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2733/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2733/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2733/events", "html_url": "https://github.com/ansible-community/molecule/issues/2733", "id": 644164099, "node_id": "MDU6SXNzdWU2NDQxNjQwOTk=", "number": 2733, "title": "Help output is truncated", "user": {"login": "mperry2", "id": 2487505, "node_id": "MDQ6VXNlcjI0ODc1MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2487505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mperry2", "html_url": "https://github.com/mperry2", "followers_url": "https://api.github.com/users/mperry2/followers", "following_url": "https://api.github.com/users/mperry2/following{/other_user}", "gists_url": "https://api.github.com/users/mperry2/gists{/gist_id}", "starred_url": "https://api.github.com/users/mperry2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mperry2/subscriptions", "organizations_url": "https://api.github.com/users/mperry2/orgs", "repos_url": "https://api.github.com/users/mperry2/repos", "events_url": "https://api.github.com/users/mperry2/events{/privacy}", "received_events_url": "https://api.github.com/users/mperry2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-06-23T21:39:23Z", "updated_at": "2020-08-10T09:07:48Z", "closed_at": "2020-08-10T09:07:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.9\r\n  config file = /export/home/mperry/.ansible.cfg\r\n  configured module search path = ['/export/home/mperry/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /export/home/mperry/.local/lib/python3.7/site-packages/ansible\r\n  executable location = /export/home/mperry/.local/bin/ansible\r\n  python version = 3.7.3 (default, Dec 20 2019, 18:57:59) [GCC 8.3.0]\r\nmolecule 3.0.4\r\n   ansible==2.9.9 python==3.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- n/a\r\n\r\n# Desired Behavior\r\n\r\nThe help output should have complete sentences and describe the function of each command. The output should continue on to a new line if necessary similar to the help output of the `-c` and `-e` options listed in the \"Options\" section of the help.\r\n\r\n# Actual Behaviour\r\n\r\nSome of the help output for the molecule commands is truncated with an ellipsis. Many of these are incomplete sentences, so the help output for those commands is not useful.\r\n\r\nExample output is reproduced below where you can see the check, cleanup, converge, idempotence, prepare, and test commands have incomplete output.\r\n\r\n```\r\n$ molecule --help\r\nUsage: molecule [OPTIONS] COMMAND [ARGS]...\r\n\r\n  Molecule aids in the development and testing of Ansible roles.\r\n\r\n  Enable autocomplete issue:\r\n\r\n    eval \"$(_MOLECULE_COMPLETE=source molecule)\"\r\n\r\nOptions:\r\n  --debug / --no-debug    Enable or disable debug mode. Default is disabled.\r\n  -c, --base-config TEXT  Path to a base config.  If provided Molecule will\r\n                          load this config first, and deep merge each\r\n                          scenario's molecule.yml on top. By default is\r\n                          looking for config in current VCS repository and if\r\n                          not found it will look on user home.\r\n                          (/export/home/mperry/.config/molecule/config.yml)\r\n\r\n  -e, --env-file TEXT     The file to read variables from when rendering\r\n                          molecule.yml. (.env.yml)\r\n\r\n  --version               Show the version and exit.\r\n  --help                  Show this message and exit.\r\n\r\nCommands:\r\n  check        Use the provisioner to perform a Dry-Run (destroy,...\r\n  cleanup      Use the provisioner to cleanup any changes made to external...\r\n  converge     Use the provisioner to configure instances (dependency,...\r\n  create       Use the provisioner to start the instances.\r\n  dependency   Manage the role's dependencies.\r\n  destroy      Use the provisioner to destroy the instances.\r\n  drivers      List drivers.\r\n  idempotence  Use the provisioner to configure the instances and parse the...\r\n  init         Initialize a new role or scenario.\r\n  lint         Lint the role (dependency, lint).\r\n  list         List status of instances.\r\n  login        Log in to one instance.\r\n  matrix       List matrix of steps used to test instances.\r\n  prepare      Use the provisioner to prepare the instances into a...\r\n  reset        Reset molecule temporary folders.\r\n  side-effect  Use the provisioner to perform side-effects to the instances.\r\n  syntax       Use the provisioner to syntax check the role.\r\n  test         Test (dependency, lint, cleanup, destroy, syntax, create,...\r\n  verify       Run automated tests against instances.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2723", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2723/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2723/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2723/events", "html_url": "https://github.com/ansible-community/molecule/issues/2723", "id": 638632844, "node_id": "MDU6SXNzdWU2Mzg2MzI4NDQ=", "number": 2723, "title": "testing: docker and new cgroups issues", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-15T08:02:47Z", "updated_at": "2020-06-15T14:31:34Z", "closed_at": "2020-06-15T14:31:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Docker does not yet support the newly introduced cgroups v2 and due to this is considered broken on newer OS-es like CentOS 8+ and Fedora 31+.\r\n\r\nDue to this we need to avoid testing molecule docker functionality on these systems and rely on other platforms to provide coverage on docker driver.\r\n\r\nWhen docker is broken you will likely see a \r\n```\r\n500 Server Error: Internal Server Error\r\ncgroups: cgroup mountpoint does not exist: unknown\r\n```\r\n\r\nThe documented woraround is to change kernel boot parameters to enable the old cgroups but at this moment we cannot do this on CI/CD as it requires reboot. \r\n\r\nMy guess is that pre-baking this in Zuul images could prove problematic because it would affect other engines like podman (needs confirmation).\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2717", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2717/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2717/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2717/events", "html_url": "https://github.com/ansible-community/molecule/issues/2717", "id": 634900484, "node_id": "MDU6SXNzdWU2MzQ5MDA0ODQ=", "number": 2717, "title": "Problem test molecule in MacOS", "user": {"login": "Tomelin", "id": 7714663, "node_id": "MDQ6VXNlcjc3MTQ2NjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/7714663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tomelin", "html_url": "https://github.com/Tomelin", "followers_url": "https://api.github.com/users/Tomelin/followers", "following_url": "https://api.github.com/users/Tomelin/following{/other_user}", "gists_url": "https://api.github.com/users/Tomelin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tomelin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tomelin/subscriptions", "organizations_url": "https://api.github.com/users/Tomelin/orgs", "repos_url": "https://api.github.com/users/Tomelin/repos", "events_url": "https://api.github.com/users/Tomelin/events{/privacy}", "received_events_url": "https://api.github.com/users/Tomelin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-08T20:08:59Z", "updated_at": "2020-06-09T08:21:49Z", "closed_at": "2020-06-09T08:21:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have a problem with tests the molecule in my MacOS.\r\n\r\nConfs by pip\r\npip freeze | grep docker\r\ndocker==4.2.1\r\ndocker-compose==1.26.0\r\ndocker-py==1.10.6\r\ndocker-pycreds==0.4.0\r\ndockerpty==0.4.1\r\n\r\npip freeze | grep ansible\r\nansible==2.9.9\r\nansible-lint==4.2.0\r\n\r\npip freeze | grep molecule\r\nmolecule==3.0.4\r\nmolecule-azure==0.3\r\n\r\n**molecule test**\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 cleanup\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Lint is disabled.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n--> Sanity checks: 'docker'\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    changed: [localhost] => (item=instance)\r\n\r\n    **TASK [Wait for instance(s) deletion to complete] *******************************\r\n    failed: [localhost] (item={'_ansible_parsed': True, '_ansible_item_result': True, '_ansible_item_label': u'instance', u'ansible_job_id': u'735711355767.11734', 'failed': False, u'started': 1, 'changed': True, 'item': {'image': u'centos:7', 'name': u'instance'}, u'finished': 0, u'results_file': u'/Users/rafaeltomelin/.ansible_async/735711355767.11734', '_ansible_ignore_errors': None, '_ansible_no_log': False}) => {\"ansible_job_id\": \"735711355767.11734\", \"attempts\": 1, \"changed\": false, \"finished\": 1, \"item\": {\"ansible_job_id\": \"735711355767.11734\", \"changed\": true, \"failed\": false, \"finished\": 0, \"item\": {\"image\": \"centos:7\", \"name\": \"instance\"}, \"results_file\": \"/Users/rafaeltomelin/.ansible_async/735711355767.11734\", \"started\": 1}, \"msg\": \"Failed to import docker or docker-py - cannot import name __version__. Try `pip install docker` or `pip install docker-py` (Python 2.6)\"}**\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=1    changed=1    unreachable=0    failed=1\r\n\r\n\r\nWhat's the problem?\r\n\r\nI removed and reinstall docker by pip, but not working.\r\n\r\n**molecule drivers**\r\nname\r\n---------\r\ndelegated\r\ndocker\r\npodman\r\nvagrant\r\n\r\n**molecule --version**\r\nmolecule 3.0.4\r\n   ansible==2.9.6 python==3.8", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2714", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2714/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2714/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2714/events", "html_url": "https://github.com/ansible-community/molecule/issues/2714", "id": 633186498, "node_id": "MDU6SXNzdWU2MzMxODY0OTg=", "number": 2714, "title": "Provide a way to add podman arguments", "user": {"login": "Yajo", "id": 973709, "node_id": "MDQ6VXNlcjk3MzcwOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/973709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yajo", "html_url": "https://github.com/Yajo", "followers_url": "https://api.github.com/users/Yajo/followers", "following_url": "https://api.github.com/users/Yajo/following{/other_user}", "gists_url": "https://api.github.com/users/Yajo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yajo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yajo/subscriptions", "organizations_url": "https://api.github.com/users/Yajo/orgs", "repos_url": "https://api.github.com/users/Yajo/repos", "events_url": "https://api.github.com/users/Yajo/events{/privacy}", "received_events_url": "https://api.github.com/users/Yajo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 1439131192, "node_id": "MDU6TGFiZWwxNDM5MTMxMTky", "url": "https://api.github.com/repos/ansible-community/molecule/labels/podman", "name": "podman", "color": "23637f", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-06-07T08:22:12Z", "updated_at": "2020-06-17T18:15:49Z", "closed_at": "2020-06-17T18:15:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.9.9\r\n  config file = None\r\n  configured module search path = ['/var/home/yajo/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /var/home/yajo/mydevel/mando/.venv/lib64/python3.8/site-packages/ansible\r\n  executable location = /var/home/yajo/mydevel/mando/.venv/bin/ansible\r\n  python version = 3.8.3 (default, May 15 2020, 00:00:00) [GCC 10.1.1 20200507 (Red Hat 10.1.1-1)]\r\nmolecule 3.0.4\r\n   ansible==2.9.9 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nAs you can see in https://github.com/containers/buildah/issues/2175#issuecomment-639296244, podman needs some specific arguments to be able to run inside a privileged docker container, [which is the executor enabled for free in gitlab.com](https://docs.gitlab.com/ee/user/gitlab_com/#shared-runners).\r\n\r\nIf I want to use podman to test my roles on https://gitlab.com without needing to use a custom executor, it would be very much easier if I had a way to configure podman args.\r\n\r\nSpecifically I'd need `--cgroup-manager cgroupfs --storage-opt overlay.mount_program=/usr/bin/fuse-overlayfs --storage-driver overlay` in this case, although I guess the possibilities are endless.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2713", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2713/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2713/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2713/events", "html_url": "https://github.com/ansible-community/molecule/issues/2713", "id": 631468123, "node_id": "MDU6SXNzdWU2MzE0NjgxMjM=", "number": 2713, "title": "Add a config option to run podman as root", "user": {"login": "miterion", "id": 4395770, "node_id": "MDQ6VXNlcjQzOTU3NzA=", "avatar_url": "https://avatars3.githubusercontent.com/u/4395770?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miterion", "html_url": "https://github.com/miterion", "followers_url": "https://api.github.com/users/miterion/followers", "following_url": "https://api.github.com/users/miterion/following{/other_user}", "gists_url": "https://api.github.com/users/miterion/gists{/gist_id}", "starred_url": "https://api.github.com/users/miterion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miterion/subscriptions", "organizations_url": "https://api.github.com/users/miterion/orgs", "repos_url": "https://api.github.com/users/miterion/repos", "events_url": "https://api.github.com/users/miterion/events{/privacy}", "received_events_url": "https://api.github.com/users/miterion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-06-05T09:57:58Z", "updated_at": "2020-06-18T08:15:57Z", "closed_at": "2020-06-18T08:15:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.9\r\nmolecule 3.0.4\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\n# Desired Behavior\r\n\r\nPodman allows running containers in a rootless mode, although this introduces some limitations.\r\nFor example this makes it difficult to test ansible roles which rely on a working systemd instance running in the container.\r\n\r\nIt would therefore be nice if it would be possible to specify whether podman should be executed as root or as the current user in the molecule config.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2704", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2704/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2704/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2704/events", "html_url": "https://github.com/ansible-community/molecule/issues/2704", "id": 625854203, "node_id": "MDU6SXNzdWU2MjU4NTQyMDM=", "number": 2704, "title": "Building a ubuntu:20.04 container gets stuck because it's interrupted by dpkg", "user": {"login": "rsguhr", "id": 20595746, "node_id": "MDQ6VXNlcjIwNTk1NzQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/20595746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsguhr", "html_url": "https://github.com/rsguhr", "followers_url": "https://api.github.com/users/rsguhr/followers", "following_url": "https://api.github.com/users/rsguhr/following{/other_user}", "gists_url": "https://api.github.com/users/rsguhr/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsguhr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsguhr/subscriptions", "organizations_url": "https://api.github.com/users/rsguhr/orgs", "repos_url": "https://api.github.com/users/rsguhr/repos", "events_url": "https://api.github.com/users/rsguhr/events{/privacy}", "received_events_url": "https://api.github.com/users/rsguhr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-05-27T16:42:09Z", "updated_at": "2020-06-17T15:32:51Z", "closed_at": "2020-06-17T15:32:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nquay.io/ansible/molecule:3.0.3 and master\r\n```\r\n\r\n\r\n# Desired Behavior\r\n\r\nBuilding of ubuntu:20.04 with `pre_build_image:false` option and upstream [Dockerfile.j2](https://raw.githubusercontent.com/ansible-community/molecule/master/molecule/data/Dockerfile.j2) \r\n\r\n# Actual Behaviour\r\n\r\nWhen using the [Dockerfile.j2](https://raw.githubusercontent.com/ansible-community/molecule/master/molecule/data/Dockerfile.j2) from master, the building process stucks when using the latest LTS version of ubuntu. Because one of the packages that will be installed needs tzdata. dpkg interrupts the installation process and raises a question.\r\n\r\n```\r\n[...]\r\nSetting up tzdata (2020a-0ubuntu0.20.04) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 76.)\r\ndebconf: falling back to frontend: Readline\r\nConfiguring tzdata\r\n------------------\r\n\r\nPlease select the geographic area in which you live. Subsequent configuration questions will narrow this down by presenting a list of cities, representing the time zones in which they are located.\r\n\r\n  1. Africa  2. America  3. Antarctica  4. Australia  5. Arctic  6. Asia  7. Atlantic  8. Europe  9. Indian  10. Pacific  11. SystemV  12. US  13. Etc\r\nGeographic area:\r\n```\r\n\r\n\r\n# Possible Solutions\r\n\r\nSet `DEBIAN_FRONTEND=noninteractive` as `ARG` in the Dockerfile or adjust the `apt-get` command to `DEBIAN_FRONTEND=noninteractive apt-get install ...`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2693", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2693/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2693/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2693/events", "html_url": "https://github.com/ansible-community/molecule/issues/2693", "id": 614715762, "node_id": "MDU6SXNzdWU2MTQ3MTU3NjI=", "number": 2693, "title": "Docker - pre-created network removed in create.yml", "user": {"login": "Thulium-Drake", "id": 12935477, "node_id": "MDQ6VXNlcjEyOTM1NDc3", "avatar_url": "https://avatars2.githubusercontent.com/u/12935477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Thulium-Drake", "html_url": "https://github.com/Thulium-Drake", "followers_url": "https://api.github.com/users/Thulium-Drake/followers", "following_url": "https://api.github.com/users/Thulium-Drake/following{/other_user}", "gists_url": "https://api.github.com/users/Thulium-Drake/gists{/gist_id}", "starred_url": "https://api.github.com/users/Thulium-Drake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Thulium-Drake/subscriptions", "organizations_url": "https://api.github.com/users/Thulium-Drake/orgs", "repos_url": "https://api.github.com/users/Thulium-Drake/repos", "events_url": "https://api.github.com/users/Thulium-Drake/events{/privacy}", "received_events_url": "https://api.github.com/users/Thulium-Drake/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-05-08T12:35:18Z", "updated_at": "2020-06-29T07:10:14Z", "closed_at": "2020-06-29T07:10:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nSee below\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Behavior\r\nEDIT: Further testing has shown that this seems to be a bug introduced with Molecule 3.0.4. I ran the test again after installing Molecule 3.0.2.1 from pip3. I can't test if it also happens with Molecule 3.0.4 and Python2, as it is not available.\r\n\r\nAfter converting my Ansible dev environment (where I normally make roles) to python3 only, something broke in the docker networking.\r\n\r\nGiven the following molecule.yml (a seperate dependency.yml is in place to create the network mentioned):\r\n```\r\n---\r\ndependency:\r\n  name: 'shell'\r\n  command: ansible-playbook ${MOLECULE_PROJECT_DIRECTORY}/molecule/default/dependency.yml -i localhost,\r\ndriver:\r\n  name: 'docker'\r\nlint: |\r\n  set -e\r\n  yamllint -c molecule/default/yamllint.yml .\r\n  ansible-lint molecule/default/converge.yml\r\nplatforms:\r\n  - name: \"acme-ssl-client\"\r\n    image: \"geerlingguy/docker-${MOLECULE_DISTRO:-debian10}-ansible:latest\"\r\n    command: '/lib/systemd/systemd'\r\n    pre_build_image: true\r\n    volumes:\r\n      - '/sys/fs/cgroup:/sys/fs/cgroup:ro'\r\n    privileged: true\r\n    networks:\r\n      - name: \"acmenet\"\r\n        ipv4_address: '10.30.50.12'\r\n  - name: \"acme-ssl-helper\"\r\n    image: \"geerlingguy/docker-debian10-ansible:latest\"\r\n    command: '/lib/systemd/systemd'\r\n    pre_build_image: true\r\n    volumes:\r\n      - '/sys/fs/cgroup:/sys/fs/cgroup:ro'\r\n    privileged: true\r\n    networks:\r\n      - name: \"acmenet\"\r\n        ipv4_address: '10.30.50.11'\r\n  - name: 'pebble'\r\n    image: 'letsencrypt/pebble'\r\n    command: 'pebble --dnsserver 10.30.50.11:53'\r\n    pre_build_image: true\r\n    networks:\r\n      - name: \"acmenet\"\r\n        ipv4_address: '10.30.50.10'\r\nprovisioner:\r\n  name: 'ansible'\r\n```\r\nFor this environment to work, I need to be able to assign static IPs to each of the docker containers. This used to work, but after converting to python3 only, I received the following error message from Docker: ```400 Client Error: Bad Request (\"user specified IP address is supported only when connecting to networks with user configured subnets\")```\r\n\r\n## Python 3\r\nWhen running ```molecule create``` with python3, I can observe the following actions on the Docker daemon for networks. I have commented for clarity:\r\n```\r\n2020-05-08T13:05:03.393276006+02:00 network destroy a5941947a10d00e5d6c31113c4e79ab5a5072e4701639d65d5e065dbdda03082 (name=acmenet, type=bridge) # Precreation destroy\r\n2020-05-08T13:05:18.444261785+02:00 network create eb0f4bc5ff8b0185d874df2712bec7fd72f432ec58c01446e18382e04c677c9e (name=acmenet, type=bridge) # Created by dependency.yml\r\n2020-05-08T13:05:24.939964452+02:00 network destroy eb0f4bc5ff8b0185d874df2712bec7fd72f432ec58c01446e18382e04c677c9e (name=acmenet, type=bridge) # Destroyed for some reason\r\n2020-05-08T13:05:24.986557118+02:00 network create e779303608cf568594d3868eeb4f5de063c2badd29cf3aaf63db89de682a59cf (name=acmenet, type=bridge) # Created by create.yml, broken as it does not accept user-set IP addresses for containers\r\n```\r\n\r\nMolecule task output:\r\n```\r\n    TASK [Create docker network(s)] ************************************************\r\n    changed: [localhost] => (item=acmenet)\r\n    ok: [localhost] => (item=acmenet)\r\n    ok: [localhost] => (item=acmenet)\r\n    \r\n```\r\nMolecule --version\r\n```\r\nmolecule 3.0.4\r\n   ansible==2.9.7 python==3.7\r\n```\r\n\r\n## Python 2\r\nRunning the same config with python2, gives the following output on the Docker daemon:\r\n```\r\n2020-05-08T14:26:54.063793066+02:00 network create 3e7457009acb86e1c5f29ebfa3379a9a51f16ed5147077dedd2c616d327fc673 (name=acmenet, type=bridge) \r\n```\r\n\r\nMolecule task output:\r\n```\r\nTASK [Create docker network(s)] ************************************************\r\n    ok: [localhost] => (item=acmenet)\r\n    ok: [localhost] => (item=acmenet)\r\n    ok: [localhost] => (item=acmenet)\r\n```\r\nmolecule --version\r\n```\r\nmolecule 3.0.2.1\r\n   ansible==2.9.7 python==2.7\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2692", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2692/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2692/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2692/events", "html_url": "https://github.com/ansible-community/molecule/issues/2692", "id": 613935456, "node_id": "MDU6SXNzdWU2MTM5MzU0NTY=", "number": 2692, "title": "Specifying playbook for `verify` step does not resolve relative paths", "user": {"login": "deepbrook", "id": 12763351, "node_id": "MDQ6VXNlcjEyNzYzMzUx", "avatar_url": "https://avatars0.githubusercontent.com/u/12763351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepbrook", "html_url": "https://github.com/deepbrook", "followers_url": "https://api.github.com/users/deepbrook/followers", "following_url": "https://api.github.com/users/deepbrook/following{/other_user}", "gists_url": "https://api.github.com/users/deepbrook/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepbrook/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepbrook/subscriptions", "organizations_url": "https://api.github.com/users/deepbrook/orgs", "repos_url": "https://api.github.com/users/deepbrook/repos", "events_url": "https://api.github.com/users/deepbrook/events{/privacy}", "received_events_url": "https://api.github.com/users/deepbrook/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-07T10:10:15Z", "updated_at": "2020-06-23T05:46:43Z", "closed_at": "2020-06-23T05:46:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/nls/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/nls/.virtualenvs/ansible-role-bb-consul/lib/python3.6/site-packages/ansible\r\n  executable location = /home/nls/.virtualenvs/ansible-role-bb-consul/bin/ansible\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nmolecule 3.0.5.dev13+ga99c2c2d\r\n   ansible==2.9.6 python==3.6\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- from git, via pip..\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n- yamllint, ansible-lint\r\n- ansible\r\n\r\n# Desired Behavior\r\nExecute the `verify.yml` playbook in `molecule/shared`.\r\n\r\n# Actual Behaviour\r\n\r\ntl;dr: `verify` step is skipped, as molecule claims no playbook was configured.\r\n\r\ndirectory structure:\r\n```bash\r\nmolecule/\r\n  default/\r\n    molecule.yml\r\n  shared/\r\n    converge.yml\r\n    verify.yml\r\n```\r\n\r\nFile contents\r\n```bash\r\ncat molecule/default/molecule.yml\r\n---\r\ndriver:\r\n  name: docker\r\nlint: |\r\n  set -e\r\n  yamllint .\r\n  ansible-lint .\r\n\r\nplatforms:\r\n  - name: consul-server\r\n    image: \"geerlingguy/docker-ubuntu1804-ansible:latest\"\r\n    dockerfile: ../shared/Dockerfile.j2\r\n    command: ${MOLECULE_DOCKER_COMMAND:-\"\"}\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    privileged: true\r\n    pre_build_image: true\r\n\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_PYTHON_INTERPRETER: /usr/bin/python3\r\n  options:\r\n    extra_vars:\r\n      consul_config:\r\n        server: yes\r\n        retry_join: [\"127.0.0.1\"]\r\n        bootstrap_expect: 1\r\n\r\n  playbooks:\r\n    converge: ../shared/converge.yml\r\n\r\nverifier:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_PYTHON_INTERPRETER: /usr/bin/python3\r\n  playbooks:\r\n    verify: ../.shared/verify.yml\r\n...\r\ncat molecule/shared/converge.yml\r\n---\r\n- name: Converge\r\n  hosts: all\r\n  roles:\r\n    - role: ansible-role-bb-consul\r\n...\r\ncat molecule/shared/verify.yml\r\n- name: Verify\r\n  hosts: all\r\n  tasks:\r\n    - debug: {msg: \"executed\"}\r\n```\r\n\r\n---\r\n\r\nI initially had the verify playbook listed under the `provisioner` key instead of under `verifier`, like so:\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_PYTHON_INTERPRETER: /usr/bin/python3\r\n  options:\r\n    extra_vars:\r\n      consul_config:\r\n        server: yes\r\n        retry_join: [\"127.0.0.1\"]\r\n        bootstrap_expect: 1\r\n\r\n  playbooks:\r\n    converge: ../shared/converge.yml\r\n    verify: ../.shared/verify.yml\r\n\r\nverifier:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_PYTHON_INTERPRETER: /usr/bin/python3\r\n...\r\n```\r\n\r\nThat, however, yields the same result.\r\n\r\nThe `converge.yml` is executed as expected, which makes this even weirder.\r\n\r\nHere's the log of `molecule --debug test`:\r\n\r\nhttps://gist.github.com/nlsdfnbch/3bab0bff514bda71a9a23703dd816eb6\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2676", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2676/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2676/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2676/events", "html_url": "https://github.com/ansible-community/molecule/issues/2676", "id": 608163504, "node_id": "MDU6SXNzdWU2MDgxNjM1MDQ=", "number": 2676, "title": "Broken dependency from pip's sh module", "user": {"login": "grzegorznowak", "id": 617275, "node_id": "MDQ6VXNlcjYxNzI3NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/617275?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grzegorznowak", "html_url": "https://github.com/grzegorznowak", "followers_url": "https://api.github.com/users/grzegorznowak/followers", "following_url": "https://api.github.com/users/grzegorznowak/following{/other_user}", "gists_url": "https://api.github.com/users/grzegorznowak/gists{/gist_id}", "starred_url": "https://api.github.com/users/grzegorznowak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grzegorznowak/subscriptions", "organizations_url": "https://api.github.com/users/grzegorznowak/orgs", "repos_url": "https://api.github.com/users/grzegorznowak/repos", "events_url": "https://api.github.com/users/grzegorznowak/events{/privacy}", "received_events_url": "https://api.github.com/users/grzegorznowak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/25", "html_url": "https://github.com/ansible-community/molecule/milestone/25", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/25/labels", "id": 5289140, "node_id": "MDk6TWlsZXN0b25lNTI4OTE0MA==", "number": 25, "title": "3.0.4", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2020-04-08T16:55:51Z", "updated_at": "2020-05-04T14:26:01Z", "due_on": null, "closed_at": "2020-05-04T14:26:01Z"}, "comments": 8, "created_at": "2020-04-28T09:26:17Z", "updated_at": "2020-04-28T20:50:55Z", "closed_at": "2020-04-28T20:50:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey guys,\r\n\r\nthere seem to be a fresh version of https://pypi.org/project/sh/ released 15h ago (at the time of writing this), which is a minor bump (despite being ~3 years in develop, but let's shelve that for now). The thing is it breaks molecule converge (and possibly other tasks as well). \r\nOr at least in the instances/config I'm using it in.\r\n\r\nThe case in question is trying to run DO provisioner using 2.x branch of molecule.\r\nMore details as per the ticket's template.\r\n\r\nWhen force-installed the previous version: `pip install sh==1.12.14` it worked just fine.\r\nNot sure if that's an issue of of molecule or that said package, but reporting here, since so far it seem like we're maybe trying to pass a variable in a format that is not well formatted, given the error message. But that's just a hunch.\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmolecule==2.22\r\nansible==2.9.0\r\n\r\n```\r\n\r\nMolecule installation method: `pip`\r\n\r\nAnsible installation method (one of): `pip`\r\n\r\n# Desired Behavior\r\n\r\n`molecule provisioning` ran OK\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n  'env': value u'/[a project]/provisioning/.env.yml' of env key 'MOLECULE_ENV_FILE' must be a str\r\n```\r\nplease note I do not have the `.env.yml` file anywhere added explicitly in my provisioning folder (or subfolders for that matter).\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2673", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2673/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2673/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2673/events", "html_url": "https://github.com/ansible-community/molecule/issues/2673", "id": 606963184, "node_id": "MDU6SXNzdWU2MDY5NjMxODQ=", "number": 2673, "title": "Add molecule-hetznercloud to the default Dockerfile", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-26T09:14:31Z", "updated_at": "2020-04-29T17:32:07Z", "closed_at": "2020-04-29T17:32:07Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n- Latest\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nInstead of having to `pip install molecule-hetznercloud`, I get it baked into the upstream docker image that is provided from the molecule project and my builds run faster. I guess all plugins that are maintained should be included. Up for it?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2671", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2671/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2671/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2671/events", "html_url": "https://github.com/ansible-community/molecule/issues/2671", "id": 606953151, "node_id": "MDU6SXNzdWU2MDY5NTMxNTE=", "number": 2671, "title": "\"molecule.yml as only config required\" support for plugins (molecule-hetznercloud)", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-04-26T08:21:17Z", "updated_at": "2020-04-27T13:16:22Z", "closed_at": "2020-04-27T13:16:22Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n- Latest\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nI'm migrating a lot of roles to Molecule 3.0 and it's quite a piece of work. That's fine and I'm glad to be able to do it. However, it got me thinking, it would be **excellent** if I only had to migrate my `molecule.yml` and not the prepare/create/destroy etc. (there were changes in the plugin implementation).\r\n\r\nI have no custom changes to the create/destroy/prepare yaml files whatsoever. I feel like I don't need to see them in the `molecule/default/` folder. If they weren't there, then I really wouldn't notice and I would have a lot less work to do.\r\n\r\nThis would upstream maintenance work into the plugin (for create/prepare/destroy/etc.) and make migration much easier (allowing more flexibility in the molecule.yml definitions because you only have to change one file now).\r\n\r\nSo, my request is, can we make it such that if you have no `create.yml` in your `molecule/default` folder, then molecule looks at your driver plugin and then does a lookup into the plugin directory path to run the default create/prepare/destroy/etc. You can always override. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2660", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2660/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2660/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2660/events", "html_url": "https://github.com/ansible-community/molecule/issues/2660", "id": 603077635, "node_id": "MDU6SXNzdWU2MDMwNzc2MzU=", "number": 2660, "title": "Failed to detect selinux python bindings", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-20T09:16:38Z", "updated_at": "2020-04-20T15:31:46Z", "closed_at": "2020-04-20T15:31:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nLatest ansible\r\nLatest molecule\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n- GitHub actions instances to run CI.\r\n\r\n# Desired Behavior\r\nMolecule to run without an issue.\r\n\r\n# Actual Behaviour\r\nThis issue started appearing on the 11th of April 2020, only on GitHub Action runners, so I'm not sure if this is a Molecule issue or a GitLab Action issue.\r\n\r\nhttps://github.com/robertdebock/ansible-role-python_pip/runs/601244763?check_suite_focus=true#step:6:36\r\n\r\nThe code that triggers this issue is [here](https://github.com/robertdebock/ansible-role-python_pip)\r\n\r\nBy the way, the GitLab Action runnners are [Ubuntu 2018 instances](https://help.github.com/en/actions/reference/virtual-environments-for-github-hosted-runners#supported-runners-and-hardware-resources).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2658", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2658/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2658/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2658/events", "html_url": "https://github.com/ansible-community/molecule/issues/2658", "id": 602486058, "node_id": "MDU6SXNzdWU2MDI0ODYwNTg=", "number": 2658, "title": "EL 8 docs specify wrong dependency for libselinux-python (should be python3-libselinux)", "user": {"login": "jeffcpullen", "id": 9343691, "node_id": "MDQ6VXNlcjkzNDM2OTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/9343691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffcpullen", "html_url": "https://github.com/jeffcpullen", "followers_url": "https://api.github.com/users/jeffcpullen/followers", "following_url": "https://api.github.com/users/jeffcpullen/following{/other_user}", "gists_url": "https://api.github.com/users/jeffcpullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffcpullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffcpullen/subscriptions", "organizations_url": "https://api.github.com/users/jeffcpullen/orgs", "repos_url": "https://api.github.com/users/jeffcpullen/repos", "events_url": "https://api.github.com/users/jeffcpullen/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffcpullen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-18T15:28:55Z", "updated_at": "2020-05-29T17:31:07Z", "closed_at": "2020-05-29T17:31:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nFollowing installation docs for EL 8 distro it says to install libselinux-python, but thats not available. Instead it should point to python3-libselinux.\r\n\r\n# Actual Behaviour\r\n\r\nFollowing the installation guide on RHEL 8\r\n```\r\n$ sudo yum install -y gcc python3-pip python3-devel openssl-devel libselinux-python\r\nUpdating Subscription Management repositories.\r\nLast metadata expiration check: 0:31:57 ago on Sat 18 Apr 2020 10:49:48 AM EDT.\r\nNo match for argument: libselinux-python\r\nError: Unable to find a match: libselinux-python\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2657", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2657/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2657/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2657/events", "html_url": "https://github.com/ansible-community/molecule/issues/2657", "id": 602191105, "node_id": "MDU6SXNzdWU2MDIxOTExMDU=", "number": 2657, "title": "Missing cookiecutter template option for init", "user": {"login": "kevingentile", "id": 10604101, "node_id": "MDQ6VXNlcjEwNjA0MTAx", "avatar_url": "https://avatars2.githubusercontent.com/u/10604101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevingentile", "html_url": "https://github.com/kevingentile", "followers_url": "https://api.github.com/users/kevingentile/followers", "following_url": "https://api.github.com/users/kevingentile/following{/other_user}", "gists_url": "https://api.github.com/users/kevingentile/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevingentile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevingentile/subscriptions", "organizations_url": "https://api.github.com/users/kevingentile/orgs", "repos_url": "https://api.github.com/users/kevingentile/repos", "events_url": "https://api.github.com/users/kevingentile/events{/privacy}", "received_events_url": "https://api.github.com/users/kevingentile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133126, "node_id": "MDU6TGFiZWwyODgxMzMxMjY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/wontfix", "name": "wontfix", "color": "ffdddd", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-17T19:37:14Z", "updated_at": "2020-05-10T12:49:19Z", "closed_at": "2020-05-10T12:49:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.9.6\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\nmolecule 3.0.4.dev4+g21ce2f4d\r\n   ansible==2.9.6 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI'm attempting to create my own cookiecutter template to configure new roles. Ansible Galaxy provides users with a [role skeleton](https://docs.ansible.com/ansible/2.7/reference_appendices/galaxy.html#using-a-custom-role-skeleton). I am now attempting to further configure the molecule generated files.\r\n \r\nI expected to be able to pass my custom cookiecutter configuration to molecule either through a flag or an environment variable.\r\n\r\n\r\n\r\n\r\n# Actual Behaviour\r\nThe documentation for `molecule init scenario` [mentions a local cookiecutter template](https://github.com/ansible-community/molecule/blob/1563796089710b3e0505acb3ec8f57ba80834c45/molecule/command/init/scenario.py#L57). The scenario command [does a lookup for \"driver_template\" as a command argument](https://github.com/ansible-community/molecule/blob/1563796089710b3e0505acb3ec8f57ba80834c45/molecule/command/init/scenario.py#L92) but this value doesn't appear to ever be set in the project. Molecule then defaults to the local ([project owned](https://github.com/ansible-community/molecule/tree/master/molecule/cookiecutter)) cookiecutter template.\r\n\r\nThis appears to have been addressed in #2117. Am I missing something?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2652", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2652/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2652/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2652/events", "html_url": "https://github.com/ansible-community/molecule/issues/2652", "id": 600300247, "node_id": "MDU6SXNzdWU2MDAzMDAyNDc=", "number": 2652, "title": "molecule init role my-role-name failed", "user": {"login": "freeseacher", "id": 289277, "node_id": "MDQ6VXNlcjI4OTI3Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/289277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freeseacher", "html_url": "https://github.com/freeseacher", "followers_url": "https://api.github.com/users/freeseacher/followers", "following_url": "https://api.github.com/users/freeseacher/following{/other_user}", "gists_url": "https://api.github.com/users/freeseacher/gists{/gist_id}", "starred_url": "https://api.github.com/users/freeseacher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freeseacher/subscriptions", "organizations_url": "https://api.github.com/users/freeseacher/orgs", "repos_url": "https://api.github.com/users/freeseacher/repos", "events_url": "https://api.github.com/users/freeseacher/events{/privacy}", "received_events_url": "https://api.github.com/users/freeseacher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-15T13:31:21Z", "updated_at": "2020-04-15T21:30:48Z", "closed_at": "2020-04-15T16:41:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n% ansible --version && molecule --version\r\nansible 2.8.10\r\n  config file = None\r\n  configured module search path = ['/home/shirokih/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/shirokih/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/shirokih/.local/bin/ansible\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nmolecule 3.0.3\r\n   ansible==2.8.10 python==3.6\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule init role my-role` creates diras and finiched with $0\r\n\r\n# Actual Behaviour\r\n\r\n```\r\nmolecule init role my-role\r\n--> Initializing new role my-role...\r\nERROR: Galaxy failed to create role: Command '['ansible-galaxy', 'init', '-v', '--offline', 'my-role']' returned non-zero exit status 250.: No config file found; using defaults\r\nERROR! Unexpected Exception, this is probably a bug: no filter named 'comment_ify'\r\nto see the full traceback, use -vvv\r\n```\r\nbecause of \r\n```\r\n% ansible-galaxy init -vvv --offline my-role\r\nansible-galaxy 2.8.10\r\n  config file = None\r\n  configured module search path = ['/home/shirokih/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/shirokih/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/shirokih/.local/bin/ansible-galaxy\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nNo config file found; using defaults\r\nOpened /home/shirokih/.ansible_galaxy\r\nERROR! Unexpected Exception, this is probably a bug: no filter named 'comment_ify'\r\nthe full traceback was:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/shirokih/.local/bin/ansible-galaxy\", line 110, in <module>\r\n    exit_code = cli.run()\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/ansible/cli/galaxy.py\", line 149, in run\r\n    self.execute()\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/ansible/cli/__init__.py\", line 94, in execute\r\n    fn()\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/ansible/cli/galaxy.py\", line 246, in execute_init\r\n    template_env.get_template(src_template).stream(inject_data).dump(dest_file)\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/environment.py\", line 883, in get_template\r\n    return self._load_template(name, self.make_globals(globals))\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/environment.py\", line 857, in _load_template\r\n    template = self.loader.load(self, name, globals)\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/loaders.py\", line 127, in load\r\n    code = environment.compile(source, name, filename)\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/environment.py\", line 638, in compile\r\n    self.handle_exception(source=source_hint)\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/environment.py\", line 832, in handle_exception\r\n    reraise(*rewrite_traceback_stack(source=source))\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/_compat.py\", line 28, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/ansible/galaxy/data/default/collection/galaxy.yml.j2\", line 3, in template\r\n    {{ option.description | comment_ify }}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2651", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2651/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2651/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2651/events", "html_url": "https://github.com/ansible-community/molecule/issues/2651", "id": 599800077, "node_id": "MDU6SXNzdWU1OTk4MDAwNzc=", "number": 2651, "title": "Missing Shell Environment Variables", "user": {"login": "kevingentile", "id": 10604101, "node_id": "MDQ6VXNlcjEwNjA0MTAx", "avatar_url": "https://avatars2.githubusercontent.com/u/10604101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevingentile", "html_url": "https://github.com/kevingentile", "followers_url": "https://api.github.com/users/kevingentile/followers", "following_url": "https://api.github.com/users/kevingentile/following{/other_user}", "gists_url": "https://api.github.com/users/kevingentile/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevingentile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevingentile/subscriptions", "organizations_url": "https://api.github.com/users/kevingentile/orgs", "repos_url": "https://api.github.com/users/kevingentile/repos", "events_url": "https://api.github.com/users/kevingentile/events{/privacy}", "received_events_url": "https://api.github.com/users/kevingentile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-14T19:16:46Z", "updated_at": "2020-07-19T12:14:08Z", "closed_at": "2020-07-19T12:14:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/etc/ansible-playbook/library']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\nmolecule 3.0.3\r\n   ansible==2.9.6 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nDefining `ANSIBLE_LIBRARY` in the current shell passes the change down to molecule\r\n\r\n# Actual Behaviour\r\n```\r\necho $ANSIBLE_LIBRARY\r\n/etc/ansible-playbook/library\r\n```\r\n\r\n\r\n```\r\nmolecule --debug converge\r\n...\r\nANSIBLE_LIBRARY: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule/my_role/default/library\r\n...\r\n```\r\n\r\nThe above excerpt from converge is missing shell defined `ANSIBLE_LIBRARY` identified by the ansible command (`configured module search path`).\r\n\r\n\r\nThe workaround is to pass the shell variable in the provisioner section of `molecule.yaml`\r\n\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_LIBRARY: $ANSIBLE_LIBRARY\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2648", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2648/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2648/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2648/events", "html_url": "https://github.com/ansible-community/molecule/issues/2648", "id": 598980626, "node_id": "MDU6SXNzdWU1OTg5ODA2MjY=", "number": 2648, "title": "Support Windows Docker containers", "user": {"login": "BlakeWills", "id": 8128694, "node_id": "MDQ6VXNlcjgxMjg2OTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/8128694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BlakeWills", "html_url": "https://github.com/BlakeWills", "followers_url": "https://api.github.com/users/BlakeWills/followers", "following_url": "https://api.github.com/users/BlakeWills/following{/other_user}", "gists_url": "https://api.github.com/users/BlakeWills/gists{/gist_id}", "starred_url": "https://api.github.com/users/BlakeWills/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BlakeWills/subscriptions", "organizations_url": "https://api.github.com/users/BlakeWills/orgs", "repos_url": "https://api.github.com/users/BlakeWills/repos", "events_url": "https://api.github.com/users/BlakeWills/events{/privacy}", "received_events_url": "https://api.github.com/users/BlakeWills/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-13T16:15:57Z", "updated_at": "2020-04-15T16:51:47Z", "closed_at": "2020-04-15T16:51:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.6\r\n  config file = None\r\n  configured module search path = ['/home/blake/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/blake/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/blake/.local/bin/ansible\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nmolecule 3.0.3\r\n   ansible==2.9.6 python==3.6\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nFirstly, apologies if this already works and I'm doing something wrong.\r\n\r\nI'm trying to get Molecule to work with windows docker containers so I can test Ansible roles for windows.\r\n\r\nI can get the create step working by overriding the command within the provider, as it was bash:\r\n```\r\nplatforms:\r\n  - name: instance\r\n    image: ansiblewin:latest\r\n    command: powershell.exe \"while(1 -eq 1) { Start-Sleep -Seconds 10000 }\"\r\n    pre_build_image: true\r\n```\r\n\r\nHowever, I'm unable to get `converge` working because the docker driver defaults to using `sh` and there isn't a way to override it as far as I can see, resulting in the following error:\r\n\r\n```\r\nfatal: [instance]: UNREACHABLE! => {\r\n    \"changed\": false,\r\n    \"msg\": \"Authentication or permission failure. In some cases, you may have been able to authenticate and did not have permissions on the target directory. C\r\nonsider changing the remote tmp path in ansible.cfg to a path rooted in \\\"/tmp\\\". Failed command was: PowerShell -NoProfile -NonInteractive -ExecutionPolicy Un\r\nrestricted -EncodedCommand UwBlAHQALQBTAHQAcgBpAGMAdABNAG8AZABlACAALQBWAGUAcgBzAGkAbwBuACAATABhAHQAZQBzAHQACgAkAHQAbQBwAF8AcABhAHQAaAAgAD0AIABbAFMAeQBzAHQAZQBt\r\nAC4ARQBuAHYAaQByAG8AbgBtAGUAbgB0AF0AOgA6AEUAeABwAGEAbgBkAEUAbgB2AGkAcgBvAG4AbQBlAG4AdABWAGEAcgBpAGEAYgBsAGUAcwAoACcAJQBUAEUATQBQACUAJwApAAoAJAB0AG0AcAAgAD0AIAB\r\nOAGUAdwAtAEkAdABlAG0AIAAtAFQAeQBwAGUAIABEAGkAcgBlAGMAdABvAHIAeQAgAC0AUABhAHQAaAAgACQAdABtAHAAXwBwAGEAdABoACAALQBOAGEAbQBlACAAJwBhAG4AcwBpAGIAbABlAC0AdABtAHAALQ\r\nAxADUAOAA2ADcAOAA5ADMAMAAwAC4ANgA4ADYANwA3ADgAMwAtADQANAA4ADAAMgA4ADgAMgA5ADQAMAA0ADgANwAnAAoAVwByAGkAdABlAC0ATwB1AHQAcAB1AHQAIAAtAEkAbgBwAHUAdABPAGIAagBlAGMAd\r\nAAgACQAdABtAHAALgBGAHUAbABsAE4AYQBtAGUACgBJAGYAIAAoAC0AbgBvAHQAIAAkAD8AKQAgAHsAIABJAGYAIAAoAEcAZQB0AC0AVgBhAHIAaQBhAGIAbABlACAATABBAFMAVABFAFgASQBUAEMATwBEAEUA\r\nIAAtAEUAcgByAG8AcgBBAGMAdABpAG8AbgAgAFMAaQBsAGUAbgB0AGwAeQBDAG8AbgB0AGkAbgB1AGUAKQAgAHsAIABlAHgAaQB0ACAAJABMAEEAUwBUAEUAWABJAFQAQwBPAEQARQAgAH0AIABFAGwAcwBlACA\r\nAewAgAGUAeABpAHQAIAAxACAAfQAgAH0A, exited with result 126, stdout output: container 5d136819d14b11a14b1eca78836000d3cc6edf05ca308c959466a68e0b386309 encountere\r\nd an error during hcsshim::System::CreateProcess: failure in a Windows system call: The system cannot find the file specified. (0x2)\\n[Event Detail:  Provider:\r\n 00000000-0000-0000-0000-000000000000]\\n[Event Detail:  Provider: 00000000-0000-0000-0000-000000000000]\\n[Event Detail: onecore\\\\vm\\\\compute\\\\management\\\\orche\r\nstration\\\\vmhostedcontainer\\\\processmanagement.cpp(173)\\\\vmcomputeagent.exe!00007FF686C69D2B: (caller: 00007FF686C1E13A) Exception(8) tid(224) 80070002 The sys\r\ntem cannot find the file specified.\\r\\n    CallContext:[\\\\Bridge_ProcessMessage\\\\VmHostedContainer_ExecuteProcess] \\n Provider: 00000000-0000-0000-0000-0000000\r\n00000] extra info: {\\\"CommandLine\\\":\\\"/bin/sh -c \\\\\\\"/bin/sh -c 'PowerShell -NoProfile -NonInteractive -ExecutionPolicy Unrestricted -EncodedCommand UwBlAHQALQ\r\nBTAHQAcgBpAGMAdABNAG8AZABlACAALQBWAGUAcgBzAGkAbwBuACAATABhAHQAZQBzAHQACgAkAHQAbQBwAF8AcABhAHQAaAAgAD0AIABbAFMAeQBzAHQAZQBtAC4ARQBuAHYAaQByAG8AbgBtAGUAbgB0AF0AO\r\ngA6AEUAeABwAGEAbgBkAEUAbgB2AGkAcgBvAG4AbQBlAG4AdABWAGEAcgBpAGEAYgBsAGUAcwAoACcAJQBUAEUATQBQACUAJwApAAoAJAB0AG0AcAAgAD0AIABOAGUAdwAtAEkAdABlAG0AIAAtAFQAeQBwAGUA\r\nIABEAGkAcgBlAGMAdABvAHIAeQAgAC0AUABhAHQAaAAgACQAdABtAHAAXwBwAGEAdABoACAALQBOAGEAbQBlACAAJwBhAG4AcwBpAGIAbABlAC0AdABtAHAALQAxADUAOAA2ADcAOAA5ADMAMAAwAC4ANgA4ADY\r\nANwA3ADgAMwAtADQANAA4ADAAMgA4ADgAMgA5ADQAMAA0ADgANwAnAAoAVwByAGkAdABlAC0ATwB1AHQAcAB1AHQAIAAtAEkAbgBwAHUAdABPAGIAagBlAGMAdAAgACQAdABtAHAALgBGAHUAbABsAE4AYQBtAG\r\nUACgBJAGYAIAAoAC0AbgBvAHQAIAAkAD8AKQAgAHsAIABJAGYAIAAoAEcAZQB0AC0AVgBhAHIAaQBhAGIAbABlACAATABBAFMAVABFAFgASQBUAEMATwBEAEUAIAAtAEUAcgByAG8AcgBBAGMAdABpAG8AbgAgA\r\nFMAaQBsAGUAbgB0AGwAeQBDAG8AbgB0AGkAbgB1AGUAKQAgAHsAIABlAHgAaQB0ACAAJABMAEEAUwBUAEUAWABJAFQAQwBPAEQARQAgAH0AIABFAGwAcwBlACAAewAgAGUAeABpAHQAIAAxACAAfQAgAH0A ; s\r\nleep 0'\\\\\\\"\\\",\\\"WorkingDirectory\\\":\\\"/\\\",\\\"CreateStdInPipe\\\":true,\\\"CreateStdOutPipe\\\":true,\\\"CreateStdErrPipe\\\":true,\\\"ConsoleSize\\\":[0,0]}\\r\\n\",\r\n    \"unreachable\": true\r\n}\r\n```\r\n\r\nRunning `molecule --debug` shows that `docker exec` is calling `/bin/sh`, which obviously doesn't work in a Windows container:\r\n\r\n```\r\nEXEC ['/usr/bin/docker', '-H=tcp://localhost:2375', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c 'PowerShell -NoProfile -NonInteractive -ExecutionPolicy Unrestricted -EncodedCommand ...\r\n``` \r\n\r\nI've tried setting `ansible_shell_type` to Powershell, this still results in using `/bin/sh`:\r\n\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  connection_options:\r\n    ansible_shell_type: powershell\r\n```\r\n\r\nIt looks like running Molecule against windows containers isn't supported, hence raising this as a feature request.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2646", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2646/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2646/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2646/events", "html_url": "https://github.com/ansible-community/molecule/issues/2646", "id": 597843304, "node_id": "MDU6SXNzdWU1OTc4NDMzMDQ=", "number": 2646, "title": "prerelease version of ansible-lint is getting installed", "user": {"login": "mafalb", "id": 243299, "node_id": "MDQ6VXNlcjI0MzI5OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/243299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mafalb", "html_url": "https://github.com/mafalb", "followers_url": "https://api.github.com/users/mafalb/followers", "following_url": "https://api.github.com/users/mafalb/following{/other_user}", "gists_url": "https://api.github.com/users/mafalb/gists{/gist_id}", "starred_url": "https://api.github.com/users/mafalb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mafalb/subscriptions", "organizations_url": "https://api.github.com/users/mafalb/orgs", "repos_url": "https://api.github.com/users/mafalb/repos", "events_url": "https://api.github.com/users/mafalb/events{/privacy}", "received_events_url": "https://api.github.com/users/mafalb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-10T11:31:42Z", "updated_at": "2020-05-29T07:15:24Z", "closed_at": "2020-05-29T07:15:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\nPrelelease version of ansible-lint breaks new molecule installs\r\n\r\nA prerelease version o# ansible-lint -v\r\nUsage: ansible-lint [options] [playbook.yml [playbook2 ...]]|roledirectoryf ansible-lint was released\r\nhttps://pypi.org/project/ansible-lint/4.3.0a0/\r\n\r\n```$ pip install molecule[lint]``` is installing that prerelease because of\r\n\r\n```ansible-lint >= 4.1.1a2, < 5``` in setup.cfg\r\n\r\nbecause of that pip is concluding that a prerelease version of ansible-lint is OK.\r\nBut: there is a bug in ansible-lint 4.3.0a0 which is breaking CI\r\nhttps://github.com/ansible/ansible-lint/issues/731\r\n\r\nMuch of my CI is broken.\r\n\r\nPlease use stable dependencies in stable molecule versions.\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.9.6\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /molecule/lib/python3.6/site-packages/ansible\r\n  executable location = /molecule/bin/ansible\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\n```\r\n\r\n```\r\n$ molecule --version\r\nmolecule 3.0.3\r\n   ansible==2.9.6 python==3.6\r\n```\r\n\r\n```\r\n$ ansible-lint --version\r\nansible-lint 4.3.0a0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- ansible-lint\r\n\r\n# Desired Behavior\r\n\r\n```$ pip install molecule[lint]``` installs stable version of ansible-lint, running it without playbook or role as argument does not give usage message, e.g.\r\n\r\n```\r\n$ ansible-lint -v\r\nUnknown file type: .github/workflows/CI.yml\r\nUnknown file type: galaxy.yml\r\nUnknown file type: roles/plugin/tasks/main.yml\r\nFound roles: roles/plugin\r\nFound playbooks: molecule/default/converge.yml molecule/default/verify.yml molecule/install_molecule.yml molecule/requirements.yml\r\nExamining molecule/default/converge.yml of type playbook\r\nExamining molecule/default/verify.yml of type playbook\r\nExamining molecule/install_molecule.yml of type playbook\r\nExamining molecule/requirements.yml of type playbook\r\nExamining roles/plugin/tasks/main.yml of type tasks\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n```$ pip install molecule[lint]``` installs prerelease version of ansible-lint\r\n\r\n```\r\n$ ansible-lint -v\r\nUsage: ansible-lint [options] [playbook.yml [playbook2 ...]]|roledirectory\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2643", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2643/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2643/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2643/events", "html_url": "https://github.com/ansible-community/molecule/issues/2643", "id": 595964619, "node_id": "MDU6SXNzdWU1OTU5NjQ2MTk=", "number": 2643, "title": "molecule ignores \"sharing across scenarios\" on non default scenarios", "user": {"login": "geosword", "id": 17837795, "node_id": "MDQ6VXNlcjE3ODM3Nzk1", "avatar_url": "https://avatars2.githubusercontent.com/u/17837795?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geosword", "html_url": "https://github.com/geosword", "followers_url": "https://api.github.com/users/geosword/followers", "following_url": "https://api.github.com/users/geosword/following{/other_user}", "gists_url": "https://api.github.com/users/geosword/gists{/gist_id}", "starred_url": "https://api.github.com/users/geosword/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geosword/subscriptions", "organizations_url": "https://api.github.com/users/geosword/orgs", "repos_url": "https://api.github.com/users/geosword/repos", "events_url": "https://api.github.com/users/geosword/events{/privacy}", "received_events_url": "https://api.github.com/users/geosword/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-07T15:40:55Z", "updated_at": "2020-06-16T13:27:58Z", "closed_at": "2020-06-16T13:27:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/dylanh/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/ansible\r\n  executable location = /home/dylanh/.virtualenvs/ansible-droneci/bin/ansible\r\n  python version = 3.8.2 (default, Feb 26 2020, 22:21:03) [GCC 9.2.1 20200130]\r\nmolecule 3.0.2\r\n   ansible==2.9.6 python==3.8\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nyaml-lint\r\nansible-lint\r\n\r\n# Desired Behavior\r\nI have two scenarios:\r\n```\r\nmolecule\r\n\u251c\u2500\u2500 default\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 converge.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Dockerfile.j2\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 INSTALL.rst\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 verify.yml\r\n\u251c\u2500\u2500 missingvalues\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 converge.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 INSTALL.rst\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 verify.yml\r\n\u2514\u2500\u2500 resources\r\n    \u251c\u2500\u2500 playbooks\r\n    \u2514\u2500\u2500 tests\r\n        \u2514\u2500\u2500 verify.yml\r\n```\r\n```molecule.yml``` in both scenarios are identical:\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nplatforms:\r\n  - name: instance\r\n    image: molecule_debian:buster\r\n    pull: false\r\n    command: /lib/systemd/systemd\r\n    tmpfs:\r\n      - /run\r\n      - /tmp\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n      - /var/run/docker.sock:/var/run/docker.sock\r\n    privileged: true\r\nprovisioner:\r\n  name: ansible\r\n  log: true\r\nverifier:\r\n  name: ansible\r\n  directory: ../resources/tests/\r\n  lint: |\r\n    set -e\r\n    yamllint .\r\n    ansible-lint\r\n```\r\nas per https://molecule.readthedocs.io/en/latest/examples.html#sharing-across-scenarios\r\n\"Playbooks and tests can be shared across scenarios.\"\r\n\r\nTherefore, as ```molecule.yml``` is the same in both scenarios (or when ```--base-config``` is used, then I would expect ```resources/tests/verify.yml``` to be used irrespective of of the ```--scenario``` specified in this example, for a given run.\r\n\r\n# Actual Behaviour\r\n\r\nthe default ```verify.yml``` in ```missingvalues``` is run and the tests in ```resources/tests/verify.yml``` are not.\r\n\r\nOutput:\r\n\r\n```\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 missingvalues\r\n    \u2514\u2500\u2500 verify\r\n\r\n--> Scenario: 'missingvalues'\r\n--> Action: 'verify'\r\n--> Running Ansible Verifier\r\n--> Sanity checks: 'docker'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/plugins/filter:/home/dylanh/development/ansible.droneci/plugins/filter:/home/dylanh/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_LIBRARY: /home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/library:/home/dylanh/development/ansible.droneci/library:/home/dylanh/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/roles:/home/dylanh/development:/home/dylanh/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/dylanh/development/ansible.droneci/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues\r\nMOLECULE_FILE: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /home/dylanh/development/ansible.droneci\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/dylanh/development/ansible.droneci/molecule/missingvalues\r\nMOLECULE_SCENARIO_NAME: missingvalues\r\nMOLECULE_STATE_FILE: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/dylanh/development/ansible.droneci/molecule/missingvalues/../resources/tests/\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/plugins/filter:/home/dylanh/development/ansible.droneci/plugins/filter:/home/dylanh/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/library:/home/dylanh/development/ansible.droneci/library:/home/dylanh/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/roles:/home/dylanh/development:/home/dylanh/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/dylanh/development/ansible.droneci/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues MOLECULE_FILE=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/instance_config.yml MOLECULE_INVENTORY_FILE=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/home/dylanh/development/ansible.droneci MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/dylanh/development/ansible.droneci/molecule/missingvalues MOLECULE_SCENARIO_NAME=missingvalues MOLECULE_STATE_FILE=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/home/dylanh/development/ansible.droneci/molecule/missingvalues/../resources/tests/\r\n\r\nDEBUG: COMMAND\r\n/home/dylanh/.virtualenvs/ansible-droneci/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory /home/dylanh/development/ansible.droneci/molecule/missingvalues/verify.yml -vvv\r\n\r\n    ansible-playbook 2.9.6\r\n      config file = /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/ansible.cfg\r\n      configured module search path = ['/home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules', '/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/library', '/home/dylanh/development/ansible.droneci/library', '/home/dylanh/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/ansible\r\n      executable location = /home/dylanh/.virtualenvs/ansible-droneci/bin/ansible-playbook\r\n      python version = 3.8.2 (default, Feb 26 2020, 22:21:03) [GCC 9.2.1 20200130]\r\n    Using /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/ansible.cfg as config file\r\n    host_list declined parsing /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: verify.yml ***********************************************************\r\n    1 plays in /home/dylanh/development/ansible.droneci/molecule/missingvalues/verify.yml\r\n\r\n    PLAY [Verify] ******************************************************************\r\n\r\n    TASK [Gathering Facts] *********************************************************\r\n    task path: /home/dylanh/development/ansible.droneci/molecule/missingvalues/verify.yml:4\r\n    <instance> Attempting python interpreter discovery\r\n    <instance> ESTABLISH DOCKER CONNECTION FOR USER: root\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', '/bin/sh -c \\'echo PLATFORM; uname; echo FOUND; command -v \\'\"\\'\"\\'/usr/bin/python\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python3.7\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python3.6\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python3.5\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python2.7\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python2.6\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'/usr/libexec/platform-python\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'/usr/bin/python3\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python\\'\"\\'\"\\'; echo ENDFOUND && sleep 0\\'']\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c '/usr/bin/python && sleep 0'\"]\r\n    <instance> Python interpreter discovery fallback (unsupported Linux distribution: debian)\r\n    Using module file /home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/ansible/modules/system/setup.py\r\n    Pipelining is enabled.\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c '/usr/bin/python && sleep 0'\"]\r\n[WARNING]: Platform linux on host instance is using the discovered Python\r\ninterpreter at /usr/bin/python, but future installation of another Python\r\ninterpreter could change this. See https://docs.ansible.com/ansible/2.9/referen\r\nce_appendices/interpreter_discovery.html for more information.\r\n    ok: [instance]\r\n    META: ran handlers\r\n\r\n    TASK [Example assertion] *******************************************************\r\n    task path: /home/dylanh/development/ansible.droneci/molecule/missingvalues/verify.yml:7\r\n    ok: [instance] => {\r\n        \"changed\": false,\r\n        \"msg\": \"All assertions passed\"\r\n    }\r\n    META: ran handlers\r\n    META: ran handlers\r\n\r\n    PLAY RECAP *********************************************************************\r\n    instance                   : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\n\r\nVerifier completed successfully.\r\n````\r\nThis is surprising given ```MOLECULE_VERIFIER_TEST_DIRECTORY``` is set correctly.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2629", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2629/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2629/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2629/events", "html_url": "https://github.com/ansible-community/molecule/issues/2629", "id": 588525099, "node_id": "MDU6SXNzdWU1ODg1MjUwOTk=", "number": 2629, "title": "Proposal: Molecule to require minimal py36", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}, {"id": 1305702160, "node_id": "MDU6TGFiZWwxMzA1NzAyMTYw", "url": "https://api.github.com/repos/ansible-community/molecule/labels/proposal", "name": "proposal", "color": "bfd4f2", "default": false, "description": "Suggestion for a larger change"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, {"login": "pabelanger", "id": 722923, "node_id": "MDQ6VXNlcjcyMjkyMw==", "avatar_url": "https://avatars1.githubusercontent.com/u/722923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pabelanger", "html_url": "https://github.com/pabelanger", "followers_url": "https://api.github.com/users/pabelanger/followers", "following_url": "https://api.github.com/users/pabelanger/following{/other_user}", "gists_url": "https://api.github.com/users/pabelanger/gists{/gist_id}", "starred_url": "https://api.github.com/users/pabelanger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pabelanger/subscriptions", "organizations_url": "https://api.github.com/users/pabelanger/orgs", "repos_url": "https://api.github.com/users/pabelanger/repos", "events_url": "https://api.github.com/users/pabelanger/events{/privacy}", "received_events_url": "https://api.github.com/users/pabelanger/received_events", "type": "User", "site_admin": false}, {"login": "cloudnull", "id": 2066292, "node_id": "MDQ6VXNlcjIwNjYyOTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/2066292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloudnull", "html_url": "https://github.com/cloudnull", "followers_url": "https://api.github.com/users/cloudnull/followers", "following_url": "https://api.github.com/users/cloudnull/following{/other_user}", "gists_url": "https://api.github.com/users/cloudnull/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloudnull/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloudnull/subscriptions", "organizations_url": "https://api.github.com/users/cloudnull/orgs", "repos_url": "https://api.github.com/users/cloudnull/repos", "events_url": "https://api.github.com/users/cloudnull/events{/privacy}", "received_events_url": "https://api.github.com/users/cloudnull/received_events", "type": "User", "site_admin": false}, {"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}, {"login": "ekultails", "id": 10150374, "node_id": "MDQ6VXNlcjEwMTUwMzc0", "avatar_url": "https://avatars3.githubusercontent.com/u/10150374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ekultails", "html_url": "https://github.com/ekultails", "followers_url": "https://api.github.com/users/ekultails/followers", "following_url": "https://api.github.com/users/ekultails/following{/other_user}", "gists_url": "https://api.github.com/users/ekultails/gists{/gist_id}", "starred_url": "https://api.github.com/users/ekultails/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ekultails/subscriptions", "organizations_url": "https://api.github.com/users/ekultails/orgs", "repos_url": "https://api.github.com/users/ekultails/repos", "events_url": "https://api.github.com/users/ekultails/events{/privacy}", "received_events_url": "https://api.github.com/users/ekultails/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/19", "html_url": "https://github.com/ansible-community/molecule/milestone/19", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/19/labels", "id": 5072617, "node_id": "MDk6TWlsZXN0b25lNTA3MjYxNw==", "number": 19, "title": "3.1", "description": "- Drop current deprecations\r\n- Remove podman/docker from core\r\n- Remove testinfra from core\r\n", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 4, "closed_issues": 3, "state": "open", "created_at": "2020-02-04T20:25:49Z", "updated_at": "2020-07-30T15:47:55Z", "due_on": "2020-08-30T07:00:00Z", "closed_at": null}, "comments": 8, "created_at": "2020-03-26T15:50:19Z", "updated_at": "2020-03-27T13:32:01Z", "closed_at": "2020-03-27T10:12:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As py27 is effectively dead and I can no longer keep up the py27 jobs green (two different outages in last 24h), I propose we drop support for py27 in molecule.\r\n\r\nThe next major version `v3.1` will no longer be tested or work with python older than 3.6.\r\n\r\nPlease be aware that this requirement is about molecule itself and that you can still test hosts using any version of python supported by ansible. Still, if you happen to test a py37 based host using delegated driver, you may be in trouble. You would have to spawn two hosts, one that is used by molecule and the tested one.\r\n\r\nPlease use thumbs up and down to vote on this change. Once I receive enough feedback, I will implement the change and unblock current PRs.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2626", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2626/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2626/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2626/events", "html_url": "https://github.com/ansible-community/molecule/issues/2626", "id": 587218737, "node_id": "MDU6SXNzdWU1ODcyMTg3Mzc=", "number": 2626, "title": "Molecule (3) in using ansible-devel: ModuleNotFoundError: No module named 'ansible.module_utils.docker'", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-24T19:13:49Z", "updated_at": "2020-04-07T19:56:29Z", "closed_at": "2020-04-07T19:56:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nAnsible: git+https://github.com/ansible/ansible.git@devel\r\nmolecule: molecule>=3, <4\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- ansible-lint (latest)\r\n\r\n# Desired Behavior\r\n\r\nTests succeed.\r\n\r\n# Actual Behaviour\r\n\r\nI guess Ansible (devel branch) [does not contain all modules anymore](https://github.com/ansible-collections/overview#timeline), and since a few days molecule fails.\r\n\r\nSee [the example build](https://travis-ci.org/github/robertdebock/ansible-role-xinetd/jobs/666179745#L314)\r\n\r\n```\r\n--> Sanity checks: 'docker'\r\nTraceback (most recent call last):\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/decorators.py\", line 21, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/command/test.py\", line 147, in test\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/command/base.py\", line 109, in execute_cmdline_scenarios\r\n    execute_scenario(scenario)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/command/base.py\", line 151, in execute_scenario\r\n    execute_subcommand(scenario.config, action)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/command/base.py\", line 140, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/command/destroy.py\", line 107, in execute\r\n    self._config.provisioner.destroy()\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/provisioner/ansible.py\", line 681, in destroy\r\n    pb.execute()\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/provisioner/ansible_playbook.py\", line 98, in execute\r\n    self._config.driver.sanity_checks()\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/driver/docker.py\", line 222, in sanity_checks\r\n    from ansible.module_utils.docker.common import HAS_DOCKER_PY\r\nModuleNotFoundError: No module named 'ansible.module_utils.docker'\r\nERROR: InvocationError for command /home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/bin/molecule test (exited with code 1)\r\n```\r\n\r\nThis error seems to come from [this file/line](https://github.com/ansible-community/molecule/blob/master/molecule/driver/docker.py#L222).\r\n\r\nMaybe I need to change something, please give me a hint.\r\n\r\nAs always, thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2621", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2621/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2621/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2621/events", "html_url": "https://github.com/ansible-community/molecule/issues/2621", "id": 586962194, "node_id": "MDU6SXNzdWU1ODY5NjIxOTQ=", "number": 2621, "title": "molecule init scenario with delegated creates broken create and destroy playbooks", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-24T13:31:49Z", "updated_at": "2020-03-28T12:07:32Z", "closed_at": "2020-03-28T12:07:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems that this basic use-case got broken during the migration to v3:\r\n```\r\nmolecule init role foo -d delegated\r\ncd foo\r\n\r\n--> Found config file /Users/ssbarnea/.config/molecule/config.yml\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 create\r\n    \u2514\u2500\u2500 prepare\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\n\r\n    PLAY [Create] ******************************************************************\r\n\r\n    TASK [Populate instance config dict] *******************************************\r\n    Tuesday 24 March 2020  13:28:10 +0000 (0:00:00.020)       0:00:00.020 *********\r\nfatal: [localhost]: FAILED! => {\"msg\": \"'server' is undefined\"}\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\n    Tuesday 24 March 2020  13:28:10 +0000 (0:00:00.289)       0:00:00.310 *********\r\n    ===============================================================================\r\n    Populate instance config dict ------------------------------------------- 0.29s\r\n\r\nERROR:\r\nFAIL: 2\r\n```\r\n\r\nSame happens with destroy command.\r\n\r\nThe situation is worsened by the fact that even if you remove the create and destroy playbooks, you endup with an error like:\r\n```\r\nERROR! the playbook: /Users/ssbarnea/c/opendev/ffff/molecule/default/destroy.yml could not be found\r\n```\r\n\r\n## Desired behavior\r\n* presence of create and destroy playbooks should be optional when using delegated driver\r\n* when using init we should always assure that if we produce create or destroy playbooks, they are not broken.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2619", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2619/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2619/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2619/events", "html_url": "https://github.com/ansible-community/molecule/issues/2619", "id": 586478033, "node_id": "MDU6SXNzdWU1ODY0NzgwMzM=", "number": 2619, "title": "Deprecation checking by molecule", "user": {"login": "rsguhr", "id": 20595746, "node_id": "MDQ6VXNlcjIwNTk1NzQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/20595746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsguhr", "html_url": "https://github.com/rsguhr", "followers_url": "https://api.github.com/users/rsguhr/followers", "following_url": "https://api.github.com/users/rsguhr/following{/other_user}", "gists_url": "https://api.github.com/users/rsguhr/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsguhr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsguhr/subscriptions", "organizations_url": "https://api.github.com/users/rsguhr/orgs", "repos_url": "https://api.github.com/users/rsguhr/repos", "events_url": "https://api.github.com/users/rsguhr/events{/privacy}", "received_events_url": "https://api.github.com/users/rsguhr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 864009245, "node_id": "MDU6TGFiZWw4NjQwMDkyNDU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/upstream-bug", "name": "upstream-bug", "color": "960a21", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-23T19:52:13Z", "updated_at": "2020-04-08T08:03:58Z", "closed_at": "2020-04-08T08:03:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Desired Behavior\r\n\r\nIt would be great if molecule could check for deprecations. Often with new releases of Ansible something is announced to be deprecated. A few releases later they remove the deprecated part completely.\r\n\r\nAnsible (and also molecule) shows a warning message on stderr if something deprecated is used e.g.:\r\n```\r\n- include: \"setup-{{ ansible_os_family }}.yml\"\r\n  static: no\r\n```\r\n```\r\n$ molecule syntax\r\n --> Validating schema xxx/molecule/default/molecule.yml.\r\n Validation completed successfully.\r\n --> Test matrix\r\n     \r\n \u2514\u2500\u2500 default\r\n     \u2514\u2500\u2500 syntax\r\n     \r\n --> Scenario: 'default'\r\n --> Action: 'syntax'\r\n [DEPRECATION WARNING]: The use of 'static' has been deprecated. Use\r\n 'import_tasks' for static inclusion, or 'include_tasks' for dynamic inclusion.\r\n This feature will be removed in version 2.12. Deprecation warnings can be\r\n disabled by setting deprecation_warnings=False in ansible.cfg.\r\n     \r\n     playbook: xxx/molecule/default/playbook.yml\r\n```\r\n\r\nCurrently I use following method to check for deprecations:\r\n```\r\ndeprecation:\r\n  stage: meta\r\n  script:\r\n    - molecule syntax > /dev/null 2> deprecation_warnings\r\n    - if [ -s deprecation_warnings ]; then cat deprecation_warnings && exit 1 ; fi\r\n```\r\n(a grep for `[DEPRECATION WARNING]` would be better because the ansible-devel version outputs always something on stderr)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2600", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2600/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2600/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2600/events", "html_url": "https://github.com/ansible-community/molecule/issues/2600", "id": 577009547, "node_id": "MDU6SXNzdWU1NzcwMDk1NDc=", "number": 2600, "title": "lint: documentation possible improvement", "user": {"login": "apatard", "id": 2619394, "node_id": "MDQ6VXNlcjI2MTkzOTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/2619394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apatard", "html_url": "https://github.com/apatard", "followers_url": "https://api.github.com/users/apatard/followers", "following_url": "https://api.github.com/users/apatard/following{/other_user}", "gists_url": "https://api.github.com/users/apatard/gists{/gist_id}", "starred_url": "https://api.github.com/users/apatard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apatard/subscriptions", "organizations_url": "https://api.github.com/users/apatard/orgs", "repos_url": "https://api.github.com/users/apatard/repos", "events_url": "https://api.github.com/users/apatard/events{/privacy}", "received_events_url": "https://api.github.com/users/apatard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-06T15:37:52Z", "updated_at": "2020-03-11T19:58:42Z", "closed_at": "2020-03-11T19:58:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The documentation of molecule 3.0 gives an example on how to write the lint: section of the molecule file:\r\n```lint: |\r\n  set -e\r\n  yamllint .\r\n  ansible-lint\r\n  flake8\r\n```\r\nThis version is not 100% equivalent of what was done with molecule 2.0 for flake8. It was more something like:\r\n```\r\nflake8 molecule/*/tests/*.py\r\n```\r\n\r\nFound out this issue in my Gitlab CI tests. I'm using virtualenv and following their documentation, it's inside the project directory. The result was that flake8 was trying to lint files inside the virtualenv directory. Annoying.\r\n\r\nMaybe add something about it in the documentation ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2599", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2599/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2599/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2599/events", "html_url": "https://github.com/ansible-community/molecule/issues/2599", "id": 575908095, "node_id": "MDU6SXNzdWU1NzU5MDgwOTU=", "number": 2599, "title": "molecule should support current and 2 previous versions of ansible", "user": {"login": "richm", "id": 23066, "node_id": "MDQ6VXNlcjIzMDY2", "avatar_url": "https://avatars2.githubusercontent.com/u/23066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richm", "html_url": "https://github.com/richm", "followers_url": "https://api.github.com/users/richm/followers", "following_url": "https://api.github.com/users/richm/following{/other_user}", "gists_url": "https://api.github.com/users/richm/gists{/gist_id}", "starred_url": "https://api.github.com/users/richm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richm/subscriptions", "organizations_url": "https://api.github.com/users/richm/orgs", "repos_url": "https://api.github.com/users/richm/repos", "events_url": "https://api.github.com/users/richm/events{/privacy}", "received_events_url": "https://api.github.com/users/richm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-05T00:21:51Z", "updated_at": "2020-03-11T20:02:47Z", "closed_at": "2020-03-11T20:02:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\nall\r\n\r\nMolecule installation method (one of):\r\n\r\nall\r\n\r\nAnsible installation method (one of):\r\n\r\nall\r\n\r\n# Desired Behavior\r\n\r\nmolecule should support the currently released, supported version of ansible plus the last two versions.  For example, molecule v3 only supports ansible 2.9 and ansible 2.8 - it should support ansible 2.7.  In general, molecule should support ansible version N, N-1, and N-2", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2598", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2598/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2598/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2598/events", "html_url": "https://github.com/ansible-community/molecule/issues/2598", "id": 575384980, "node_id": "MDU6SXNzdWU1NzUzODQ5ODA=", "number": 2598, "title": "Documentation : Gitlab CI example doesn't match the comment anymore", "user": {"login": "rgarrigue", "id": 1872031, "node_id": "MDQ6VXNlcjE4NzIwMzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1872031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarrigue", "html_url": "https://github.com/rgarrigue", "followers_url": "https://api.github.com/users/rgarrigue/followers", "following_url": "https://api.github.com/users/rgarrigue/following{/other_user}", "gists_url": "https://api.github.com/users/rgarrigue/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarrigue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarrigue/subscriptions", "organizations_url": "https://api.github.com/users/rgarrigue/orgs", "repos_url": "https://api.github.com/users/rgarrigue/repos", "events_url": "https://api.github.com/users/rgarrigue/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarrigue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-04T13:04:55Z", "updated_at": "2020-03-27T14:42:33Z", "closed_at": "2020-03-27T14:42:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nLatest doc\r\n\r\n# Actual Behaviour\r\n\r\nReading https://molecule.readthedocs.io/en/latest/ci.html#gitlab-ci, the explanation and the example doesn't make sense", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2597", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2597/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2597/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2597/events", "html_url": "https://github.com/ansible-community/molecule/issues/2597", "id": 574953085, "node_id": "MDU6SXNzdWU1NzQ5NTMwODU=", "number": 2597, "title": "3.0.2 testinfra not working on freshly initialized role", "user": {"login": "unglaublicherdude", "id": 13208176, "node_id": "MDQ6VXNlcjEzMjA4MTc2", "avatar_url": "https://avatars2.githubusercontent.com/u/13208176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unglaublicherdude", "html_url": "https://github.com/unglaublicherdude", "followers_url": "https://api.github.com/users/unglaublicherdude/followers", "following_url": "https://api.github.com/users/unglaublicherdude/following{/other_user}", "gists_url": "https://api.github.com/users/unglaublicherdude/gists{/gist_id}", "starred_url": "https://api.github.com/users/unglaublicherdude/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unglaublicherdude/subscriptions", "organizations_url": "https://api.github.com/users/unglaublicherdude/orgs", "repos_url": "https://api.github.com/users/unglaublicherdude/repos", "events_url": "https://api.github.com/users/unglaublicherdude/events{/privacy}", "received_events_url": "https://api.github.com/users/unglaublicherdude/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/24", "html_url": "https://github.com/ansible-community/molecule/milestone/24", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/24/labels", "id": 5134474, "node_id": "MDk6TWlsZXN0b25lNTEzNDQ3NA==", "number": 24, "title": "3.0.3", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-24T09:14:53Z", "updated_at": "2020-04-08T16:56:22Z", "due_on": null, "closed_at": "2020-04-08T16:55:43Z"}, "comments": 5, "created_at": "2020-03-03T21:20:40Z", "updated_at": "2020-03-11T20:13:25Z", "closed_at": "2020-03-11T20:13:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\ndocker run -v $(pwd):$(pwd) -w $(pwd) quay.io/ansible/molecule:3.0.2 molecule init role --verifier-name testinfra foobar\r\ndocker run -v /var/run/docker.sock:/var/run/docker.sock -v $(pwd):$(pwd) -w $(pwd) quay.io/ansible/molecule:3.0.2 molecule test\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker\r\n\r\nAnsible installation method (one of):\r\n\r\n- docker\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nThe default tests should run without any problems\r\n\r\n# Actual Behaviour\r\n\r\nan error is thrown\r\n\r\n```\r\nERROR: usage: pytest [options] [file_or_dir] [file_or_dir] [...]\r\npytest: error: unrecognized arguments: --connection=ansible --ansible-inventory=/root/.cache/molecule/foobar/default/inventory/ansible_inventory.yml\r\n  inifile: None\r\n  rootdir: /home/xxx/Downloads/Projects/test/foobar/molecule/default\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2596", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2596/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2596/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2596/events", "html_url": "https://github.com/ansible-community/molecule/issues/2596", "id": 574091794, "node_id": "MDU6SXNzdWU1NzQwOTE3OTQ=", "number": 2596, "title": "Doc bug - Getting Started Guide - Scenario Layout does not match described example", "user": {"login": "mh182", "id": 9980864, "node_id": "MDQ6VXNlcjk5ODA4NjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/9980864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mh182", "html_url": "https://github.com/mh182", "followers_url": "https://api.github.com/users/mh182/followers", "following_url": "https://api.github.com/users/mh182/following{/other_user}", "gists_url": "https://api.github.com/users/mh182/gists{/gist_id}", "starred_url": "https://api.github.com/users/mh182/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mh182/subscriptions", "organizations_url": "https://api.github.com/users/mh182/orgs", "repos_url": "https://api.github.com/users/mh182/repos", "events_url": "https://api.github.com/users/mh182/events{/privacy}", "received_events_url": "https://api.github.com/users/mh182/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-03-02T16:27:54Z", "updated_at": "2020-04-21T15:20:04Z", "closed_at": "2020-03-12T18:13:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report for documentation\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.5\r\n  config file = None\r\n  configured module search path = ['/home/max/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/max/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/max/.local/bin/ansible\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nmolecule 3.0.2\r\n   ansible==2.9.5 python==3.6\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nThe described layout in section _The Scenario Layout_ matches the one created by the example.\r\n\r\n# Actual Behaviour\r\n\r\nThe directory `molecule/default` does not contain the file `Dockerfile.j2`, nor the directory `tests` (which exists in the root director).\r\n\r\n```\r\n$ molecule init role my-new-role\r\n--> Initializing new role my-new-role...\r\n$ tree\r\n.\r\n\u2514\u2500\u2500 my-new-role\r\n    \u251c\u2500\u2500 defaults\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n    \u251c\u2500\u2500 files\r\n    \u251c\u2500\u2500 handlers\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n    \u251c\u2500\u2500 meta\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n    \u251c\u2500\u2500 molecule\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 default\r\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 converge.yml\r\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 INSTALL.rst\r\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 molecule.yml\r\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 verify.yml\r\n    \u251c\u2500\u2500 README.md\r\n    \u251c\u2500\u2500 tasks\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n    \u251c\u2500\u2500 templates\r\n    \u251c\u2500\u2500 tests\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 inventory\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 test.yml\r\n    \u2514\u2500\u2500 vars\r\n        \u2514\u2500\u2500 main.yml\r\n\r\n11 directories, 12 files\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2594", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2594/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2594/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2594/events", "html_url": "https://github.com/ansible-community/molecule/issues/2594", "id": 573272528, "node_id": "MDU6SXNzdWU1NzMyNzI1Mjg=", "number": 2594, "title": "Proposal: `docker commit` During `verify.yml` with Base Image `ENTRYPOINT` and `CMD`", "user": {"login": "hswong3i", "id": 780562, "node_id": "MDQ6VXNlcjc4MDU2Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/780562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hswong3i", "html_url": "https://github.com/hswong3i", "followers_url": "https://api.github.com/users/hswong3i/followers", "following_url": "https://api.github.com/users/hswong3i/following{/other_user}", "gists_url": "https://api.github.com/users/hswong3i/gists{/gist_id}", "starred_url": "https://api.github.com/users/hswong3i/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hswong3i/subscriptions", "organizations_url": "https://api.github.com/users/hswong3i/orgs", "repos_url": "https://api.github.com/users/hswong3i/repos", "events_url": "https://api.github.com/users/hswong3i/events{/privacy}", "received_events_url": "https://api.github.com/users/hswong3i/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1305702160, "node_id": "MDU6TGFiZWwxMzA1NzAyMTYw", "url": "https://api.github.com/repos/ansible-community/molecule/labels/proposal", "name": "proposal", "color": "bfd4f2", "default": false, "description": "Suggestion for a larger change"}, {"id": 288133126, "node_id": "MDU6TGFiZWwyODgxMzMxMjY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/wontfix", "name": "wontfix", "color": "ffdddd", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-29T10:51:40Z", "updated_at": "2020-05-10T13:04:06Z", "closed_at": "2020-05-10T13:04:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Proposal: `docker commit` During `verify.yml` with Base Image `ENTRYPOINT` and `CMD`\r\n\r\n*Author*: Wong Hoi Sing Edison <@hswong3i>\r\n\r\n*Date*: 2020-02-29\r\n\r\n- Status: New\r\n- Proposal type: core design, schema changes\r\n- Estimated time to implement: **DONE** (see #2595)\r\n\r\n\r\n## Motivation\r\n\r\nCreate reusable Docker image after successful Molecule test cases, with original base image's `ENTRYPOINT` and `CMD`.\r\n\r\n### Problems\r\n\r\nWhen creating Docker image with Ansible, we may:\r\n- `Dockerfile` based: Install Ansible and copy Playbooks into container by Dockerfile, then self-provision itself with Molecule + delegated driver to localhost\r\n- `ansible-bender` based: Install podman, buildah and ansible-bender, then provision container from host to running container with buildah\r\n- `molecule` based: run tests with docker or podman driver, then `docker commit` the result running container as a new image\r\n\r\nWith `moledule` based solution, when `docker commit` both `ENTRYPOINT` and `CMD` will be replaced by molecule's `entrypoint` and `command` options (see #2593), e.g. `''` and `bash -c \"sleep infinity\"`.\r\n\r\nWe need a way to discover the original base image's `ENTRYPOINT` and `CMD`, rollback them during `docker commit` with `--change`. \r\n\r\n## Solution proposal\r\n\r\nAdd a new `verify.yml` template for both docker and podman driver, which:\r\n- Discover original base image info with `docker image inspect`\r\n- Commit the result running container with `docker commit`, plus rollback original base image's `ENTRYPOINT` and `CMD` with `--change`\r\n\r\nWith this solution we could also simplify the definition of image meta data with `Dockerfile.j2` during local image creation, e.g. CMD | ENTRYPOINT | ENV | EXPOSE | LABEL | ONBUILD | STOPSIGNAL | USER | VOLUME | WORKDIR.\r\n\r\nWhen compare with other else 2 container provision solution this is much better because:\r\n- `Dockerfile` based: no more Ansible **INSIDE** the result container image (i.e. smaller image size), simplify all provision action into a single layer, support debug intermediate container with `molecule converge`\r\n- `ansible-bender` based: support both docker and podman, with standard ansible coding style supporting (e.g. `import_playbook`, `import_role`, `group_vars`, etc)\r\n\r\n## Dependencies (optional)\r\n\r\nWith #2593 we could ensure both `entrypoint` and `command` are overwritten from `Dockerfile.j2` by molecule correctly during provision phase, where also allow us to resume it as original with this proposal.\r\n\r\n## Testing (optional)\r\n\r\nCorresponding test cases updated (see #2595)\r\n\r\n## Documentation (optional)\r\n\r\nCorresponding documentation updated (see #2595)\r\n\r\n## Anything else?\r\n\r\nAs a side effect we may also remove docker driver support for both `docker_host`, `cacert_path`, `cacert_path`, `key_path` and `tls_verify`, which we also didn't support with podman driver; This simply assuming we are running molecule with docker driver on localhost, only.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2590", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2590/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2590/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2590/events", "html_url": "https://github.com/ansible-community/molecule/issues/2590", "id": 572043447, "node_id": "MDU6SXNzdWU1NzIwNDM0NDc=", "number": 2590, "title": "poll: what should embedded dockerfile install", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1874711573, "node_id": "MDU6TGFiZWwxODc0NzExNTcz", "url": "https://api.github.com/repos/ansible-community/molecule/labels/Polls", "name": "Polls", "color": "ededed", "default": false, "description": null}, {"id": 1305702160, "node_id": "MDU6TGFiZWwxMzA1NzAyMTYw", "url": "https://api.github.com/repos/ansible-community/molecule/labels/proposal", "name": "proposal", "color": "bfd4f2", "default": false, "description": "Suggestion for a larger change"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-27T12:16:33Z", "updated_at": "2020-04-15T17:01:37Z", "closed_at": "2020-04-15T17:01:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Recernly there were more requests to update the packages we install by default using the embedded dockferfile, which aim to make the containers fully manageable by ansible. \r\n\r\nThese involved installing a python version and rsync on a limited set of platforms.\r\n\r\nHistorically we did install python2 on centos-7 and python3 on centos-8 because these are the default platform pythons.\r\n\r\nStill, more recently people asked about installing python3 everywhere. While I am supportive of this move I am confident that this would break some jobs for people that already adopted the embedded dockerfile (they do not have their own copy inside the scenario).\r\n\r\nSo, I decided to make a poll regarding what kind of approach you would want to adopt, please click on the one you want to be the default:\r\n\r\n* `minimal` - ansible will likely even fail to gather_facts, but it will still be able to run `raw` module, that would make quite hard to use containers for common role testing (unless you want to test one that provisions some basic stuff like python itself)\r\n* `mixed-python` - also current behavior, which aims to install the platform default-python, something that is not always clear to define, some not having a preffered one\r\n* `python3` - ths would prioritize python3 if available on that platfrom, we would install python2 only if we cannot install python3. It plays well with already EOL py27, but could impact some users that want to test very old platforms.\r\n\r\nPlease click on the option you want to be the default to vote:\r\n[![](https://api.gh-polls.com/poll/01E2397G05C9G6Q81Z6K07B06Z/minimal)](https://api.gh-polls.com/poll/01E2397G05C9G6Q81Z6K07B06Z/minimal/vote)\n[![](https://api.gh-polls.com/poll/01E2397G05C9G6Q81Z6K07B06Z/mixed-python)](https://api.gh-polls.com/poll/01E2397G05C9G6Q81Z6K07B06Z/mixed-python/vote)\n[![](https://api.gh-polls.com/poll/01E2397G05C9G6Q81Z6K07B06Z/python3)](https://api.gh-polls.com/poll/01E2397G05C9G6Q81Z6K07B06Z/python3/vote)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2587", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2587/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2587/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2587/events", "html_url": "https://github.com/ansible-community/molecule/issues/2587", "id": 570841237, "node_id": "MDU6SXNzdWU1NzA4NDEyMzc=", "number": 2587, "title": "yum-based test images should use Python 3 by default", "user": {"login": "brianhelba", "id": 1282879, "node_id": "MDQ6VXNlcjEyODI4Nzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1282879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianhelba", "html_url": "https://github.com/brianhelba", "followers_url": "https://api.github.com/users/brianhelba/followers", "following_url": "https://api.github.com/users/brianhelba/following{/other_user}", "gists_url": "https://api.github.com/users/brianhelba/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianhelba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianhelba/subscriptions", "organizations_url": "https://api.github.com/users/brianhelba/orgs", "repos_url": "https://api.github.com/users/brianhelba/repos", "events_url": "https://api.github.com/users/brianhelba/events{/privacy}", "received_events_url": "https://api.github.com/users/brianhelba/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-25T21:22:25Z", "updated_at": "2020-03-11T20:04:59Z", "closed_at": "2020-03-11T20:04:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, any image with `dnf` (the replacement for `yum`) will use Python 3, which primarily covers CentOS 8. Currently, images with only `yum` will use Python 2, which primarily covers CentOS 7.\r\n\r\nFollowing #2577 and the fact that Python 2 is End of Life, test images using `yum` should use Python 3 by default. If it's not acceptable to make this change now, then the change should be made when Molecule formally drops support for Python 2.\r\n\r\nThe change can be accomplished by running:\r\n```\r\nyum install -y /usr/bin/python3 /usr/bin/python3-config sudo yum-plugin-ovl bash iproute\r\n```\r\ninstead of\r\n```\r\nyum install -y /usr/bin/python /usr/bin/python2-config sudo yum-plugin-ovl bash iproute\r\n```\r\n[in `molecule/data/Dockerfile.j2`](https://github.com/ansible-community/molecule/blob/eef9a5fd1758d2e30398a81e9a1cd47d54bc6c2a/molecule/data/Dockerfile.j2#L19), `molecule/test/resources/playbooks/docker/Dockerfile.j2`, and `molecule/test/resources/playbooks/podman/Dockerfile.j2`.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2583", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2583/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2583/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2583/events", "html_url": "https://github.com/ansible-community/molecule/issues/2583", "id": 570053690, "node_id": "MDU6SXNzdWU1NzAwNTM2OTA=", "number": 2583, "title": "Unable to use 'synchronize` module from Docker Image", "user": {"login": "dduportal", "id": 1522731, "node_id": "MDQ6VXNlcjE1MjI3MzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1522731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dduportal", "html_url": "https://github.com/dduportal", "followers_url": "https://api.github.com/users/dduportal/followers", "following_url": "https://api.github.com/users/dduportal/following{/other_user}", "gists_url": "https://api.github.com/users/dduportal/gists{/gist_id}", "starred_url": "https://api.github.com/users/dduportal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dduportal/subscriptions", "organizations_url": "https://api.github.com/users/dduportal/orgs", "repos_url": "https://api.github.com/users/dduportal/repos", "events_url": "https://api.github.com/users/dduportal/events{/privacy}", "received_events_url": "https://api.github.com/users/dduportal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-24T18:46:54Z", "updated_at": "2020-02-25T21:15:00Z", "closed_at": "2020-02-25T21:15:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ docker run --rm -ti quay.io/ansible/molecule:3.0.1 sh -c \"ansible --version && molecule --version\"\r\nansible 2.9.4\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.1 (default, Jan 19 2020, 11:48:03) [GCC 9.2.0]\r\nmolecule 3.0.1\r\n   ansible==2.9.4 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):  Docker Image (pip)\r\n\r\nAnsible installation method (one of): Docker Image (pip)\r\n\r\n# Desired Behavior\r\n\r\nAs a molecule user using the Docker image `quay.io/ansible/molecule:3.0.1`\r\nWhen I test an Ansible playbook utilizing the module [`synchronize`](https://docs.ansible.com/ansible/latest/modules/synchronize_module.html) in a task\r\nThen I expect it to synchronize files to remote machines\r\n\r\n# Actual Behaviour\r\n\r\nAny call (in this context) to the module leads to the following error:\r\n\r\n```\r\nfatal: [ubuntu1804]: FAILED! => {\"changed\": false, \"msg\": \"Failed to find required executable rsync in paths: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"}\r\n```\r\n\r\n# Proposed Fix\r\n\r\nInstalling `rsync` in the Docker image fixes this unwanted behavior.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2581", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2581/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2581/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2581/events", "html_url": "https://github.com/ansible-community/molecule/issues/2581", "id": 570050099, "node_id": "MDU6SXNzdWU1NzAwNTAwOTk=", "number": 2581, "title": "Docker Image: using `apk` always fails due to Dockerfile syntax error", "user": {"login": "dduportal", "id": 1522731, "node_id": "MDQ6VXNlcjE1MjI3MzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1522731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dduportal", "html_url": "https://github.com/dduportal", "followers_url": "https://api.github.com/users/dduportal/followers", "following_url": "https://api.github.com/users/dduportal/following{/other_user}", "gists_url": "https://api.github.com/users/dduportal/gists{/gist_id}", "starred_url": "https://api.github.com/users/dduportal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dduportal/subscriptions", "organizations_url": "https://api.github.com/users/dduportal/orgs", "repos_url": "https://api.github.com/users/dduportal/repos", "events_url": "https://api.github.com/users/dduportal/events{/privacy}", "received_events_url": "https://api.github.com/users/dduportal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-24T18:40:56Z", "updated_at": "2020-03-30T13:09:54Z", "closed_at": "2020-02-26T11:54:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ docker run --rm -ti quay.io/ansible/molecule:3.0.1 sh -c \"ansible --version && molecule --version\"\r\nansible 2.9.4\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.1 (default, Jan 19 2020, 11:48:03) [GCC 9.2.0]\r\nmolecule 3.0.1\r\n   ansible==2.9.4 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):  Docker Image (pip)\r\n\r\nAnsible installation method (one of): Docker Image (pip)\r\n\r\n# Desired Behavior\r\n\r\nAs a molecule user using the Docker image `quay.io/ansible/molecule:3.0.1`\r\nWhen I run a container based on this image \r\nAnd that I install any package within using the command `apk add --no-cache <package-name>` (exemple with `rsync`)\r\nThen I expect the package to be installed (with a working network of course).\r\n\r\n# Actual Behaviour\r\n\r\nAny `apk` commands fails with the following error:\r\n\r\n```\r\nERROR: unsatisfiable constraints:\r\n  /root/.cache (missing):\r\n    required by: world[/root/.cache]\r\n  apk (missing):\r\n    required by: world[apk]\r\n  del (missing):\r\n    required by: world[del]\r\n  etc (missing):\r\n    required by: world[etc]\r\n  gem (missing):\r\n    required by: world[gem]\r\n  install (missing):\r\n    required by: world[install]\r\n  json (missing):\r\n    required by: world[json]\r\n  rm (missing):\r\n    required by: world[rm]\r\n  rubocop (missing):\r\n    required by: world[rubocop]\r\n```\r\n\r\n# Reproduction Case:\r\n\r\n```\r\n$ docker run --rm -ti quay.io/ansible/molecule:3.0.1 apk add --no-cache rsync\r\nfetch http://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz\r\nfetch http://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\r\nERROR: unsatisfiable constraints:\r\n  /root/.cache (missing):\r\n    required by: world[/root/.cache]\r\n  apk (missing):\r\n    required by: world[apk]\r\n  del (missing):\r\n    required by: world[del]\r\n  etc (missing):\r\n    required by: world[etc]\r\n  gem (missing):\r\n    required by: world[gem]\r\n  install (missing):\r\n    required by: world[install]\r\n  json (missing):\r\n    required by: world[json]\r\n  rm (missing):\r\n    required by: world[rm]\r\n  rubocop (missing):\r\n    required by: world[rubocop]\r\n```\r\n\r\n# Proposed Fix\r\n\r\nIncoming PR: the flattened `RUN` instruction at https://github.com/ansible-community/molecule/blob/3.0.1/Dockerfile#L137 (link points to `3.0.1` tag but it's the same on `master`) is made of 4 different shell instructions, without any separator, which result in passing the 3 last instructions as arguments to `apk`.\r\n\r\nAdding `&&` instructions separator would fix the issue and provide fail fast pipeline.\r\n\r\nPR incoming\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2570", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2570/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2570/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2570/events", "html_url": "https://github.com/ansible-community/molecule/issues/2570", "id": 568991137, "node_id": "MDU6SXNzdWU1Njg5OTExMzc=", "number": 2570, "title": "Molecule failure molecule_core.py No module named 'molecule'", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-02-21T14:33:20Z", "updated_at": "2020-07-03T09:31:31Z", "closed_at": "2020-03-11T20:08:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I seen this happening when molecule was installed using `pip install --user molecule` on a specific machine but I was not able to reproduce it myself.\r\n\r\n![ss](https://sbarnea.com/ss/Screen-Shot-2020-02-21-14-32-17.23.png)\r\n\r\nI will need more feedback in order to investigate it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2569", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2569/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2569/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2569/events", "html_url": "https://github.com/ansible-community/molecule/issues/2569", "id": 568471405, "node_id": "MDU6SXNzdWU1Njg0NzE0MDU=", "number": 2569, "title": "Invoking a scenario fails if parallel scenarios exist", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-20T17:54:00Z", "updated_at": "2020-02-23T12:08:09Z", "closed_at": "2020-02-23T12:08:09Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.4\r\n  config file = /home/ghelling/.ansible.cfg\r\n  configured module search path = ['/home/ghelling/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ghelling/venv/tools3/lib64/python3.7/site-packages/ansible\r\n  executable location = /home/ghelling/venv/tools3/bin/ansible\r\n  python version = 3.7.6 (default, Jan 30 2020, 09:44:41) [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\r\nmolecule 3.0.0\r\n   ansible==2.9.4 python==3.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI have two scenarios in parallel directories under molecule, as well as a shared folder to hold shared code for both of them:\r\n\r\n```\r\n$ tree -L 1 molecule\r\nmolecule\r\n\u251c\u2500\u2500 docker\r\n\u251c\u2500\u2500 openstack\r\n\u2514\u2500\u2500 shared\r\n```\r\n\r\nI would like to be able to run just the `docker` scenario and test how the migration to 3.0 is coming along\r\n\r\n```\r\n$ molecule lint -s docker\r\n<successful lint run>\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nBecause the OpenStack driver is not yet out/installed (even though the \"docker\" scenario is specifically being selected):\r\n\r\n```\r\n$ molecule lint -s docker\r\n---\r\ndriver:\r\n  name: openstack\r\nplatforms:\r\n  - flavor: ci.m1.medium\r\n    image: CentOS-7-x86_64-GenericCloud-released-latest\r\n    name: test-dhcpd\r\n\r\nERROR: Failed to pre-validate.\r\n\r\n{'driver': [{'name': ['unallowed value openstack']}]}\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2565", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2565/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2565/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2565/events", "html_url": "https://github.com/ansible-community/molecule/issues/2565", "id": 568344146, "node_id": "MDU6SXNzdWU1NjgzNDQxNDY=", "number": 2565, "title": "ability to define implicit preparing command at repository level", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-20T14:36:13Z", "updated_at": "2020-02-20T18:21:48Z", "closed_at": "2020-02-20T18:21:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I recently realized that there is a read need to run a host preparatory command, like a shell script that configures mirrors on hosts.\r\n\r\nIf you have 100 scenarios, changing all of them is a real maintenance nightmare, example https://review.opendev.org/#/c/708808/\r\n\r\nIf we can add an option to molecule to run a script before prepare, for any scenario, we could avoid having to touch all these scenarios.\r\n\r\nImplementing this could be tricky because at prepare step, the only command that we are guaranteed to be able to run is `raw`, as the tested containers may not have python yet.\r\n\r\nRegarding implementation, I would say that molecule could look for presence of `REPO/.config/molecule/prepare.yml` and run it automatically if found.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2564", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2564/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2564/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2564/events", "html_url": "https://github.com/ansible-community/molecule/issues/2564", "id": 568324071, "node_id": "MDU6SXNzdWU1NjgzMjQwNzE=", "number": 2564, "title": "Molecule 3.0.0 introduced a bug at linting step (yamllint)", "user": {"login": "fauust", "id": 2197555, "node_id": "MDQ6VXNlcjIxOTc1NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2197555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fauust", "html_url": "https://github.com/fauust", "followers_url": "https://api.github.com/users/fauust/followers", "following_url": "https://api.github.com/users/fauust/following{/other_user}", "gists_url": "https://api.github.com/users/fauust/gists{/gist_id}", "starred_url": "https://api.github.com/users/fauust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fauust/subscriptions", "organizations_url": "https://api.github.com/users/fauust/orgs", "repos_url": "https://api.github.com/users/fauust/repos", "events_url": "https://api.github.com/users/fauust/events{/privacy}", "received_events_url": "https://api.github.com/users/fauust/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-20T14:04:48Z", "updated_at": "2020-04-23T18:40:36Z", "closed_at": "2020-02-20T14:28:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```bash\r\n\u276f ansible --version && molecule --version                                                                \r\nansible 2.9.5\r\n  config file = None\r\n  configured module search path = ['/home/faust/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/faust/temp/venv/lib/python3.7/site-packages/ansible\r\n  executable location = /home/faust/temp/venv/bin/ansible\r\n  python version = 3.7.3 (default, Dec 20 2019, 18:57:59) [GCC 8.3.0]\r\nmolecule 3.0.0\r\n   ansible==2.9.5 python==3.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWith molecule 2.22\r\n```bash\r\n\u276f molecule --version                                                                                     \r\nmolecule, version 2.22\r\n\u276f molecule lint                                                                                          \r\n--> Validating schema /home/faust/temp/test/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 lint\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/faust/temp/test/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/faust/temp/test/molecule/default/tests/...\r\nLint completed successfully.\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n```bash\r\n~/temp/test\r\n\u276f molecule lint                                                                                          \r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - image: centos:7\r\n    name: instance\r\nprovisioner:\r\n  lint:\r\n    name: ansible-lint\r\n  name: ansible\r\nverifier:\r\n  lint:\r\n    name: flake8\r\n  name: testinfra\r\n\r\nERROR: Failed to pre-validate.\r\n\r\n{'lint': ['must be of string type']}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2560", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2560/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2560/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2560/events", "html_url": "https://github.com/ansible-community/molecule/issues/2560", "id": 566151191, "node_id": "MDU6SXNzdWU1NjYxNTExOTE=", "number": 2560, "title": " Migrating to molecule v3 checklist", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 19, "created_at": "2020-02-17T09:01:17Z", "updated_at": "2020-04-25T06:43:18Z", "closed_at": "2020-02-23T20:19:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# How to migrate to molecule v3 (3.0a9 or newer)\r\nOnly **delegated**, **docker** and **podman** providers are ready, so if you use others, delay till they are updated or preferably give a hand with that. \r\n\r\n- remove `scenario.name` from `molecule.yaml`, from now on, only folder name determines the scenario name\r\n- remove `lint:` sections from molecule.yaml or [replace them with newer syntax from documentation](https://molecule.readthedocs.io/en/latest/configuration.html#lint)\r\n- if you use `testinfra`, add it as a pip dependency, is no longer installed by default\r\n- if you use `linters`, you need to add them as pip dependencies\r\n- (optional) rename `playbook.yml` to `converge.yml` to avoid a deprecation message\r\n\r\n## Known regressions with v3\r\n\r\n* TBH\r\n\r\n# When not to migrate to v3\r\n\r\nIf you use one of:\r\n\r\n* non-core providers like  [Azure](https://github.com/ansible-community/molecule-azure), [EC2](https://github.com/ansible-community/molecule-ec2), [DigitalOcean](https://github.com/ansible-community/molecule-digitalocean), [GCE](https://github.com/ansible-community/molecule-gce), [HetznerCloud,](https://github.com/ansible-community/molecule-hetznercloud) [Linode](https://github.com/ansible-community/molecule-linode), [LXD](https://github.com/ansible-community/molecule-lxd), [OpenStack](https://github.com/ansible-community/molecule-openstack) or [Vagrant](https://github.com/ansible-community/molecule-vagrant), you probably do want to delay migration until they are updated. Keep in mind that as well as molecule, they are fully community supported, so if nobody steps in to help, they will be affected by bit rot and become unusable.\r\n\r\n* you are using [goss](https://github.com/ansible-community/molecule-goss) verifier which was removed. It can still be re-implemented as a plugin, if anyone is willing to help.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2543", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2543/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2543/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2543/events", "html_url": "https://github.com/ansible-community/molecule/issues/2543", "id": 561597629, "node_id": "MDU6SXNzdWU1NjE1OTc2Mjk=", "number": 2543, "title": "3.0a6 & 3.0a7: Verifier testinfra does not run", "user": {"login": "unglaublicherdude", "id": 13208176, "node_id": "MDQ6VXNlcjEzMjA4MTc2", "avatar_url": "https://avatars2.githubusercontent.com/u/13208176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unglaublicherdude", "html_url": "https://github.com/unglaublicherdude", "followers_url": "https://api.github.com/users/unglaublicherdude/followers", "following_url": "https://api.github.com/users/unglaublicherdude/following{/other_user}", "gists_url": "https://api.github.com/users/unglaublicherdude/gists{/gist_id}", "starred_url": "https://api.github.com/users/unglaublicherdude/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unglaublicherdude/subscriptions", "organizations_url": "https://api.github.com/users/unglaublicherdude/orgs", "repos_url": "https://api.github.com/users/unglaublicherdude/repos", "events_url": "https://api.github.com/users/unglaublicherdude/events{/privacy}", "received_events_url": "https://api.github.com/users/unglaublicherdude/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 1, "created_at": "2020-02-07T12:03:29Z", "updated_at": "2020-02-07T21:19:45Z", "closed_at": "2020-02-07T21:19:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nI actually run my tests within the docker images taged as 3.0a6 and 3.0a7\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker\r\n\r\nAnsible installation method (one of):\r\n\r\n- docker\r\n\r\nDetail any linters or test runners used:\r\n\r\nNothing special. I just go interactively into the official container.\r\n\r\n```\r\n$ docker run -it --entrypoint=/bin/sh quay.io/ansible/molecule:3.0a6\r\n$$ molecule init role --verifier testinfra rolename\r\n$$ cd rolename\r\n$$ molecule test --all\r\n[...]\r\n--> Scenario: 'install_docker_with_platform_container'\r\n--> Action: 'verify'\r\nSkipping, verify playbook not configured.\r\n[...]\r\n```\r\n\r\n# Desired Behavior\r\n\r\nIt should have run the tests the initializer placed in the tests directory.\r\n\r\n# Actual Behaviour\r\n\r\nIt skips the tests.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2541", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2541/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2541/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2541/events", "html_url": "https://github.com/ansible-community/molecule/issues/2541", "id": 561586838, "node_id": "MDU6SXNzdWU1NjE1ODY4Mzg=", "number": 2541, "title": "3.0a6: molecule fails to find renamed playbook.yml", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 0, "created_at": "2020-02-07T11:39:53Z", "updated_at": "2020-02-07T18:36:17Z", "closed_at": "2020-02-07T18:36:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "On 3.0a6, if you renamed `playbook.yml` to `converge.yml` you will get an error tying to run `molecule check`.\r\n\r\nThis is because we missed to implement that in check. I will make a fix today.\r\n\r\nActions reported as affected:\r\n* check\r\n* syntax\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2539", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2539/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2539/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2539/events", "html_url": "https://github.com/ansible-community/molecule/issues/2539", "id": 561519041, "node_id": "MDU6SXNzdWU1NjE1MTkwNDE=", "number": 2539, "title": "Improvements for CLI", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-07T09:28:45Z", "updated_at": "2020-04-15T16:58:24Z", "closed_at": "2020-04-15T16:58:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Using this as a placeholder for small improvements made to the command line, so it is easier to use the tool and minimize number of keystrokes needed for achieving common tasks.\r\n\r\n# force\r\nAdd `-f` alias for `--force`, quite common to force running a step, like prepare\r\n\r\n# scenario as argument\r\nTransform scenario from being an option to be an argument, or allow both\r\n```\r\n# before\r\nmolecule prepare -s foo\r\n# after\r\nmolecule prepare foo\r\n```\r\n\r\nThis is possible be I do not yet see a use to have more than one action on a single call, which means that following argument can be used to mention scenario to apply to.\r\n\r\n# Mention force option when returning skipping\r\nWhen running on interactive tty (opposed to CI), it could be useful to mention that user can use force option to enforce execution of a prepared host.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2537", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2537/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2537/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2537/events", "html_url": "https://github.com/ansible-community/molecule/issues/2537", "id": 561316719, "node_id": "MDU6SXNzdWU1NjEzMTY3MTk=", "number": 2537, "title": "Adopt more modern ansible defaults", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-06T22:50:35Z", "updated_at": "2020-03-12T18:13:46Z", "closed_at": "2020-03-12T18:13:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As molecule is testing tool which will be used a lot for migrating Ansible code from older versions to newer ones, we can and probably should pick more brave and future-proof defaults than the stock Ansible.\r\n\r\nObviously that we will need to be careful about what we pick as we do want to avoid diverging too much from vanilla settings as users may miss doing the same and be surprised to discover issues when deploying to production.\r\n\r\nIdeas about newer defaults to avoid deprecation warnings:\r\n- `defaults.interpreter_python=auto`\r\n- `defaults.forks=50` instead of 5\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2531", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2531/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2531/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2531/events", "html_url": "https://github.com/ansible-community/molecule/issues/2531", "id": 559883275, "node_id": "MDU6SXNzdWU1NTk4ODMyNzU=", "number": 2531, "title": "proposal: rename playbook.yml to converge.yml", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1305702160, "node_id": "MDU6TGFiZWwxMzA1NzAyMTYw", "url": "https://api.github.com/repos/ansible-community/molecule/labels/proposal", "name": "proposal", "color": "bfd4f2", "default": false, "description": "Suggestion for a larger change"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, {"login": "pabelanger", "id": 722923, "node_id": "MDQ6VXNlcjcyMjkyMw==", "avatar_url": "https://avatars1.githubusercontent.com/u/722923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pabelanger", "html_url": "https://github.com/pabelanger", "followers_url": "https://api.github.com/users/pabelanger/followers", "following_url": "https://api.github.com/users/pabelanger/following{/other_user}", "gists_url": "https://api.github.com/users/pabelanger/gists{/gist_id}", "starred_url": "https://api.github.com/users/pabelanger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pabelanger/subscriptions", "organizations_url": "https://api.github.com/users/pabelanger/orgs", "repos_url": "https://api.github.com/users/pabelanger/repos", "events_url": "https://api.github.com/users/pabelanger/events{/privacy}", "received_events_url": "https://api.github.com/users/pabelanger/received_events", "type": "User", "site_admin": false}, {"login": "dmsimard", "id": 1291204, "node_id": "MDQ6VXNlcjEyOTEyMDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1291204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmsimard", "html_url": "https://github.com/dmsimard", "followers_url": "https://api.github.com/users/dmsimard/followers", "following_url": "https://api.github.com/users/dmsimard/following{/other_user}", "gists_url": "https://api.github.com/users/dmsimard/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmsimard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmsimard/subscriptions", "organizations_url": "https://api.github.com/users/dmsimard/orgs", "repos_url": "https://api.github.com/users/dmsimard/repos", "events_url": "https://api.github.com/users/dmsimard/events{/privacy}", "received_events_url": "https://api.github.com/users/dmsimard/received_events", "type": "User", "site_admin": false}, {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, {"login": "cloudnull", "id": 2066292, "node_id": "MDQ6VXNlcjIwNjYyOTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/2066292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloudnull", "html_url": "https://github.com/cloudnull", "followers_url": "https://api.github.com/users/cloudnull/followers", "following_url": "https://api.github.com/users/cloudnull/following{/other_user}", "gists_url": "https://api.github.com/users/cloudnull/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloudnull/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloudnull/subscriptions", "organizations_url": "https://api.github.com/users/cloudnull/orgs", "repos_url": "https://api.github.com/users/cloudnull/repos", "events_url": "https://api.github.com/users/cloudnull/events{/privacy}", "received_events_url": "https://api.github.com/users/cloudnull/received_events", "type": "User", "site_admin": false}, {"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}, {"login": "ekultails", "id": 10150374, "node_id": "MDQ6VXNlcjEwMTUwMzc0", "avatar_url": "https://avatars3.githubusercontent.com/u/10150374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ekultails", "html_url": "https://github.com/ekultails", "followers_url": "https://api.github.com/users/ekultails/followers", "following_url": "https://api.github.com/users/ekultails/following{/other_user}", "gists_url": "https://api.github.com/users/ekultails/gists{/gist_id}", "starred_url": "https://api.github.com/users/ekultails/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ekultails/subscriptions", "organizations_url": "https://api.github.com/users/ekultails/orgs", "repos_url": "https://api.github.com/users/ekultails/repos", "events_url": "https://api.github.com/users/ekultails/events{/privacy}", "received_events_url": "https://api.github.com/users/ekultails/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-04T17:54:22Z", "updated_at": "2020-02-05T13:23:27Z", "closed_at": "2020-02-05T13:23:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "## Motivation\r\n\r\nIn order to make molecule less confusing for users, I would like to propose renaming `playbook.yml` to `converge.yml`.\r\n\r\n### Problems\r\n\r\nEach sequence command should match a file name with the same name. This is true to most cases but not for the most important one, `converge` command which loads playbook file.\r\n\r\nIt is easy to understand how this creates confusions\r\n\r\n## Solution proposal\r\n\r\nFirst step would be to change code to look first for new name and fallback to old name with a deprecation warning, mainly not a breaking change.\r\n\r\n## Anything else?\r\n\r\nIf you have others ideas regarding matching sequence steps to playbooks names, please comment.\r\n\r\nAlso use thumbs up and down to support of express disapproval about the proposal.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2528", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2528/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2528/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2528/events", "html_url": "https://github.com/ansible-community/molecule/issues/2528", "id": 559664196, "node_id": "MDU6SXNzdWU1NTk2NjQxOTY=", "number": 2528, "title": "testinfra template breaks pytest collection", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-04T11:42:36Z", "updated_at": "2020-02-15T18:09:19Z", "closed_at": "2020-02-15T18:09:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems that our templates used by testinfra create some python test files which are breaking the collection on pytest.\r\n\r\n```\r\n_ ERROR collecting molecule/test/scenarios/verifier/molecule/testinfra/tests/test_default.py _\r\nmolecule/test/scenarios/verifier/molecule/testinfra/tests/test_default.py:8: in <module>\r\n    os.environ['MOLECULE_INVENTORY_FILE']\r\n.tox/py27-ansible28-unit/lib/python2.7/UserDict.py:40: in __getitem__\r\n    raise KeyError(key)\r\nE   KeyError: 'MOLECULE_INVENTORY_FILE'\r\n```\r\n\r\nThat code can be rewritten in such way that it would not break pytest execution by default. We need to do this and also to implement a check to avoid regression. \r\n\r\nShortly, running `pytest --collect-only` after expanding a template should never fail.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2517", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2517/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2517/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2517/events", "html_url": "https://github.com/ansible-community/molecule/issues/2517", "id": 556322900, "node_id": "MDU6SXNzdWU1NTYzMjI5MDA=", "number": 2517, "title": "Dockerfile.j2 does not support Ubuntu 20.04/focal or CentOS/RHEL 8 = no \"python\" package", "user": {"login": "dgvigil", "id": 1594166, "node_id": "MDQ6VXNlcjE1OTQxNjY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1594166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dgvigil", "html_url": "https://github.com/dgvigil", "followers_url": "https://api.github.com/users/dgvigil/followers", "following_url": "https://api.github.com/users/dgvigil/following{/other_user}", "gists_url": "https://api.github.com/users/dgvigil/gists{/gist_id}", "starred_url": "https://api.github.com/users/dgvigil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dgvigil/subscriptions", "organizations_url": "https://api.github.com/users/dgvigil/orgs", "repos_url": "https://api.github.com/users/dgvigil/repos", "events_url": "https://api.github.com/users/dgvigil/events{/privacy}", "received_events_url": "https://api.github.com/users/dgvigil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-28T16:26:13Z", "updated_at": "2020-01-31T20:27:39Z", "closed_at": "2020-01-28T16:54:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.4\r\n  config file = None\r\n  configured module search path = ['/Users/dgvigi/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.6 (default, Dec 30 2019, 19:38:28) [Clang 11.0.0 (clang-1100.0.33.16)]\r\nmolecule, version 2.22\r\n```\r\n\r\n\r\n# Desired Behavior\r\nI am unable to build updated containers with which to test my code.\r\n\r\n# Actual Behaviour\r\n\r\nThe `TASK [Build an Ansible compatible image (new)]` fails since CentOS/RHEL 8 and Ubuntu 20.04 no longer have a package named `python`. \r\n\r\nfrom CentOS 8:\r\n`failed: [localhost] (item=molecule_local/centos:8)` ... `, 'No match for argument: python\\\\n', 'There are following alternatives for \\\"python\\\": python2, python36\\\\n', 'No match for argument: python-devel\\\\n', 'Package python3-dnf-4.2.7-7.el8_1.noarch is already installed.\\\\n', 'Package bash-4.4.19-10.el8.x86_64 is already installed.\\\\n', 'Package iproute-4.18.0-15.el8.x86_64 is already installed.\\\\n', '\\\\x1b[91mError: Unable to find a match: python python-devel\\\\n\\\\x1b[0m', 'Removing intermediate container 63b86fe3c05c\\\\n']\"}`\r\n\r\nand from Ubuntu 20:04\r\n`failed: [localhost] (item=molecule_local/ubuntu:focal)` ... `'Package python is not available, but is referred to by another package.\\\\nThis may mean that the package is missing, has been obsoleted, or\\\\nis only available from another source\\\\nHowever the following packages replace it:\\\\n  python2-minimal python2 2to3\\\\n\\\\n', \\\"\\\\x1b[91mE: Package 'python' has no installation candidate\\\\n\\\\x1b[0m\\\", 'Removing intermediate container 9a38944294fe\\\\n']\"}`\r\n\r\nThere is a little bit of crossover here with: #2348 ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2507", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2507/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2507/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2507/events", "html_url": "https://github.com/ansible-community/molecule/issues/2507", "id": 555125660, "node_id": "MDU6SXNzdWU1NTUxMjU2NjA=", "number": 2507, "title": "Make molecule code pycodestyle compliant", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-25T19:15:48Z", "updated_at": "2020-04-15T16:59:03Z", "closed_at": "2020-04-15T16:59:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Installing `flake8-docstrings` and running flake8 on molecule should pass. Currently, there is  a huge list of rules that are not followed.\r\n\r\nWe need to address this in a progressive manner: first enabling it and skipping most rules and in follow-ups to resolve them, one by one.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2502", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2502/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2502/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2502/events", "html_url": "https://github.com/ansible-community/molecule/issues/2502", "id": 555068335, "node_id": "MDU6SXNzdWU1NTUwNjgzMzU=", "number": 2502, "title": "reimplement release of molecule using zuul", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1618323913, "node_id": "MDU6TGFiZWwxNjE4MzIzOTEz", "url": "https://api.github.com/repos/ansible-community/molecule/labels/skip-changelog", "name": "skip-changelog", "color": "eeeeee", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "pabelanger", "id": 722923, "node_id": "MDQ6VXNlcjcyMjkyMw==", "avatar_url": "https://avatars1.githubusercontent.com/u/722923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pabelanger", "html_url": "https://github.com/pabelanger", "followers_url": "https://api.github.com/users/pabelanger/followers", "following_url": "https://api.github.com/users/pabelanger/following{/other_user}", "gists_url": "https://api.github.com/users/pabelanger/gists{/gist_id}", "starred_url": "https://api.github.com/users/pabelanger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pabelanger/subscriptions", "organizations_url": "https://api.github.com/users/pabelanger/orgs", "repos_url": "https://api.github.com/users/pabelanger/repos", "events_url": "https://api.github.com/users/pabelanger/events{/privacy}", "received_events_url": "https://api.github.com/users/pabelanger/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 3, "created_at": "2020-01-25T10:19:13Z", "updated_at": "2020-02-10T15:32:46Z", "closed_at": "2020-02-10T15:32:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Since we moved from Travis to Zuul CI we have reimplement its release logic job.\r\n\r\nOn **tag pushes** the following must run:\r\n\r\n```bash\r\ntox -e build-dists\r\ntwine upload --disable-progress-bar --skip-existing --verbose dist/*\r\n```\r\n\r\nObviously that twine needs to be configured with credentials in order to be able to do this.\r\n\r\n@pabelanger I will need few hints from you about how to do this, maybe you have a similar example? I suppose that job will not be defined in repo.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2496", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2496/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2496/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2496/events", "html_url": "https://github.com/ansible-community/molecule/issues/2496", "id": 553602050, "node_id": "MDU6SXNzdWU1NTM2MDIwNTA=", "number": 2496, "title": "add molecule reset command", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-22T15:06:11Z", "updated_at": "2020-02-07T18:18:06Z", "closed_at": "2020-02-07T18:18:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If you switch driver on existing scenario you are high-likely to endup with molecule being broken because the temporary files are not updated and it still believes instances are managed by different driver.\r\n\r\nThis is usually fixed by doing a  `rm -rf ~/.cache/molecule/*`, but it should be a `molecule reset` command that does this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2495", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2495/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2495/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2495/events", "html_url": "https://github.com/ansible-community/molecule/issues/2495", "id": 552419803, "node_id": "MDU6SXNzdWU1NTI0MTk4MDM=", "number": 2495, "title": "molecule.yml schema validator is too restrictive for 'env'", "user": {"login": "greenmaid", "id": 34271425, "node_id": "MDQ6VXNlcjM0MjcxNDI1", "avatar_url": "https://avatars0.githubusercontent.com/u/34271425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greenmaid", "html_url": "https://github.com/greenmaid", "followers_url": "https://api.github.com/users/greenmaid/followers", "following_url": "https://api.github.com/users/greenmaid/following{/other_user}", "gists_url": "https://api.github.com/users/greenmaid/gists{/gist_id}", "starred_url": "https://api.github.com/users/greenmaid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greenmaid/subscriptions", "organizations_url": "https://api.github.com/users/greenmaid/orgs", "repos_url": "https://api.github.com/users/greenmaid/repos", "events_url": "https://api.github.com/users/greenmaid/events{/privacy}", "received_events_url": "https://api.github.com/users/greenmaid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "greenmaid", "id": 34271425, "node_id": "MDQ6VXNlcjM0MjcxNDI1", "avatar_url": "https://avatars0.githubusercontent.com/u/34271425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greenmaid", "html_url": "https://github.com/greenmaid", "followers_url": "https://api.github.com/users/greenmaid/followers", "following_url": "https://api.github.com/users/greenmaid/following{/other_user}", "gists_url": "https://api.github.com/users/greenmaid/gists{/gist_id}", "starred_url": "https://api.github.com/users/greenmaid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greenmaid/subscriptions", "organizations_url": "https://api.github.com/users/greenmaid/orgs", "repos_url": "https://api.github.com/users/greenmaid/repos", "events_url": "https://api.github.com/users/greenmaid/events{/privacy}", "received_events_url": "https://api.github.com/users/greenmaid/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-20T17:06:32Z", "updated_at": "2020-01-28T15:16:03Z", "closed_at": "2020-01-28T15:16:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.3\r\n  ...\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method:\r\n\r\n- pip\r\n\r\nAnsible installation method:\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nmolecule.yml:\r\n```\r\nplatforms:\r\n  - name: instance\r\n    image: centos:7\r\n    env: \r\n      test.env: something\r\n```\r\n\r\n# Desired Behavior\r\n\r\nSchema validator should comple successfully and container be running with 'test.env' variable\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n$ molecule create\r\n--> Validating schema /xxxxx/molecule/default/molecule.yml.\r\nERROR: Failed to validate.\r\n\r\n{'platforms': [{0: [{'env': [{'test.env': [\"value does not match regex '^[a-zA-Z0-9_-]+$'\"]}]}]}]}\r\n```\r\n\r\n\r\nAccording to used regexp, variable names should not contain point ('.') character. I think it is too restrictive, some products (eg elasticsearch) are configured using such variables.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2493", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2493/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2493/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2493/events", "html_url": "https://github.com/ansible-community/molecule/issues/2493", "id": 551345377, "node_id": "MDU6SXNzdWU1NTEzNDUzNzc=", "number": 2493, "title": "Doc Bug: gitlab-ci config descriptive text incorrect", "user": {"login": "mancdaz", "id": 562262, "node_id": "MDQ6VXNlcjU2MjI2Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/562262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mancdaz", "html_url": "https://github.com/mancdaz", "followers_url": "https://api.github.com/users/mancdaz/followers", "following_url": "https://api.github.com/users/mancdaz/following{/other_user}", "gists_url": "https://api.github.com/users/mancdaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mancdaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mancdaz/subscriptions", "organizations_url": "https://api.github.com/users/mancdaz/orgs", "repos_url": "https://api.github.com/users/mancdaz/repos", "events_url": "https://api.github.com/users/mancdaz/events{/privacy}", "received_events_url": "https://api.github.com/users/mancdaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-01-17T10:53:33Z", "updated_at": "2020-04-07T19:58:56Z", "closed_at": "2020-04-07T19:58:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\nThis is a doc bug regarding gitlab-ci config\r\n\r\n# Bug report\r\nPR https://github.com/ansible/molecule/pull/2112 edited the gitlab-ci config to remove tags and make it more generic. It also removed the part of the config where the virtualenv is setup. However, the descriptive text in the docs still contains:\r\n\r\n```Here is an example setting up a virtualenv and testing an Ansible role via Molecule. User-level pip is cached and so is the virtual environment to save time. And this is run over a runner tagged pip36 and docker, because its a minimal CentOS 7 VM installed with pip36 from IUS repository and docker.```\r\n\r\n# Desired Behavior\r\n\r\nThis is confusing given that the example config no longer uses tags or venv. I would suggest adding a separate config for users who want to use tags, and a more generic one for those who don't. I actually think the example using a venv is valuable and should be added back.\r\nEither this, or the descriptive text needs to change to reflect what is actually in the current example.\r\n\r\n\r\n# Actual Behaviour\r\n\r\nSee above description of doc bug\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2491", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2491/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2491/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2491/events", "html_url": "https://github.com/ansible-community/molecule/issues/2491", "id": 550756426, "node_id": "MDU6SXNzdWU1NTA3NTY0MjY=", "number": 2491, "title": "conftest.py logically dead code", "user": {"login": "huornlmj", "id": 28444739, "node_id": "MDQ6VXNlcjI4NDQ0NzM5", "avatar_url": "https://avatars3.githubusercontent.com/u/28444739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huornlmj", "html_url": "https://github.com/huornlmj", "followers_url": "https://api.github.com/users/huornlmj/followers", "following_url": "https://api.github.com/users/huornlmj/following{/other_user}", "gists_url": "https://api.github.com/users/huornlmj/gists{/gist_id}", "starred_url": "https://api.github.com/users/huornlmj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huornlmj/subscriptions", "organizations_url": "https://api.github.com/users/huornlmj/orgs", "repos_url": "https://api.github.com/users/huornlmj/repos", "events_url": "https://api.github.com/users/huornlmj/events{/privacy}", "received_events_url": "https://api.github.com/users/huornlmj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-16T11:47:25Z", "updated_at": "2020-01-31T20:41:24Z", "closed_at": "2020-01-31T20:41:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/ansible/molecule/blob/65101392b49bc18581ee78ae17669db97f7df77f/molecule/test/conftest.py#L146\r\n\r\nThe line `if not is_sharded:` cannot be evaluated as true so the condition it controls is dead, not reachable.  `is_sharded` is assigned True on line 143 (boolean).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2490", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2490/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2490/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2490/events", "html_url": "https://github.com/ansible-community/molecule/issues/2490", "id": 549481146, "node_id": "MDU6SXNzdWU1NDk0ODExNDY=", "number": 2490, "title": "molecule.yml user template", "user": {"login": "apatard", "id": 2619394, "node_id": "MDQ6VXNlcjI2MTkzOTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/2619394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apatard", "html_url": "https://github.com/apatard", "followers_url": "https://api.github.com/users/apatard/followers", "following_url": "https://api.github.com/users/apatard/following{/other_user}", "gists_url": "https://api.github.com/users/apatard/gists{/gist_id}", "starred_url": "https://api.github.com/users/apatard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apatard/subscriptions", "organizations_url": "https://api.github.com/users/apatard/orgs", "repos_url": "https://api.github.com/users/apatard/repos", "events_url": "https://api.github.com/users/apatard/events{/privacy}", "received_events_url": "https://api.github.com/users/apatard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-14T10:42:47Z", "updated_at": "2020-02-02T15:38:57Z", "closed_at": "2020-02-02T15:38:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\nIt's possible to provide a template for scenario with `--driver-template` but it's quite limited.\r\nIs there a way to change the `molecule.yml` template ?\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\nansible 2.7.7, molecule 2.22\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\n# Desired Behavior\r\n\r\nPlease give some details of the feature being requested\r\n\r\nI'm using the same `molecule.yml` file for role testing, with the only difference being the instance name and the docker image to use (for my docker based tests). In reality, it's the same `molecule.yml` everywhere and I'm using variables.\r\n\r\nOf course, it's not the same as the default one provided by molecule. It would be nice if it was possible to provide a template for it, instead of using `molecule init scenario ...` and then overwrite the `molecule.yml` file. That would make one thing less to do.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2489", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2489/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2489/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2489/events", "html_url": "https://github.com/ansible-community/molecule/issues/2489", "id": 548905177, "node_id": "MDU6SXNzdWU1NDg5MDUxNzc=", "number": 2489, "title": "molecule does not find docker within pipx venv", "user": {"login": "stefangweichinger", "id": 2673904, "node_id": "MDQ6VXNlcjI2NzM5MDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/2673904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefangweichinger", "html_url": "https://github.com/stefangweichinger", "followers_url": "https://api.github.com/users/stefangweichinger/followers", "following_url": "https://api.github.com/users/stefangweichinger/following{/other_user}", "gists_url": "https://api.github.com/users/stefangweichinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefangweichinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefangweichinger/subscriptions", "organizations_url": "https://api.github.com/users/stefangweichinger/orgs", "repos_url": "https://api.github.com/users/stefangweichinger/repos", "events_url": "https://api.github.com/users/stefangweichinger/events{/privacy}", "received_events_url": "https://api.github.com/users/stefangweichinger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-13T12:41:35Z", "updated_at": "2020-01-14T12:26:36Z", "closed_at": "2020-01-14T12:26:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\npipx list\r\nvenvs are in /home/sgw/.local/pipx/venvs\r\napps are exposed on your $PATH at /home/sgw/.local/bin\r\n   package ansible 2.9.2, Python 3.7.6\r\n    - ansible\r\n    - ansible-config\r\n    - ansible-connection\r\n    - ansible-console\r\n    - ansible-doc\r\n    - ansible-galaxy\r\n    - ansible-inventory\r\n    - ansible-playbook\r\n    - ansible-pull\r\n    - ansible-test\r\n    - ansible-vault\r\n   package debops 1.2.1, Python 3.7.6\r\n    - debops\r\n    - debops-defaults\r\n    - debops-init\r\n    - debops-padlock\r\n    - debops-task\r\n    - debops-update\r\n   package docker 4.1.0, Python 3.7.6\r\n    - chardetect\r\n    - wsdump.py\r\n   package molecule 2.22, Python 3.7.6\r\n    - molecule\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pipx\r\n\r\nAnsible installation method (one of):\r\n- pipx\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nmolecule should correctly create/destroy/converge docker containers.\r\nIt does so if I use my old python venv, but not with the environment created with pipx.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\nmolecule --debug destroy\r\n--> Validating schema /home/sgw/projects/github/xyx/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Validating schema /home/sgw/projects/github/xyx/molecule/travis/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n--> Sanity checks: 'docker'\r\nERROR: Missing Docker driver dependency. Please install via 'molecule[docker]' or refer to your INSTALL.rst driver documentation file\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2488", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2488/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2488/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2488/events", "html_url": "https://github.com/ansible-community/molecule/issues/2488", "id": 547610696, "node_id": "MDU6SXNzdWU1NDc2MTA2OTY=", "number": 2488, "title": "Migrate to Ansible Zuul CI", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars1.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-09T17:12:28Z", "updated_at": "2020-01-24T09:35:06Z", "closed_at": "2020-01-24T09:34:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We should migrate from Travis CI to Ansible Zuul CI as this would allow us to test on many other plaforms and also speedup the gating.\r\n\r\nWe do expect to run Travis and Zuul in paralele for a long time before disabling travis.\r\n\r\n## Pending actions\r\n\r\n- [ ] @ssbarnea: https://github.com/ansible/ansible-zuul-jobs/issues/292\r\n- [ ] @gundalow  to add [ansible-zuul](https://pypi.org/user/ansible-zuul/) as maintainer of [molecule](https://pypi.org/project/molecule/) package, also to cleanup the list of accounts there (keep two humans as backups in case we ever need to remove a bad release).\r\n\r\n## Delayed actions\r\n- [ ] @gundalow to perform repository move to ansible-community\r\n- [ ] @ssbarnea to remove travis config", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2485", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2485/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2485/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2485/events", "html_url": "https://github.com/ansible-community/molecule/issues/2485", "id": 545487051, "node_id": "MDU6SXNzdWU1NDU0ODcwNTE=", "number": 2485, "title": "macOS Catalina", "user": {"login": "netgain-justin-trantham", "id": 57366553, "node_id": "MDQ6VXNlcjU3MzY2NTUz", "avatar_url": "https://avatars1.githubusercontent.com/u/57366553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/netgain-justin-trantham", "html_url": "https://github.com/netgain-justin-trantham", "followers_url": "https://api.github.com/users/netgain-justin-trantham/followers", "following_url": "https://api.github.com/users/netgain-justin-trantham/following{/other_user}", "gists_url": "https://api.github.com/users/netgain-justin-trantham/gists{/gist_id}", "starred_url": "https://api.github.com/users/netgain-justin-trantham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/netgain-justin-trantham/subscriptions", "organizations_url": "https://api.github.com/users/netgain-justin-trantham/orgs", "repos_url": "https://api.github.com/users/netgain-justin-trantham/repos", "events_url": "https://api.github.com/users/netgain-justin-trantham/events{/privacy}", "received_events_url": "https://api.github.com/users/netgain-justin-trantham/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-06T00:13:36Z", "updated_at": "2020-01-06T03:39:53Z", "closed_at": "2020-01-06T03:39:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey all,\r\n\r\nI've been having some terrible issues getting molecule to work properly as it was before I got a new laptop on Catalina.\r\n\r\nBelow is what I get when just running a simple molecule create\r\n\r\n`--> Validating schema /Users/justintrantham/git/ansible/roles/malwarebytes-scan/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 create\r\n    \u2514\u2500\u2500 prepare\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/justintrantham/Library/Python/3.7/lib/python/site-packages/click/core.py\", line 764, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/justintrantham/Library/Python/3.7/lib/python/site-packages/click/core.py\", line 717, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/justintrantham/Library/Python/3.7/lib/python/site-packages/click/core.py\", line 1137, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/justintrantham/Library/Python/3.7/lib/python/site-packages/click/core.py\", line 956, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/justintrantham/Library/Python/3.7/lib/python/site-packages/click/core.py\", line 555, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/Users/justintrantham/Library/Python/3.7/lib/python/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/create.py\", line 117, in create\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/base.py\", line 98, in execute_cmdline_scenarios\r\n    execute_scenario(scenario)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/base.py\", line 141, in execute_scenario\r\n    execute_subcommand(scenario.config, action)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/base.py\", line 128, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/create.py\", line 90, in execute\r\n    self._config.provisioner.create()\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/provisioner/ansible.py\", line 700, in create\r\n    pb.execute()\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/provisioner/ansible_playbook.py\", line 92, in execute\r\n    self.bake()\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/provisioner/ansible_playbook.py\", line 67, in bake\r\n    self._ansible_command = sh.ansible_playbook.bake(\r\n  File \"/Users/justintrantham/Library/Python/3.7/lib/python/site-packages/sh.py\", line 3349, in __getattr__\r\n    return self.__env[name]\r\n  File \"/Users/justintrantham/Library/Python/3.7/lib/python/site-packages/sh.py\", line 3226, in __getitem__\r\n    raise CommandNotFound(k)\r\nsh.CommandNotFound: ansible_playbook\r\n`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2478", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2478/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2478/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2478/events", "html_url": "https://github.com/ansible-community/molecule/issues/2478", "id": 542294009, "node_id": "MDU6SXNzdWU1NDIyOTQwMDk=", "number": 2478, "title": "When test successfully passes, private_key disapears", "user": {"login": "BerkhanBerkdemir", "id": 24360355, "node_id": "MDQ6VXNlcjI0MzYwMzU1", "avatar_url": "https://avatars2.githubusercontent.com/u/24360355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BerkhanBerkdemir", "html_url": "https://github.com/BerkhanBerkdemir", "followers_url": "https://api.github.com/users/BerkhanBerkdemir/followers", "following_url": "https://api.github.com/users/BerkhanBerkdemir/following{/other_user}", "gists_url": "https://api.github.com/users/BerkhanBerkdemir/gists{/gist_id}", "starred_url": "https://api.github.com/users/BerkhanBerkdemir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BerkhanBerkdemir/subscriptions", "organizations_url": "https://api.github.com/users/BerkhanBerkdemir/orgs", "repos_url": "https://api.github.com/users/BerkhanBerkdemir/repos", "events_url": "https://api.github.com/users/BerkhanBerkdemir/events{/privacy}", "received_events_url": "https://api.github.com/users/BerkhanBerkdemir/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1483695974, "node_id": "MDU6TGFiZWwxNDgzNjk1OTc0", "url": "https://api.github.com/repos/ansible-community/molecule/labels/vagrant", "name": "vagrant", "color": "da4bed", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-25T08:40:58Z", "updated_at": "2020-01-18T07:49:28Z", "closed_at": "2020-01-14T12:21:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Issue Type\r\n\r\n- Bug report\r\n\r\n## Molecule and Ansible details\r\n\r\n**Ansible**: 2.9.2\r\n**Molecule**: 2.22\r\n\r\nMolecule installation method: **pip**  \r\nAnsible installation method: **pip**\r\n\r\n## Desired Behavior\r\n\r\nWhen tests successfully passes, I would like to login the instance with \r\n`molecule login` to check the current status of the configuration.\r\n\r\n## Actual Behavior\r\n\r\nWhen tests successfully passes, `molecule login` does not work due to missing \r\n`private_key`. There is no debug message that states that `private_key` or\r\nsimilar files are deleted because of successful test result.\r\n\r\nIf I terminate `molecule` process before finishes the test, the `private_key` file\r\nstill resides in its location,\r\n`~/.cache/molecule/ansible-role-lorem/.../private_key`.\r\n\r\n[output of `molecule --debug test`](https://gist.github.com/BerkhanBerkdemir/5de1980b55f82584df38a48884e9cbab)\r\n\r\n## Additional Context\r\n\r\nI use separate role, which is named as `vagrant`, to use Vagrant driver.\r\n\r\n## Sample Code\r\n\r\n```yaml\r\n---\r\n# molecue/vagrant/molecule.yml\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\nlint:\r\n  name: yamllint\r\n  options:\r\n    config-data:\r\n      ignore: venv/\r\nplatforms:\r\n  - name: centos-8\r\n    box: generic/centos8\r\n    interfaces:\r\n      - auto_config: true\r\n        ip: 10.0.0.0\r\n        network_name: private_network\r\n        type: static\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\n```text\r\n# molecule/vagrant/requirements.txt\r\nmolecule[vagrant]==2.22\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2477", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2477/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2477/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2477/events", "html_url": "https://github.com/ansible-community/molecule/issues/2477", "id": 541787725, "node_id": "MDU6SXNzdWU1NDE3ODc3MjU=", "number": 2477, "title": "Merge problems between base-config and molecule.yml. Causing create.yml ERRORS", "user": {"login": "gabyfulchic", "id": 22600727, "node_id": "MDQ6VXNlcjIyNjAwNzI3", "avatar_url": "https://avatars0.githubusercontent.com/u/22600727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabyfulchic", "html_url": "https://github.com/gabyfulchic", "followers_url": "https://api.github.com/users/gabyfulchic/followers", "following_url": "https://api.github.com/users/gabyfulchic/following{/other_user}", "gists_url": "https://api.github.com/users/gabyfulchic/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabyfulchic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabyfulchic/subscriptions", "organizations_url": "https://api.github.com/users/gabyfulchic/orgs", "repos_url": "https://api.github.com/users/gabyfulchic/repos", "events_url": "https://api.github.com/users/gabyfulchic/events{/privacy}", "received_events_url": "https://api.github.com/users/gabyfulchic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-23T14:55:17Z", "updated_at": "2020-03-14T16:54:00Z", "closed_at": "2020-03-12T18:15:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.10\r\nmolecule 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\nI would like my base-config to merge with molecule.yml correctly. Actually the params `dockerfile`   and `image` from base-config.yml are ignored and skipped in the \"Create Dockerfiles from image    names\" task. I would like the `molecule_yml.platforms` object to be merged between base-config.yml and molecule.yml at this step. \r\n\r\n# Actual Behaviour\r\n\r\nSo, currently, my use case is that i have this **base-config.yml** : \r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\n  options:\r\n    config-file: ../../.yamllint\r\nplatforms:\r\n  - image: jrei/systemd-debian:9\r\n    dockerfile: ../../../../test/molecule/Dockerfile.j2\r\n    command: /lib/systemd/systemd\r\n    env:\r\n      container: docker\r\n  - image: jrei/systemd-centos:7\r\n    dockerfile: ../../../../test/molecule/Dockerfile.j2\r\n    command: /lib/systemd/systemd\r\n    env:\r\n      container: docker\r\nprovisioner:\r\n  name: ansible\r\n  playbooks:\r\n    create: ../../../../test/molecule/create.yml\r\n    destroy: ../../../../test/molecule/destroy.yml\r\n    converge: ../shared_files/converge.yml\r\n  inventory:\r\n    links:\r\n      host_vars: ../../../../inventories/molecule/host_vars\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  converge_sequence:\r\n    - dependency\r\n    - create\r\n    - prepare\r\n    - converge\r\n    - destroy\r\n  test_sequence:\r\n    - lint\r\n    - destroy\r\n    - dependency\r\n    - syntax\r\n    - create\r\n    - prepare\r\n    - converge\r\n    - idempotence\r\n    - side_effect\r\n    - verify\r\n    - destroy\r\nverifier:\r\n  name: testinfra\r\n  directory: ../shared_files/tests\r\n  options:\r\n    vvv: true\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\nI set my **molecule.yml** as following : \r\n```\r\n---\r\nplatforms:\r\n  - name: molecule-bash-deb\r\n  - name: molecule-bash-rhel\r\nprovisioner:\r\n  log: true\r\nscenario:\r\n  name: default\r\n```\r\n\r\nI faced this error using `molecule -c ../../test/molecule/base-config.yml test` : \r\n![image](https://user-images.githubusercontent.com/22600727/71363032-17a27180-2598-11ea-875a-1d6bb69acf8c.png)\r\n  \r\n\r\nAnd as you can see here, i added some debug : \r\n![image](https://user-images.githubusercontent.com/22600727/71363066-30128c00-2598-11ea-8108-0d8129b8a570.png)\r\n\r\n\r\nI added a task in the create.yml playbook to check the content of `{{ molecule_yml.platforms }}`. And I can see that there are only `molecule.yml` variables \ud83e\uddd0  \r\nWhen i decide to fill `image` parameter in my molecule.yml, it gives me the same error but with `dockerfile` parameter. And when i decide to fill `dockerfile` param in my molecule.yml, all works good and the variables used well came from my base-config.yml.   \r\n  \r\nThat's why I'm sure that the problem is only from here : \r\n![image](https://user-images.githubusercontent.com/22600727/71363227-c5158500-2598-11ea-8eee-0f2ab263b086.png)\r\n   \r\n  \r\n**I'm currently investigating to make a PR by myself but if you can drive me it would be good ! **\r\n  \r\nAnd **PS** yes i saw that PR passed : https://github.com/ansible/molecule/pull/2287/files.\r\nSo I tried with `molecule 2.22` & `molecule 3.0a4` and it's not works too for `image` and `dockerfile` params in the \"Create Dockerfile from image names\" step. (from `create.yml`)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2476", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2476/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2476/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2476/events", "html_url": "https://github.com/ansible-community/molecule/issues/2476", "id": 541245426, "node_id": "MDU6SXNzdWU1NDEyNDU0MjY=", "number": 2476, "title": "The lxd driver needs some TLC", "user": {"login": "hehnope", "id": 24252625, "node_id": "MDQ6VXNlcjI0MjUyNjI1", "avatar_url": "https://avatars3.githubusercontent.com/u/24252625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hehnope", "html_url": "https://github.com/hehnope", "followers_url": "https://api.github.com/users/hehnope/followers", "following_url": "https://api.github.com/users/hehnope/following{/other_user}", "gists_url": "https://api.github.com/users/hehnope/gists{/gist_id}", "starred_url": "https://api.github.com/users/hehnope/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hehnope/subscriptions", "organizations_url": "https://api.github.com/users/hehnope/orgs", "repos_url": "https://api.github.com/users/hehnope/repos", "events_url": "https://api.github.com/users/hehnope/events{/privacy}", "received_events_url": "https://api.github.com/users/hehnope/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-12-20T23:36:12Z", "updated_at": "2020-01-04T05:48:04Z", "closed_at": "2020-01-04T05:48:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2475", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2475/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2475/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2475/events", "html_url": "https://github.com/ansible-community/molecule/issues/2475", "id": 539726894, "node_id": "MDU6SXNzdWU1Mzk3MjY4OTQ=", "number": 2475, "title": "Molecule error : UNREACHABLE && Authentication or permission failure on tmp folder  ", "user": {"login": "gabyfulchic", "id": 22600727, "node_id": "MDQ6VXNlcjIyNjAwNzI3", "avatar_url": "https://avatars0.githubusercontent.com/u/22600727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabyfulchic", "html_url": "https://github.com/gabyfulchic", "followers_url": "https://api.github.com/users/gabyfulchic/followers", "following_url": "https://api.github.com/users/gabyfulchic/following{/other_user}", "gists_url": "https://api.github.com/users/gabyfulchic/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabyfulchic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabyfulchic/subscriptions", "organizations_url": "https://api.github.com/users/gabyfulchic/orgs", "repos_url": "https://api.github.com/users/gabyfulchic/repos", "events_url": "https://api.github.com/users/gabyfulchic/events{/privacy}", "received_events_url": "https://api.github.com/users/gabyfulchic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-18T14:47:39Z", "updated_at": "2020-01-14T12:24:11Z", "closed_at": "2020-01-14T12:24:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Molecule error : UNREACHABLE && Authentication or permission failure on tmp folder  \r\n  \r\nI've wrote all tests molecule for my Ansible roles using a local docker host.   \r\nAnd recently when i decided to add a scenario named remote/ in my molecule folders   \r\nto use a remote docker host, i encountered an error.   \r\n(i decided to use a remote docker host to centralize all docker activity)  \r\n  \r\n**Versionning** :\r\n```\r\npython 2.7.16\r\nansible 2.7.10\r\nansible-lint 4.1.0\r\nmolecule 2.20.0\r\n```\r\n  \r\n**In my remote scenario, the molecule.yml looks like this :**\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\n  options:\r\n    config-file: ../../.yamllint\r\nplatforms:\r\n  - name: molecule-bash-deb\r\n    image: jrei/systemd-debian:9\r\n    dockerfile: ../shared_files/Dockerfile.j2\r\n    tty: true\r\n    command: /lib/systemd/systemd\r\n    docker_host: HIDDEN\r\n    tls_verify: true\r\n    ssl_version: TLSv1_2\r\n    tls_hostname: HIDDEN\r\n    tls_client_cert: HIDDEN\r\n    tls_client_key: HIDDEN\r\n    tls_ca_cert: HIDDEN\r\n    userns_mode: host\r\n    env:\r\n      container: docker\r\n  - name: molecule-bash-rhel\r\n    image: jrei/systemd-centos:7\r\n    dockerfile: ../shared_files/Dockerfile.j2\r\n    tty: true\r\n    command: /lib/systemd/systemd\r\n    docker_host: HIDDEN\r\n    tls_verify: true\r\n    ssl_version: TLSv1_2\r\n    tls_hostname: HIDDEN \r\n    tls_client_cert: HIDDEN\r\n    tls_client_key: HIDDEN\r\n    tls_ca_cert: HIDDEN\r\n    userns_mode: host\r\n    env:\r\n      container: docker\r\nprovisioner:\r\n  name: ansible\r\n  log: true\r\n  config_options:\r\n    defaults:\r\n      local_tmp: /tmp/.ansible-$USER/tmp\r\n      remote_tmp: /tmp/.ansible-$USER/tmp\r\n  playbooks:\r\n    converge: ../shared_files/converge.yml\r\n    create: ../../../../test/molecule/create.yml\r\n    destroy: ../../../../test/molecule/destroy.yml\r\n  # prepare: ../../../../test/molecule/prepare.yml\r\n  # side_effect: ../../../../test/molecule/side_effect.yml\r\n  inventory:\r\n    links:\r\n      host_vars: ../../../../inventories/molecule/host_vars\r\n  #   group_vars: ../../../../inventories/molecule/group_vars\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: remote\r\n  test_sequence:\r\n    - lint\r\n    - destroy\r\n    - dependency\r\n    - syntax\r\n    - create\r\n    - prepare\r\n    - converge\r\n    - idempotence\r\n    - side_effect\r\n    - verify\r\n    - destroy\r\nverifier:\r\n  name: testinfra\r\n  directory: ../shared_files/tests/\r\n  options:\r\n    vvv: true\r\n  lint:\r\n    name: flake8\r\n\r\n```\r\n  \r\n**The error is the following :** \"molecule converge -s remote\"\r\n```\r\nfatal: [molecule-bash-rhel]: UNREACHABLE! => {\r\n        \"changed\": false, \r\n        \"msg\": \"Authentication or permission failure. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \\\"/tmp\\\". Failed command was: ( umask 77 && mkdir -p \\\"` echo /tmp/.ansible-gabyf/tmp/ansible-tmp-1576674115.03-57049687540370 `\\\" && echo ansible-tmp-1576674115.03-57049687540370=\\\"` echo /tmp/.ansible-gabyf/tmp/ansible-tmp-1576674115.03-57049687540370 `\\\" ), exited with result 1\", \r\n        \"unreachable\": true\r\n    }\r\n    fatal: [molecule-bash-deb]: UNREACHABLE! => {\r\n        \"changed\": false, \r\n        \"msg\": \"Authentication or permission failure. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \\\"/tmp\\\". Failed command was: ( umask 77 && mkdir -p \\\"` echo /tmp/.ansible-gabyf/tmp/ansible-tmp-1576674115.04-254934152569179 `\\\" && echo ansible-tmp-1576674115.04-254934152569179=\\\"` echo /tmp/.ansible-gabyf/tmp/ansible-tmp-1576674115.04-254934152569179 `\\\" ), exited with result 1\", \r\n        \"unreachable\": true\r\n    }\r\n```\r\n  \r\n  \r\n**Some details**  \r\nI'm using 2 containers in the same scenario to make my test accross differents distribution,  \r\nand when the bug appears i well see the containers running on the remote host.  \r\nWhen i'm trying the command returning non-zero code on the molecule error message above, it well works. It works in local for local tmp, and in remote on the containers side.  \r\nthe error command working for me when i do it in container :   \r\n> umask 77 && mkdir -p \"` echo /tmp/.ansible-gabyf/tmp/ansible-tmp-1576674115.04-254934152569179 `\"    \r\n  \r\nI tried to `molecule destroy -s remote` before to molecule converge again, and i've got the same result.  \r\n   \r\n  \r\ni searched a lot on github issues, and i've followed this links without any solution for my use case.   \r\n - https://github.com/ansible/molecule/issues/1412  \r\n - https://github.com/ansible/molecule/issues/1043  \r\n - https://github.com/ansible/molecule/issues/1690 \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2474", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2474/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2474/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2474/events", "html_url": "https://github.com/ansible-community/molecule/issues/2474", "id": 539431746, "node_id": "MDU6SXNzdWU1Mzk0MzE3NDY=", "number": 2474, "title": "Can't login into molecule instance with --destroy=never", "user": {"login": "xluffy", "id": 1505720, "node_id": "MDQ6VXNlcjE1MDU3MjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1505720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xluffy", "html_url": "https://github.com/xluffy", "followers_url": "https://api.github.com/users/xluffy/followers", "following_url": "https://api.github.com/users/xluffy/following{/other_user}", "gists_url": "https://api.github.com/users/xluffy/gists{/gist_id}", "starred_url": "https://api.github.com/users/xluffy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xluffy/subscriptions", "organizations_url": "https://api.github.com/users/xluffy/orgs", "repos_url": "https://api.github.com/users/xluffy/repos", "events_url": "https://api.github.com/users/xluffy/events{/privacy}", "received_events_url": "https://api.github.com/users/xluffy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-18T03:36:30Z", "updated_at": "2019-12-19T06:34:12Z", "closed_at": "2019-12-19T06:33:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.8.7\r\n  config file = None\r\n  configured module search path = ['/Users/xluffy/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/xluffy/code/td-infra/ansible/.venv/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/xluffy/code/td-infra/ansible/.venv/bin/ansible\r\n  python version = 3.7.2 (default, Dec 17 2019, 21:31:17) [Clang 11.0.0 (clang-1100.0.33.16)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- yamllint, ansible-lint\r\n- testinfra, flake8\r\n\r\n# Desired Behavior\r\n\r\nLogin instance after run `molecule test --destroy=never`\r\n\r\n# Actual Behaviour\r\n\r\n\r\nI try to run `molecule test --destroy=never`. Everything is ok, this is my log.\r\n\r\n```\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /Users/xluffy/code/td-infra/ansible/roles/redis/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /Users/xluffy/code/td-infra/ansible/roles/redis/molecule/default/tests/...\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /Users/xluffy/code/td-infra/ansible/roles/redis/molecule/default/playbook.yml...\r\nLint completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n\r\n....\r\n\r\nVerifier completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nSkipping, '--destroy=never' requested.\r\n```\r\n\r\nSo when I try to login to instance, this is error.\r\n\r\n```\r\nmolecule login\r\n--> Validating schema /Users/xluffy/code/td-infra/ansible/roles/redis/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\nWarning: Identity file /Users/xluffy/.cache/molecule/redis/default/.vagrant/machines/vg-ubuntu-18-redis-01/virtualbox/private_key not accessible: No such file or directory.\r\nWarning: Permanently added '[127.0.0.1]:2200' (ECDSA) to the list of known hosts.\r\nvagrant@127.0.0.1: Permission denied (publickey).\r\n```\r\n\r\nI checked `/Users/xluffy/.cache/molecule/redis/default/.vagrant`, no directory in this path.\r\n\r\nList instance:\r\n\r\n```\r\nmolecule list\r\n--> Validating schema /Users/xluffy/code/td-infra/ansible/roles/redis/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\nInstance Name          Driver Name    Provisioner Name    Scenario Name    Created    Converged\r\n---------------------  -------------  ------------------  ---------------  ---------  -----------\r\nvg-ubuntu-18-redis-01  vagrant        ansible             default          true       true\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2473", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2473/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2473/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2473/events", "html_url": "https://github.com/ansible-community/molecule/issues/2473", "id": 538863877, "node_id": "MDU6SXNzdWU1Mzg4NjM4Nzc=", "number": 2473, "title": "Unable to parse /default/ inventory/ansible_inventory.yml as an inventory source", "user": {"login": "JOSHUAJEBARAJ", "id": 19353065, "node_id": "MDQ6VXNlcjE5MzUzMDY1", "avatar_url": "https://avatars0.githubusercontent.com/u/19353065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JOSHUAJEBARAJ", "html_url": "https://github.com/JOSHUAJEBARAJ", "followers_url": "https://api.github.com/users/JOSHUAJEBARAJ/followers", "following_url": "https://api.github.com/users/JOSHUAJEBARAJ/following{/other_user}", "gists_url": "https://api.github.com/users/JOSHUAJEBARAJ/gists{/gist_id}", "starred_url": "https://api.github.com/users/JOSHUAJEBARAJ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JOSHUAJEBARAJ/subscriptions", "organizations_url": "https://api.github.com/users/JOSHUAJEBARAJ/orgs", "repos_url": "https://api.github.com/users/JOSHUAJEBARAJ/repos", "events_url": "https://api.github.com/users/JOSHUAJEBARAJ/events{/privacy}", "received_events_url": "https://api.github.com/users/JOSHUAJEBARAJ/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-17T06:24:15Z", "updated_at": "2020-02-15T19:07:59Z", "closed_at": "2020-02-15T19:07:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.2\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/joshua/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.15+ (default, Oct  7 2019, 17:39:04) [GCC 7.4.0]\r\nmolecule, version 2.22\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen I run the `molecule-test` It shows run the code successfully but instead it throwing some error\r\n\r\n## System Detail\r\n\r\n```\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 18.04.3 LTS\r\nRelease:\t18.04\r\nCodename:\tbionic\r\n```\r\n# Actual Behaviour\r\n\r\nWhen I run the `molecule --debug test` I give the error in destroying step\r\n\r\n```\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-playbook --skip-tags=molecule-notest,notest --inventory=/home/joshua/.cache/molecule/joshua.example/default/inventory --diff /usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml -vvv\r\n\r\n    ansible-playbook 2.9.2\r\n      config file = /etc/ansible/ansible.cfg\r\n      configured module search path = [u'/usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/plugins/libraries', u'/home/joshua/.cache/molecule/joshua.example/default/library', u'/home/joshua/joshua.example/library']\r\n      ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n      executable location = /usr/bin/ansible-playbook\r\n      python version = 2.7.15+ (default, Oct  7 2019, 17:39:04) [GCC 7.4.0]\r\n    Using /etc/ansible/ansible.cfg as config file\r\n    host_list declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Skipping due to inventory source not existing or not being readable by the current user\r\n    script declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Skipping due to inventory source not existing or not being readable by the current user\r\n    auto declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Skipping due to inventory source not existing or not being readable by the current user\r\n    yaml declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Skipping due to inventory source not existing or not being readable by the current user\r\n    ini declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Skipping due to inventory source not existing or not being readable by the current user\r\n    toml declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n[WARNING]: Unable to parse /home/joshua/.cache/molecule/joshua.example/default/\r\ninventory/ansible_inventory.yml as an inventory source\r\n\r\n[WARNING]: Unable to parse\r\n/home/joshua/.cache/molecule/joshua.example/default/inventory as an inventory\r\nsource\r\n\r\n[WARNING]: No inventory was parsed, only implicit localhost is available\r\n\r\n[WARNING]: provided hosts list is empty, only localhost is available. Note that\r\nthe implicit localhost does not match 'all'\r\n\r\n    \r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:8\r\n    fatal: [localhost]: FAILED! => {\r\n        \"msg\": \"'molecule_yml' is undefined\"\r\n    }\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n    \r\nERROR: \r\nAn error occurred during the test sequence action: 'destroy'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2472", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2472/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2472/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2472/events", "html_url": "https://github.com/ansible-community/molecule/issues/2472", "id": 538851473, "node_id": "MDU6SXNzdWU1Mzg4NTE0NzM=", "number": 2472, "title": "FAILED - RETRYING: Build an Ansible compatible image", "user": {"login": "JOSHUAJEBARAJ", "id": 19353065, "node_id": "MDQ6VXNlcjE5MzUzMDY1", "avatar_url": "https://avatars0.githubusercontent.com/u/19353065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JOSHUAJEBARAJ", "html_url": "https://github.com/JOSHUAJEBARAJ", "followers_url": "https://api.github.com/users/JOSHUAJEBARAJ/followers", "following_url": "https://api.github.com/users/JOSHUAJEBARAJ/following{/other_user}", "gists_url": "https://api.github.com/users/JOSHUAJEBARAJ/gists{/gist_id}", "starred_url": "https://api.github.com/users/JOSHUAJEBARAJ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JOSHUAJEBARAJ/subscriptions", "organizations_url": "https://api.github.com/users/JOSHUAJEBARAJ/orgs", "repos_url": "https://api.github.com/users/JOSHUAJEBARAJ/repos", "events_url": "https://api.github.com/users/JOSHUAJEBARAJ/events{/privacy}", "received_events_url": "https://api.github.com/users/JOSHUAJEBARAJ/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-17T05:44:25Z", "updated_at": "2020-02-27T21:27:49Z", "closed_at": "2019-12-17T06:05:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/joshua/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.15+ (default, Oct  7 2019, 17:39:04) [GCC 7.4.0]\r\nmolecule, version 2.22\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen I run the `sudo molecule --debug test` the test should be run successfully  but it was giving the below error\r\n\r\n### System information\r\n\r\n```\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 18.04.3 LTS\r\nRelease:\t18.04\r\nCodename:\tbionic\r\n```\r\n# Actual Behaviour\r\nWhen the run the `sudo molecule --debug test` I m getting the below error\r\n```\r\n FAILED - RETRYING: Build an Ansible compatible image (new) (3 retries left).Result was: {\r\n        \"attempts\": 1, \r\n        \"changed\": false, \r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"api_version\": \"auto\", \r\n                \"archive_path\": null, \r\n                \"build\": {\r\n                    \"dockerfile\": \"/home/joshua/.cache/molecule/joshua.example/default/Dockerfile_centos_7\", \r\n                    \"path\": \"/home/joshua/.cache/molecule/joshua.example/default\", \r\n                    \"pull\": true\r\n                }, \r\n                \"buildargs\": null, \r\n                \"ca_cert\": null, \r\n                \"client_cert\": null, \r\n                \"client_key\": null, \r\n                \"container_limits\": null, \r\n                \"debug\": false, \r\n                \"docker_host\": \"unix://var/run/docker.sock\", \r\n                \"dockerfile\": null, \r\n                \"force\": null, \r\n                \"force_absent\": false, \r\n                \"force_source\": true, \r\n                \"force_tag\": false, \r\n                \"http_timeout\": null, \r\n                \"load_path\": null, \r\n                \"name\": \"molecule_local/centos:7\", \r\n                \"nocache\": false, \r\n                \"path\": null, \r\n                \"pull\": null, \r\n                \"push\": false, \r\n                \"repository\": null, \r\n                \"rm\": true, \r\n                \"source\": \"build\", \r\n                \"ssl_version\": null, \r\n                \"state\": \"present\", \r\n                \"tag\": \"latest\", \r\n                \"timeout\": 60, \r\n                \"tls\": false, \r\n                \"tls_hostname\": \"localhost\", \r\n                \"tls_verify\": false, \r\n                \"use_tls\": null, \r\n                \"validate_certs\": false\r\n            }\r\n        }, \r\n        \"msg\": \"An unexpected docker error occurred: Credentials store error: StoreError('Credentials store docker-credential-secretservice exited with \\\"Error calling StartServiceByName for org.freedesktop.secrets: Timeout was reached\\\".',)\", \r\n        \"retries\": 4\r\n    }\r\n\r\n```\r\nBut I was able to login into the docker hub successfully using `docker login` and the docker configuration was \r\n\r\n```\r\n{\r\n\t\"auths\": {\r\n\t\t\"https://index.docker.io/v1/\": {}\r\n\t},\r\n\t\"HttpHeaders\": {\r\n\t\t\"User-Agent\": \"Docker-Client/19.03.4 (linux)\"\r\n\t},\r\n\t\"credsStore\": \"secretservice\"\r\n}\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2471", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2471/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2471/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2471/events", "html_url": "https://github.com/ansible-community/molecule/issues/2471", "id": 537095965, "node_id": "MDU6SXNzdWU1MzcwOTU5NjU=", "number": 2471, "title": "removal of molecule init template command", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1305702160, "node_id": "MDU6TGFiZWwxMzA1NzAyMTYw", "url": "https://api.github.com/repos/ansible-community/molecule/labels/proposal", "name": "proposal", "color": "bfd4f2", "default": false, "description": "Suggestion for a larger change"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-12-12T16:50:16Z", "updated_at": "2020-01-03T18:20:11Z", "closed_at": "2020-01-03T18:20:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I would like to remove the `molecule init template` feature from molecule as it seems to be very popular. Even its own testing repository was broken and unmantained for a long time.\r\n\r\n## Motivation\r\n\r\nAs we are currently migrating towards using galaxy templating it makes not much use to have this inside molecule itself.\r\n\r\nThose really wanting to use cookiecutter templates they can still do it without needing molecule itself.\r\n\r\n## Documentation (optional)\r\n\r\nThis needs to be documented in included in next major release (3.0) as it counds as a breaking change.\r\n\r\n`molecule init role` and `molecule init scenario` are **not** affected by this change.\r\n\r\n## Anything else?\r\n\r\nPlease use up/down thumbs to vote for this, eventually adding comments.\r\n\r\nAlso posted on https://www.reddit.com/r/ansible/comments/eezxpy/proposal_removal_of_molecule_init_template_feature/ ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2470", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2470/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2470/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2470/events", "html_url": "https://github.com/ansible-community/molecule/issues/2470", "id": 536556714, "node_id": "MDU6SXNzdWU1MzY1NTY3MTQ=", "number": 2470, "title": " AttributeError: 'AnsibleUnicode' object has no attribute 'get'", "user": {"login": "training3", "id": 36807842, "node_id": "MDQ6VXNlcjM2ODA3ODQy", "avatar_url": "https://avatars3.githubusercontent.com/u/36807842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/training3", "html_url": "https://github.com/training3", "followers_url": "https://api.github.com/users/training3/followers", "following_url": "https://api.github.com/users/training3/following{/other_user}", "gists_url": "https://api.github.com/users/training3/gists{/gist_id}", "starred_url": "https://api.github.com/users/training3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/training3/subscriptions", "organizations_url": "https://api.github.com/users/training3/orgs", "repos_url": "https://api.github.com/users/training3/repos", "events_url": "https://api.github.com/users/training3/events{/privacy}", "received_events_url": "https://api.github.com/users/training3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-11T19:01:16Z", "updated_at": "2020-01-14T12:28:51Z", "closed_at": "2020-01-14T12:28:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Molecule and Ansible details\r\n```\r\nansible --version && molecule --version\r\nansible 2.9.2 config file = None configured module search path = ['/home/testuser/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules'] ansible python module location = /home/testuser/venv/lib/python3.6/site-packages/ansible executable location = /home/testuser/venv/bin/ansible python version = 3.6.9 (default, Nov 7 2019, 10:44:02) [GCC 8.3.0] molecule, version 2.22 \r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\nansible-lint lints playbook without exceptions.\r\n# Actual Behaviour\r\n```\r\nmolecule test\r\n--> Validating schema /home/testuser/testrole/testuser/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 cleanup\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/testuser/testrole/testuser/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/testuser/testrole/testuser/molecule/default/tests/...\r\nLint completed successfully.\r\n-> Executing Ansible Lint on /home/testuser/testrole/testuser/molecule/default/playbook.yml...\r\nTraceback (most recent call last):\r\n  File \"/home/testuser/my_env/bin/ansible-lint\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 287, in run\r\n    skip_list=self.skip_list))\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 177, in run\r\n    matches.extend(rule.matchtasks(playbookfile, text))\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 87, in matchtasks\r\n    yaml = ansiblelint.utils.append_skipped_rules(yaml, text, file['type'])\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/utils.py\", line 596, in append_skipped_rules\r\n    yaml_skip = _append_skipped_rules(pyyaml_data, file_text, file_type)\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/utils.py\", line 635, in _append_skipped_rules\r\n    if pyyaml_task.get('name') != ruamel_task.get('name'):\r\nAttributeError: 'AnsibleUnicode' object has no attribute 'get'\r\nAn error occurred during the test sequence action: 'lint'. Cleaning up.\r\n```\r\n# Output of module test --debug\r\n```\r\n molecule --debug test\r\n--> Validating schema /home/testuser/testrole/postgres/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 cleanup\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/testuser/testrole/postgres/...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n--- {}\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/testuser/testrole/postgres/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/testuser/.cache/molecule/postgres/default\r\nMOLECULE_FILE: /home/testuser/testrole/postgres/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/testuser/.cache/molecule/postgres/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /home/testuser/testrole/postgres\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/testuser/testrole/postgres/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/testuser/.cache/molecule/postgres/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nMOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/testuser/testrole/postgres/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/testuser/.cache/molecule/postgres/default MOLECULE_FILE=/home/testuser/testrole/postgres/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/testuser/.cache/molecule/postgres/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/home/testuser/testrole/postgres MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/testuser/testrole/postgres/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/testuser/.cache/molecule/postgres/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/home/testuser/venv/bin/yamllint -s /home/testuser/testrole/postgres/defaults/main.yml /home/testuser/testrole/postgres/files/main.yml /home/testuser/testrole/postgres/handlers/main.yml /home/testuser/testrole/postgres/meta/main.yml /home/testuser/testrole/postgres/molecule/default/molecule.yml /home/testuser/testrole/postgres/molecule/default/playbook.yml /home/testuser/testrole/postgres/molecule/default/prepare.yml /home/testuser/testrole/postgres/molecule/default/requirements.yml /home/testuser/testrole/postgres/tasks/backup.yml /home/testuser/testrole/postgres/tasks/centos_vars.yml /home/testuser/testrole/postgres/tasks/include_vaults.yml /home/testuser/testrole/postgres/tasks/init.yml /home/testuser/testrole/postgres/tasks/install.yml /home/testuser/testrole/postgres/tasks/install_centos_packages.yml /home/testuser/testrole/postgres/tasks/main.yml /home/testuser/testrole/postgres/tasks/redhat_vars.yml /home/testuser/testrole/postgres/vars/main.yml\r\n\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/testuser/testrole/postgres/molecule/default/tests/...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n--- {}\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/testuser/testrole/postgres/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/testuser/.cache/molecule/postgres/default\r\nMOLECULE_FILE: /home/testuser/testrole/postgres/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/testuser/.cache/molecule/postgres/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /home/testuser/testrole/postgres\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/testuser/testrole/postgres/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/testuser/.cache/molecule/postgres/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nMOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/testuser/testrole/postgres/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/testuser/.cache/molecule/postgres/default MOLECULE_FILE=/home/testuser/testrole/postgres/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/testuser/.cache/molecule/postgres/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/home/testuser/testrole/postgres MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/testuser/testrole/postgres/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/testuser/.cache/molecule/postgres/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/home/testuser/venv/bin/flake8 /home/testuser/testrole/postgres/molecule/default/tests/test_default.py\r\n\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /home/testuser/testrole/postgres/molecule/default/playbook.yml...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /home/testuser/.cache/molecule/postgres/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/filters:/home/testuser/.cache/molecule/postgres/default/plugins/filters:/home/testuser/testrole/postgres/plugins/filters\r\nANSIBLE_LIBRARY: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries:/home/testuser/.cache/molecule/postgres/default/library:/home/testuser/testrole/postgres/library\r\nANSIBLE_ROLES_PATH: /home/testuser/.cache/molecule/postgres/default/roles:/home/testuser/testrole\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/testuser/testrole/postgres/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/testuser/.cache/molecule/postgres/default\r\nMOLECULE_FILE: /home/testuser/testrole/postgres/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/testuser/.cache/molecule/postgres/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /home/testuser/testrole/postgres\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/testuser/testrole/postgres/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/testuser/.cache/molecule/postgres/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/home/testuser/.cache/molecule/postgres/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/filters:/home/testuser/.cache/molecule/postgres/default/plugins/filters:/home/testuser/testrole/postgres/plugins/filters ANSIBLE_LIBRARY=/home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries:/home/testuser/.cache/molecule/postgres/default/library:/home/testuser/testrole/postgres/library ANSIBLE_ROLES_PATH=/home/testuser/.cache/molecule/postgres/default/roles:/home/testuser/testrole MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/testuser/testrole/postgres/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/testuser/.cache/molecule/postgres/default MOLECULE_FILE=/home/testuser/testrole/postgres/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/testuser/.cache/molecule/postgres/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/home/testuser/testrole/postgres MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/testuser/testrole/postgres/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/testuser/.cache/molecule/postgres/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/home/testuser/venv/bin/ansible-lint -v --exclude=/home/testuser/.cache/molecule/postgres/default /home/testuser/testrole/postgres/molecule/default/playbook.yml\r\n\r\n    Examining molecule/default/playbook.yml of type playbook\r\n    Examining tasks/backup.yml of type tasks\r\n    Examining tasks/centos_vars.yml of type tasks\r\nTraceback (most recent call last):\r\n  File \"/home/testuser/venv/bin/ansible-lint\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 287, in run\r\n    skip_list=self.skip_list))\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 177, in run\r\n    matches.extend(rule.matchtasks(playbookfile, text))\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 87, in matchtasks\r\n    yaml = ansiblelint.utils.append_skipped_rules(yaml, text, file['type'])\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/utils.py\", line 596, in append_skipped_rules\r\n    yaml_skip = _append_skipped_rules(pyyaml_data, file_text, file_type)\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/utils.py\", line 635, in _append_skipped_rules\r\n    if pyyaml_task.get('name') != ruamel_task.get('name'):\r\nAttributeError: 'AnsibleUnicode' object has no attribute 'get'\r\nAn error occurred during the test sequence action: 'lint'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n--> Sanity checks: 'docker'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /home/testuser/.cache/molecule/postgres/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/filters:/home/testuser/.cache/molecule/postgres/default/plugins/filters:/home/testuser/testrole/postgres/plugins/filters\r\nANSIBLE_LIBRARY: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries:/home/testuser/.cache/molecule/postgres/default/library:/home/testuser/testrole/postgres/library\r\nANSIBLE_ROLES_PATH: /home/testuser/.cache/molecule/postgres/default/roles:/home/testuser/testrole\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/testuser/testrole/postgres/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/testuser/.cache/molecule/postgres/default\r\nMOLECULE_FILE: /home/testuser/testrole/postgres/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/testuser/.cache/molecule/postgres/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /home/testuser/testrole/postgres\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/testuser/testrole/postgres/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/testuser/.cache/molecule/postgres/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/home/testuser/.cache/molecule/postgres/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/filters:/home/testuser/.cache/molecule/postgres/default/plugins/filters:/home/testuser/testrole/postgres/plugins/filters ANSIBLE_LIBRARY=/home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries:/home/testuser/.cache/molecule/postgres/default/library:/home/testuser/testrole/postgres/library ANSIBLE_ROLES_PATH=/home/testuser/.cache/molecule/postgres/default/roles:/home/testuser/testrole MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/testuser/testrole/postgres/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/testuser/.cache/molecule/postgres/default MOLECULE_FILE=/home/testuser/testrole/postgres/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/testuser/.cache/molecule/postgres/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/home/testuser/testrole/postgres MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/testuser/testrole/postgres/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/testuser/.cache/molecule/postgres/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/home/testuser/venv/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/home/testuser/.cache/molecule/postgres/default/inventory /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml -vvv\r\n\r\n    ansible-playbook 2.9.2\r\n      config file = /home/testuser/.cache/molecule/postgres/default/ansible.cfg\r\n      configured module search path = ['/home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries', '/home/testuser/.cache/molecule/postgres/default/library', '/home/testuser/testrole/postgres/library']\r\n      ansible python module location = /home/testuser/venv/lib/python3.6/site-packages/ansible\r\n      executable location = /home/testuser/venv/bin/ansible-playbook\r\n      python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\n    Using /home/testuser/.cache/molecule/postgres/default/ansible.cfg as config file\r\n    host_list declined parsing /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:8\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: testuser\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~testuser && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079 `\" && echo ansible-tmp-1576038266.5452287-224148635186079=\"` echo /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079 `\" ) && sleep 0'\r\n    Using module file /home/testuser/venv/lib/python3.6/site-packages/ansible/modules/cloud/docker/docker_container.py\r\n    <127.0.0.1> PUT /home/testuser/.ansible/tmp/ansible-local-5371w9gwap2n/tmpe4nyba9p TO /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/AnsiballZ_docker_container.py\r\n    <127.0.0.1> PUT /home/testuser/.ansible/tmp/ansible-local-5371w9gwap2n/tmpfilu451r TO /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/async_wrapper.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/ /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/AnsiballZ_docker_container.py /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/async_wrapper.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'ANSIBLE_ASYNC_DIR='\"'\"'~/.ansible_async'\"'\"' /home/testuser/venv/bin/python /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/async_wrapper.py 364068843511 7200 /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/AnsiballZ_docker_container.py _ && sleep 0'\r\n    changed: [localhost] => (item=postgres) => {\r\n        \"ansible_job_id\": \"364068843511.5397\",\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": true,\r\n        \"finished\": 0,\r\n        \"item\": {\r\n            \"command\": \"/sbin/init\",\r\n            \"env\": {\r\n                \"http_proxy\": null,\r\n                \"https_proxy\": null,\r\n                \"no_proxy\": null\r\n            },\r\n            \"hostname\": \"postgres1\",\r\n            \"image\": \"postgres\",\r\n            \"name\": \"postgres\",\r\n            \"pre_build_image\": true,\r\n            \"previleged\": true,\r\n            \"tmpfs\": [\r\n                \"/run\",\r\n                \"/tmp\"\r\n            ],\r\n            \"volumes\": [\r\n                \"/sys/fs/cgroup:/sys/fs/cgroup:ro\"\r\n            ]\r\n        },\r\n        \"results_file\": \"/home/testuser/.ansible_async/364068843511.5397\",\r\n        \"started\": 1\r\n    }\r\n\r\n    TASK [Wait for instance(s) deletion to complete] *******************************\r\n    task path: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:27\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: testuser\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~testuser && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839 `\" && echo ansible-tmp-1576038269.6703174-201026194839=\"` echo /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839 `\" ) && sleep 0'\r\n    Using module file /home/testuser/venv/lib/python3.6/site-packages/ansible/modules/utilities/logic/async_status.py\r\n    <127.0.0.1> PUT /home/testuser/.ansible/tmp/ansible-local-5371w9gwap2n/tmpaue7tqfm TO /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839/AnsiballZ_async_status.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839/ /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839/AnsiballZ_async_status.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/home/testuser/venv/bin/python /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839/AnsiballZ_async_status.py && sleep 0'\r\n    ok: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '364068843511.5397', 'results_file': '/home/testuser/.ansible_async/364068843511.5397', 'changed': True, 'failed': False, 'item': {'name': 'postgres', 'image': 'postgres', 'hostname': 'postgres1', 'env': {'http_proxy': None, 'https_proxy': None, 'no_proxy': None}, 'command': '/sbin/init', 'tmpfs': ['/run', '/tmp'], 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:ro'], 'previleged': True, 'pre_build_image': True}, 'ansible_loop_var': 'item'}) => {\r\n        \"ansible_job_id\": \"364068843511.5397\",\r\n        \"ansible_loop_var\": \"item\",\r\n        \"attempts\": 1,\r\n        \"changed\": false,\r\n        \"diff\": {\r\n            \"after\": {},\r\n            \"before\": {}\r\n        },\r\n        \"finished\": 1,\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"api_version\": \"auto\",\r\n                \"auto_remove\": false,\r\n                \"blkio_weight\": null,\r\n                \"ca_cert\": null,\r\n                \"cap_drop\": null,\r\n                \"capabilities\": null,\r\n                \"cleanup\": false,\r\n                \"client_cert\": null,\r\n                \"client_key\": null,\r\n                \"command\": null,\r\n                \"comparisons\": null,\r\n                \"cpu_period\": null,\r\n                \"cpu_quota\": null,\r\n                \"cpu_shares\": null,\r\n                \"cpuset_cpus\": null,\r\n                \"cpuset_mems\": null,\r\n                \"debug\": false,\r\n                \"detach\": true,\r\n                \"device_read_bps\": null,\r\n                \"device_read_iops\": null,\r\n                \"device_write_bps\": null,\r\n                \"device_write_iops\": null,\r\n                \"devices\": null,\r\n                \"dns_opts\": null,\r\n                \"dns_search_domains\": null,\r\n                \"dns_servers\": null,\r\n                \"docker_host\": \"localhost:2375\",\r\n                \"domainname\": null,\r\n                \"entrypoint\": null,\r\n                \"env\": null,\r\n                \"env_file\": null,\r\n                \"etc_hosts\": null,\r\n                \"exposed_ports\": null,\r\n                \"force_kill\": true,\r\n                \"groups\": null,\r\n                \"healthcheck\": null,\r\n                \"hostname\": null,\r\n                \"ignore_image\": false,\r\n                \"image\": null,\r\n                \"init\": false,\r\n                \"interactive\": false,\r\n                \"ipc_mode\": null,\r\n                \"keep_volumes\": true,\r\n                \"kernel_memory\": null,\r\n                \"kill_signal\": null,\r\n                \"labels\": null,\r\n                \"links\": null,\r\n                \"log_driver\": null,\r\n                \"log_options\": null,\r\n                \"mac_address\": null,\r\n                \"memory\": \"0\",\r\n                \"memory_reservation\": null,\r\n                \"memory_swap\": null,\r\n                \"memory_swappiness\": null,\r\n                \"mounts\": null,\r\n                \"name\": \"postgres\",\r\n                \"network_mode\": null,\r\n                \"networks\": null,\r\n                \"networks_cli_compatible\": null,\r\n                \"oom_killer\": null,\r\n                \"oom_score_adj\": null,\r\n                \"output_logs\": false,\r\n                \"paused\": false,\r\n                \"pid_mode\": null,\r\n                \"pids_limit\": null,\r\n                \"privileged\": false,\r\n                \"published_ports\": null,\r\n                \"pull\": false,\r\n                \"purge_networks\": false,\r\n                \"read_only\": false,\r\n                \"recreate\": false,\r\n                \"restart\": false,\r\n                \"restart_policy\": null,\r\n                \"restart_retries\": null,\r\n                \"runtime\": null,\r\n                \"security_opts\": null,\r\n                \"shm_size\": null,\r\n                \"ssl_version\": null,\r\n                \"state\": \"absent\",\r\n                \"stop_signal\": null,\r\n                \"stop_timeout\": null,\r\n                \"sysctls\": null,\r\n                \"timeout\": 60,\r\n                \"tls\": false,\r\n                \"tls_hostname\": \"localhost\",\r\n                \"tls_verify\": false,\r\n                \"tmpfs\": null,\r\n                \"trust_image_content\": false,\r\n                \"tty\": false,\r\n                \"ulimits\": null,\r\n                \"user\": null,\r\n                \"userns_mode\": null,\r\n                \"uts\": null,\r\n                \"validate_certs\": false,\r\n                \"volume_driver\": null,\r\n                \"volumes\": null,\r\n                \"volumes_from\": null,\r\n                \"working_dir\": null\r\n            }\r\n        },\r\n        \"item\": {\r\n            \"ansible_job_id\": \"364068843511.5397\",\r\n            \"ansible_loop_var\": \"item\",\r\n            \"changed\": true,\r\n            \"failed\": false,\r\n            \"finished\": 0,\r\n            \"item\": {\r\n                \"command\": \"/sbin/init\",\r\n                \"env\": {\r\n                    \"http_proxy\": null,\r\n                    \"https_proxy\": null,\r\n                    \"no_proxy\": null\r\n                },\r\n                \"hostname\": \"postgres1\",\r\n                \"image\": \"postgres\",\r\n                \"name\": \"postgres\",\r\n                \"pre_build_image\": true,\r\n                \"previleged\": true,\r\n                \"tmpfs\": [\r\n                    \"/run\",\r\n                    \"/tmp\"\r\n                ],\r\n                \"volumes\": [\r\n                    \"/sys/fs/cgroup:/sys/fs/cgroup:ro\"\r\n                ]\r\n            },\r\n            \"results_file\": \"/home/testuser/.ansible_async/364068843511.5397\",\r\n            \"started\": 1\r\n        }\r\n    }\r\n\r\n    TASK [Delete docker network(s)] ************************************************\r\n    task path: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:35\r\n    META: ran handlers\r\n    META: ran handlers\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\n```\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2466", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2466/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2466/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2466/events", "html_url": "https://github.com/ansible-community/molecule/issues/2466", "id": 534427901, "node_id": "MDU6SXNzdWU1MzQ0Mjc5MDE=", "number": 2466, "title": "Specify Collection for Galaxy dependency", "user": {"login": "artis3n", "id": 6969296, "node_id": "MDQ6VXNlcjY5NjkyOTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/6969296?v=4", "gravatar_id": "", "url": "https://api.github.com/users/artis3n", "html_url": "https://github.com/artis3n", "followers_url": "https://api.github.com/users/artis3n/followers", "following_url": "https://api.github.com/users/artis3n/following{/other_user}", "gists_url": "https://api.github.com/users/artis3n/gists{/gist_id}", "starred_url": "https://api.github.com/users/artis3n/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/artis3n/subscriptions", "organizations_url": "https://api.github.com/users/artis3n/orgs", "repos_url": "https://api.github.com/users/artis3n/repos", "events_url": "https://api.github.com/users/artis3n/events{/privacy}", "received_events_url": "https://api.github.com/users/artis3n/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-12-07T17:21:23Z", "updated_at": "2020-04-14T21:41:32Z", "closed_at": "2020-04-14T21:41:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n\r\n```\r\nansible 2.9.1\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/artis3n/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/artis3n/.local/share/virtualenvs/dev-setup-cQlga8yo/lib/python3.7/site-packages/ansible\r\n  executable location = /home/artis3n/.local/share/virtualenvs/dev-setup-cQlga8yo/bin/ansible\r\n  python version = 3.7.5 (default, Nov 24 2019, 17:46:35) [GCC 9.2.1 20191008]\r\n\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- [x] pip (pipenv)\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n- [x] pip (pipenv)\r\n- OS package\r\n\r\n# Desired Behavior\r\n\r\n```yaml\r\ndependency:\r\n  name: galaxy\r\n  options:\r\n    role-file: requirements.yml\r\n    collection-file: requirements.yml\r\n```\r\n\r\nWith a `requirements.yml` format following <https://docs.ansible.com/ansible/devel/user_guide/collections_using.html#install-multiple-collections-with-a-requirements-file>:\r\n\r\n```yaml\r\n---\r\n\r\nroles:\r\n- src: gantsign.visual-studio-code\r\n- src: artis3n.bitwarden_app\r\n\r\ncollections:\r\n- name: artis3n.github\r\n```\r\n\r\nMolecule's `galaxy` dependency doesn't appear to support a `collection-file` similar to the `role-file` to install Galaxy Collections. I posed a [question on Stack Overflow](https://stackoverflow.com/questions/59228374/specify-collection-dependency-for-molecule) but based on the documentation I'm reasonably sure the functionality doesn't exist yet, so posting a feature request.\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2461", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2461/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2461/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2461/events", "html_url": "https://github.com/ansible-community/molecule/issues/2461", "id": 531106909, "node_id": "MDU6SXNzdWU1MzExMDY5MDk=", "number": 2461, "title": "feature: allow multiple drivers with fallback", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-12-02T12:49:35Z", "updated_at": "2020-02-03T09:14:29Z", "closed_at": "2020-02-03T09:14:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I would like to propose making molecule accept multiple drivers as described below\r\n```\r\n- driver:\r\n    name:\r\n       - podman\r\n       - docker\r\n```\r\nThe code above will have the following logic: if podman driver is detected and passed its tests it is used.\r\n\r\nIf anything related to podman driver initialization fails, the `docker` driver is used instead.\r\n\r\nThis kind of setup should allow users to configure multiple drivers listed by preference. Molecule will try to use all listed ones.\r\n\r\nFrom the average molecule user point of view the backend used for testing the playbooks or roles should not be very important. As long they whitelist some drivers we they say that test could run on them.\r\n\r\nOne issue that we have with this setup is that we may lose the ability to verify driver specific configuration items because some options may be specific to one driver and some to another one. We still need to investigate how real is this aspect.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2456", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2456/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2456/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2456/events", "html_url": "https://github.com/ansible-community/molecule/issues/2456", "id": 530561858, "node_id": "MDU6SXNzdWU1MzA1NjE4NTg=", "number": 2456, "title": "podman-docker package breaks docker driver in molecule", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1266300777, "node_id": "MDU6TGFiZWwxMjY2MzAwNzc3", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docker", "name": "docker", "color": "bfd4f2", "default": false, "description": "Related to use of Docker"}, {"id": 1439131192, "node_id": "MDU6TGFiZWwxNDM5MTMxMTky", "url": "https://api.github.com/repos/ansible-community/molecule/labels/podman", "name": "podman", "color": "23637f", "default": false, "description": ""}, {"id": 864009245, "node_id": "MDU6TGFiZWw4NjQwMDkyNDU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/upstream-bug", "name": "upstream-bug", "color": "960a21", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-30T10:31:28Z", "updated_at": "2020-02-01T18:19:29Z", "closed_at": "2020-02-01T18:19:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Upstream bug\r\n\r\nMolecule docker driver is by far the most popular right now and is extensively used during testing of molecule itself.\r\n\r\nIf someone is trying to run molecule tests on a system like CentOS 8 or RHEL 8 where they have podman-driver package installed, molecule will fail ugly with errors like described in https://github.com/ansible/ansible/issues/65378\r\n\r\n```\r\n        fatal: [instance]: FAILED! => {\"msg\": \"Docker version check (['/usr/bin/docker', 'version', '--format', \\\"'{{.Server.Version}}'\\\"]) failed: Emulate Docker CLI using podman. Create /etc/containers/nodocker to quiet msg.\\nError: template: image:1:10: executing \\\"image\\\" at <.Server.Version>: can't evaluate field Server in type libpod.Version\\n\"}\r\n```\r\n\r\nThe shimming created by `podman-docker` rpm is even more dangerous because it does fully ignore the presence of `DOCKER_HOST` variable which can point to remote server like `DOCKER_HOST=ssh://root@exammple.com`.\r\n\r\nThis means that even if podman is fixing the https://github.com/containers/libpod/issues/4602 it will still break user workflows which would assume that a `docker` command would respect what is defined in `DOCKER_HOST` and not return information about another server.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2455", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2455/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2455/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2455/events", "html_url": "https://github.com/ansible-community/molecule/issues/2455", "id": 530418324, "node_id": "MDU6SXNzdWU1MzA0MTgzMjQ=", "number": 2455, "title": "Molecule is not linting role", "user": {"login": "Dhawos", "id": 14896944, "node_id": "MDQ6VXNlcjE0ODk2OTQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/14896944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dhawos", "html_url": "https://github.com/Dhawos", "followers_url": "https://api.github.com/users/Dhawos/followers", "following_url": "https://api.github.com/users/Dhawos/following{/other_user}", "gists_url": "https://api.github.com/users/Dhawos/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dhawos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dhawos/subscriptions", "organizations_url": "https://api.github.com/users/Dhawos/orgs", "repos_url": "https://api.github.com/users/Dhawos/repos", "events_url": "https://api.github.com/users/Dhawos/events{/privacy}", "received_events_url": "https://api.github.com/users/Dhawos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-29T16:14:19Z", "updated_at": "2019-11-29T16:59:05Z", "closed_at": "2019-11-29T16:58:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.9.1\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    box: redhat-8\r\nprovisioner:\r\n  name: ansible\r\n  log: true\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: inspec\r\n  lint:\r\n    name: rubocop\r\n    enabled: true\r\n```\r\n\r\n# Desired Behavior\r\n\r\nMolecule would lint all task/handlers/meta from the role (this is the behavior obtained with molecule 2.19)\r\n\r\n```\r\nExamining /clamav/molecule/default/playbook.yml of type playbook\r\nExamining /clamav/tasks/main.yml of type tasks\r\nExamining /clamav/handlers/main.yml of type handlers\r\nExamining /clamav/meta/main.yml of type meta\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nMolecule only lints the converge playbook and not the role\r\n\r\n```\r\nExamining /clamav/molecule/default/playbook.yml of type playbook\r\n```\r\nI noticed that environment variables were not set when it does not work :\r\n\r\n```\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n--- {}\r\n```\r\n\r\nWhen running with molecule 2.19, the Ansible environment variables are set and the linting works as expected.\r\n\r\nI've played with the sources a bit and it seems this line is what is causing the issue :\r\n\r\n**Version 2.22 :**\r\nhttps://github.com/ansible/molecule/blob/a339ce2ecc38959065192c38110f2af46f07ac73/molecule/provisioner/lint/ansible_lint.py#L60\r\n\r\nI tried with the line from previous versions and it worked again :\r\n\r\n**Version 2.20 :**\r\nhttps://github.com/ansible/molecule/blob/99e03ea192e19aba0a969e205980b55adae98456/molecule/provisioner/lint/ansible_lint.py#L107", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2453", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2453/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2453/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2453/events", "html_url": "https://github.com/ansible-community/molecule/issues/2453", "id": 530392008, "node_id": "MDU6SXNzdWU1MzAzOTIwMDg=", "number": 2453, "title": "disable podmain tests on macos", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-29T15:11:01Z", "updated_at": "2019-11-30T10:33:30Z", "closed_at": "2019-11-30T10:33:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Because podman is not yet functional on macos, we should skill testing it even if executable or module may be present.\r\n\r\nThis is because podman is not signed and attempt to call it will block the process with a system security popup.\r\n\r\nOnce https://github.com/containers/libpod/issues/4511 is addressed we can revert that change.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2450", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2450/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2450/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2450/events", "html_url": "https://github.com/ansible-community/molecule/issues/2450", "id": 528821467, "node_id": "MDU6SXNzdWU1Mjg4MjE0Njc=", "number": 2450, "title": "Very hard to find reason for `Create molecule instance(s)` or `Wait for instance(s) creation to complete` tasks fail.", "user": {"login": "jonpugh", "id": 106420, "node_id": "MDQ6VXNlcjEwNjQyMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/106420?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonpugh", "html_url": "https://github.com/jonpugh", "followers_url": "https://api.github.com/users/jonpugh/followers", "following_url": "https://api.github.com/users/jonpugh/following{/other_user}", "gists_url": "https://api.github.com/users/jonpugh/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonpugh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonpugh/subscriptions", "organizations_url": "https://api.github.com/users/jonpugh/orgs", "repos_url": "https://api.github.com/users/jonpugh/repos", "events_url": "https://api.github.com/users/jonpugh/events{/privacy}", "received_events_url": "https://api.github.com/users/jonpugh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-26T16:03:46Z", "updated_at": "2020-03-12T18:17:54Z", "closed_at": "2020-03-12T18:17:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.1\r\n  config file = None\r\n  configured module search path = ['/home/jon/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/jon/Projects/devshop/python/lib/python3.7/site-packages/ansible\r\n  executable location = /home/jon/Projects/devshop/python/bin/ansible\r\n  python version = 3.7.5 (default, Oct 17 2019, 12:16:48) [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# molecule.yml\r\n\r\nI am setting up molecule for my roles just like @geerlingguy. \r\n\r\nMy mistake was in the default environment name: I used \"ubuntu18\" instead of \"ubuntu1804\". It took me hours and hours to realize that was the problem.\r\n\r\n```\r\nplatforms:\r\n  - name: instance-${MOLECULE_DISTRO:-ubuntu18}\r\n    image: geerlingguy/docker-${MOLECULE_DISTRO:-ubuntu18}-ansible\r\n    command: ${MOLECULE_DOCKER_COMMAND:-\"sleep infinity\"}\r\n```\r\n\r\n\r\n# Desired Behavior\r\n\r\nWhen I make the simple mistake of entering a bad docker image name, `molecule test` will fail on the task `[Wait for instance(s) creation to complete]`, but with no indication of why it failed beyond this error message:\r\n\r\n```\r\n'the output has been hidden due to the fact that ''no_log: true'' was specified for this result'\r\n```\r\n\r\nAfter digging around for quite some time, I ended up using `molecule --debug`, which didn't give me the answer, but did provide a clue:\r\n\r\n ```\r\n    TASK [Create molecule instance(s)] *********************************************\r\n changed: [localhost] => (item=instance-ubuntu18) => changed=true \r\n      ansible_job_id: '373705094385.150922'\r\n      ansible_loop_var: item\r\n      finished: 0\r\n      item:\r\n        command: sleep infinity\r\n        hostname: devshop.local.computer\r\n        image: geerlingguy/docker-ubuntu18-ansible\r\n        name: instance-ubuntu18\r\n        pre_build_image: true\r\n        privileged: true\r\n        volumes:\r\n        - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n      results_file: /home/jon/.ansible_async/373705094385.150922\r\n      started: 1\r\n```\r\n\r\nI decided I should probably look into the \"results_file\":\r\n```\r\n$ cat /home/jon/.ansible_async/373705094385.150922\r\n{\"msg\": \"Error pulling image geerlingguy/docker-ubuntu18-ansible:latest - 404 Client Error: Not Found (\\\"pull access denied for geerlingguy/docker-ubuntu18-ansible, repository does not exist or may require 'docker login': denied: requested access to the resource is denied\\\")\", \"failed\": true, \"exception\": \"  File  ....\r\n```\r\n\r\nAh ha!\r\n\r\nWrong image name.  :man_facepalming: \r\n\r\nWould be great if this error message was surfaced all the way up to `molecule test` commands without `--debug`.\r\n\r\nThanks for the great tool!\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2446", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2446/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2446/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2446/events", "html_url": "https://github.com/ansible-community/molecule/issues/2446", "id": 526657963, "node_id": "MDU6SXNzdWU1MjY2NTc5NjM=", "number": 2446, "title": "docker version of molecule not working.", "user": {"login": "thepenguinthatwants", "id": 46752217, "node_id": "MDQ6VXNlcjQ2NzUyMjE3", "avatar_url": "https://avatars3.githubusercontent.com/u/46752217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thepenguinthatwants", "html_url": "https://github.com/thepenguinthatwants", "followers_url": "https://api.github.com/users/thepenguinthatwants/followers", "following_url": "https://api.github.com/users/thepenguinthatwants/following{/other_user}", "gists_url": "https://api.github.com/users/thepenguinthatwants/gists{/gist_id}", "starred_url": "https://api.github.com/users/thepenguinthatwants/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thepenguinthatwants/subscriptions", "organizations_url": "https://api.github.com/users/thepenguinthatwants/orgs", "repos_url": "https://api.github.com/users/thepenguinthatwants/repos", "events_url": "https://api.github.com/users/thepenguinthatwants/events{/privacy}", "received_events_url": "https://api.github.com/users/thepenguinthatwants/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-21T15:14:23Z", "updated_at": "2020-01-30T11:02:52Z", "closed_at": "2019-11-24T09:06:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n`molecule` --version\r\n\r\nmolecule, version 2.20.0.0a3.dev12\r\n\r\nI am using it as a alias command that uses docker.\r\n\r\n`\r\nalias molecule='docker run --rm -it -v \"$(pwd)\":/tmp/$(basename \"${PWD}\"):ro -v /var/run/docker.sock:/var/run/docker.sock -w /tmp/$(basename \"${PWD}\") quay.io/ansible/molecule molecule'`\r\n\r\nMolecule installation method (one of):\r\n\r\nDocker\r\n\r\nAnsible installation method (one of):\r\n\r\nArch linux package management\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule init role --driver-name docker --role-name ansible-role`\r\n\r\nCreating a new role named ansible-role\r\n\r\n# Actual Behaviour\r\n\r\n`molecule init role --driver-name docker --role-name ansible-role`\r\n\r\nI only get output of\r\n\r\n--> Initializing new role ansible-role...\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/molecule\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/init/role.py\", line 131, in role\r\n    r.execute()\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/init/role.py\", line 64, in execute\r\n    self._process_templates('role', self._command_args, role_directory)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/init/base.py\", line 61, in _process_templates\r\n    no_input=True,\r\n  File \"/usr/local/lib/python3.7/site-packages/cookiecutter/main.py\", line 94, in cookiecutter\r\n    output_dir=output_dir\r\n  File \"/usr/local/lib/python3.7/site-packages/cookiecutter/generate.py\", line 364, in generate_files\r\n    generate_file(project_dir, infile, context, env)\r\n  File \"/usr/local/lib/python3.7/site-packages/cookiecutter/generate.py\", line 176, in generate_file\r\n    with io.open(outfile, 'w', encoding='utf-8') as fh:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/molecule/ansible-role/README.md'\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2442", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2442/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2442/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2442/events", "html_url": "https://github.com/ansible-community/molecule/issues/2442", "id": 523768047, "node_id": "MDU6SXNzdWU1MjM3NjgwNDc=", "number": 2442, "title": "plugins: how to pass cerberus validation schema to core?", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-11-16T01:23:15Z", "updated_at": "2020-04-26T09:34:57Z", "closed_at": "2020-04-26T09:34:56Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "In Molecule < 3.0, we have all the driver schemas defined in the schema_v2 file. We then run the cerberus validator on this schema against the configuration specified by the user.\r\n\r\nHowever, in the move to 3.0, we removed the shema code. See https://github.com/ansible/molecule/pull/2391/files#diff-1e67bc3147c69bed463615849b56f3b1L490 for that removal for the hetzner cloud driver.\r\n\r\nSo, now I find that my molecule-hetznercloud plugin unit tests are failing schema validation and only the \"name\" option is being validated against (that is because molecule core has that still in the code).\r\n\r\nSo, my idea is:\r\n\r\n1) Should we define schemas in the plugins (move them over)\r\n2) How to pass this schema into core for validation?\r\n\r\nFor 2) if we've successfully loaded the plugin, then we can be pretty sure we can run an import if the schemas are placed in a standard location or accessor off the module. \r\n\r\nOne tricky point is that some drivers, like docker, are not externalised yet, so we'd have to conditionally check that we should be importing from a plugin and not from a schema_v2 definition.\r\n\r\nI don't really like Cerberus as a dependency but we need user configuration validation with decent error messages and this is what it gives us. It is also seemingly well maintained.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2441", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2441/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2441/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2441/events", "html_url": "https://github.com/ansible-community/molecule/issues/2441", "id": 523766931, "node_id": "MDU6SXNzdWU1MjM3NjY5MzE=", "number": 2441, "title": "plugins: molecule looks in wrong place for plugin cookiecutter files", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-16T01:15:42Z", "updated_at": "2019-11-16T01:41:45Z", "closed_at": "2019-11-16T01:41:45Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "After running:\r\n\r\n```\r\n$ cd molecule\r\n$ pip install -e .\r\n$ pip install \"git+https://github.com/pycontribs/molecule-hetznercloud.git@master#egg=molecule-hetznercloud\"\r\n```\r\n\r\nI then do:\r\n\r\n```\r\n$ molecule init scenario -d hetznercloud\r\n```\r\n\r\nAnd then see:\r\n\r\n```\r\n--> Initializing new scenario default...\r\nERROR: The specified template directory (/home/molecule/.venv/lib/python3.7/site-packages/molecule/cookiecutter/scenario/driver/hetznercloud) does not exist\r\n```\r\n\r\nWhere, the plugin cookiecutter files are actually in https://github.com/pycontribs/molecule-hetznercloud/tree/master/molecule_hetznercloud/cookiecutter/scenario/driver/hetznercloud.\r\n\r\nIt should be looking in \"molecule-hetznercloud/molecule_hetznercloud/cookiecutter/scenario/driver/hetznercloud\". I assume other plugins, like molecule-azure, suffer from this same issue?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2439", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2439/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2439/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2439/events", "html_url": "https://github.com/ansible-community/molecule/issues/2439", "id": 523331050, "node_id": "MDU6SXNzdWU1MjMzMzEwNTA=", "number": 2439, "title": "Idempotence test fails with no output", "user": {"login": "till", "id": 27003, "node_id": "MDQ6VXNlcjI3MDAz", "avatar_url": "https://avatars1.githubusercontent.com/u/27003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/till", "html_url": "https://github.com/till", "followers_url": "https://api.github.com/users/till/followers", "following_url": "https://api.github.com/users/till/following{/other_user}", "gists_url": "https://api.github.com/users/till/gists{/gist_id}", "starred_url": "https://api.github.com/users/till/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/till/subscriptions", "organizations_url": "https://api.github.com/users/till/orgs", "repos_url": "https://api.github.com/users/till/repos", "events_url": "https://api.github.com/users/till/events{/privacy}", "received_events_url": "https://api.github.com/users/till/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-11-15T08:39:26Z", "updated_at": "2020-02-03T10:26:09Z", "closed_at": "2020-02-02T15:40:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nUsing `quay.io/ansible/molecule:2.22`\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker\r\n\r\nAnsible installation method (one of):\r\n\r\n- docker\r\n\r\nDetail any linters or test runners used:\r\n\r\n- ansible-lint\r\n- testinfra/pytest\r\n- flake8 \r\n\r\n(Standard setup.)\r\n\r\n# Desired Behavior\r\n\r\nI'm running a complex molecule scenario where I boot multiple instances and use multiple roles to assemble a cluster of servers. I made a change to one of the roles yesterday (to fix a bug) and now molecule is reporting the idempotence check fails, but I would like to know which task it fails on. \r\n\r\n# Actual Behaviour\r\n\r\nI ran with `no_log: false` and `--debug` \u2014 the output is the same:\r\n\r\n```\r\n--> Scenario: 'multi-node'\r\n--> Action: 'idempotence'\r\nERROR: Idempotence test failed because of the following tasks:\r\nAn error occurred during the test sequence action: 'idempotence'. Cleaning up.\r\n--> Scenario: 'multi-node'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'multi-node'\r\n--> Action: 'destroy'\r\n```\r\n\r\nI've been struggling with this for a few hours now, unable to find out what it fails on. Are there any \"special\" options or methods to enable more _verbose_ output for the idempotence tests?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2435", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2435/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2435/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2435/events", "html_url": "https://github.com/ansible-community/molecule/issues/2435", "id": 522093090, "node_id": "MDU6SXNzdWU1MjIwOTMwOTA=", "number": 2435, "title": "anyconfig breaks molecule on centos-8", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars3.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars3.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 5, "created_at": "2019-11-13T10:05:58Z", "updated_at": "2019-11-14T13:12:18Z", "closed_at": "2019-11-14T13:12:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\nInitiall seen at https://zuul.opendev.org/t/openstack/build/236553c6a6d84d0788518f449f89bb18/log/job-output.txt\r\n\r\n```\r\nFile \"/home/zuul/test-python/lib/python3.6/site-packages/anyconfig/backends.py\", line 44, in <module>\r\nimport anyconfig.backend.configobj\r\n```\r\n\r\nI am not yet sure which version of anyconfig caused this but because this is the 2nd breaking bug in two weeks and because anyconfig is solely used in a single place in order to us its dictionary-merge strategy, I wonder if it would not be better to drop it as a dependency.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2434", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2434/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2434/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2434/events", "html_url": "https://github.com/ansible-community/molecule/issues/2434", "id": 521435126, "node_id": "MDU6SXNzdWU1MjE0MzUxMjY=", "number": 2434, "title": "Remove scenario name configuration option", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars3.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}, {"id": 1305702160, "node_id": "MDU6TGFiZWwxMzA1NzAyMTYw", "url": "https://api.github.com/repos/ansible-community/molecule/labels/proposal", "name": "proposal", "color": "bfd4f2", "default": false, "description": "Suggestion for a larger change"}], "state": "closed", "locked": false, "assignee": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars3.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars3.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 4, "created_at": "2019-11-12T09:39:26Z", "updated_at": "2020-02-16T14:48:05Z", "closed_at": "2020-02-16T14:48:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Proposal: Remove scenario name configuration option\r\n\r\n*Author*: Tadej Borov\u0161ak <@tadeboro>\r\n\r\n*Date*: 2019-11-12\r\n\r\n- Status: New\r\n- Proposal type: core configuration\r\n- Estimated time to implement: a week\r\n\r\n\r\n## Motivation\r\n\r\nBecause Molecule allows scenario name to be different from the name of the folder that contains the scenario files, it must load all scenario configurations before it can do anything.\r\n\r\n### Problems\r\n\r\nWhat problems exist that this proposal will solve?\r\n-  In situations where many scenarios exist, loading all of them can take a significant amount of time. All this time is wasted in most situations where we are executing a single scenario.\r\n- If we have a single scenario with broken (invalid config for example), we cannot run anything else until we fix it. This is almost as annoying as go compiler's insistence on removing unused variables during development.\r\n\r\n## Solution proposal\r\n\r\n- Molecule should always name the scenario after the folder that contains a molecule.yml file. This would allow us to skip the initial scenario loading since we know exactly where the scenario in question is located on the disk by simply looking at the scenario name.\r\n\r\n## Documentation\r\n\r\nWe must document this new behavior thoroughly.\r\n\r\n## Anything else?\r\n\r\nBecause this is an obvious API break, we can only do this during the major version bump.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2433", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2433/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2433/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2433/events", "html_url": "https://github.com/ansible-community/molecule/issues/2433", "id": 521418100, "node_id": "MDU6SXNzdWU1MjE0MTgxMDA=", "number": 2433, "title": "Molecule runs lint only on some verifier code", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars3.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-12T09:07:58Z", "updated_at": "2020-02-01T19:04:14Z", "closed_at": "2020-02-01T19:04:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/tadej/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/tadej/tmp/mol/venv/lib64/python3.7/site-packages/ansible\r\n  executable location = /home/tadej/tmp/mol/venv/bin/ansible\r\n  python version = 3.7.5 (default, Oct 17 2019, 12:09:47) [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\r\nmolecule, version 3.0a5.dev10+gec108275\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nReplicating the issue:\r\n\r\n```\r\n$ molecule init role -r bla && cd bla\r\n$ molecule init scenario -s second\r\n$ echo \"invalid-stuff\" >> molecule/default/tests/test_default.py\r\n$ echo \"invalid-stuff\" >> molecule/second/tests/test_default.py\r\n$ molecule lint -s default; molecule lint -s second\r\n--> Validating schema /home/tadej/tmp/mol/bla/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Validating schema /home/tadej/tmp/mol/bla/molecule/second/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u2514\u2500\u2500 lint\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/tadej/tmp/mol/bla/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/tadej/tmp/mol/bla/molecule/default/tests/...\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:1: E305 expected 2 blank lines after class or function definition, found 0\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:1: F821 undefined name 'invalid'\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:9: F821 undefined name 'stuff'\r\n--> Validating schema /home/tadej/tmp/mol/bla/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Validating schema /home/tadej/tmp/mol/bla/molecule/second/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 second\r\n    \u251c\u2500\u2500 dependency\r\n    \u2514\u2500\u2500 lint\r\n    \r\n--> Scenario: 'second'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'second'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/tadej/tmp/mol/bla/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/tadej/tmp/mol/bla/molecule/default/tests/...\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:1: E305 expected 2 blank lines after class or function definition, found 0\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:1: F821 undefined name 'invalid'\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:9: F821 undefined name 'stuff'\r\n```\r\n\r\n# Desired Behavior\r\n\r\n`molecule lint -s default` should report errors in files under `molecule/default/tests`, and `molecule lint -s second` should report errors in files under `molecule/second/tests`.\r\n\r\n# Actual Behaviour\r\n\r\nLinter always checks the same set of files (in the example above, always from the default scenario).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2432", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2432/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2432/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2432/events", "html_url": "https://github.com/ansible-community/molecule/issues/2432", "id": 521169424, "node_id": "MDU6SXNzdWU1MjExNjk0MjQ=", "number": 2432, "title": "Use non-default shell, like /bin/sh instead of /bin/bash", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-11T20:26:27Z", "updated_at": "2020-02-01T18:20:03Z", "closed_at": "2020-02-01T18:20:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.5\r\n  config file = None\r\n  configured module search path = ['/home/robertdb/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.5 (default, Oct 17 2019, 12:16:48) [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nSome containers do not have `/bin/bash`, so login result in an error:\r\n```\r\nmolecule login\r\n--> Validating schema /my_role/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\nrpc error: code = 2 desc = oci runtime error: exec failed: container_linux.go:247: starting container process caused \"exec: \\\"bash\\\": executable file not found in $PATH\"\r\n```\r\n\r\nI'd like to be able to tell molecule to use a different shell. Maybe something like this:\r\n```yaml\r\nplatforms:\r\n  - name: \"my_instance\"\r\n    image: \"alpine\"\r\n    pre_build_image: yes\r\n    login_shell: /bin/sh\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2431", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2431/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2431/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2431/events", "html_url": "https://github.com/ansible-community/molecule/issues/2431", "id": 520767369, "node_id": "MDU6SXNzdWU1MjA3NjczNjk=", "number": 2431, "title": "Make prepare silent", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-11T06:35:18Z", "updated_at": "2020-04-15T17:01:09Z", "closed_at": "2020-04-15T17:01:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.5\r\n  config file = None\r\n  configured module search path = ['/home/robertdb/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.5 (default, Oct 17 2019, 12:16:48) [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nWhen CI fails (in my case, quite often ;-) ) I need to scroll down and find the error in a long list of output.\r\n\r\nI'd like molecule to be more silent and only show the `converge` output. I'm less interested in the `prepare` output. (Maybe if `prepare` failed, show the output, otherwise be (more) silent.\r\n\r\nOther molecule users may be interested in the prepare output, so I guess a parameter needs to be introduced to change the behavior of Molecule. A suggestion:\r\n\r\n```yaml\r\nprovisioner:\r\n  name: ansible\r\n  options:\r\n    prepare_output: none|all|on_failure\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2430", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2430/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2430/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2430/events", "html_url": "https://github.com/ansible-community/molecule/issues/2430", "id": 518040314, "node_id": "MDU6SXNzdWU1MTgwNDAzMTQ=", "number": 2430, "title": "molecule init role detects .git directory as populated role", "user": {"login": "dnorthup-ums", "id": 18331571, "node_id": "MDQ6VXNlcjE4MzMxNTcx", "avatar_url": "https://avatars1.githubusercontent.com/u/18331571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnorthup-ums", "html_url": "https://github.com/dnorthup-ums", "followers_url": "https://api.github.com/users/dnorthup-ums/followers", "following_url": "https://api.github.com/users/dnorthup-ums/following{/other_user}", "gists_url": "https://api.github.com/users/dnorthup-ums/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnorthup-ums/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnorthup-ums/subscriptions", "organizations_url": "https://api.github.com/users/dnorthup-ums/orgs", "repos_url": "https://api.github.com/users/dnorthup-ums/repos", "events_url": "https://api.github.com/users/dnorthup-ums/events{/privacy}", "received_events_url": "https://api.github.com/users/dnorthup-ums/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-11-05T21:17:52Z", "updated_at": "2020-03-09T16:41:48Z", "closed_at": "2020-02-15T18:54:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!- - - Verify first that your issue is not already reported on GitHub - ->\r\n\u2714\r\n<!- - - Do not report bugs before reproducing them with the code of the master branch! - ->\r\nI'd love to, but I don't have the additional time to actually get it running on Fedora just to report a very simple and basic oops. It doesn't appear that this has been merged into master yet anyhow.\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n(Rather minor bug, but kinda annoying.)\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.8.5\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/dnorthup/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.7.4 (default, Jul  9 2019, 16:32:37) [GCC 9.1.1 20190503 (Red Hat 9.1.1-1)]\r\nmolecule, version 2.20.1\r\n```\r\nI cannot get a newer version of molecule running on this platform. Yes, I did try, and no it isn't the fault of the molecule team.\r\n\r\nMolecule installation method (one of):\r\n\r\n- rpm built from source to match OS package format (if the original had worked properly)\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\nDidn't get that far here, they seem to work as much as I can expect given bugs others have reported elsewhere.\r\n\r\n# Desired Behavior\r\n\r\nAllow a new role skeleton to be instantiated into an existing but otherwise effectively empty GIT repository (EG: only contains the \".git\" directory and contents).\r\n\r\n(I think that it is obvious why we wouldn't want to \"init\" into a directory containing a built-out role, so I'm not suggesting that.)\r\n\r\n# Actual Behaviour\r\n\r\n``` bash\r\n[dnorthup@hostname Roles]$ git clone git@gitlab.domain:Roles/molecule_template.git\r\nCloning into 'molecule_template'...\r\nwarning: You appear to have cloned an empty repository.\r\n[dnorthup@hostname Roles]$ molecule init role -r molecule_template\r\n--> Initializing new role molecule_template...\r\nERROR: The directory molecule_template exists. Cannot create new role.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2425", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2425/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2425/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2425/events", "html_url": "https://github.com/ansible-community/molecule/issues/2425", "id": 514907225, "node_id": "MDU6SXNzdWU1MTQ5MDcyMjU=", "number": 2425, "title": "Vagrant provider fails to run successfully with simple config.", "user": {"login": "uid0", "id": 138249, "node_id": "MDQ6VXNlcjEzODI0OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/138249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uid0", "html_url": "https://github.com/uid0", "followers_url": "https://api.github.com/users/uid0/followers", "following_url": "https://api.github.com/users/uid0/following{/other_user}", "gists_url": "https://api.github.com/users/uid0/gists{/gist_id}", "starred_url": "https://api.github.com/users/uid0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uid0/subscriptions", "organizations_url": "https://api.github.com/users/uid0/orgs", "repos_url": "https://api.github.com/users/uid0/repos", "events_url": "https://api.github.com/users/uid0/events{/privacy}", "received_events_url": "https://api.github.com/users/uid0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-30T18:55:25Z", "updated_at": "2020-01-14T11:01:48Z", "closed_at": "2020-01-14T11:01:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.6\r\n  config file = None\r\n  configured module search path = ['/Users/ian/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/ian/Work/newinfra/packer/bastion/bin/ansible\r\n  python version = 3.7.4 (default, Oct 12 2019, 18:55:28) [Clang 11.0.0 (clang-1100.0.33.8)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of): pip\r\n\r\nAnsible installation method (one of): pip\r\n\r\n```\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider: \r\n    name: virtualbox\r\n    options:\r\n      memory: 512\r\n      cpus: 1\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    image: ubuntu/bionic64\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\n# Desired Behavior\r\n\r\nWhen using the default configuration for the vagrant provider, molecule creates a vagrant instance, applies the playbooks, and runs the test.\r\n\r\n# Actual Behaviour\r\n\r\nMolecule crashes in the \"Destroy\" phase after running linters.  \r\n\r\n```\r\nmolecule --debug test                                                                                                            \u2500\u256f\r\n--> Validating schema /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 cleanup\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n--- {}\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/ian/.cache/molecule/bastion/default\r\nMOLECULE_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/ian/.cache/molecule/bastion/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/ian/.cache/molecule/bastion/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nMOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/ian/.cache/molecule/bastion/default MOLECULE_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/ian/.cache/molecule/bastion/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/ian/.cache/molecule/bastion/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ian/Work/newinfra/packer/bastion/bin/yamllint -s /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/vars/main.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/tasks/main.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/meta/main.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/defaults/main.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/playbook.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/handlers/main.yml\r\n\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests/...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n--- {}\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/ian/.cache/molecule/bastion/default\r\nMOLECULE_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/ian/.cache/molecule/bastion/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/ian/.cache/molecule/bastion/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nMOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/ian/.cache/molecule/bastion/default MOLECULE_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/ian/.cache/molecule/bastion/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/ian/.cache/molecule/bastion/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ian/Work/newinfra/packer/bastion/bin/flake8 /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests/test_default.py\r\n\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/playbook.yml...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /Users/ian/.cache/molecule/bastion/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters\r\nANSIBLE_LIBRARY: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library\r\nANSIBLE_ROLES_PATH: /Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/ian/.cache/molecule/bastion/default\r\nMOLECULE_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/ian/.cache/molecule/bastion/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/ian/.cache/molecule/bastion/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/Users/ian/.cache/molecule/bastion/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters ANSIBLE_LIBRARY=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library ANSIBLE_ROLES_PATH=/Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/ian/.cache/molecule/bastion/default MOLECULE_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/ian/.cache/molecule/bastion/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/ian/.cache/molecule/bastion/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ian/Work/newinfra/packer/bastion/bin/ansible-lint -v --exclude=/Users/ian/.cache/molecule/bastion/default /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/playbook.yml\r\n\r\n    Examining /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/playbook.yml of type playbook\r\n    Examining /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/tasks/main.yml of type tasks\r\n    Examining /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/handlers/main.yml of type handlers\r\n    Examining /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/meta/main.yml of type meta\r\nLint completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /Users/ian/.cache/molecule/bastion/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters\r\nANSIBLE_LIBRARY: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library\r\nANSIBLE_ROLES_PATH: /Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/ian/.cache/molecule/bastion/default\r\nMOLECULE_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/ian/.cache/molecule/bastion/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/ian/.cache/molecule/bastion/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/Users/ian/.cache/molecule/bastion/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters ANSIBLE_LIBRARY=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library ANSIBLE_ROLES_PATH=/Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/ian/.cache/molecule/bastion/default MOLECULE_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/ian/.cache/molecule/bastion/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/ian/.cache/molecule/bastion/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ian/Work/newinfra/packer/bastion/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/Users/ian/.cache/molecule/bastion/default/inventory /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml -vvv\r\n\r\n    ansible-playbook 2.8.6\r\n      config file = /Users/ian/.cache/molecule/bastion/default/ansible.cfg\r\n      configured module search path = ['/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries', '/Users/ian/.cache/molecule/bastion/default/library', '/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library']\r\n      ansible python module location = /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/ansible\r\n      executable location = /Users/ian/Work/newinfra/packer/bastion/bin/ansible-playbook\r\n      python version = 3.7.4 (default, Oct 12 2019, 18:55:28) [Clang 11.0.0 (clang-1100.0.33.8)]\r\n    Using /Users/ian/.cache/molecule/bastion/default/ansible.cfg as config file\r\n    host_list declined parsing /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml as it did not pass it's verify_file() method\r\n    script declined parsing /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml as it did not pass it's verify_file() method\r\n    Parsed /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml:8\r\n    fatal: [localhost]: FAILED! => {\r\n        \"msg\": \"The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'box'\\n\\nThe error appears to be in '/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml': line 8, column 7, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n  tasks:\\n    - name: Destroy molecule instance(s)\\n      ^ here\\n\"\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nERROR:\r\nAn error occurred during the test sequence action: 'destroy'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /Users/ian/.cache/molecule/bastion/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters\r\nANSIBLE_LIBRARY: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library\r\nANSIBLE_ROLES_PATH: /Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/ian/.cache/molecule/bastion/default\r\nMOLECULE_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/ian/.cache/molecule/bastion/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/ian/.cache/molecule/bastion/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/Users/ian/.cache/molecule/bastion/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters ANSIBLE_LIBRARY=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library ANSIBLE_ROLES_PATH=/Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/ian/.cache/molecule/bastion/default MOLECULE_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/ian/.cache/molecule/bastion/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/ian/.cache/molecule/bastion/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ian/Work/newinfra/packer/bastion/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/Users/ian/.cache/molecule/bastion/default/inventory /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml -vvv\r\n\r\n    ansible-playbook 2.8.6\r\n      config file = /Users/ian/.cache/molecule/bastion/default/ansible.cfg\r\n      configured module search path = ['/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries', '/Users/ian/.cache/molecule/bastion/default/library', '/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library']\r\n      ansible python module location = /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/ansible\r\n      executable location = /Users/ian/Work/newinfra/packer/bastion/bin/ansible-playbook\r\n      python version = 3.7.4 (default, Oct 12 2019, 18:55:28) [Clang 11.0.0 (clang-1100.0.33.8)]\r\n    Using /Users/ian/.cache/molecule/bastion/default/ansible.cfg as config file\r\n    host_list declined parsing /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml as it did not pass it's verify_file() method\r\n    script declined parsing /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml as it did not pass it's verify_file() method\r\n    Parsed /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml:8\r\n    fatal: [localhost]: FAILED! => {\r\n        \"msg\": \"The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'box'\\n\\nThe error appears to be in '/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml': line 8, column 7, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n  tasks:\\n    - name: Destroy molecule instance(s)\\n      ^ here\\n\"\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nERROR:\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2421", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2421/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2421/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2421/events", "html_url": "https://github.com/ansible-community/molecule/issues/2421", "id": 514083130, "node_id": "MDU6SXNzdWU1MTQwODMxMzA=", "number": 2421, "title": "docs broken: AttributeError: module 'simplejson' has no attribute 'loads'", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-29T17:11:31Z", "updated_at": "2019-11-13T21:03:16Z", "closed_at": "2019-11-13T21:03:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nWarning, treated as error:\r\nautodoc: failed to import class 'config.Config' from module 'molecule'; the following exception was raised:\r\nTraceback (most recent call last):\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/sphinx/ext/autodoc/importer.py\", line 32, in import_module\r\n    return importlib.import_module(modname)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/Users/ssbarnea/os/molecule/molecule/config.py\", line 24, in <module>\r\n    import anyconfig\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/__init__.py\", line 25, in <module>\r\n    from .api import (\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/api.py\", line 101, in <module>\r\n    from anyconfig.backends import Parsers\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/backends.py\", line 21, in <module>\r\n    import anyconfig.backend.json\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/backend/json/__init__.py\", line 24, in <module>\r\n    from .simplejson import Parser as SimpleJsonParser\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/backend/json/simplejson.py\", line 47, in <module>\r\n    class Parser(BaseParser):\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/backend/json/simplejson.py\", line 55, in Parser\r\n    _load_from_string_fn = anyconfig.backend.base.to_method(json.loads)\r\nAttributeError: module 'simplejson' has no attribute 'loads'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2404", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2404/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2404/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2404/events", "html_url": "https://github.com/ansible-community/molecule/issues/2404", "id": 512330795, "node_id": "MDU6SXNzdWU1MTIzMzA3OTU=", "number": 2404, "title": "Not all extended shell-style features are supported", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-25T06:34:44Z", "updated_at": "2020-02-02T15:43:15Z", "closed_at": "2020-02-02T15:43:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.5\r\n  config file = None\r\n  configured module search path = ['/home/robertdb/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.4 (default, Jul  9 2019, 16:32:37) [GCC 9.1.1 20190503 (Red Hat 9.1.1-1)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n- not applicable\r\n\r\n# Desired Behavior\r\n\r\nThe variable should behave [as described](https://molecule.readthedocs.io/en/stable/configuration.html#variable-substitution)\r\n\r\n# Actual Behaviour\r\nI would like more shell-style variable features to be usable. For example:\r\n\r\nAdd a dash to `variable` if `variable` is set:\r\n\r\n```\r\n$ variable=\"i.love.molecule\"\r\n$ echo \"${variable:+$variable-}\"\r\ni.love.molecule-\r\n$ unset variable\r\n$ echo \"${variable:+$variable-}\"\r\n$\r\n```\r\n\r\nCurrently I'm getting this error:\r\n```\r\nERROR: parsing config file 'molecule/default/molecule.yml'.\r\n\r\nInvalid placeholder in string: line 11, col 12\r\n```\r\n\r\n(Where line 11, col 12 is the beginning of this variable.)\r\n\r\nAn example application would be:\r\n\r\n```yaml\r\nplatforms:\r\n  - name: \"instance\"\r\n    image: \"${namespace:+$namespace/}fedora\"\r\n```\r\n\r\nWhere the variables could be:\r\n\r\n- no variables set, `image` should expand to `fedora`\r\n- namespace set to `robertdebock`, `image` should expand to `robertdebock/fedora`. (Mind that `/`.)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2396", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2396/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2396/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2396/events", "html_url": "https://github.com/ansible-community/molecule/issues/2396", "id": 511828981, "node_id": "MDU6SXNzdWU1MTE4Mjg5ODE=", "number": 2396, "title": "ansible-galaxy not able to git clone dependency role using CI_JOB_TOKEN auth (rc=128)", "user": {"login": "gstorme", "id": 3859276, "node_id": "MDQ6VXNlcjM4NTkyNzY=", "avatar_url": "https://avatars3.githubusercontent.com/u/3859276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gstorme", "html_url": "https://github.com/gstorme", "followers_url": "https://api.github.com/users/gstorme/followers", "following_url": "https://api.github.com/users/gstorme/following{/other_user}", "gists_url": "https://api.github.com/users/gstorme/gists{/gist_id}", "starred_url": "https://api.github.com/users/gstorme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gstorme/subscriptions", "organizations_url": "https://api.github.com/users/gstorme/orgs", "repos_url": "https://api.github.com/users/gstorme/repos", "events_url": "https://api.github.com/users/gstorme/events{/privacy}", "received_events_url": "https://api.github.com/users/gstorme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-24T09:40:58Z", "updated_at": "2019-10-24T11:09:14Z", "closed_at": "2019-10-24T11:09:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nI'm using the docker container `quay.io/ansible/molecule:2.22`\r\n\r\n# Actual Behaviour\r\n\r\nmolecule/default/requirements.yml:\r\n```\r\n- src: \"https://gitlab-ci-token:${CI_JOB_TOKEN}@git.masked.url/ansible-roles/postfix\"\r\n  scm: git\r\n  version: master\r\n```\r\n\r\nThe git clone that's being run from ansible-galaxy in the dependency stage fails with rc=128.\r\nI'm using the `gitlab-ci-token:${CI_JOB_TOKEN}` https authentication, which works well for other pipelines (non-molecule) on our hosted Gitlab.\r\n\r\n```\r\n--> Action: 'dependency'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: openstack\r\nMOLECULE_ENV_FILE: /builds/ansible-roles/opendkim/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /root/.cache/molecule/opendkim/default\r\nMOLECULE_EXTRAS: azure,docker,docs,ec2,gce,hetznercloud,linode,lxc,openstack,vagrant,windows\r\nMOLECULE_FILE: /builds/ansible-roles/opendkim/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /root/.cache/molecule/opendkim/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /root/.cache/molecule/opendkim/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /builds/ansible-roles/opendkim\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /builds/ansible-roles/opendkim/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /root/.cache/molecule/opendkim/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /builds/ansible-roles/opendkim/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nMOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=openstack MOLECULE_ENV_FILE=/builds/ansible-roles/opendkim/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/root/.cache/molecule/opendkim/default MOLECULE_EXTRAS=azure,docker,docs,ec2,gce,hetznercloud,linode,lxc,openstack,vagrant,windows MOLECULE_FILE=/builds/ansible-roles/opendkim/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/root/.cache/molecule/opendkim/default/instance_config.yml MOLECULE_INVENTORY_FILE=/root/.cache/molecule/opendkim/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/builds/ansible-roles/opendkim MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/builds/ansible-roles/opendkim/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/root/.cache/molecule/opendkim/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/builds/ansible-roles/opendkim/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/usr/local/bin/ansible-galaxy install --force --role-file=/builds/ansible-roles/opendkim/molecule/default/requirements.yml --roles-path=/root/.cache/molecule/opendkim/default/roles -vvv\r\n\r\n    ansible-galaxy 2.8.4\r\n      config file = /etc/ansible/ansible.cfg\r\n      configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n      executable location = /usr/local/bin/ansible-galaxy\r\n      python version = 3.7.4 (default, Jul 13 2019, 14:35:55) [GCC 8.3.0]\r\n    Using /etc/ansible/ansible.cfg as config file\r\n    Created /root/.ansible_galaxy\r\n    found role {'src': 'https://gitlab-ci-token:${CI_JOB_TOKEN}@git.masked.url/ansible-roles/postfix', 'scm': 'git', 'version': 'master', 'name': 'postfix'} in yaml file\r\n    Processing role postfix\r\n [WARNING]: - postfix was NOT installed successfully: - command /usr/bin/git\r\nclone https://gitlab-ci-token:${CI_JOB_TOKEN}@git.masked.url/ansible-\r\nroles/postfix postfix failed in directory /root/.ansible/tmp/ansible-\r\nlocal-32dfsv7908/tmp4andivjk (rc=128)\r\nERROR! - you can use --ignore-errors to skip failed roles and finish processing the list.\r\nRetrying dependency ... 1/3 time(s)\r\nSleeping 3 seconds before retrying ...\r\n```\r\n\r\nWhen I start a container from the docker image manually, and run a git clone but using a gitlab personal access token, it works fine:\r\n\r\n```\r\nroot@build001:~# docker run -i -t registry.masked.url/molecule:latest /bin/sh\r\n/ # molecule --version\r\nmolecule, version 2.22\r\n/ # ansible-galaxy --version\r\nansible-galaxy 2.8.4\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible-galaxy\r\n  python version = 3.7.4 (default, Jul 13 2019, 14:35:55) [GCC 8.3.0]\r\n/ # git --version\r\ngit version 2.22.0\r\n/ # git clone https://oauth2:i8kymNHSabNJJK2dvc7V@git.masked.url/ansible-roles/postfix\r\nCloning into 'postfix'...\r\nwarning: redirecting to https://git.masked.url/ansible-roles/postfix.git/\r\nremote: Enumerating objects: 54, done.\r\nremote: Counting objects: 100% (54/54), done.\r\nremote: Compressing objects: 100% (24/24), done.\r\nremote: Total 54 (delta 16), reused 54 (delta 16)\r\nUnpacking objects: 100% (54/54), done.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2393", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2393/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2393/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2393/events", "html_url": "https://github.com/ansible-community/molecule/issues/2393", "id": 511385791, "node_id": "MDU6SXNzdWU1MTEzODU3OTE=", "number": 2393, "title": "Proposal: ansible-lint as a project linter", "user": {"login": "nervo", "id": 95935, "node_id": "MDQ6VXNlcjk1OTM1", "avatar_url": "https://avatars0.githubusercontent.com/u/95935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nervo", "html_url": "https://github.com/nervo", "followers_url": "https://api.github.com/users/nervo/followers", "following_url": "https://api.github.com/users/nervo/following{/other_user}", "gists_url": "https://api.github.com/users/nervo/gists{/gist_id}", "starred_url": "https://api.github.com/users/nervo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nervo/subscriptions", "organizations_url": "https://api.github.com/users/nervo/orgs", "repos_url": "https://api.github.com/users/nervo/repos", "events_url": "https://api.github.com/users/nervo/events{/privacy}", "received_events_url": "https://api.github.com/users/nervo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1305702160, "node_id": "MDU6TGFiZWwxMzA1NzAyMTYw", "url": "https://api.github.com/repos/ansible-community/molecule/labels/proposal", "name": "proposal", "color": "bfd4f2", "default": false, "description": "Suggestion for a larger change"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-23T15:02:22Z", "updated_at": "2020-03-11T20:11:48Z", "closed_at": "2020-03-11T20:11:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Proposal: ansible-lint as a project linter\r\n\r\n*Date*: 2019-10-23\r\n\r\n- Status: New\r\n- Proposal type: project linter\r\n\r\n## Motivation\r\n\r\nJust like molecule has become the defacto standard testing framework for ansible roles, ansible-lint has become the defacto standard ansible role linter.\r\nImho, it makes sense for the first one to be able to use the second one to lint role itself :)\r\n\r\n### Problems\r\n\r\nYamllint is too yaml syntax centric, and misses all the domain rules ansible-lint offers (https://docs.ansible.com/ansible-lint/rules/default_rules.html)\r\n\r\n## Solution proposal\r\n\r\nThe following commit (https://github.com/ansible/molecule/commit/dd951b8b2551c7830e1f376e7cdc5cc7dafdee12#diff-ed08bd49fed1ae05e3aa10d9931db457) split linters into 3 types (project, provisionner and verifier), but leave only yamllint as project linter. Maybe one could re-use old base code to re-introduce ansible-lint as project linter.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2386", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2386/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2386/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2386/events", "html_url": "https://github.com/ansible-community/molecule/issues/2386", "id": 509619814, "node_id": "MDU6SXNzdWU1MDk2MTk4MTQ=", "number": 2386, "title": "pip._vendor.pep517.wrappers.BackendUnavailable", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-20T16:44:57Z", "updated_at": "2019-10-21T09:11:37Z", "closed_at": "2019-10-21T09:11:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While hacking molecule code it is possible to encounter a case where a previously created tox environment gets broken and tox refuses to run again on it.  The error encountered looks like\r\n\r\n```\r\n$ tox -e check                                                                                                                                                                         [17:41:01]\r\ncheck inst-nodeps: /Users/ssbarnea/os/molecule/.tox/.tmp/package/1/molecule-3.0a4.dev35+g1fcd9a68.tar.gz\r\nERROR: invocation failed (exit code 1), logfile: /Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/log/check-3.log\r\n=========================================================================================== log start ============================================================================================\r\nRequirement already satisfied: pip<19.1 in ./.tox/py27-ansible25-unit/lib/python3.7/site-packages (19.0.3)\r\nYou are using pip version 19.0.3, however version 19.3.1 is available.\r\nYou should consider upgrading via the 'pip install --upgrade pip' command.\r\nProcessing ./.tox/.tmp/package/1/molecule-3.0a4.dev35+g1fcd9a68.tar.gz\r\n  Installing build dependencies: started\r\n  Installing build dependencies: finished with status 'done'\r\n  Getting requirements to build wheel: started\r\n  Getting requirements to build wheel: finished with status 'done'\r\nException:\r\nTraceback (most recent call last):\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/cli/base_command.py\", line 179, in main\r\n    status = self.run(options, args)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/commands/install.py\", line 315, in run\r\n    resolver.resolve(requirement_set)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/resolve.py\", line 131, in resolve\r\n    self._resolve_one(requirement_set, req)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/resolve.py\", line 294, in _resolve_one\r\n    abstract_dist = self._get_abstract_dist_for(req_to_install)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/resolve.py\", line 242, in _get_abstract_dist_for\r\n    self.require_hashes\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/operations/prepare.py\", line 349, in prepare_linked_requirement\r\n    abstract_dist.prep_for_dist(finder, self.build_isolation)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/operations/prepare.py\", line 149, in prep_for_dist\r\n    reqs = self.req.pep517_backend.get_requires_for_build_wheel()\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_vendor/pep517/wrappers.py\", line 71, in get_requires_for_build_wheel\r\n    'config_settings': config_settings\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_vendor/pep517/wrappers.py\", line 162, in _call_hook\r\n    raise BackendUnavailable\r\npip._vendor.pep517.wrappers.BackendUnavailable\r\nYou are using pip version 19.0.3, however version 19.3.1 is available.\r\nYou should consider upgrading via the 'pip install --upgrade pip' command.\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/Users/ssbarnea/.pyenv/versions/3.7.4/lib/python3.7/subprocess.py\", line 347, in check_call\r\n    raise CalledProcessError(retcode, cmd)\r\nsubprocess.CalledProcessError: Command '('/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/bin/python', '-m', 'pip', 'install', '--no-deps', '-U', '/Users/ssbarnea/os/molecule/.tox/.tmp/package/1/molecule-3.0a4.dev35+g1fcd9a68.tar.gz[docker,ec2,gce,hetznercloud,linode,openstack,vagrant,windows,test]')' returned non-zero exit status 2.\r\n\r\n============================================================================================ log end =============================================================================================\r\n____________________________________________________________________________________________ summary _____________________________________________________________________________________________\r\nERROR:   check: InvocationError for command /Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/bin/python -c 'import subprocess, sys; pip_inst_cmd = sys.executable, \"-m\", \"pip\", \"install\"; subprocess.check_call(pip_inst_cmd + (\"pip<19.1\", )); subprocess.check_call(pip_inst_cmd + tuple(sys.argv[1:]))\r\n```\r\n\r\nWhile this may be related to local configuration, I raised it as a bug as there are others encountering the same kind of errors with other projects and it seems to be related to pip/setuptools/pep517 holy-trinity. \r\n\r\n```\r\n# virtualenv libraries\r\n$ pip freeze --all                                                                                                                                                                     bleach==3.1.0\r\ncertifi==2019.9.11\r\nchardet==3.0.4\r\ncollective.checkdocs==0.2\r\ndocutils==0.15.2\r\nidna==2.8\r\npip==19.0.3\r\npkginfo==1.5.0.1\r\nPygments==2.4.2\r\nreadme-renderer==24.0\r\nrequests==2.22.0\r\nrequests-toolbelt==0.9.1\r\nsetuptools==41.4.0\r\nsix==1.12.0\r\ntqdm==4.36.1\r\ntwine==1.14.0\r\nurllib3==1.25.6\r\nwebencodings==0.5.1\r\nwheel==0.33.6\r\n```\r\n\r\n```\r\n#.package environment\r\n$ pip freeze --all                                                                                                                                                                     pip==19.0.3\r\nsetuptools==41.4.0\r\nsetuptools-scm==3.3.3\r\nsetuptools-scm-git-archive==1.1\r\nwheel==0.33.6\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2376", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2376/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2376/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2376/events", "html_url": "https://github.com/ansible-community/molecule/issues/2376", "id": 508378032, "node_id": "MDU6SXNzdWU1MDgzNzgwMzI=", "number": 2376, "title": "Add \"pause: - seconds: 10\" to cloud provider playbook files", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-17T10:18:29Z", "updated_at": "2019-10-25T23:14:22Z", "closed_at": "2019-10-25T23:14:22Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "It is often the case that networking is not correctly up yet on the cloud provider instances. when just created by Molecule. So, we can add a \"pause\" module invocation by default to all the playbook.yml defaults. This would avoid annoying false starts, failures and other \"bootstrap\" issues for cloud providers.\r\n\r\nEDIT: Hmmm, issue with this is that it always pauses! So perhaps we add this to the \"wait for SSH\" task in the `create.yml` playbook for a \"once only\" style.\r\n\r\nAnother one in a rush ...", "performed_via_github_app": null, "score": 1.0}]}