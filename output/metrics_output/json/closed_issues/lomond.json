{"total_count": 29, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/87", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/87/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/87/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/87/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/87", "id": 626804461, "node_id": "MDU6SXNzdWU2MjY4MDQ0NjE=", "number": 87, "title": "wamp", "user": {"login": "snapo", "id": 6347922, "node_id": "MDQ6VXNlcjYzNDc5MjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/6347922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snapo", "html_url": "https://github.com/snapo", "followers_url": "https://api.github.com/users/snapo/followers", "following_url": "https://api.github.com/users/snapo/following{/other_user}", "gists_url": "https://api.github.com/users/snapo/gists{/gist_id}", "starred_url": "https://api.github.com/users/snapo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snapo/subscriptions", "organizations_url": "https://api.github.com/users/snapo/orgs", "repos_url": "https://api.github.com/users/snapo/repos", "events_url": "https://api.github.com/users/snapo/events{/privacy}", "received_events_url": "https://api.github.com/users/snapo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-28T20:47:46Z", "updated_at": "2020-05-30T10:49:36Z", "closed_at": "2020-05-30T09:51:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way to connect to a wamp based server? Its also a websocket but the handling is different.\r\nhttp://zderadicka.eu/wamp-is-websocket-on-steroids/\r\n\r\ncurrently all my tests failed to even connect ;=) maybe you have a few inputs what else i could try.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/82", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/82/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/82/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/82", "id": 424675577, "node_id": "MDU6SXNzdWU0MjQ2NzU1Nzc=", "number": 82, "title": "Not explicitly calling Websocket.connect( ) results in a weird connection state", "user": {"login": "royrwood", "id": 11411799, "node_id": "MDQ6VXNlcjExNDExNzk5", "avatar_url": "https://avatars3.githubusercontent.com/u/11411799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/royrwood", "html_url": "https://github.com/royrwood", "followers_url": "https://api.github.com/users/royrwood/followers", "following_url": "https://api.github.com/users/royrwood/following{/other_user}", "gists_url": "https://api.github.com/users/royrwood/gists{/gist_id}", "starred_url": "https://api.github.com/users/royrwood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/royrwood/subscriptions", "organizations_url": "https://api.github.com/users/royrwood/orgs", "repos_url": "https://api.github.com/users/royrwood/repos", "events_url": "https://api.github.com/users/royrwood/events{/privacy}", "received_events_url": "https://api.github.com/users/royrwood/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-03-24T23:44:17Z", "updated_at": "2019-03-25T12:47:42Z", "closed_at": "2019-03-25T12:47:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I ran into an odd problem when I tried to gracefully close my websocket connection.  After much going in circles, I discovered that I never explicitly called connect( ) on the Websocket object, but was able to receive data.  This is confusing, since I was able to get data from the server, even though the connection wasn't really open.  The code I used was based on the sample in the docs, and is reproduced below.\r\n\r\nThe code was set up to allow me to hit ctrl-C to generate a KeyboardInterrupt and break out of the processing loop.  When that happened, I wanted to close the connection, but process all the close handshaking so the connection shut down gracefully.\r\n\r\nWith the code as written, the Websocket connection object actually did all the open-connection handshaking AFTER I called the close( ) method!\r\n\r\nThings work as expected if I execute something like \"ws_event_iter = ws.connect( )\" and then do \"for event in ws_event_iter\".  That opens the websocket connection and makes the close( ) call trigger a graceful shutdown of the connection.\r\n\r\n<pre>\r\nfrom __future__ import print_function\r\n\r\nfrom lomond.websocket import WebSocket\r\n\r\nws = WebSocket('ws://localhost:15674/ws')\r\n\r\ntry:\r\n    for event in ws:\r\n          print('EVENT: %s', event)\r\n\r\nexcept KeyboardInterrupt:                \r\n    print('Closing websocket')\r\n    \r\n    ws.close()\r\n    \r\n    for event in ws:\r\n        print('CLOSING EVENT: %s', event)\r\n</pre>\r\n\r\nRunning the code as shown results in the following:\r\n\r\n<pre>\r\n$ python test.py \r\nEVENT: %s Connecting(url='ws://localhost:15674/ws')\r\nEVENT: %s Connected(url='ws://localhost:15674/ws')\r\nEVENT: %s Ready(response=<response HTTP/1.1 101 Switching Protocols>, protocol=None, extensions=set([]))\r\nEVENT: %s Poll()\r\nEVENT: %s Pong(data='')\r\nEVENT: %s Poll()\r\n^CClosing websocket\r\nCLOSING EVENT: %s Connecting(url='ws://localhost:15674/ws')\r\nCLOSING EVENT: %s Connected(url='ws://localhost:15674/ws')\r\nCLOSING EVENT: %s Ready(response=<response HTTP/1.1 101 Switching Protocols>, protocol=None, extensions=set([]))\r\nCLOSING EVENT: %s Poll()\r\nCLOSING EVENT: %s Pong(data='')\r\nCLOSING EVENT: %s Poll()\r\n</pre>\r\n\r\n\r\nAdding an explicit connect( ) call like this results in a clean close...\r\n\r\n<pre>\r\nfrom __future__ import print_function\r\n\r\nfrom lomond.websocket import WebSocket\r\n\r\nws = WebSocket('ws://localhost:15674/ws')\r\nws_event_iter = ws.connect()\r\n\r\ntry:\r\n    for event in ws_event_iter:\r\n          print('EVENT: %s', event)\r\n\r\nexcept KeyboardInterrupt:\r\n    print('Closing websocket')\r\n\r\n    ws.close()\r\n\r\n    for event in ws_event_iter:\r\n        print('CLOSING EVENT: %s', event)\r\n\r\n    print('Websocket closed cleanly, no more events.')\r\n</pre>\r\n\r\nAnd here's the output:\r\n\r\n<pre>\r\n$ python test.py \r\nEVENT: %s Connecting(url='ws://localhost:15674/ws')\r\nEVENT: %s Connected(url='ws://localhost:15674/ws')\r\nEVENT: %s Ready(response=<response HTTP/1.1 101 Switching Protocols>, protocol=None, extensions=set([]))\r\nEVENT: %s Poll()\r\nEVENT: %s Pong(data='')\r\nEVENT: %s Poll()\r\n^CClosing websocket\r\nWebsocket closed cleanly, no more events.\r\n</pre>", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/81", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/81/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/81/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/81", "id": 403561317, "node_id": "MDU6SXNzdWU0MDM1NjEzMTc=", "number": 81, "title": "Can Lomond select clients by \"room\"?", "user": {"login": "milteven12", "id": 25005998, "node_id": "MDQ6VXNlcjI1MDA1OTk4", "avatar_url": "https://avatars3.githubusercontent.com/u/25005998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/milteven12", "html_url": "https://github.com/milteven12", "followers_url": "https://api.github.com/users/milteven12/followers", "following_url": "https://api.github.com/users/milteven12/following{/other_user}", "gists_url": "https://api.github.com/users/milteven12/gists{/gist_id}", "starred_url": "https://api.github.com/users/milteven12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/milteven12/subscriptions", "organizations_url": "https://api.github.com/users/milteven12/orgs", "repos_url": "https://api.github.com/users/milteven12/repos", "events_url": "https://api.github.com/users/milteven12/events{/privacy}", "received_events_url": "https://api.github.com/users/milteven12/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-27T15:15:09Z", "updated_at": "2019-01-27T16:04:38Z", "closed_at": "2019-01-27T16:04:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, there is a python package (websockets) that can create rooms and divide clients for specific rooms, the server can select and send messages based on the rooms or broadcast to all clients besides of the room.\r\n\r\nDoes lomond has this type of feature?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/79", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/79/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/79/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/79", "id": 358399863, "node_id": "MDU6SXNzdWUzNTgzOTk4NjM=", "number": 79, "title": "Error with Python 3.7", "user": {"login": "shred86", "id": 32663154, "node_id": "MDQ6VXNlcjMyNjYzMTU0", "avatar_url": "https://avatars0.githubusercontent.com/u/32663154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shred86", "html_url": "https://github.com/shred86", "followers_url": "https://api.github.com/users/shred86/followers", "following_url": "https://api.github.com/users/shred86/following{/other_user}", "gists_url": "https://api.github.com/users/shred86/gists{/gist_id}", "starred_url": "https://api.github.com/users/shred86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shred86/subscriptions", "organizations_url": "https://api.github.com/users/shred86/orgs", "repos_url": "https://api.github.com/users/shred86/repos", "events_url": "https://api.github.com/users/shred86/events{/privacy}", "received_events_url": "https://api.github.com/users/shred86/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-09T18:29:33Z", "updated_at": "2018-09-09T18:44:32Z", "closed_at": "2018-09-09T18:44:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "[Abodepy](https://github.com/MisterWil/abodepy) uses lomond 0.1.14 to get device updates from the Abode Security System for Home Assistant. If you try to use Python 3.7, there appears to be an error with lomond:\r\n\r\n````\r\nTraceback (most recent call last):\r\n  File \"/Users/shred/venv/homeassistant/lib/python3.7/site-packages/lomond/stream.py\", line 51, in feed\r\n    frame = next(iter_frames)\r\nStopIteration\r\n````\r\n\r\nIt works fine on Python 3.6.5. I [opened an issue](https://github.com/MisterWil/abodepy/issues/37) on the abodepy page but figured I'd post here as well to see if perhaps it's a known issue or to see if anyone else has used Python 3.7 with lomond.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/77", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/77/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/77/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/77", "id": 356150873, "node_id": "MDU6SXNzdWUzNTYxNTA4NzM=", "number": 77, "title": "Close a persistent connection", "user": {"login": "jebesen", "id": 3510321, "node_id": "MDQ6VXNlcjM1MTAzMjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/3510321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jebesen", "html_url": "https://github.com/jebesen", "followers_url": "https://api.github.com/users/jebesen/followers", "following_url": "https://api.github.com/users/jebesen/following{/other_user}", "gists_url": "https://api.github.com/users/jebesen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jebesen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jebesen/subscriptions", "organizations_url": "https://api.github.com/users/jebesen/orgs", "repos_url": "https://api.github.com/users/jebesen/repos", "events_url": "https://api.github.com/users/jebesen/events{/privacy}", "received_events_url": "https://api.github.com/users/jebesen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-08-31T23:41:31Z", "updated_at": "2018-09-03T21:00:40Z", "closed_at": "2018-09-03T21:00:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I create a persistent connection so if the connection disconnects for any reason it automatically reconnects.\r\nBut I would like to be able to close the connection if I want. Now, if I send a close(), it tries to reconnect.\r\nIs there anyway I can entirely close gracefully the connection in a persistent websocket?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/75", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/75/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/75/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/75", "id": 354971638, "node_id": "MDU6SXNzdWUzNTQ5NzE2Mzg=", "number": 75, "title": "Server disconnects regularly", "user": {"login": "rjhornsby", "id": 5077610, "node_id": "MDQ6VXNlcjUwNzc2MTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/5077610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rjhornsby", "html_url": "https://github.com/rjhornsby", "followers_url": "https://api.github.com/users/rjhornsby/followers", "following_url": "https://api.github.com/users/rjhornsby/following{/other_user}", "gists_url": "https://api.github.com/users/rjhornsby/gists{/gist_id}", "starred_url": "https://api.github.com/users/rjhornsby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rjhornsby/subscriptions", "organizations_url": "https://api.github.com/users/rjhornsby/orgs", "repos_url": "https://api.github.com/users/rjhornsby/repos", "events_url": "https://api.github.com/users/rjhornsby/events{/privacy}", "received_events_url": "https://api.github.com/users/rjhornsby/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-08-29T02:30:39Z", "updated_at": "2018-08-31T04:23:04Z", "closed_at": "2018-08-30T14:31:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "My Websocket server is the application ProPresenter 6 (free trial download available if that helps). I'm trying to grab data from the `/stagedisplay` endpoint (127.0.0.1 so LAN/WAN involved), and it's working really well using lomond. I'm getting very close to being able to receive the data I need from ProPresenter to set up some other automation. Thank you!\r\n\r\nHowever, about every 8 seconds or so (give or take `back_off` rate), the server side (PP) sends a TCP RST and lomond has to reconnect. As far as I can tell from looking at the traffic with Wireshark, the ping/pong behavior is correct but that was my first suspicion. Further, I'm able to connect, authenticate, send requests, get responses etc. The disconnections have me a bit baffled though.\r\n\r\nBefore finding lomond, I grabbed _WebSocket Client_[1] from the Apple App Store. While it's got some frustrating UI issues, it does not seem to suffer from the same disconnects. More specifically, _WebSocket Client_ seems to be doing something that is preventing PP from wanting to send a TCP RST, as per Wireshark. I'm not sure what that magic is.\r\n\r\nI've attached a sample Wireshark pcap file (`62576` is the server side port), as well as linked a simple example gist[2] that uses lomond. It seems like there's a bug somewhere in this pile of fun, but I'm not sure where it could be.\r\n\r\n[pro6-lomond.pcapng.zip](https://github.com/wildfoundry/dataplicity-lomond/files/2330464/pro6-lomond.pcapng.zip)\r\n\r\n[1] https://itunes.apple.com/us/app/websocket-client/id1399498094?mt=12\r\n[2] https://gist.github.com/rjhornsby/ed74d386672abe60896ca93d6534e7a1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/74", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/74/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/74/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/74", "id": 338511707, "node_id": "MDU6SXNzdWUzMzg1MTE3MDc=", "number": 74, "title": "How to send json data over websocket?", "user": {"login": "vocabexpresshaxer", "id": 31708649, "node_id": "MDQ6VXNlcjMxNzA4NjQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/31708649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vocabexpresshaxer", "html_url": "https://github.com/vocabexpresshaxer", "followers_url": "https://api.github.com/users/vocabexpresshaxer/followers", "following_url": "https://api.github.com/users/vocabexpresshaxer/following{/other_user}", "gists_url": "https://api.github.com/users/vocabexpresshaxer/gists{/gist_id}", "starred_url": "https://api.github.com/users/vocabexpresshaxer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vocabexpresshaxer/subscriptions", "organizations_url": "https://api.github.com/users/vocabexpresshaxer/orgs", "repos_url": "https://api.github.com/users/vocabexpresshaxer/repos", "events_url": "https://api.github.com/users/vocabexpresshaxer/events{/privacy}", "received_events_url": "https://api.github.com/users/vocabexpresshaxer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-05T10:14:16Z", "updated_at": "2018-08-29T09:42:15Z", "closed_at": "2018-08-29T09:42:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Basically, i completely understand most of the documentation, but im still not 100% on how to send json data over the websocket\r\n\r\nsay i wanted to send\r\n{\"name\": \"bob\", \"age\": 31} over the websocket, how would i do that?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/69", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/69/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/69/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/69", "id": 335301802, "node_id": "MDU6SXNzdWUzMzUzMDE4MDI=", "number": 69, "title": "JSON Decode Error Line 1 Column 2", "user": {"login": "slidenerd", "id": 5139030, "node_id": "MDQ6VXNlcjUxMzkwMzA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5139030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slidenerd", "html_url": "https://github.com/slidenerd", "followers_url": "https://api.github.com/users/slidenerd/followers", "following_url": "https://api.github.com/users/slidenerd/following{/other_user}", "gists_url": "https://api.github.com/users/slidenerd/gists{/gist_id}", "starred_url": "https://api.github.com/users/slidenerd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slidenerd/subscriptions", "organizations_url": "https://api.github.com/users/slidenerd/orgs", "repos_url": "https://api.github.com/users/slidenerd/repos", "events_url": "https://api.github.com/users/slidenerd/events{/privacy}", "received_events_url": "https://api.github.com/users/slidenerd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-25T08:11:17Z", "updated_at": "2018-06-25T08:33:43Z", "closed_at": "2018-06-25T08:33:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "First of all, thank you for the awesome library. The default GDAX stream works perfectly fine. \r\nWhen I tried to fetch data from [THIS](https://www.cryptocompare.com/api#-api-web-socket-) stream, it gives me a JSON Decode error however\r\nThis was my code. I am assuming nested json shouldnt be a problem or is it. Thank you for your response in advance\r\n\r\n```\r\nfrom lomond import WebSocket\r\nwebsocket = WebSocket('wss://streamer.cryptocompare.com/socket.io/?transport=websocket')\r\n\r\n\r\nfor event in websocket:\r\n    if event.name == \"ready\":\r\n        websocket.send_json(SubAdd={ 'subs': ['5~CCCAGG~BTC~USD'] })\r\n    elif event.name == \"text\":\r\n        print(event.json)\r\n```\r\n\r\n```\r\ndisconnecting websocket\r\nTraceback (most recent call last):\r\n  File \"cryptocompare_lomond_streamer.py\", line 9, in <module>\r\n    print(event.json)\r\n  File \"/Users/zup/.local/share/virtualenvs/zupcoinflask-hzGENYeu/lib/python3.6/site-packages/lomond/events.py\", line 329, in json\r\n    self._json = json.loads(self.text)\r\n  File \"/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/__init__.py\", line 354, in loads\r\n    return _default_decoder.decode(s)\r\n  File \"/usr/local/Cellar/python/3.6.5/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/decoder.py\", line 342, in decode\r\n    raise JSONDecodeError(\"Extra data\", s, end)\r\njson.decoder.JSONDecodeError: Extra data: line 1 column 2 (char 1)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/68", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/68/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/68/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/68", "id": 335106731, "node_id": "MDU6SXNzdWUzMzUxMDY3MzE=", "number": 68, "title": "Crashes with generator_stop", "user": {"login": "Fuyukai", "id": 8783751, "node_id": "MDQ6VXNlcjg3ODM3NTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/8783751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fuyukai", "html_url": "https://github.com/Fuyukai", "followers_url": "https://api.github.com/users/Fuyukai/followers", "following_url": "https://api.github.com/users/Fuyukai/following{/other_user}", "gists_url": "https://api.github.com/users/Fuyukai/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fuyukai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fuyukai/subscriptions", "organizations_url": "https://api.github.com/users/Fuyukai/orgs", "repos_url": "https://api.github.com/users/Fuyukai/repos", "events_url": "https://api.github.com/users/Fuyukai/events{/privacy}", "received_events_url": "https://api.github.com/users/Fuyukai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 550691504, "node_id": "MDU6TGFiZWw1NTA2OTE1MDQ=", "url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-06-23T14:56:18Z", "updated_at": "2018-06-27T12:47:14Z", "closed_at": "2018-06-27T12:47:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n[2018-06-23 14:55:56.220575] ERROR: lomond: error in websocket loop\r\nTraceback (most recent call last):\r\n  File \"/home/laura/.local/share/virtualenvs/jokusoramame-SR0dS4Ee/lib/python3.7/site-packages/lomond/stream.py\", line 52, in feed\r\n    frame = next(iter_frames)\r\nStopIteration\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/laura/.local/share/virtualenvs/jokusoramame-SR0dS4Ee/lib/python3.7/site-packages/lomond/session.py\", line 394, in run\r\n    for event in self.websocket.feed(data):\r\n  File \"/home/laura/.local/share/virtualenvs/jokusoramame-SR0dS4Ee/lib/python3.7/site-packages/lomond/websocket.py\", line 272, in feed\r\n    for message in self.stream.feed(data):\r\nRuntimeError: generator raised StopIteration\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/66", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/66/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/66/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/66", "id": 332702742, "node_id": "MDU6SXNzdWUzMzI3MDI3NDI=", "number": 66, "title": "Example of connecting using ssl/https", "user": {"login": "m-menon", "id": 10776430, "node_id": "MDQ6VXNlcjEwNzc2NDMw", "avatar_url": "https://avatars1.githubusercontent.com/u/10776430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-menon", "html_url": "https://github.com/m-menon", "followers_url": "https://api.github.com/users/m-menon/followers", "following_url": "https://api.github.com/users/m-menon/following{/other_user}", "gists_url": "https://api.github.com/users/m-menon/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-menon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-menon/subscriptions", "organizations_url": "https://api.github.com/users/m-menon/orgs", "repos_url": "https://api.github.com/users/m-menon/repos", "events_url": "https://api.github.com/users/m-menon/events{/privacy}", "received_events_url": "https://api.github.com/users/m-menon/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 31, "created_at": "2018-06-15T09:18:13Z", "updated_at": "2018-06-17T13:56:13Z", "closed_at": "2018-06-17T13:56:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi, is there an example how this could be used to connect using ssl? I tried the examples in a few different ways but couldn't get it to work. thanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/62", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/62/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/62/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/62", "id": 327083214, "node_id": "MDU6SXNzdWUzMjcwODMyMTQ=", "number": 62, "title": "Add per-message compression", "user": {"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 550691506, "node_id": "MDU6TGFiZWw1NTA2OTE1MDY=", "url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-05-28T17:21:05Z", "updated_at": "2018-06-26T00:15:10Z", "closed_at": "2018-06-26T00:15:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When this is in place, a 1.0 release may be warranted.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/60", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/60/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/60/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/60/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/60", "id": 324524726, "node_id": "MDU6SXNzdWUzMjQ1MjQ3MjY=", "number": 60, "title": "Closing WebSocket prior to Ready event", "user": {"login": "gmyers18", "id": 26069899, "node_id": "MDQ6VXNlcjI2MDY5ODk5", "avatar_url": "https://avatars3.githubusercontent.com/u/26069899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gmyers18", "html_url": "https://github.com/gmyers18", "followers_url": "https://api.github.com/users/gmyers18/followers", "following_url": "https://api.github.com/users/gmyers18/following{/other_user}", "gists_url": "https://api.github.com/users/gmyers18/gists{/gist_id}", "starred_url": "https://api.github.com/users/gmyers18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gmyers18/subscriptions", "organizations_url": "https://api.github.com/users/gmyers18/orgs", "repos_url": "https://api.github.com/users/gmyers18/repos", "events_url": "https://api.github.com/users/gmyers18/events{/privacy}", "received_events_url": "https://api.github.com/users/gmyers18/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 550691504, "node_id": "MDU6TGFiZWw1NTA2OTE1MDQ=", "url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-18T19:22:56Z", "updated_at": "2018-05-28T17:16:32Z", "closed_at": "2018-05-28T17:16:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "I think I've run into a bug or two with 0.2.4 when calling `WebSocket.close()` prior to a `Ready` event.  Consider the following example code\r\n\r\n```python\r\nimport logging\r\n\r\nfrom lomond import WebSocket, events\r\n\r\nlogging.basicConfig(format='%(message)s', level=logging.DEBUG)\r\nws = WebSocket('ws://echo.websocket.org')\r\n\r\nfor event in ws:\r\n    logging.info(event)\r\n    if isinstance(event, events.Connecting):\r\n        logging.info('Closing @Connecting...')\r\n        ws.close()\r\n    if isinstance(event, events.Connected):\r\n        logging.info('Closing @Connected...')\r\n        ws.close()\r\n```\r\n\r\nwhich produces\r\n```\r\nConnecting(url='ws://echo.websocket.org')\r\nClosing @Connecting...\r\nWebSocket unavailable; data not sent\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 12, in <module>\r\n    ws.close()\r\n  File \"lomond\\websocket.py\", line 234, in close\r\n    self.state.sent_close_time = self.session.session_time\r\n  File \"lomond\\session.py\", line 60, in session_time\r\n    return time.time() - self._start_time\r\nTypeError: unsupported operand type(s) for -: 'float' and 'NoneType'\r\n```\r\n\r\nThe exception from the Connecting stage can be remedied by checking the return value from `_send_close()` when called in `WebSocket.close()` and conditionally not setting the state when the return value is `False`.  This will get you further along to the Connected stage, where the same exception will occur.  The solution here is less clear.  The root problem is due to session time not being available until a `Ready` event is handled at which point `WebSocketSession._start_time` is set.\r\n\r\nMy use case has the event loop running in a thread and I'd like to be able to exit the event loop gracefully (and subsequently exit the thread) by calling `WebSocket.close()` from the main thread.  But, in some corner cases I try to tear things down during either the Connecting or Connected stage.  Even assuming a fix to the issues above, there is no actual connection during the Connecting stage so there is nothing to close.  Is there a recommendation for a way to gracefully exit the event loop in a situation like this?  My only idea right now if to repetitively call `close()`in a loop until `WebSocket.sent_close_time` is not `None`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/59", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/59/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/59/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/59", "id": 324066774, "node_id": "MDU6SXNzdWUzMjQwNjY3NzQ=", "number": 59, "title": "Multiprocessing with Lomond?", "user": {"login": "kpei", "id": 5482978, "node_id": "MDQ6VXNlcjU0ODI5Nzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/5482978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kpei", "html_url": "https://github.com/kpei", "followers_url": "https://api.github.com/users/kpei/followers", "following_url": "https://api.github.com/users/kpei/following{/other_user}", "gists_url": "https://api.github.com/users/kpei/gists{/gist_id}", "starred_url": "https://api.github.com/users/kpei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kpei/subscriptions", "organizations_url": "https://api.github.com/users/kpei/orgs", "repos_url": "https://api.github.com/users/kpei/repos", "events_url": "https://api.github.com/users/kpei/events{/privacy}", "received_events_url": "https://api.github.com/users/kpei/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-17T15:10:28Z", "updated_at": "2018-05-17T15:28:56Z", "closed_at": "2018-05-17T15:28:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible right now to spin up multiple instances of the websocket with multiprocessing?\r\n\r\nI tried a quick check with pickling the websocket component shows that it may not be possible\r\n\r\n```\r\nws = WebSocket('wss://...')\r\npickle.dumps(ws)\r\n\r\nTypeError: can't pickle wsaccel.utf8validator.Utf8Validator objects\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/58", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/58/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/58/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/58", "id": 323497790, "node_id": "MDU6SXNzdWUzMjM0OTc3OTA=", "number": 58, "title": "Error using example echo server", "user": {"login": "VeNoMouS", "id": 597545, "node_id": "MDQ6VXNlcjU5NzU0NQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/597545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VeNoMouS", "html_url": "https://github.com/VeNoMouS", "followers_url": "https://api.github.com/users/VeNoMouS/followers", "following_url": "https://api.github.com/users/VeNoMouS/following{/other_user}", "gists_url": "https://api.github.com/users/VeNoMouS/gists{/gist_id}", "starred_url": "https://api.github.com/users/VeNoMouS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VeNoMouS/subscriptions", "organizations_url": "https://api.github.com/users/VeNoMouS/orgs", "repos_url": "https://api.github.com/users/VeNoMouS/repos", "events_url": "https://api.github.com/users/VeNoMouS/events{/privacy}", "received_events_url": "https://api.github.com/users/VeNoMouS/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-05-16T07:23:25Z", "updated_at": "2018-05-21T03:24:16Z", "closed_at": "2018-05-16T08:49:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nTraceback (most recent call last):\r\n  File \"/tmp/test2.py\", line 9, in <module>\r\n    websocket.send_text('Hello, World')\r\n  File \"build/bdist.linux-x86_64/egg/lomond/websocket.py\", line 461, in send_text\r\nTypeError: text argument must not be bytes\r\n```\r\n\r\n```\r\n#!/usr/bin/python\r\n\r\nfrom lomond import WebSocket\r\n\r\nwebsocket = WebSocket('wss://echo.websocket.org')\r\n\r\nfor event in websocket:\r\n    if event.name == 'poll':\r\n        websocket.send_text('Hello, World')\r\n    elif event.name == 'text':\r\n        print(event.text)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/54", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/54/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/54/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/54", "id": 322813853, "node_id": "MDU6SXNzdWUzMjI4MTM4NTM=", "number": 54, "title": "WebSocket close by remote server results in non-graceful disconnection", "user": {"login": "gmyers18", "id": 26069899, "node_id": "MDQ6VXNlcjI2MDY5ODk5", "avatar_url": "https://avatars3.githubusercontent.com/u/26069899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gmyers18", "html_url": "https://github.com/gmyers18", "followers_url": "https://api.github.com/users/gmyers18/followers", "following_url": "https://api.github.com/users/gmyers18/following{/other_user}", "gists_url": "https://api.github.com/users/gmyers18/gists{/gist_id}", "starred_url": "https://api.github.com/users/gmyers18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gmyers18/subscriptions", "organizations_url": "https://api.github.com/users/gmyers18/orgs", "repos_url": "https://api.github.com/users/gmyers18/repos", "events_url": "https://api.github.com/users/gmyers18/events{/privacy}", "received_events_url": "https://api.github.com/users/gmyers18/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 550691504, "node_id": "MDU6TGFiZWw1NTA2OTE1MDQ=", "url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-05-14T13:20:47Z", "updated_at": "2018-05-15T08:30:33Z", "closed_at": "2018-05-15T08:30:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "In 0.2.2 I'm observing that a WebSocket close initiated by the remote server results in a non-graceful `Disconnected` event.  As far as I can tell this is a regression relative to 0.2.1.\r\n\r\nThis appears to be due to a small change in the main session `run()` loop, where an `is_active` check was removed in the no data case.  I believe this case is triggered when the socket is closed because the selector triggers as readable, but there is no data.  See the change [here](https://github.com/wildfoundry/dataplicity-lomond/commit/fe33e3f032e206cc5386fb839f1cefdbd3c63b37#diff-47e18c92a2e61d31deb894529bda889dL398) on lines 398-400 on the left-hand side.  Restoring these lines appears to fix the issue.\r\n\r\nI'm attaching a test case that should produce non-graceful behavior.  This is based on `test_simple_run()` from test_session.py, but adds the necessary bytes for a close to the payload.  Also, note the `session.websocket.state.session = session` code on line 45 of the diff file.  This feels pretty hackish but without it I ran into a different issue about not being able to set the `sent_close_time` in `WebSocket.close()` because the session was not defined in the WebSocket state.\r\n\r\n\r\n[repro_test.diff](https://github.com/wildfoundry/dataplicity-lomond/files/2000852/repro_test.diff.txt)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/50", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/50/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/50/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/50", "id": 320959558, "node_id": "MDU6SXNzdWUzMjA5NTk1NTg=", "number": 50, "title": "Session close timeout fails due to mixing relative and absolute times", "user": {"login": "gmyers18", "id": 26069899, "node_id": "MDQ6VXNlcjI2MDY5ODk5", "avatar_url": "https://avatars3.githubusercontent.com/u/26069899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gmyers18", "html_url": "https://github.com/gmyers18", "followers_url": "https://api.github.com/users/gmyers18/followers", "following_url": "https://api.github.com/users/gmyers18/following{/other_user}", "gists_url": "https://api.github.com/users/gmyers18/gists{/gist_id}", "starred_url": "https://api.github.com/users/gmyers18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gmyers18/subscriptions", "organizations_url": "https://api.github.com/users/gmyers18/orgs", "repos_url": "https://api.github.com/users/gmyers18/repos", "events_url": "https://api.github.com/users/gmyers18/events{/privacy}", "received_events_url": "https://api.github.com/users/gmyers18/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 550691504, "node_id": "MDU6TGFiZWw1NTA2OTE1MDQ=", "url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-05-07T21:12:28Z", "updated_at": "2018-05-09T19:52:25Z", "closed_at": "2018-05-09T19:52:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "The `sent_close_time` in `WebSocket.State` is an **absolute** epoch time (see [line 240](https://github.com/wildfoundry/dataplicity-lomond/blob/e37406c39d481ccb28dee43b221c0e2f6e595c44/lomond/websocket.py#L240)).  But `Session._check_close_timeout()` performs a comparison which is based on elapsed seconds **relative** to the start of the session (see [line 262](https://github.com/wildfoundry/dataplicity-lomond/blob/e37406c39d481ccb28dee43b221c0e2f6e595c44/lomond/session.py#L262)), thus the close timeout will never fire.  A simple fix would be to store \"elapsed session time\" in `sent_close_time`.\r\n\r\nOn a related note, it is a bit counter-intuitive to me that every call to `WebSocket.close()` updates the `sent_close_time`. Thus, for a case where multiple close packets happen to be sent, the close timeout check is always relative to the **last** packet rather than the **first**.  If one is relying on the close timeout check to close out a session where the server fails to respond, and there is a programming error where `close()` is being called periodically in a loop, then the timeout will likely never succeed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/49", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/49/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/49/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/49", "id": 320914155, "node_id": "MDU6SXNzdWUzMjA5MTQxNTU=", "number": 49, "title": "Exception logged in Windows from select() due to Rejected event", "user": {"login": "gmyers18", "id": 26069899, "node_id": "MDQ6VXNlcjI2MDY5ODk5", "avatar_url": "https://avatars3.githubusercontent.com/u/26069899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gmyers18", "html_url": "https://github.com/gmyers18", "followers_url": "https://api.github.com/users/gmyers18/followers", "following_url": "https://api.github.com/users/gmyers18/following{/other_user}", "gists_url": "https://api.github.com/users/gmyers18/gists{/gist_id}", "starred_url": "https://api.github.com/users/gmyers18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gmyers18/subscriptions", "organizations_url": "https://api.github.com/users/gmyers18/orgs", "repos_url": "https://api.github.com/users/gmyers18/repos", "events_url": "https://api.github.com/users/gmyers18/events{/privacy}", "received_events_url": "https://api.github.com/users/gmyers18/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 926998886, "node_id": "MDU6TGFiZWw5MjY5OTg4ODY=", "url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/labels/Windows", "name": "Windows", "color": "4911a3", "default": false, "description": ""}, {"id": 550691504, "node_id": "MDU6TGFiZWw1NTA2OTE1MDQ=", "url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-05-07T18:50:23Z", "updated_at": "2018-05-09T19:52:15Z", "closed_at": "2018-05-09T19:52:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following trivial script results in a `log.exception()` message in Windows, which doesn't seem like the expected behavior.\r\n\r\n```\r\nimport lomond\r\n\r\nws = lomond.WebSocket('ws://www.google.com')\r\nevents = list(ws.connect())\r\nprint(events)\r\n```\r\n\r\nOutput:\r\n```\r\n[Connecting(url='ws://www.google.com'), Connected(url='ws://www.google.com'), Rejected(<response HTTP/1.1 400 Bad Request>, 'Websocket upgrade failed (code=400)'), Disconnected('error; file descriptor cannot be a negative integer (-1)', graceful=False)]\r\nerror in websocket loop\r\nTraceback (most recent call last):\r\n  File \"C:\\Projects\\venv\\websocket_client_playground\\lib\\site-packages\\lomond\\session.py\", line 384, in run\r\n    readable = selector.wait_readable(poll)\r\n  File \"C:\\Projects\\venv\\websocket_client_playground\\lib\\site-packages\\lomond\\selectors.py\", line 32, in wait_readable\r\n    select.select([self._socket.fileno()], [], [], timeout)\r\nValueError: file descriptor cannot be a negative integer (-1)\r\n```\r\n\r\nEnvironment:\r\n* Python 3.5.3\r\n* lomond 0.2.1\r\n* Windows 10 Pro 1709 16299.309\r\n\r\nWhen a `HandshakeError` is encountered in `WebSocket.feed()`, leading to a `Rejected` event, the socket is ultimately closed.  The issue is with the call to `select()` in `SelectSelector.wait_readable()` which happens after this, as `self._socket.fileno()` will return -1.\r\n\r\nA trivial solution is to wrap the code in `wait_readable()` in a blanket try/except and return `True` in the failure case.  This will allow normal processing to proceed in `WebsocketSession.run()` and the session will close out gracefully.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/45", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/45/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/45/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/45", "id": 317822069, "node_id": "MDU6SXNzdWUzMTc4MjIwNjk=", "number": 45, "title": "What is the licensing on lomond? ", "user": {"login": "ellinorcrux", "id": 6684637, "node_id": "MDQ6VXNlcjY2ODQ2Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/6684637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellinorcrux", "html_url": "https://github.com/ellinorcrux", "followers_url": "https://api.github.com/users/ellinorcrux/followers", "following_url": "https://api.github.com/users/ellinorcrux/following{/other_user}", "gists_url": "https://api.github.com/users/ellinorcrux/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellinorcrux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellinorcrux/subscriptions", "organizations_url": "https://api.github.com/users/ellinorcrux/orgs", "repos_url": "https://api.github.com/users/ellinorcrux/repos", "events_url": "https://api.github.com/users/ellinorcrux/events{/privacy}", "received_events_url": "https://api.github.com/users/ellinorcrux/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-25T22:58:12Z", "updated_at": "2018-04-26T08:59:37Z", "closed_at": "2018-04-26T08:59:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can't find a license file :( ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/39", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/39/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/39/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/39", "id": 302006460, "node_id": "MDU6SXNzdWUzMDIwMDY0NjA=", "number": 39, "title": "Select vs *Poll", "user": {"login": "s0undt3ch", "id": 300048, "node_id": "MDQ6VXNlcjMwMDA0OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/300048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/s0undt3ch", "html_url": "https://github.com/s0undt3ch", "followers_url": "https://api.github.com/users/s0undt3ch/followers", "following_url": "https://api.github.com/users/s0undt3ch/following{/other_user}", "gists_url": "https://api.github.com/users/s0undt3ch/gists{/gist_id}", "starred_url": "https://api.github.com/users/s0undt3ch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/s0undt3ch/subscriptions", "organizations_url": "https://api.github.com/users/s0undt3ch/orgs", "repos_url": "https://api.github.com/users/s0undt3ch/repos", "events_url": "https://api.github.com/users/s0undt3ch/events{/privacy}", "received_events_url": "https://api.github.com/users/s0undt3ch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-03T15:24:46Z", "updated_at": "2018-04-05T09:47:35Z", "closed_at": "2018-04-05T09:47:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "select cannot select on file descriptor numbers > FD_SETSIZE (1024 on\r\nmost systems), limiting the number of connections that can be created.\r\n\r\nIt does not necessarily have to be websocket connections, but if the application already has a high number of file descriptor usage, then the websocket connection would fail...\r\n\r\nSo, why not use any available poll implementation?\r\n\r\nI found out about lomond while searching for a python websocket python implementation. One of the search results was your blog post and the reasoning why lomond was created. You mentioned websocket-client. They seemed to have replaced select with poll, https://github.com/websocket-client/websocket-client/pull/375\r\n\r\nAnyway, any plans to support poll instead of select?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/37", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/37/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/37/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/37", "id": 297227536, "node_id": "MDU6SXNzdWUyOTcyMjc1MzY=", "number": 37, "title": "Text messages are decoded incorrectly under python2", "user": {"login": "jcpetruzza", "id": 102663, "node_id": "MDQ6VXNlcjEwMjY2Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/102663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcpetruzza", "html_url": "https://github.com/jcpetruzza", "followers_url": "https://api.github.com/users/jcpetruzza/followers", "following_url": "https://api.github.com/users/jcpetruzza/following{/other_user}", "gists_url": "https://api.github.com/users/jcpetruzza/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcpetruzza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcpetruzza/subscriptions", "organizations_url": "https://api.github.com/users/jcpetruzza/orgs", "repos_url": "https://api.github.com/users/jcpetruzza/repos", "events_url": "https://api.github.com/users/jcpetruzza/events{/privacy}", "received_events_url": "https://api.github.com/users/jcpetruzza/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-14T20:04:30Z", "updated_at": "2018-02-14T21:54:42Z", "closed_at": "2018-02-14T21:54:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "On python2, `Text` events will contain a unicode object that is incorrectly encoded. As an example, given the following server (using `websocket-server`):\r\n\r\n```python\r\n# -*- coding: utf-8 -*-\r\nfrom websocket_server import WebsocketServer\r\n\r\ndef new_client(client, server):\r\n    server.send_message_to_all(\"Ca\u00f1o\")\r\n\r\nserver = WebsocketServer(1234, host='0.0.0.0')\r\nserver.set_fn_new_client(new_client)\r\nserver.run_forever()\r\n```\r\n\r\nand the following client\r\n\r\n```python\r\nimport lomond\r\n\r\nws = lomond.WebSocket('ws://localhost:1234')\r\nfor event in ws:\r\n    print(event)\r\n```\r\nUnder python2 I get:\r\n```\r\nConnecting(url='ws://localhost:1234')\r\nConnected(url='ws://localhost:1234')\r\nReady(<response HTTP/1.1 101 Switching Protocols>, protocol=None, extensions=set([]))\r\nPoll()\r\nText(u'Ca\\xf1o')\r\nPoll()\r\n```\r\nIt works fine in python3", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/36", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/36/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/36/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/36", "id": 297073526, "node_id": "MDU6SXNzdWUyOTcwNzM1MjY=", "number": 36, "title": "Proxy support?", "user": {"login": "jcpetruzza", "id": 102663, "node_id": "MDQ6VXNlcjEwMjY2Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/102663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcpetruzza", "html_url": "https://github.com/jcpetruzza", "followers_url": "https://api.github.com/users/jcpetruzza/followers", "following_url": "https://api.github.com/users/jcpetruzza/following{/other_user}", "gists_url": "https://api.github.com/users/jcpetruzza/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcpetruzza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcpetruzza/subscriptions", "organizations_url": "https://api.github.com/users/jcpetruzza/orgs", "repos_url": "https://api.github.com/users/jcpetruzza/repos", "events_url": "https://api.github.com/users/jcpetruzza/events{/privacy}", "received_events_url": "https://api.github.com/users/jcpetruzza/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-02-14T12:10:40Z", "updated_at": "2018-04-23T18:24:18Z", "closed_at": "2018-04-23T18:24:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "I wanted to try `lomond` to replace `websockets-client` but there seems to be no way to indicate a proxy server when building a `WebSocket` object, which would unfortunately be blocker for me. Are there plans to support this in the near future or any reasonable workarounds?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/33", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/33/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/33/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/33", "id": 289717135, "node_id": "MDU6SXNzdWUyODk3MTcxMzU=", "number": 33, "title": "Event loop blocks execution of program", "user": {"login": "jeffmikels", "id": 3506020, "node_id": "MDQ6VXNlcjM1MDYwMjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3506020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffmikels", "html_url": "https://github.com/jeffmikels", "followers_url": "https://api.github.com/users/jeffmikels/followers", "following_url": "https://api.github.com/users/jeffmikels/following{/other_user}", "gists_url": "https://api.github.com/users/jeffmikels/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffmikels/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffmikels/subscriptions", "organizations_url": "https://api.github.com/users/jeffmikels/orgs", "repos_url": "https://api.github.com/users/jeffmikels/repos", "events_url": "https://api.github.com/users/jeffmikels/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffmikels/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-18T17:42:46Z", "updated_at": "2018-01-29T10:24:19Z", "closed_at": "2018-01-29T10:24:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "It probably is by design, but the event loop:\r\n\r\n```python\r\nfor event in ws:\r\n```\r\n\r\ncontinually polls the websocket for events, and that blocks the rest of my script from executing. Is there a way to yield the batch of queued events and return control to my script?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/32", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/32/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/32/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/32", "id": 286957461, "node_id": "MDU6SXNzdWUyODY5NTc0NjE=", "number": 32, "title": "SSLV3_ALERT_HANDSHAKE_FAILURE", "user": {"login": "kev946", "id": 3172961, "node_id": "MDQ6VXNlcjMxNzI5NjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/3172961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kev946", "html_url": "https://github.com/kev946", "followers_url": "https://api.github.com/users/kev946/followers", "following_url": "https://api.github.com/users/kev946/following{/other_user}", "gists_url": "https://api.github.com/users/kev946/gists{/gist_id}", "starred_url": "https://api.github.com/users/kev946/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kev946/subscriptions", "organizations_url": "https://api.github.com/users/kev946/orgs", "repos_url": "https://api.github.com/users/kev946/repos", "events_url": "https://api.github.com/users/kev946/events{/privacy}", "received_events_url": "https://api.github.com/users/kev946/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-01-09T03:12:07Z", "updated_at": "2018-01-29T10:23:54Z", "closed_at": "2018-01-29T10:23:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to connect to `wss://ws-feed-public.sandbox.gdax.com`, but get this error:\r\n\r\n```bash\r\nConnecting(url='wss://ws-feed-public.sandbox.gdax.com')\r\nConnectFail('[SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] sslv3 alert handshake failure (_ssl.c:661)')\r\n```\r\n\r\nThis is the version of python ssl:\r\n```python\r\n>>> import ssl\r\n>>> ssl.OPENSSL_VERSION\r\n'OpenSSL 1.0.2g  1 Mar 2016'\r\n```\r\n\r\nHere is the code I am using:\r\n\r\n```python\r\nfrom lomond import WebSocket\r\n\r\nwebsocket = WebSocket('wss://ws-feed-public.sandbox.gdax.com')\r\nfor event in websocket:\r\n    print(event)\r\n```\r\n\r\nDo you know could be happening here?\r\n\r\n\r\n  ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/31", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/31/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/31/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/31", "id": 285113147, "node_id": "MDU6SXNzdWUyODUxMTMxNDc=", "number": 31, "title": "Can't run lomond on python3", "user": {"login": "grctest", "id": 15861527, "node_id": "MDQ6VXNlcjE1ODYxNTI3", "avatar_url": "https://avatars1.githubusercontent.com/u/15861527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grctest", "html_url": "https://github.com/grctest", "followers_url": "https://api.github.com/users/grctest/followers", "following_url": "https://api.github.com/users/grctest/following{/other_user}", "gists_url": "https://api.github.com/users/grctest/gists{/gist_id}", "starred_url": "https://api.github.com/users/grctest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grctest/subscriptions", "organizations_url": "https://api.github.com/users/grctest/orgs", "repos_url": "https://api.github.com/users/grctest/repos", "events_url": "https://api.github.com/users/grctest/events{/privacy}", "received_events_url": "https://api.github.com/users/grctest/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-12-29T15:44:00Z", "updated_at": "2017-12-30T14:28:40Z", "closed_at": "2017-12-30T14:28:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Can't seem to run python3 within a virtual environment on Ubuntu 17.10:\r\n\r\n```\r\n(HUG) btsapi@api:~$ python3 lomond.py\r\nTraceback (most recent call last):\r\n  File \"lomond.py\", line 1, in <module>\r\n    from lomond.websocket import WebSocket\r\n  File \"/home/btsapi/lomond.py\", line 1, in <module>\r\n    from lomond.websocket import WebSocket\r\nModuleNotFoundError: No module named 'lomond.websocket'; 'lomond' is not a package\r\n```\r\n\r\nI tried compiling the source too, it shows as requirements fulfilled yet when I try to run a hello world it fails immediately when importing lomond.\r\n\r\nAny tips on how to setup lomond? Does it not work for python3.x?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/30", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/30/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/30/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/30", "id": 284386719, "node_id": "MDU6SXNzdWUyODQzODY3MTk=", "number": 30, "title": "Lomond logging", "user": {"login": "gdanko", "id": 448439, "node_id": "MDQ6VXNlcjQ0ODQzOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/448439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gdanko", "html_url": "https://github.com/gdanko", "followers_url": "https://api.github.com/users/gdanko/followers", "following_url": "https://api.github.com/users/gdanko/following{/other_user}", "gists_url": "https://api.github.com/users/gdanko/gists{/gist_id}", "starred_url": "https://api.github.com/users/gdanko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gdanko/subscriptions", "organizations_url": "https://api.github.com/users/gdanko/orgs", "repos_url": "https://api.github.com/users/gdanko/repos", "events_url": "https://api.github.com/users/gdanko/events{/privacy}", "received_events_url": "https://api.github.com/users/gdanko/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-12-24T23:35:11Z", "updated_at": "2018-01-03T19:51:22Z", "closed_at": "2018-01-03T19:51:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "My package which uses lomond utilizes python logging. If I set my internal logger's log level to debug I also get lomond debug output. This is how I configure my logger.\r\n\r\n```\r\ndef configure_logger(loggerid=None, debug=False):\r\n\tif loggers.get(loggerid):\r\n\t\treturn loggers.get(loggerid)\r\n\telse:\r\n\t\tlevel = logging.DEBUG if debug == True else logging.INFO\r\n\r\n\t\tlogger = logging.getLogger(loggerid)\r\n\t\thandler = logging.StreamHandler()\r\n\t\tformatter = logging.Formatter(\"%(levelname)s %(message)s\")\r\n\t\thandler.setFormatter(formatter)\r\n\t\tlogger.addHandler(handler)\r\n\t\tlogger.setLevel(level)\r\n\t\tlogger.propagate = False\r\n\t\tloggers[loggerid] = logger\r\n\treturn logger\r\n```\r\nThis SHOULD isolate my logger from lomond's as I am setting propagate to false. Am I missing something here?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/29", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/29/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/29/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/29", "id": 283732591, "node_id": "MDU6SXNzdWUyODM3MzI1OTE=", "number": 29, "title": "websocket inside of a thread", "user": {"login": "gdanko", "id": 448439, "node_id": "MDQ6VXNlcjQ0ODQzOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/448439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gdanko", "html_url": "https://github.com/gdanko", "followers_url": "https://api.github.com/users/gdanko/followers", "following_url": "https://api.github.com/users/gdanko/following{/other_user}", "gists_url": "https://api.github.com/users/gdanko/gists{/gist_id}", "starred_url": "https://api.github.com/users/gdanko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gdanko/subscriptions", "organizations_url": "https://api.github.com/users/gdanko/orgs", "repos_url": "https://api.github.com/users/gdanko/repos", "events_url": "https://api.github.com/users/gdanko/events{/privacy}", "received_events_url": "https://api.github.com/users/gdanko/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-12-21T00:02:16Z", "updated_at": "2017-12-24T23:32:45Z", "closed_at": "2017-12-24T23:32:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI am building a package to communicate with a websocket-based API for a home automation system. I need to be able to send a command (say put the hub into pairing mode to add a new device) and wait to see if the device was added.\r\n\r\nRight now I can create the websocket, send the request, then I get back ack that the request was successful. The script ends there.\r\n\r\nI can use websocket-client and run_forever() but that is blocking and I cannot send to it.\r\n\r\nI am playing with lomond and it looks like a nice package. Is there a way I can put the websocket in a thread so it is not blocking, but send to it if I want to do something?\r\n\r\nExample:\r\n1) Connect to the websocket\r\n2) Send a \"setActivePlace\" request\r\nNow I am good to go\r\n3) Wait for an event that a motion sensor has been tripped\r\n4) Send a payload to the websocket to do X\r\n5) Receive confirmation that the request was sent\r\n6) Wait for an event stating that X was completed\r\n7) Repeat", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/28", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/28/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/28/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/28", "id": 269274373, "node_id": "MDU6SXNzdWUyNjkyNzQzNzM=", "number": 28, "title": "Not getting disconnect events", "user": {"login": "ebrensi", "id": 10375770, "node_id": "MDQ6VXNlcjEwMzc1Nzcw", "avatar_url": "https://avatars3.githubusercontent.com/u/10375770?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrensi", "html_url": "https://github.com/ebrensi", "followers_url": "https://api.github.com/users/ebrensi/followers", "following_url": "https://api.github.com/users/ebrensi/following{/other_user}", "gists_url": "https://api.github.com/users/ebrensi/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrensi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrensi/subscriptions", "organizations_url": "https://api.github.com/users/ebrensi/orgs", "repos_url": "https://api.github.com/users/ebrensi/repos", "events_url": "https://api.github.com/users/ebrensi/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrensi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-28T01:41:11Z", "updated_at": "2017-11-21T16:38:06Z", "closed_at": "2017-11-21T16:38:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, this is a great looking Websocket client implementation!  I'd love to use it but I need to iron out a few details. Perhaps I'm misunderstanding something, but I am not getting disconnect events when I intentionally disconnect my laptop in order to test Lomond's event functionality.   I've tried using threading explicitly, via gevent monkey patching, and explicitly using greenlets for the event loop.  I've tried both the `connect()` method and `persist()`.  Here is the test script I'm running:\r\n```\r\n# import gevent.monkey\r\n# gevent.monkey.patch_all()\r\n\r\nimport lomond\r\nimport lomond.persist\r\nimport datetime\r\nimport threading\r\n\r\nlog = logging\r\n\r\n\r\nclass WebsocketClient:\r\n    def __init__(self, url):\r\n        self.socket = lomond.websocket.WebSocket(url)\r\n\r\n    def run(self):\r\n        def _event_loop():\r\n            print(\"socket client {} OPENED\".format(self.socket))\r\n\r\n            #for event in lomond.persist.persist(self.socket):\r\n            for event in self.socket:\r\n                self.on_event(event)\r\n\r\n            print(\"socket client {} CLOSED\".format(self.socket))\r\n\r\n        # gevent.spawn(_event_loop)\r\n        # gevent.sleep(0)\r\n        threading.Thread(target=_event_loop).start()\r\n\r\n    def stop(self):\r\n        self.socket.close()\r\n\r\n    def on_event(self, event):\r\n        print(\"{} event: {} \".format(self.socket, event))\r\n        print(\"\")\r\n\r\n\r\nclient = WebsocketClient(\"ws://echo.websocket.org\")\r\nclient.run()\r\n\r\ngevent.sleep(5)\r\n\r\ntry:\r\n    while True:\r\n        client.socket.send_text(\r\n            unicode(\"hello {}\".format(datetime.datetime.now()))\r\n        )\r\n        gevent.sleep(10)\r\nexcept:\r\n    client.stop()\r\n```\r\n\r\nI'm running Python 2.7,  and I have tried with 3.6 as well.  What happens is that if I disconnect from the LAN, I continue to receive poll events. Instead of getting a disconnect event, it just keeps going.  The loop that periodically sends messages doesn't raise an Exception either. \r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/19", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/19/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/19/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/19", "id": 233449294, "node_id": "MDU6SXNzdWUyMzM0NDkyOTQ=", "number": 19, "title": "TypeError in message.py", "user": {"login": "larsenglund", "id": 5367846, "node_id": "MDQ6VXNlcjUzNjc4NDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/5367846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsenglund", "html_url": "https://github.com/larsenglund", "followers_url": "https://api.github.com/users/larsenglund/followers", "following_url": "https://api.github.com/users/larsenglund/following{/other_user}", "gists_url": "https://api.github.com/users/larsenglund/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsenglund/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsenglund/subscriptions", "organizations_url": "https://api.github.com/users/larsenglund/orgs", "repos_url": "https://api.github.com/users/larsenglund/repos", "events_url": "https://api.github.com/users/larsenglund/events{/privacy}", "received_events_url": "https://api.github.com/users/larsenglund/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-06-04T18:04:17Z", "updated_at": "2017-06-07T12:50:59Z", "closed_at": "2017-06-07T12:50:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I tried installing dataplicity on my raspberry pi but I couldn't connect. A look in the log, `less /var/log/dataplicity.log`, showed the same error over and over again:\r\n```\r\n  File \"/home/dataplicity/.pex/install/lomond-0.1.7a0-py2.py3-none-any.whl.f9cee7ed31f72b160ca023b6fcbe37bc4b1726ef/lomond-0.1.7a0-py2.py3-none-any.whl/lomond/message.py\", line 20, in Message\r\n    _unpack16 = struct.Struct('!H').unpack\r\nTypeError: Struct() argument 1 must be string, not unicode\r\n```\r\nI fixed this by changing line 20 in message.py from `_unpack16 = struct.Struct('!H').unpack` to `_unpack16 = struct.Struct('!H'.encode('utf-8')).unpack` and after restarting dataplicity with `sudo supervisorctl restart tuxtunnel` I was able to connect successfully. I just thought I would post this here if someone else has the same problem with dataplicity. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/3", "repository_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond", "labels_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/3/comments", "events_url": "https://api.github.com/repos/wildfoundry/dataplicity-lomond/issues/3/events", "html_url": "https://github.com/wildfoundry/dataplicity-lomond/issues/3", "id": 214646028, "node_id": "MDU6SXNzdWUyMTQ2NDYwMjg=", "number": 3, "title": "Detect decoding errors in Text frames", "user": {"login": "willmcgugan", "id": 554369, "node_id": "MDQ6VXNlcjU1NDM2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/554369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willmcgugan", "html_url": "https://github.com/willmcgugan", "followers_url": "https://api.github.com/users/willmcgugan/followers", "following_url": "https://api.github.com/users/willmcgugan/following{/other_user}", "gists_url": "https://api.github.com/users/willmcgugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/willmcgugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willmcgugan/subscriptions", "organizations_url": "https://api.github.com/users/willmcgugan/orgs", "repos_url": "https://api.github.com/users/willmcgugan/repos", "events_url": "https://api.github.com/users/willmcgugan/events{/privacy}", "received_events_url": "https://api.github.com/users/willmcgugan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-16T09:41:46Z", "updated_at": "2017-03-22T15:27:47Z", "closed_at": "2017-03-22T15:27:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The websocket should be closed as soon as a utf-8 decode error is found in a (potentially fragmented) text frame. I can borrow https://github.com/crossbario/autobahn-python/blob/master/autobahn/websocket/utf8validator.py from the Autobahn project to do this.", "performed_via_github_app": null, "score": 1.0}]}