{"total_count": 16, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/btubbs/sseclient/issues/43", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/43/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/43/events", "html_url": "https://github.com/btubbs/sseclient/issues/43", "id": 579909092, "node_id": "MDU6SXNzdWU1Nzk5MDkwOTI=", "number": 43, "title": "vers. 0.0.25", "user": {"login": "xqt", "id": 1149488, "node_id": "MDQ6VXNlcjExNDk0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1149488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xqt", "html_url": "https://github.com/xqt", "followers_url": "https://api.github.com/users/xqt/followers", "following_url": "https://api.github.com/users/xqt/following{/other_user}", "gists_url": "https://api.github.com/users/xqt/gists{/gist_id}", "starred_url": "https://api.github.com/users/xqt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xqt/subscriptions", "organizations_url": "https://api.github.com/users/xqt/orgs", "repos_url": "https://api.github.com/users/xqt/repos", "events_url": "https://api.github.com/users/xqt/events{/privacy}", "received_events_url": "https://api.github.com/users/xqt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-12T12:36:25Z", "updated_at": "2020-03-14T18:14:08Z", "closed_at": "2020-03-14T18:14:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Please bump the master branch to vers. 0.0.25 and upload it to pypi.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/40", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/40/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/40/events", "html_url": "https://github.com/btubbs/sseclient/issues/40", "id": 539314666, "node_id": "MDU6SXNzdWU1MzkzMTQ2NjY=", "number": 40, "title": "Changing the encoding?", "user": {"login": "wetneb", "id": 309908, "node_id": "MDQ6VXNlcjMwOTkwOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/309908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wetneb", "html_url": "https://github.com/wetneb", "followers_url": "https://api.github.com/users/wetneb/followers", "following_url": "https://api.github.com/users/wetneb/following{/other_user}", "gists_url": "https://api.github.com/users/wetneb/gists{/gist_id}", "starred_url": "https://api.github.com/users/wetneb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wetneb/subscriptions", "organizations_url": "https://api.github.com/users/wetneb/orgs", "repos_url": "https://api.github.com/users/wetneb/repos", "events_url": "https://api.github.com/users/wetneb/events{/privacy}", "received_events_url": "https://api.github.com/users/wetneb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-12-17T21:16:56Z", "updated_at": "2020-02-27T18:27:40Z", "closed_at": "2020-02-27T18:27:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "The `requests` library provides a way to change the encoding used to read a response:\r\n\r\n```\r\nr = requests.get('http://my.url/')\r\nr.encoding = 'utf-8' # this forces the encoding used to decode the response\r\n```\r\nHowever as a user of `sseclient` I cannot use this directly to fix the encoding used by SSEClient to read a stream.\r\n\r\nSometimes reading a stream can fail because of a wrong encoding:\r\n```\r\n  File \"/data/project/editgroups/www/python/src/store/stream.py\", line 13, in stream\r\n    for event in EventSource(url):\r\n  File \"/data/project/editgroups/listener_venv/lib/python3.5/site-packages/sseclient.py\", line 98, in __next__\r\n    self._connect()\r\n  File \"/data/project/editgroups/listener_venv/lib/python3.5/site-packages/sseclient.py\", line 56, in _connect\r\n    self.resp = requester.get(self.url, stream=True, **self.requests_kwargs)\r\n  File \"/data/project/editgroups/listener_venv/lib/python3.5/site-packages/requests/api.py\", line 75, in get\r\n    return request('get', url, params=params, **kwargs)\r\n  File \"/data/project/editgroups/listener_venv/lib/python3.5/site-packages/requests/api.py\", line 60, in request\r\n    return session.request(method=method, url=url, **kwargs)\r\n  File \"/data/project/editgroups/listener_venv/lib/python3.5/site-packages/requests/sessions.py\", line 533, in request\r\n    resp = self.send(prep, **send_kwargs)\r\n  File \"/data/project/editgroups/listener_venv/lib/python3.5/site-packages/requests/sessions.py\", line 646, in send\r\n    r = adapter.send(request, **kwargs)\r\n  File \"/data/project/editgroups/listener_venv/lib/python3.5/site-packages/requests/adapters.py\", line 449, in send\r\n    timeout=timeout\r\n  File \"/data/project/editgroups/listener_venv/lib/python3.5/site-packages/urllib3/connectionpool.py\", line 600, in urlopen\r\n    chunked=chunked)\r\n  File \"/data/project/editgroups/listener_venv/lib/python3.5/site-packages/urllib3/connectionpool.py\", line 354, in _make_request\r\n    conn.request(method, url, **httplib_request_kw)\r\n  File \"/usr/lib/python3.5/http/client.py\", line 1107, in request\r\n    self._send_request(method, url, body, headers)\r\n  File \"/usr/lib/python3.5/http/client.py\", line 1147, in _send_request\r\n    self.putheader(hdr, value)\r\n  File \"/usr/lib/python3.5/http/client.py\", line 1079, in putheader\r\n    values[i] = one_value.encode('latin-1')\r\nUnicodeEncodeError: 'latin-1' codec can't encode characters in position 0-1: ordinal not in range(256)\r\n```\r\n\r\nSo it'd be nice if we could have an option in the `SSEClient` constructor to set the encoding, which would be passed down to the `requests` library. Would you be open to that?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/38", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/38/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/38/events", "html_url": "https://github.com/btubbs/sseclient/issues/38", "id": 538040348, "node_id": "MDU6SXNzdWU1MzgwNDAzNDg=", "number": 38, "title": "Spurious replacement characters (U+FFFD) in events", "user": {"login": "Count-Count", "id": 51271955, "node_id": "MDQ6VXNlcjUxMjcxOTU1", "avatar_url": "https://avatars2.githubusercontent.com/u/51271955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Count-Count", "html_url": "https://github.com/Count-Count", "followers_url": "https://api.github.com/users/Count-Count/followers", "following_url": "https://api.github.com/users/Count-Count/following{/other_user}", "gists_url": "https://api.github.com/users/Count-Count/gists{/gist_id}", "starred_url": "https://api.github.com/users/Count-Count/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Count-Count/subscriptions", "organizations_url": "https://api.github.com/users/Count-Count/orgs", "repos_url": "https://api.github.com/users/Count-Count/repos", "events_url": "https://api.github.com/users/Count-Count/events{/privacy}", "received_events_url": "https://api.github.com/users/Count-Count/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-15T11:53:10Z", "updated_at": "2020-02-28T20:17:05Z", "closed_at": "2020-02-27T03:49:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The unicode decoder state is not saved across SSEClient.__next__() calls. Thus if the buffer ends in the middle of a multi-byte encoding the decoder fails to decode the char on the next call.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/31", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/31/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/31/events", "html_url": "https://github.com/btubbs/sseclient/issues/31", "id": 442658411, "node_id": "MDU6SXNzdWU0NDI2NTg0MTE=", "number": 31, "title": "Please add Python 3.4, 3.6 and 3.7 to the travis test matrix", "user": {"login": "xqt", "id": 1149488, "node_id": "MDQ6VXNlcjExNDk0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1149488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xqt", "html_url": "https://github.com/xqt", "followers_url": "https://api.github.com/users/xqt/followers", "following_url": "https://api.github.com/users/xqt/following{/other_user}", "gists_url": "https://api.github.com/users/xqt/gists{/gist_id}", "starred_url": "https://api.github.com/users/xqt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xqt/subscriptions", "organizations_url": "https://api.github.com/users/xqt/orgs", "repos_url": "https://api.github.com/users/xqt/repos", "events_url": "https://api.github.com/users/xqt/events{/privacy}", "received_events_url": "https://api.github.com/users/xqt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-10T10:51:49Z", "updated_at": "2019-05-14T00:56:44Z", "closed_at": "2019-05-14T00:56:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/30", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/30/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/30/events", "html_url": "https://github.com/btubbs/sseclient/issues/30", "id": 442657684, "node_id": "MDU6SXNzdWU0NDI2NTc2ODQ=", "number": 30, "title": "Please add/synchronize v0.0.24 tag", "user": {"login": "xqt", "id": 1149488, "node_id": "MDQ6VXNlcjExNDk0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1149488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xqt", "html_url": "https://github.com/xqt", "followers_url": "https://api.github.com/users/xqt/followers", "following_url": "https://api.github.com/users/xqt/following{/other_user}", "gists_url": "https://api.github.com/users/xqt/gists{/gist_id}", "starred_url": "https://api.github.com/users/xqt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xqt/subscriptions", "organizations_url": "https://api.github.com/users/xqt/orgs", "repos_url": "https://api.github.com/users/xqt/repos", "events_url": "https://api.github.com/users/xqt/events{/privacy}", "received_events_url": "https://api.github.com/users/xqt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-10T10:49:50Z", "updated_at": "2019-05-14T00:56:31Z", "closed_at": "2019-05-14T00:56:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "tag of v0.0.24 release is missing in the repository", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/27", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/27/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/27/events", "html_url": "https://github.com/btubbs/sseclient/issues/27", "id": 432034020, "node_id": "MDU6SXNzdWU0MzIwMzQwMjA=", "number": 27, "title": "sseclient can't detect end of next event?", "user": {"login": "docelic", "id": 112993, "node_id": "MDQ6VXNlcjExMjk5Mw==", "avatar_url": "https://avatars0.githubusercontent.com/u/112993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/docelic", "html_url": "https://github.com/docelic", "followers_url": "https://api.github.com/users/docelic/followers", "following_url": "https://api.github.com/users/docelic/following{/other_user}", "gists_url": "https://api.github.com/users/docelic/gists{/gist_id}", "starred_url": "https://api.github.com/users/docelic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/docelic/subscriptions", "organizations_url": "https://api.github.com/users/docelic/orgs", "repos_url": "https://api.github.com/users/docelic/repos", "events_url": "https://api.github.com/users/docelic/events{/privacy}", "received_events_url": "https://api.github.com/users/docelic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-11T13:48:28Z", "updated_at": "2019-12-09T11:59:04Z", "closed_at": "2019-04-15T09:48:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am connecting to a server and not receiving any server-sent events.\r\n\r\nAfter looking into the code, this is because in sseclient.py function __next__(), the code beginning with `while not self._event_complete()` never completes, so it doesn't complete and process any events, but it only appends to the internal buffer.\r\n\r\nAny hints why this might be happening? Thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/22", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/22/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/22/events", "html_url": "https://github.com/btubbs/sseclient/issues/22", "id": 424360802, "node_id": "MDU6SXNzdWU0MjQzNjA4MDI=", "number": 22, "title": "sseclient 0.0.23 fails with AttributeError", "user": {"login": "xqt", "id": 1149488, "node_id": "MDQ6VXNlcjExNDk0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1149488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xqt", "html_url": "https://github.com/xqt", "followers_url": "https://api.github.com/users/xqt/followers", "following_url": "https://api.github.com/users/xqt/following{/other_user}", "gists_url": "https://api.github.com/users/xqt/gists{/gist_id}", "starred_url": "https://api.github.com/users/xqt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xqt/subscriptions", "organizations_url": "https://api.github.com/users/xqt/orgs", "repos_url": "https://api.github.com/users/xqt/repos", "events_url": "https://api.github.com/users/xqt/events{/privacy}", "received_events_url": "https://api.github.com/users/xqt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-22T19:10:18Z", "updated_at": "2019-04-17T02:27:13Z", "closed_at": "2019-04-17T02:27:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "sseclient 0.0.23 fails with AttributeError: '_fileobject' object has no attribute 'read1'\r\nSee https://phabricator.wikimedia.org/T219024", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/19", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/19/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/19/events", "html_url": "https://github.com/btubbs/sseclient/issues/19", "id": 411378795, "node_id": "MDU6SXNzdWU0MTEzNzg3OTU=", "number": 19, "title": "Please provide a version string with your package", "user": {"login": "xqt", "id": 1149488, "node_id": "MDQ6VXNlcjExNDk0ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1149488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xqt", "html_url": "https://github.com/xqt", "followers_url": "https://api.github.com/users/xqt/followers", "following_url": "https://api.github.com/users/xqt/following{/other_user}", "gists_url": "https://api.github.com/users/xqt/gists{/gist_id}", "starred_url": "https://api.github.com/users/xqt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xqt/subscriptions", "organizations_url": "https://api.github.com/users/xqt/orgs", "repos_url": "https://api.github.com/users/xqt/repos", "events_url": "https://api.github.com/users/xqt/events{/privacy}", "received_events_url": "https://api.github.com/users/xqt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-02-18T09:29:47Z", "updated_at": "2019-03-19T15:59:02Z", "closed_at": "2019-03-19T15:58:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Please provide a `__version__` string with your package. This is needed to verify the right version at runtime.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/18", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/18/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/18/events", "html_url": "https://github.com/btubbs/sseclient/issues/18", "id": 401553798, "node_id": "MDU6SXNzdWU0MDE1NTM3OTg=", "number": 18, "title": "How to pass timeout seconds.", "user": {"login": "samta93", "id": 38318281, "node_id": "MDQ6VXNlcjM4MzE4Mjgx", "avatar_url": "https://avatars0.githubusercontent.com/u/38318281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samta93", "html_url": "https://github.com/samta93", "followers_url": "https://api.github.com/users/samta93/followers", "following_url": "https://api.github.com/users/samta93/following{/other_user}", "gists_url": "https://api.github.com/users/samta93/gists{/gist_id}", "starred_url": "https://api.github.com/users/samta93/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samta93/subscriptions", "organizations_url": "https://api.github.com/users/samta93/orgs", "repos_url": "https://api.github.com/users/samta93/repos", "events_url": "https://api.github.com/users/samta93/events{/privacy}", "received_events_url": "https://api.github.com/users/samta93/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-22T00:36:18Z", "updated_at": "2019-01-24T01:11:31Z", "closed_at": "2019-01-24T01:11:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "There are cases when a client would not know if the connection is still healthy. I encountered similar issue when server closed the connection but client is still listening. In such cases I would want to close the connection (after timeout) and reopen. \r\nBasically I should be able to do something like:\r\n$ self.resp = requester.get(self.url, timeout=120, stream=True, **self.requests_kwargs)\r\nBut the library doesnt allow me the way to pass timeout value.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/15", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/15/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/15/events", "html_url": "https://github.com/btubbs/sseclient/issues/15", "id": 357790359, "node_id": "MDU6SXNzdWUzNTc3OTAzNTk=", "number": 15, "title": "Not sure what \"build_headers\" are for", "user": {"login": "JasonLin1", "id": 36579687, "node_id": "MDQ6VXNlcjM2NTc5Njg3", "avatar_url": "https://avatars2.githubusercontent.com/u/36579687?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JasonLin1", "html_url": "https://github.com/JasonLin1", "followers_url": "https://api.github.com/users/JasonLin1/followers", "following_url": "https://api.github.com/users/JasonLin1/following{/other_user}", "gists_url": "https://api.github.com/users/JasonLin1/gists{/gist_id}", "starred_url": "https://api.github.com/users/JasonLin1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JasonLin1/subscriptions", "organizations_url": "https://api.github.com/users/JasonLin1/orgs", "repos_url": "https://api.github.com/users/JasonLin1/repos", "events_url": "https://api.github.com/users/JasonLin1/events{/privacy}", "received_events_url": "https://api.github.com/users/JasonLin1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-06T19:19:25Z", "updated_at": "2018-12-17T23:23:00Z", "closed_at": "2018-12-17T23:23:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/13", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/13/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/13/events", "html_url": "https://github.com/btubbs/sseclient/issues/13", "id": 354361729, "node_id": "MDU6SXNzdWUzNTQzNjE3Mjk=", "number": 13, "title": "TypeError on Python 3", "user": {"login": "jaraco", "id": 308610, "node_id": "MDQ6VXNlcjMwODYxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/308610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaraco", "html_url": "https://github.com/jaraco", "followers_url": "https://api.github.com/users/jaraco/followers", "following_url": "https://api.github.com/users/jaraco/following{/other_user}", "gists_url": "https://api.github.com/users/jaraco/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaraco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaraco/subscriptions", "organizations_url": "https://api.github.com/users/jaraco/orgs", "repos_url": "https://api.github.com/users/jaraco/repos", "events_url": "https://api.github.com/users/jaraco/events{/privacy}", "received_events_url": "https://api.github.com/users/jaraco/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-27T15:17:13Z", "updated_at": "2018-08-27T15:36:32Z", "closed_at": "2018-08-27T15:36:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When deploying Velociraptor's web proc on Python 3, we see this error in the logs:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/app/.heroku/venv/lib/python3.6/site-packages/gunicorn/workers/base_async.py\", line 56, in handle\r\n    self.handle_request(listener_name, req, client, addr)\r\n  File \"/app/.heroku/venv/lib/python3.6/site-packages/gunicorn/workers/ggevent.py\", line 160, in handle_request\r\n    addr)\r\n  File \"/app/.heroku/venv/lib/python3.6/site-packages/gunicorn/workers/base_async.py\", line 114, in handle_request\r\n    for item in respiter:\r\n  File \"/app/.heroku/venv/lib/python3.6/site-packages/newrelic/api/web_transaction.py\", line 646, in __iter__\r\n    for item in self.generator:\r\n  File \"/app/.heroku/venv/lib/python3.6/site-packages/newrelic/api/web_transaction.py\", line 1053, in __iter__\r\n    for data in self.iterable:\r\n  File \"/app/.heroku/venv/lib/python3.6/site-packages/vr/server/events.py\", line 51, in __iter__\r\n    yield self.next()\r\n  File \"/app/.heroku/venv/lib/python3.6/site-packages/vr/server/events.py\", line 61, in next\r\n    return ev.dump()\r\n  File \"/app/.heroku/venv/lib/python3.6/site-packages/sseclient.py\", line 116, in dump\r\n    lines.extend('data: %s' % d for d in self.data.split('\\n'))\r\nTypeError: a bytes-like object is required, not 'str'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/10", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/10/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/10/events", "html_url": "https://github.com/btubbs/sseclient/issues/10", "id": 257705884, "node_id": "MDU6SXNzdWUyNTc3MDU4ODQ=", "number": 10, "title": "How to close the sseclient?", "user": {"login": "ctranxuan", "id": 816144, "node_id": "MDQ6VXNlcjgxNjE0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/816144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ctranxuan", "html_url": "https://github.com/ctranxuan", "followers_url": "https://api.github.com/users/ctranxuan/followers", "following_url": "https://api.github.com/users/ctranxuan/following{/other_user}", "gists_url": "https://api.github.com/users/ctranxuan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ctranxuan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ctranxuan/subscriptions", "organizations_url": "https://api.github.com/users/ctranxuan/orgs", "repos_url": "https://api.github.com/users/ctranxuan/repos", "events_url": "https://api.github.com/users/ctranxuan/events{/privacy}", "received_events_url": "https://api.github.com/users/ctranxuan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-09-14T12:44:28Z", "updated_at": "2018-02-23T01:59:43Z", "closed_at": "2018-02-23T01:59:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nThat's more a question than an issue: how do we close the sseclient? I mean how do we close the connection?\r\nSorry, it might be a python newbie question...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/9", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/9/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/9/events", "html_url": "https://github.com/btubbs/sseclient/issues/9", "id": 253577919, "node_id": "MDU6SXNzdWUyNTM1Nzc5MTk=", "number": 9, "title": "0.0.18 lags", "user": {"login": "doczoidberg", "id": 1972209, "node_id": "MDQ6VXNlcjE5NzIyMDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1972209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doczoidberg", "html_url": "https://github.com/doczoidberg", "followers_url": "https://api.github.com/users/doczoidberg/followers", "following_url": "https://api.github.com/users/doczoidberg/following{/other_user}", "gists_url": "https://api.github.com/users/doczoidberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/doczoidberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doczoidberg/subscriptions", "organizations_url": "https://api.github.com/users/doczoidberg/orgs", "repos_url": "https://api.github.com/users/doczoidberg/repos", "events_url": "https://api.github.com/users/doczoidberg/events{/privacy}", "received_events_url": "https://api.github.com/users/doczoidberg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-08-29T09:01:43Z", "updated_at": "2019-04-17T02:32:54Z", "closed_at": "2019-04-17T02:32:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I updated my package from 0.0.12 to 0.0.18 and have lags up to 1minute.\r\n\r\nI use it with firebase and have no lags with 0.0.12. Not sure why", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/8", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/8/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/8/events", "html_url": "https://github.com/btubbs/sseclient/issues/8", "id": 226466284, "node_id": "MDU6SXNzdWUyMjY0NjYyODQ=", "number": 8, "title": "Default chunk size of 1024 is inappropriate (regression in 0.0.16)", "user": {"login": "mutantmonkey", "id": 67266, "node_id": "MDQ6VXNlcjY3MjY2", "avatar_url": "https://avatars1.githubusercontent.com/u/67266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mutantmonkey", "html_url": "https://github.com/mutantmonkey", "followers_url": "https://api.github.com/users/mutantmonkey/followers", "following_url": "https://api.github.com/users/mutantmonkey/following{/other_user}", "gists_url": "https://api.github.com/users/mutantmonkey/gists{/gist_id}", "starred_url": "https://api.github.com/users/mutantmonkey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mutantmonkey/subscriptions", "organizations_url": "https://api.github.com/users/mutantmonkey/orgs", "repos_url": "https://api.github.com/users/mutantmonkey/repos", "events_url": "https://api.github.com/users/mutantmonkey/events{/privacy}", "received_events_url": "https://api.github.com/users/mutantmonkey/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-05-05T03:50:02Z", "updated_at": "2019-03-19T15:53:30Z", "closed_at": "2019-03-19T15:53:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "With the changes made in 6820dc808fc669ee55baf8261120820020036050, event handling has severely regressed. Instead of messages being processed as they come in, they are buffered until the chunk size is hit and then processed. For my use case, I need messages to be processed immediately, and I believe this would be the expected behavior for most other use cases of this library.\r\n\r\nI've found that setting the chunk size to 1 fixes this issue, and I believe that to be the only acceptable chunk size for this library; buffering messages until the chunk size is simply not appropriate in a protocol where one or two characters are the difference between a message being processed or buffered. For example, assume that I have events that happen to be exactly 1024 bytes long, not including the message separator; until the next message arrives and fills up the buffer containing the `\\r\\n`, the first message will not be processed.\r\n\r\nAnother potential solution is to continue to use a large chunk size to avoid high CPU load on noisy endpoints, but with a short timeout on the read so that quieter SSE endpoints do not suffer from this issue.\r\n\r\nI'm not sure if you want to back out the changes made in that commit or simply change the default chunk size, but please let me know if I can be of any assistance in getting this resolved.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/5", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/5/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/5/events", "html_url": "https://github.com/btubbs/sseclient/issues/5", "id": 217172912, "node_id": "MDU6SXNzdWUyMTcxNzI5MTI=", "number": 5, "title": "Linefeed related regression in 0.0.17", "user": {"login": "scop", "id": 109152, "node_id": "MDQ6VXNlcjEwOTE1Mg==", "avatar_url": "https://avatars1.githubusercontent.com/u/109152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scop", "html_url": "https://github.com/scop", "followers_url": "https://api.github.com/users/scop/followers", "following_url": "https://api.github.com/users/scop/following{/other_user}", "gists_url": "https://api.github.com/users/scop/gists{/gist_id}", "starred_url": "https://api.github.com/users/scop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scop/subscriptions", "organizations_url": "https://api.github.com/users/scop/orgs", "repos_url": "https://api.github.com/users/scop/repos", "events_url": "https://api.github.com/users/scop/events{/privacy}", "received_events_url": "https://api.github.com/users/scop/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-27T08:37:04Z", "updated_at": "2017-03-28T21:19:58Z", "closed_at": "2017-03-28T21:19:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "0.0.17 introduces a regression that is related to extra linefeeds between events. Here's a reproducer \"stream\": https://gist.githubusercontent.com/scop/c9b8face7b0c0ad0808b155a9611e8e4/raw/78276bc59c6c2c2f8845d8f56a65b15259636c52/test.txt\r\n\r\nWith 0.0.15 all is ok (let it loop for a few seconds):\r\n\r\n```\r\n$ python -c $'import sseclient\\nfor msg in sseclient.SSEClient(\"https://gist.githubusercontent.com/scop/c9b8face7b0c0ad0808b155a9611e8e4/raw/78276bc59c6c2c2f8845d8f56a65b15259636c52/test.txt\"): print(\"event:'{msg.event}' data:{msg.data}\".format(msg=msg))'\r\nevent:hello data:hello1\r\nevent:hello data:hello2\r\nevent:hello data:hello3\r\nevent:hello data:hello1\r\nevent:hello data:hello2\r\nevent:hello data:hello3\r\n```\r\n\r\n...but with 0.0.17, things go south:\r\n\r\n```\r\n$ python -c $'import sseclient\\nfor msg in sseclient.SSEClient(\"https://gist.githubusercontent.com/scop/c9b8face7b0c0ad0808b155a9611e8e4/raw/78276bc59c6c2c2f8845d8f56a65b15259636c52/test.txt\"): print(\"event:'{msg.event}' data:{msg.data}\".format(msg=msg))'\r\nevent:hello data:hello1\r\nevent:hello data:hello2event: hello\r\nhello1\r\nevent:hello data:hello2event: hello\r\nhello1\r\n```\r\n\r\n@btubbs, @ottomata: thoughts?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/btubbs/sseclient/issues/1", "repository_url": "https://api.github.com/repos/btubbs/sseclient", "labels_url": "https://api.github.com/repos/btubbs/sseclient/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/btubbs/sseclient/issues/1/comments", "events_url": "https://api.github.com/repos/btubbs/sseclient/issues/1/events", "html_url": "https://github.com/btubbs/sseclient/issues/1", "id": 195055421, "node_id": "MDU6SXNzdWUxOTUwNTU0MjE=", "number": 1, "title": "issue updating 0.0.12 to 0.0.14", "user": {"login": "eatm1", "id": 20587582, "node_id": "MDQ6VXNlcjIwNTg3NTgy", "avatar_url": "https://avatars0.githubusercontent.com/u/20587582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eatm1", "html_url": "https://github.com/eatm1", "followers_url": "https://api.github.com/users/eatm1/followers", "following_url": "https://api.github.com/users/eatm1/following{/other_user}", "gists_url": "https://api.github.com/users/eatm1/gists{/gist_id}", "starred_url": "https://api.github.com/users/eatm1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eatm1/subscriptions", "organizations_url": "https://api.github.com/users/eatm1/orgs", "repos_url": "https://api.github.com/users/eatm1/repos", "events_url": "https://api.github.com/users/eatm1/events{/privacy}", "received_events_url": "https://api.github.com/users/eatm1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-12-12T18:56:27Z", "updated_at": "2019-03-19T15:59:17Z", "closed_at": "2019-03-19T15:59:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Had my project running with 0.0.12, and as I installed again it got bumped up to 0.0.14 and I started getting this error:\r\n\r\n```\r\nFile \"xxxx/lib/python2.7/site-packages/sseclient.py\", line 64, in __next__\r\n    nextline = self.resp_file.readline()\r\nAttributeError: 'SSEClient' object has no attribute 'resp_file'\r\n```\r\n\r\nIt seems to be an issue with the request not having `raw` or something, as thecode has the line \r\n`self.resp_file = self.resp.raw`\r\n\r\nrequirement is for `requests>2.0.0` and I'm using 2.11.1\r\n\r\nshould the request requirement be higher?\r\n\r\nFor now, I downgraded to 0.0.12, but looking for a solution to this issue.\r\nThanks", "performed_via_github_app": null, "score": 1.0}]}