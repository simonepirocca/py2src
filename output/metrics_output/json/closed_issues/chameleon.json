{"total_count": 199, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/malthe/chameleon/issues/328", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/328/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/328/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/328/events", "html_url": "https://github.com/malthe/chameleon/issues/328", "id": 663961042, "node_id": "MDU6SXNzdWU2NjM5NjEwNDI=", "number": 328, "title": "unsolicited translation", "user": {"login": "d-maurer", "id": 10956900, "node_id": "MDQ6VXNlcjEwOTU2OTAw", "avatar_url": "https://avatars2.githubusercontent.com/u/10956900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d-maurer", "html_url": "https://github.com/d-maurer", "followers_url": "https://api.github.com/users/d-maurer/followers", "following_url": "https://api.github.com/users/d-maurer/following{/other_user}", "gists_url": "https://api.github.com/users/d-maurer/gists{/gist_id}", "starred_url": "https://api.github.com/users/d-maurer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d-maurer/subscriptions", "organizations_url": "https://api.github.com/users/d-maurer/orgs", "repos_url": "https://api.github.com/users/d-maurer/repos", "events_url": "https://api.github.com/users/d-maurer/events{/privacy}", "received_events_url": "https://api.github.com/users/d-maurer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-22T18:25:16Z", "updated_at": "2020-07-22T18:38:48Z", "closed_at": "2020-07-22T18:38:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Demonstrated by (under Python 3):\r\n```\r\nfrom chameleon.zpt.template import PageTemplate\r\n\r\ndef translate(*args, **kw): return \"translated\"\r\n\r\nclass ToConvertButNotToTranslate:\r\n  def __init__(self, text): self.text = text\r\n  def __str__(self): return self.text\r\n\r\nx = ToConvertButNotToTranslate(\"x\")\r\n\r\nts = \"\"\"<div tal:content=\"x\" />\"\"\"\r\nt = PageTemplate(ts)\r\nt(translate=translate, x=x)\r\n```\r\nThis returns `<div>translated</div>`; it should return `<div>x</div>`.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/326", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/326/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/326/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/326/events", "html_url": "https://github.com/malthe/chameleon/issues/326", "id": 654540091, "node_id": "MDU6SXNzdWU2NTQ1NDAwOTE=", "number": 326, "title": "tal:content and tal:replace are sometimes treated as to be translated", "user": {"login": "viktordick", "id": 16060646, "node_id": "MDQ6VXNlcjE2MDYwNjQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/16060646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viktordick", "html_url": "https://github.com/viktordick", "followers_url": "https://api.github.com/users/viktordick/followers", "following_url": "https://api.github.com/users/viktordick/following{/other_user}", "gists_url": "https://api.github.com/users/viktordick/gists{/gist_id}", "starred_url": "https://api.github.com/users/viktordick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viktordick/subscriptions", "organizations_url": "https://api.github.com/users/viktordick/orgs", "repos_url": "https://api.github.com/users/viktordick/repos", "events_url": "https://api.github.com/users/viktordick/events{/privacy}", "received_events_url": "https://api.github.com/users/viktordick/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133239, "node_id": "MDU6TGFiZWwxMzMyMzk=", "url": "https://api.github.com/repos/malthe/chameleon/labels/wontfix", "name": "wontfix", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-10T06:17:09Z", "updated_at": "2020-07-21T17:59:31Z", "closed_at": "2020-07-15T20:43:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "We have seen some weird behavior when switching to Zope4 that seems to be related to the Chameleon cache.\r\n\r\nWe use a translation service that effectively delegates translation to a Python Script in the context of the page template in question. But for the sake of providing an MWE, I stripped it down to something that simply returns a fixed text whenever something is to be translated. You can find it at [https://github.com/perfact/Products.PerFactTranslationDomain/tree/dummy-translator.](url).\r\n\r\nIf using a page template like\r\n\r\n    <p i18n:translate=\"\">original text</p>\r\n\r\nThis correctly replaces the content of the `p` tag by `translated`.\r\n\r\nHowever, sometimes it also replaces the content of\r\n\r\n    <p tal:content=\"string:original text\">something</p>\r\n\r\nand the same with `tal:replace`. By trying to nail down the problem, I found that this happens if the Chameleon cache file for the given page template has been created by the currently running Zope instance. So if I create a new page template, the behavior can be observed. If I restart Zope, it is gone. If I stop Zope, clear the Chameleon cache and start it again, it can again be observed.\r\n\r\nTrying to debug the issue, I found myself inside the Chameleon cache file in a code block like\r\n\r\n        def __quote(target, quote, quote_entity, default, default_marker):\r\n            __tt = type(target)\r\n            if ((__tt is int) or (__tt is float) or (__tt is int)):\r\n                target = str(target)\r\n            else:\r\n                if (__tt is bytes):\r\n                    target = decode(target)\r\n                else:\r\n                    if (__tt is not str):\r\n                        try:\r\n                            target = target.__html__\r\n                        except:\r\n                            __converted = convert(target)\r\n                            target = (str(target) if (target is __converted) else __converted)\r\n                        else:\r\n                            return target()\r\n                if (target is not None):\r\n                    ...\r\n\r\nIf we are in the restarted run (where `tal:replace` does not get translated), `target` is of type `str` (with content `original text`) and we land in the last branch of the evaluation, where the string is being escaped.\r\n\r\nHowever, if the Chameleon cache was cleared before starting Zope, `target` is of type `<class 'chameleon.tokenize.Token'>`. Since such a `Token` does not have the `__html__` attribute, `convert(target)` is called, which somehow ends up calling the translation service.\r\n\r\nThere is one thing most probably broken here and one thing that I maybe simply am not using correctly: One is that the type of `target` changes depending on if there was already a Chameleon cache present when Zope was started, leading to different behaviors. The second is that the `econtext` given to the `render` function contains the fields\r\n\r\n    {'__convert': functools.partial(<function PageTemplate.render.<locals>.translate at 0x7fb5b35e5af0>, target_language=None),\r\n     '__decode': <function PageTemplate.render.<locals>.decode at 0x7fb5b35e5ca0>,\r\n     '__on_error_handler': None,\r\n     '__translate': <function PageTemplate.render.<locals>.translate at 0x7fb5b35e5af0>,\r\n    ...\r\n\r\nNot sure if `convert` should point to a `translate` function if there is a specific `__translate` field also which seems to be the correct one for calling tags with `i18n:translate`.\r\n\r\n### Steps to reproduce\r\n\r\n    python3 -m venv Zope4\r\n    cd Zope4\r\n    bin/pip install -r https://raw.githubusercontent.com/zopefoundation/Zope/4.5/requirements-full.txt\r\n    bin/pip install https://github.com/perfact/Products.PerFactTranslationDomain@dummy-translator\r\n    bin/mkwsgiinstance -d zope -u admin:admin\r\n    bin/runwsgi zope/etc/zope.ini\r\n\r\nOpen a browser at `http://localhost:8080/manage_main` and provide the credentials `admin:admin`. Now add a page template `testpt` with the content\r\n\r\n    <p tal:content=\"string:replaced text\">original text</p>\r\n\r\nand let it render (`http://localhost:8080/testpt`)\r\n\r\n### Expected behavior\r\n\r\nWe should obtain a paragraph with the content `replaced text`.\r\n\r\n### Actual behavior\r\n\r\nOn the first try, we obtain a paragraph with the content `translated`. If restarting Zope, we again obtain the expected behavior. If removing everything in `zope/var/cache/` and restarting Zope, we again obtain `translated`.\r\n\r\n### Versions\r\n\r\nAs seen above, I took the newly released Zope 4.5 as starting point. It contains Chameleon 3.8.1", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/323", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/323/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/323/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/323/events", "html_url": "https://github.com/malthe/chameleon/issues/323", "id": 650368349, "node_id": "MDU6SXNzdWU2NTAzNjgzNDk=", "number": 323, "title": "\"attrs\" cannot be used as a predefined variable in \"tal:define\"", "user": {"login": "d-maurer", "id": 10956900, "node_id": "MDQ6VXNlcjEwOTU2OTAw", "avatar_url": "https://avatars2.githubusercontent.com/u/10956900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d-maurer", "html_url": "https://github.com/d-maurer", "followers_url": "https://api.github.com/users/d-maurer/followers", "following_url": "https://api.github.com/users/d-maurer/following{/other_user}", "gists_url": "https://api.github.com/users/d-maurer/gists{/gist_id}", "starred_url": "https://api.github.com/users/d-maurer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d-maurer/subscriptions", "organizations_url": "https://api.github.com/users/d-maurer/orgs", "repos_url": "https://api.github.com/users/d-maurer/repos", "events_url": "https://api.github.com/users/d-maurer/events{/privacy}", "received_events_url": "https://api.github.com/users/d-maurer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-07-03T06:13:23Z", "updated_at": "2020-07-07T19:42:21Z", "closed_at": "2020-07-07T19:42:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "The problem is demonstrated by the following transacript\r\n```\r\n>>> from chameleon.zpt.template import PageTemplate\r\n>>> t_ok = PageTemplate(\"\"\"<div attr=\"attr\" tal:content=\"attrs['attr']\"/>\"\"\")\r\n>>> t_ok()\r\nu'<div attr=\"attr\">attr</div>'\r\n>>> t_err = PageTemplate(\"\"\"<div attr=\"attr\" tal:define=\"x attrs['attr']\" tal:content=\"x\"/>\"\"\")\r\n>>> t_err()\r\nTraceback (most recent call last):\r\n...\r\n  File \"/home/dieter/tmp/chameleon/src/chameleon/utils.py\", line 437, in __getitem__\r\n    raise NameError(key)\r\nNameError: attrs\r\n\r\n - Expression: \"attrs['attr']\"\r\n - Filename:   <string>\r\n - Location:   (line 1: col 31)\r\n - Arguments:  repeat: <RepeatDict ('None',) at 0x7f53793bad50>\r\n               target_language: <NoneType ('None',) at 0x5643135f2560>\r\n```\r\nWhile `attrs` works in `tal:content` (--> `t_ok`), it does not work in `tal:define` (--> `t_err`).\r\n\r\nThis means that `attrs` does not behave like a regular predefined variable according to \"https://zope.readthedocs.io/en/latest/zopebook/AppendixC.html#built-in-names\". It also makes it more difficult to fix \"https://github.com/zopefoundation/Zope/issues/860\".", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/319", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/319/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/319/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/319/events", "html_url": "https://github.com/malthe/chameleon/issues/319", "id": 647962017, "node_id": "MDU6SXNzdWU2NDc5NjIwMTc=", "number": 319, "title": "Python 3.9: Creating invalid Python code", "user": {"login": "icemac", "id": 386619, "node_id": "MDQ6VXNlcjM4NjYxOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/386619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icemac", "html_url": "https://github.com/icemac", "followers_url": "https://api.github.com/users/icemac/followers", "following_url": "https://api.github.com/users/icemac/following{/other_user}", "gists_url": "https://api.github.com/users/icemac/gists{/gist_id}", "starred_url": "https://api.github.com/users/icemac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icemac/subscriptions", "organizations_url": "https://api.github.com/users/icemac/orgs", "repos_url": "https://api.github.com/users/icemac/repos", "events_url": "https://api.github.com/users/icemac/events{/privacy}", "received_events_url": "https://api.github.com/users/icemac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-06-30T08:07:25Z", "updated_at": "2020-07-03T14:57:13Z", "closed_at": "2020-07-03T14:57:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This following snipped of generated Chameleon code is taken from the Zope tests which fail on Python 3.9 because of generated invalid syntax:\r\n\r\n```python\r\n\r\n            # <Substitution \"y/z | python:'||'[:0]\" (15:27)> -> __attr_name\r\n            __token = 486\r\n            try:\r\n                __attr_name = _static_4444020112(getitem('y'), econtext, True, ('z', ))\r\n            except (AttributeError, LookupError, NameError, TypeError, ValueError, _NotFound, _Unauthorized, _LocationError, ):\r\n                __token = 492\r\n                __attr_name = _guarded_getitem('||', :0)\r\n```\r\nThe error is in the last line in `:0`.\r\n\r\nIn Python 3.8 the generated code is valid and looks like the following:\r\n\r\n```python\r\n            # <Substitution \"y/z | python:'||'[:0]\" (15:27)> -> __attr_name\r\n            __token = 486\r\n            try:\r\n                __attr_name = _static_4561636800(getitem('y'), econtext, True, ('z', ))\r\n            except (AttributeError, LookupError, NameError, TypeError, ValueError, _NotFound, _Unauthorized, _LocationError, ):\r\n                __token = 492\r\n                __attr_name = _guarded_getitem('||', get('slice', slice)(None, 0, None))\r\n```\r\n\r\nI was using 3.9.0b3 on MacOS but the error is also on TravisCI, see https://travis-ci.org/github/zopefoundation/Zope/jobs/703426836", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/318", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/318/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/318/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/318/events", "html_url": "https://github.com/malthe/chameleon/issues/318", "id": 646139753, "node_id": "MDU6SXNzdWU2NDYxMzk3NTM=", "number": 318, "title": "Bug in rendering tal:attributes in case of boolean values?", "user": {"login": "DadaDaMotha", "id": 35779816, "node_id": "MDQ6VXNlcjM1Nzc5ODE2", "avatar_url": "https://avatars3.githubusercontent.com/u/35779816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DadaDaMotha", "html_url": "https://github.com/DadaDaMotha", "followers_url": "https://api.github.com/users/DadaDaMotha/followers", "following_url": "https://api.github.com/users/DadaDaMotha/following{/other_user}", "gists_url": "https://api.github.com/users/DadaDaMotha/gists{/gist_id}", "starred_url": "https://api.github.com/users/DadaDaMotha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DadaDaMotha/subscriptions", "organizations_url": "https://api.github.com/users/DadaDaMotha/orgs", "repos_url": "https://api.github.com/users/DadaDaMotha/repos", "events_url": "https://api.github.com/users/DadaDaMotha/events{/privacy}", "received_events_url": "https://api.github.com/users/DadaDaMotha/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2020-06-26T09:37:17Z", "updated_at": "2020-08-20T07:27:17Z", "closed_at": "2020-06-28T07:26:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "We discovered a changement in rendering of boolean attributes in the option tag since release 3.8.0 (using python 3.8).\r\nExample:\r\n`<select>\r\n         <option value=\"\" tal:attributes=\"selected True\">Selected</option>\r\n         <option value=\"a\" tal:attributes=\"selected False\">Not selected</option> \r\n         <option value=\"ok\" tal:attributes=\"selected None\">OK</option> \r\n </select>`\r\nwill render to:\r\n`<select>\r\n         <option value=\"\"  selected=\"True\">Selected</option>\r\n         <option value=\"a\" selected=\"False\">Not selected</option>    \r\n         <option value=\"ok\">OK</option>    \r\n </select>`\r\nCan somebody confirm this?\r\nThe workaround for now would be to pin down the version to 3.7.4.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/309", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/309/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/309/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/309/events", "html_url": "https://github.com/malthe/chameleon/issues/309", "id": 625393510, "node_id": "MDU6SXNzdWU2MjUzOTM1MTA=", "number": 309, "title": "\"ExceptionFormatter\"/\"format_kwargs\": provide customization for special application types", "user": {"login": "d-maurer", "id": 10956900, "node_id": "MDQ6VXNlcjEwOTU2OTAw", "avatar_url": "https://avatars2.githubusercontent.com/u/10956900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d-maurer", "html_url": "https://github.com/d-maurer", "followers_url": "https://api.github.com/users/d-maurer/followers", "following_url": "https://api.github.com/users/d-maurer/following{/other_user}", "gists_url": "https://api.github.com/users/d-maurer/gists{/gist_id}", "starred_url": "https://api.github.com/users/d-maurer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d-maurer/subscriptions", "organizations_url": "https://api.github.com/users/d-maurer/orgs", "repos_url": "https://api.github.com/users/d-maurer/repos", "events_url": "https://api.github.com/users/d-maurer/events{/privacy}", "received_events_url": "https://api.github.com/users/d-maurer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-27T05:38:26Z", "updated_at": "2020-05-31T08:10:42Z", "closed_at": "2020-05-27T09:22:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "As \"https://github.com/zopefoundation/Zope/issues/837\" describes, exception information is not optimal in a Zope context. This is because many objects are so called acquisition wrappers. `chameleon.utils.format_kwargs` does (understandably) not know this type and uses the uninformative representation via type name and address.\r\n\r\nIf `chameleon` would provide customization for `ExceptionFormatter` and/or `format_kwargs`, an integration could ensure proper representation for types with special importance, such as \"acquisition wrapper\"s for Zope.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/307", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/307/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/307/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/307/events", "html_url": "https://github.com/malthe/chameleon/issues/307", "id": 615328212, "node_id": "MDU6SXNzdWU2MTUzMjgyMTI=", "number": 307, "title": "Test failures with Python 3.9: test_simple_translate_mapping, test_pt_files", "user": {"login": "hroncok", "id": 2401856, "node_id": "MDQ6VXNlcjI0MDE4NTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/2401856?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hroncok", "html_url": "https://github.com/hroncok", "followers_url": "https://api.github.com/users/hroncok/followers", "following_url": "https://api.github.com/users/hroncok/following{/other_user}", "gists_url": "https://api.github.com/users/hroncok/gists{/gist_id}", "starred_url": "https://api.github.com/users/hroncok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hroncok/subscriptions", "organizations_url": "https://api.github.com/users/hroncok/orgs", "repos_url": "https://api.github.com/users/hroncok/repos", "events_url": "https://api.github.com/users/hroncok/events{/privacy}", "received_events_url": "https://api.github.com/users/hroncok/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-05-10T06:33:54Z", "updated_at": "2020-05-10T13:09:37Z", "closed_at": "2020-05-10T13:09:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "In Fedora, we attempted to rebuild chameleon with Python 3.9.0a6, there were test failures. I've reproduced them with:\r\n\r\n```\r\n$ tox -e py39  # on master\r\nGLOB sdist-make: .../chameleon/setup.py\r\npy39 inst-nodeps: .../chameleon/.tox/.tmp/package/1/Chameleon-3.7.0.zip\r\npy39 installed: Chameleon==3.7.0\r\npy39 run-test-pre: PYTHONHASHSEED='3739817816'\r\npy39 run-test: commands[0] | python setup.py -q test -q\r\nWARNING: Testing via this command is deprecated and will be removed in a future version. Users looking for a generic test entry point independent of test runner are encouraged to use tox.\r\nwarning: manifest_maker: MANIFEST.in, line 2: 'recursive-exclude' expects <dir> <pattern1> <pattern2> ...\r\n\r\n..................................F.........F......................................\r\n======================================================================\r\nFAIL: test_simple_translate_mapping (chameleon.tests.test_templates.ZopePageTemplatesTest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \".../chameleon/src/chameleon/tests/test_templates.py\", line 560, in test_simple_translate_mapping\r\n    self.assertEqual(template(), '<div><span>foo</span></div>')\r\nAssertionError: '<div><span>foo</span>${name}</div>' != '<div><span>foo</span></div>'\r\n- <div><span>foo</span>${name}</div>\r\n?                      -------\r\n+ <div><span>foo</span></div>\r\n\r\n\r\n======================================================================\r\nFAIL: test_pt_files (chameleon.tests.test_templates.ZopeTemplatesTestSuite)\r\n.../chameleon/src/chameleon/tests/inputs/012-translation.pt\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \".../chameleon/src/chameleon/tests/test_templates.py\", line 693, in test_pt_files\r\n    self.execute(\r\n  File \".../chameleon/src/chameleon/tests/test_templates.py\", line 808, in execute\r\n    self.fail(\"(%s) - \\n%s\\n\\nCode:\\n%s\" % (\r\nAssertionError: (.../chameleon/src/chameleon/tests/inputs/012-translation.pt) - \r\nExpected:\r\n    <html>\r\n      <body>\r\n        <div></div>\r\n        <div>Hello world!</div>\r\n        <div>Hello world!</div>\r\n        <div><sup>Hello world!</sup></div>\r\n        <div>Hello <em>world</em>! Goodbye <em>planet</em>!</div>\r\n        <div>Hello <em>world</em>! Goodbye <em>planet</em>!</div>\r\n      </body>\r\n    </html>\r\nGot:\r\n    <html>\r\n      <body>\r\n        <div></div>\r\n        <div>\r\n          Hello world!\r\n        </div>\r\n        <div>\r\n          Hello world!\r\n        </div>\r\n        <div>\r\n          <sup>Hello world!</sup>\r\n        </div>\r\n        <div>\r\n          Hello <em>world</em>${first}!\r\n          Goodbye <em>planet</em>${second}!\r\n        </div>\r\n        <div>\r\n          Hello <em>world</em>${first}!\r\n          Goodbye <em>planet</em>${second}!\r\n        </div>\r\n      </body>\r\n    </html>\r\n\r\nCode:\r\nb'__filename = \\'.../chameleon/src/chameleon/tests/inputs/012-translation.pt\\'\\n__default = object()\\n__tokens = {308: (\"${\\'world\\'}\", 14, 34), 310: (\"\\'world\\'\", 14, 36), 362: (\"${\\'planet\\'}\", 15, 37), 364: (\"\\'planet\\'\", 15, 39), 466: (\"${\\'world\\'}\", 18, 34), 468: (\"\\'world\\'\", 18, 36), 520: (\"${\\'planet\\'}\", 19, 37), 522: (\"\\'planet\\'\", 19, 39)}\\n\\nfrom sys import exc_info as _exc_info\\n\\n_static_140472179106768 = {}\\n\\nimport re\\nimport functools\\nfrom itertools import chain as __chain\\n__marker = object()\\ng_re_amp = re.compile(\\'&(?!([A-Za-z]+|#[0-9]+);)\\')\\ng_re_needs_escape = re.compile(\\'[&<>\\\\\\\\\"\\\\\\\\\\\\\\']\\').search\\n__re_whitespace = functools.partial(re.compile(\\'\\\\\\\\s+\\').sub, \\' \\')\\n\\ndef initialize(__loader, macros, nothing, template):\\n\\n    def render(__stream, econtext, rcontext, __i18n_domain=None, __i18n_context=None):\\n        __append = __stream.append\\n        __re_amp = g_re_amp\\n        __token = None\\n        __re_needs_escape = g_re_needs_escape\\n\\n        def __convert(target):\\n            if (target is None):\\n                return\\n            __tt = type(target)\\n            if ((__tt is int) or (__tt is float) or (__tt is int)):\\n                target = str(target)\\n            else:\\n                if (__tt is bytes):\\n                    target = decode(target)\\n                else:\\n                    if (__tt is not str):\\n                        try:\\n                            target = target.__html__\\n                        except AttributeError:\\n                            __converted = convert(target)\\n                            target = (str(target) if (target is __converted) else __converted)\\n                        else:\\n                            target = target()\\n            return target\\n\\n        def __quote(target, quote, quote_entity, default, default_marker):\\n            if (target is None):\\n                return\\n            if (target is default_marker):\\n                return default\\n            __tt = type(target)\\n            if ((__tt is int) or (__tt is float) or (__tt is int)):\\n                target = str(target)\\n            else:\\n                if (__tt is bytes):\\n                    target = decode(target)\\n                else:\\n                    if (__tt is not str):\\n                        try:\\n                            target = target.__html__\\n                        except:\\n                            __converted = convert(target)\\n                            target = (str(target) if (target is __converted) else __converted)\\n                        else:\\n                            return target()\\n                if (target is not None):\\n                    try:\\n                        escape = (__re_needs_escape(target) is not None)\\n                    except TypeError:\\n                        pass\\n                    else:\\n                        if escape:\\n                            if (\\'&\\' in target):\\n                                target = target.replace(\\'&\\', \\'&amp;\\')\\n                            if (\\'<\\' in target):\\n                                target = target.replace(\\'<\\', \\'&lt;\\')\\n                            if (\\'>\\' in target):\\n                                target = target.replace(\\'>\\', \\'&gt;\\')\\n                            if ((quote is not None) and (quote in target)):\\n                                target = target.replace(quote, quote_entity)\\n            return target\\n        translate = econtext[\\'__translate\\']\\n        decode = econtext[\\'__decode\\']\\n        convert = econtext[\\'__convert\\']\\n        on_error_handler = econtext[\\'__on_error_handler\\']\\n        try:\\n            getitem = econtext.__getitem__\\n            get = econtext.get\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472177723280\\n            __attrs_140472177723280 = _static_140472179106768\\n\\n            # <html ... (1:0)\\n            # --------------------------------------------------------\\n            __append(\\'<html\\')\\n            __append(\\'>\\')\\n            __append(\\'\\\\n  \\')\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472177723136\\n            __attrs_140472177723136 = _static_140472179106768\\n\\n            # <body ... (2:2)\\n            # --------------------------------------------------------\\n            __append(\\'<body\\')\\n            __append(\\'>\\')\\n            __append(\\'\\\\n    \\')\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472177725056\\n            __attrs_140472177725056 = _static_140472179106768\\n\\n            # <div ... (3:4)\\n            # --------------------------------------------------------\\n            __append(\\'<div\\')\\n            __append(\\'>\\')\\n            __stream_140472177723040 = []\\n            __append_140472177723040 = __stream_140472177723040.append\\n            __msgid_140472177723040 = __re_whitespace(\\'\\'.join(__stream_140472177723040)).strip()\\n            if __msgid_140472177723040:\\n                __append(translate(__msgid_140472177723040, mapping=None, default=__msgid_140472177723040, domain=__i18n_domain, context=__i18n_context, target_language=getitem(\\'target_language\\')))\\n            __append(\\'</div>\\')\\n            __append(\\'\\\\n    \\')\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472177723424\\n            __attrs_140472177723424 = _static_140472179106768\\n\\n            # <div ... (4:4)\\n            # --------------------------------------------------------\\n            __append(\\'<div\\')\\n            __append(\\'>\\')\\n            __stream_140472177722368 = []\\n            __append_140472177722368 = __stream_140472177722368.append\\n            __append(\\'\\\\n      Hello world!\\\\n    \\')\\n            __msgid_140472177722368 = __re_whitespace(\\'\\'.join(__stream_140472177722368)).strip()\\n            if __msgid_140472177722368:\\n                __append(translate(__msgid_140472177722368, mapping=None, default=__msgid_140472177722368, domain=__i18n_domain, context=__i18n_context, target_language=getitem(\\'target_language\\')))\\n            __append(\\'</div>\\')\\n            __append(\\'\\\\n    \\')\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472178724976\\n            __attrs_140472178724976 = _static_140472179106768\\n\\n            # <div ... (7:4)\\n            # --------------------------------------------------------\\n            __append(\\'<div\\')\\n            __append(\\'>\\')\\n            __stream_140472178726512 = []\\n            __append_140472178726512 = __stream_140472178726512.append\\n            __append(\\'\\\\n      Hello world!\\\\n    \\')\\n            __msgid_140472178726512 = __re_whitespace(\\'\\'.join(__stream_140472178726512)).strip()\\n            if \\'hello_world\\':\\n                __append(translate(\\'hello_world\\', mapping=None, default=__msgid_140472178726512, domain=__i18n_domain, context=__i18n_context, target_language=getitem(\\'target_language\\')))\\n            __append(\\'</div>\\')\\n            __append(\\'\\\\n    \\')\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472176012448\\n            __attrs_140472176012448 = _static_140472179106768\\n\\n            # <div ... (10:4)\\n            # --------------------------------------------------------\\n            __append(\\'<div\\')\\n            __append(\\'>\\')\\n            __stream_140472178726368 = []\\n            __append_140472178726368 = __stream_140472178726368.append\\n            __append(\\'\\\\n      \\')\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472176012736\\n            __attrs_140472176012736 = _static_140472179106768\\n\\n            # <sup ... (11:6)\\n            # --------------------------------------------------------\\n            __append(\\'<sup\\')\\n            __append(\\'>\\')\\n            __append(\\'Hello world!\\')\\n            __append(\\'</sup>\\')\\n            __append(\\'\\\\n    \\')\\n            __msgid_140472178726368 = __re_whitespace(\\'\\'.join(__stream_140472178726368)).strip()\\n            if __msgid_140472178726368:\\n                __append(translate(__msgid_140472178726368, mapping=None, default=__msgid_140472178726368, domain=__i18n_domain, context=__i18n_context, target_language=getitem(\\'target_language\\')))\\n            __append(\\'</div>\\')\\n            __append(\\'\\\\n    \\')\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472176012640\\n            __attrs_140472176012640 = _static_140472179106768\\n\\n            # <div ... (13:4)\\n            # --------------------------------------------------------\\n            __append(\\'<div\\')\\n            __append(\\'>\\')\\n            __stream_140472178518272_first = \\'\\'\\n            __stream_140472178518272_second = \\'\\'\\n            __stream_140472176010144 = []\\n            __append_140472176010144 = __stream_140472176010144.append\\n            __append(\\'\\\\n      Hello \\')\\n            __stream_140472178518272_first = []\\n            __append_140472178518272_first = __stream_140472178518272_first.append\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472176010048\\n            __attrs_140472176010048 = _static_140472179106768\\n\\n            # <em ... (14:12)\\n            # --------------------------------------------------------\\n            __append(\\'<em\\')\\n            __append(\\'>\\')\\n\\n            # <Interpolation value=<Substitution \"${\\'world\\'}\" (14:34)> braces_required=True translation=False at 7fc23a26e5e0> -> __content_140472192345200\\n            __token = 308\\n            __token = 310\\n            __content_140472192345200 = \\'world\\'\\n            __content_140472192345200 = __quote(__content_140472192345200, \\'\\\\x00\\', \\'&#0;\\', None, False)\\n            __content_140472192345200 = __content_140472192345200\\n            if (__content_140472192345200 is None):\\n                pass\\n            else:\\n                if (__content_140472192345200 is False):\\n                    __content_140472192345200 = None\\n                else:\\n                    __tt = type(__content_140472192345200)\\n                    if ((__tt is int) or (__tt is float) or (__tt is int)):\\n                        __content_140472192345200 = str(__content_140472192345200)\\n                    else:\\n                        if (__tt is bytes):\\n                            __content_140472192345200 = decode(__content_140472192345200)\\n                        else:\\n                            if (__tt is not str):\\n                                try:\\n                                    __content_140472192345200 = __content_140472192345200.__html__\\n                                except get(\\'AttributeError\\', AttributeError):\\n                                    __converted = convert(__content_140472192345200)\\n                                    __content_140472192345200 = (str(__content_140472192345200) if (__content_140472192345200 is __converted) else __converted)\\n                                else:\\n                                    __content_140472192345200 = __content_140472192345200()\\n            if (__content_140472192345200 is not None):\\n                __append(__content_140472192345200)\\n            __append(\\'</em>\\')\\n            __append(\\'${first}\\')\\n            __stream_140472178518272_first = \\'\\'.join(__stream_140472178518272_first)\\n            __append(\\'!\\\\n      Goodbye \\')\\n            __stream_140472178518272_second = []\\n            __append_140472178518272_second = __stream_140472178518272_second.append\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472176010960\\n            __attrs_140472176010960 = _static_140472179106768\\n\\n            # <em ... (15:14)\\n            # --------------------------------------------------------\\n            __append(\\'<em\\')\\n            __append(\\'>\\')\\n\\n            # <Interpolation value=<Substitution \"${\\'planet\\'}\" (15:37)> braces_required=True translation=False at 7fc23a28e160> -> __content_140472192345200\\n            __token = 362\\n            __token = 364\\n            __content_140472192345200 = \\'planet\\'\\n            __content_140472192345200 = __quote(__content_140472192345200, \\'\\\\x00\\', \\'&#0;\\', None, False)\\n            __content_140472192345200 = __content_140472192345200\\n            if (__content_140472192345200 is None):\\n                pass\\n            else:\\n                if (__content_140472192345200 is False):\\n                    __content_140472192345200 = None\\n                else:\\n                    __tt = type(__content_140472192345200)\\n                    if ((__tt is int) or (__tt is float) or (__tt is int)):\\n                        __content_140472192345200 = str(__content_140472192345200)\\n                    else:\\n                        if (__tt is bytes):\\n                            __content_140472192345200 = decode(__content_140472192345200)\\n                        else:\\n                            if (__tt is not str):\\n                                try:\\n                                    __content_140472192345200 = __content_140472192345200.__html__\\n                                except get(\\'AttributeError\\', AttributeError):\\n                                    __converted = convert(__content_140472192345200)\\n                                    __content_140472192345200 = (str(__content_140472192345200) if (__content_140472192345200 is __converted) else __converted)\\n                                else:\\n                                    __content_140472192345200 = __content_140472192345200()\\n            if (__content_140472192345200 is not None):\\n                __append(__content_140472192345200)\\n            __append(\\'</em>\\')\\n            __append(\\'${second}\\')\\n            __stream_140472178518272_second = \\'\\'.join(__stream_140472178518272_second)\\n            __append(\\'!\\\\n    \\')\\n            __msgid_140472176010144 = __re_whitespace(\\'\\'.join(__stream_140472176010144)).strip()\\n            if __msgid_140472176010144:\\n                __append(translate(__msgid_140472176010144, mapping={\\'second\\': __stream_140472178518272_second, \\'first\\': __stream_140472178518272_first, }, default=__msgid_140472176010144, domain=__i18n_domain, context=__i18n_context, target_language=getitem(\\'target_language\\')))\\n            __append(\\'</div>\\')\\n            __append(\\'\\\\n    \\')\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472176141600\\n            __attrs_140472176141600 = _static_140472179106768\\n\\n            # <div ... (17:4)\\n            # --------------------------------------------------------\\n            __append(\\'<div\\')\\n            __append(\\'>\\')\\n            __stream_140472178518272_first = \\'\\'\\n            __stream_140472178518272_second = \\'\\'\\n            __stream_140472176140400 = []\\n            __append_140472176140400 = __stream_140472176140400.append\\n            __append(\\'\\\\n      Hello \\')\\n            __stream_140472178518272_first = []\\n            __append_140472178518272_first = __stream_140472178518272_first.append\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472176140832\\n            __attrs_140472176140832 = _static_140472179106768\\n\\n            # <em ... (18:12)\\n            # --------------------------------------------------------\\n            __append(\\'<em\\')\\n            __append(\\'>\\')\\n\\n            # <Interpolation value=<Substitution \"${\\'world\\'}\" (18:34)> braces_required=True translation=False at 7fc23a28e3a0> -> __content_140472192345200\\n            __token = 466\\n            __token = 468\\n            __content_140472192345200 = \\'world\\'\\n            __content_140472192345200 = __quote(__content_140472192345200, \\'\\\\x00\\', \\'&#0;\\', None, False)\\n            __content_140472192345200 = __content_140472192345200\\n            if (__content_140472192345200 is None):\\n                pass\\n            else:\\n                if (__content_140472192345200 is False):\\n                    __content_140472192345200 = None\\n                else:\\n                    __tt = type(__content_140472192345200)\\n                    if ((__tt is int) or (__tt is float) or (__tt is int)):\\n                        __content_140472192345200 = str(__content_140472192345200)\\n                    else:\\n                        if (__tt is bytes):\\n                            __content_140472192345200 = decode(__content_140472192345200)\\n                        else:\\n                            if (__tt is not str):\\n                                try:\\n                                    __content_140472192345200 = __content_140472192345200.__html__\\n                                except get(\\'AttributeError\\', AttributeError):\\n                                    __converted = convert(__content_140472192345200)\\n                                    __content_140472192345200 = (str(__content_140472192345200) if (__content_140472192345200 is __converted) else __converted)\\n                                else:\\n                                    __content_140472192345200 = __content_140472192345200()\\n            if (__content_140472192345200 is not None):\\n                __append(__content_140472192345200)\\n            __append(\\'</em>\\')\\n            __append(\\'${first}\\')\\n            __stream_140472178518272_first = \\'\\'.join(__stream_140472178518272_first)\\n            __append(\\'!\\\\n      Goodbye \\')\\n            __stream_140472178518272_second = []\\n            __append_140472178518272_second = __stream_140472178518272_second.append\\n\\n            # <Static value=<ast.Dict object at 0x7fc23a5623d0> name=None at 7fc23a562430> -> __attrs_140472176142944\\n            __attrs_140472176142944 = _static_140472179106768\\n\\n            # <em ... (19:14)\\n            # --------------------------------------------------------\\n            __append(\\'<em\\')\\n            __append(\\'>\\')\\n\\n            # <Interpolation value=<Substitution \"${\\'planet\\'}\" (19:37)> braces_required=True translation=False at 7fc23a28ef40> -> __content_140472192345200\\n            __token = 520\\n            __token = 522\\n            __content_140472192345200 = \\'planet\\'\\n            __content_140472192345200 = __quote(__content_140472192345200, \\'\\\\x00\\', \\'&#0;\\', None, False)\\n            __content_140472192345200 = __content_140472192345200\\n            if (__content_140472192345200 is None):\\n                pass\\n            else:\\n                if (__content_140472192345200 is False):\\n                    __content_140472192345200 = None\\n                else:\\n                    __tt = type(__content_140472192345200)\\n                    if ((__tt is int) or (__tt is float) or (__tt is int)):\\n                        __content_140472192345200 = str(__content_140472192345200)\\n                    else:\\n                        if (__tt is bytes):\\n                            __content_140472192345200 = decode(__content_140472192345200)\\n                        else:\\n                            if (__tt is not str):\\n                                try:\\n                                    __content_140472192345200 = __content_140472192345200.__html__\\n                                except get(\\'AttributeError\\', AttributeError):\\n                                    __converted = convert(__content_140472192345200)\\n                                    __content_140472192345200 = (str(__content_140472192345200) if (__content_140472192345200 is __converted) else __converted)\\n                                else:\\n                                    __content_140472192345200 = __content_140472192345200()\\n            if (__content_140472192345200 is not None):\\n                __append(__content_140472192345200)\\n            __append(\\'</em>\\')\\n            __append(\\'${second}\\')\\n            __stream_140472178518272_second = \\'\\'.join(__stream_140472178518272_second)\\n            __append(\\'!\\\\n    \\')\\n            __msgid_140472176140400 = __re_whitespace(\\'\\'.join(__stream_140472176140400)).strip()\\n            if \\'hello_goodbye\\':\\n                __append(translate(\\'hello_goodbye\\', mapping={\\'second\\': __stream_140472178518272_second, \\'first\\': __stream_140472178518272_first, }, default=__msgid_140472176140400, domain=__i18n_domain, context=__i18n_context, target_language=getitem(\\'target_language\\')))\\n            __append(\\'</div>\\')\\n            __append(\\'\\\\n  \\')\\n            __append(\\'</body>\\')\\n            __append(\\'\\\\n\\')\\n            __append(\\'</html>\\')\\n            __append(\\'\\\\n\\')\\n        except:\\n            if (__token is not None):\\n                rcontext.setdefault(\\'__error__\\', []).append((__tokens[__token] + (__filename, _exc_info()[1], )))\\n            raise\\n\\n    return {\\'render\\': render, }'\r\n\r\n----------------------------------------------------------------------\r\nRan 83 tests in 0.570s\r\n\r\nFAILED (failures=2)\r\nTest failed: <unittest.runner.TextTestResult run=83 errors=0 failures=2>\r\nerror: Test failed: <unittest.runner.TextTestResult run=83 errors=0 failures=2>\r\nERROR: InvocationError for command .../chameleon/.tox/py39/bin/python setup.py -q test -q (exited with code 1)\r\n___________________________________ summary ____________________________________\r\nERROR:   py39: commands failed\r\n```\r\n\r\nThis hapens with 3.9.0a5 and a6.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/304", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/304/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/304/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/304/events", "html_url": "https://github.com/malthe/chameleon/issues/304", "id": 587147768, "node_id": "MDU6SXNzdWU1ODcxNDc3Njg=", "number": 304, "title": "\"chameleon.tal.RepeatDict\": inadequate base type", "user": {"login": "d-maurer", "id": 10956900, "node_id": "MDQ6VXNlcjEwOTU2OTAw", "avatar_url": "https://avatars2.githubusercontent.com/u/10956900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d-maurer", "html_url": "https://github.com/d-maurer", "followers_url": "https://api.github.com/users/d-maurer/followers", "following_url": "https://api.github.com/users/d-maurer/following{/other_user}", "gists_url": "https://api.github.com/users/d-maurer/gists{/gist_id}", "starred_url": "https://api.github.com/users/d-maurer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d-maurer/subscriptions", "organizations_url": "https://api.github.com/users/d-maurer/orgs", "repos_url": "https://api.github.com/users/d-maurer/repos", "events_url": "https://api.github.com/users/d-maurer/events{/privacy}", "received_events_url": "https://api.github.com/users/d-maurer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-24T17:32:44Z", "updated_at": "2020-03-24T18:51:53Z", "closed_at": "2020-03-24T18:51:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "`chameleon.tal.RepeatDict` derives from `dict`, but only `__setitem__` and `__getitem__` work as expected. The following transscript shows (as an example), that `keys` does not work:\r\n```\r\n>>> from chameleon.tal import RepeatDict\r\n>>> d={}\r\n>>> rd = RepeatDict(d)\r\n>>> rd[\"a\"] = \"A\"\r\n>>> rd.keys()\r\ndict_keys([])\r\n>>> d.keys()\r\ndict_keys(['a'])\r\n```\r\n\r\nI recommend that `RepeatDict` derives from `object` instead of `dict`, because the inherited `dict` methods do not work (and are not needed).\r\n\r\n\"https://github.com/zopefoundation/Zope/pull/807#issuecomment-603153348\"\r\nand \"https://github.com/zopefoundation/Zope/pull/807#issuecomment-603163840\"\r\ndescribe problems caused by the inadequate base class.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/301", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/301/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/301/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/301/events", "html_url": "https://github.com/malthe/chameleon/issues/301", "id": 583539697, "node_id": "MDU6SXNzdWU1ODM1Mzk2OTc=", "number": 301, "title": "\"utils.Scope\" introduces cyclic references", "user": {"login": "d-maurer", "id": 10956900, "node_id": "MDQ6VXNlcjEwOTU2OTAw", "avatar_url": "https://avatars2.githubusercontent.com/u/10956900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d-maurer", "html_url": "https://github.com/d-maurer", "followers_url": "https://api.github.com/users/d-maurer/followers", "following_url": "https://api.github.com/users/d-maurer/following{/other_user}", "gists_url": "https://api.github.com/users/d-maurer/gists{/gist_id}", "starred_url": "https://api.github.com/users/d-maurer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d-maurer/subscriptions", "organizations_url": "https://api.github.com/users/d-maurer/orgs", "repos_url": "https://api.github.com/users/d-maurer/repos", "events_url": "https://api.github.com/users/d-maurer/events{/privacy}", "received_events_url": "https://api.github.com/users/d-maurer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-03-18T07:59:32Z", "updated_at": "2020-03-27T05:48:40Z", "closed_at": "2020-03-18T14:43:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "`utils.Scope.new` uses `inst.set_global = inst.__setitem__`. This introduces a cyclic structure which needs to be reclaimed by full garbage collection (rather than via reference counting).\r\n\r\nI suggest to avoid this by introducing an attribute `root` which is `None` for the root and otherwise the root scope and adjust the definitions of `set_global` and `copy` accordingly.\r\n\r\nNote, the values set by `set_global` are not visible in non-root scopes (which is likely not what you want).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/300", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/300/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/300/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/300/events", "html_url": "https://github.com/malthe/chameleon/issues/300", "id": 548571935, "node_id": "MDU6SXNzdWU1NDg1NzE5MzU=", "number": 300, "title": "Parser/linter available?", "user": {"login": "jugmac00", "id": 9895620, "node_id": "MDQ6VXNlcjk4OTU2MjA=", "avatar_url": "https://avatars0.githubusercontent.com/u/9895620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jugmac00", "html_url": "https://github.com/jugmac00", "followers_url": "https://api.github.com/users/jugmac00/followers", "following_url": "https://api.github.com/users/jugmac00/following{/other_user}", "gists_url": "https://api.github.com/users/jugmac00/gists{/gist_id}", "starred_url": "https://api.github.com/users/jugmac00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jugmac00/subscriptions", "organizations_url": "https://api.github.com/users/jugmac00/orgs", "repos_url": "https://api.github.com/users/jugmac00/repos", "events_url": "https://api.github.com/users/jugmac00/events{/privacy}", "received_events_url": "https://api.github.com/users/jugmac00/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-12T13:40:10Z", "updated_at": "2020-01-13T12:50:11Z", "closed_at": "2020-01-13T12:50:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am about migrating 500 page templates (Zope 2 syntax) to Chameleon.\r\n\r\nIs there any linter/parser available which could check the syntax?\r\n\r\nOr any other tip how to proceed? Unfortunately not all templates get covered by tests and not all are easily callable in the browser.\r\n\r\nThank you!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/299", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/299/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/299/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/299/events", "html_url": "https://github.com/malthe/chameleon/issues/299", "id": 511733952, "node_id": "MDU6SXNzdWU1MTE3MzM5NTI=", "number": 299, "title": "Some expressions can be evaluated inside comments", "user": {"login": "d-maurer", "id": 10956900, "node_id": "MDQ6VXNlcjEwOTU2OTAw", "avatar_url": "https://avatars2.githubusercontent.com/u/10956900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d-maurer", "html_url": "https://github.com/d-maurer", "followers_url": "https://api.github.com/users/d-maurer/followers", "following_url": "https://api.github.com/users/d-maurer/following{/other_user}", "gists_url": "https://api.github.com/users/d-maurer/gists{/gist_id}", "starred_url": "https://api.github.com/users/d-maurer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d-maurer/subscriptions", "organizations_url": "https://api.github.com/users/d-maurer/orgs", "repos_url": "https://api.github.com/users/d-maurer/repos", "events_url": "https://api.github.com/users/d-maurer/events{/privacy}", "received_events_url": "https://api.github.com/users/d-maurer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-24T06:26:52Z", "updated_at": "2020-03-24T19:03:42Z", "closed_at": "2020-03-24T19:03:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "For details see https://github.com/zopefoundation/Zope/issues/716", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/295", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/295/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/295/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/295/events", "html_url": "https://github.com/malthe/chameleon/issues/295", "id": 497081006, "node_id": "MDU6SXNzdWU0OTcwODEwMDY=", "number": 295, "title": "page templates vs. Chameleon", "user": {"login": "jugmac00", "id": 9895620, "node_id": "MDQ6VXNlcjk4OTU2MjA=", "avatar_url": "https://avatars0.githubusercontent.com/u/9895620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jugmac00", "html_url": "https://github.com/jugmac00", "followers_url": "https://api.github.com/users/jugmac00/followers", "following_url": "https://api.github.com/users/jugmac00/following{/other_user}", "gists_url": "https://api.github.com/users/jugmac00/gists{/gist_id}", "starred_url": "https://api.github.com/users/jugmac00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jugmac00/subscriptions", "organizations_url": "https://api.github.com/users/jugmac00/orgs", "repos_url": "https://api.github.com/users/jugmac00/repos", "events_url": "https://api.github.com/users/jugmac00/events{/privacy}", "received_events_url": "https://api.github.com/users/jugmac00/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-23T12:55:50Z", "updated_at": "2019-09-27T08:21:31Z", "closed_at": "2019-09-27T08:21:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "One of the apps I maintain currently runs on Zope 2, but I am about upgrading it to Zope 4.\r\n\r\nThe app uses **page templates** and with Zope 4 **Chameleon** seems to be the new default.\r\n\r\nI run into several problems - which I'd like to understand.\r\n\r\nIn the documentation you can read the following:\r\n\r\n> If you\u2019ve used page templates in a Zope environment previously, note that Chameleon uses Python as the default expression language (instead of path expressions).\r\n\r\nDoes this mean **path expressions** are no longer the default or **path expressions** will not work at all?\r\n\r\ne.g. will this snippet work? `<b tal:content=\"here/className\">className</b>`\r\n\r\n\r\nFurther I read ...\r\n\r\n> The Zope reference engine defaults to a path expression type, which is closely tied to the Zope framework. This expression is not implemented in Chameleon (but it\u2019s available in a Zope framework compatibility package, z3c.pt).\r\n\r\nSo, this really means all path expressions will fail?\r\n\r\nNext bit of information in the documentation...\r\n\r\n> The z3c.pt package works as a compatibility layer. The template classes in this package provide a implementation which is fully compatible with ZPT.\r\n\r\nSo, this means using z3c.pt path expressions should still work in a Zope 4 environment?\r\n\r\nUnfortunately, I still see path related errors like the following...\r\n\r\n```\r\n2019-09-23 14:38:16,269 ERROR   [Zope.SiteErrorLog:251][waitress] 1569242296.270.682571782398 http://0.0.0.0:8084/bliss/data/Users/instances/jugmac00/preferences\r\nTraceback (innermost last):\r\n  Module ZPublisher.WSGIPublisher, line 155, in transaction_pubevents\r\n  Module ZPublisher.WSGIPublisher, line 337, in publish_module\r\n  Module ZPublisher.WSGIPublisher, line 255, in publish\r\n  Module ZPublisher.mapply, line 85, in mapply\r\n  Module ZPublisher.WSGIPublisher, line 61, in call_object\r\n  Module Shared.DC.Scripts.Bindings, line 335, in __call__\r\n  Module Shared.DC.Scripts.Bindings, line 372, in _bindAndExec\r\n  Module Products.CMFCore.FSPageTemplate, line 249, in _exec\r\n  Module Products.CMFCore.FSPageTemplate, line 190, in pt_render\r\n  Module Products.PageTemplates.PageTemplate, line 85, in pt_render\r\n  Module zope.pagetemplate.pagetemplate, line 135, in pt_render\r\n  Module Products.PageTemplates.engine, line 88, in __call__\r\n  Module z3c.pt.pagetemplate, line 173, in render\r\n  Module chameleon.zpt.template, line 306, in render\r\n  Module chameleon.template, line 209, in render\r\n  Module chameleon.template, line 187, in render\r\n  Module 6844a1a404e10f8444fbf373563a8fc3.py, line 523, in render\r\n  Module Products.PageTemplates.expression, line 94, in __call__\r\n  Module Products.PageTemplates.expression, line 65, in traverse\r\n  Module zope.traversing.adapters, line 156, in traversePathElement\r\n   - __traceback_info__: (None, 'msg')\r\n  Module zope.traversing.adapters, line 61, in traverse\r\n   - __traceback_info__: (None, 'msg', ())\r\nLocationError: (None, 'msg')\r\n\r\n - Expression: \"here/utils/msg\"\r\n - Filename:   ... .git/src/Products/BlissEntities/www/User/preferences.xpt\r\n - Location:   (line 29: col 33)\r\n - Source:     ... n tal:replace=\"structure here/utils/msg\">messageTable</span>\r\n                                            ^^^^^^^^^^^^^^\r\n - Arguments:  repeat: {...} (0)\r\n               template: <ImplicitAcquisitionWrapper preferences at 0x7f1c88cee550>\r\n               modules: <_SecureModuleImporter - at 0x7f1ca23767d0>\r\n               here: <ImplicitAcquisitionWrapper jugmac00 at 0x7f1c89f187d0>\r\n               wrapped_repeat: {...} (1)\r\n               user: <ImplicitAcquisitionWrapper jugmac00 at 0x7f1c88cee8c0>\r\n               nothing: <NoneType - at 0x555f167f9560>\r\n               container: <ImplicitAcquisitionWrapper jugmac00 at 0x7f1c89f187d0>\r\n               default: <object - at 0x7f1caa603770>\r\n               request: <WSGIRequest - at 0x7f1c8957a7d0>\r\n               traverse_subpath: <list - at 0x7f1c89775560>\r\n               loop: {...} (1)\r\n               context: <ImplicitAcquisitionWrapper jugmac00 at 0x7f1c89f187d0>\r\n               translate: <function translate at 0x7f1ca1f0d230>\r\n               root: <ImplicitAcquisitionWrapper  at 0x7f1ca1f96820>\r\n               options: {...} (1)\r\n               target_language: <NoneType - at 0x555f167f9560>\r\n```\r\n\r\nRe-writing the expression to\r\n`python: here.utils.msg()`\r\nfixes the problem - but I'd like to understand why?\r\n\r\nAlmost all templates contain path expressions and still work (with z3c.pt), but only a handful fail... and I fail to understand why.\r\n\r\nP.S.: I hope this is the correct repo - or should I file a ticket in https://github.com/zopefoundation/z3c.pt ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/294", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/294/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/294/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/294/events", "html_url": "https://github.com/malthe/chameleon/issues/294", "id": 489545611, "node_id": "MDU6SXNzdWU0ODk1NDU2MTE=", "number": 294, "title": "Support for f-strings?", "user": {"login": "icemac", "id": 386619, "node_id": "MDQ6VXNlcjM4NjYxOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/386619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icemac", "html_url": "https://github.com/icemac", "followers_url": "https://api.github.com/users/icemac/followers", "following_url": "https://api.github.com/users/icemac/following{/other_user}", "gists_url": "https://api.github.com/users/icemac/gists{/gist_id}", "starred_url": "https://api.github.com/users/icemac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icemac/subscriptions", "organizations_url": "https://api.github.com/users/icemac/orgs", "repos_url": "https://api.github.com/users/icemac/repos", "events_url": "https://api.github.com/users/icemac/events{/privacy}", "received_events_url": "https://api.github.com/users/icemac/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-05T06:06:48Z", "updated_at": "2020-03-25T15:44:53Z", "closed_at": "2020-03-25T07:39:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I try to use an f-string in a PageTemplate I get something like \u201eCompilation failed\r\nbuiltins.Exception: No handler for ``JoinedStr`\u201c.\r\n\r\n(I tried it in Zope 4 TTW so I did not get a traceback.)\r\n\r\nIs this feature missing in Chameleon or does it \"only\" need to be fixed in the Zope integration layer?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/292", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/292/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/292/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/292/events", "html_url": "https://github.com/malthe/chameleon/issues/292", "id": 449332231, "node_id": "MDU6SXNzdWU0NDkzMzIyMzE=", "number": 292, "title": "Macro bodies echoed at definition time", "user": {"login": "DavidBarts", "id": 1588474, "node_id": "MDQ6VXNlcjE1ODg0NzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1588474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidBarts", "html_url": "https://github.com/DavidBarts", "followers_url": "https://api.github.com/users/DavidBarts/followers", "following_url": "https://api.github.com/users/DavidBarts/following{/other_user}", "gists_url": "https://api.github.com/users/DavidBarts/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidBarts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidBarts/subscriptions", "organizations_url": "https://api.github.com/users/DavidBarts/orgs", "repos_url": "https://api.github.com/users/DavidBarts/repos", "events_url": "https://api.github.com/users/DavidBarts/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidBarts/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-28T15:21:05Z", "updated_at": "2019-05-28T16:00:06Z", "closed_at": "2019-05-28T16:00:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Consider the following simple template:\r\n```\r\n<!DOCTYPE html>\r\n<p metal:define-macro=\"test\">\r\n  This is a test macro.\r\n</p>\r\n<html>\r\n  <head>\r\n    <title>Macro Test</title>\r\n  </head>\r\n  <body>\r\n    <h1>Macro Test</h1>\r\n    <p metal:use-macro=\"macros['test']\"></p>\r\n  </body>\r\n</html>\r\n```\r\n\r\nWhen rendered, it results in:\r\n```\r\n<!DOCTYPE html>\r\n<p>\r\n  This is a test macro.\r\n</p>\r\n<html>\r\n  <head>\r\n    <title>Macro Test</title>\r\n  </head>\r\n  <body>\r\n    <h1>Macro Test</h1>\r\n    <p>\r\n  This is a test macro.\r\n</p>\r\n  </body>\r\n</html>\r\n```\r\nIf this is a bug, it needs to be fixed. If it is a feature, is there a way of disabling it? If it is a feature and there is no way of disabling it, there needs to be one! (And I'm willing to work on adding it.)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/289", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/289/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/289/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/289/events", "html_url": "https://github.com/malthe/chameleon/issues/289", "id": 427043529, "node_id": "MDU6SXNzdWU0MjcwNDM1Mjk=", "number": 289, "title": "HTML comment parsing broken?", "user": {"login": "dataflake", "id": 1215784, "node_id": "MDQ6VXNlcjEyMTU3ODQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1215784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dataflake", "html_url": "https://github.com/dataflake", "followers_url": "https://api.github.com/users/dataflake/followers", "following_url": "https://api.github.com/users/dataflake/following{/other_user}", "gists_url": "https://api.github.com/users/dataflake/gists{/gist_id}", "starred_url": "https://api.github.com/users/dataflake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dataflake/subscriptions", "organizations_url": "https://api.github.com/users/dataflake/orgs", "repos_url": "https://api.github.com/users/dataflake/repos", "events_url": "https://api.github.com/users/dataflake/events{/privacy}", "received_events_url": "https://api.github.com/users/dataflake/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-29T15:28:18Z", "updated_at": "2019-04-01T06:56:58Z", "closed_at": "2019-04-01T06:56:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is from a Zope 4 (4.0b10) install under Python 2.7 that uses Chameleon version 3.6. The following, which worked fine under Zope 2.13, will now lead to a compilation failure. As far as I can see this is a normally formatted inline HTML comment (please correct me if I am wrong). If this is indeed a parsing problem then it is a **blocker** for Zope 4.\r\n\r\n`<!--- <tal:block replace=\"context/something\"/> --->`\r\n\r\n```\r\n<!-- Page Template Diagnostics\r\n Compilation failed\r\n chameleon.exc.ParseError: The string '--' is not allowed in a comment.\r\n\r\n - String:     \"--\"\r\n - Filename:   /AAA_comments\r\n - Location:   (line 1: col 47)\r\n - Source:     ... k replace=\"context/something\"/> --->\r\n                                                   ^^\r\n-->\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/287", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/287/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/287/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/287/events", "html_url": "https://github.com/malthe/chameleon/issues/287", "id": 412630869, "node_id": "MDU6SXNzdWU0MTI2MzA4Njk=", "number": 287, "title": "How to define an i18n:name on an attribute?", "user": {"login": "gforcada", "id": 1155680, "node_id": "MDQ6VXNlcjExNTU2ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1155680?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gforcada", "html_url": "https://github.com/gforcada", "followers_url": "https://api.github.com/users/gforcada/followers", "following_url": "https://api.github.com/users/gforcada/following{/other_user}", "gists_url": "https://api.github.com/users/gforcada/gists{/gist_id}", "starred_url": "https://api.github.com/users/gforcada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gforcada/subscriptions", "organizations_url": "https://api.github.com/users/gforcada/orgs", "repos_url": "https://api.github.com/users/gforcada/repos", "events_url": "https://api.github.com/users/gforcada/events{/privacy}", "received_events_url": "https://api.github.com/users/gforcada/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-02-20T21:13:20Z", "updated_at": "2019-02-22T10:20:51Z", "closed_at": "2019-02-21T05:46:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi! Thanks for this wonderful template engine and all the cherries on top from plain ZPT!! :heart: \r\n\r\nI have the following template:\r\n\r\n```\r\n<a\r\n    href=\"https://plone.org\"\r\n    tal:attributes=\"aria-label python:'Page ' + str(pagenumber)\">\r\n  ${pagenumber}\r\n</a>\r\n```\r\n\r\nHow can I add i18n support to the ``aria-label`` here? :thinking: I would need a ``i18n:name`` but that is on an attribute rather than on a tag :confused: ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/284", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/284/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/284/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/284/events", "html_url": "https://github.com/malthe/chameleon/issues/284", "id": 411208030, "node_id": "MDU6SXNzdWU0MTEyMDgwMzA=", "number": 284, "title": "Template filenames with non-ASCII characters break compilation", "user": {"login": "dataflake", "id": 1215784, "node_id": "MDQ6VXNlcjEyMTU3ODQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1215784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dataflake", "html_url": "https://github.com/dataflake", "followers_url": "https://api.github.com/users/dataflake/followers", "following_url": "https://api.github.com/users/dataflake/following{/other_user}", "gists_url": "https://api.github.com/users/dataflake/gists{/gist_id}", "starred_url": "https://api.github.com/users/dataflake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dataflake/subscriptions", "organizations_url": "https://api.github.com/users/dataflake/orgs", "repos_url": "https://api.github.com/users/dataflake/repos", "events_url": "https://api.github.com/users/dataflake/events{/privacy}", "received_events_url": "https://api.github.com/users/dataflake/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-02-17T16:50:42Z", "updated_at": "2019-02-17T17:19:54Z", "closed_at": "2019-02-17T17:19:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is a blocking issue in Zope were we now allow Zope object ids with non-ascii characters.\r\n\r\nEssentially, when I create a Page Template in Zope with a non-ASCII ID then I'll get an error message about failing page template compilation, even if I remove all contents and the template just contains an empty string:\r\n\r\n```\r\n<!-- Page Template Diagnostics\r\n Compilation failed\r\n builtins.UnicodeEncodeError: 'ascii' codec can't encode character '\\xf6' in position 2: ordinal not in range(128)\r\n-->\r\n```\r\nThe error happens here on line 313 during the force-encoding to ASCII:\r\n\r\nhttps://github.com/malthe/chameleon/blob/af889be0247e24c5df5574979c36bdf9e2ed4ba7/src/chameleon/zpt/template.py#L311-L314\r\n\r\nThat's because the return value of `digest` may now contain non-ASCII characters because `filename` contains them:\r\n\r\nhttps://github.com/malthe/chameleon/blob/af889be0247e24c5df5574979c36bdf9e2ed4ba7/src/chameleon/template.py#L250-L258", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/282", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/282/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/282/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/282/events", "html_url": "https://github.com/malthe/chameleon/issues/282", "id": 411188635, "node_id": "MDU6SXNzdWU0MTExODg2MzU=", "number": 282, "title": "String expression ending in $$ is not parsed correctly", "user": {"login": "viktordick", "id": 16060646, "node_id": "MDQ6VXNlcjE2MDYwNjQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/16060646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viktordick", "html_url": "https://github.com/viktordick", "followers_url": "https://api.github.com/users/viktordick/followers", "following_url": "https://api.github.com/users/viktordick/following{/other_user}", "gists_url": "https://api.github.com/users/viktordick/gists{/gist_id}", "starred_url": "https://api.github.com/users/viktordick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viktordick/subscriptions", "organizations_url": "https://api.github.com/users/viktordick/orgs", "repos_url": "https://api.github.com/users/viktordick/repos", "events_url": "https://api.github.com/users/viktordick/events{/privacy}", "received_events_url": "https://api.github.com/users/viktordick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-17T13:39:12Z", "updated_at": "2019-02-19T07:34:41Z", "closed_at": "2019-02-19T07:34:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "According to the language reference and the old behavior in Zope 2 (which used `zope.tales` instead of `chameleon.tales`), a `$$` in a string expression should result in a single `$`. However. this is only the case if there are `non_dollar` characters following the `$$`:\r\n\r\n    In [2]: chameleon.tales.test(chameleon.tales.StringExpr('$$test'))\r\n    Out[2]: '$test'\r\n\r\n    In [3]: chameleon.tales.test(chameleon.tales.StringExpr('test$$'))\r\n    Out[3]: 'test$$'\r\n\r\nI posted this issue on https://github.com/zopefoundation/Zope/issues/510 because in my opinion it is a critical issue for Zope (and because I was on the wrong track first, thinking `zope.tales` was used when parsing Page Templates, before finding out that `chameleon.tales` is actually used).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/279", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/279/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/279/events", "html_url": "https://github.com/malthe/chameleon/issues/279", "id": 393654805, "node_id": "MDU6SXNzdWUzOTM2NTQ4MDU=", "number": 279, "title": "Deprecation warning because of using the imp module", "user": {"login": "icemac", "id": 386619, "node_id": "MDQ6VXNlcjM4NjYxOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/386619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/icemac", "html_url": "https://github.com/icemac", "followers_url": "https://api.github.com/users/icemac/followers", "following_url": "https://api.github.com/users/icemac/following{/other_user}", "gists_url": "https://api.github.com/users/icemac/gists{/gist_id}", "starred_url": "https://api.github.com/users/icemac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/icemac/subscriptions", "organizations_url": "https://api.github.com/users/icemac/orgs", "repos_url": "https://api.github.com/users/icemac/repos", "events_url": "https://api.github.com/users/icemac/events{/privacy}", "received_events_url": "https://api.github.com/users/icemac/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-12-22T08:26:55Z", "updated_at": "2019-02-19T12:42:57Z", "closed_at": "2019-02-19T12:42:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The warning text is: `chameleon/loader.py:2: PendingDeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/278", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/278/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/278/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/278/events", "html_url": "https://github.com/malthe/chameleon/issues/278", "id": 388339399, "node_id": "MDU6SXNzdWUzODgzMzkzOTk=", "number": 278, "title": "Are ninja powers required to build a custom expression?", "user": {"login": "faxioman", "id": 943944, "node_id": "MDQ6VXNlcjk0Mzk0NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/943944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faxioman", "html_url": "https://github.com/faxioman", "followers_url": "https://api.github.com/users/faxioman/followers", "following_url": "https://api.github.com/users/faxioman/following{/other_user}", "gists_url": "https://api.github.com/users/faxioman/gists{/gist_id}", "starred_url": "https://api.github.com/users/faxioman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faxioman/subscriptions", "organizations_url": "https://api.github.com/users/faxioman/orgs", "repos_url": "https://api.github.com/users/faxioman/repos", "events_url": "https://api.github.com/users/faxioman/events{/privacy}", "received_events_url": "https://api.github.com/users/faxioman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-06T18:25:01Z", "updated_at": "2018-12-07T10:49:09Z", "closed_at": "2018-12-07T10:49:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\r\nI'm trying to build a simple expression like this:\r\n\r\n```\r\n<div tal:repeat=\"price prices\">\r\n   <div tal:content=\"money_localize: price\"></div>\r\n</div>\r\n```\r\nwhere \"money_localize\" returns the value expressed by the price variable in this form: \"12.10 $\".\r\nWell, I can't figure out how to build this simple money_localize expression.\r\nThe integration documentation (https://chameleon.readthedocs.io/en/latest/library.html#extension) seems not useful in this context... and, of course, I'm not a ninja :)\r\nThanks!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/275", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/275/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/275/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/275/events", "html_url": "https://github.com/malthe/chameleon/issues/275", "id": 372625466, "node_id": "MDU6SXNzdWUzNzI2MjU0NjY=", "number": 275, "title": "Missing git tag for 3.5 release", "user": {"login": "felixonmars", "id": 1006477, "node_id": "MDQ6VXNlcjEwMDY0Nzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1006477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/felixonmars", "html_url": "https://github.com/felixonmars", "followers_url": "https://api.github.com/users/felixonmars/followers", "following_url": "https://api.github.com/users/felixonmars/following{/other_user}", "gists_url": "https://api.github.com/users/felixonmars/gists{/gist_id}", "starred_url": "https://api.github.com/users/felixonmars/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/felixonmars/subscriptions", "organizations_url": "https://api.github.com/users/felixonmars/orgs", "repos_url": "https://api.github.com/users/felixonmars/repos", "events_url": "https://api.github.com/users/felixonmars/events{/privacy}", "received_events_url": "https://api.github.com/users/felixonmars/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-22T17:49:38Z", "updated_at": "2018-10-23T08:57:37Z", "closed_at": "2018-10-23T08:57:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It would be nice to keep PyPI releases and git tags in sync :)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/272", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/272/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/272/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/272/events", "html_url": "https://github.com/malthe/chameleon/issues/272", "id": 371125970, "node_id": "MDU6SXNzdWUzNzExMjU5NzA=", "number": 272, "title": "Chameleon doesn't support Python 3.8", "user": {"login": "vstinner", "id": 194129, "node_id": "MDQ6VXNlcjE5NDEyOQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/194129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vstinner", "html_url": "https://github.com/vstinner", "followers_url": "https://api.github.com/users/vstinner/followers", "following_url": "https://api.github.com/users/vstinner/following{/other_user}", "gists_url": "https://api.github.com/users/vstinner/gists{/gist_id}", "starred_url": "https://api.github.com/users/vstinner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vstinner/subscriptions", "organizations_url": "https://api.github.com/users/vstinner/orgs", "repos_url": "https://api.github.com/users/vstinner/repos", "events_url": "https://api.github.com/users/vstinner/events{/privacy}", "received_events_url": "https://api.github.com/users/vstinner/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-17T15:07:00Z", "updated_at": "2018-10-17T20:07:28Z", "closed_at": "2018-10-17T18:22:38Z", "author_association": "NONE", "active_lock_reason": null, "body": " Python 3.8 now uses ast.Constant type and remove types like _ast.Str: ast.Str is a backward compatibility class. See https://bugs.python.org/issue32892 for more information about the Python change.\r\n\r\n I had to disable Chameleon benchmark in the performance project: https://github.com/python/performance/issues/47\r\n\r\nThe AST visitor of Chameleon should support the ast.Constant type added in Python 3.6.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/271", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/271/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/271/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/271/events", "html_url": "https://github.com/malthe/chameleon/issues/271", "id": 369716935, "node_id": "MDU6SXNzdWUzNjk3MTY5MzU=", "number": 271, "title": "tal:repeat does not iterate through dictionary types using .items()", "user": {"login": "kveroneau", "id": 1632238, "node_id": "MDQ6VXNlcjE2MzIyMzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1632238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kveroneau", "html_url": "https://github.com/kveroneau", "followers_url": "https://api.github.com/users/kveroneau/followers", "following_url": "https://api.github.com/users/kveroneau/following{/other_user}", "gists_url": "https://api.github.com/users/kveroneau/gists{/gist_id}", "starred_url": "https://api.github.com/users/kveroneau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kveroneau/subscriptions", "organizations_url": "https://api.github.com/users/kveroneau/orgs", "repos_url": "https://api.github.com/users/kveroneau/repos", "events_url": "https://api.github.com/users/kveroneau/events{/privacy}", "received_events_url": "https://api.github.com/users/kveroneau/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-12T21:30:09Z", "updated_at": "2018-10-13T05:27:59Z", "closed_at": "2018-10-13T05:27:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "In most template langauges you can iterate through a dictionary's key/value using something like this:\r\n\r\nfor key,value in my_dict.items()\r\n\r\nThis does not work in Chameleon, it raises a LanguageError: Invalid define syntax.\r\n\r\nShould tal:repeat support this, or is it by design to not be supported?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/269", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/269/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/269/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/269/events", "html_url": "https://github.com/malthe/chameleon/issues/269", "id": 369238806, "node_id": "MDU6SXNzdWUzNjkyMzg4MDY=", "number": 269, "title": "Unable to generate <?xml-stylesheet .. ?> tag using tal:attributes", "user": {"login": "kveroneau", "id": 1632238, "node_id": "MDQ6VXNlcjE2MzIyMzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1632238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kveroneau", "html_url": "https://github.com/kveroneau", "followers_url": "https://api.github.com/users/kveroneau/followers", "following_url": "https://api.github.com/users/kveroneau/following{/other_user}", "gists_url": "https://api.github.com/users/kveroneau/gists{/gist_id}", "starred_url": "https://api.github.com/users/kveroneau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kveroneau/subscriptions", "organizations_url": "https://api.github.com/users/kveroneau/orgs", "repos_url": "https://api.github.com/users/kveroneau/repos", "events_url": "https://api.github.com/users/kveroneau/events{/privacy}", "received_events_url": "https://api.github.com/users/kveroneau/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-11T18:00:55Z", "updated_at": "2018-10-12T21:26:03Z", "closed_at": "2018-10-12T21:26:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Due to the nature of XSLT being a template language, and able to change how XML is rendered, being able to dynamically change the xml-stylesheet in a Chameleon XML template is very useful, take this XML as example(does not work in Chameleon):\r\n\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<?xml-stylesheet type=\"text/xsl\" tal:attributes=\"href static(xslt)\"?>\r\n<data>\r\n  <test tal:attributes=\"href static(xslt)\"/>\r\n</data>\r\n```\r\n\r\nPlease note that the test tag in this instance renders correctly by chameleon, but the tal:attributes in the ```<?xml-stylesheet?>``` tag is rendered as is, and obviously doesn't work.  I later attempted to do ```href=\"${static(xslt)}\"``` to see if that will allow this function to render, but to no avail.\r\n\r\nI would assume that Chameleon being an SGML-based templating language, that it would understand standard XML tags for XSLT processing.  Perhaps I am missing something here.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/266", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/266/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/266/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/266/events", "html_url": "https://github.com/malthe/chameleon/issues/266", "id": 364113065, "node_id": "MDU6SXNzdWUzNjQxMTMwNjU=", "number": 266, "title": "Provide mechanism to log errors suppressed by on-error", "user": {"login": "rafaelbco", "id": 1086778, "node_id": "MDQ6VXNlcjEwODY3Nzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1086778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rafaelbco", "html_url": "https://github.com/rafaelbco", "followers_url": "https://api.github.com/users/rafaelbco/followers", "following_url": "https://api.github.com/users/rafaelbco/following{/other_user}", "gists_url": "https://api.github.com/users/rafaelbco/gists{/gist_id}", "starred_url": "https://api.github.com/users/rafaelbco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rafaelbco/subscriptions", "organizations_url": "https://api.github.com/users/rafaelbco/orgs", "repos_url": "https://api.github.com/users/rafaelbco/repos", "events_url": "https://api.github.com/users/rafaelbco/events{/privacy}", "received_events_url": "https://api.github.com/users/rafaelbco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}, {"id": 16156587, "node_id": "MDU6TGFiZWwxNjE1NjU4Nw==", "url": "https://api.github.com/repos/malthe/chameleon/labels/feature", "name": "feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-26T16:26:18Z", "updated_at": "2018-10-26T11:59:39Z", "closed_at": "2018-10-25T04:57:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "I would like to be able to log errors suppressed by the `on-error` directive.\r\n\r\nA non-intrusive way to achieve this would be to have a mechanism to register a callback (like an event handler) which would receive the error information. Then users of the template engine could log the errors any way they want.\r\n\r\nOther nice thing that could be implemented is to re-raise errors that cannot be suppressed. For example, in applications running on top of ZODB it is not recommended to swallow `ConflictError` exceptions.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/265", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/265/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/265/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/265/events", "html_url": "https://github.com/malthe/chameleon/issues/265", "id": 346619046, "node_id": "MDU6SXNzdWUzNDY2MTkwNDY=", "number": 265, "title": "$$ to $ escaping seems to be inconsistent in javascript in attribute (Change in 3.0+)", "user": {"login": "fredvd", "id": 394784, "node_id": "MDQ6VXNlcjM5NDc4NA==", "avatar_url": "https://avatars2.githubusercontent.com/u/394784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fredvd", "html_url": "https://github.com/fredvd", "followers_url": "https://api.github.com/users/fredvd/followers", "following_url": "https://api.github.com/users/fredvd/following{/other_user}", "gists_url": "https://api.github.com/users/fredvd/gists{/gist_id}", "starred_url": "https://api.github.com/users/fredvd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fredvd/subscriptions", "organizations_url": "https://api.github.com/users/fredvd/orgs", "repos_url": "https://api.github.com/users/fredvd/repos", "events_url": "https://api.github.com/users/fredvd/events{/privacy}", "received_events_url": "https://api.github.com/users/fredvd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-01T14:14:14Z", "updated_at": "2018-10-11T20:24:12Z", "closed_at": "2018-10-11T20:24:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was a bit too eager to update pinnings from Chameleon 2.X to 3 and didn't realise some custom template code in a Plone project was using double $$'s in javascript in template code.  \r\n\r\nI'll stick with Chameleon 2.22, however, the escaping seems to be happening a bit inconsistent, which is why I create this issue. Maybe it's nothing, but still.\r\n\r\nThis peace of zpt:\r\n\r\n```\r\n<select name=\"location\"\r\n        tal:attributes=\"onchange string:(function($$, form, selected) {\r\n                            var links = $$('#${adding_id} a'),\r\n                                name = selected.value\r\n                            $$.each(links, function(i, j) {\r\n                                var link = $$(j)\r\n                                var href = link.attr('href').split('?')[0]\r\n                                var k = href.lastIndexOf('++')\r\n                                var l = href.lastIndexOf('/')\r\n                                href = href.substring(0, k) +\r\n                                        '++' + name + '/+' +\r\n                                        href.substring(l);;\r\n                                $$(link).attr('href', href)\r\n                            })\r\n                        })(jQuery, this.form, this.options[this.selectedIndex]);;\r\n                        this.blur()\">\r\n```\r\n\r\nGets converted to:\r\n\r\n```\r\n<select name=\"location\" onchange=\"(function($, form, selected) {\r\n                                      var links = $('#adding-140586698692688 a'),\r\n                                          name = selected.value\r\n                                      $$.each(links, function(i, j) {\r\n                                          var link = $$(j)\r\n                                          var href = link.attr('href').split('?')[0]\r\n                                          var k = href.lastIndexOf('++')\r\n                                          var l = href.lastIndexOf('/')\r\n                                          href = href.substring(0, k) +\r\n                                                 '++' + name + '/+' +\r\n                                                 href.substring(l);\r\n                                          $$(link).attr('href', href)\r\n                                      })\r\n                                  })(jQuery, this.form, this.options[this.selectedIndex]);\r\n                                  this.blur()\">\r\n```\r\n\r\nUsing Chameleon 3.2 and z3c.pt 3.1.0 in a Plone 4.3.x site. The adding_id variable is substituted correctly. However  the first double $$'s on the first and second line are escaped but the rest of the double $$'s further down' the javascript code are not...\r\n\r\nDoes this have something to do with the ${adding_id} substitution getting processed? which is in between these? \r\n\r\nChameleon 2.22 doesn't touch any of the $$'s. \r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/262", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/262/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/262/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/262/events", "html_url": "https://github.com/malthe/chameleon/issues/262", "id": 321599277, "node_id": "MDU6SXNzdWUzMjE1OTkyNzc=", "number": 262, "title": "Support HTML comments?", "user": {"login": "bratao", "id": 1090152, "node_id": "MDQ6VXNlcjEwOTAxNTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1090152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bratao", "html_url": "https://github.com/bratao", "followers_url": "https://api.github.com/users/bratao/followers", "following_url": "https://api.github.com/users/bratao/following{/other_user}", "gists_url": "https://api.github.com/users/bratao/gists{/gist_id}", "starred_url": "https://api.github.com/users/bratao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bratao/subscriptions", "organizations_url": "https://api.github.com/users/bratao/orgs", "repos_url": "https://api.github.com/users/bratao/repos", "events_url": "https://api.github.com/users/bratao/events{/privacy}", "received_events_url": "https://api.github.com/users/bratao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-05-09T14:42:26Z", "updated_at": "2018-06-02T12:45:26Z", "closed_at": "2018-06-02T12:45:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, \r\n\r\nI want to use chameleon in a HTML templates with browser conditionals like:\r\n\r\n`<!--[if !mso]`\r\n\r\nBut chamaleon keep giving the error:\r\n\"The string '--' is not allowed in a comment.\"\r\n\r\nDo chameleon supports HTML or just XML ?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/257", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/257/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/257/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/257/events", "html_url": "https://github.com/malthe/chameleon/issues/257", "id": 275354951, "node_id": "MDU6SXNzdWUyNzUzNTQ5NTE=", "number": 257, "title": "template inheritance issue with slots?", "user": {"login": "silenius", "id": 1225348, "node_id": "MDQ6VXNlcjEyMjUzNDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1225348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/silenius", "html_url": "https://github.com/silenius", "followers_url": "https://api.github.com/users/silenius/followers", "following_url": "https://api.github.com/users/silenius/following{/other_user}", "gists_url": "https://api.github.com/users/silenius/gists{/gist_id}", "starred_url": "https://api.github.com/users/silenius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/silenius/subscriptions", "organizations_url": "https://api.github.com/users/silenius/orgs", "repos_url": "https://api.github.com/users/silenius/repos", "events_url": "https://api.github.com/users/silenius/events{/privacy}", "received_events_url": "https://api.github.com/users/silenius/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-11-20T13:26:11Z", "updated_at": "2017-11-20T14:47:48Z", "closed_at": "2017-11-20T13:52:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI have an issue with the following templates/scenario (simplified for example).\r\nThe problem is that some slot is always rendered even if it's surrounded by a `tal:condition=\"False\"` block.\r\nThe \"entry point\" is a rendering of the `folder/show/default.pt` template.\r\n\r\n`templates/layout.pt`:\r\n```html\r\n<metal:block define-macro=\"page\" tal:define=\"json import: json; content content|None\">\r\n<!doctype html>\r\n<html>\r\n  <head>\r\n    <title metal:define-slot=\"title\">\r\n      <metal:block define-slot=\"title_more\" />\r\n    </title>\r\n    <metal:block define-slot=\"head-bottom\" />\r\n  </head>\r\n\r\n  <body>\r\n    <metal:block define-slot=\"content\" /> \r\n  </body>\r\n</html>\r\n</metal:block>\r\n```\r\n`folder/show/default.pt`:\r\n```html\r\n<metal:block tal:define=\"_tmpl 'amnesia:/templates/_custom/document/bees_index.pt'\">\r\n    <metal:block use-macro=\"load: ${_tmpl}\"> \r\n        <metal:block fill-slot=\"title_more\">: ${content.title}</metal:block>\r\n\r\n        <metal:block tal:condition=\"False\">\r\n            <metal:block fill-slot=\"head-bottom\">\r\n              <!-- \r\n                THE ISSUE IS HERE, THIS BLOCK IS ALWAYS RENDERED WITHIN THE\r\n                 templates/layout.pt head-bottom slot, EVEN IF IT'S SURROUNDED BY A \r\n                 <metal:block tal:condition=\"False\"> AS ABOVE\r\n               -->\r\n            </metal:block> <!-- HEAD BOTTOM -->\r\n\r\n            <div id=\"main\" metal:fill-slot=\"content\">\r\n              <!-- SOME CONTENT -->\r\n            </div>\r\n        </metal:block>\r\n    </metal:block>\r\n</metal:block>\r\n```\r\n\r\n`_custom/document/bees_index.pt`:\r\n```html\r\n<metal:block use-macro=\"load: amnesia:templates/document/show.pt\">\r\n    <metal:block fill-slot=\"body\" tal:define=\"settings request.registry.settings\">\r\n        <!-- SOME CONTENT -->\r\n    </metal:block>\r\n</metal:block>\r\n```\r\n`document/show.pt`:\r\n```html\r\n<metal:block use-macro=\"load: amnesia:templates/layout.pt\">\r\n<metal:block fill-slot=\"title_more\">: ${content.title}</metal:block>\r\n<metal:block define-macro=\"body\">\r\n<metal:block fill-slot=\"content\" tal:define=\"aside bool(content.props and 'twitter' in content.props or content.tags)\">\r\n    <div id=\"main\">\r\n        <section class=\"document-page\">\r\n            <div class=\"container\">\r\n                <metal:block define-slot=\"top\" />\r\n                <div class=\"row\" metal:define-slot=\"body\">\r\n                    <div tal:attributes=\"class 'col-md-9 col-sm-8' if aside else 'col-md-12'\" metal:define-slot=\"text\">\r\n                        <blockquote tal:condition=\"content.description\">\r\n                            <p><strong>${content.description}</strong></p>\r\n                        </blockquote>\r\n                        ${structure: content.body}\r\n                    </div>\r\n                    <div class=\"col-md-3 col-sm-4\" tal:condition=\"aside\" metal:define-slot=\"aside\"> \r\n                    <!--SIDEBAR START-->\r\n                        <aside>\r\n                            <div class=\"sidebar\">\r\n                                <metal:block define-slot=\"aside-top\" />\r\n                                <!-- SOME CONTENT -->\r\n                                <metal:block define-slot=\"aside-bottom\" />\r\n                            </div>\r\n                        </aside>\r\n                    <!-- SIDEBAR END -->\r\n                    </div>\r\n                </div>\r\n                <metal:block define-slot=\"bottom\" />\r\n            </div>\r\n        </section>\r\n    </div>\r\n</metal:block>\r\n</metal:block>\r\n</metal:block>\r\n```\r\n\r\nany idea ? :-)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/256", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/256/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/256/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/256/events", "html_url": "https://github.com/malthe/chameleon/issues/256", "id": 272529810, "node_id": "MDU6SXNzdWUyNzI1Mjk4MTA=", "number": 256, "title": "UnboundLocalError: local variable '__condition' referenced before assignment", "user": {"login": "jinty", "id": 553369, "node_id": "MDQ6VXNlcjU1MzM2OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/553369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jinty", "html_url": "https://github.com/jinty", "followers_url": "https://api.github.com/users/jinty/followers", "following_url": "https://api.github.com/users/jinty/following{/other_user}", "gists_url": "https://api.github.com/users/jinty/gists{/gist_id}", "starred_url": "https://api.github.com/users/jinty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jinty/subscriptions", "organizations_url": "https://api.github.com/users/jinty/orgs", "repos_url": "https://api.github.com/users/jinty/repos", "events_url": "https://api.github.com/users/jinty/events{/privacy}", "received_events_url": "https://api.github.com/users/jinty/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-09T11:24:56Z", "updated_at": "2017-11-10T09:23:16Z", "closed_at": "2017-11-10T09:23:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I can't reproduce this, but posting here to see if it rings any bells for anyone.\r\n\r\nRecently we had a load spike and a new server came up. Unfortunately, a template seems to have been mis-compiled resulting in the above error. We bring new servers up a lot and this is the only time it's failed, recompiling on the same server doesn't reproduce the error.\r\n\r\nSpecifically, the wrongly compiled code looks like:\r\n\r\n```\r\n              # <Value 'title' (7:25)> -> __condition\r\n              __token = ('title', 7, 25, '.../content_expires_widget.pt', )\r\n              __attr_value = getitem('title')                                                                                                         \r\n              if __condition:\r\n```\r\n\r\nand the correctly compiled version is:\r\n\r\n```\r\n              # <Value 'title' (7:25)> -> __condition\r\n              __token = ('title', 7, 25, '.../content_expires_widget.pt', )\r\n              __condition = getitem('title')                                                                                                          \r\n              if __condition:\r\n```\r\n\r\nThe line of the template being compiled is:\r\n```\r\n                <legend tal:condition=\"title\">${title}</legend>\r\n```\r\n\r\nTo test if it's random, I'm re-compiling the template in a loop. I've done 3000 of those so far without reproducing.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/255", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/255/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/255/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/255/events", "html_url": "https://github.com/malthe/chameleon/issues/255", "id": 271293764, "node_id": "MDU6SXNzdWUyNzEyOTM3NjQ=", "number": 255, "title": "using vuejs with chameleon", "user": {"login": "larsbijl", "id": 285658, "node_id": "MDQ6VXNlcjI4NTY1OA==", "avatar_url": "https://avatars2.githubusercontent.com/u/285658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larsbijl", "html_url": "https://github.com/larsbijl", "followers_url": "https://api.github.com/users/larsbijl/followers", "following_url": "https://api.github.com/users/larsbijl/following{/other_user}", "gists_url": "https://api.github.com/users/larsbijl/gists{/gist_id}", "starred_url": "https://api.github.com/users/larsbijl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larsbijl/subscriptions", "organizations_url": "https://api.github.com/users/larsbijl/orgs", "repos_url": "https://api.github.com/users/larsbijl/repos", "events_url": "https://api.github.com/users/larsbijl/events{/privacy}", "received_events_url": "https://api.github.com/users/larsbijl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-05T16:33:56Z", "updated_at": "2017-11-05T17:30:50Z", "closed_at": "2017-11-05T17:30:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nWhen using chameleon in pyramid I'm getting the following error when rendering.\r\n\r\n```\r\nbuiltins.KeyError\r\nKeyError: 'Undefined namespace prefix: v-on.'\r\n```\r\n\r\nthe element in my markup looks like this.\r\n\r\n```\r\n<a class=\"btn btn-default\" v-on:click=\"bulk_edit != bulk_edit\">Edit</a>\r\n```\r\n\r\nIt having an issue with the `v-on` directive used by vuejs.\r\nCan these prefixes be created? how would you add/create your own?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/251", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/251/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/251/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/251/events", "html_url": "https://github.com/malthe/chameleon/issues/251", "id": 264206539, "node_id": "MDU6SXNzdWUyNjQyMDY1Mzk=", "number": 251, "title": "Latest documentation at chameleon.readthedocs.io is for version 2.10", "user": {"login": "jamadden", "id": 1256082, "node_id": "MDQ6VXNlcjEyNTYwODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1256082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamadden", "html_url": "https://github.com/jamadden", "followers_url": "https://api.github.com/users/jamadden/followers", "following_url": "https://api.github.com/users/jamadden/following{/other_user}", "gists_url": "https://api.github.com/users/jamadden/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamadden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamadden/subscriptions", "organizations_url": "https://api.github.com/users/jamadden/orgs", "repos_url": "https://api.github.com/users/jamadden/repos", "events_url": "https://api.github.com/users/jamadden/events{/privacy}", "received_events_url": "https://api.github.com/users/jamadden/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-10-10T12:20:19Z", "updated_at": "2018-05-23T06:41:05Z", "closed_at": "2018-05-23T06:41:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "http://chameleon.readthedocs.io/en/latest/ says it's for Chameleon 2.10. The [build status](http://readthedocs.org/projects/chameleon/builds/) says the latest branch was last build 1 year, 8 months ago. This is what you get if you simply go to http://chameleon.readthedocs.io/ , and it's explicitly linked to from https://pypi.python.org/pypi/Chameleon\r\n\r\nThere have been a lot of important changes to Chameleon and the documentation between now and then. One thing that immediately caught my eye was that the 2.10 (\"latest\") documentation says that `i18n:target` is ignored, while if you explicitly select the 3.1 documentation, it appears to be supported.\r\n\r\nMaybe the RTD webhook is messed up? Can something be done to get the `/latest/` documentation to actually *be* the latest? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/249", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/249/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/249/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/249/events", "html_url": "https://github.com/malthe/chameleon/issues/249", "id": 264047150, "node_id": "MDU6SXNzdWUyNjQwNDcxNTA=", "number": 249, "title": "Documentation: No support for repeat.item.first or repeat.item.last, remove that text?", "user": {"login": "jamadden", "id": 1256082, "node_id": "MDQ6VXNlcjEyNTYwODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1256082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamadden", "html_url": "https://github.com/jamadden", "followers_url": "https://api.github.com/users/jamadden/followers", "following_url": "https://api.github.com/users/jamadden/following{/other_user}", "gists_url": "https://api.github.com/users/jamadden/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamadden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamadden/subscriptions", "organizations_url": "https://api.github.com/users/jamadden/orgs", "repos_url": "https://api.github.com/users/jamadden/repos", "events_url": "https://api.github.com/users/jamadden/events{/privacy}", "received_events_url": "https://api.github.com/users/jamadden/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-10-09T22:41:54Z", "updated_at": "2017-11-03T16:48:46Z", "closed_at": "2017-10-10T12:20:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The [docs claim](https://chameleon.readthedocs.io/en/latest/reference.html#repeat-variables) that a repeat item has a `first` and `last` attribute that's used for grouping. However, I don't find those attributes defined on the RepeatItem class, and trying to use them in a template results in either an AttributeError (in a Python expression) or a LocationError (in a path expression).\r\n\r\nFWIW, I couldn't find where `first` and `last` were implemented for `zope.tales` and `zope.tal` despite the old [Zope2 reference](https://docs.zope.org/zope2/zope2book/AppendixC.html#repeat-variables) documenting those variables (and Zope2 itself uses zope.tal[es] these days), and the zope.pagetemplate implementation fails similarly.\r\n\r\nIt's not that I need them, it's just that they claimed that you could pass a grouping argument into `first` in a path expression:\r\n\r\n> You can provide the path by passing it as a parameter, as in `python:repeat['item'].first(color)`\r\n> or by appending it to the path from the repeat variable, as in `repeat/item/first/color`.\r\n\r\nI was curious exactly how they were doing that because it seemed useful. I started out planning to try to implement those values for chameleon if I could find where they are implemented in zope, but since they don't seem to be implemented anywhere, I suspect this is just a case of the documentation being outdated and in need of update? If so I can submit a PR. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/248", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/248/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/248/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/248/events", "html_url": "https://github.com/malthe/chameleon/issues/248", "id": 262381723, "node_id": "MDU6SXNzdWUyNjIzODE3MjM=", "number": 248, "title": "Retrieving global variables from templates", "user": {"login": "elijahsgh", "id": 3681218, "node_id": "MDQ6VXNlcjM2ODEyMTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/3681218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elijahsgh", "html_url": "https://github.com/elijahsgh", "followers_url": "https://api.github.com/users/elijahsgh/followers", "following_url": "https://api.github.com/users/elijahsgh/following{/other_user}", "gists_url": "https://api.github.com/users/elijahsgh/gists{/gist_id}", "starred_url": "https://api.github.com/users/elijahsgh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elijahsgh/subscriptions", "organizations_url": "https://api.github.com/users/elijahsgh/orgs", "repos_url": "https://api.github.com/users/elijahsgh/repos", "events_url": "https://api.github.com/users/elijahsgh/events{/privacy}", "received_events_url": "https://api.github.com/users/elijahsgh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-03T10:44:34Z", "updated_at": "2017-10-03T15:00:08Z", "closed_at": "2017-10-03T15:00:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is a special use-case, but I was hoping someone could point me in the right direction.\r\n\r\nI have inherited some templates that start like this:\r\n```\r\n<defines tal:define=\"\r\nglobal datepublished '2017-09-20';\r\nglobal datecreated '2017-09-20';\r\nglobal datemodified '2017-09-20';\r\n```\r\nIs there any way I can use the PageTemplateLoader class to inspect those templates and extract the globals out?\r\n\r\nI have tried this:\r\n```\r\nfrom chameleon import PageTemplateLoader\r\nloader =  PageTemplateLoader('templates')\r\ntemplate = loader['template1.pt']\r\n```\r\n\r\nBut the defines don't show up in templates.builtins or similar after cooking/rendering.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/246", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/246/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/246/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/246/events", "html_url": "https://github.com/malthe/chameleon/issues/246", "id": 257761751, "node_id": "MDU6SXNzdWUyNTc3NjE3NTE=", "number": 246, "title": "chameleon does not work if sourcecode is not available", "user": {"login": "mrh1997", "id": 1482077, "node_id": "MDQ6VXNlcjE0ODIwNzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1482077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrh1997", "html_url": "https://github.com/mrh1997", "followers_url": "https://api.github.com/users/mrh1997/followers", "following_url": "https://api.github.com/users/mrh1997/following{/other_user}", "gists_url": "https://api.github.com/users/mrh1997/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrh1997/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrh1997/subscriptions", "organizations_url": "https://api.github.com/users/mrh1997/orgs", "repos_url": "https://api.github.com/users/mrh1997/repos", "events_url": "https://api.github.com/users/mrh1997/events{/privacy}", "received_events_url": "https://api.github.com/users/mrh1997/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-09-14T15:29:09Z", "updated_at": "2017-10-06T07:19:46Z", "closed_at": "2017-10-04T08:20:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "On systems where only .pyc files were delivered (.py sources are not available) chameleon does not work. This is i.e. the case when I try to pack a project via [cx_freeze](https://anthony-tuininga.github.io/cx_Freeze/) or similar deployment tool (the bug is already reported [here](https://sourceforge.net/p/cx-freeze/mailman/message/29779171/).\r\n\r\nThe reason is that the `codegen.template()` when used as decorator tries to get the source code of a decorated function and translates it into an AST. Currently template() is mainly used to enclose strings which does not cause problems. But in `compiler.py` there are 7 deorated functions (starting with emit*()) that cannot be processed without the sourcecode.\r\n\r\nMy proposal: instead of using tempate as decorator for functions we could use it as regular function with string parameter:\r\n\r\n```\r\n@template\r\ndef emit_node(node):  # pragma: no cover\r\n    __append(node)\r\n```\r\n\r\nwould become:\r\n\r\n```\r\nemit_node = template(\"__append(node)\", params=['node'])\r\n```\r\n\r\nThe disadvantage would be, that when debugging you cannot step through the function body of emit_node any more. But on the pro side there is less magic that can cause problems. If you agree with my proposal I could do a fix...", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/245", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/245/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/245/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/245/events", "html_url": "https://github.com/malthe/chameleon/issues/245", "id": 253514463, "node_id": "MDU6SXNzdWUyNTM1MTQ0NjM=", "number": 245, "title": "pass global variable to macro?", "user": {"login": "jgmtzmd", "id": 25892177, "node_id": "MDQ6VXNlcjI1ODkyMTc3", "avatar_url": "https://avatars3.githubusercontent.com/u/25892177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgmtzmd", "html_url": "https://github.com/jgmtzmd", "followers_url": "https://api.github.com/users/jgmtzmd/followers", "following_url": "https://api.github.com/users/jgmtzmd/following{/other_user}", "gists_url": "https://api.github.com/users/jgmtzmd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgmtzmd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgmtzmd/subscriptions", "organizations_url": "https://api.github.com/users/jgmtzmd/orgs", "repos_url": "https://api.github.com/users/jgmtzmd/repos", "events_url": "https://api.github.com/users/jgmtzmd/events{/privacy}", "received_events_url": "https://api.github.com/users/jgmtzmd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-29T02:56:18Z", "updated_at": "2017-08-29T13:17:49Z", "closed_at": "2017-08-29T06:36:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi.\r\nme again.\r\n\r\ni see i can send a value to a macro, lets say i define \r\n\r\n    <body tal:define=\"my_value 30\">\r\n        ${my_value}\r\n        <div metal:use-macro=\"base.macros['my_macro']\"></div>\r\n        ${my_value}\r\n    </body>\r\n\r\nin my_macro i can print and modify my_value. but when i return to the master template my_value is still 30 as defined here.\r\ni guess i should use global..  tal:define=\"global my_value 30\"\r\nbut it kept behaving the same. sure i am missing something in the macro.\r\n\r\nregards", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/244", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/244/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/244/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/244/events", "html_url": "https://github.com/malthe/chameleon/issues/244", "id": 252664867, "node_id": "MDU6SXNzdWUyNTI2NjQ4Njc=", "number": 244, "title": "Compiler error replaced expression with `str()`", "user": {"login": "hathawsh", "id": 637806, "node_id": "MDQ6VXNlcjYzNzgwNg==", "avatar_url": "https://avatars3.githubusercontent.com/u/637806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hathawsh", "html_url": "https://github.com/hathawsh", "followers_url": "https://api.github.com/users/hathawsh/followers", "following_url": "https://api.github.com/users/hathawsh/following{/other_user}", "gists_url": "https://api.github.com/users/hathawsh/gists{/gist_id}", "starred_url": "https://api.github.com/users/hathawsh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hathawsh/subscriptions", "organizations_url": "https://api.github.com/users/hathawsh/orgs", "repos_url": "https://api.github.com/users/hathawsh/repos", "events_url": "https://api.github.com/users/hathawsh/events{/privacy}", "received_events_url": "https://api.github.com/users/hathawsh/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-24T16:55:00Z", "updated_at": "2017-08-24T19:07:47Z", "closed_at": "2017-08-24T19:07:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I was quite surprised to discover today that Chameleon (version 3.1 on Python 3.5.2) had mis-compiled a template I've been using heavily for years. When I deleted the cached compiled module, Chameleon re-created the template correctly. I saved the mis-compiled module for further study.\r\n\r\nThe template is checkbox_choice.pt from Deform 2.0a2. Here it is, unchanged:\r\n\r\n```\r\n<div tal:define=\"css_class css_class|field.widget.css_class;\r\n                 style style|field.widget.style;\r\n                 oid oid|field.oid;\r\n                 inline getattr(field.widget, 'inline', False)\"\r\n     tal:omit-tag=\"not inline\">\r\n  ${field.start_sequence()}\r\n  <div tal:repeat=\"choice values | field.widget.values\"\r\n       tal:omit-tag=\"inline\"\r\n       class=\"checkbox\">\r\n    <label for=\"${oid}-${repeat.choice.index}\"\r\n           tal:define=\"(value, title) choice\"\r\n           tal:attributes=\"class inline and 'checkbox-inline'\">\r\n      <input tal:attributes=\"checked value in cstruct;\r\n                             class css_class;\r\n                             style style\"\r\n             type=\"checkbox\"\r\n             name=\"checkbox\"\r\n             value=\"${value}\"\r\n             id=\"${oid}-${repeat.choice.index}\"/>\r\n      ${title}\r\n    </label>\r\n  </div>\r\n  ${field.end_sequence()}\r\n</div>\r\n```\r\n\r\nThe problem was in the call to field.end_sequence(); Chameleon wasn't calling it. I looked at the compiled module and here's what I found:\r\n\r\n```\r\n           # <Interpolation value=<Substitution '\\n  ${field.end_sequence()}\\n' (22:8)> braces_required=True translation=False at 7fb5daabacf8> -> __content_140419459435464\r\n            __token = ('${field.end_sequence()}', 23, 2, '/srv/wcbuild/eggs/deform-2.0a2-py3.5.egg/deform/templates/checkbox_choice.pt', )\r\n            __token = ('field.end_sequence()', 23, 4, '/srv/wcbuild/eggs/deform-2.0a2-py3.5.egg/deform/templates/checkbox_choice.pt', )\r\n            __content_140419459435464 = str()\r\n            __content_140419459435464 = __quote(__content_140419459435464, '\\x00', '&#0;', None, False)\r\n            __content_140419459435464 = ('%s%s%s' % ('\\n  ', (__content_140419459435464 if (__content_140419459435464 is not None) else ''), '\\n', ))\r\n            if (__content_140419459435464 is None):\r\n                pass\r\n            else:\r\n```\r\n\r\nI thought the code was very peculiar since I couldn't see where it was actually calling `field.end_sequence()`. I moved the module aside and regenerated it. Here's what Chameleon generated this time:\r\n\r\n```\r\n           # <Interpolation value=<Substitution '\\n  ${field.end_sequence()}\\n' (22:8)> braces_required=True translation=False at 7fc81c1717b8> -> __content_140497844064920\r\n            __token = ('${field.end_sequence()}', 23, 2, '/srv/wcbuild/eggs/deform-2.0a2-py3.5.egg/deform/templates/checkbox_choice.pt', )\r\n            __token = ('field.end_sequence()', 23, 4, '/srv/wcbuild/eggs/deform-2.0a2-py3.5.egg/deform/templates/checkbox_choice.pt', )\r\n            __content_140497844064920 = _lookup_attr(getitem('field'), 'end_sequence')()\r\n            __content_140497844064920 = __quote(__content_140497844064920, '\\x00', '&#0;', None, False)\r\n            __content_140497844064920 = ('%s%s%s' % ('\\n  ', (__content_140497844064920 if (__content_140497844064920 is not None) else ''), '\\n', ))\r\n            if (__content_140497844064920 is None):\r\n                pass\r\n            else:\r\n```\r\n\r\nAh, that's a lot better! Instead of `str()`, Chameleon calls `field.end_sequence()` using the expression `_lookup_attr(getitem('field'), 'end_sequence')()`. That one expression is completely different for no apparent reason.\r\n\r\nThe question is this: how in the world did Chameleon generate such errant code? Did some kind of exception happen in the middle of the compilation and Chameleon reacted by replacing the exception with `str()`? Maybe Python was momentarily out of memory, or cosmic ray, or... ???\r\n\r\nOther details that may be relevant:\r\n- This happened inside a Docker container. I just started using Docker volumes and the cached compiled code is now in a volume, so from Chameleon's POV, the cached compiled code is in a different filesystem than the template. I don't know how this detail would be relevant, but Chameleon has been solid as a rock for years until yesterday and yesterday is when I started using volumes.\r\n- As of 2 days ago, both the template and the cached compiled code are stored using the XFS filesystem. Previously they were in ext4, I think.\r\n- The machine where this is running has reported machine check exceptions before, so I can't rule out a bit flip or miscalculation. What's surprising is that it replaced the expression with `str()` rather than garbage.\r\n- I am the only one who has shell access to the server. (I hope! ;-) )\r\n\r\nDoes anyone have any ideas how this mis-compilation might be possible?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/241", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/241/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/241/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/241/events", "html_url": "https://github.com/malthe/chameleon/issues/241", "id": 247773322, "node_id": "MDU6SXNzdWUyNDc3NzMzMjI=", "number": 241, "title": "question: can i pull blocks from some base template?", "user": {"login": "jgmtzmd", "id": 25892177, "node_id": "MDQ6VXNlcjI1ODkyMTc3", "avatar_url": "https://avatars3.githubusercontent.com/u/25892177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgmtzmd", "html_url": "https://github.com/jgmtzmd", "followers_url": "https://api.github.com/users/jgmtzmd/followers", "following_url": "https://api.github.com/users/jgmtzmd/following{/other_user}", "gists_url": "https://api.github.com/users/jgmtzmd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgmtzmd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgmtzmd/subscriptions", "organizations_url": "https://api.github.com/users/jgmtzmd/orgs", "repos_url": "https://api.github.com/users/jgmtzmd/repos", "events_url": "https://api.github.com/users/jgmtzmd/events{/privacy}", "received_events_url": "https://api.github.com/users/jgmtzmd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-03T17:03:39Z", "updated_at": "2017-08-04T06:26:13Z", "closed_at": "2017-08-03T20:13:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi.\r\n\r\ni hope you can clarify this to me:\r\nis there a way to use blocks stored in other template file?\r\n\r\ni know i can relay use:\r\n`    metal:use-macro=\"load: other_file.pt\"`\r\nand \r\n`    metal:fill-slot=\"some_slot\"`\r\nso we get an \"other_file.pt\"-like template with the slot content replaced.\r\n\r\nbut what if i want to have a file, call it \"base.pt\" where i store different blocks (macros?) and let the rest of the templates (\"template1.pt\", \"template2.pt\".. etc) load different blocks from it. is it possible? how? i tried things like \r\n`    metal:use-macro=\"load base.pt['some_block']\" `\r\n\r\ni already read the docs and trial-errored this. unsuccesfully.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/238", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/238/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/238/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/238/events", "html_url": "https://github.com/malthe/chameleon/issues/238", "id": 226874164, "node_id": "MDU6SXNzdWUyMjY4NzQxNjQ=", "number": 238, "title": "Support for `macroname`?", "user": {"login": "jamadden", "id": 1256082, "node_id": "MDQ6VXNlcjEyNTYwODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1256082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamadden", "html_url": "https://github.com/jamadden", "followers_url": "https://api.github.com/users/jamadden/followers", "following_url": "https://api.github.com/users/jamadden/following{/other_user}", "gists_url": "https://api.github.com/users/jamadden/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamadden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamadden/subscriptions", "organizations_url": "https://api.github.com/users/jamadden/orgs", "repos_url": "https://api.github.com/users/jamadden/repos", "events_url": "https://api.github.com/users/jamadden/events{/privacy}", "received_events_url": "https://api.github.com/users/jamadden/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-07T16:39:23Z", "updated_at": "2017-05-08T12:27:45Z", "closed_at": "2017-05-08T12:27:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The Zope TAL implementation [automatically provides the `macroname` variable](https://github.com/zopefoundation/zope.tal/blob/master/src/zope/tal/talinterpreter.py#L895) during the scope of execution of the macro, although this seems to be undocumented. However, this is used by some existing Zope templates, such as [the main layout of zope.app.rotterdam](https://github.com/zopefoundation/zope.app.rotterdam/blob/master/src/zope/app/rotterdam/template_tablelayout.pt#L95). Chameleon doesn't provide this variable, preventing it from running such templates.\r\n\r\nIs this something Chameleon could/would/should do? If so, I would be happy to work on a PR to add that (although I might need some guidance).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/236", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/236/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/236/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/236/events", "html_url": "https://github.com/malthe/chameleon/issues/236", "id": 216175853, "node_id": "MDU6SXNzdWUyMTYxNzU4NTM=", "number": 236, "title": "Rendering of standard ZPT seems to be slower with Chameleon installed", "user": {"login": "hvelarde", "id": 341393, "node_id": "MDQ6VXNlcjM0MTM5Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/341393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hvelarde", "html_url": "https://github.com/hvelarde", "followers_url": "https://api.github.com/users/hvelarde/followers", "following_url": "https://api.github.com/users/hvelarde/following{/other_user}", "gists_url": "https://api.github.com/users/hvelarde/gists{/gist_id}", "starred_url": "https://api.github.com/users/hvelarde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hvelarde/subscriptions", "organizations_url": "https://api.github.com/users/hvelarde/orgs", "repos_url": "https://api.github.com/users/hvelarde/repos", "events_url": "https://api.github.com/users/hvelarde/events{/privacy}", "received_events_url": "https://api.github.com/users/hvelarde/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-22T19:05:33Z", "updated_at": "2017-03-24T18:10:07Z", "closed_at": "2017-03-24T18:10:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "TL;DR: rendering of page templates in Plone 4.3 (no Chameleon installed) seems to be 50% faster than in Plone 5.1 (Chameleon installed).\r\n\r\nThe issue is documented on a Plone Community [thread](https://community.plone.org/t/why-is-plone-4-3-faster-than-plone-5-1/3808?u=hvelarde).\r\n\r\nIs that an expected behavior?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/235", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/235/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/235/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/235/events", "html_url": "https://github.com/malthe/chameleon/issues/235", "id": 211595496, "node_id": "MDU6SXNzdWUyMTE1OTU0OTY=", "number": 235, "title": "filter in repeat", "user": {"login": "jgmtzmd", "id": 25892177, "node_id": "MDQ6VXNlcjI1ODkyMTc3", "avatar_url": "https://avatars3.githubusercontent.com/u/25892177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgmtzmd", "html_url": "https://github.com/jgmtzmd", "followers_url": "https://api.github.com/users/jgmtzmd/followers", "following_url": "https://api.github.com/users/jgmtzmd/following{/other_user}", "gists_url": "https://api.github.com/users/jgmtzmd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgmtzmd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgmtzmd/subscriptions", "organizations_url": "https://api.github.com/users/jgmtzmd/orgs", "repos_url": "https://api.github.com/users/jgmtzmd/repos", "events_url": "https://api.github.com/users/jgmtzmd/events{/privacy}", "received_events_url": "https://api.github.com/users/jgmtzmd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-03T04:55:14Z", "updated_at": "2017-03-03T19:11:32Z", "closed_at": "2017-03-03T09:51:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi.\r\nnot really a bug report but a question instead.\r\ni am creating a table, i populated the columns like this..\r\n\r\n        <tr tal:repeat=\"x resultados\">            \r\n            <td tal:repeat=\"k x.keys()\">\r\n                    ${x[k]}\r\n            </td>\r\n        </tr>\r\n\r\nbut i want to omit some columns so i did..\r\n\r\n        <tr tal:repeat=\"x resultados\">            \r\n            <td tal:repeat=\"k x.keys()\">\r\n                <div tal:condition=\"k!='OPERADOR'\">\r\n                <div tal:condition=\"k!='TIPO'\">\r\n                <div tal:condition=\"k!='NUM SERIE'\">\r\n                    ${x[k]}\r\n                </div></div></div>\r\n            </td>\r\n        </tr>\r\n\r\nand it worked. but what i really want to filter out like 20 or 30 columns so this approach becomes really cumbersome.\r\n\r\ni also tried defining a variable (list)\r\n\r\ntal:define=\"omit 'OPERADOR' 'TIPO'\"\r\n\r\nand condition the repeat operation to\r\n\r\ntal:condition=\"k in omit\"\r\n\r\nbut seems like the 'in' operation doesnt work here.\r\n\r\nany suggestion to how to filter out in a more pythonic way?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/233", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/233/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/233/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/233/events", "html_url": "https://github.com/malthe/chameleon/issues/233", "id": 209003540, "node_id": "MDU6SXNzdWUyMDkwMDM1NDA=", "number": 233, "title": "instrospection of passed data", "user": {"login": "jgmtzmd", "id": 25892177, "node_id": "MDQ6VXNlcjI1ODkyMTc3", "avatar_url": "https://avatars3.githubusercontent.com/u/25892177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgmtzmd", "html_url": "https://github.com/jgmtzmd", "followers_url": "https://api.github.com/users/jgmtzmd/followers", "following_url": "https://api.github.com/users/jgmtzmd/following{/other_user}", "gists_url": "https://api.github.com/users/jgmtzmd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgmtzmd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgmtzmd/subscriptions", "organizations_url": "https://api.github.com/users/jgmtzmd/orgs", "repos_url": "https://api.github.com/users/jgmtzmd/repos", "events_url": "https://api.github.com/users/jgmtzmd/events{/privacy}", "received_events_url": "https://api.github.com/users/jgmtzmd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-02-20T23:21:44Z", "updated_at": "2017-02-23T18:51:09Z", "closed_at": "2017-02-23T18:51:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi. this is not a bug report but a suggestion.\r\ni am just starting to use and like pyramid+chameleon.\r\nit would be useful to have some list of the keys of the dictionary passed to the template. i found this keys in locals() but they come with a lot of other variables and that way we the user cant do things like iterate over the variables and such. i think its not neccesary to break anything in your code, just add to locals some list called 'passed_vars' where we can see them.\r\n\r\nother thing i found is that i could not retrieve attribute from an ordered dict using the python (dotted) notation. i had to use __getattribute__().\r\n\r\nregards.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/231", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/231/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/231/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/231/events", "html_url": "https://github.com/malthe/chameleon/issues/231", "id": 197833552, "node_id": "MDU6SXNzdWUxOTc4MzM1NTI=", "number": 231, "title": "pagetemplates.org website no longer works", "user": {"login": "wichert", "id": 199657, "node_id": "MDQ6VXNlcjE5OTY1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/199657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wichert", "html_url": "https://github.com/wichert", "followers_url": "https://api.github.com/users/wichert/followers", "following_url": "https://api.github.com/users/wichert/following{/other_user}", "gists_url": "https://api.github.com/users/wichert/gists{/gist_id}", "starred_url": "https://api.github.com/users/wichert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wichert/subscriptions", "organizations_url": "https://api.github.com/users/wichert/orgs", "repos_url": "https://api.github.com/users/wichert/repos", "events_url": "https://api.github.com/users/wichert/events{/privacy}", "received_events_url": "https://api.github.com/users/wichert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-12-28T10:47:50Z", "updated_at": "2016-12-28T13:24:54Z", "closed_at": "2016-12-28T13:14:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It looks like the domain expired.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/228", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/228/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/228/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/228/events", "html_url": "https://github.com/malthe/chameleon/issues/228", "id": 193536505, "node_id": "MDU6SXNzdWUxOTM1MzY1MDU=", "number": 228, "title": "Add i18n:language attribute", "user": {"login": "wichert", "id": 199657, "node_id": "MDQ6VXNlcjE5OTY1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/199657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wichert", "html_url": "https://github.com/wichert", "followers_url": "https://api.github.com/users/wichert/followers", "following_url": "https://api.github.com/users/wichert/following{/other_user}", "gists_url": "https://api.github.com/users/wichert/gists{/gist_id}", "starred_url": "https://api.github.com/users/wichert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wichert/subscriptions", "organizations_url": "https://api.github.com/users/wichert/orgs", "repos_url": "https://api.github.com/users/wichert/repos", "events_url": "https://api.github.com/users/wichert/events{/privacy}", "received_events_url": "https://api.github.com/users/wichert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-12-05T15:58:30Z", "updated_at": "2017-12-08T22:53:45Z", "closed_at": "2016-12-06T14:29:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have a situation where I need to force translation to a specific language in a template. Would it be possible to support that with a `i18n:language` attribute? Usage would look like this:\r\n\r\n```html\r\n<button i18n:translate=\"\" lang=\"en\" i18n:target=\"en\">Continue</button>\r\n<button i18n:translate=\"\" lang=\"nl\" i18n:target=\"nl\">Continue</button>\r\n<button i18n:translate=\"\" lang=\"de\" i18n:target=\"de\">Continue</button>\r\n```\r\n\r\nWhich would result in:\r\n\r\n```html\r\n<button lang=\"en\">Continue</button>\r\n<button lang=\"nl\">Verder</button>\r\n<button lang=\"de\">Weiter</button>\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/219", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/219/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/219/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/219/events", "html_url": "https://github.com/malthe/chameleon/issues/219", "id": 178962464, "node_id": "MDU6SXNzdWUxNzg5NjI0NjQ=", "number": 219, "title": "Parse Error with tags with newline", "user": {"login": "thet", "id": 170891, "node_id": "MDQ6VXNlcjE3MDg5MQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/170891?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thet", "html_url": "https://github.com/thet", "followers_url": "https://api.github.com/users/thet/followers", "following_url": "https://api.github.com/users/thet/following{/other_user}", "gists_url": "https://api.github.com/users/thet/gists{/gist_id}", "starred_url": "https://api.github.com/users/thet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thet/subscriptions", "organizations_url": "https://api.github.com/users/thet/orgs", "repos_url": "https://api.github.com/users/thet/repos", "events_url": "https://api.github.com/users/thet/events{/privacy}", "received_events_url": "https://api.github.com/users/thet/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-09-23T20:05:37Z", "updated_at": "2016-09-24T07:49:55Z", "closed_at": "2016-09-24T07:49:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I encountered a parse error with tags names, where a newline is in it. It's the following template from collective.easyform:\n\n```\n<html xmlns=\"http://www.w3.org/1999/xhtml\"\n      xmlns:tal=\"http://xml.zope.org/namespaces/tal\">\n  <head><title></title></head>\n  <body>\n    <p tal:content=\"body_pre | nothing\" />\n    <dl>\n        <tal:block repeat=\"field data | nothing\">\n            <dt tal:content=\"python:fields[field]\" />\n            <dd tal:content=\"structure python:data[field]\" />\n        </tal:block>\n    </dl>\n    <p tal:content=\"body_post | nothing\" />\n    <pre tal:content=\"body_footer | nothing\" />\n  </body>\n</html>\n```\n\nhttps://github.com/collective/collective.easyform/blob/487556605f2d05f6d4079ffaf00d5474b96297ad/collective/easyform/default_schemata/mail_body_default.pt\n\nThis is the error:\n\n```\n  Module chameleon.parser, line 193, in parse\n  Module chameleon.parser, line 238, in visit_end_tag\nParseError: Unexpected end tag.\n\n - String:     \"</html>\"\n - Filename:   mailer\n - Location:   (line 16: col 0)\n```\n\nI stepped into `visit_end_tag` and found out, that `name` has the value `u'html\\r'` while node['name'] has `u'html'`.\n\nThe error persisted, event after removing the newline from the html starting tag and clearing the chameleon cache.\n\nAs I understand, the chameleon integration in Plone compactifies templates a bit. This might not be the case in how collective.easyform is using it.\n\nThe template is used as follows:\n\n```\n        template = ZopePageTemplate(self.__name__)\n        template.write(bodyfield)\n        template = template.__of__(context)\n        body = template.pt_render(extra_context=extra)  # HERE THE ERROR IS THROWN\n```\n\nhttps://github.com/collective/collective.easyform/blob/487556605f2d05f6d4079ffaf00d5474b96297ad/collective/easyform/actions.py#L195\n\nThis is the complete traceback:\n\n```\n> /opt/bda/amkumma-LIVE/eggs/Chameleon-2.24-py2.7.egg/chameleon/parser.py(238)visit_end_tag()\n-> raise ParseError(\"Unexpected end tag.\", token)\n(Pdb) c\n2016-09-23 21:49:35 ERROR Zope.SiteErrorLog 1474660175.160.124260256347 http://localhost:20099/plone/altach/kontakt-formular/view\nTraceback (innermost last):\n  Module ZPublisher.Publish, line 138, in publish\n  Module ZPublisher.mapply, line 77, in mapply\n  Module ZPublisher.Publish, line 48, in call_object\n  Module plone.z3cform.layout, line 66, in __call__\n  Module plone.z3cform.layout, line 50, in update\n  Module collective.easyform.browser.view, line 256, in update\n  Module plone.z3cform.fieldsets.extensible, line 59, in update\n  Module plone.z3cform.patch, line 30, in GroupForm_update\n  Module z3c.form.group, line 145, in update\n  Module plone.app.z3cform.csrf, line 21, in execute\n  Module z3c.form.action, line 98, in execute\n  Module z3c.form.button, line 315, in __call__\n  Module z3c.form.button, line 170, in __call__\n  Module collective.easyform.browser.view, line 159, in handleSubmit\n  Module collective.easyform.browser.view, line 122, in processActions\n  Module collective.easyform.actions, line 466, in onSuccess\n  Module collective.easyform.actions, line 402, in get_mail_text\n  Module collective.easyform.actions, line 196, in get_mail_body\n  Module Products.PageTemplates.ZopePageTemplate, line 306, in write\n  Module zope.pagetemplate.pagetemplate, line 162, in write\n  Module zope.pagetemplate.pagetemplate, line 212, in _cook\n  Module five.pt.engine, line 132, in cook\n  Module chameleon.zpt.template, line 166, in __init__\n  Module chameleon.template, line 116, in __init__\n  Module chameleon.template, line 209, in write\n  Module chameleon.template, line 146, in cook\n  Module chameleon.template, line 219, in _cook\n  Module chameleon.template, line 250, in _make\n  Module chameleon.zpt.template, line 206, in parse\n  Module chameleon.zpt.program, line 164, in __init__\n  Module chameleon.program, line 31, in __init__\n  Module chameleon.parser, line 185, in __iter__\n  Module chameleon.parser, line 193, in parse\n  Module chameleon.parser, line 238, in visit_end_tag\nParseError: Unexpected end tag.\n\n - String:     \"</html>\"\n - Filename:   mailer\n - Location:   (line 16: col 0)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/216", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/216/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/216/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/216/events", "html_url": "https://github.com/malthe/chameleon/issues/216", "id": 168170442, "node_id": "MDU6SXNzdWUxNjgxNzA0NDI=", "number": 216, "title": "Parse Error with \"--\" within a comment block", "user": {"login": "thomasjenkins", "id": 1117767, "node_id": "MDQ6VXNlcjExMTc3Njc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1117767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasjenkins", "html_url": "https://github.com/thomasjenkins", "followers_url": "https://api.github.com/users/thomasjenkins/followers", "following_url": "https://api.github.com/users/thomasjenkins/following{/other_user}", "gists_url": "https://api.github.com/users/thomasjenkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasjenkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasjenkins/subscriptions", "organizations_url": "https://api.github.com/users/thomasjenkins/orgs", "repos_url": "https://api.github.com/users/thomasjenkins/repos", "events_url": "https://api.github.com/users/thomasjenkins/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasjenkins/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152806, "node_id": "MDU6TGFiZWwxNTI4MDY=", "url": "https://api.github.com/repos/malthe/chameleon/labels/cantfix", "name": "cantfix", "color": "d7e102", "default": false, "description": null}, {"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-07-28T18:57:37Z", "updated_at": "2016-12-05T09:35:39Z", "closed_at": "2016-12-05T09:35:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If a double dash (--) appears within a set of tags inside of a ZPT markup comment block an \"Unexpected end tag.\" ParseError is thrown. The unexpected tag in the error message is the first closing tag after the double dash. However, a double dash not enclosed by tags does not throw an error.\n\n```\n<!--!\n  <div>\n    --\n  </div>\n-->\n```\n\nResults in:\n\n```\nchameleon.exc.ParseError: chameleon.exc.ParseError: Unexpected end tag.\n\n - String:     \"</div>\"\n```\n\n However, the following parses without issue.\n\n```\n<!--!\n  <div>\n  </div>\n  --\n-->\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/211", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/211/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/211/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/211/events", "html_url": "https://github.com/malthe/chameleon/issues/211", "id": 133946005, "node_id": "MDU6SXNzdWUxMzM5NDYwMDU=", "number": 211, "title": "Error in description of truthy and falsy values", "user": {"login": "piotr-dobrogost", "id": 92239, "node_id": "MDQ6VXNlcjkyMjM5", "avatar_url": "https://avatars2.githubusercontent.com/u/92239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piotr-dobrogost", "html_url": "https://github.com/piotr-dobrogost", "followers_url": "https://api.github.com/users/piotr-dobrogost/followers", "following_url": "https://api.github.com/users/piotr-dobrogost/following{/other_user}", "gists_url": "https://api.github.com/users/piotr-dobrogost/gists{/gist_id}", "starred_url": "https://api.github.com/users/piotr-dobrogost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piotr-dobrogost/subscriptions", "organizations_url": "https://api.github.com/users/piotr-dobrogost/orgs", "repos_url": "https://api.github.com/users/piotr-dobrogost/repos", "events_url": "https://api.github.com/users/piotr-dobrogost/events{/privacy}", "received_events_url": "https://api.github.com/users/piotr-dobrogost/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-02-16T10:49:06Z", "updated_at": "2016-12-05T09:38:56Z", "closed_at": "2016-12-05T09:38:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "At http://chameleon.readthedocs.org/en/latest/reference.html one reads:\n\n> Like Python itself, ZPT considers None, zero, empty strings, empty sequences, empty dictionaries, and instances which return a nonzero value from `__len__` or `__nonzero__` false; all other values are true, including default.\n\nShouldn't that be _return zero value_ instead?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/209", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/209/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/209/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/209/events", "html_url": "https://github.com/malthe/chameleon/issues/209", "id": 117094703, "node_id": "MDU6SXNzdWUxMTcwOTQ3MDM=", "number": 209, "title": "Temporary files are not deleted", "user": {"login": "nesaro", "id": 71460, "node_id": "MDQ6VXNlcjcxNDYw", "avatar_url": "https://avatars3.githubusercontent.com/u/71460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nesaro", "html_url": "https://github.com/nesaro", "followers_url": "https://api.github.com/users/nesaro/followers", "following_url": "https://api.github.com/users/nesaro/following{/other_user}", "gists_url": "https://api.github.com/users/nesaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/nesaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nesaro/subscriptions", "organizations_url": "https://api.github.com/users/nesaro/orgs", "repos_url": "https://api.github.com/users/nesaro/repos", "events_url": "https://api.github.com/users/nesaro/events{/privacy}", "received_events_url": "https://api.github.com/users/nesaro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-11-16T10:38:04Z", "updated_at": "2016-12-07T10:19:18Z", "closed_at": "2016-12-07T10:19:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "One of our servers is generating thousands of temporary folders and files. After inspecting the code, it seems that ModuleLoader is not removing the files after reading them.\n\n``` python\n    def _load(self, base, filename):\n        imp.acquire_lock()\n        try:\n            module = sys.modules.get(base)\n            if module is None:\n                f = open(filename, 'rb')\n                try:\n                    assert base not in sys.modules\n                    module = imp.load_source(base, filename, f)\n                finally:\n                    f.close()\n                    os.remove(filename)  #XXX This would remove the temporary file\n        finally:\n            imp.release_lock()\n\n        return module.__dict__\n```\n\nIs this a good fix? Thanks\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/207", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/207/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/207/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/207/events", "html_url": "https://github.com/malthe/chameleon/issues/207", "id": 115246265, "node_id": "MDU6SXNzdWUxMTUyNDYyNjU=", "number": 207, "title": "documentation not updated?", "user": {"login": "gforcada", "id": 1155680, "node_id": "MDQ6VXNlcjExNTU2ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1155680?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gforcada", "html_url": "https://github.com/gforcada", "followers_url": "https://api.github.com/users/gforcada/followers", "following_url": "https://api.github.com/users/gforcada/following{/other_user}", "gists_url": "https://api.github.com/users/gforcada/gists{/gist_id}", "starred_url": "https://api.github.com/users/gforcada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gforcada/subscriptions", "organizations_url": "https://api.github.com/users/gforcada/orgs", "repos_url": "https://api.github.com/users/gforcada/repos", "events_url": "https://api.github.com/users/gforcada/events{/privacy}", "received_events_url": "https://api.github.com/users/gforcada/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-11-05T09:48:22Z", "updated_at": "2015-11-05T14:14:53Z", "closed_at": "2015-11-05T10:40:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@malthe I saw that you made a new release that contains my pull request about `i18n:ignore` but the documentation at http://chameleon.readthedocs.org/en/latest/reference.html seems to not have been updated...\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/206", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/206/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/206/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/206/events", "html_url": "https://github.com/malthe/chameleon/issues/206", "id": 113688160, "node_id": "MDU6SXNzdWUxMTM2ODgxNjA=", "number": 206, "title": "Python 3.5 compatibility", "user": {"login": "warsaw", "id": 210184, "node_id": "MDQ6VXNlcjIxMDE4NA==", "avatar_url": "https://avatars0.githubusercontent.com/u/210184?v=4", "gravatar_id": "", "url": "https://api.github.com/users/warsaw", "html_url": "https://github.com/warsaw", "followers_url": "https://api.github.com/users/warsaw/followers", "following_url": "https://api.github.com/users/warsaw/following{/other_user}", "gists_url": "https://api.github.com/users/warsaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/warsaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/warsaw/subscriptions", "organizations_url": "https://api.github.com/users/warsaw/orgs", "repos_url": "https://api.github.com/users/warsaw/repos", "events_url": "https://api.github.com/users/warsaw/events{/privacy}", "received_events_url": "https://api.github.com/users/warsaw/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-10-27T21:01:20Z", "updated_at": "2015-10-28T14:47:59Z", "closed_at": "2015-10-28T06:55:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Chameleon appears to be incompatible with Python 3.5:\n\n```\n$ tox -e py35\nGLOB sdist-make: /home/barry/projects/debian/chameleon/upstream/setup.py\npy35 create: /home/barry/projects/debian/chameleon/upstream/.tox/py35\npy35 inst: /home/barry/projects/debian/chameleon/upstream/.tox/dist/Chameleon-2.23.dev0.zip\npy35 installed: Chameleon==2.23.dev0\npy35 runtests: PYTHONHASHSEED='3917267219'\npy35 runtests: commands[0] | python setup.py test -q\n/home/barry/projects/debian/chameleon/upstream/.tox/py35/lib/python3.5/site-packages/setuptools/dist.py:285: UserWarning: Normalizing '2.23-dev' to '2.23.dev0'\n  normalized_version,\nrunning test\nrunning egg_info\nwriting top-level names to src/Chameleon.egg-info/top_level.txt\nwriting src/Chameleon.egg-info/PKG-INFO\nwriting dependency_links to src/Chameleon.egg-info/dependency_links.txt\nreading manifest file 'src/Chameleon.egg-info/SOURCES.txt'\nreading manifest template 'MANIFEST.in'\nwriting manifest file 'src/Chameleon.egg-info/SOURCES.txt'\nrunning build_ext\nTraceback (most recent call last):\n  File \"setup.py\", line 82, in <module>\n    'benchmark': Benchmark,\n  File \"/usr/lib/python3.5/distutils/core.py\", line 148, in setup\n    dist.run_commands()\n  File \"/usr/lib/python3.5/distutils/dist.py\", line 955, in run_commands\n    self.run_command(cmd)\n  File \"/usr/lib/python3.5/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/home/barry/projects/debian/chameleon/upstream/.tox/py35/lib/python3.5/site-packages/setuptools/command/test.py\", line 146, in run\n    self.with_project_on_sys_path(self.run_tests)\n  File \"/home/barry/projects/debian/chameleon/upstream/.tox/py35/lib/python3.5/site-packages/setuptools/command/test.py\", line 127, in with_project_on_sys_path\n    func()\n  File \"/home/barry/projects/debian/chameleon/upstream/.tox/py35/lib/python3.5/site-packages/setuptools/command/test.py\", line 167, in run_tests\n    testRunner=self._resolve_as_ep(self.test_runner),\n  File \"/usr/lib/python3.5/unittest/main.py\", line 93, in __init__\n    self.parseArgs(argv)\n  File \"/usr/lib/python3.5/unittest/main.py\", line 140, in parseArgs\n    self.createTests()\n  File \"/usr/lib/python3.5/unittest/main.py\", line 147, in createTests\n    self.module)\n  File \"/usr/lib/python3.5/unittest/loader.py\", line 219, in loadTestsFromNames\n    suites = [self.loadTestsFromName(name, module) for name in names]\n  File \"/usr/lib/python3.5/unittest/loader.py\", line 219, in <listcomp>\n    suites = [self.loadTestsFromName(name, module) for name in names]\n  File \"/usr/lib/python3.5/unittest/loader.py\", line 190, in loadTestsFromName\n    return self.loadTestsFromModule(obj)\n  File \"/home/barry/projects/debian/chameleon/upstream/.tox/py35/lib/python3.5/site-packages/setuptools/command/test.py\", line 36, in loadTestsFromModule\n    tests.append(self.loadTestsFromName(submodule))\n  File \"/usr/lib/python3.5/unittest/loader.py\", line 190, in loadTestsFromName\n    return self.loadTestsFromModule(obj)\n  File \"/home/barry/projects/debian/chameleon/upstream/.tox/py35/lib/python3.5/site-packages/setuptools/command/test.py\", line 22, in loadTestsFromModule\n    tests.append(TestLoader.loadTestsFromModule(self, module))\n  File \"/usr/lib/python3.5/unittest/loader.py\", line 123, in loadTestsFromModule\n    tests.append(self.loadTestsFromTestCase(obj))\n  File \"/usr/lib/python3.5/unittest/loader.py\", line 92, in loadTestsFromTestCase\n    loaded_suite = self.suiteClass(map(testCaseClass, testCaseNames))\n  File \"/usr/lib/python3.5/unittest/suite.py\", line 24, in __init__\n    self.addTests(tests)\n  File \"/usr/lib/python3.5/unittest/suite.py\", line 57, in addTests\n    for test in tests:\n  File \"/home/barry/projects/debian/chameleon/upstream/src/chameleon/tests/test_doctests.py\", line 10, in __new__\n    return getattr(self, test)()\n  File \"/home/barry/projects/debian/chameleon/upstream/src/chameleon/tests/test_doctests.py\", line 40, in test_compiler\n    compiler, optionflags=OPTIONFLAGS)\n  File \"/usr/lib/python3.5/doctest.py\", line 2365, in DocTestSuite\n    tests = test_finder.find(module, globs=globs, extraglobs=extraglobs)\n  File \"/usr/lib/python3.5/doctest.py\", line 923, in find\n    self._find(tests, obj, name, module, source_lines, globs, {})\n  File \"/usr/lib/python3.5/doctest.py\", line 982, in _find\n    if ((inspect.isroutine(inspect.unwrap(val))\n  File \"/usr/lib/python3.5/inspect.py\", line 471, in unwrap\n    while _is_wrapper(func):\n  File \"/usr/lib/python3.5/inspect.py\", line 465, in _is_wrapper\n    return hasattr(f, '__wrapped__')\n  File \"/home/barry/projects/debian/chameleon/upstream/src/chameleon/utils.py\", line 25, in __getattr__\n    return _ast.__dict__.get(name) or getattr(_ast, self.aliases[name])\nKeyError: '__wrapped__'\nERROR: InvocationError: '/home/barry/projects/debian/chameleon/upstream/.tox/py35/bin/python setup.py test -q'\n___________________________________ summary ___________________________________\nERROR:   py35: commands failed\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/204", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/204/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/204/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/204/events", "html_url": "https://github.com/malthe/chameleon/issues/204", "id": 89976386, "node_id": "MDU6SXNzdWU4OTk3NjM4Ng==", "number": 204, "title": "python 3.5b2 EOF error in astutil.py", "user": {"login": "bkc", "id": 119869, "node_id": "MDQ6VXNlcjExOTg2OQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/119869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkc", "html_url": "https://github.com/bkc", "followers_url": "https://api.github.com/users/bkc/followers", "following_url": "https://api.github.com/users/bkc/following{/other_user}", "gists_url": "https://api.github.com/users/bkc/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkc/subscriptions", "organizations_url": "https://api.github.com/users/bkc/orgs", "repos_url": "https://api.github.com/users/bkc/repos", "events_url": "https://api.github.com/users/bkc/events{/privacy}", "received_events_url": "https://api.github.com/users/bkc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-06-21T23:55:38Z", "updated_at": "2015-06-22T09:41:45Z", "closed_at": "2015-06-22T09:41:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've setup a basic pyramid server using pcreate -t alchemy   this downloaded waitress and chameleon\n\nafter fixing a one-line issue in waitress, testing the sample app generates the following partial traceback\n\n```\n File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/pyramid/renderers.py\", line 447, in render\n    result = renderer(value, system_values)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/pyramid_chameleon-0.3-py3.5.egg/pyramid_chameleon/zpt.py\", line 47, in __call__\n    result = self.template(**system)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/template.py\", line 124, in __call__\n    return self.render(**kwargs)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/zpt/template.py\", line 258, in render\n    return super(PageTemplate, self).render(**vars)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/template.py\", line 168, in render\n    self.cook_check()\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/template.py\", line 294, in cook_check\n    self.cook(body)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/pyramid_chameleon-0.3-py3.5.egg/pyramid_chameleon/zpt.py\", line 14, in cook\n    PageTemplateFile.cook(self, body)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/template.py\", line 146, in cook\n    program = self._cook(body, digest, names)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/template.py\", line 219, in _cook\n    source = self._make(body, builtins)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/template.py\", line 252, in _make\n    return self._compile(module, builtins)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/template.py\", line 246, in _compile\n    compiler = Compiler(self.engine, program, builtins, strict=self.strict)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/compiler.py\", line 925, in __init__\n    module.body += self.visit(node)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/compiler.py\", line 941, in visit\n    iterator = visitor(node)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/compiler.py\", line 979, in visit_Module\n    program = self.visit(node.program)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/compiler.py\", line 941, in visit\n    iterator = visitor(node)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/compiler.py\", line 998, in visit_MacroProgram\n    stmts = self.visit(macro)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/compiler.py\", line 942, in visit\n    return list(iterator)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/compiler.py\", line 1024, in visit_Macro\n    body += emit_func_convert(\"__convert\")\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/codegen.py\", line 81, in wrapper\n    expr = parse(source, mode=mode)\n  File \"/home/bkc/Python_Environments/D2DAdmin-py3.5/lib/python3.5/site-packages/Chameleon-2.22-py3.5.egg/chameleon/astutil.py\", line 48, in parse\n    return compile(source, '', mode, ast.PyCF_ONLY_AST)\n  File \"<string>\", line 5\n    def func(target):\n                    ^\nSyntaxError: unexpected EOF while parsing\n\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/201", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/201/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/201/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/201/events", "html_url": "https://github.com/malthe/chameleon/issues/201", "id": 64973783, "node_id": "MDU6SXNzdWU2NDk3Mzc4Mw==", "number": 201, "title": "Expressions types containing numbers?", "user": {"login": "tflorac", "id": 326159, "node_id": "MDQ6VXNlcjMyNjE1OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/326159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tflorac", "html_url": "https://github.com/tflorac", "followers_url": "https://api.github.com/users/tflorac/followers", "following_url": "https://api.github.com/users/tflorac/following{/other_user}", "gists_url": "https://api.github.com/users/tflorac/gists{/gist_id}", "starred_url": "https://api.github.com/users/tflorac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tflorac/subscriptions", "organizations_url": "https://api.github.com/users/tflorac/orgs", "repos_url": "https://api.github.com/users/tflorac/repos", "events_url": "https://api.github.com/users/tflorac/events{/privacy}", "received_events_url": "https://api.github.com/users/tflorac/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-03-28T18:34:15Z", "updated_at": "2015-03-28T20:17:07Z", "closed_at": "2015-03-28T20:17:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\nI wanted to create a custom\u00a0expression type called \"i18n\" to handle internalization through a custom package.\nAfter debugging a while, I noticed that \"match_prefix\" in \"tales.py\" doesn't recognize expressions containing numbers.\nIs it a real choice?\n\nThanks,\nThierry\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/200", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/200/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/200/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/200/events", "html_url": "https://github.com/malthe/chameleon/issues/200", "id": 63484623, "node_id": "MDU6SXNzdWU2MzQ4NDYyMw==", "number": 200, "title": "Tag value need to be translated", "user": {"login": "maxvi", "id": 6153540, "node_id": "MDQ6VXNlcjYxNTM1NDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/6153540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxvi", "html_url": "https://github.com/maxvi", "followers_url": "https://api.github.com/users/maxvi/followers", "following_url": "https://api.github.com/users/maxvi/following{/other_user}", "gists_url": "https://api.github.com/users/maxvi/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxvi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxvi/subscriptions", "organizations_url": "https://api.github.com/users/maxvi/orgs", "repos_url": "https://api.github.com/users/maxvi/repos", "events_url": "https://api.github.com/users/maxvi/events{/privacy}", "received_events_url": "https://api.github.com/users/maxvi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2015-03-22T03:32:51Z", "updated_at": "2016-12-06T14:34:43Z", "closed_at": "2016-12-06T14:34:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "How can I translate tag value in chameleon template?\n\nSomething like this\n\n``` html\n<meta name=\"keywords\" content=\"need to be translated\"/>\n```\n\nor this\n\n``` html\n<input type=\"submit\" value=\"need to be translated\"/>\n```\n\nI use meta as slot\n\n``` html\n<meta metal:fill-slot=\"description\" name=\"description\" content=\"need to be translated\"/>\n```\n\nThanks!\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/198", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/198/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/198/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/198/events", "html_url": "https://github.com/malthe/chameleon/issues/198", "id": 58560143, "node_id": "MDU6SXNzdWU1ODU2MDE0Mw==", "number": 198, "title": "i18n:target", "user": {"login": "voxspox", "id": 1503565, "node_id": "MDQ6VXNlcjE1MDM1NjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1503565?v=4", "gravatar_id": "", "url": "https://api.github.com/users/voxspox", "html_url": "https://github.com/voxspox", "followers_url": "https://api.github.com/users/voxspox/followers", "following_url": "https://api.github.com/users/voxspox/following{/other_user}", "gists_url": "https://api.github.com/users/voxspox/gists{/gist_id}", "starred_url": "https://api.github.com/users/voxspox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/voxspox/subscriptions", "organizations_url": "https://api.github.com/users/voxspox/orgs", "repos_url": "https://api.github.com/users/voxspox/repos", "events_url": "https://api.github.com/users/voxspox/events{/privacy}", "received_events_url": "https://api.github.com/users/voxspox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-02-23T09:10:04Z", "updated_at": "2016-12-06T14:29:42Z", "closed_at": "2016-12-06T14:29:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nI use chameleon as template engine with pyramid 1.4 in a multi-language application.\nI want to use i18n:target to always switch to a certain language in  a certain part of the template.\nUsing set_locale_negotiator() of pyramid.Configurator works to switch the global locale, thus everything seems to be set-up right.\nBut when I use i18n:target in the template nothing happens. Even not for 'default' or 'nothing'.\n\nknut\n\npyramid bug tracker: https://github.com/Pylons/pyramid/issues/1590\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/197", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/197/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/197/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/197/events", "html_url": "https://github.com/malthe/chameleon/issues/197", "id": 58402693, "node_id": "MDU6SXNzdWU1ODQwMjY5Mw==", "number": 197, "title": "[RFE] Support HTML5 data- attributes syntax", "user": {"login": "yet-another-radek", "id": 7268060, "node_id": "MDQ6VXNlcjcyNjgwNjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/7268060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yet-another-radek", "html_url": "https://github.com/yet-another-radek", "followers_url": "https://api.github.com/users/yet-another-radek/followers", "following_url": "https://api.github.com/users/yet-another-radek/following{/other_user}", "gists_url": "https://api.github.com/users/yet-another-radek/gists{/gist_id}", "starred_url": "https://api.github.com/users/yet-another-radek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yet-another-radek/subscriptions", "organizations_url": "https://api.github.com/users/yet-another-radek/orgs", "repos_url": "https://api.github.com/users/yet-another-radek/repos", "events_url": "https://api.github.com/users/yet-another-radek/events{/privacy}", "received_events_url": "https://api.github.com/users/yet-another-radek/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-02-20T19:59:09Z", "updated_at": "2015-10-26T16:18:07Z", "closed_at": "2015-10-26T16:18:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "HTML5 supports usage of [custom attributes](https://html.spec.whatwg.org/multipage/dom.html#custom-data-attribute). This way we could be able to produce Chameleon templates that are valid HTML5 documents. It would be nice if Chameleon could have TAL attributes renamed or have aliases compatible with HTML5 specification (e.g. ``data-tal-repeat=\"item sequence\"`). E.g. [Google+](https://developers.google.com/+/web/+1button/) and [Facebook](https://developers.facebook.com/docs/plugins/like-button) uses these attributes.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/196", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/196/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/196/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/196/events", "html_url": "https://github.com/malthe/chameleon/issues/196", "id": 57089353, "node_id": "MDU6SXNzdWU1NzA4OTM1Mw==", "number": 196, "title": "NameError: name '__cache_***' exception when using metal:define-macro in a template", "user": {"login": "mattpepin", "id": 582959, "node_id": "MDQ6VXNlcjU4Mjk1OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/582959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattpepin", "html_url": "https://github.com/mattpepin", "followers_url": "https://api.github.com/users/mattpepin/followers", "following_url": "https://api.github.com/users/mattpepin/following{/other_user}", "gists_url": "https://api.github.com/users/mattpepin/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattpepin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattpepin/subscriptions", "organizations_url": "https://api.github.com/users/mattpepin/orgs", "repos_url": "https://api.github.com/users/mattpepin/repos", "events_url": "https://api.github.com/users/mattpepin/events{/privacy}", "received_events_url": "https://api.github.com/users/mattpepin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-02-09T21:03:01Z", "updated_at": "2016-12-06T14:32:31Z", "closed_at": "2016-12-06T14:32:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nThis is a repost of https://github.com/Pylons/pyramid/issues/1572. I was told it belonged here.\n\nI'm running into a weird issue with Pyramid 1.5.2. When I try to use variables inside a macro, I get a NameError exception. Here's how to reproduce.\n\n1 - Create a virtualenv and install pyramid\n2 - pcreate -t starter test\n3 - Edit views.py with the following:\n\n``` python\nfrom pyramid.view import view_config\nfrom pyramid.renderers import get_renderer\n@view_config(route_name='home', renderer='templates/mytemplate2.pt')\ndef my_view(request):\nbase = get_renderer('templates/mytemplate.pt').implementation().macros['base']\nreturn {'project': 'test', 'base': base}\n```\n\n4 - Add metal:define-macro=\"base\" to head tag and add metal:define-slot=\"content\" to the body tag in mytemplate.pt\n5 - Create mytemplate2.pt with the following content:\n\n``` xml\n<html metal:use-macro=\"base\">\n<body metal:fill-slot=\"content\" metal:define-macro=\"othermacro\">\n<div tal:content=\"project\"></div>\n</body>\n</html>\n```\n\n6 - python setup.py develop\n7 - pserve --reload development.ini\n8 - Observe the exception\n\nIf you remove the metal:define-macro in mytemplate2.pt, it works fine. Here's the full stacktrace:\n\nTraceback (most recent call last):\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/pyramid_debugtoolbar-2.3-py3.4.egg/pyramid_debugtoolbar/toolbar.py\", line 178, in toolbar_tween\n    response = _handler(request)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/pyramid_debugtoolbar-2.3-py3.4.egg/pyramid_debugtoolbar/panels/performance.py\", line 57, in resource_timer_handler\n    result = handler(request)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/pyramid/tweens.py\", line 21, in excview_tween\n    response = handler(request)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/pyramid/router.py\", line 163, in handle_request\n    response = view_callable(context, request)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/pyramid/config/views.py\", line 377, in rendered_view\n    context)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/pyramid/renderers.py\", line 418, in render_view\n    return self.render_to_response(response, system, request=request)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/pyramid/renderers.py\", line 441, in render_to_response\n    result = self.render(value, system_values, request=request)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/pyramid/renderers.py\", line 437, in render\n    result = renderer(value, system_values)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/pyramid_chameleon-0.3-py3.4.egg/pyramid_chameleon/zpt.py\", line 47, in __call__\n    result = self.template(**system)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/Chameleon-2.22-py3.4.egg/chameleon/template.py\", line 124, in **call**\n    return self.render(**kwargs)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/Chameleon-2.22-py3.4.egg/chameleon/zpt/template.py\", line 258, in render\n    return super(PageTemplate, self).render(**vars)\n  File \"/home/matt/temp/test/lib/python3.4/site-packages/Chameleon-2.22-py3.4.egg/chameleon/template.py\", line 171, in render\n    self._render(stream, econtext, rcontext)\n  File \"mytemplate2_9904d3b9fef68714501148c84218e420.py\", line 237, in render\n  File \"mytemplate_0eb9088fdc4773afff3c15d6943f8401.py\", line 736, in render_base\n  File \"mytemplate2_9904d3b9fef68714501148c84218e420.py\", line 215, in __fill_content\nNameError: name '__cache_139911775700696' is not defined\n\nEDIT: Sorry I had to tweak the HTML in mytemplate2.pt since it was filtered out.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/194", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/194/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/194/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/194/events", "html_url": "https://github.com/malthe/chameleon/issues/194", "id": 56289400, "node_id": "MDU6SXNzdWU1NjI4OTQwMA==", "number": 194, "title": "Please document exceptions that render() may raise", "user": {"login": "yet-another-radek", "id": 7268060, "node_id": "MDQ6VXNlcjcyNjgwNjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/7268060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yet-another-radek", "html_url": "https://github.com/yet-another-radek", "followers_url": "https://api.github.com/users/yet-another-radek/followers", "following_url": "https://api.github.com/users/yet-another-radek/following{/other_user}", "gists_url": "https://api.github.com/users/yet-another-radek/gists{/gist_id}", "starred_url": "https://api.github.com/users/yet-another-radek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yet-another-radek/subscriptions", "organizations_url": "https://api.github.com/users/yet-another-radek/orgs", "repos_url": "https://api.github.com/users/yet-another-radek/repos", "events_url": "https://api.github.com/users/yet-another-radek/events{/privacy}", "received_events_url": "https://api.github.com/users/yet-another-radek/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-02-02T20:35:35Z", "updated_at": "2015-02-06T09:04:34Z", "closed_at": "2015-02-06T09:04:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Please mention in the documentation the exceptions that can be raised during page template rendering.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/191", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/191/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/191/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/191/events", "html_url": "https://github.com/malthe/chameleon/issues/191", "id": 54063800, "node_id": "MDU6SXNzdWU1NDA2MzgwMA==", "number": 191, "title": "load expression does not respect full search_path", "user": {"login": "faassen", "id": 327472, "node_id": "MDQ6VXNlcjMyNzQ3Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/327472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faassen", "html_url": "https://github.com/faassen", "followers_url": "https://api.github.com/users/faassen/followers", "following_url": "https://api.github.com/users/faassen/following{/other_user}", "gists_url": "https://api.github.com/users/faassen/gists{/gist_id}", "starred_url": "https://api.github.com/users/faassen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faassen/subscriptions", "organizations_url": "https://api.github.com/users/faassen/orgs", "repos_url": "https://api.github.com/users/faassen/repos", "events_url": "https://api.github.com/users/faassen/events{/privacy}", "received_events_url": "https://api.github.com/users/faassen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-01-12T15:09:13Z", "updated_at": "2015-01-12T15:58:16Z", "closed_at": "2015-01-12T15:58:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "As far as I understand, search_path in Chameleon exists to give it a list of directories from which to attempt to load templates, items earlier in the list overriding later ones. \n\nThis works as expected with PageTemplateLoader, but if a loaded template then loads something using the load expression, it only gets the path from the template, not the full search_path.\n\nThis means that if you load a macro with a load expression, it isn't possible to override which macro gets loaded by adding another directory to the search path.\n\nShouldn't line 85 of `chameleon/loader.py` read like this?\n\n```\n                return cls(self.search_path, **self.kwargs)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/190", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/190/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/190/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/190/events", "html_url": "https://github.com/malthe/chameleon/issues/190", "id": 53750653, "node_id": "MDU6SXNzdWU1Mzc1MDY1Mw==", "number": 190, "title": "does the load expression reuse the loader cache?", "user": {"login": "faassen", "id": 327472, "node_id": "MDQ6VXNlcjMyNzQ3Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/327472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faassen", "html_url": "https://github.com/faassen", "followers_url": "https://api.github.com/users/faassen/followers", "following_url": "https://api.github.com/users/faassen/following{/other_user}", "gists_url": "https://api.github.com/users/faassen/gists{/gist_id}", "starred_url": "https://api.github.com/users/faassen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faassen/subscriptions", "organizations_url": "https://api.github.com/users/faassen/orgs", "repos_url": "https://api.github.com/users/faassen/repos", "events_url": "https://api.github.com/users/faassen/events{/privacy}", "received_events_url": "https://api.github.com/users/faassen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2015-01-08T13:34:02Z", "updated_at": "2016-12-05T09:40:29Z", "closed_at": "2016-12-05T09:40:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am not sure this is an issue -- I'm just trying to understand the code. Here goes:\n\nThe load expression uses `__loader`, which is initialized as `_loader` in the init of PageTemplateFile. This is always created as an instance of the loader_class.\n\nThe loader in `chameleon.loader` keeps a cache of templates in `self.registry` through a decorator.\n\nIf I create a page template loader and load a page template file, and then load it again, it'll come from the cache. But that page template file creates its _own_ loader again, so that when the load expression fires it will set it up in a _new_ cache. This means that if page template a loads up m, and page template b then loads up m again, b won't benefit from the cache of a -- it'll load m again.\n\nI run into all this because I'm trying to create a custom loader, which I'd like to propagate into the templates it loads, so that any load expression in that template _also_ uses that loader. But custom loaders don't propagate to load expressions, do they? Instead I have to initialize it with its own class as a keyword argument, I think.\n\nAgain, I may get this all wrong -- I'm trying to read the code and I may be misunderstanding something. But I thought it was worth reporting.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/189", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/189/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/189/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/189/events", "html_url": "https://github.com/malthe/chameleon/issues/189", "id": 53748418, "node_id": "MDU6SXNzdWU1Mzc0ODQxOA==", "number": 189, "title": "zpt.loader.TemplateLoader versus  loader.TemplateLoader", "user": {"login": "faassen", "id": 327472, "node_id": "MDQ6VXNlcjMyNzQ3Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/327472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faassen", "html_url": "https://github.com/faassen", "followers_url": "https://api.github.com/users/faassen/followers", "following_url": "https://api.github.com/users/faassen/following{/other_user}", "gists_url": "https://api.github.com/users/faassen/gists{/gist_id}", "starred_url": "https://api.github.com/users/faassen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faassen/subscriptions", "organizations_url": "https://api.github.com/users/faassen/orgs", "repos_url": "https://api.github.com/users/faassen/repos", "events_url": "https://api.github.com/users/faassen/events{/privacy}", "received_events_url": "https://api.github.com/users/faassen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-01-08T13:06:53Z", "updated_at": "2016-12-05T09:42:53Z", "closed_at": "2016-12-05T09:42:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to understand something in the code. In chameleon.zpt.template there is this import:\n\n```\nfrom ..loader import TemplateLoader\n```\n\nso this loads the loader from `chameleon.loader`, not `chameleon.zpt.loader`, and subsequently it is used as the default loader class for `PageTemplateFile`.\n\nBut `chameleon.zpt.loader` actually subclasses the core `TemplateLoader`. This is the loader exposed in the public API as `PageTemplateLoader`. But it appears it's not used internally.\n\nIs that intentional? It's rather confusing why it may be so.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/188", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/188/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/188/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/188/events", "html_url": "https://github.com/malthe/chameleon/issues/188", "id": 53623826, "node_id": "MDU6SXNzdWU1MzYyMzgyNg==", "number": 188, "title": "auto_reload configuration argument not mentioned in API docs", "user": {"login": "faassen", "id": 327472, "node_id": "MDQ6VXNlcjMyNzQ3Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/327472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faassen", "html_url": "https://github.com/faassen", "followers_url": "https://api.github.com/users/faassen/followers", "following_url": "https://api.github.com/users/faassen/following{/other_user}", "gists_url": "https://api.github.com/users/faassen/gists{/gist_id}", "starred_url": "https://api.github.com/users/faassen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faassen/subscriptions", "organizations_url": "https://api.github.com/users/faassen/orgs", "repos_url": "https://api.github.com/users/faassen/repos", "events_url": "https://api.github.com/users/faassen/events{/privacy}", "received_events_url": "https://api.github.com/users/faassen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-01-07T11:39:55Z", "updated_at": "2016-12-05T09:47:30Z", "closed_at": "2016-12-05T09:47:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "The auto_reload configuration argument does not appear to be listed in the API docs. Is this not intended to be part of the public API? (and if not, why not?)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/186", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/186/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/186/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/186/events", "html_url": "https://github.com/malthe/chameleon/issues/186", "id": 53469675, "node_id": "MDU6SXNzdWU1MzQ2OTY3NQ==", "number": 186, "title": "Logger.warn is deprecated, shows DeprecationWarning in py3; config.py warning always shown", "user": {"login": "wfdd", "id": 8489551, "node_id": "MDQ6VXNlcjg0ODk1NTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/8489551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wfdd", "html_url": "https://github.com/wfdd", "followers_url": "https://api.github.com/users/wfdd/followers", "following_url": "https://api.github.com/users/wfdd/following{/other_user}", "gists_url": "https://api.github.com/users/wfdd/gists{/gist_id}", "starred_url": "https://api.github.com/users/wfdd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wfdd/subscriptions", "organizations_url": "https://api.github.com/users/wfdd/orgs", "repos_url": "https://api.github.com/users/wfdd/repos", "events_url": "https://api.github.com/users/wfdd/events{/privacy}", "received_events_url": "https://api.github.com/users/wfdd/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-01-06T01:20:09Z", "updated_at": "2015-01-07T02:02:12Z", "closed_at": "2015-01-06T09:38:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "`chameleon/config.py:43: DeprecationWarning: The 'warn' method is deprecated, use 'warning' instead\n  log.warn(\"unknown environment variable set: \\\"%s\\\".\" % key)`\n\nThis also appears to be used in a few other places.\n\nAlso, at some point config.py was modified so as to not pop from environ, meaning the warning on l43 will always be printed when there's a Chameleon setting.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/183", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/183/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/183/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/183/events", "html_url": "https://github.com/malthe/chameleon/issues/183", "id": 47610101, "node_id": "MDU6SXNzdWU0NzYxMDEwMQ==", "number": 183, "title": "CHAMELEON_DEBUG usage results in warning", "user": {"login": "wichert", "id": 199657, "node_id": "MDQ6VXNlcjE5OTY1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/199657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wichert", "html_url": "https://github.com/wichert", "followers_url": "https://api.github.com/users/wichert/followers", "following_url": "https://api.github.com/users/wichert/following{/other_user}", "gists_url": "https://api.github.com/users/wichert/gists{/gist_id}", "starred_url": "https://api.github.com/users/wichert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wichert/subscriptions", "organizations_url": "https://api.github.com/users/wichert/orgs", "repos_url": "https://api.github.com/users/wichert/repos", "events_url": "https://api.github.com/users/wichert/events{/privacy}", "received_events_url": "https://api.github.com/users/wichert/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-11-03T16:02:42Z", "updated_at": "2016-12-06T14:35:05Z", "closed_at": "2016-12-06T14:35:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Trying to start a Pyramid app with CHAMELEON_DEBUG set (as mentioned in [the documentation](https://chameleon.readthedocs.org/en/latest/configuration.html#development)) results in a warning:\n\n```\n$ CHAMELEON_DEBUG=1 bin/pserve site.ini \n17:01:06 WARNI [chameleon.config] unknown environment variable set: \"CHAMELEON_DEBUG\".\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/181", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/181/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/181/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/181/events", "html_url": "https://github.com/malthe/chameleon/issues/181", "id": 44788013, "node_id": "MDU6SXNzdWU0NDc4ODAxMw==", "number": 181, "title": "Add compatibility option to escape expressions with \"$$\"", "user": {"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}, {"id": 133237, "node_id": "MDU6TGFiZWwxMzMyMzc=", "url": "https://api.github.com/repos/malthe/chameleon/labels/five.pt", "name": "five.pt", "color": "0b02e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-10-03T09:58:10Z", "updated_at": "2016-12-06T15:08:56Z", "closed_at": "2016-12-06T15:08:56Z", "author_association": "OWNER", "active_lock_reason": null, "body": "", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/179", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/179/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/179/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/179/events", "html_url": "https://github.com/malthe/chameleon/issues/179", "id": 41048060, "node_id": "MDU6SXNzdWU0MTA0ODA2MA==", "number": 179, "title": "implement repeat.item.parity according to interface ITALESIterator", "user": {"login": "voxspox", "id": 1503565, "node_id": "MDQ6VXNlcjE1MDM1NjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1503565?v=4", "gravatar_id": "", "url": "https://api.github.com/users/voxspox", "html_url": "https://github.com/voxspox", "followers_url": "https://api.github.com/users/voxspox/followers", "following_url": "https://api.github.com/users/voxspox/following{/other_user}", "gists_url": "https://api.github.com/users/voxspox/gists{/gist_id}", "starred_url": "https://api.github.com/users/voxspox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/voxspox/subscriptions", "organizations_url": "https://api.github.com/users/voxspox/orgs", "repos_url": "https://api.github.com/users/voxspox/repos", "events_url": "https://api.github.com/users/voxspox/events{/privacy}", "received_events_url": "https://api.github.com/users/voxspox/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-08-25T10:00:26Z", "updated_at": "2014-09-02T09:28:34Z", "closed_at": "2014-09-01T12:31:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nthe interface ITALESIterator defines parity() which should return 'odd' or 'even', useful for table rows.\n\nThis function is not implemented, but should be very easy.\n\nknut\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/176", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/176/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/176/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/176/events", "html_url": "https://github.com/malthe/chameleon/issues/176", "id": 37741206, "node_id": "MDU6SXNzdWUzNzc0MTIwNg==", "number": 176, "title": "'for' in tal:content parsed as keyword", "user": {"login": "pepelepoo", "id": 6510171, "node_id": "MDQ6VXNlcjY1MTAxNzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6510171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pepelepoo", "html_url": "https://github.com/pepelepoo", "followers_url": "https://api.github.com/users/pepelepoo/followers", "following_url": "https://api.github.com/users/pepelepoo/following{/other_user}", "gists_url": "https://api.github.com/users/pepelepoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/pepelepoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pepelepoo/subscriptions", "organizations_url": "https://api.github.com/users/pepelepoo/orgs", "repos_url": "https://api.github.com/users/pepelepoo/repos", "events_url": "https://api.github.com/users/pepelepoo/events{/privacy}", "received_events_url": "https://api.github.com/users/pepelepoo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-07-13T13:25:38Z", "updated_at": "2014-07-14T00:34:52Z", "closed_at": "2014-07-13T13:37:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.4/site-packages/chameleon/tales.py\", line 251, in translate\n    value = self.parse(string)\n  File \"/usr/local/lib/python3.4/site-packages/chameleon/tales.py\", line 238, in parse\n    return parse(string, 'eval').body\n  File \"/usr/local/lib/python3.4/site-packages/chameleon/astutil.py\", line 48, in parse\n    return compile(source, '', mode, ast.PyCF_ONLY_AST)\n  File \"<string>\", line 1\n    vote.table.total.for\n                      ^\nSyntaxError: unexpected EOF while parsing\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/175", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/175/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/175/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/175/events", "html_url": "https://github.com/malthe/chameleon/issues/175", "id": 34719584, "node_id": "MDU6SXNzdWUzNDcxOTU4NA==", "number": 175, "title": "Documentation about tal:block and metal:block", "user": {"login": "theking-laptop", "id": 6876582, "node_id": "MDQ6VXNlcjY4NzY1ODI=", "avatar_url": "https://avatars0.githubusercontent.com/u/6876582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theking-laptop", "html_url": "https://github.com/theking-laptop", "followers_url": "https://api.github.com/users/theking-laptop/followers", "following_url": "https://api.github.com/users/theking-laptop/following{/other_user}", "gists_url": "https://api.github.com/users/theking-laptop/gists{/gist_id}", "starred_url": "https://api.github.com/users/theking-laptop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theking-laptop/subscriptions", "organizations_url": "https://api.github.com/users/theking-laptop/orgs", "repos_url": "https://api.github.com/users/theking-laptop/repos", "events_url": "https://api.github.com/users/theking-laptop/events{/privacy}", "received_events_url": "https://api.github.com/users/theking-laptop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 103857746, "node_id": "MDU6TGFiZWwxMDM4NTc3NDY=", "url": "https://api.github.com/repos/malthe/chameleon/labels/needsdoc", "name": "needsdoc", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2014-06-01T01:50:46Z", "updated_at": "2016-12-06T15:08:45Z", "closed_at": "2016-12-06T15:08:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "I knew about `tal:block` and `metal:block` and use them when I want to remove the tag element. It's very useful and easy to write code. But now I'm using `tal:omit-tag` instead, because they aren't documented official, so I don't know when they will be not supported.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/172", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/172/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/172/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/172/events", "html_url": "https://github.com/malthe/chameleon/issues/172", "id": 32190372, "node_id": "MDU6SXNzdWUzMjE5MDM3Mg==", "number": 172, "title": "Repeat breaks if repeating element is None", "user": {"login": "eleddy", "id": 310133, "node_id": "MDQ6VXNlcjMxMDEzMw==", "avatar_url": "https://avatars1.githubusercontent.com/u/310133?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eleddy", "html_url": "https://github.com/eleddy", "followers_url": "https://api.github.com/users/eleddy/followers", "following_url": "https://api.github.com/users/eleddy/following{/other_user}", "gists_url": "https://api.github.com/users/eleddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/eleddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eleddy/subscriptions", "organizations_url": "https://api.github.com/users/eleddy/orgs", "repos_url": "https://api.github.com/users/eleddy/repos", "events_url": "https://api.github.com/users/eleddy/events{/privacy}", "received_events_url": "https://api.github.com/users/eleddy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-04-24T22:03:11Z", "updated_at": "2014-05-06T17:52:18Z", "closed_at": "2014-05-05T21:38:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "In tal, if the repeating element is \"None\", historically the item just breaks the loop and doesn't err. Myself and plenty of developers out there rely on this behavior. For example with  tal:repeat=\"something     a_variable_equal_to_None\" not only does it break, but the error is cryptic and you have no way to debug. example below. This seems to be a result of #110. \n\n```\n  Module 1ee7d97afbda865f9699a1dd29bbc18c.py, line 2138, in render\n  Module 7d57b645df1f597e936d8f4e7de8c9f7.py, line 1317, in render_master\n  Module 7d57b645df1f597e936d8f4e7de8c9f7.py, line 609, in render_content\n  Module 1ee7d97afbda865f9699a1dd29bbc18c.py, line 1914, in __fill_main\n  Module chameleon.tal, line 462, in __call__\nTypeError: 'NoneType' object is not iterable\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/171", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/171/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/171/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/171/events", "html_url": "https://github.com/malthe/chameleon/issues/171", "id": 30504201, "node_id": "MDU6SXNzdWUzMDUwNDIwMQ==", "number": 171, "title": "embedded Handlebars.js template", "user": {"login": "silenius", "id": 1225348, "node_id": "MDQ6VXNlcjEyMjUzNDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1225348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/silenius", "html_url": "https://github.com/silenius", "followers_url": "https://api.github.com/users/silenius/followers", "following_url": "https://api.github.com/users/silenius/following{/other_user}", "gists_url": "https://api.github.com/users/silenius/gists{/gist_id}", "starred_url": "https://api.github.com/users/silenius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/silenius/subscriptions", "organizations_url": "https://api.github.com/users/silenius/orgs", "repos_url": "https://api.github.com/users/silenius/repos", "events_url": "https://api.github.com/users/silenius/events{/privacy}", "received_events_url": "https://api.github.com/users/silenius/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-03-31T11:26:02Z", "updated_at": "2016-12-07T10:15:29Z", "closed_at": "2016-12-07T10:15:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\n\nIt looks like I'm facing a parsing bug with some embedded Handlebars.js template, I have the following templates (only relevant parts are shown):\n\nindex.html:\n\n``` html\n    <script type=\"text/x-handlebars-template\" id=\"edit-Form\">\n        <metal:block use-macro=\"load: _edit_form.html\" />\n    </script>\n```\n\n_edit_form.html:\n\n``` html\n    <li>\n        <label>Modules<label>\n        <div>\n            <ul data-prop=\"modules\">\n                {{#each modules}}\n                    <li>\n                        <input data-module=\"text\" type=\"text\" value=\"{{text}}\" autocomplete=\"off\" maxlength=\"150\" />\n                        <input data-module=\"value\" type=\"text\" value=\"{{value}}\" autocomplete=\"off\" maxlength=\"50\" />\n                        <input data-module=\"weight\" type=\"checkbox\" {{#if weight}}checked=\"checked\"{{/if}} />\n                        <select name=\"agg\" data-module=\"agg\">\n                            <option>...</option>\n                            {{#each ../aggregations}}\n                                <option value=\"{{text}}\" {{#if default}}selected=\"selected\"{{/if}}>{{text}}</option>\n                            {{/each}}\n                        </select>\n                        <a href=\"#\" data-purpose=\"add\"><img title=\"Add another choice\" alt=\"Add\" src=\"${url('/images/plus.png')}\" /></a>\n                        <a href=\"#\" data-purpose=\"del\"><img title=\"Delete this choice\" alt=\"Delete\" src=\"${url('/images/less.png')}\" /></a>\n                    </li>\n                {{/each}}\n            </ul>\n        </div>\n    </li>\n```\n\nand I get a:\n\n```\nTraceback (most recent call last):\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/cherrypy/_cprequest.py\", line 656, in respond\n    response.body = self.handler()\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/cherrypy/lib/encoding.py\", line 188, in __call__\n    self.body = self.oldhandler(*args, **kwargs)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/cherrypy/_cpdispatch.py\", line 34, in __call__\n    return self.callable(*self.args, **self.kwargs)\n  File \"/usr/home/jcigar/projects/alienalert/alienalert/controllers/root.py\", line 18, in default\n    return render('index.html', key=key, action=action)\n  File \"/usr/home/jcigar/projects/alienalert/alienalert/template.py\", line 19, in render\n    return template.render(**data)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/zpt/template.py\", line 258, in render\n    return super(PageTemplate, self).render(**vars)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/template.py\", line 170, in render\n    self._render(stream, econtext, rcontext)\n  File \"/tmp/tmpgc7c78/index_9fb1767eec692eb0769c7df6f9f442b6.py\", line 991, in render\n    __macro.include(__stream, econtext.copy(), rcontext, __i18n_domain)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/zpt/template.py\", line 262, in include\n    self._render(*args, **kwargs)\n  File \"/tmp/tmpbhxvak/layout_4062c25258314e5340edcae2ce5b41d7.py\", line 690, in render\n    render_page(__stream, econtext.copy(), rcontext, __i18n_domain)\n  File \"/tmp/tmpbhxvak/layout_4062c25258314e5340edcae2ce5b41d7.py\", line 390, in render_page\n    __slot_head_bottom(__stream, econtext.copy(), rcontext)\n  File \"/tmp/tmpgc7c78/index_9fb1767eec692eb0769c7df6f9f442b6.py\", line 258, in __fill_head_bottom\n    __macro.include(__stream, econtext.copy(), rcontext, __i18n_domain)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/zpt/template.py\", line 261, in include\n    self.cook_check()\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/template.py\", line 291, in cook_check\n    self.cook(body)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/template.py\", line 145, in cook\n    program = self._cook(body, digest, names)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/template.py\", line 216, in _cook\n    source = self._make(body, builtins)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/template.py\", line 247, in _make\n    program = self.parse(body)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/zpt/template.py\", line 203, in parse\n    trim_attribute_space=self.trim_attribute_space,\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/zpt/program.py\", line 145, in __init__\n    super(MacroProgram, self).__init__(*args, **kwargs)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/program.py\", line 31, in __init__\n    for kind, args in parser:\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/parser.py\", line 182, in __iter__\n    item = self.parse(token)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/parser.py\", line 190, in parse\n    return visitor(kind, token)\n  File \"/usr/home/jcigar/venvs/alienalert3/lib/python3.3/site-packages/chameleon/parser.py\", line 234, in visit_end_tag\n    raise ParseError(\"Unexpected end tag.\", token)\nchameleon.exc.ParseError: Unexpected end tag.\n\n - String:     \"</option>\"\n - Filename:   /home/jcigar/projects/alienalert/alienalert/templates/_edit_form.html\n - Location:   (line 28: col 107)\n```\n\nThe problematic code seems to be:\n\n``` html\n<option value=\"{{text}}\" {{#if default}}selected=\"selected\"{{/if}}>{{text}}</option>\n```\n\nAm I doing something wrong, or can you confirm that this is a bug .. ?\n\nThanks !\nJulien\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/170", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/170/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/170/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/170/events", "html_url": "https://github.com/malthe/chameleon/issues/170", "id": 29383162, "node_id": "MDU6SXNzdWUyOTM4MzE2Mg==", "number": 170, "title": "Using the result of the `groupby` with ``tal:repeat`` is broken.", "user": {"login": "mvaled", "id": 270825, "node_id": "MDQ6VXNlcjI3MDgyNQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/270825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mvaled", "html_url": "https://github.com/mvaled", "followers_url": "https://api.github.com/users/mvaled/followers", "following_url": "https://api.github.com/users/mvaled/following{/other_user}", "gists_url": "https://api.github.com/users/mvaled/gists{/gist_id}", "starred_url": "https://api.github.com/users/mvaled/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mvaled/subscriptions", "organizations_url": "https://api.github.com/users/mvaled/orgs", "repos_url": "https://api.github.com/users/mvaled/repos", "events_url": "https://api.github.com/users/mvaled/events{/privacy}", "received_events_url": "https://api.github.com/users/mvaled/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152806, "node_id": "MDU6TGFiZWwxNTI4MDY=", "url": "https://api.github.com/repos/malthe/chameleon/labels/cantfix", "name": "cantfix", "color": "d7e102", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-03-13T19:47:33Z", "updated_at": "2016-12-07T10:15:02Z", "closed_at": "2016-12-07T10:15:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Let's show this by example.\n\nThe implementation of the Client's other_payments properties is like this:\n\n```\n@property\ndef other_payments(self):\n    '''Returns all payments (from concepts owned by other client), grouped\n    by concept.\n\n    It returns an iterator from the groupby\n\n    '''\n    from itertools import groupby\n    payments = (p for p in self.payments\n                if p.accountable_client is not p.concept.client)\n    return groupby(payments, lambda p: p.concept)\n```\n\nThe `self.payments` already orders the payments by concepts so groupby works ok.\n\nThis is a shell interaction recording that shows the problem:\n\n```\nIn [3]: from myapp.models import Client\n\nIn [4]: client = Client.first()\n\nIn [5]: for concept, payments in client.other_payments:\n   ...:     for payment in payments:\n   ...:         print(payment.reference)\n   ...:         \n76w5rnjn54\n2wr23j7m43\n\nIn [7]: template = chameleon.zpt.template.PageTemplate('''\n   ...: <ul tal:repeat=\"(concept, payments) client.other_payments\">\n   ...:   <li tal:repeat=\"payment payments\">\n   ...:     ${payment.reference}\n   ...:   </li>\n   ...: </ul>\n   ...: ''')\n\nIn [8]: template.render(client=client)\nOut[8]: u'\\n<ul>\\n  <li>\\n    2wr23j7m43\\n  </li>\\n</ul>\\n'\n```\n\nNotice that the template only prints a single `li`, when it should print two of them.\n\nI also tried the following unsuccessfully:\n\n```\nIn [9]: template = chameleon.zpt.template.PageTemplate('''\n   ...:     <ul tal:repeat=\"groups client.other_payments\">\n   ...:       <li tal:define=\"payments groups[-1]\"\n   ...:           tal:repeat=\"payment payments\">\n   ...:         ${payment.reference}\n   ...:       </li>\n   ...:     </ul>\n   ...: ''')\n\nIn [10]: template.render(client=client)\nOut[10]: u'\\n    <ul>\\n      <li>\\n\\t2wr23j7m43\\n      </li>\\n    </ul>\\n'\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/168", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/168/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/168/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/168/events", "html_url": "https://github.com/malthe/chameleon/issues/168", "id": 27994845, "node_id": "MDU6SXNzdWUyNzk5NDg0NQ==", "number": 168, "title": "astutil broken in Python 3.4 (No handler for ``NameConstant``)", "user": {"login": "brakhane", "id": 541637, "node_id": "MDQ6VXNlcjU0MTYzNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/541637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brakhane", "html_url": "https://github.com/brakhane", "followers_url": "https://api.github.com/users/brakhane/followers", "following_url": "https://api.github.com/users/brakhane/following{/other_user}", "gists_url": "https://api.github.com/users/brakhane/gists{/gist_id}", "starred_url": "https://api.github.com/users/brakhane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brakhane/subscriptions", "organizations_url": "https://api.github.com/users/brakhane/orgs", "repos_url": "https://api.github.com/users/brakhane/repos", "events_url": "https://api.github.com/users/brakhane/events{/privacy}", "received_events_url": "https://api.github.com/users/brakhane/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-02-20T20:49:01Z", "updated_at": "2014-03-11T10:12:18Z", "closed_at": "2014-02-20T21:13:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Python 3.4 adds a new node type \"NameConstant\" representing None, False and True literals.\n\nThis change will break Chameleon once 3.4 is released.\n\nPatch follows.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/167", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/167/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/167/events", "html_url": "https://github.com/malthe/chameleon/issues/167", "id": 26869152, "node_id": "MDU6SXNzdWUyNjg2OTE1Mg==", "number": 167, "title": "Different traceback behaviour in chameleon ZPT implementation", "user": {"login": "tomgross", "id": 339384, "node_id": "MDQ6VXNlcjMzOTM4NA==", "avatar_url": "https://avatars2.githubusercontent.com/u/339384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomgross", "html_url": "https://github.com/tomgross", "followers_url": "https://api.github.com/users/tomgross/followers", "following_url": "https://api.github.com/users/tomgross/following{/other_user}", "gists_url": "https://api.github.com/users/tomgross/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomgross/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomgross/subscriptions", "organizations_url": "https://api.github.com/users/tomgross/orgs", "repos_url": "https://api.github.com/users/tomgross/repos", "events_url": "https://api.github.com/users/tomgross/events{/privacy}", "received_events_url": "https://api.github.com/users/tomgross/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}, {"id": 133237, "node_id": "MDU6TGFiZWwxMzMyMzc=", "url": "https://api.github.com/repos/malthe/chameleon/labels/five.pt", "name": "five.pt", "color": "0b02e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2014-02-04T09:35:12Z", "updated_at": "2017-02-16T18:29:32Z", "closed_at": "2016-12-07T10:14:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have the following use case: I have a snippet which renders Google Analytics code in a template. I used to look into sys.exc_info() to see if an exception was raised. This worked perfectly for zope.pagetemplate. See the test:\n\n```\ndef test_tb(self):\n    import sys\n    from zope.pagetemplate.pagetemplate import PageTemplate\n    t = PageTemplate()\n    t.write('<div tal:content=\"y|nothing\"></div><span tal:content=\"options/error\" />')\n    printerror = lambda:sys.exc_info()\n    got = t(error=printerror)\n    self.assertTrue('<span>(None, None, None)</span>' in got)\n```\n\nFor Chameleon this somehow does not work. The traceback information which is swallowed by the pipe in the zope implementation is not in the Chameleon implementation of pagetemplates. Here is the same test failing with a NameError('y') for Chameleon: \n\n```\ndef test_tb(self):\n    import sys\n    from chameleon.zpt.template import PageTemplate\n    template = PageTemplate('<div tal:content=\"y|nothing\"></div><span tal:content=\"error()\" />')\n    printerror = lambda:sys.exc_info()\n    got = template.render(error=printerror)\n    self.assertTrue('<span>(None, None, None)</span>' in got)\n```\n\nI consider this a bug. Any pointers how to fix, workaround this?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/166", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/166/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/166/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/166/events", "html_url": "https://github.com/malthe/chameleon/issues/166", "id": 26005302, "node_id": "MDU6SXNzdWUyNjAwNTMwMg==", "number": 166, "title": "metal macros appearing within a translated block get moved to the top of that block ", "user": {"login": "tmog", "id": 823925, "node_id": "MDQ6VXNlcjgyMzkyNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/823925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmog", "html_url": "https://github.com/tmog", "followers_url": "https://api.github.com/users/tmog/followers", "following_url": "https://api.github.com/users/tmog/following{/other_user}", "gists_url": "https://api.github.com/users/tmog/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmog/subscriptions", "organizations_url": "https://api.github.com/users/tmog/orgs", "repos_url": "https://api.github.com/users/tmog/repos", "events_url": "https://api.github.com/users/tmog/events{/privacy}", "received_events_url": "https://api.github.com/users/tmog/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-01-21T14:46:25Z", "updated_at": "2016-12-06T15:22:44Z", "closed_at": "2016-12-06T15:22:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the example below, chameleon will output the h2 above the h1.\n\n```\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\"\n      xmlns:tal=\"http://xml.zope.org/namespaces/tal\"\n      xmlns:metal=\"http://xml.zope.org/namespaces/metal\"\n      xmlns:i18n=\"http://xml.zope.org/namespaces/i18n\"\n      lang=\"en\">\n  <body>  \n    <div i18n:translate=\"\">\n      <h1>h1</h1>\n      <h2 metal:define-macro=\"amacro\">h2</h2>\n    </div>\n  </body>\n</html>\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/164", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/164/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/164/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/164/events", "html_url": "https://github.com/malthe/chameleon/issues/164", "id": 23656590, "node_id": "MDU6SXNzdWUyMzY1NjU5MA==", "number": 164, "title": "New error from (2.13-1) to 2.17", "user": {"login": "jlvcm", "id": 1488668, "node_id": "MDQ6VXNlcjE0ODg2Njg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1488668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlvcm", "html_url": "https://github.com/jlvcm", "followers_url": "https://api.github.com/users/jlvcm/followers", "following_url": "https://api.github.com/users/jlvcm/following{/other_user}", "gists_url": "https://api.github.com/users/jlvcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlvcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlvcm/subscriptions", "organizations_url": "https://api.github.com/users/jlvcm/orgs", "repos_url": "https://api.github.com/users/jlvcm/repos", "events_url": "https://api.github.com/users/jlvcm/events{/privacy}", "received_events_url": "https://api.github.com/users/jlvcm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-12-03T16:55:58Z", "updated_at": "2013-12-03T20:15:10Z", "closed_at": "2013-12-03T20:15:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "i had version 2.13-1 and i've updated to 2.17.0, and now i have a page trowing this erro:\nhttps://gist.github.com/jlvcm/52e06a4e8bcd99558903\n\nthis erro happens because i've this:\n\n``` XML\n<ul tal:repeat=\"page request.getDidYouMean\">\n```\n\nwhere getDidYouMean is a function set as property on request, (http://docs.pylonsproject.org/projects/pyramid/en/master/api/request.html#pyramid.request.Request.set_property ), that returns None if no \"DidYouMean\" is found.\nex:\n\n``` Python\n        def getDidYouMean(request):\n            if HeMeans:\n                found = []\n                for YouMean in DidYou:\n                    found.append(YouMean)\n                return found\n         return None\n         request.set_property(getDidYouMean, 'getDidYouMean', reify=True)\n```\n\ni've fixed it by sending and empty, i don't know if the error is suppose to be thrown but i think it should have a better error message, or it should never try to repeat on a null value as before\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/163", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/163/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/163/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/163/events", "html_url": "https://github.com/malthe/chameleon/issues/163", "id": 23436203, "node_id": "MDU6SXNzdWUyMzQzNjIwMw==", "number": 163, "title": "\"documentation\" link published on the cheeseshop is broken ", "user": {"login": "keul", "id": 284924, "node_id": "MDQ6VXNlcjI4NDkyNA==", "avatar_url": "https://avatars0.githubusercontent.com/u/284924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keul", "html_url": "https://github.com/keul", "followers_url": "https://api.github.com/users/keul/followers", "following_url": "https://api.github.com/users/keul/following{/other_user}", "gists_url": "https://api.github.com/users/keul/gists{/gist_id}", "starred_url": "https://api.github.com/users/keul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keul/subscriptions", "organizations_url": "https://api.github.com/users/keul/orgs", "repos_url": "https://api.github.com/users/keul/repos", "events_url": "https://api.github.com/users/keul/events{/privacy}", "received_events_url": "https://api.github.com/users/keul/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-11-28T08:34:18Z", "updated_at": "2013-11-28T08:41:26Z", "closed_at": "2013-11-28T08:41:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "The main README.rst reports:\n\n```\nVisit the <website> for more information or the <documentation>.\n```\n\nwebsite link works (even if the generated URL is strange) but the \"documentation\" ones is broken\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/162", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/162/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/162/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/162/events", "html_url": "https://github.com/malthe/chameleon/issues/162", "id": 22404316, "node_id": "MDU6SXNzdWUyMjQwNDMxNg==", "number": 162, "title": "attribute injection does not work.", "user": {"login": "reebalazs", "id": 490635, "node_id": "MDQ6VXNlcjQ5MDYzNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/490635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reebalazs", "html_url": "https://github.com/reebalazs", "followers_url": "https://api.github.com/users/reebalazs/followers", "following_url": "https://api.github.com/users/reebalazs/following{/other_user}", "gists_url": "https://api.github.com/users/reebalazs/gists{/gist_id}", "starred_url": "https://api.github.com/users/reebalazs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reebalazs/subscriptions", "organizations_url": "https://api.github.com/users/reebalazs/orgs", "repos_url": "https://api.github.com/users/reebalazs/repos", "events_url": "https://api.github.com/users/reebalazs/events{/privacy}", "received_events_url": "https://api.github.com/users/reebalazs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}, {"id": 16156587, "node_id": "MDU6TGFiZWwxNjE1NjU4Nw==", "url": "https://api.github.com/repos/malthe/chameleon/labels/feature", "name": "feature", "color": "02e10c", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2013-11-10T11:06:02Z", "updated_at": "2016-12-06T16:05:02Z", "closed_at": "2016-12-06T15:11:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "consider this template:\n\n``` html\n<input ${attr} type=\"text\">\n```\n\nwith the following data:\n\n``` python\n{'attr': 'disabled'}\n```\n\nThis should generate\n\n``` html\n<input disabled type=\"text\">\n```\n\nbut it doesn't, instead it silently fails and it looks like the processing stops on this line and nothing else will be processed.\n\nAt the same time I noticed that tal:attributes=\"{....}\" does work with the dictionary keys and values correctly expanded to attribute names and values. So, this is the workaround that I am using right now in the feature.angular branch of deform where I need to inject variable html attributes. But it would be neat to use the natural form.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/161", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/161/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/161/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/161/events", "html_url": "https://github.com/malthe/chameleon/issues/161", "id": 22404068, "node_id": "MDU6SXNzdWUyMjQwNDA2OA==", "number": 161, "title": "Use absolute import when importing chameleon.interfaces", "user": {"login": "podhmo", "id": 80613, "node_id": "MDQ6VXNlcjgwNjEz", "avatar_url": "https://avatars1.githubusercontent.com/u/80613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/podhmo", "html_url": "https://github.com/podhmo", "followers_url": "https://api.github.com/users/podhmo/followers", "following_url": "https://api.github.com/users/podhmo/following{/other_user}", "gists_url": "https://api.github.com/users/podhmo/gists{/gist_id}", "starred_url": "https://api.github.com/users/podhmo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/podhmo/subscriptions", "organizations_url": "https://api.github.com/users/podhmo/orgs", "repos_url": "https://api.github.com/users/podhmo/repos", "events_url": "https://api.github.com/users/podhmo/events{/privacy}", "received_events_url": "https://api.github.com/users/podhmo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-11-10T10:55:02Z", "updated_at": "2013-11-11T11:53:46Z", "closed_at": "2013-11-11T11:53:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "if run scripts (has interfaces.py in same directory), AttributeError is occured.\n## detail\n\n```\n$ tree\n.\n\u251c\u2500\u2500 interfaces.py\n\u2514\u2500\u2500 use_ablosute_import.py\n```\n\n``` python\n# use_absolete_import.py\n# -*- coding:utf-8 -*-\nimport zope.interface\nimport chameleon.tal\n```\n\ninterfaces.py\n\n```\n#\n```\n\nif run scripts (has interfaces.py in same directory)\n\n``` sh\npython use_absolete_import.py\nTraceback (most recent call last):\n  File \"use_absolete_import.py\", line 3, in <module>\n    import chameleon.tal\n  File \"/Users/<myname>/vboxshare/venvs/my3/lib/python3.3/site-packages/chameleon/__init__.py\", line 1, in <module>\n    from .zpt.template import PageTemplate\n  File \"/Users/<myname>/vboxshare/venvs/my3/lib/python3.3/site-packages/chameleon/zpt/template.py\", line 11, in <module>\n    from ..tales import PythonExpr\n  File \"/Users/<myname>/vboxshare/venvs/my3/lib/python3.3/site-packages/chameleon/tales.py\", line 19, in <module>\n    from .compiler import Interpolator\n  File \"/Users/<myname>/vboxshare/venvs/my3/lib/python3.3/site-packages/chameleon/compiler.py\", line 28, in <module>\n    from .tal import ErrorInfo\n  File \"/Users/<myname>/vboxshare/venvs/my3/lib/python3.3/site-packages/chameleon/tal.py\", line 416, in <module>\n    zope.interface.classImplements(RepeatItem, interfaces.ITALESIterator)\nAttributeError: 'module' object has no attribute 'ITALESIterator\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/160", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/160/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/160/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/160/events", "html_url": "https://github.com/malthe/chameleon/issues/160", "id": 22174191, "node_id": "MDU6SXNzdWUyMjE3NDE5MQ==", "number": 160, "title": "ReadTheDocs documentation is at 2.10", "user": {"login": "goodwillcoding", "id": 582074, "node_id": "MDQ6VXNlcjU4MjA3NA==", "avatar_url": "https://avatars2.githubusercontent.com/u/582074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goodwillcoding", "html_url": "https://github.com/goodwillcoding", "followers_url": "https://api.github.com/users/goodwillcoding/followers", "following_url": "https://api.github.com/users/goodwillcoding/following{/other_user}", "gists_url": "https://api.github.com/users/goodwillcoding/gists{/gist_id}", "starred_url": "https://api.github.com/users/goodwillcoding/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goodwillcoding/subscriptions", "organizations_url": "https://api.github.com/users/goodwillcoding/orgs", "repos_url": "https://api.github.com/users/goodwillcoding/repos", "events_url": "https://api.github.com/users/goodwillcoding/events{/privacy}", "received_events_url": "https://api.github.com/users/goodwillcoding/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-11-06T05:28:03Z", "updated_at": "2013-11-06T10:51:27Z", "closed_at": "2013-11-06T10:51:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "ReadTheDocs documentation is at 2.10 not 2.13-1. Maybe it makes sense to regenerate it?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/158", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/158/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/158/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/158/events", "html_url": "https://github.com/malthe/chameleon/issues/158", "id": 21815957, "node_id": "MDU6SXNzdWUyMTgxNTk1Nw==", "number": 158, "title": "Remove \"helpful\" error message in repeat construct", "user": {"login": "bobappleyard", "id": 35868, "node_id": "MDQ6VXNlcjM1ODY4", "avatar_url": "https://avatars0.githubusercontent.com/u/35868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobappleyard", "html_url": "https://github.com/bobappleyard", "followers_url": "https://api.github.com/users/bobappleyard/followers", "following_url": "https://api.github.com/users/bobappleyard/following{/other_user}", "gists_url": "https://api.github.com/users/bobappleyard/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobappleyard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobappleyard/subscriptions", "organizations_url": "https://api.github.com/users/bobappleyard/orgs", "repos_url": "https://api.github.com/users/bobappleyard/repos", "events_url": "https://api.github.com/users/bobappleyard/events{/privacy}", "received_events_url": "https://api.github.com/users/bobappleyard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-10-30T10:31:25Z", "updated_at": "2013-10-30T10:44:13Z", "closed_at": "2013-10-30T10:44:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "The tal:repeat implementation includes code which swallows any TypeErrors and re-emits its own.\n\nThe comment by this states that it is to be compatible with Python 2.4. Given that Chameleon no longer supports 2.4 this is unnecessary.\n\nFurthermore, it co-operates poorly with generators. If a generator is passed to tal:repeat and it throws a TypeError, you get the frankly bizarre error message\n\n```\nTypeError: 'generator' object is not iterable\n```\n\nThis is obviously wrong.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/156", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/156/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/156/events", "html_url": "https://github.com/malthe/chameleon/issues/156", "id": 21458702, "node_id": "MDU6SXNzdWUyMTQ1ODcwMg==", "number": 156, "title": "Chameleon 2.13 sdist contains garbage file that breaks Windows installs", "user": {"login": "mgedmin", "id": 159967, "node_id": "MDQ6VXNlcjE1OTk2Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/159967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mgedmin", "html_url": "https://github.com/mgedmin", "followers_url": "https://api.github.com/users/mgedmin/followers", "following_url": "https://api.github.com/users/mgedmin/following{/other_user}", "gists_url": "https://api.github.com/users/mgedmin/gists{/gist_id}", "starred_url": "https://api.github.com/users/mgedmin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mgedmin/subscriptions", "organizations_url": "https://api.github.com/users/mgedmin/orgs", "repos_url": "https://api.github.com/users/mgedmin/repos", "events_url": "https://api.github.com/users/mgedmin/events{/privacy}", "received_events_url": "https://api.github.com/users/mgedmin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 62399402, "node_id": "MDU6TGFiZWw2MjM5OTQwMg==", "url": "https://api.github.com/repos/malthe/chameleon/labels/release", "name": "release", "color": "006b75", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-10-23T14:46:18Z", "updated_at": "2013-10-24T08:22:34Z", "closed_at": "2013-10-24T08:22:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "Anyone trying to install Chameleon 2.13 on Windows gets this error:\n\n```\nerror: c:\\temp\\easy_install-naioq8\\Chameleon-2.13\\src\\chameleon\\tests\\inputs\\orderedselect_input.pt?rev=90972: invalid mode ('wb') or filename\n```\n\nIf you look at the contents of https://pypi.python.org/packages/source/C/Chameleon/Chameleon-2.13.tar.gz#md5=dc8ceebfaddaf7c82bc46240609f632a, you'll see that this file is present in the source distribution.  It's not present in the github repo.\n\nYour MANIFEST.in contains\n\n```\nrecursive-include src/chameleon/tests/inputs *\nrecursive-include src/chameleon/tests/outputs *\n```\n\nso any files accidentally downloaded to the wrong directory can break your sdists.  May I recommend https://pypi.python.org/pypi/check-manifest for avoiding this kind of issue in the future?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/154", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/154/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/154/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/154/events", "html_url": "https://github.com/malthe/chameleon/issues/154", "id": 21264305, "node_id": "MDU6SXNzdWUyMTI2NDMwNQ==", "number": 154, "title": "Disk cache fails if PYTHONHASHSEED is random", "user": {"login": "jamadden", "id": 1256082, "node_id": "MDQ6VXNlcjEyNTYwODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1256082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamadden", "html_url": "https://github.com/jamadden", "followers_url": "https://api.github.com/users/jamadden/followers", "following_url": "https://api.github.com/users/jamadden/following{/other_user}", "gists_url": "https://api.github.com/users/jamadden/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamadden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamadden/subscriptions", "organizations_url": "https://api.github.com/users/jamadden/orgs", "repos_url": "https://api.github.com/users/jamadden/repos", "events_url": "https://api.github.com/users/jamadden/events{/privacy}", "received_events_url": "https://api.github.com/users/jamadden/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-10-19T16:10:18Z", "updated_at": "2013-10-21T05:12:40Z", "closed_at": "2013-10-21T05:12:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If caching to disk in enabled, and Python is using a random hash seed, using templates in the future may not be possible. The same expression can fail with different strange errors. For example, here's two different runs of the same cached template:\n\n```\n File \"var/caches/chameleon_cache/index_20d6ec7b63886e20f1ded47ff581351956037eb1.py\", line 810, in render\n   __value = __loader(__value)\nTypeError: 'NoneType' object is not callable\n```\n\nand:\n\n```\nFile \"var/caches/chameleon_cache/index_20d6ec7b63886e20f1ded47ff581351956037eb1.py\", line 810, in render\n   __value = __loader(__value)\nTypeError: __call__() takes at least 4 arguments (2 given)\n```\n\nThrough debugging the cached templates, this seems to be caused by the template's `initialize` function getting arguments in the wrong order. `chameleon.template.BaseTemplate` passes arguments to `initialize` in its `cook` function like so:\n\n``` python\n    def cook(self, body):\n        digest = self._digest(body)\n        builtins_dict = self.builtins.copy()\n        builtins_dict.update(self.extra_builtins)\n        names, builtins = zip(*builtins_dict.items())\n        program = self._cook(body, digest, names)\n\n        initialize = program['initialize']\n        functions = initialize(*builtins)\n```\n\nIn line 5, `names, builtins = zip(*builtins_dict.items())` it iterates over a dictionary to produce an ordered list of arguments to pass to the `initialize` function. But the iteration order of a dictionary is not defined and depends on such things like the order of insertion/deletion of keys, internal implementation, and the hash values of the keys. So when the hash seed changes between Python processes, the iteration order changes and the template gets bad arguments. \n\nIn Python versions less than 3.3, random hash seeds have to be enabled via an environment variable or on the command line; it is recommended that servers use random hash seeds, but if they do then they cannot use template caching. In Python 3.3, randomization is on by default.\n\nIt looks like the iteration order needs to be defined, perhaps by sorting the keys. I would submit a pull request but I haven't yet found where the `initialize` function is generated in the first place to make the change symmetric.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/150", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/150/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/150/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/150/events", "html_url": "https://github.com/malthe/chameleon/issues/150", "id": 17813842, "node_id": "MDU6SXNzdWUxNzgxMzg0Mg==", "number": 150, "title": "Documentation, intro", "user": {"login": "solutionroute", "id": 4117918, "node_id": "MDQ6VXNlcjQxMTc5MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/4117918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/solutionroute", "html_url": "https://github.com/solutionroute", "followers_url": "https://api.github.com/users/solutionroute/followers", "following_url": "https://api.github.com/users/solutionroute/following{/other_user}", "gists_url": "https://api.github.com/users/solutionroute/gists{/gist_id}", "starred_url": "https://api.github.com/users/solutionroute/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/solutionroute/subscriptions", "organizations_url": "https://api.github.com/users/solutionroute/orgs", "repos_url": "https://api.github.com/users/solutionroute/repos", "events_url": "https://api.github.com/users/solutionroute/events{/privacy}", "received_events_url": "https://api.github.com/users/solutionroute/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-08-08T15:47:00Z", "updated_at": "2013-08-08T16:11:21Z", "closed_at": "2013-08-08T16:11:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Working through Pyramid and Chameleon docs and noticed in:\n\nhttp://chameleon.readthedocs.org/en/latest/#introduction\n\nThe example given (referencing `__html__`) doesn't show use of the Markup class.\n\n```\nfrom chameleon.utils import Markup\nusername = \"<tt>%s</tt>\" % username\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/148", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/148/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/148/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/148/events", "html_url": "https://github.com/malthe/chameleon/issues/148", "id": 15684365, "node_id": "MDU6SXNzdWUxNTY4NDM2NQ==", "number": 148, "title": "template.py _make_module_loader forgets to initialize the remove attribute", "user": {"login": "graffic", "id": 47939, "node_id": "MDQ6VXNlcjQ3OTM5", "avatar_url": "https://avatars3.githubusercontent.com/u/47939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graffic", "html_url": "https://github.com/graffic", "followers_url": "https://api.github.com/users/graffic/followers", "following_url": "https://api.github.com/users/graffic/following{/other_user}", "gists_url": "https://api.github.com/users/graffic/gists{/gist_id}", "starred_url": "https://api.github.com/users/graffic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graffic/subscriptions", "organizations_url": "https://api.github.com/users/graffic/orgs", "repos_url": "https://api.github.com/users/graffic/repos", "events_url": "https://api.github.com/users/graffic/events{/privacy}", "received_events_url": "https://api.github.com/users/graffic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-06-18T12:38:55Z", "updated_at": "2013-06-18T12:55:20Z", "closed_at": "2013-06-18T12:55:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Reading the code I've seen that in `template.py`, in the `_make_module_loader` method, there is a `remove` variable that I believe was designed to be used when creating the `ModuleLoader`. But it's not used.\n\nAny explanation for that?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/147", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/147/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/147/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/147/events", "html_url": "https://github.com/malthe/chameleon/issues/147", "id": 15270532, "node_id": "MDU6SXNzdWUxNTI3MDUzMg==", "number": 147, "title": "html javascript template for attribute within <button> ParseError", "user": {"login": "Yakumounr", "id": 4633286, "node_id": "MDQ6VXNlcjQ2MzMyODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/4633286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yakumounr", "html_url": "https://github.com/Yakumounr", "followers_url": "https://api.github.com/users/Yakumounr/followers", "following_url": "https://api.github.com/users/Yakumounr/following{/other_user}", "gists_url": "https://api.github.com/users/Yakumounr/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yakumounr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yakumounr/subscriptions", "organizations_url": "https://api.github.com/users/Yakumounr/orgs", "repos_url": "https://api.github.com/users/Yakumounr/repos", "events_url": "https://api.github.com/users/Yakumounr/events{/privacy}", "received_events_url": "https://api.github.com/users/Yakumounr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-06-07T12:52:11Z", "updated_at": "2016-12-06T17:23:49Z", "closed_at": "2016-12-06T17:23:49Z", "author_association": "NONE", "active_lock_reason": null, "body": " The below html template is from jQuery-File-Upload-8.2.1\\index.html from https://github.com/blueimp/jQuery-File-Upload\n\n``` HTML+ERB\n<button class=\"btn btn-danger delete\" data-type=\"{%=file.delete_type%}\" data-url=\"{%=file.delete_url%}\"{% if (file.delete_with_credentials) { %} data-xhr-fields='{\"withCredentials\":true}'{% } %}>\n                <i class=\"icon-trash icon-white\"></i>\n                <span>Delete</span>\n            </button>\n```\n\nwhen rendered with Chameleon via Pyramid this gives -\n\n``` HTML+ERB\nchameleon.exc.ParseError\nParseError: Unexpected end tag.\n\n - String:     \"</button>\"\n - Filename:   c:\\pi\\jquery-file-upload-8.2.1\\server\\pyramid-jquery-file-upload-demo\\pyramidpython\\imageupload.pt\n```\n\nBecause of the template code within the `<button>`\n\nThe following is a suboptimal work arround -\n\n``` HTML\n        {% if (file.delete_with_credentials) { %}\n            <button class=\"btn btn-danger delete\" data-type='{%=file.delete_type%}' data-url='{%=file.delete_url%}' data-xhr-fields='{\"withCredentials\":true}'>\n            {% } %}\n\n         {% (!file.delete_with_credentials) { %}\n            <button class=\"btn btn-danger delete\" data-type='{%=file.delete_type%}' data-url='{%=file.delete_url%}' >\n            {% } %}\n```\n\nI found this issue as the template html file ('index.html') is  symlinked to and loaded as 'imageupload.pt' using Chameleon by the Pyramid bare bones demo application for jquery-file - https://github.com/grooverdan/pyramid-jQuery-File-Upload-demo\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/145", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/145/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/145/events", "html_url": "https://github.com/malthe/chameleon/issues/145", "id": 14418401, "node_id": "MDU6SXNzdWUxNDQxODQwMQ==", "number": 145, "title": "Error while parsing <script>", "user": {"login": "lugensa", "id": 1321819, "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzMjE4MTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1321819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lugensa", "html_url": "https://github.com/lugensa", "followers_url": "https://api.github.com/users/lugensa/followers", "following_url": "https://api.github.com/users/lugensa/following{/other_user}", "gists_url": "https://api.github.com/users/lugensa/gists{/gist_id}", "starred_url": "https://api.github.com/users/lugensa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lugensa/subscriptions", "organizations_url": "https://api.github.com/users/lugensa/orgs", "repos_url": "https://api.github.com/users/lugensa/repos", "events_url": "https://api.github.com/users/lugensa/events{/privacy}", "received_events_url": "https://api.github.com/users/lugensa/received_events", "type": "Organization", "site_admin": false}, "labels": [{"id": 133239, "node_id": "MDU6TGFiZWwxMzMyMzk=", "url": "https://api.github.com/repos/malthe/chameleon/labels/wontfix", "name": "wontfix", "color": "e10c02", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2013-05-16T17:56:32Z", "updated_at": "2016-12-05T15:15:02Z", "closed_at": "2016-12-05T15:15:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello i get a an error while parsing this \n\n``` html\n<script>\nfunction syntaxHighlight(json) {\n    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\n        var cls = 'number';\n        if (/^\"/.test(match)) {\n            if (/:$/.test(match)) {\n                cls = 'key';\n            } else {\n                cls = 'string';\n            }\n        } else if (/true|false/.test(match)) {\n            cls = 'boolean';\n        } else if (/null/.test(match)) {\n            cls = 'null';\n        }\n        return '<span class=\"' + cls + '\">' + match + '</span>';\n    });\n}\n</script>\n```\n\nand the error\n\n```\n  File \"/home/foo/.buildout/eggs/waitress-0.8.2-py2.7.egg/waitress/channel.py\", line 329, in service\n    task.service()\n  File \"/home/foo/.buildout/eggs/waitress-0.8.2-py2.7.egg/waitress/task.py\", line 173, in service\n    self.execute()\n  File \"/home/foo/.buildout/eggs/waitress-0.8.2-py2.7.egg/waitress/task.py\", line 380, in execute\n    app_iter = self.channel.server.application(env, start_response)\n  File \"/home/foo/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/router.py\", line 251, in __call__\n    response = self.invoke_subrequest(request, use_tweens=True)\n  File \"/home/foo/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/router.py\", line 227, in invoke_subrequest\n    response = handle_request(request)\n  File \"/home/foo/.buildout/eggs/pyramid_fanstatic-0.4-py2.7.egg/pyramid_fanstatic/__init__.py\", line 54, in __call__\n    response = self.handler(request)\n  File \"/home/foo/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/tweens.py\", line 21, in excview_tween\n    response = handler(request)\n  File \"/home/foo/.buildout/eggs/pyramid_tm-0.7-py2.7.egg/pyramid_tm/__init__.py\", line 82, in tm_tween\n    reraise(*exc_info)\n  File \"/home/foo/.buildout/eggs/pyramid_tm-0.7-py2.7.egg/pyramid_tm/__init__.py\", line 63, in tm_tween\n    response = handler(request)\n  File \"/home/foo/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/router.py\", line 161, in handle_request\n    response = view_callable(context, request)\n  File \"/home/foo/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/config/views.py\", line 237, in _secured_view\n    return view(context, request)\n  File \"/home/foo/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/config/views.py\", line 367, in rendered_view\n    context)\n  File \"/home/foo/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/renderers.py\", line 531, in render_view\n    return self.render_to_response(response, system, request=request)\n  File \"/home/foo/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/renderers.py\", line 561, in render_to_response\n    result = self.render(value, system_values, request=request)\n  File \"/home/foo/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/renderers.py\", line 557, in render\n    result = renderer(value, system_values)\n  File \"/home/foo/.buildout/eggs/pyramid-1.4-py2.7.egg/pyramid/chameleon_zpt.py\", line 42, in __call__\n    result = self.template(**system)\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/template.py\", line 125, in __call__\n    return self.render(**kwargs)\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/zpt/template.py\", line 257, in render\n    return super(PageTemplate, self).render(**vars)\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/template.py\", line 169, in render\n    self.cook_check()\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/template.py\", line 293, in cook_check\n    self.cook(body)\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/template.py\", line 147, in cook\n    program = self._cook(body, digest, names)\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/template.py\", line 218, in _cook\n    source = self._make(body, builtins)\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/template.py\", line 249, in _make\n    program = self.parse(body)\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/zpt/template.py\", line 202, in parse\n    trim_attribute_space=self.trim_attribute_space,\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/zpt/program.py\", line 145, in __init__\n    super(MacroProgram, self).__init__(*args, **kwargs)\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/program.py\", line 31, in __init__\n    for kind, args in parser:\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/parser.py\", line 182, in __iter__\n    item = self.parse(token)\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/parser.py\", line 190, in parse\n    return visitor(kind, token)\n  File \"/home/foo/.buildout/eggs/Chameleon-2.11-py2.7.egg/chameleon/parser.py\", line 234, in visit_end_tag\n    raise ParseError(\"Unexpected end tag.\", token)\nParseError: Unexpected end tag.\n\n - String:     \"</g\"\n - Filename:   /opt/develop/privat/mau/mauma/mauma/templates/overview.pt\n\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/143", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/143/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/143/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/143/events", "html_url": "https://github.com/malthe/chameleon/issues/143", "id": 13720363, "node_id": "MDU6SXNzdWUxMzcyMDM2Mw==", "number": 143, "title": "Unexpected behaviour with isinstance", "user": {"login": "tundish", "id": 4272886, "node_id": "MDQ6VXNlcjQyNzI4ODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/4272886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tundish", "html_url": "https://github.com/tundish", "followers_url": "https://api.github.com/users/tundish/followers", "following_url": "https://api.github.com/users/tundish/following{/other_user}", "gists_url": "https://api.github.com/users/tundish/gists{/gist_id}", "starred_url": "https://api.github.com/users/tundish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tundish/subscriptions", "organizations_url": "https://api.github.com/users/tundish/orgs", "repos_url": "https://api.github.com/users/tundish/repos", "events_url": "https://api.github.com/users/tundish/events{/privacy}", "received_events_url": "https://api.github.com/users/tundish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-04-27T12:23:48Z", "updated_at": "2016-12-06T17:22:27Z", "closed_at": "2016-12-06T17:22:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am hoping to specialise rendering of an object based on its type. So I want to do runtime type checking eg: in a tal:condition. Here is a snippet from my unit test file _isinstance_behaviour.py_. Test_003 fails:\n\n``` python\n#!/usr/bin/env python3\n# encoding: UTF-8\n\nfrom collections import namedtuple\nimport unittest\nfrom chameleon import PageTemplate\n\nTestTuple = namedtuple(\"TestTuple\", [\"name\", \"msg\"])\n\nclass ClassDetectionTests(unittest.TestCase):\n\n    def test_001(self):\n        msg = \"A sanity check for TestTuple\"\n        obj = TestTuple(1, msg)\n        self.assertEqual(obj.msg, msg)\n        self.assertIsInstance(obj, TestTuple)\n        self.assertTrue(hasattr(obj, \"msg\"))\n\n        tmplt = PageTemplate(\"<p>${viewdata.msg}</p>\")\n        self.assertIn(msg, tmplt(viewdata=obj))\n\n    def test_003(self):\n        msg = \"Using isinstance on a TestTuple (Fails in Python 3.3.1/Chameleon 2.11)\"\n        tmplt = PageTemplate(\n        \"\"\"<div tal:define=\"TestTuple import: isinstance_behaviour.TestTuple\"\n            tal:condition=\"isinstance(viewdata, TestTuple)\">\n           <p>${viewdata.msg}</p>\n           </div>\"\"\")\n        obj = TestTuple(3, msg)\n        self.assertIn(msg, tmplt(viewdata=obj))\n\nif __name__ == \"__main__\":\n    unittest.main()\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/139", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/139/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/139/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/139/events", "html_url": "https://github.com/malthe/chameleon/issues/139", "id": 12372412, "node_id": "MDU6SXNzdWUxMjM3MjQxMg==", "number": 139, "title": "Test failure", "user": {"login": "domenkozar", "id": 126339, "node_id": "MDQ6VXNlcjEyNjMzOQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/126339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/domenkozar", "html_url": "https://github.com/domenkozar", "followers_url": "https://api.github.com/users/domenkozar/followers", "following_url": "https://api.github.com/users/domenkozar/following{/other_user}", "gists_url": "https://api.github.com/users/domenkozar/gists{/gist_id}", "starred_url": "https://api.github.com/users/domenkozar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/domenkozar/subscriptions", "organizations_url": "https://api.github.com/users/domenkozar/orgs", "repos_url": "https://api.github.com/users/domenkozar/repos", "events_url": "https://api.github.com/users/domenkozar/events{/privacy}", "received_events_url": "https://api.github.com/users/domenkozar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152806, "node_id": "MDU6TGFiZWwxNTI4MDY=", "url": "https://api.github.com/repos/malthe/chameleon/labels/cantfix", "name": "cantfix", "color": "d7e102", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2013-03-24T11:51:38Z", "updated_at": "2016-12-06T17:22:02Z", "closed_at": "2016-12-06T17:22:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently on python 2.7 with Chameleon 2.11:\n\n```\n======================================================================\nFAIL: parse_defines (chameleon.tal)\nDoctest: chameleon.tal.parse_defines\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/nix/store/kia8w1wryraa4xa6sya5x9ayhjdk64c3-python-2.7.3/lib/python2.7/doctest.py\", line 2201, in runTest\n    raise self.failureException(self.format_failure(new.getvalue()))\nAssertionError: Failed doctest test for chameleon.tal.parse_defines\n  File \"/tmp/nix-build-python-Chameleon-2.11.drv-0/Chameleon-2.11/src/chameleon/tal.py\", line 118, in parse_defines\n\n----------------------------------------------------------------------\nFile \"/tmp/nix-build-python-Chameleon-2.11.drv-0/Chameleon-2.11/src/chameleon/tal.py\", line 148, in chameleon.tal.parse_defines\nFailed example:\n    parse_defines(s) == [\n        ('local', ('hello',), 'lovely')\n    ]\nException raised:\n    Traceback (most recent call last):\n      File \"/nix/store/kia8w1wryraa4xa6sya5x9ayhjdk64c3-python-2.7.3/lib/python2.7/doctest.py\", line 1289, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest chameleon.tal.parse_defines[7]>\", line 1, in <module>\n        parse_defines(s) == [\n      File \"/tmp/nix-build-python-Chameleon-2.11.drv-0/Chameleon-2.11/src/chameleon/tal.py\", line 158, in parse_defines\n        raise LanguageError(\"Invalid define syntax\", part)\n    LanguageError: Invalid define syntax\n\n     - String:     \" hello lovely\"\n\n\n----------------------------------------------------------------------\nRan 70 tests in 7.353s\n\nFAILED (failures=1)\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/138", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/138/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/138/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/138/events", "html_url": "https://github.com/malthe/chameleon/issues/138", "id": 10910292, "node_id": "MDU6SXNzdWUxMDkxMDI5Mg==", "number": 138, "title": "dumb feature request", "user": {"login": "bismigalis", "id": 1080584, "node_id": "MDQ6VXNlcjEwODA1ODQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1080584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bismigalis", "html_url": "https://github.com/bismigalis", "followers_url": "https://api.github.com/users/bismigalis/followers", "following_url": "https://api.github.com/users/bismigalis/following{/other_user}", "gists_url": "https://api.github.com/users/bismigalis/gists{/gist_id}", "starred_url": "https://api.github.com/users/bismigalis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bismigalis/subscriptions", "organizations_url": "https://api.github.com/users/bismigalis/orgs", "repos_url": "https://api.github.com/users/bismigalis/repos", "events_url": "https://api.github.com/users/bismigalis/events{/privacy}", "received_events_url": "https://api.github.com/users/bismigalis/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2013-02-12T15:11:00Z", "updated_at": "2016-12-05T14:03:41Z", "closed_at": "2016-12-05T14:03:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "tal:if alias for tal:condition\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/137", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/137/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/137/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/137/events", "html_url": "https://github.com/malthe/chameleon/issues/137", "id": 10656865, "node_id": "MDU6SXNzdWUxMDY1Njg2NQ==", "number": 137, "title": "Please remove pagetemplates.org from setup.py", "user": {"login": "zopyx", "id": 594239, "node_id": "MDQ6VXNlcjU5NDIzOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/594239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zopyx", "html_url": "https://github.com/zopyx", "followers_url": "https://api.github.com/users/zopyx/followers", "following_url": "https://api.github.com/users/zopyx/following{/other_user}", "gists_url": "https://api.github.com/users/zopyx/gists{/gist_id}", "starred_url": "https://api.github.com/users/zopyx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zopyx/subscriptions", "organizations_url": "https://api.github.com/users/zopyx/orgs", "repos_url": "https://api.github.com/users/zopyx/repos", "events_url": "https://api.github.com/users/zopyx/events{/privacy}", "received_events_url": "https://api.github.com/users/zopyx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2013-02-05T16:31:00Z", "updated_at": "2016-12-06T16:27:47Z", "closed_at": "2016-12-06T16:27:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Your site pagetemplates.org is very often not available and causes global buildout problems due to the fact that you reference the site as 'url' in your setup.py. Please point 'url' to PyPI and add a link to your site in the README file. It annoyed me today, a co-worker and  a n00b on IRC:\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/136", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/136/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/136/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/136/events", "html_url": "https://github.com/malthe/chameleon/issues/136", "id": 9375295, "node_id": "MDU6SXNzdWU5Mzc1Mjk1", "number": 136, "title": "UnknownTimeZoneError on Chameleon 2.11", "user": {"login": "hvelarde", "id": 341393, "node_id": "MDQ6VXNlcjM0MTM5Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/341393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hvelarde", "html_url": "https://github.com/hvelarde", "followers_url": "https://api.github.com/users/hvelarde/followers", "following_url": "https://api.github.com/users/hvelarde/following{/other_user}", "gists_url": "https://api.github.com/users/hvelarde/gists{/gist_id}", "starred_url": "https://api.github.com/users/hvelarde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hvelarde/subscriptions", "organizations_url": "https://api.github.com/users/hvelarde/orgs", "repos_url": "https://api.github.com/users/hvelarde/repos", "events_url": "https://api.github.com/users/hvelarde/events{/privacy}", "received_events_url": "https://api.github.com/users/hvelarde/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2012-12-18T17:35:29Z", "updated_at": "2012-12-19T11:02:33Z", "closed_at": "2012-12-19T11:02:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "we have found [an issue](https://github.com/collective/collective.cover/issues/107) on a project while using Chameleon 2.11; is this Chameleon's fault or do I have to open the issue on another place?\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/134", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/134/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/134/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/134/events", "html_url": "https://github.com/malthe/chameleon/issues/134", "id": 8837242, "node_id": "MDU6SXNzdWU4ODM3MjQy", "number": 134, "title": "Path expression segments starting with digits", "user": {"login": "davisagli", "id": 49014, "node_id": "MDQ6VXNlcjQ5MDE0", "avatar_url": "https://avatars0.githubusercontent.com/u/49014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davisagli", "html_url": "https://github.com/davisagli", "followers_url": "https://api.github.com/users/davisagli/followers", "following_url": "https://api.github.com/users/davisagli/following{/other_user}", "gists_url": "https://api.github.com/users/davisagli/gists{/gist_id}", "starred_url": "https://api.github.com/users/davisagli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davisagli/subscriptions", "organizations_url": "https://api.github.com/users/davisagli/orgs", "repos_url": "https://api.github.com/users/davisagli/repos", "events_url": "https://api.github.com/users/davisagli/events{/privacy}", "received_events_url": "https://api.github.com/users/davisagli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152807, "node_id": "MDU6TGFiZWwxNTI4MDc=", "url": "https://api.github.com/repos/malthe/chameleon/labels/z3c.pt", "name": "z3c.pt", "color": "e102d8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2012-11-30T00:48:40Z", "updated_at": "2016-12-05T14:05:59Z", "closed_at": "2016-12-05T14:05:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "z3c.pt uses this regexp to validate path expressions:\n\n```\n    path_regex = re.compile(\n        r'^(?:(nocall|not):\\s*)*((?:[A-Za-z_][A-Za-z0-9_:]*)' +\n        r'(?:/[?A-Za-z_@\\-+][?A-Za-z0-9_@\\-\\.+/:]*)*)$')\n```\n\nThis means that a segment of the path cannot start with a digit. That was supported in the reference implementation. (I have a template called 40years.pt and used to be able to use its macros, but cannot with chameleon.)\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/132", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/132/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/132/events", "html_url": "https://github.com/malthe/chameleon/issues/132", "id": 8191651, "node_id": "MDU6SXNzdWU4MTkxNjUx", "number": 132, "title": "wishlist: name generated modules based on original template filename", "user": {"login": "davisagli", "id": 49014, "node_id": "MDQ6VXNlcjQ5MDE0", "avatar_url": "https://avatars0.githubusercontent.com/u/49014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davisagli", "html_url": "https://github.com/davisagli", "followers_url": "https://api.github.com/users/davisagli/followers", "following_url": "https://api.github.com/users/davisagli/following{/other_user}", "gists_url": "https://api.github.com/users/davisagli/gists{/gist_id}", "starred_url": "https://api.github.com/users/davisagli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davisagli/subscriptions", "organizations_url": "https://api.github.com/users/davisagli/orgs", "repos_url": "https://api.github.com/users/davisagli/repos", "events_url": "https://api.github.com/users/davisagli/events{/privacy}", "received_events_url": "https://api.github.com/users/davisagli/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2012-11-08T00:51:08Z", "updated_at": "2016-12-05T15:12:31Z", "closed_at": "2016-12-05T15:12:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It would be nice if BaseTemplate._get_module_name incorporated the original template filename into the name of the generated module, in addition to the digest of the source. That would make it simple to identify the templates in profiler output.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/131", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/131/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/131/events", "html_url": "https://github.com/malthe/chameleon/issues/131", "id": 8146635, "node_id": "MDU6SXNzdWU4MTQ2NjM1", "number": 131, "title": "Can't install Chameleon", "user": {"login": "fafhrd91", "id": 598990, "node_id": "MDQ6VXNlcjU5ODk5MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/598990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fafhrd91", "html_url": "https://github.com/fafhrd91", "followers_url": "https://api.github.com/users/fafhrd91/followers", "following_url": "https://api.github.com/users/fafhrd91/following{/other_user}", "gists_url": "https://api.github.com/users/fafhrd91/gists{/gist_id}", "starred_url": "https://api.github.com/users/fafhrd91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fafhrd91/subscriptions", "organizations_url": "https://api.github.com/users/fafhrd91/orgs", "repos_url": "https://api.github.com/users/fafhrd91/repos", "events_url": "https://api.github.com/users/fafhrd91/events{/privacy}", "received_events_url": "https://api.github.com/users/fafhrd91/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2012-11-06T17:43:36Z", "updated_at": "2013-08-28T15:03:53Z", "closed_at": "2013-08-28T15:03:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\nSearching for Chameleon>=1.2.3\nReading http://pypi.python.org/simple/Chameleon/\nReading http://chameleon.repoze.org\nDownload error on http://chameleon.repoze.org: timed out -- Some packages may not be found!\nReading http://chameleon.repoze.org\nDownload error on http://chameleon.repoze.org: timed out -- Some packages may not be found!\nReading http://www.pagetemplates.org/\nDownload error on http://www.pagetemplates.org/: timed out -- Some packages may not be found!\nReading http://www.pagetemplates.org/\nDownload error on http://www.pagetemplates.org/: timed out -- Some packages may not be found!\nReading http://www.pagetemplates.org/\nDownload error on http://www.pagetemplates.org/: timed out -- Some packages may not be found!\nReading http://www.pagetemplates.org/\n...\netc\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/130", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/130/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/130/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/130/events", "html_url": "https://github.com/malthe/chameleon/issues/130", "id": 7972478, "node_id": "MDU6SXNzdWU3OTcyNDc4", "number": 130, "title": "appengine does not allow debug module loader", "user": {"login": "jensens", "id": 157140, "node_id": "MDQ6VXNlcjE1NzE0MA==", "avatar_url": "https://avatars1.githubusercontent.com/u/157140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jensens", "html_url": "https://github.com/jensens", "followers_url": "https://api.github.com/users/jensens/followers", "following_url": "https://api.github.com/users/jensens/following{/other_user}", "gists_url": "https://api.github.com/users/jensens/gists{/gist_id}", "starred_url": "https://api.github.com/users/jensens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jensens/subscriptions", "organizations_url": "https://api.github.com/users/jensens/orgs", "repos_url": "https://api.github.com/users/jensens/repos", "events_url": "https://api.github.com/users/jensens/events{/privacy}", "received_events_url": "https://api.github.com/users/jensens/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2012-10-30T16:08:54Z", "updated_at": "2016-12-05T14:07:04Z", "closed_at": "2016-12-05T14:07:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "While developing for appengine in debug mode i have to disable the module loader, because it uses a tempdir. in details this monkey patch helps:\n\n```\n# disable chameleon debug module loader, gae does not allow tempdirs\nimport chameleon.template\nfrom chameleon.loader import MemoryLoader\n\nchameleon.template._make_module_loader = MemoryLoader\nchameleon.template.BaseTemplate.loader = MemoryLoader() \n```\n\nmaybe a module loader using a different mechanism could be invented. \n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/129", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/129/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/129/events", "html_url": "https://github.com/malthe/chameleon/issues/129", "id": 7675230, "node_id": "MDU6SXNzdWU3Njc1MjMw", "number": 129, "title": "Use of exists: with erroneous code shows incorrect error in page template", "user": {"login": "davidjb", "id": 1002811, "node_id": "MDQ6VXNlcjEwMDI4MTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1002811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidjb", "html_url": "https://github.com/davidjb", "followers_url": "https://api.github.com/users/davidjb/followers", "following_url": "https://api.github.com/users/davidjb/following{/other_user}", "gists_url": "https://api.github.com/users/davidjb/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidjb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidjb/subscriptions", "organizations_url": "https://api.github.com/users/davidjb/orgs", "repos_url": "https://api.github.com/users/davidjb/repos", "events_url": "https://api.github.com/users/davidjb/events{/privacy}", "received_events_url": "https://api.github.com/users/davidjb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2012-10-18T01:57:20Z", "updated_at": "2016-12-06T17:21:38Z", "closed_at": "2016-12-06T17:21:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "By including this:\n\n```\n    <tal:block condition=\"exists:form\">\n    ...\n    </tal:block>\n```\n\nin a page template, it appears that any error that occurs on the page, such as by including this problematic snippet:\n\n```\n${''.join([1,2,3])}\n```\n\nproduces an incorrect traceback:\n\n```\nFile \"/home/david/.buildout/eggs/Chameleon-2.10-py2.7.egg/chameleon/template.py\", line 125, in __call__\n    return self.render(**kwargs)\n  File \"/home/david/.buildout/eggs/Chameleon-2.10-py2.7.egg/chameleon/zpt/template.py\", line 257, in render\n    return super(PageTemplate, self).render(**vars)\n  File \"/home/david/.buildout/eggs/Chameleon-2.10-py2.7.egg/chameleon/template.py\", line 190, in render\n    raise_with_traceback(exc, tb)\n  File \"/home/david/.buildout/eggs/Chameleon-2.10-py2.7.egg/chameleon/template.py\", line 172, in render\n    self._render(stream, econtext, rcontext)\n  File \"/tmp/tmpla4Pzm/profile_0a115cc2a1476969f981b6e5a3415492d4e5f193.py\", line 2656, in render\n    __macro.include(__stream, econtext.copy(), rcontext, __i18n_domain)\n  File \"/home/david/.buildout/eggs/Chameleon-2.10-py2.7.egg/chameleon/zpt/template.py\", line 261, in include\n    self._render(*args, **kwargs)\n  File \"/tmp/tmpNoXbaT/master_0dcd06fbeaf411b3407adc5bb4a14f8088378967.py\", line 726, in render\n    __slot_content(__stream, econtext.copy(), rcontext)\n  File \"/tmp/tmpla4Pzm/profile_0a115cc2a1476969f981b6e5a3415492d4e5f193.py\", line 641, in __fill_content\n    __content_140487793025840 = _lookup_attr('', 'join')([1, 2, 3, ])\nTypeError: form\n\n - Expression: \"\n      ${''.join([1,2,3])}\n      \"\n - Filename:   ... files/src/templates/profile.pt\n - Location:   (45:18)\n - Source:     </tal:block>\n                           ^\n - Expression: \"form\"\n - Filename:   ... files/src/templates/profile.pt\n - Location:   (43:35)\n - Source:     <tal:block condition=\"exists:form\">\n                                            ^^^^\n```\n\nPreviously the `Expression` was incorrect too (clearly referencing the exists: statement) but I can't seem to reproduce this yet.  As shown, the location, source and expression reference the `exists:`.\n\nAfter removing the `exists:` tal:block, the correct error is output:\n\n```\nTypeError: sequence item 0: expected string, int found\n\n - Expression: \"\n      ${''.join([1,2,3])}\n      \"\n - Filename:   ... files/src/templates/profile.pt\n - Location:   (42:12)\n - Source:     </div>\n                     ^\n```\n\nTested in Chameleon 2.10 and Python 2.7 (with Pyramid 1.4a2).\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/128", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/128/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/128/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/128/events", "html_url": "https://github.com/malthe/chameleon/issues/128", "id": 6842902, "node_id": "MDU6SXNzdWU2ODQyOTAy", "number": 128, "title": "wishlist: possibility to fallback content that should be used if a template does not exist.", "user": {"login": "silenius", "id": 1225348, "node_id": "MDQ6VXNlcjEyMjUzNDg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1225348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/silenius", "html_url": "https://github.com/silenius", "followers_url": "https://api.github.com/users/silenius/followers", "following_url": "https://api.github.com/users/silenius/following{/other_user}", "gists_url": "https://api.github.com/users/silenius/gists{/gist_id}", "starred_url": "https://api.github.com/users/silenius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/silenius/subscriptions", "organizations_url": "https://api.github.com/users/silenius/orgs", "repos_url": "https://api.github.com/users/silenius/repos", "events_url": "https://api.github.com/users/silenius/events{/privacy}", "received_events_url": "https://api.github.com/users/silenius/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 133238, "node_id": "MDU6TGFiZWwxMzMyMzg=", "url": "https://api.github.com/repos/malthe/chameleon/labels/core", "name": "core", "color": "02d7e1", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "malthe", "id": 26405, "node_id": "MDQ6VXNlcjI2NDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/26405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malthe", "html_url": "https://github.com/malthe", "followers_url": "https://api.github.com/users/malthe/followers", "following_url": "https://api.github.com/users/malthe/following{/other_user}", "gists_url": "https://api.github.com/users/malthe/gists{/gist_id}", "starred_url": "https://api.github.com/users/malthe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malthe/subscriptions", "organizations_url": "https://api.github.com/users/malthe/orgs", "repos_url": "https://api.github.com/users/malthe/repos", "events_url": "https://api.github.com/users/malthe/events{/privacy}", "received_events_url": "https://api.github.com/users/malthe/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2012-09-13T09:50:31Z", "updated_at": "2012-10-11T08:20:46Z", "closed_at": "2012-10-11T08:20:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\n\nIn my templates I have something like:\n\n``` xml\n<metal:block use-macro=\"load: ../${content.type.name}/view/_${display}.html\" tal:repeat=\"content results\" />\n```\n\nI used to use Genshi in the past and there was a possibility (through the `<xi:fallback ...>` tag) to fallback content if a template is missing, instead of raising an error. Do you think this could be implemented in Chameleon ?\n\nThank you,\nJulien\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/127", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/127/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/127/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/127/events", "html_url": "https://github.com/malthe/chameleon/issues/127", "id": 6780668, "node_id": "MDU6SXNzdWU2NzgwNjY4", "number": 127, "title": "unexpected tal:attributes boolean attribute behaviour Chameleon-2.9.2-py3.2", "user": {"login": "joulez", "id": 2322138, "node_id": "MDQ6VXNlcjIzMjIxMzg=", "avatar_url": "https://avatars1.githubusercontent.com/u/2322138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joulez", "html_url": "https://github.com/joulez", "followers_url": "https://api.github.com/users/joulez/followers", "following_url": "https://api.github.com/users/joulez/following{/other_user}", "gists_url": "https://api.github.com/users/joulez/gists{/gist_id}", "starred_url": "https://api.github.com/users/joulez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joulez/subscriptions", "organizations_url": "https://api.github.com/users/joulez/orgs", "repos_url": "https://api.github.com/users/joulez/repos", "events_url": "https://api.github.com/users/joulez/events{/privacy}", "received_events_url": "https://api.github.com/users/joulez/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2012-09-11T03:50:56Z", "updated_at": "2012-10-08T13:46:38Z", "closed_at": "2012-10-08T13:46:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\nWas unsure about this\nWith http://chameleon.repoze.org/docs/latest/reference.html#examples.\n<input type=\"input\" tal:attributes=\"checked True\" />\nThis results in checked=\"True\" with my testing.  I thought this was normal behavior until i saw this example that produced incorrect xhtml. \nThis would avoid having \"'checked 'checked' if True else False\".  Which is what I've being doing.\nThanks.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/126", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/126/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/126/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/126/events", "html_url": "https://github.com/malthe/chameleon/issues/126", "id": 6719086, "node_id": "MDU6SXNzdWU2NzE5MDg2", "number": 126, "title": "Built in path/string/exists/nocall methods not available in python TALES expression", "user": {"login": "tsimkins", "id": 285743, "node_id": "MDQ6VXNlcjI4NTc0Mw==", "avatar_url": "https://avatars2.githubusercontent.com/u/285743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsimkins", "html_url": "https://github.com/tsimkins", "followers_url": "https://api.github.com/users/tsimkins/followers", "following_url": "https://api.github.com/users/tsimkins/following{/other_user}", "gists_url": "https://api.github.com/users/tsimkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsimkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsimkins/subscriptions", "organizations_url": "https://api.github.com/users/tsimkins/orgs", "repos_url": "https://api.github.com/users/tsimkins/repos", "events_url": "https://api.github.com/users/tsimkins/events{/privacy}", "received_events_url": "https://api.github.com/users/tsimkins/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 152807, "node_id": "MDU6TGFiZWwxNTI4MDc=", "url": "https://api.github.com/repos/malthe/chameleon/labels/z3c.pt", "name": "z3c.pt", "color": "e102d8", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2012-09-07T17:02:39Z", "updated_at": "2016-12-06T16:42:57Z", "closed_at": "2016-12-06T16:42:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "We're on Chameleon 2.9.2, Plone 4.1.6\n\nPer the ZPT docs:\n\nhttp://docs.zope.org/zope2/zope2book/AppendixC.html#built-in-functions\n\nYou could use the path, string, exists, and nocall methods as part of a python TALES expression.\n\nFor example, \n\n```\n<div tal:content=\"python: string(context/some_url_var)\"></div>\n```\n\nwhere \"some_url_var\" could be something like, \"${portal_url}/foo/bar\".  In upgrading to Plone 4.1 with Chameleon, I noticed that these methods are not available.\n\nI worked around the issue, since I only used that functionality one place, but it would be nice to have it available.\n\nSample traceback is:\n\n```\n2012-09-07 12:53:56 ERROR portlets Error while rendering <plone.app.portlets.manager.ColumnPortletManagerRenderer object at 0xf77652c>\nTraceback (most recent call last):\n  File \"/usr/local/plone/buildout-cache/eggs/Products.PloneFormGen-1.7.2-py2.6.egg/Products/PloneFormGen/patches.py\", line 20, in safe_render\n    return portlet_renderer.render()\n  File \"/usr/local/plone/buildout-cache/eggs/Zope2-2.13.15-py2.6.egg/Products/Five/browser/pagetemplatefile.py\", line 125, in __call__\n    return self.im_func(im_self, *args, **kw)\n  File \"/usr/local/plone/buildout-cache/eggs/Zope2-2.13.15-py2.6.egg/Products/Five/browser/pagetemplatefile.py\", line 59, in __call__\n    sourceAnnotations=getattr(debug_flags, 'sourceAnnotations', 0),\n  File \"/usr/local/plone/buildout-cache/eggs/zope.pagetemplate-3.6.2-py2.6.egg/zope/pagetemplate/pagetemplate.py\", line 132, in pt_render\n    strictinsert=0, sourceAnnotations=sourceAnnotations\n  File \"/usr/local/plone/buildout-cache/eggs/five.pt-2.2.1-py2.6.egg/five/pt/engine.py\", line 93, in __call__\n    return self.template.render(**kwargs)\n  File \"/usr/local/plone/buildout-cache/eggs/z3c.pt-2.2.3-py2.6.egg/z3c/pt/pagetemplate.py\", line 149, in render\n    return base_renderer(**context)\n  File \"/usr/local/plone/buildout-cache/eggs/Chameleon-2.9.2-py2.6.egg/chameleon/zpt/template.py\", line 259, in render\n    return super(PageTemplate, self).render(**vars)\n  File \"/usr/local/plone/buildout-cache/eggs/Chameleon-2.9.2-py2.6.egg/chameleon/template.py\", line 190, in render\n    raise_with_traceback(exc, tb)\n  File \"/usr/local/plone/buildout-cache/eggs/Chameleon-2.9.2-py2.6.egg/chameleon/template.py\", line 172, in render\n    self._render(stream, econtext, rcontext)\n  File \"962c6c1f098dc71084de66898e708ba356b5a0cb.py\", line 119, in render\n  File \"/usr/local/plone/buildout-cache/eggs/Chameleon-2.9.2-py2.6.egg/chameleon/utils.py\", line 404, in __getitem__\n    raise NameError(key)\nNameError: string\n\n - Expression: \"python: string('${portal_url}')\"\n - Filename:   ... [_____REDACTED_____]/browser/templates/navigation.pt\n - Location:   (10:16)\n - Source:     foo python: string('${portal_url}');\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n - Arguments:  repeat: {...} (0)\n               template: <ViewPageTemplateFile - at 0xcb8140c>\n               views: <ViewMapper - at 0xf40610c>\n               modules: <instance - at 0x9a772ec>\n               subsite_url: [_____REDACTED_____]\n               args: <tuple - at 0xb769c02cL>\n               here: <ImplicitAcquisitionWrapper academics at 0xf9d2c5c>\n               user: <ImplicitAcquisitionWrapper - at 0xf6c2734>\n               view: <PortletRenderer from [_____REDACTED_____]/browser/templates/navigation.pt - at 0xfba5eec>\n               nothing: <NoneType - at 0x8172db8>\n               container: <ImplicitAcquisitionWrapper academics at 0xf9d2c5c>\n               include_top: True\n               request: <instance - at 0xf564a4c>\n               wrapped_repeat: <SafeMapping - at 0xf6bc1bc>\n               portal_url: [_____REDACTED_____]\n               traverse_subpath: <list - at 0xf75cb2c>\n               default: <object - at 0xb76bb7d0L>\n               loop: {...} (0)\n               context: <ImplicitAcquisitionWrapper academics at 0xf9d2c5c>\n               subsite_title: Future Students\n               translate: <function translate at 0xf8ff7d4>\n               root: <ImplicitAcquisitionWrapper academics at 0xf6bc734>\n               options: {...} (0)\n               target_language: en\n\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/125", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/125/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/125/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/125/events", "html_url": "https://github.com/malthe/chameleon/issues/125", "id": 5716878, "node_id": "MDU6SXNzdWU1NzE2ODc4", "number": 125, "title": "Compiled template is not utf-8 encoded on windows", "user": {"login": "pitchum", "id": 1174001, "node_id": "MDQ6VXNlcjExNzQwMDE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pitchum", "html_url": "https://github.com/pitchum", "followers_url": "https://api.github.com/users/pitchum/followers", "following_url": "https://api.github.com/users/pitchum/following{/other_user}", "gists_url": "https://api.github.com/users/pitchum/gists{/gist_id}", "starred_url": "https://api.github.com/users/pitchum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pitchum/subscriptions", "organizations_url": "https://api.github.com/users/pitchum/orgs", "repos_url": "https://api.github.com/users/pitchum/repos", "events_url": "https://api.github.com/users/pitchum/events{/privacy}", "received_events_url": "https://api.github.com/users/pitchum/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2012-07-19T16:45:01Z", "updated_at": "2012-10-09T07:54:06Z", "closed_at": "2012-10-09T07:54:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I wrote a pyramid+python3 project using chameleon templates.\nEverything was fine as long as I was workin on linux.\nLately I had to make the project runnable on windows for a colleague and the following problem arose:\n\n``` python\n__macro.include(__stream, econtext.copy(), rcontext, __i18n_domain)\n  File \"C:\\PROGRA~1\\python3.2\\lib\\site-packages\\chameleon\\zpt\\template.py\", line 262, in include\n    self.cook_check()\n  File \"C:\\PROGRA~1\\python3.2\\lib\\site-packages\\chameleon\\template.py\", line 293, in cook_check\n    self.cook(body)\n  File \"C:\\PROGRA~1\\python3.2\\lib\\site-packages\\chameleon\\template.py\", line 147, in cook\n    program = self._cook(body, digest, names)\n  File \"C:\\PROGRA~1\\python3.2\\lib\\site-packages\\chameleon\\template.py\", line 223, in _cook\n    cooked = self.loader.build(source, name)\n  File \"C:\\PROGRA~1\\python3.2\\lib\\site-packages\\chameleon\\loader.py\", line 154, in build\n    py_compile.compile(name)\n  File \"C:\\PROGRA~1\\python3.2\\lib\\py_compile.py\", line 119, in compile\n    codestring = f.read()\n  File \"C:\\PROGRA~1\\python3.2\\lib\\codecs.py\", line 300, in decode\n    (result, consumed) = self._buffer_decode(data, self.errors, final)\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xe9 in position 2702: invalid continuation byte\n```\n\nAfter some investigations it seems that chameleon doesn't enforce the utf-8 encoding while generating the compiled templates despite including the header comment `# -*- coding: utf-8 -*-`.\n\nI'm not sure if this is a chameleon bug or a python bug but as a temporary workaround here is how I patched `loader.py`:\n\n``` diff\ndiff -r f06973f6415b loader.py\n--- a/loader.py Thu Jul 19 18:36:18 2012 +0200\n+++ b/loader.py Thu Jul 19 18:38:25 2012 +0200\n@@ -137,7 +137,7 @@\n\n             log.debug(\"writing source to disk (%d bytes).\" % len(source))\n             fd, fn = tempfile.mkstemp(prefix=base, suffix='.tmp', dir=self.path)\n-            temp = os.fdopen(fd, 'w')\n+            temp = os.fdopen(fd, 'w', encoding='utf-8')\n\n             try:\n                 try:\n```\n\nUnfortunately, this workaround is of no help for python2.x.\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/124", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/124/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/124/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/124/events", "html_url": "https://github.com/malthe/chameleon/issues/124", "id": 5208052, "node_id": "MDU6SXNzdWU1MjA4MDUy", "number": 124, "title": "chameleom.util:Markup.__repr__ causes an exception.", "user": {"login": "tomyuk", "id": 641485, "node_id": "MDQ6VXNlcjY0MTQ4NQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/641485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomyuk", "html_url": "https://github.com/tomyuk", "followers_url": "https://api.github.com/users/tomyuk/followers", "following_url": "https://api.github.com/users/tomyuk/following{/other_user}", "gists_url": "https://api.github.com/users/tomyuk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomyuk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomyuk/subscriptions", "organizations_url": "https://api.github.com/users/tomyuk/orgs", "repos_url": "https://api.github.com/users/tomyuk/repos", "events_url": "https://api.github.com/users/tomyuk/events{/privacy}", "received_events_url": "https://api.github.com/users/tomyuk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2012-06-22T03:57:38Z", "updated_at": "2012-06-22T07:20:27Z", "closed_at": "2012-06-22T07:20:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I don't know is this a rightway to fix the problem, but there is no 's' attribute :)\n\n```\n*** chameleon/utils.py  2012-06-20 19:57:17.502928077 +0900\n--- chameleon/utils.py.~1~  2012-05-28 09:38:13.000000000 +0900\n***************\n*** 426,430 ****\n          return unicode_string(self)\n\n      def __repr__(self):\n!         return \"s'%s'\" % self\n--- 426,429 ----\n          return unicode_string(self)\n\n      def __repr__(self):\n!         return \"s'%s'\" % self.s\n```\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/malthe/chameleon/issues/123", "repository_url": "https://api.github.com/repos/malthe/chameleon", "labels_url": "https://api.github.com/repos/malthe/chameleon/issues/123/labels{/name}", "comments_url": "https://api.github.com/repos/malthe/chameleon/issues/123/comments", "events_url": "https://api.github.com/repos/malthe/chameleon/issues/123/events", "html_url": "https://github.com/malthe/chameleon/issues/123", "id": 5147866, "node_id": "MDU6SXNzdWU1MTQ3ODY2", "number": 123, "title": "I want to handle the chameleon through buildout with python 2.6", "user": {"login": "Sadashiv", "id": 1003414, "node_id": "MDQ6VXNlcjEwMDM0MTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1003414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sadashiv", "html_url": "https://github.com/Sadashiv", "followers_url": "https://api.github.com/users/Sadashiv/followers", "following_url": "https://api.github.com/users/Sadashiv/following{/other_user}", "gists_url": "https://api.github.com/users/Sadashiv/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sadashiv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sadashiv/subscriptions", "organizations_url": "https://api.github.com/users/Sadashiv/orgs", "repos_url": "https://api.github.com/users/Sadashiv/repos", "events_url": "https://api.github.com/users/Sadashiv/events{/privacy}", "received_events_url": "https://api.github.com/users/Sadashiv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2012-06-19T14:42:45Z", "updated_at": "2012-06-20T12:36:17Z", "closed_at": "2012-06-20T07:20:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it possible to handle the chameleon through buildout with python2.6.\nPlease suggest me.\n\nThanks\n", "performed_via_github_app": null, "score": 1.0}]}