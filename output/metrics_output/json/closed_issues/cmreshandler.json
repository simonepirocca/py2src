{"total_count": 22, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/60", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/60/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/60/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/60/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/60", "id": 407099211, "node_id": "MDU6SXNzdWU0MDcwOTkyMTE=", "number": 60, "title": "Logs are not appearing in AWS ElasticSearch service from Python Lambda", "user": {"login": "kottaravikumar", "id": 8612890, "node_id": "MDQ6VXNlcjg2MTI4OTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/8612890?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kottaravikumar", "html_url": "https://github.com/kottaravikumar", "followers_url": "https://api.github.com/users/kottaravikumar/followers", "following_url": "https://api.github.com/users/kottaravikumar/following{/other_user}", "gists_url": "https://api.github.com/users/kottaravikumar/gists{/gist_id}", "starred_url": "https://api.github.com/users/kottaravikumar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kottaravikumar/subscriptions", "organizations_url": "https://api.github.com/users/kottaravikumar/orgs", "repos_url": "https://api.github.com/users/kottaravikumar/repos", "events_url": "https://api.github.com/users/kottaravikumar/events{/privacy}", "received_events_url": "https://api.github.com/users/kottaravikumar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-06T06:37:36Z", "updated_at": "2019-02-07T18:32:44Z", "closed_at": "2019-02-07T15:58:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "We are trying to send logs from Lambda to Elastic search using the code snippet below. We are not getting any error and not appearing logs in elastic search.\r\n\r\n[Code Snippet](https://gist.github.com/kottaravikumar/73d9e6c46f13ca646cf156f2cc8e61d2)\r\nCan someone please help me to resolve the issue?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/59", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/59/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/59/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/59", "id": 397476379, "node_id": "MDU6SXNzdWUzOTc0NzYzNzk=", "number": 59, "title": "Many duplicate logs in elasticsearch", "user": {"login": "ganga-sah", "id": 8893386, "node_id": "MDQ6VXNlcjg4OTMzODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/8893386?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ganga-sah", "html_url": "https://github.com/ganga-sah", "followers_url": "https://api.github.com/users/ganga-sah/followers", "following_url": "https://api.github.com/users/ganga-sah/following{/other_user}", "gists_url": "https://api.github.com/users/ganga-sah/gists{/gist_id}", "starred_url": "https://api.github.com/users/ganga-sah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ganga-sah/subscriptions", "organizations_url": "https://api.github.com/users/ganga-sah/orgs", "repos_url": "https://api.github.com/users/ganga-sah/repos", "events_url": "https://api.github.com/users/ganga-sah/events{/privacy}", "received_events_url": "https://api.github.com/users/ganga-sah/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-09T17:29:58Z", "updated_at": "2019-01-09T21:55:54Z", "closed_at": "2019-01-09T21:55:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am getting annoying multiple duplicate log entries in elasticsearch which makes logs hard to read\r\nIs this a known issue. Any workaround/fix?\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/58", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/58/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/58/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/58", "id": 396597156, "node_id": "MDU6SXNzdWUzOTY1OTcxNTY=", "number": 58, "title": "AWS Lambda sends log to Cloudwatch instead of AWS Elasticsearch", "user": {"login": "ganga-sah", "id": 8893386, "node_id": "MDQ6VXNlcjg4OTMzODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/8893386?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ganga-sah", "html_url": "https://github.com/ganga-sah", "followers_url": "https://api.github.com/users/ganga-sah/followers", "following_url": "https://api.github.com/users/ganga-sah/following{/other_user}", "gists_url": "https://api.github.com/users/ganga-sah/gists{/gist_id}", "starred_url": "https://api.github.com/users/ganga-sah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ganga-sah/subscriptions", "organizations_url": "https://api.github.com/users/ganga-sah/orgs", "repos_url": "https://api.github.com/users/ganga-sah/repos", "events_url": "https://api.github.com/users/ganga-sah/events{/privacy}", "received_events_url": "https://api.github.com/users/ganga-sah/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-07T18:24:19Z", "updated_at": "2019-01-09T17:24:55Z", "closed_at": "2019-01-09T17:24:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "I used the CMRESHandler call below in AWS lambda. I had to add a new param \"aws_token\" with change in source code to successfully connect to AWS Elasticsearch using handler.test_es_source() below. In spite of successful connection test from AWS lambda to AWS Elasticsearch, log.info() line at the end below, doesn't send log to Elasticsearch but instead shows up in Cloudwatch logs as below.\r\n[INFO]\t2019-01-07T17:25:26.365Z\t3860c080-12a1-11e9-8bd1-356fbb9f2564\tLogging something to Elasticsearch\r\nPlease suggest any possible fix to direct log to Elasticsearch as expected from code below.\r\nPS: The same code (uses localhost/9200 and w/o aws_* args) is running fine on my Macbook with local install of Elasticsearch where logs are getting sent to local Elasticsearch.\r\n\r\n    handler = CMRESHandler(hosts=[{'host': elasticsearch_host, 'port': elasticsearch_port}],\r\n                           auth_type=CMRESHandler.AuthType.AWS_SIGNED_AUTH,\r\n                           aws_access_key=credentials.access_key,\r\n                           aws_secret_key=credentials.secret_key,\r\n                           aws_region=region,\r\n                           aws_token=credentials.token,\r\n                           use_ssl = True,\r\n                           verify_ssl=True,\r\n                           es_index_name=\"alogging\",\r\n                           es_additional_fields={'App': 'MyAppName', 'Environment': 'Dev'})\r\n\r\n    print \"handler: \", handler\r\n    log = logging.getLogger(\"Clearedin\")\r\n    for h in log.handlers:\r\n        log.removeHandler(h)\r\n    log.setLevel(logging.DEBUG)\r\n    log.addHandler(handler)\r\n    print \"handler test: \", handler.test_es_source()\r\n    log.info(\"Logging something to Elasticsearch\")\r\n ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/56", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/56/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/56/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/56/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/56", "id": 363134537, "node_id": "MDU6SXNzdWUzNjMxMzQ1Mzc=", "number": 56, "title": "Potential race condition when sending logs to elasticsearch (?)", "user": {"login": "zferentz", "id": 4681718, "node_id": "MDQ6VXNlcjQ2ODE3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/4681718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zferentz", "html_url": "https://github.com/zferentz", "followers_url": "https://api.github.com/users/zferentz/followers", "following_url": "https://api.github.com/users/zferentz/following{/other_user}", "gists_url": "https://api.github.com/users/zferentz/gists{/gist_id}", "starred_url": "https://api.github.com/users/zferentz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zferentz/subscriptions", "organizations_url": "https://api.github.com/users/zferentz/orgs", "repos_url": "https://api.github.com/users/zferentz/repos", "events_url": "https://api.github.com/users/zferentz/events{/privacy}", "received_events_url": "https://api.github.com/users/zferentz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-09-24T12:57:18Z", "updated_at": "2018-09-27T15:35:02Z", "closed_at": "2018-09-27T15:35:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm running a multi-threaded system where every thread logs a lot.\r\nOnce in a while, i see that all my threads are frozen and I believe that it's related to logging:\r\n- A single connection is open to ElasticSearch in CLOSE_WAIT state .infinitely .\r\n- Threads blocked around the logging call\r\n- My threads log to both file  and ES, however i examined both logs and i can see that a one single item from each thread is missing in ELK while i see those items in the log-file.\r\n- Usually when it happens i can see network issue or ES server-side issue on my ELK stack\r\n\r\nHence, my conclusion is that the problem is related to flushing the data to ES.\r\n\r\nNow, i can see that the buffer is protected by a lock so probably there's no race condition there, \r\nHowever - i wonder if it's possible that the `eshelpers.bulk` is not thread-safe ?\r\nMy theory is  that due to a network failure (or timeout) the call to `eshelpers.bulk` takes a while and  (since other threads continue to send logs) more and more threads call the `eshelpers.bulk` which is using the same ES client from multiple threads....  If the ES client is not thread-safe  I believe that this might cause a deadlock.\r\n\r\nHas anyone seen anything similar ? \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/45", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/45/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/45/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/45", "id": 329847725, "node_id": "MDU6SXNzdWUzMjk4NDc3MjU=", "number": 45, "title": "Demo script not working. No errors thrown.", "user": {"login": "decadenza", "id": 30215028, "node_id": "MDQ6VXNlcjMwMjE1MDI4", "avatar_url": "https://avatars0.githubusercontent.com/u/30215028?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decadenza", "html_url": "https://github.com/decadenza", "followers_url": "https://api.github.com/users/decadenza/followers", "following_url": "https://api.github.com/users/decadenza/following{/other_user}", "gists_url": "https://api.github.com/users/decadenza/gists{/gist_id}", "starred_url": "https://api.github.com/users/decadenza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decadenza/subscriptions", "organizations_url": "https://api.github.com/users/decadenza/orgs", "repos_url": "https://api.github.com/users/decadenza/repos", "events_url": "https://api.github.com/users/decadenza/events{/privacy}", "received_events_url": "https://api.github.com/users/decadenza/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-06T12:33:28Z", "updated_at": "2018-09-24T21:38:09Z", "closed_at": "2018-09-24T21:38:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have the following basic script:\r\n\r\n```\r\nimport logging\r\nfrom cmreslogging.handlers import CMRESHandler\r\nhandler = CMRESHandler(hosts=[{'host': 'localhost', 'port': 9200}],\r\n                           auth_type=CMRESHandler.AuthType.BASIC_AUTH,\r\n                           auth_details=('myuser','mypassword'),\r\n                           es_index_name=\"log\")\r\n\r\nlog = logging.getLogger(\"BasicLog\")\r\nlog.setLevel(logging.DEBUG)\r\nlog.addHandler(handler)\r\n\r\nlog.info(\"Message 1\")\r\nlog.error(\"Message 2\")\r\nlog.warning(\"Message 3\")\r\n```\r\n\r\nObviously the elasticsearch server is up and running. I got no errors and there is no data on elastic...\r\nWhat am I missing?\r\n\r\nEDIT:\r\nNo index is created in Elasticsearch.\r\n\r\nThanks\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/44", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/44/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/44/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/44", "id": 307601048, "node_id": "MDU6SXNzdWUzMDc2MDEwNDg=", "number": 44, "title": "FileBeats vs elastic logger", "user": {"login": "cyril94440", "id": 2829562, "node_id": "MDQ6VXNlcjI4Mjk1NjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/2829562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cyril94440", "html_url": "https://github.com/cyril94440", "followers_url": "https://api.github.com/users/cyril94440/followers", "following_url": "https://api.github.com/users/cyril94440/following{/other_user}", "gists_url": "https://api.github.com/users/cyril94440/gists{/gist_id}", "starred_url": "https://api.github.com/users/cyril94440/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cyril94440/subscriptions", "organizations_url": "https://api.github.com/users/cyril94440/orgs", "repos_url": "https://api.github.com/users/cyril94440/repos", "events_url": "https://api.github.com/users/cyril94440/events{/privacy}", "received_events_url": "https://api.github.com/users/cyril94440/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-03-22T11:16:39Z", "updated_at": "2018-11-01T13:16:57Z", "closed_at": "2018-11-01T13:16:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there,\r\nThanks for this great library.\r\n\r\nI've read the section about filebeat/logstash VS this library, but there are certain points that I would love to be clarified.\r\n\r\nI understand the point made about retrieving enough info, but how does it compare with using a son-handler with filebeat? \r\nI mean what is the impact of this library at runtime? Will the python script wait for all calls to elastic search to be done before exiting? \r\n\r\nTo summarise, I am wondering how these two approaches impact the current python running script, and if there is a significant difference or it's basically the same. (Maybe Filebeat doesn't fire straight away the request and do it in batch, ...)\r\n\r\nSorry for all these questions, I hope this will help others make an educated decision too.\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/39", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/39/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/39/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/39", "id": 303263316, "node_id": "MDU6SXNzdWUzMDMyNjMzMTY=", "number": 39, "title": "Unfinished sentence in README", "user": {"login": "ExplodingCabbage", "id": 2358339, "node_id": "MDQ6VXNlcjIzNTgzMzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/2358339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ExplodingCabbage", "html_url": "https://github.com/ExplodingCabbage", "followers_url": "https://api.github.com/users/ExplodingCabbage/followers", "following_url": "https://api.github.com/users/ExplodingCabbage/following{/other_user}", "gists_url": "https://api.github.com/users/ExplodingCabbage/gists{/gist_id}", "starred_url": "https://api.github.com/users/ExplodingCabbage/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ExplodingCabbage/subscriptions", "organizations_url": "https://api.github.com/users/ExplodingCabbage/orgs", "repos_url": "https://api.github.com/users/ExplodingCabbage/repos", "events_url": "https://api.github.com/users/ExplodingCabbage/events{/privacy}", "received_events_url": "https://api.github.com/users/ExplodingCabbage/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-07T21:19:45Z", "updated_at": "2018-11-01T13:26:19Z", "closed_at": "2018-11-01T13:25:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "This sentence trails off:\r\n\r\n> All this can be also done from logstash configuration, but it still requires to provide quite a lot of context to", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/38", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/38/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/38/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/38", "id": 286198207, "node_id": "MDU6SXNzdWUyODYxOTgyMDc=", "number": 38, "title": "A painful problem about system crash", "user": {"login": "wjzhangcsu", "id": 11661685, "node_id": "MDQ6VXNlcjExNjYxNjg1", "avatar_url": "https://avatars3.githubusercontent.com/u/11661685?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wjzhangcsu", "html_url": "https://github.com/wjzhangcsu", "followers_url": "https://api.github.com/users/wjzhangcsu/followers", "following_url": "https://api.github.com/users/wjzhangcsu/following{/other_user}", "gists_url": "https://api.github.com/users/wjzhangcsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/wjzhangcsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wjzhangcsu/subscriptions", "organizations_url": "https://api.github.com/users/wjzhangcsu/orgs", "repos_url": "https://api.github.com/users/wjzhangcsu/repos", "events_url": "https://api.github.com/users/wjzhangcsu/events{/privacy}", "received_events_url": "https://api.github.com/users/wjzhangcsu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-01-05T06:01:26Z", "updated_at": "2018-01-06T04:33:59Z", "closed_at": "2018-01-06T04:33:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,I have a painful problem. The project can well run under normal condition. However,when I Ctrl+C my elasticsearch process, my computer can not normally work so that I have to restart it.  In addition, I have receive many logs in my log file. Can you tell me the reasons? Sorry ,my English is poor .", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/37", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/37/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/37/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/37", "id": 285316555, "node_id": "MDU6SXNzdWUyODUzMTY1NTU=", "number": 37, "title": "AWS Fargate error", "user": {"login": "zigius", "id": 13416165, "node_id": "MDQ6VXNlcjEzNDE2MTY1", "avatar_url": "https://avatars1.githubusercontent.com/u/13416165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zigius", "html_url": "https://github.com/zigius", "followers_url": "https://api.github.com/users/zigius/followers", "following_url": "https://api.github.com/users/zigius/following{/other_user}", "gists_url": "https://api.github.com/users/zigius/gists{/gist_id}", "starred_url": "https://api.github.com/users/zigius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zigius/subscriptions", "organizations_url": "https://api.github.com/users/zigius/orgs", "repos_url": "https://api.github.com/users/zigius/repos", "events_url": "https://api.github.com/users/zigius/events{/privacy}", "received_events_url": "https://api.github.com/users/zigius/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-01-01T16:40:31Z", "updated_at": "2018-11-01T13:09:49Z", "closed_at": "2018-11-01T13:09:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nWe are trying to use this package in aws fargate. Our service crashes in the following line: \r\n\r\n'host_ip': socket.gethostbyname(socket.gethostname())})\r\n\r\nwith this error: \r\nsocket.gaierror: [Errno -2] Name or service not known\r\n\r\nThe service is running as a task in a docker container in an unknown host (Fargate launches containers without you having to worry about the underlying ec2 instance. Something along the lines of hostname: 9e3hg54u)\r\n\r\nI am willing to open a pull request if you would like to suggest a proper solution to this problem. \r\n(for starters, it would be nice if the logger does not fail if it cant find an ip :))\r\n\r\nThanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/33", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/33/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/33/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/33", "id": 274194467, "node_id": "MDU6SXNzdWUyNzQxOTQ0Njc=", "number": 33, "title": "Log traceback to ElasticSearch", "user": {"login": "physicalattraction", "id": 7287514, "node_id": "MDQ6VXNlcjcyODc1MTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/7287514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/physicalattraction", "html_url": "https://github.com/physicalattraction", "followers_url": "https://api.github.com/users/physicalattraction/followers", "following_url": "https://api.github.com/users/physicalattraction/following{/other_user}", "gists_url": "https://api.github.com/users/physicalattraction/gists{/gist_id}", "starred_url": "https://api.github.com/users/physicalattraction/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/physicalattraction/subscriptions", "organizations_url": "https://api.github.com/users/physicalattraction/orgs", "repos_url": "https://api.github.com/users/physicalattraction/repos", "events_url": "https://api.github.com/users/physicalattraction/events{/privacy}", "received_events_url": "https://api.github.com/users/physicalattraction/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-11-15T15:21:53Z", "updated_at": "2018-03-23T00:35:48Z", "closed_at": "2018-03-23T00:35:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "In many cases, it would be really useful to have a traceback in the logging. Would it be possible to create a setting for that and when enabled, always create a field `traceback` with the proper traceback from your program.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/32", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/32/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/32/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/32", "id": 271322651, "node_id": "MDU6SXNzdWUyNzEzMjI2NTE=", "number": 32, "title": "AWS ElasticSerch", "user": {"login": "geek876", "id": 3296763, "node_id": "MDQ6VXNlcjMyOTY3NjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/3296763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geek876", "html_url": "https://github.com/geek876", "followers_url": "https://api.github.com/users/geek876/followers", "following_url": "https://api.github.com/users/geek876/following{/other_user}", "gists_url": "https://api.github.com/users/geek876/gists{/gist_id}", "starred_url": "https://api.github.com/users/geek876/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geek876/subscriptions", "organizations_url": "https://api.github.com/users/geek876/orgs", "repos_url": "https://api.github.com/users/geek876/repos", "events_url": "https://api.github.com/users/geek876/events{/privacy}", "received_events_url": "https://api.github.com/users/geek876/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-11-05T22:57:42Z", "updated_at": "2018-11-01T12:26:25Z", "closed_at": "2018-11-01T12:26:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, Trying this\r\n```\r\nimport logging\r\nfrom cmreslogging.handlers import CMRESHandler\r\n\r\nhandler = CMRESHandler(hosts=[{'host': 'http://search-xxxx.es.amazonaws.com', 'port': 80}],\r\n                           auth_type=CMRESHandler.AuthType.AWS_SIGNED_AUTH,\r\n                           use_ssl=False,\r\n                           verify_ssl =False,\r\n                           aws_secret_key='xxxxx',\r\n                           aws_access_key='xxxx',\r\n                           aws_region='eu-west-2',\r\n                           es_index_name=\"my_python_index\")\r\nlog = logging.getLogger(\"PythonTest\")\r\nlog.setLevel(logging.INFO)\r\nlog.addHandler(handler)\r\n```\r\nThe above fails with error\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/x/PycharmProjects/elasticsearch/test.py\", line 11, in <module>\r\n    es_index_name=\"my_python_index\")\r\n  File \"/Users/x/PycharmProjects/VirtualEnvironments/elasticsearch/lib/python2.7/site-packages/cmreslogging/handlers.py\", line 194, in __init__\r\n    'host_ip': socket.gethostbyname(socket.gethostname())})\r\nsocket.gaierror: [Errno 8] nodename nor servname provided, or not known\r\nError in atexit._run_exitfuncs:\r\nTraceback (most recent call last):\r\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/atexit.py\", line 24, in _run_exitfuncs\r\n    func(*targs, **kargs)\r\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/__init__.py\", line 1666, in shutdown\r\n    h.flush()\r\n  File \"/Users/x/PycharmProjects/VirtualEnvironments/elasticsearch/lib/python2.7/site-packages/cmreslogging/handlers.py\", line 283, in flush\r\n    if self._timer is not None and self._timer.is_alive():\r\nAttributeError: 'CMRESHandler' object has no attribute '_timer'\r\nError in sys.exitfunc:\r\nTraceback (most recent call last):\r\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/atexit.py\", line 24, in _run_exitfuncs\r\n    func(*targs, **kargs)\r\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/__init__.py\", line 1666, in shutdown\r\n    h.flush()\r\n  File \"/Users/x/PycharmProjects/VirtualEnvironments/elasticsearch/lib/python2.7/site-packages/cmreslogging/handlers.py\", line 283, in flush\r\n    if self._timer is not None and self._timer.is_alive():\r\nAttributeError: 'CMRESHandler' object has no attribute '_timer'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/28", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/28/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/28/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/28", "id": 244171025, "node_id": "MDU6SXNzdWUyNDQxNzEwMjU=", "number": 28, "title": "MacOSX additional field host_ip calculation failed", "user": {"login": "gghez", "id": 6266247, "node_id": "MDQ6VXNlcjYyNjYyNDc=", "avatar_url": "https://avatars3.githubusercontent.com/u/6266247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gghez", "html_url": "https://github.com/gghez", "followers_url": "https://api.github.com/users/gghez/followers", "following_url": "https://api.github.com/users/gghez/following{/other_user}", "gists_url": "https://api.github.com/users/gghez/gists{/gist_id}", "starred_url": "https://api.github.com/users/gghez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gghez/subscriptions", "organizations_url": "https://api.github.com/users/gghez/orgs", "repos_url": "https://api.github.com/users/gghez/repos", "events_url": "https://api.github.com/users/gghez/events{/privacy}", "received_events_url": "https://api.github.com/users/gghez/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "cmanaha", "id": 6537929, "node_id": "MDQ6VXNlcjY1Mzc5Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/6537929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmanaha", "html_url": "https://github.com/cmanaha", "followers_url": "https://api.github.com/users/cmanaha/followers", "following_url": "https://api.github.com/users/cmanaha/following{/other_user}", "gists_url": "https://api.github.com/users/cmanaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmanaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmanaha/subscriptions", "organizations_url": "https://api.github.com/users/cmanaha/orgs", "repos_url": "https://api.github.com/users/cmanaha/repos", "events_url": "https://api.github.com/users/cmanaha/events{/privacy}", "received_events_url": "https://api.github.com/users/cmanaha/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cmanaha", "id": 6537929, "node_id": "MDQ6VXNlcjY1Mzc5Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/6537929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmanaha", "html_url": "https://github.com/cmanaha", "followers_url": "https://api.github.com/users/cmanaha/followers", "following_url": "https://api.github.com/users/cmanaha/following{/other_user}", "gists_url": "https://api.github.com/users/cmanaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmanaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmanaha/subscriptions", "organizations_url": "https://api.github.com/users/cmanaha/orgs", "repos_url": "https://api.github.com/users/cmanaha/repos", "events_url": "https://api.github.com/users/cmanaha/events{/privacy}", "received_events_url": "https://api.github.com/users/cmanaha/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2017-07-19T20:54:37Z", "updated_at": "2017-11-01T07:54:37Z", "closed_at": "2017-10-08T21:02:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "This code `socket.gethostbyname(socket.gethostname())` is currently failing on Darwin (`import platform: platform.system()` to detect this platform).\r\nhttps://github.com/cmanaha/python-elasticsearch-logger/blob/master/cmreslogging/handlers.py#L194\r\n\r\nAs a MacOSX user, I would like to be able to use your logging handler, but this simple instruction leads to nothing is working.\r\n\r\nDo you think @cmanaha you could add such a check?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/25", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/25/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/25/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/25", "id": 241950604, "node_id": "MDU6SXNzdWUyNDE5NTA2MDQ=", "number": 25, "title": "New version", "user": {"login": "aldbr", "id": 19813740, "node_id": "MDQ6VXNlcjE5ODEzNzQw", "avatar_url": "https://avatars2.githubusercontent.com/u/19813740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldbr", "html_url": "https://github.com/aldbr", "followers_url": "https://api.github.com/users/aldbr/followers", "following_url": "https://api.github.com/users/aldbr/following{/other_user}", "gists_url": "https://api.github.com/users/aldbr/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldbr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldbr/subscriptions", "organizations_url": "https://api.github.com/users/aldbr/orgs", "repos_url": "https://api.github.com/users/aldbr/repos", "events_url": "https://api.github.com/users/aldbr/events{/privacy}", "received_events_url": "https://api.github.com/users/aldbr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 333376210, "node_id": "MDU6TGFiZWwzMzMzNzYyMTA=", "url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "cmanaha", "id": 6537929, "node_id": "MDQ6VXNlcjY1Mzc5Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/6537929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmanaha", "html_url": "https://github.com/cmanaha", "followers_url": "https://api.github.com/users/cmanaha/followers", "following_url": "https://api.github.com/users/cmanaha/following{/other_user}", "gists_url": "https://api.github.com/users/cmanaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmanaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmanaha/subscriptions", "organizations_url": "https://api.github.com/users/cmanaha/orgs", "repos_url": "https://api.github.com/users/cmanaha/repos", "events_url": "https://api.github.com/users/cmanaha/events{/privacy}", "received_events_url": "https://api.github.com/users/cmanaha/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cmanaha", "id": 6537929, "node_id": "MDQ6VXNlcjY1Mzc5Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/6537929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmanaha", "html_url": "https://github.com/cmanaha", "followers_url": "https://api.github.com/users/cmanaha/followers", "following_url": "https://api.github.com/users/cmanaha/following{/other_user}", "gists_url": "https://api.github.com/users/cmanaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmanaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmanaha/subscriptions", "organizations_url": "https://api.github.com/users/cmanaha/orgs", "repos_url": "https://api.github.com/users/cmanaha/repos", "events_url": "https://api.github.com/users/cmanaha/events{/privacy}", "received_events_url": "https://api.github.com/users/cmanaha/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2017-07-11T07:17:47Z", "updated_at": "2017-07-14T07:00:11Z", "closed_at": "2017-07-13T19:14:21Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Hello @cmanaha,\r\n\r\nNow that there is no pull request anymore, is it possible to release a new version of the handler on Pypi ? How can we proceed ? \r\n\r\nThank you in advance", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/24", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/24/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/24/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/24", "id": 241294191, "node_id": "MDU6SXNzdWUyNDEyOTQxOTE=", "number": 24, "title": "Missing log record fields: asctime and message in ElasticSearch", "user": {"login": "aldbr", "id": 19813740, "node_id": "MDQ6VXNlcjE5ODEzNzQw", "avatar_url": "https://avatars2.githubusercontent.com/u/19813740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldbr", "html_url": "https://github.com/aldbr", "followers_url": "https://api.github.com/users/aldbr/followers", "following_url": "https://api.github.com/users/aldbr/following{/other_user}", "gists_url": "https://api.github.com/users/aldbr/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldbr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldbr/subscriptions", "organizations_url": "https://api.github.com/users/aldbr/orgs", "repos_url": "https://api.github.com/users/aldbr/repos", "events_url": "https://api.github.com/users/aldbr/events{/privacy}", "received_events_url": "https://api.github.com/users/aldbr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-07-07T15:11:16Z", "updated_at": "2017-07-10T12:37:58Z", "closed_at": "2017-07-10T12:37:58Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Hello, \r\n\r\nDue to the missing *format* method call in the *emit* handler method, the log record is not formatted if we use your handler as first handler. This implies that the *asctime* and the *message* fields are not created and can not be available in ElasticSearch.\r\nIs it your choice to improve the performances or just a bug ?\r\n\r\nIf it is a bug, I can make a pull request or just complete the current in order to solve the issue.\r\nThank you in advance\r\n  \r\n\r\n  ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/22", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/22/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/22/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/22", "id": 239211420, "node_id": "MDU6SXNzdWUyMzkyMTE0MjA=", "number": 22, "title": "Fail to handle exception log records", "user": {"login": "aldbr", "id": 19813740, "node_id": "MDQ6VXNlcjE5ODEzNzQw", "avatar_url": "https://avatars2.githubusercontent.com/u/19813740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldbr", "html_url": "https://github.com/aldbr", "followers_url": "https://api.github.com/users/aldbr/followers", "following_url": "https://api.github.com/users/aldbr/following{/other_user}", "gists_url": "https://api.github.com/users/aldbr/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldbr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldbr/subscriptions", "organizations_url": "https://api.github.com/users/aldbr/orgs", "repos_url": "https://api.github.com/users/aldbr/repos", "events_url": "https://api.github.com/users/aldbr/events{/privacy}", "received_events_url": "https://api.github.com/users/aldbr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-28T15:52:04Z", "updated_at": "2017-07-10T12:38:07Z", "closed_at": "2017-07-10T12:38:07Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Hello,\r\nI encounter some troubles to send exception log records with your handler, it raises an exception in the flush method and prevents all the buffer to be sent. \r\nAfter some researches, I found the origin of the problem in the elasticsearch module that you use. Inside the module, there is a module named \"serializer.py\" containing a \"JSONSerializer\" class that does not support the exception type contained in the record.exc_info.\r\n\r\nI see two possibilites to resolve the problem, the first is to create your own JSONSerializer which can support the exception type. You can easily pass it in the ElasticSearch constructor like this:\r\n`self._client = Elasticsearch(hosts=self.hosts, serializer=customJSONSerializer(), ...) `\r\n      \r\nIndeed, the elasticsearch module is able to take custom serializer class.\r\nThe second possibility is to test if the record contains an exception type in your emit method, like this:\r\n`if record.exc_info: \r\n   record.exc_info = None`\r\n\r\nPlease, just confirm this bug, I will take care of the fix in a pull request. \r\nThank you in advance ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/21", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/21/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/21/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/21", "id": 237830031, "node_id": "MDU6SXNzdWUyMzc4MzAwMzE=", "number": 21, "title": "flush() is not emptying the buffer if raise_on_indexing_exceptions is true", "user": {"login": "ajallooeian", "id": 4738325, "node_id": "MDQ6VXNlcjQ3MzgzMjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/4738325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajallooeian", "html_url": "https://github.com/ajallooeian", "followers_url": "https://api.github.com/users/ajallooeian/followers", "following_url": "https://api.github.com/users/ajallooeian/following{/other_user}", "gists_url": "https://api.github.com/users/ajallooeian/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajallooeian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajallooeian/subscriptions", "organizations_url": "https://api.github.com/users/ajallooeian/orgs", "repos_url": "https://api.github.com/users/ajallooeian/repos", "events_url": "https://api.github.com/users/ajallooeian/events{/privacy}", "received_events_url": "https://api.github.com/users/ajallooeian/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-06-22T12:31:17Z", "updated_at": "2017-07-10T14:09:02Z", "closed_at": "2017-07-10T14:09:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "The last line of the function is:\r\n\r\nself._buffer = []\r\n\r\nSuggestion: maybe it should be:\r\n\r\nfinally:\r\n    self._buffer = []", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/19", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/19/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/19/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/19", "id": 224429117, "node_id": "MDU6SXNzdWUyMjQ0MjkxMTc=", "number": 19, "title": "Log records get lost if they wind up in the same chunk as a bad log record", "user": {"login": "onnheimm", "id": 16820158, "node_id": "MDQ6VXNlcjE2ODIwMTU4", "avatar_url": "https://avatars0.githubusercontent.com/u/16820158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/onnheimm", "html_url": "https://github.com/onnheimm", "followers_url": "https://api.github.com/users/onnheimm/followers", "following_url": "https://api.github.com/users/onnheimm/following{/other_user}", "gists_url": "https://api.github.com/users/onnheimm/gists{/gist_id}", "starred_url": "https://api.github.com/users/onnheimm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/onnheimm/subscriptions", "organizations_url": "https://api.github.com/users/onnheimm/orgs", "repos_url": "https://api.github.com/users/onnheimm/repos", "events_url": "https://api.github.com/users/onnheimm/events{/privacy}", "received_events_url": "https://api.github.com/users/onnheimm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-04-26T11:04:17Z", "updated_at": "2017-07-10T15:13:37Z", "closed_at": "2017-07-10T15:13:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "When some log records contain data that cannot be serialized, log records in the same chunk get lost. The following code provokes the issue.\r\n\r\n```\r\nimport logging\r\nfrom cmreslogging.handlers import CMRESHandler\r\n\r\nh = CMRESHandler(hosts = [dict(host='localhost',port=9200)],es_index_name = 'debug', raise_on_indexing_exceptions=False)\r\nlog = logging.getLogger(__name__)\r\nlog.setLevel(logging.INFO)\r\nlog.addHandler(h)\r\n\r\nimport numpy as np\r\n\r\nbad_data = np.int64(1)   #unserializable by json module\r\ngood_data = 1\r\n\r\n\r\nfor i in range(100):\r\n    log.info('Test', extra = dict(a_number = bad_data)) \r\n    log.info('Test', extra = dict(a_number = good_data))  #this also gets lost\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/14", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/14/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/14/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/14", "id": 213415316, "node_id": "MDU6SXNzdWUyMTM0MTUzMTY=", "number": 14, "title": "Readme should be updated -> cmreslogging.handlers", "user": {"login": "razem-io", "id": 2088773, "node_id": "MDQ6VXNlcjIwODg3NzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/2088773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/razem-io", "html_url": "https://github.com/razem-io", "followers_url": "https://api.github.com/users/razem-io/followers", "following_url": "https://api.github.com/users/razem-io/following{/other_user}", "gists_url": "https://api.github.com/users/razem-io/gists{/gist_id}", "starred_url": "https://api.github.com/users/razem-io/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/razem-io/subscriptions", "organizations_url": "https://api.github.com/users/razem-io/orgs", "repos_url": "https://api.github.com/users/razem-io/repos", "events_url": "https://api.github.com/users/razem-io/events{/privacy}", "received_events_url": "https://api.github.com/users/razem-io/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-10T18:23:12Z", "updated_at": "2017-04-14T14:49:10Z", "closed_at": "2017-04-13T10:42:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nthank you for this lib! It took me some minutes to figure out that the readme has an error;\r\n\r\n```from cmrlogging.handlers import CMRESHandler```\r\n\r\nshould be\r\n\r\n```from cmreslogging.handlers import CMRESHandler```\r\n\r\nCheers,\r\nJulian", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/13", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/13/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/13/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/13", "id": 211075743, "node_id": "MDU6SXNzdWUyMTEwNzU3NDM=", "number": 13, "title": "Log records get lost", "user": {"login": "hstadler", "id": 14219060, "node_id": "MDQ6VXNlcjE0MjE5MDYw", "avatar_url": "https://avatars1.githubusercontent.com/u/14219060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hstadler", "html_url": "https://github.com/hstadler", "followers_url": "https://api.github.com/users/hstadler/followers", "following_url": "https://api.github.com/users/hstadler/following{/other_user}", "gists_url": "https://api.github.com/users/hstadler/gists{/gist_id}", "starred_url": "https://api.github.com/users/hstadler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hstadler/subscriptions", "organizations_url": "https://api.github.com/users/hstadler/orgs", "repos_url": "https://api.github.com/users/hstadler/repos", "events_url": "https://api.github.com/users/hstadler/events{/privacy}", "received_events_url": "https://api.github.com/users/hstadler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-03-01T13:05:48Z", "updated_at": "2017-07-10T13:07:58Z", "closed_at": "2017-07-10T13:07:58Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI face the problem that some log messages are not sent to Elasticsearch. The reason seems to be that the buffer is not thread safe because `flush` is called concurrently by the flush timer. As a result, when the flush timer calls `flush`, there is a good chance that log records that were appended to the buffer by `emit` in the meantime get lost.\r\nDisabling the timer might solve the problem. But it has to be ensured that log messages from the elasticsearch library (which are generated during `flush`) are filtered, otherwise a _maximum recursion depth exceeded_ exception can occur.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/9", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/9/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/9/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/9", "id": 199559247, "node_id": "MDU6SXNzdWUxOTk1NTkyNDc=", "number": 9, "title": "Message is empty", "user": {"login": "hstadler", "id": 14219060, "node_id": "MDQ6VXNlcjE0MjE5MDYw", "avatar_url": "https://avatars1.githubusercontent.com/u/14219060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hstadler", "html_url": "https://github.com/hstadler", "followers_url": "https://api.github.com/users/hstadler/followers", "following_url": "https://api.github.com/users/hstadler/following{/other_user}", "gists_url": "https://api.github.com/users/hstadler/gists{/gist_id}", "starred_url": "https://api.github.com/users/hstadler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hstadler/subscriptions", "organizations_url": "https://api.github.com/users/hstadler/orgs", "repos_url": "https://api.github.com/users/hstadler/repos", "events_url": "https://api.github.com/users/hstadler/events{/privacy}", "received_events_url": "https://api.github.com/users/hstadler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "cmanaha", "id": 6537929, "node_id": "MDQ6VXNlcjY1Mzc5Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/6537929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmanaha", "html_url": "https://github.com/cmanaha", "followers_url": "https://api.github.com/users/cmanaha/followers", "following_url": "https://api.github.com/users/cmanaha/following{/other_user}", "gists_url": "https://api.github.com/users/cmanaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmanaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmanaha/subscriptions", "organizations_url": "https://api.github.com/users/cmanaha/orgs", "repos_url": "https://api.github.com/users/cmanaha/repos", "events_url": "https://api.github.com/users/cmanaha/events{/privacy}", "received_events_url": "https://api.github.com/users/cmanaha/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cmanaha", "id": 6537929, "node_id": "MDQ6VXNlcjY1Mzc5Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/6537929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmanaha", "html_url": "https://github.com/cmanaha", "followers_url": "https://api.github.com/users/cmanaha/followers", "following_url": "https://api.github.com/users/cmanaha/following{/other_user}", "gists_url": "https://api.github.com/users/cmanaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmanaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmanaha/subscriptions", "organizations_url": "https://api.github.com/users/cmanaha/orgs", "repos_url": "https://api.github.com/users/cmanaha/repos", "events_url": "https://api.github.com/users/cmanaha/events{/privacy}", "received_events_url": "https://api.github.com/users/cmanaha/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2017-01-09T14:02:32Z", "updated_at": "2017-02-28T17:24:13Z", "closed_at": "2017-01-17T00:43:29Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm having a problem using _args_ in log calls, as this leads to an empty `message` (the log record seems not have this attribute) when this is the only logging handler. For example a `log.info('The value is: %s', some_value)` gives me an empty `message` and `msg` just holds the log string `The value is: %s` (without the _args_ substituted).\r\n\r\nNot sure if I'm using it wrong or how to get the whole log message transmitted. I would be glad if you can give me a hint. Thx!\r\n\r\nI'm using `logging.config.dictConfig` to configure logging with the following dict:\r\n```\r\n{\r\n\t\"version\": 1,\r\n\t\"incremental\": false,\r\n\t\"formatters\":\r\n\t{\r\n\t\t\"simple\":\r\n\t\t{\r\n\t\t\t\"format\": \"%(message)s\"\r\n\t\t}\r\n\t},\r\n\t\"handlers\":\r\n\t{\r\n\t\t\"elasticsearch\":\r\n\t\t{\r\n\t\t\t\"class\": \"cmreshandler.cmreshandler.CMRESHandler\",\r\n\t\t\t\"level\": \"DEBUG\",\r\n\t\t\t\"formatter\": \"simple\",\r\n\t\t\t\"hosts\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"host\": \"127.0.0.1\",\r\n\t\t\t\t\t\"port\": 9200\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t\"auth_type\": \"ext://cmreshandler.cmreshandler.CMRESHandler.AuthType.NO_AUTH\",\r\n\t\t\t\"es_index_name\": \"myapp\"\r\n\t\t}\r\n\t},\r\n\t\"root\":\r\n\t{\r\n\t\t\"level\": \"DEBUG\",\r\n\t\t\"handlers\": [\"elasticsearch\"]\r\n\t}\r\n}\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/7", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/7/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/7/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/7", "id": 189475333, "node_id": "MDU6SXNzdWUxODk0NzUzMzM=", "number": 7, "title": "Review", "user": {"login": "liampauling", "id": 12016537, "node_id": "MDQ6VXNlcjEyMDE2NTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/12016537?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liampauling", "html_url": "https://github.com/liampauling", "followers_url": "https://api.github.com/users/liampauling/followers", "following_url": "https://api.github.com/users/liampauling/following{/other_user}", "gists_url": "https://api.github.com/users/liampauling/gists{/gist_id}", "starred_url": "https://api.github.com/users/liampauling/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liampauling/subscriptions", "organizations_url": "https://api.github.com/users/liampauling/orgs", "repos_url": "https://api.github.com/users/liampauling/repos", "events_url": "https://api.github.com/users/liampauling/events{/privacy}", "received_events_url": "https://api.github.com/users/liampauling/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-11-15T18:53:23Z", "updated_at": "2017-01-17T00:43:29Z", "closed_at": "2017-01-17T00:43:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nWant to start using this in production as it looks to be a lot easier than using logstash however I found issues with the following:\r\n\r\n- socket.gethostbyname(socket.gethostname()) causes an error when used locally on my MBP\r\n\r\n- If the index doesn't already exist there is no error, add function to check index exists at the start?\r\n\r\n- A new client is created on each flush, is this needed?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/3", "repository_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger", "labels_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/3/comments", "events_url": "https://api.github.com/repos/cmanaha/python-elasticsearch-logger/issues/3/events", "html_url": "https://github.com/cmanaha/python-elasticsearch-logger/issues/3", "id": 150119604, "node_id": "MDU6SXNzdWUxNTAxMTk2MDQ=", "number": 3, "title": "pip install CRMESHandler fails", "user": {"login": "existeundelta", "id": 10629543, "node_id": "MDQ6VXNlcjEwNjI5NTQz", "avatar_url": "https://avatars0.githubusercontent.com/u/10629543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/existeundelta", "html_url": "https://github.com/existeundelta", "followers_url": "https://api.github.com/users/existeundelta/followers", "following_url": "https://api.github.com/users/existeundelta/following{/other_user}", "gists_url": "https://api.github.com/users/existeundelta/gists{/gist_id}", "starred_url": "https://api.github.com/users/existeundelta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/existeundelta/subscriptions", "organizations_url": "https://api.github.com/users/existeundelta/orgs", "repos_url": "https://api.github.com/users/existeundelta/repos", "events_url": "https://api.github.com/users/existeundelta/events{/privacy}", "received_events_url": "https://api.github.com/users/existeundelta/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-04-21T16:10:28Z", "updated_at": "2016-08-25T18:34:26Z", "closed_at": "2016-08-25T18:34:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "it says:\nCollecting CRMESHandler\n  Could not find a version that satisfies the requirement CRMESHandler (from versions: )\nNo matching distribution found for CRMESHandler\n", "performed_via_github_app": null, "score": 1.0}]}