{"total_count": 14907, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35827", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35827/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35827/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35827/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35827", "id": 682937600, "node_id": "MDU6SXNzdWU2ODI5Mzc2MDA=", "number": 35827, "title": "BUG: Same Directory copy.py incompatibility.", "user": {"login": "Tazarus", "id": 69982590, "node_id": "MDQ6VXNlcjY5OTgyNTkw", "avatar_url": "https://avatars1.githubusercontent.com/u/69982590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tazarus", "html_url": "https://github.com/Tazarus", "followers_url": "https://api.github.com/users/Tazarus/followers", "following_url": "https://api.github.com/users/Tazarus/following{/other_user}", "gists_url": "https://api.github.com/users/Tazarus/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tazarus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tazarus/subscriptions", "organizations_url": "https://api.github.com/users/Tazarus/orgs", "repos_url": "https://api.github.com/users/Tazarus/repos", "events_url": "https://api.github.com/users/Tazarus/events{/privacy}", "received_events_url": "https://api.github.com/users/Tazarus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-20T17:22:48Z", "updated_at": "2020-08-20T18:18:47Z", "closed_at": "2020-08-20T17:50:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Problem description\r\nIf you are importing pandas into a script which shares a folder with another python script named copy.py pandas fails to import and the script cannot execute.\r\n\r\nI would recommend changing the duplicate name in the pandas code to something less accidentally callable (perhaps simply add a few numbers or symbols afterward), but overall this is a very minor issue that I suspect very few people will run into.\r\n\r\n- [Yes] I have checked that this issue has not already been reported.\r\n\r\n- [Yes] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [No] (optional) I have confirmed this bug exists on the master branch of pandas.\r\nApologies unsure how.\r\n---\r\n\r\n#### Code Sample\r\n\r\n```python\r\nimport pandas as pd\r\nprint(yes)\r\n```\r\n\r\n#### Expected Output\r\n```python\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\n  File \"C:\\Coding\\JetBrains\\PyCharm 2020.2\\plugins\\python\\helpers\\pydev\\_pydev_bundle\\pydev_umd.py\", line 197, in runfile\r\n    pydev_imports.execfile(filename, global_vars, local_vars)  # execute the script\r\n  File \"C:\\Coding\\JetBrains\\PyCharm 2020.2\\plugins\\python\\helpers\\pydev\\_pydev_imps\\_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"C:/Users/Christian/PycharmProjects/pythonProject/Workspace.py\", line 1, in <module>\r\n    import pandas as pd\r\n  File \"C:\\Coding\\JetBrains\\PyCharm 2020.2\\plugins\\python\\helpers\\pydev\\_pydev_bundle\\pydev_import_hook.py\", line 21, in do_import\r\n    module = self._system_import(name, *args, **kwargs)\r\n  File \"C:\\Anaconda3\\envs\\pythonProject\\lib\\site-packages\\pandas\\__init__.py\", line 52, in <module>\r\n    from pandas.core.api import (\r\n  File \"C:\\Coding\\JetBrains\\PyCharm 2020.2\\plugins\\python\\helpers\\pydev\\_pydev_bundle\\pydev_import_hook.py\", line 21, in do_import\r\n    module = self._system_import(name, *args, **kwargs)\r\n  File \"C:\\Anaconda3\\envs\\pythonProject\\lib\\site-packages\\pandas\\core\\api.py\", line 15, in <module>\r\n    from pandas.core.arrays import Categorical\r\n  File \"C:\\Coding\\JetBrains\\PyCharm 2020.2\\plugins\\python\\helpers\\pydev\\_pydev_bundle\\pydev_import_hook.py\", line 21, in do_import\r\n    module = self._system_import(name, *args, **kwargs)\r\n  File \"C:\\Anaconda3\\envs\\pythonProject\\lib\\site-packages\\pandas\\core\\arrays\\__init__.py\", line 10, in <module>\r\n    from pandas.core.arrays.interval import IntervalArray\r\n  File \"C:\\Coding\\JetBrains\\PyCharm 2020.2\\plugins\\python\\helpers\\pydev\\_pydev_bundle\\pydev_import_hook.py\", line 21, in do_import\r\n    module = self._system_import(name, *args, **kwargs)\r\n  File \"C:\\Anaconda3\\envs\\pythonProject\\lib\\site-packages\\pandas\\core\\arrays\\interval.py\", line 43, in <module>\r\n    from pandas.core.indexes.base import ensure_index\r\n  File \"C:\\Coding\\JetBrains\\PyCharm 2020.2\\plugins\\python\\helpers\\pydev\\_pydev_bundle\\pydev_import_hook.py\", line 21, in do_import\r\n    module = self._system_import(name, *args, **kwargs)\r\n  File \"C:\\Anaconda3\\envs\\pythonProject\\lib\\site-packages\\pandas\\core\\indexes\\base.py\", line 1, in <module>\r\n    from copy import copy as copy_func\r\nImportError: cannot import name 'copy' from 'copy' (C:\\Users\\Christian\\PycharmProjects\\pythonProject\\copy.py)\r\n\r\n```\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\nNote: This is my first attempt at bug reporting, and am very new to this, and I don't have as much time as I would have liked to ensure I'm posting this in the correct place. If this should be reported to JetBrains instead or simply somewhere else on the site please let me know and I'll do my best to update/fix it promptly. \r\n\r\nI am using Jetbrains Pycharm Professional IDE and found that having a python file named copy.py in the same project folder (windows folder) causes some kind of check/name confusion when pandas is importing. This happened by accident as I have been lately using copy.py as a dummy backup of working versions of code while working on improvements. I discovered the issue by accident.\r\n\r\nA screenshot of the issue\r\n![image](https://user-images.githubusercontent.com/69982590/90804338-7ae3cf80-e2f0-11ea-92a3-ca06ec65bc2c.png)\r\n\r\nA screenshot of the issue not occurring under identical circumstances but when copy.py is renamed to copy2.py\r\n![image](https://user-images.githubusercontent.com/69982590/90804431-96e77100-e2f0-11ea-8a6b-24b4de70b128.png)\r\n\r\n\r\n[paste the output of ``pd.show_versions()`` here leaving a blank line after the details tag]\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.5.final.0\r\npython-bits      : 64\r\nOS               : Windows\r\nOS-release       : 10\r\nVersion          : 10.0.18362\r\nmachine          : AMD64\r\nprocessor        : AMD64 Family 23 Model 8 Stepping 2, AuthenticAMD\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : English_Canada.1252\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2.2\r\nsetuptools       : 49.6.0.post20200814\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.3.1\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35817", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35817/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35817/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35817/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35817", "id": 682481162, "node_id": "MDU6SXNzdWU2ODI0ODExNjI=", "number": 35817, "title": "BUG: error in reduction.pyx file while building pandas from source with setup.py file", "user": {"login": "akshaymanu007", "id": 61832477, "node_id": "MDQ6VXNlcjYxODMyNDc3", "avatar_url": "https://avatars3.githubusercontent.com/u/61832477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akshaymanu007", "html_url": "https://github.com/akshaymanu007", "followers_url": "https://api.github.com/users/akshaymanu007/followers", "following_url": "https://api.github.com/users/akshaymanu007/following{/other_user}", "gists_url": "https://api.github.com/users/akshaymanu007/gists{/gist_id}", "starred_url": "https://api.github.com/users/akshaymanu007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akshaymanu007/subscriptions", "organizations_url": "https://api.github.com/users/akshaymanu007/orgs", "repos_url": "https://api.github.com/users/akshaymanu007/repos", "events_url": "https://api.github.com/users/akshaymanu007/events{/privacy}", "received_events_url": "https://api.github.com/users/akshaymanu007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-20T07:15:40Z", "updated_at": "2020-08-20T07:46:02Z", "closed_at": "2020-08-20T07:23:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am compiling pandas1.10 from source with the help of setup.py\r\n\r\nIt is showing me following error in reduction.pyx file \r\n\r\n        self.orig_data = self.buf.data\r\n        self.orig_len = self.buf.shape[0]\r\n        self.orig_stride = self.buf.strides[0]\r\n\r\n        self.buf.data = self.values.data\r\n               ^\r\n------------------------------------------------------------\r\n\r\npandas/_libs/reduction.pyx:313:16: Assignment to a read-only property\r\n\r\nError compiling Cython file:\r\n\r\n\r\nenviornment :  Linux opensuze\r\npython version : 3.7.9", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35813", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35813/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35813/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35813/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35813", "id": 682247454, "node_id": "MDU6SXNzdWU2ODIyNDc0NTQ=", "number": 35813, "title": "CI: Failures due to pyarrow 0.11 in Travis 37 Locale Build ", "user": {"login": "alimcmaster1", "id": 16733618, "node_id": "MDQ6VXNlcjE2NzMzNjE4", "avatar_url": "https://avatars1.githubusercontent.com/u/16733618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alimcmaster1", "html_url": "https://github.com/alimcmaster1", "followers_url": "https://api.github.com/users/alimcmaster1/followers", "following_url": "https://api.github.com/users/alimcmaster1/following{/other_user}", "gists_url": "https://api.github.com/users/alimcmaster1/gists{/gist_id}", "starred_url": "https://api.github.com/users/alimcmaster1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alimcmaster1/subscriptions", "organizations_url": "https://api.github.com/users/alimcmaster1/orgs", "repos_url": "https://api.github.com/users/alimcmaster1/repos", "events_url": "https://api.github.com/users/alimcmaster1/events{/privacy}", "received_events_url": "https://api.github.com/users/alimcmaster1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 48070600, "node_id": "MDU6TGFiZWw0ODA3MDYwMA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/CI", "name": "CI", "color": "a2bca7", "default": false, "description": "Related to Continuous Integration"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/76", "html_url": "https://github.com/pandas-dev/pandas/milestone/76", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/76/labels", "id": 5781056, "node_id": "MDk6TWlsZXN0b25lNTc4MTA1Ng==", "number": 76, "title": "1.1.2", "description": "on-merge: backport to 1.1.x", "creator": {"login": "simonjayhawkins", "id": 13159005, "node_id": "MDQ6VXNlcjEzMTU5MDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/13159005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonjayhawkins", "html_url": "https://github.com/simonjayhawkins", "followers_url": "https://api.github.com/users/simonjayhawkins/followers", "following_url": "https://api.github.com/users/simonjayhawkins/following{/other_user}", "gists_url": "https://api.github.com/users/simonjayhawkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonjayhawkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonjayhawkins/subscriptions", "organizations_url": "https://api.github.com/users/simonjayhawkins/orgs", "repos_url": "https://api.github.com/users/simonjayhawkins/repos", "events_url": "https://api.github.com/users/simonjayhawkins/events{/privacy}", "received_events_url": "https://api.github.com/users/simonjayhawkins/received_events", "type": "User", "site_admin": false}, "open_issues": 23, "closed_issues": 7, "state": "open", "created_at": "2020-08-17T19:11:56Z", "updated_at": "2020-08-21T09:08:08Z", "due_on": "2020-09-06T07:00:00Z", "closed_at": null}, "comments": 2, "created_at": "2020-08-19T23:30:50Z", "updated_at": "2020-08-20T21:26:05Z", "closed_at": "2020-08-20T21:26:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Looks like recently the Travis 37 Locale Build has started picking up pyarrow 0.11.1\r\n\r\nhttps://travis-ci.org/github/pandas-dev/pandas/jobs/719430999\r\npyarrow                   0.11.1           py37he6710b0_0 \r\n\r\nThis causes the pyarrow tests to run which seem to be failing.\r\n\r\nPreviously no pyarrow in env: https://travis-ci.org/github/pandas-dev/pandas/jobs/719138849 (passing build)\r\n\r\nFeels like one of our deps has started to depend to pyarrow.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35810", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35810/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35810/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35810/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35810", "id": 682157908, "node_id": "MDU6SXNzdWU2ODIxNTc5MDg=", "number": 35810, "title": "ENH: dataframe to markdown doesn't have option to hide index", "user": {"login": "bgmello", "id": 37581842, "node_id": "MDQ6VXNlcjM3NTgxODQy", "avatar_url": "https://avatars0.githubusercontent.com/u/37581842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bgmello", "html_url": "https://github.com/bgmello", "followers_url": "https://api.github.com/users/bgmello/followers", "following_url": "https://api.github.com/users/bgmello/following{/other_user}", "gists_url": "https://api.github.com/users/bgmello/gists{/gist_id}", "starred_url": "https://api.github.com/users/bgmello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bgmello/subscriptions", "organizations_url": "https://api.github.com/users/bgmello/orgs", "repos_url": "https://api.github.com/users/bgmello/repos", "events_url": "https://api.github.com/users/bgmello/events{/privacy}", "received_events_url": "https://api.github.com/users/bgmello/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76812, "node_id": "MDU6TGFiZWw3NjgxMg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Enhancement", "name": "Enhancement", "color": "4E9A06", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-19T20:27:31Z", "updated_at": "2020-08-19T20:29:27Z", "closed_at": "2020-08-19T20:29:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Suppose I have the following `pd.DataFrame`:\r\n\r\n```\r\ndf = pd.DataFrame({'a': [1,2,3], 'b': [4,5,6]})\r\n```\r\n\r\nIf I want to print it without the index, I could do:\r\n\r\nTo string:\r\n```\r\ndf.to_string(index=False)\r\n```\r\n\r\nTo html:\r\n```\r\ndf.to_html(index=False)\r\n```\r\n\r\nTo json:\r\n```\r\ndf.to_json(index=False, orient='table')\r\n```\r\n\r\nBut it fails in `to_markdown`:\r\n\r\n```\r\ndf.to_markdown(index=False)\r\n\r\nTypeError: tabulate() got an unexpected keyword argument 'index'\r\n``` \r\n\r\nShouldn't `to_markdown` method have the option to hide the index too?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35786", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35786/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35786/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35786/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35786", "id": 680981283, "node_id": "MDU6SXNzdWU2ODA5ODEyODM=", "number": 35786, "title": "ENH: round(inplace=True)", "user": {"login": "Peters-D", "id": 55878267, "node_id": "MDQ6VXNlcjU1ODc4MjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/55878267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Peters-D", "html_url": "https://github.com/Peters-D", "followers_url": "https://api.github.com/users/Peters-D/followers", "following_url": "https://api.github.com/users/Peters-D/following{/other_user}", "gists_url": "https://api.github.com/users/Peters-D/gists{/gist_id}", "starred_url": "https://api.github.com/users/Peters-D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Peters-D/subscriptions", "organizations_url": "https://api.github.com/users/Peters-D/orgs", "repos_url": "https://api.github.com/users/Peters-D/repos", "events_url": "https://api.github.com/users/Peters-D/events{/privacy}", "received_events_url": "https://api.github.com/users/Peters-D/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76812, "node_id": "MDU6TGFiZWw3NjgxMg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Enhancement", "name": "Enhancement", "color": "4E9A06", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2020-08-18T11:55:05Z", "updated_at": "2020-08-18T13:26:51Z", "closed_at": "2020-08-18T13:26:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Is your feature request related to a problem?\r\n\r\nI frequently round numerical columns in my dataframe to two decimals using `pandas.DataFrame.round`. I would like to do this inplace, since it will make code simpler and presumable less prone to errors.\r\n\r\n#### Describe the solution you'd like\r\n`DataFrame.round` should get a new argument `inplace` such that if `True` the operation is done inplace. I think `DataFrame.apply` could also improve from this enhancement.\r\n\r\n#### Example code\r\n```python\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\ndf = pd.DataFrame({\"foo\": [1.11, 2.22, 3.33, 4.44, 5.55],\r\n                   \"bar\": [6.66, 7.77, 8.88, 9.99, np.nan]})\r\n\r\n# e.g. dropna() works with inplace\r\ndf.dropna(inplace=True)\r\n\r\n# but round() does not\r\ndf[\"foo\"] = df[\"foo\"].round(1)\r\n\r\n# I would like a feature like:\r\ndf[\"foo\"].round(1, inplace=True) # does not run\r\n\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35781", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35781/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35781/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35781/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35781", "id": 680616394, "node_id": "MDU6SXNzdWU2ODA2MTYzOTQ=", "number": 35781, "title": "BUG: Series.replace doesn't distinguish single and double quotes", "user": {"login": "dsaxton", "id": 2658661, "node_id": "MDQ6VXNlcjI2NTg2NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/2658661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsaxton", "html_url": "https://github.com/dsaxton", "followers_url": "https://api.github.com/users/dsaxton/followers", "following_url": "https://api.github.com/users/dsaxton/following{/other_user}", "gists_url": "https://api.github.com/users/dsaxton/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsaxton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsaxton/subscriptions", "organizations_url": "https://api.github.com/users/dsaxton/orgs", "repos_url": "https://api.github.com/users/dsaxton/repos", "events_url": "https://api.github.com/users/dsaxton/events{/privacy}", "received_events_url": "https://api.github.com/users/dsaxton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 57522093, "node_id": "MDU6TGFiZWw1NzUyMjA5Mw==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Strings", "name": "Strings", "color": "5319e7", "default": false, "description": "String extension data type and string data"}, {"id": 1652721180, "node_id": "MDU6TGFiZWwxNjUyNzIxMTgw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/replace", "name": "replace", "color": "01a886", "default": false, "description": "replace method"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2020-08-18T01:10:35Z", "updated_at": "2020-08-18T11:18:53Z", "closed_at": "2020-08-18T11:05:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n- [x] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\nIf we try to replace the single quotes in a string with double quotes or vice versa using Series.replace it doesn't work (Series.str.replace does):\r\n\r\n```python\r\nimport pandas as pd\r\n\r\nprint(pd.__version__)\r\n# 1.2.0.dev0+112.g0d0f53f3c\r\nprint(pd.Series([\" ' ' \"]).replace(\"'\", '\"'))\r\n# 0     ' ' \r\n# dtype: object\r\nprint(pd.Series([\" ' ' \"]).str.replace(\"'\", '\"'))\r\n# 0     \" \" \r\n# dtype: object\r\n\r\npd.Series([' \" \" ']).replace('\"', \"'\")\r\n# 0     \" \"\r\n# dtype: object\r\npd.Series([' \" \" ']).str.replace('\"', \"'\")\r\n# 0     ' '\r\n# dtype: object\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35779", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35779/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35779/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35779/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35779", "id": 680615545, "node_id": "MDU6SXNzdWU2ODA2MTU1NDU=", "number": 35779, "title": "CI: unpin numpy and matplotlib", "user": {"login": "VirosaLi", "id": 7614606, "node_id": "MDQ6VXNlcjc2MTQ2MDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7614606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VirosaLi", "html_url": "https://github.com/VirosaLi", "followers_url": "https://api.github.com/users/VirosaLi/followers", "following_url": "https://api.github.com/users/VirosaLi/following{/other_user}", "gists_url": "https://api.github.com/users/VirosaLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/VirosaLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VirosaLi/subscriptions", "organizations_url": "https://api.github.com/users/VirosaLi/orgs", "repos_url": "https://api.github.com/users/VirosaLi/repos", "events_url": "https://api.github.com/users/VirosaLi/events{/privacy}", "received_events_url": "https://api.github.com/users/VirosaLi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 48070600, "node_id": "MDU6TGFiZWw0ODA3MDYwMA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/CI", "name": "CI", "color": "a2bca7", "default": false, "description": "Related to Continuous Integration"}, {"id": 527603109, "node_id": "MDU6TGFiZWw1Mjc2MDMxMDk=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Dependencies", "name": "Dependencies", "color": "d93f0b", "default": false, "description": "Related to pandas required and optional  dependencies"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 2, "created_at": "2020-08-18T01:07:53Z", "updated_at": "2020-08-19T20:40:05Z", "closed_at": "2020-08-19T20:40:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "revert #35312 and #35358", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35771", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35771/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35771/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35771/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35771", "id": 680325158, "node_id": "MDU6SXNzdWU2ODAzMjUxNTg=", "number": 35771, "title": "BUG: df.replace() ", "user": {"login": "wjziv", "id": 29553646, "node_id": "MDQ6VXNlcjI5NTUzNjQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/29553646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wjziv", "html_url": "https://github.com/wjziv", "followers_url": "https://api.github.com/users/wjziv/followers", "following_url": "https://api.github.com/users/wjziv/following{/other_user}", "gists_url": "https://api.github.com/users/wjziv/gists{/gist_id}", "starred_url": "https://api.github.com/users/wjziv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wjziv/subscriptions", "organizations_url": "https://api.github.com/users/wjziv/orgs", "repos_url": "https://api.github.com/users/wjziv/repos", "events_url": "https://api.github.com/users/wjziv/events{/privacy}", "received_events_url": "https://api.github.com/users/wjziv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-17T15:31:36Z", "updated_at": "2020-08-17T18:48:03Z", "closed_at": "2020-08-17T18:48:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [X] I have checked that this issue has not already been reported.\r\n\r\n- [X] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [X] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\n\r\ndf = pd.DataFrame.from_dict(\r\n    {\r\n        'a_original': ['w', 'x', 'y', 'z', 'w', 'x', 'y', 'z'],\r\n        'a_expected': ['w', 'x', 'y', 'z', 'w', 'x', 'y', 'z'],\r\n        'a_result': ['w', 'x', 'y', 'z', 'w', 'x', 'y', 'z'],\r\n        'b_original': ['w', 'x', 'y', 'z', 'z', 'y', 'x', 'w'],\r\n        'b_expected': ['w', 'x', 'y', 'z', 'z', 'y', 'x', 'w'],\r\n        'b_result': ['w', 'x', 'y', 'z', 'z', 'y', 'x', 'w']\r\n    }\r\n)\r\n\r\n# Produces expectation.\r\ndf.replace(\r\n    {column: {replace: None for replace in ['x', 'z']} for column in ['a_expected', 'b_expected']},\r\n    inplace=True\r\n)\r\n\r\n# Does not produce expectation.\r\ndf.replace(\r\n    {column: ['x', 'z'] for column in ['a_result', 'b_result']},\r\n    {column: None for column in ['a_result', 'b_result']},\r\n    inplace=True\r\n)\r\n\r\n>>\r\n  a_original a_expected a_result b_original b_expected b_result\r\n0          w          w        w          w          w        w\r\n1          x       None        w          x       None        w\r\n2          y          y        y          y          y        y\r\n3          z       None        y          z       None        y\r\n4          w          w        w          z       None        y\r\n5          x       None        w          y          y        y\r\n6          y          y        y          x       None        y\r\n7          z       None        y          w          w        w\r\n```\r\n\r\n#### Problem description\r\n`df.replace()` has multiple ways to define which values in which columns ought to be replaced. I expected the two uses of `df.replace()` above to be equivalent, but the second does not replace the values \"x\" and \"z\" in the declared columns with `None`. Instead, some form of filling/padding is used.\r\n\r\n#### Expected Output\r\nThe second instance of `df.replace()` should be the same as the first; all instances of \"x\" and \"z\" should be replaced with `None`, but there seems to be a default usage of `method` underneath; this result remains the case, no matter what is entered into `method`.\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.6.9.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 4.19.112+\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.0.5\r\nnumpy            : 1.18.5\r\npytz             : 2018.9\r\ndateutil         : 2.8.1\r\npip              : 19.3.1\r\nsetuptools       : 49.2.0\r\nCython           : 0.29.21\r\npytest           : 3.6.4\r\nhypothesis       : None\r\nsphinx           : 1.8.5\r\nblosc            : None\r\nfeather          : 0.4.1\r\nxlsxwriter       : 1.3.3\r\nlxml.etree       : 4.2.6\r\nhtml5lib         : 1.0.1\r\npymysql          : None\r\npsycopg2         : 2.7.6.1 (dt dec pq3 ext lo64)\r\njinja2           : 2.11.2\r\nIPython          : 5.5.0\r\npandas_datareader: 0.8.1\r\nbs4              : 4.6.3\r\nbottleneck       : 1.3.2\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : 4.2.6\r\nmatplotlib       : 3.2.2\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 2.5.9\r\npandas_gbq       : 0.11.0\r\npyarrow          : 1.0.0\r\npytables         : None\r\npytest           : 3.6.4\r\npyxlsb           : None\r\ns3fs             : 0.4.2\r\nscipy            : 1.4.1\r\nsqlalchemy       : 1.3.18\r\ntables           : 3.4.4\r\ntabulate         : 0.8.7\r\nxarray           : 0.15.1\r\nxlrd             : 1.1.0\r\nxlwt             : 1.3.0\r\nxlsxwriter       : 1.3.3\r\nnumba            : 0.48.0\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35768", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35768/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35768/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35768/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35768", "id": 680178696, "node_id": "MDU6SXNzdWU2ODAxNzg2OTY=", "number": 35768, "title": "ExtensionBlock.take_nd crashes in 1.1.0", "user": {"login": "vmarkovtsev", "id": 2793551, "node_id": "MDQ6VXNlcjI3OTM1NTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/2793551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmarkovtsev", "html_url": "https://github.com/vmarkovtsev", "followers_url": "https://api.github.com/users/vmarkovtsev/followers", "following_url": "https://api.github.com/users/vmarkovtsev/following{/other_user}", "gists_url": "https://api.github.com/users/vmarkovtsev/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmarkovtsev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmarkovtsev/subscriptions", "organizations_url": "https://api.github.com/users/vmarkovtsev/orgs", "repos_url": "https://api.github.com/users/vmarkovtsev/repos", "events_url": "https://api.github.com/users/vmarkovtsev/events{/privacy}", "received_events_url": "https://api.github.com/users/vmarkovtsev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 307649777, "node_id": "MDU6TGFiZWwzMDc2NDk3Nzc=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Info", "name": "Needs Info", "color": "207de5", "default": false, "description": "Clarification about behavior needed to assess issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-17T11:57:26Z", "updated_at": "2020-08-17T17:09:53Z", "closed_at": "2020-08-17T17:09:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/pandas-dev/pandas/blob/934e9f840ebd2e8b5a5181b19a23e033bd3985a5/pandas/core/internals/blocks.py#L1718\r\n\r\nI've got `self.values` of type `pd.Series` with `pd.Timestamp`-s, and that does not have `fill_value` and `allow_fill`, so the kwargs check fails.\r\n\r\n```\r\nathenian/api/controllers/miners/github/branches.py:34: in extract_branches\r\n    for repo, repo_branches in branches.groupby(Branch.repository_full_name.key, sort=False):\r\n/usr/local/lib/python3.8/dist-packages/pandas/core/groupby/ops.py:133: in get_iterator\r\n    for key, (i, group) in zip(keys, splitter):\r\n/usr/local/lib/python3.8/dist-packages/pandas/core/groupby/ops.py:935: in __iter__\r\n    sdata = self._get_sorted_data()\r\n/usr/local/lib/python3.8/dist-packages/pandas/core/groupby/ops.py:948: in _get_sorted_data\r\n    return self.data.take(self.sort_idx, axis=self.axis)\r\n/usr/local/lib/python3.8/dist-packages/pandas/core/generic.py:3341: in take\r\n    new_data = self._mgr.take(\r\n/usr/local/lib/python3.8/dist-packages/pandas/core/internals/managers.py:1414: in take\r\n    return self.reindex_indexer(\r\n/usr/local/lib/python3.8/dist-packages/pandas/core/internals/managers.py:1251: in reindex_indexer\r\n    new_blocks = [\r\n/usr/local/lib/python3.8/dist-packages/pandas/core/internals/managers.py:1252: in <listcomp>\r\n    blk.take_nd(\r\n/usr/local/lib/python3.8/dist-packages/pandas/core/internals/blocks.py:1720: in take_nd\r\n    new_values = self.values.take(indexer, fill_value=fill_value, allow_fill=True)\r\n/usr/local/lib/python3.8/dist-packages/pandas/core/series.py:829: in take\r\n    nv.validate_take(tuple(), kwargs)\r\n/usr/local/lib/python3.8/dist-packages/pandas/compat/numpy/function.py:68: in __call__\r\n    validate_kwargs(fname, kwargs, self.defaults)\r\n/usr/local/lib/python3.8/dist-packages/pandas/util/_validators.py:148: in validate_kwargs\r\n    _check_for_invalid_keys(fname, kwargs, compat_args)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nfname = 'take', kwargs = {'allow_fill': True, 'fill_value': numpy.datetime64('NaT')}, compat_args = OrderedDict([('out', None), ('mode', 'raise')])\r\n\r\n    def _check_for_invalid_keys(fname, kwargs, compat_args):\r\n        \"\"\"\r\n        Checks whether 'kwargs' contains any keys that are not\r\n        in 'compat_args' and raises a TypeError if there is one.\r\n        \"\"\"\r\n        # set(dict) --> set of the dictionary's keys\r\n        diff = set(kwargs) - set(compat_args)\r\n    \r\n        if diff:\r\n            bad_arg = list(diff)[0]\r\n>           raise TypeError(f\"{fname}() got an unexpected keyword argument '{bad_arg}'\")\r\nE           TypeError: take() got an unexpected keyword argument 'allow_fill'\r\n\r\n/usr/local/lib/python3.8/dist-packages/pandas/util/_validators.py:122: TypeError\r\n```\r\n\r\n```\r\n(Pdb++) self.values\r\n0   2019-11-01 09:08:16+00:00\r\n1   2017-01-30 18:04:00+00:00\r\n2   2016-12-05 10:59:00+00:00\r\n3   2019-05-16 11:16:00+00:00\r\nName: commit_date, dtype: datetime64[ns, UTC]\r\n```\r\n\r\nIt appeared due to\r\n```\r\n-> fc.replace(0, pd.NaT, inplace=True)\r\n[50]   /usr/local/lib/python3.8/dist-packages/pandas/core/series.py(4563)replace()\r\n-> return super().replace(\r\n[51]   /usr/local/lib/python3.8/dist-packages/pandas/core/generic.py(6583)replace()\r\n-> return self._update_inplace(result)\r\n[52]   /usr/local/lib/python3.8/dist-packages/pandas/core/generic.py(3955)_update_inplace()\r\n-> self._maybe_update_cacher(verify_is_copy=verify_is_copy)\r\n[53]   /usr/local/lib/python3.8/dist-packages/pandas/core/generic.py(3235)_maybe_update_cacher()\r\n-> ref._maybe_cache_changed(cacher[0], self)\r\n[54]   /usr/local/lib/python3.8/dist-packages/pandas/core/generic.py(3196)_maybe_cache_changed()\r\n-> self._mgr.iset(loc, value)\r\n[55]   /usr/local/lib/python3.8/dist-packages/pandas/core/internals/managers.py(1066)iset()\r\n-> blk.set(blk_locs, value_getitem(val_locs))\r\n[56] > /usr/local/lib/python3.8/dist-packages/pandas/core/internals/blocks.py(1593)set()\r\n-> self.values = values\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35760", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35760/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35760/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35760/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35760", "id": 680009701, "node_id": "MDU6SXNzdWU2ODAwMDk3MDE=", "number": 35760, "title": "DOC: downcast argument for pd.to_numeric should be integer, not int", "user": {"login": "languitar", "id": 1336287, "node_id": "MDQ6VXNlcjEzMzYyODc=", "avatar_url": "https://avatars2.githubusercontent.com/u/1336287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/languitar", "html_url": "https://github.com/languitar", "followers_url": "https://api.github.com/users/languitar/followers", "following_url": "https://api.github.com/users/languitar/following{/other_user}", "gists_url": "https://api.github.com/users/languitar/gists{/gist_id}", "starred_url": "https://api.github.com/users/languitar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/languitar/subscriptions", "organizations_url": "https://api.github.com/users/languitar/orgs", "repos_url": "https://api.github.com/users/languitar/repos", "events_url": "https://api.github.com/users/languitar/events{/privacy}", "received_events_url": "https://api.github.com/users/languitar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 134699, "node_id": "MDU6TGFiZWwxMzQ2OTk=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Docs", "name": "Docs", "color": "3465A4", "default": false, "description": null}, {"id": 717120670, "node_id": "MDU6TGFiZWw3MTcxMjA2NzA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/good%20first%20issue", "name": "good first issue", "color": "0e8a16", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 3, "created_at": "2020-08-17T07:21:08Z", "updated_at": "2020-08-19T13:16:42Z", "closed_at": "2020-08-19T13:16:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Location of the documentation\r\n\r\nhttps://pandas.pydata.org/docs/dev/reference/api/pandas.to_numeric.html?highlight=to_numeric#pandas.to_numeric\r\n\r\n#### Documentation problem\r\n\r\nThe documentation declares that the `downcast` argument of `pd.to_numeric` can use the value `int`. However, only `integer` is working in the real code:\r\n\r\n```\r\nIn [8]: pd.to_numeric([\"42\"], downcast=\"int\", errors=\"coerce\")\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-8-3b178e77dcd5> in <module>\r\n----> 1 pd.to_numeric([\"42\"], downcast=\"int\", errors=\"coerce\")\r\n\r\n/usr/lib/python3.8/site-packages/pandas/core/tools/numeric.py in to_numeric(arg, errors, downcast)\r\n    110     \"\"\"\r\n    111     if downcast not in (None, \"integer\", \"signed\", \"unsigned\", \"float\"):\r\n--> 112         raise ValueError(\"invalid downcasting method provided\")\r\n    113 \r\n    114     if errors not in (\"ignore\", \"raise\", \"coerce\"):\r\n\r\nValueError: invalid downcasting method provided\r\n\r\nIn [9]: pd.to_numeric([\"42\"], downcast=\"integer\", errors=\"coerce\")\r\nOut[9]: array([42], dtype=int8)\r\n```\r\n\r\n#### Suggested fix for documentation\r\n\r\nReplace `int` with `integer`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35755", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35755/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35755/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35755/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35755", "id": 679834915, "node_id": "MDU6SXNzdWU2Nzk4MzQ5MTU=", "number": 35755, "title": "BUG: custom window not working in groupby", "user": {"login": "MaxHalford", "id": 8095957, "node_id": "MDQ6VXNlcjgwOTU5NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8095957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaxHalford", "html_url": "https://github.com/MaxHalford", "followers_url": "https://api.github.com/users/MaxHalford/followers", "following_url": "https://api.github.com/users/MaxHalford/following{/other_user}", "gists_url": "https://api.github.com/users/MaxHalford/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaxHalford/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaxHalford/subscriptions", "organizations_url": "https://api.github.com/users/MaxHalford/orgs", "repos_url": "https://api.github.com/users/MaxHalford/repos", "events_url": "https://api.github.com/users/MaxHalford/events{/privacy}", "received_events_url": "https://api.github.com/users/MaxHalford/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-16T22:03:08Z", "updated_at": "2020-08-17T14:51:27Z", "closed_at": "2020-08-17T06:48:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\nreadings = pd.DataFrame(\r\n    [\r\n        ('A', 'Saturday', 101),\r\n        ('A', 'Sunday', 88),\r\n        ('A', 'Saturday', 103),\r\n        ('A', 'Sunday', 82),\r\n        ('A', 'Saturday', 100),\r\n        ('B', 'Saturday', 27),\r\n        ('B', 'Sunday', 13),\r\n        ('B', 'Saturday', 21),\r\n        ('B', 'Sunday', 17),\r\n        ('B', 'Saturday', 25)\r\n    ],\r\n    columns=['building', 'day', 'reading']\r\n)\r\n\r\nclass ShiftedWindow(pd.api.indexers.BaseIndexer):\r\n\r\n    def __init__(self, window_size):\r\n        self.window_size = window_size\r\n\r\n    def get_window_bounds(self, num_values=0, min_periods=None, center=None, closed=None):\r\n\r\n        starts = np.arange(-self.window_size, num_values - self.window_size)\r\n        ends = starts + self.window_size\r\n        starts[:self.window_size] = 0\r\n        \r\n        return starts, ends\r\n\r\nreadings.groupby('building')['reading'].rolling(window=ShiftedWindow(2), min_periods=1).mean()\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\nI've defined a custom window that uses the previous values, and therefore ignores the current value. It's very useful for, say, target encoding on time series.\r\n\r\n#### Expected Output\r\n\r\nI would be expecting the following output:\r\n\r\n```py\r\n>>> readings.groupby('building')['reading'].apply(lambda x: x.shift(1).rolling(2, min_periods=1).mean())\r\n0      NaN\r\n1    101.0\r\n2     94.5\r\n3     95.5\r\n4     92.5\r\n5      NaN\r\n6     27.0\r\n7     20.0\r\n8     17.0\r\n9     19.0\r\nName: reading, dtype: float64\r\n```\r\n\r\nInstead, I'm getting:\r\n\r\n```py\r\n>>> readings.groupby('building')['reading'].rolling(window=ShiftedWindow(2), min_periods=1).mean()\r\nbuilding   \r\nA         0    101.0\r\n          1     88.0\r\n          2    103.0\r\n          3     82.0\r\n          4    100.0\r\nB         5     27.0\r\n          6     13.0\r\n          7     21.0\r\n          8     17.0\r\n          9     25.0\r\nName: reading, dtype: float64\r\n```\r\n\r\nI've checked and my custom window works as expected without using `groupby`. I've checked to see if `get_window_bounds` gets called when a `groupby` is used, and the answer is no. Basically, it seems that my custom window is being ignored entirely.\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.7.4.final.0\r\npython-bits      : 64\r\nOS               : Darwin\r\nOS-release       : 19.5.0\r\nVersion          : Darwin Kernel Version 19.5.0: Tue May 26 20:41:44 PDT 2020; root:xnu-6153.121.2~2/RELEASE_X86_64\r\nmachine          : x86_64\r\nprocessor        : i386\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.18.2\r\npytz             : 2019.3\r\ndateutil         : 2.8.0\r\npip              : 19.2.3\r\nsetuptools       : 41.4.0\r\nCython           : 0.29.13\r\npytest           : 5.2.1\r\nhypothesis       : None\r\nsphinx           : 2.2.0\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.2.1\r\nlxml.etree       : 4.4.1\r\nhtml5lib         : 1.0.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.10.3\r\nIPython          : 7.8.0\r\npandas_datareader: None\r\nbs4              : 4.8.0\r\nbottleneck       : 1.2.1\r\nfsspec           : 0.5.2\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.1.2\r\nnumexpr          : 2.7.0\r\nodfpy            : None\r\nopenpyxl         : 3.0.0\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.4.1\r\nsqlalchemy       : 1.3.9\r\ntables           : 3.5.2\r\ntabulate         : 0.8.7\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nnumba            : 0.45.1\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35752", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35752/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35752/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35752/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35752", "id": 679770852, "node_id": "MDU6SXNzdWU2Nzk3NzA4NTI=", "number": 35752, "title": "BUG: rolling count on string Series and TimeIndex raises an error", "user": {"login": "ezerkar", "id": 10409077, "node_id": "MDQ6VXNlcjEwNDA5MDc3", "avatar_url": "https://avatars2.githubusercontent.com/u/10409077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezerkar", "html_url": "https://github.com/ezerkar", "followers_url": "https://api.github.com/users/ezerkar/followers", "following_url": "https://api.github.com/users/ezerkar/following{/other_user}", "gists_url": "https://api.github.com/users/ezerkar/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezerkar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezerkar/subscriptions", "organizations_url": "https://api.github.com/users/ezerkar/orgs", "repos_url": "https://api.github.com/users/ezerkar/repos", "events_url": "https://api.github.com/users/ezerkar/events{/privacy}", "received_events_url": "https://api.github.com/users/ezerkar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76812, "node_id": "MDU6TGFiZWw3NjgxMg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Enhancement", "name": "Enhancement", "color": "4E9A06", "default": false, "description": null}, {"id": 1045950827, "node_id": "MDU6TGFiZWwxMDQ1OTUwODI3", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Window", "name": "Window", "color": "d4c5f9", "default": false, "description": "rolling, ewma, expanding"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-16T15:08:48Z", "updated_at": "2020-08-16T15:44:38Z", "closed_at": "2020-08-16T15:40:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nd = {'vv': {pd.Timestamp('2020-01-13 08:22:00', freq='T'): 'aa',\r\n  pd.Timestamp('2020-01-13 08:23:00', freq='T'): 'bb',\r\n  pd.Timestamp('2020-01-13 08:24:00', freq='T'): 'cc',\r\n  pd.Timestamp('2020-01-13 08:25:00', freq='T'): np.nan,\r\n  pd.Timestamp('2020-01-13 08:26:00', freq='T'): 'dd'}}\r\n\r\ndf = pd.DataFrame(d)\r\n\r\nprint(df['vv'].rolling('72s').count())\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\nthis raises DataError: No numeric types to aggregate insted if the expected output:\r\n\r\n    2020-01-13 08:22:00    1.0\r\n    2020-01-13 08:23:00    2.0\r\n    2020-01-13 08:24:00    2.0\r\n    2020-01-13 08:25:00    1.0\r\n    2020-01-13 08:26:00    1.0\r\n    Name: vv, dtype: float64\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.5.final.0\r\npython-bits      : 64\r\nOS               : Windows\r\nOS-release       : 10\r\nVersion          : 10.0.16299\r\nmachine          : AMD64\r\nprocessor        : Intel64 Family 6 Model 78 Stepping 3, GenuineIntel\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : English_United States.1252\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2.1\r\nsetuptools       : 49.2.1.post20200807\r\nCython           : 0.29.21\r\npytest           : 6.0.1\r\nhypothesis       : None\r\nsphinx           : 3.2.0\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.2.9\r\nlxml.etree       : 4.5.2\r\nhtml5lib         : 1.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : 1.3.2\r\nfsspec           : 0.7.4\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.2.2\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 3.0.4\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : 1.3.18\r\ntables           : 3.6.1\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nnumba            : 0.50.1\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35749", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35749/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35749/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35749/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35749", "id": 679659070, "node_id": "MDU6SXNzdWU2Nzk2NTkwNzA=", "number": 35749, "title": "BUG: AttributeError: 'Cell' object has no attribute 'font' when using to_excel() with openpyxl engine", "user": {"login": "mcs2017", "id": 31420389, "node_id": "MDQ6VXNlcjMxNDIwMzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/31420389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcs2017", "html_url": "https://github.com/mcs2017", "followers_url": "https://api.github.com/users/mcs2017/followers", "following_url": "https://api.github.com/users/mcs2017/following{/other_user}", "gists_url": "https://api.github.com/users/mcs2017/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcs2017/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcs2017/subscriptions", "organizations_url": "https://api.github.com/users/mcs2017/orgs", "repos_url": "https://api.github.com/users/mcs2017/repos", "events_url": "https://api.github.com/users/mcs2017/events{/privacy}", "received_events_url": "https://api.github.com/users/mcs2017/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-15T23:35:42Z", "updated_at": "2020-08-16T00:01:00Z", "closed_at": "2020-08-16T00:01:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x]  I have checked that this issue has not already been reported.\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n- [x] I have confirmed this bug exists on the latest version of openpyxl.\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n\r\nI am using to_excel() with openpyxl engine to export a pandas dataframe to a sheet of an .xlsx file. My code works just fine two days ago, but it does not work now with Error:\r\n```\r\nwith pd.ExcelWriter(PATH+ '/' + FILENAME, engine='openpyxl', mode='a') as writer:\r\n      df.head().to_excel(writer, sheet_name='test')\r\n      writer.save()\r\n\r\n\r\n\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-69-1e1ecfd20f72> in <module>\r\n      1 with pd.ExcelWriter(PATH+ '/' + FILENAME, engine='openpyxl', mode='a') as writer:\r\n----> 2     df.head().to_excel(writer, sheet_name='test')\r\n      3     writer.save()\r\n      4 \r\n      5 writer.close()\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pandas/core/generic.py in to_excel(self, excel_writer, sheet_name, na_rep, float_format, columns, header, index, index_label, startrow, startcol, engine, merge_cells, encoding, inf_rep, verbose, freeze_panes)\r\n   2027             startcol=startcol,\r\n   2028             freeze_panes=freeze_panes,\r\n-> 2029             engine=engine,\r\n   2030         )\r\n   2031 \r\n\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pandas/io/formats/excel.py in write(self, writer, sheet_name, startrow, startcol, freeze_panes, engine)\r\n    737             startrow=startrow,\r\n    738             startcol=startcol,\r\n--> 739             freeze_panes=freeze_panes,\r\n    740         )\r\n    741         if need_save:\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pandas/io/excel/_openpyxl.py in write_cells(self, cells, sheet_name, startrow, startcol, freeze_panes)\r\n    437             if style_kwargs:\r\n    438                 for k, v in style_kwargs.items():\r\n--> 439                     setattr(xcell, k, v)\r\n    440 \r\n    441             if cell.mergestart is not None and cell.mergeend is not None:\r\n\r\nAttributeError: 'Cell' object has no attribute 'font'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35745", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35745/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35745/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35745/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35745", "id": 679650219, "node_id": "MDU6SXNzdWU2Nzk2NTAyMTk=", "number": 35745, "title": "BUG: slicing DataFrameGroupBy to SeriesGroupBy doesn't propagate dropna", "user": {"login": "arw2019", "id": 48889395, "node_id": "MDQ6VXNlcjQ4ODg5Mzk1", "avatar_url": "https://avatars0.githubusercontent.com/u/48889395?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arw2019", "html_url": "https://github.com/arw2019", "followers_url": "https://api.github.com/users/arw2019/followers", "following_url": "https://api.github.com/users/arw2019/following{/other_user}", "gists_url": "https://api.github.com/users/arw2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/arw2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arw2019/subscriptions", "organizations_url": "https://api.github.com/users/arw2019/orgs", "repos_url": "https://api.github.com/users/arw2019/repos", "events_url": "https://api.github.com/users/arw2019/events{/privacy}", "received_events_url": "https://api.github.com/users/arw2019/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-15T22:16:52Z", "updated_at": "2020-08-17T14:52:57Z", "closed_at": "2020-08-16T04:12:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [x] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\nxref  #9959, #35444\r\n\r\nSlicing a `DataFrameGroupBy` object to `SeriesGroupBy` doesn't correctly propagate `dropna`. \r\n\r\nThe `DataFrameGroupBy` &#8594; `DataFrameGroupBy` case is being handled in #35444. Opening this because as far as I can tell the `DataFrameGroupBy` &#8594; `SeriesGroupBy` variant is an independent bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n```\r\nIn [11]: df = pd.DataFrame({\"a\": [1], \"b\": [2], \"c\": [3]}) \r\n    ...: gb = df.groupby('a', dropna=False)                                                                                                                                                                       \r\n\r\nIn [12]: gb.dropna                                                                                                                                                                                                \r\nOut[12]: False\r\n\r\nIn [13]: gb['b'].dropna                                                                                                                                                                                   \r\nOut[13]: True\r\n```\r\n\r\n#### Expected Output\r\nI'd like to see:\r\n```\r\nIn [22]: gb.dropna == gb['b'].dropna                                                                                                                                                                              \r\nOut[22]: True\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : a3f5c6a5a3f05edc1c56ab8051f28c4cf322c45c\r\npython           : 3.8.3.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.4.0-42-generic\r\nVersion          : #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020\r\nmachine          : x86_64\r\nprocessor        : \r\nbyteorder        : little\r\nLC_ALL           : C.UTF-8\r\nLANG             : C.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.2.0.dev0+99.ga3f5c6a5a.dirty\r\nnumpy            : 1.18.5\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.1.0.post20200704\r\nCython           : 0.29.21\r\npytest           : 5.4.3\r\nhypothesis       : 5.19.0\r\nsphinx           : 3.1.1\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.2.9\r\nlxml.etree       : 4.5.2\r\nhtml5lib         : 1.1\r\npymysql          : None\r\npsycopg2         : 2.8.5 (dt dec pq3 ext lo64)\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : 1.3.2\r\nfsspec           : 0.7.4\r\nfastparquet      : 0.4.0\r\ngcsfs            : 0.6.2\r\nmatplotlib       : 3.2.2\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 3.0.4\r\npandas_gbq       : None\r\npyarrow          : 0.17.1\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : 0.4.2\r\nscipy            : 1.5.0\r\nsqlalchemy       : 1.3.18\r\ntables           : 3.6.1\r\ntabulate         : 0.8.7\r\nxarray           : 0.15.1\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nnumba            : 0.50.1\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35743", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35743/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35743/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35743/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35743", "id": 679637128, "node_id": "MDU6SXNzdWU2Nzk2MzcxMjg=", "number": 35743, "title": "BUG:  Assign with \"df.loc[index_value][column_name] = value\" fails to assign properly", "user": {"login": "Boris-Molina", "id": 42842838, "node_id": "MDQ6VXNlcjQyODQyODM4", "avatar_url": "https://avatars3.githubusercontent.com/u/42842838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Boris-Molina", "html_url": "https://github.com/Boris-Molina", "followers_url": "https://api.github.com/users/Boris-Molina/followers", "following_url": "https://api.github.com/users/Boris-Molina/following{/other_user}", "gists_url": "https://api.github.com/users/Boris-Molina/gists{/gist_id}", "starred_url": "https://api.github.com/users/Boris-Molina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Boris-Molina/subscriptions", "organizations_url": "https://api.github.com/users/Boris-Molina/orgs", "repos_url": "https://api.github.com/users/Boris-Molina/repos", "events_url": "https://api.github.com/users/Boris-Molina/events{/privacy}", "received_events_url": "https://api.github.com/users/Boris-Molina/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2822098, "node_id": "MDU6TGFiZWwyODIyMDk4", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Indexing", "name": "Indexing", "color": "0b02e1", "default": false, "description": "Related to indexing on series/frames, not to indexes themselves"}, {"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2020-08-15T20:27:35Z", "updated_at": "2020-08-16T04:18:13Z", "closed_at": "2020-08-15T20:51:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [Y] I have checked that this issue has not already been reported.\r\n\r\n- [Y] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [N] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample, a copy-pastable example\r\nThis line of code:\r\n```python\r\nself.strategy.loc[bar]['FundingRate'] = np.log(F1/F0)\r\n```\r\nFails to assign the proper value . I think it either does nothing (leaves the original NaN from when the df \"strategy\" was created) or assigns a NaN. In any case, I added a set of flags to get the values input with this code:\r\n```python\r\nprint('Inputs for np.log F0={} F1={}'.format(F0,F1))\r\nprint('Index label bar={},  type={}'.format(bar, type(bar)))\r\nvalue = np.log(F1/F0)\r\nprint('This should be the assigned value={}'.format(value))\r\nself.strategy.loc[bar]['FundingRate'] = value\r\nassert self.strategy.loc[bar]['FundingRate'] == value, 'Error PANDAS fails to assign {}, instead we find {}'.format(value, self.strategy.loc[bar]['FundingRate'])\r\n```\r\n\r\n#### Problem description\r\nAssignment operations have started to fail to properly assign  values after upgrading from v 1.0.4 to v1.0.5.  While I need to run my code in Python 3.7/Pandas 1.0.5 due to other package dependencies, I recreated the problem with Python 3.8 and Pandas v1.1.0 \r\n\r\nThe assignments work if I change to:\r\n```python\r\ndf.loc[bar, 'FundingRate'] = value\r\n```\r\nOr with:\r\n```python\r\ndf['FundingRate'].loc[bar] = value\r\n```\r\n\r\nI can't reproduce this problem in a simple setting. It only occurs in runtime on a system of +6k lines of code which has been working seamlessly with pervasive use of these types of assignments (df.loc[indexvalue][column_name] = value).  Also, I can't do a ```dill.dump``` because there are ```tensorflow``` objects that are not serializable. \r\n\r\n#### Runtime Output: \r\nThe assert fails.  This is the printout of the code output:\r\n\r\n```\r\nInputs for np.log F0=180.4753051802489 F1=180.4753051802489\r\nIndex label bar=2000-01-03 00:00:00,  type=<class 'pandas._libs.tslibs.timestamps.Timestamp'>\r\nThis should be the assigned value=0.0\r\nTraceback (most recent call last):\r\n\r\n  File \"/media/WORK/Boris/LEM_Strategy/Software/LEM_Classes/main_nn_seq.py\", line 150, in <module>\r\n    run_stats = AA.run_strategy(consensus_type=consensus_type)\r\n\r\n  File \"/media/WORK/Boris/LEM_Strategy/Software/LEM_Classes/lib/nn_seqstrat.py\", line 642, in run_strategy\r\n    date, _ = self.get_date_price(bar, when='_CLOSE')\r\n\r\n  File \"/media/WORK/Boris/LEM_Strategy/Software/LEM_Classes/lib/backtester_sequential.py\", line 152, in get_date_price\r\n    assert self.strategy.loc[bar]['FundingRate'] == value, 'Error PANDAS fails to assign {}, instead we find {}'.format(value, self.strategy.loc[bar]['FundingRate'])\r\n\r\nAssertionError: Error PANDAS fails to assign 0.0, instead we find nan\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\npd.show_versions()\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.5.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.1.15-surface-linux-surface\r\nVersion          : #8 SMP Thu Jun 27 12:03:55 EDT 2019\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2.2\r\nsetuptools       : 49.6.0.post20200814\r\nCython           : 0.29.21\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.2.9\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : None\r\nfsspec           : 0.7.4\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.2.2\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : None\r\ntables           : 3.6.1\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : None\r\nnumba            : 0.50.1\r\n\r\n</details>\r\n\r\n#### This is the file used to create the environment where the error occurs.\r\n\r\n<details>\r\n\r\n```\r\n########################################\r\n#\r\n# LEM_Strategy Conda Environment\r\n#\r\n# run: conda env create -f quant_conda_env.yml\r\n#\r\n########################################\r\nname: quant  # COMMENT OUT TO CREATE TEST ENVIRONMENTS (conda env create -n test -f quant_conda_env.yml)\r\n########################################\r\nchannels:\r\n  - plotly\r\n  - defaults\r\n  - conda-forge\r\n  #- bjrn        # Channel for google, V20 package (RAY)\r\n########################################\r\ndependencies:\r\n  - python=3.8  # \r\n  - numpy\r\n  - scipy\r\n  - pandas  #==1.0.4\r\n  - numba\r\n  - cython\r\n  - numexpr\r\n  - statsmodels\r\n  - scikit-learn\r\n  - xlrd\r\n  - xlsxwriter\r\n  - ipywidgets\r\n  - pathos\r\n  - tensorflow-gpu  #==2.1.*\r\n  - keras-gpu\r\n  - tsfresh\r\n  - pytables\r\n  - pyzmq  # ZeroMQ: sockets\r\n# Graphics and Plotting\r\n  - plotly\r\n  - plotly-orca\r\n  - requests\r\n  - matplotlib\r\n  - seaborn\r\n  - cufflinks-py\r\n# Utilities\r\n  - nb_conda_kernels  # For Jupyter\r\n  - spyder-kernels    # Spyder\r\n  - git               # Github support: custom packages and bug forks\r\n# PIP Dependencies (otherwise installed via PIP: Use Conda to install to improve environment integrity over time)\r\n  - yaml                  # For TPQOA (OANDA Wrapper)\r\n  - ujson                 # For TPQOA (OANDA Wrapper)\r\n # - v20                   # OANDA API V2.0 (from brjn conda channel) (TPQOA installs from PIP))\r\n # - modin                 # Ray Tutorial  INSTALL MANUALLY\r\n # - opencv                # Ray Tutorial  INSTALL MANUALLY\r\n # - gym                   # Ray Tutorial  INSTALL MANUALLY\r\n  - aiohttp               # Ray\r\n  - colorama              # Ray\r\n  - filelock              # Ray\r\n  - redis                 # Ray\r\n  - multidict             # Ray\r\n  - yarl                  # Ray\r\n  - async_timeout         # Ray\r\n  - beautifulsoup4        # Ray\r\n  - soupsieve             # Ray\r\n # - redis                 # Ray (get from \"$pip_deps ray\"  shell script. Output '<3.5.0,>=3.3.2') (Ray installs from PIP))\r\n # - py-spy>=0.2.0         # Ray (get from \"$pip_deps ray\"  shell script) (Ray installs from PIP))\r\n # - google                # Ray (from brjn conda channel) (Ray installs from PIP))\r\n# Non-Conda Packages via PIP \r\n  - pip               # First install PIP PACKAGE MANAGER\r\n  - pip: \r\n    - \"git+git://github.com/yhilpisch/tpqoa.git\"      # TPQ OANDA Wrapper\r\n    - \"git+git://github.com/yhilpisch/tstables.git\"   # Time Series Tables with pandas=1.0 bug fix\r\n    #- \"git+git://github.com/tensorflow/model-optimization.git\" #  TensorFlow Model Optimization  \"import tensorflow_model_optimization as tfmot\"\r\n    - cardinality  \r\n    - ray #  Ray: fast and simple framework for building and running distributed applications.\r\n```\r\n</details>\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35737", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35737/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35737/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35737/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35737", "id": 679599400, "node_id": "MDU6SXNzdWU2Nzk1OTk0MDA=", "number": 35737, "title": "CI: Travis failing with INTERNALERROR", "user": {"login": "jbrockmendel", "id": 8078968, "node_id": "MDQ6VXNlcjgwNzg5Njg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8078968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbrockmendel", "html_url": "https://github.com/jbrockmendel", "followers_url": "https://api.github.com/users/jbrockmendel/followers", "following_url": "https://api.github.com/users/jbrockmendel/following{/other_user}", "gists_url": "https://api.github.com/users/jbrockmendel/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbrockmendel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbrockmendel/subscriptions", "organizations_url": "https://api.github.com/users/jbrockmendel/orgs", "repos_url": "https://api.github.com/users/jbrockmendel/repos", "events_url": "https://api.github.com/users/jbrockmendel/events{/privacy}", "received_events_url": "https://api.github.com/users/jbrockmendel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 48070600, "node_id": "MDU6TGFiZWw0ODA3MDYwMA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/CI", "name": "CI", "color": "a2bca7", "default": false, "description": "Related to Continuous Integration"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-15T15:54:42Z", "updated_at": "2020-08-17T08:50:01Z", "closed_at": "2020-08-17T08:50:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm seeing this on every recent Travis 37-coverage build:\r\n\r\n```\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.7.7, pytest-6.0.1, py-1.9.0, pluggy-0.13.1\r\nrootdir: /home/travis/build/pandas-dev/pandas, configfile: setup.cfg, testpaths: pandas\r\nplugins: xdist-2.0.0, cov-2.10.0, forked-1.2.0, hypothesis-5.24.0\r\ngw0 I\r\nINTERNALERROR> Traceback (most recent call last):\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/_pytest/main.py\", line 238, in wrap_session\r\nINTERNALERROR>     config.hook.pytest_sessionstart(session=session)\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/hooks.py\", line 286, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self.get_hookimpls(), kwargs)\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/manager.py\", line 87, in <lambda>\r\nINTERNALERROR>     firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/callers.py\", line 208, in _multicall\r\nINTERNALERROR>     return outcome.get_result()\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/callers.py\", line 80, in get_result\r\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/callers.py\", line 187, in _multicall\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/xdist/dsession.py\", line 78, in pytest_sessionstart\r\nINTERNALERROR>     nodes = self.nodemanager.setup_nodes(putevent=self.queue.put)\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/xdist/workermanage.py\", line 65, in setup_nodes\r\nINTERNALERROR>     return [self.setup_node(spec, putevent) for spec in self.specs]\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/xdist/workermanage.py\", line 65, in <listcomp>\r\nINTERNALERROR>     return [self.setup_node(spec, putevent) for spec in self.specs]\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/xdist/workermanage.py\", line 73, in setup_node\r\nINTERNALERROR>     node.setup()\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/xdist/workermanage.py\", line 260, in setup\r\nINTERNALERROR>     self.config.hook.pytest_configure_node(node=self)\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/hooks.py\", line 286, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self.get_hookimpls(), kwargs)\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/manager.py\", line 87, in <lambda>\r\nINTERNALERROR>     firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/callers.py\", line 208, in _multicall\r\nINTERNALERROR>     return outcome.get_result()\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/callers.py\", line 80, in get_result\r\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pluggy/callers.py\", line 187, in _multicall\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pytest_cov/plugin.py\", line 239, in pytest_configure_node\r\nINTERNALERROR>     self.cov_controller.configure_node(node)\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pytest_cov/engine.py\", line 274, in configure_node\r\nINTERNALERROR>     workerinput(node).update({\r\nINTERNALERROR>   File \"/home/travis/miniconda3/envs/pandas-dev/lib/python3.7/site-packages/pytest_cov/compat.py\", line 42, in fn\r\nINTERNALERROR>     return getattr(obj, attr, *args)\r\nINTERNALERROR> AttributeError: 'WorkerController' object has no attribute 'slaveinput'\r\nThe command \"ci/run_tests.sh\" exited with 3.\r\n\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35732", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35732/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35732/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35732/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35732", "id": 679434758, "node_id": "MDU6SXNzdWU2Nzk0MzQ3NTg=", "number": 35732, "title": "BLD: minimum versions need update in `pandas/compat/_optional.py`", "user": {"login": "VirosaLi", "id": 7614606, "node_id": "MDQ6VXNlcjc2MTQ2MDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7614606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VirosaLi", "html_url": "https://github.com/VirosaLi", "followers_url": "https://api.github.com/users/VirosaLi/followers", "following_url": "https://api.github.com/users/VirosaLi/following{/other_user}", "gists_url": "https://api.github.com/users/VirosaLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/VirosaLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VirosaLi/subscriptions", "organizations_url": "https://api.github.com/users/VirosaLi/orgs", "repos_url": "https://api.github.com/users/VirosaLi/repos", "events_url": "https://api.github.com/users/VirosaLi/events{/privacy}", "received_events_url": "https://api.github.com/users/VirosaLi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 527603109, "node_id": "MDU6TGFiZWw1Mjc2MDMxMDk=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Dependencies", "name": "Dependencies", "color": "d93f0b", "default": false, "description": "Related to pandas required and optional  dependencies"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 0, "created_at": "2020-08-14T22:34:13Z", "updated_at": "2020-08-17T13:11:54Z", "closed_at": "2020-08-17T13:11:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The minimum versions in `pandas/compat/_optional.py` were not updated in #35214.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35715", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35715/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35715/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35715/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35715", "id": 679047117, "node_id": "MDU6SXNzdWU2NzkwNDcxMTc=", "number": 35715, "title": "Attribute \"dtype\" are different error with testing.assert_frame_equal", "user": {"login": "openskullbox", "id": 4921568, "node_id": "MDQ6VXNlcjQ5MjE1Njg=", "avatar_url": "https://avatars0.githubusercontent.com/u/4921568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/openskullbox", "html_url": "https://github.com/openskullbox", "followers_url": "https://api.github.com/users/openskullbox/followers", "following_url": "https://api.github.com/users/openskullbox/following{/other_user}", "gists_url": "https://api.github.com/users/openskullbox/gists{/gist_id}", "starred_url": "https://api.github.com/users/openskullbox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/openskullbox/subscriptions", "organizations_url": "https://api.github.com/users/openskullbox/orgs", "repos_url": "https://api.github.com/users/openskullbox/repos", "events_url": "https://api.github.com/users/openskullbox/events{/privacy}", "received_events_url": "https://api.github.com/users/openskullbox/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 849023693, "node_id": "MDU6TGFiZWw4NDkwMjM2OTM=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/ExtensionArray", "name": "ExtensionArray", "color": "6138b5", "default": false, "description": "Extending pandas with custom dtypes or arrays."}, {"id": 127685, "node_id": "MDU6TGFiZWwxMjc2ODU=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Testing", "name": "Testing", "color": "C4A000", "default": false, "description": "Custom testing functions or related to the test suite"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 2, "created_at": "2020-08-14T09:59:34Z", "updated_at": "2020-08-17T18:20:20Z", "closed_at": "2020-08-17T18:20:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nWhen trying testing.assert_frame_equal, I get an assert error.\r\nE           Attribute \"dtype\" are different\r\nE           [left]:  Int64\r\nE           [right]: Int16\r\n\r\nHowever, for assert_frame_equal, I do set the argument `check_dtype=False`.\r\n\r\nFrom traceback, I can see that `assert_extension_array_equal` is being called with `check_dtype=True` which is causing the issue.\r\n\r\nI do not have a sample at hand and I will update when I can.\r\n\r\nAffected version: 1.1.0\r\nThe test cases were / are running fine with 1.0.5", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35714", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35714/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35714/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35714/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35714", "id": 678966849, "node_id": "MDU6SXNzdWU2Nzg5NjY4NDk=", "number": 35714, "title": "BUG: Negative RangeIndex can have positive step", "user": {"login": "topper-123", "id": 26364415, "node_id": "MDQ6VXNlcjI2MzY0NDE1", "avatar_url": "https://avatars1.githubusercontent.com/u/26364415?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topper-123", "html_url": "https://github.com/topper-123", "followers_url": "https://api.github.com/users/topper-123/followers", "following_url": "https://api.github.com/users/topper-123/following{/other_user}", "gists_url": "https://api.github.com/users/topper-123/gists{/gist_id}", "starred_url": "https://api.github.com/users/topper-123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topper-123/subscriptions", "organizations_url": "https://api.github.com/users/topper-123/orgs", "repos_url": "https://api.github.com/users/topper-123/repos", "events_url": "https://api.github.com/users/topper-123/events{/privacy}", "received_events_url": "https://api.github.com/users/topper-123/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-14T07:39:16Z", "updated_at": "2020-08-17T14:54:30Z", "closed_at": "2020-08-14T07:55:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Python allows positve steps in ranges, e.g.\r\n\r\n```python\r\n>>> rng = range(2, -2)\r\n>>> rng.step\r\n1  # positive step in a negative range\r\nlist(rng)\r\n[]  # empty\r\n```\r\n\r\nwhich surprises me and surely must be a bug in Python. This affects pandas' RangeIndex:\r\n\r\n```python\r\n>>> idx = pd.RangeIndex(2, -2)\r\n>>> df = pd.DataFrame(idx, index=idx)\r\n>>> df.shape\r\n(0, 1)  # 0 length\r\n>>> df.index\r\nRangeIndex(start=2, stop=-2, step=1)  # positive step!\r\n>>> df  # diplays as empty, even though isn't empty\r\nEmpty DataFrame\r\nColumns: [0]\r\nIndex: []\r\n>>> df.sum()  # result in master, wrong\r\n0    0\r\ndtype: int64\r\n>>> df.sum()  # Correct result, not in master\r\n0    2\r\ndtype: int64\r\n```\r\n\r\nWe see that the dataframe displays as empty, even though it is not actually empty and aggregations give wrong results.\r\n\r\nDo people agree that in cases of negative ranges, we should supply a default step of -1?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35710", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35710/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35710/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35710/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35710", "id": 678571165, "node_id": "MDU6SXNzdWU2Nzg1NzExNjU=", "number": 35710, "title": "ENH: DataFrame.append is slow when the DataFrame is huge", "user": {"login": "junjunjunk", "id": 26526439, "node_id": "MDQ6VXNlcjI2NTI2NDM5", "avatar_url": "https://avatars1.githubusercontent.com/u/26526439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/junjunjunk", "html_url": "https://github.com/junjunjunk", "followers_url": "https://api.github.com/users/junjunjunk/followers", "following_url": "https://api.github.com/users/junjunjunk/following{/other_user}", "gists_url": "https://api.github.com/users/junjunjunk/gists{/gist_id}", "starred_url": "https://api.github.com/users/junjunjunk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/junjunjunk/subscriptions", "organizations_url": "https://api.github.com/users/junjunjunk/orgs", "repos_url": "https://api.github.com/users/junjunjunk/repos", "events_url": "https://api.github.com/users/junjunjunk/events{/privacy}", "received_events_url": "https://api.github.com/users/junjunjunk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2020-08-13T16:30:54Z", "updated_at": "2020-08-13T16:54:22Z", "closed_at": "2020-08-13T16:54:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Is your feature request related to a problem?\r\npandas.DataFrame.append is slow.\r\nUsers use DataFrame.append multiple times. And it's more pronounced when the data is huge.\r\nThat would take a long time to combine the data.\r\nSo some users are using DataFrame.from_dict which is faster than DataFrame.append. (check additional reference)\r\n\r\n```python\r\nN = 10000\r\nfor i in range(N):\r\n  df = df.append(other, ignore_index=True)\r\n```\r\n#### Describe the solution you'd like\r\n\r\nI guess DataFrame.append is slow because there's a copy operation of DataFrame in somewhere.\r\nBut I haven't found it yet. \r\nThe solution will be to rewrite the process to be more efficient by not making copies.\r\n\r\n\r\n#### Additional reference\r\n\r\nhttps://stackoverflow.com/questions/27929472/improve-row-append-performance-on-pandas-dataframes\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35703", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35703/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35703/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35703/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35703", "id": 678354568, "node_id": "MDU6SXNzdWU2NzgzNTQ1Njg=", "number": 35703, "title": "CI / Checks (pull_request) on Github Actions failing with isort 5.3.2 -> 5.4.0", "user": {"login": "simonjayhawkins", "id": 13159005, "node_id": "MDQ6VXNlcjEzMTU5MDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/13159005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonjayhawkins", "html_url": "https://github.com/simonjayhawkins", "followers_url": "https://api.github.com/users/simonjayhawkins/followers", "following_url": "https://api.github.com/users/simonjayhawkins/following{/other_user}", "gists_url": "https://api.github.com/users/simonjayhawkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonjayhawkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonjayhawkins/subscriptions", "organizations_url": "https://api.github.com/users/simonjayhawkins/orgs", "repos_url": "https://api.github.com/users/simonjayhawkins/repos", "events_url": "https://api.github.com/users/simonjayhawkins/events{/privacy}", "received_events_url": "https://api.github.com/users/simonjayhawkins/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 48070600, "node_id": "MDU6TGFiZWw0ODA3MDYwMA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/CI", "name": "CI", "color": "a2bca7", "default": false, "description": "Related to Continuous Integration"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 5, "created_at": "2020-08-13T11:11:39Z", "updated_at": "2020-08-15T03:42:53Z", "closed_at": "2020-08-14T10:09:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\r\n```\r\n2020-08-13T10:30:51.9470350Z isort --version-number\r\n2020-08-13T10:30:52.2249999Z 5.4.0\r\n2020-08-13T10:30:52.2443133Z Check import format using isort\r\n2020-08-13T10:30:56.4886273Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/_testing.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4892079Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/_typing.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4892907Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/tests/frame/test_analytics.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4893331Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/tests/extension/base/__init__.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4893737Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/tseries/frequencies.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4894183Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/tseries/offsets.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4894928Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/tseries/holiday.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4895326Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/plotting/_matplotlib/timeseries.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4895747Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/core/index.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4896139Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/core/common.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4896552Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/core/ops/__init__.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4897157Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/core/window/__init__.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4897613Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/core/dtypes/dtypes.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4898032Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/core/dtypes/common.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4898422Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/core/reshape/melt.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4898832Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/core/reshape/merge.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4899228Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/core/internals/__init__.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4899642Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/core/tools/datetimes.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4900046Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/api/__init__.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4900461Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/util/__init__.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4900859Z ##[error]ERROR: /home/runner/work/pandas/pandas/pandas/io/pytables.py Imports are incorrectly sorted and/or formatted.\r\n2020-08-13T10:30:56.4901145Z Check import format using isort DONE\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35701", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35701/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35701/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35701/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35701", "id": 678247084, "node_id": "MDU6SXNzdWU2NzgyNDcwODQ=", "number": 35701, "title": "BUG: Load data frame pickled under pandas 1.0.5 using pandas 1.1.0", "user": {"login": "mariosum", "id": 53851867, "node_id": "MDQ6VXNlcjUzODUxODY3", "avatar_url": "https://avatars2.githubusercontent.com/u/53851867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mariosum", "html_url": "https://github.com/mariosum", "followers_url": "https://api.github.com/users/mariosum/followers", "following_url": "https://api.github.com/users/mariosum/following{/other_user}", "gists_url": "https://api.github.com/users/mariosum/gists{/gist_id}", "starred_url": "https://api.github.com/users/mariosum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mariosum/subscriptions", "organizations_url": "https://api.github.com/users/mariosum/orgs", "repos_url": "https://api.github.com/users/mariosum/repos", "events_url": "https://api.github.com/users/mariosum/events{/privacy}", "received_events_url": "https://api.github.com/users/mariosum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1625435109, "node_id": "MDU6TGFiZWwxNjI1NDM1MTA5", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/IO%20Pickle", "name": "IO Pickle", "color": "6c1cdb", "default": false, "description": "Pickle: read_pickle, to_pickle"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2020-08-13T08:17:23Z", "updated_at": "2020-08-18T07:42:09Z", "closed_at": "2020-08-13T10:53:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n'''\r\nHave pandas 1.0.5 installed.\r\n'''\r\n\r\n\r\n#%% import libs;\r\nimport numpy as np\r\nimport pandas as pd\r\nimport time\r\nimport datetime\r\nimport pickle\r\n\r\n#%% do;\r\ndf0 = pd.DataFrame(\r\n                    {\r\n                        'sdtr3mm':      [datetime.datetime.now()],\r\n                        'count1':       [1]\r\n                    }\r\n                 )\r\ndf0['month_year'] = df0['sdtr3mm'].dt.to_period('M')\r\ndf0['year'] = df0['sdtr3mm'].dt.to_period('Y')\r\nwith open(\"Z:/test.data\", \"wb\") as filehandle:\r\n    pickle.dump(df0, filehandle)\r\n\r\n'''\r\nUpdate to pandas           : 1.1.0\r\n'''\r\n\r\n\r\nwith open(\"Z:/test.data\", \"rb\") as filehandle:\r\n    df1 = pickle.load(filehandle)\r\n```\r\n[test.zip](https://github.com/pandas-dev/pandas/files/5067895/test.zip) (zipped data frame, pickled under pandas 1.0.5)\r\n\r\n\r\n\r\n#### Problem description\r\n\r\nI pickled a dataframe, containing a datetime variable, an integer, a pandas-month-year, panda-year variable, under pandas 1.0.5 to my disk.\r\nAfter the update to pandas 1.1.0, I can no longer load it, receiving an \"TypeError: Expected tuple, got dict\",\r\nwith:\r\n```\r\nTraceback (most recent call last):\r\n\r\n  File \"<ipython-input-5-fa4170ff1942>\", line 2, in <module>\r\n    df1 = pickle.load(filehandle)\r\n\r\n  File \"stringsource\", line 17, in pandas._libs.tslibs.period.PeriodMixin.__setstate_cython__\r\n```\r\n\r\n\r\n\r\nCreating a data frame as above under pandas 1.1.0 and trying to load it in under pandas 1.0.5 does not work either.\r\n\r\n*** Update:\r\nAlso does not work using pd.read_pickle either.\r\n\r\nI am sorry if this is the wrong place and/or the wrong way to post my issue.\r\n\r\n#### Expected Output\r\n\r\nLoad in the data frame created as in the code above.\r\n\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\n[paste the output of ``pd.show_versions()`` here leaving a blank line after the details tag]\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.7.7.final.0\r\npython-bits      : 64\r\nOS               : Windows\r\nOS-release       : 10\r\nmachine          : AMD64\r\nprocessor        : Intel64 Family 6 Model 94 Stepping 3, GenuineIntel\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en\r\nLOCALE           : None.None\r\n\r\npandas           : 1.0.5\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2.1\r\nsetuptools       : 49.2.1.post20200807\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : 3.2.0\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.17.0\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : None\r\nmatplotlib       : 3.2.2\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : 3.0.4\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nxlsxwriter       : None\r\nnumba            : None\r\n\r\n\r\n</details>\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35691", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35691/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35691/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35691/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35691", "id": 677836558, "node_id": "MDU6SXNzdWU2Nzc4MzY1NTg=", "number": 35691, "title": "BUG: DatetimeIndex.get_loc failing when key is int (introduced in v1.1.0)", "user": {"login": "maximemorariu", "id": 41797673, "node_id": "MDQ6VXNlcjQxNzk3Njcz", "avatar_url": "https://avatars2.githubusercontent.com/u/41797673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maximemorariu", "html_url": "https://github.com/maximemorariu", "followers_url": "https://api.github.com/users/maximemorariu/followers", "following_url": "https://api.github.com/users/maximemorariu/following{/other_user}", "gists_url": "https://api.github.com/users/maximemorariu/gists{/gist_id}", "starred_url": "https://api.github.com/users/maximemorariu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maximemorariu/subscriptions", "organizations_url": "https://api.github.com/users/maximemorariu/orgs", "repos_url": "https://api.github.com/users/maximemorariu/repos", "events_url": "https://api.github.com/users/maximemorariu/events{/privacy}", "received_events_url": "https://api.github.com/users/maximemorariu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2020-08-12T16:49:14Z", "updated_at": "2020-08-12T22:00:19Z", "closed_at": "2020-08-12T22:00:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\nIn version 1.0.5 the below was running successfully, but in 1.1.0, this is now broken as `int` keys are not accepted anymore (a `KeyError` is raised because the type of the key is now unexpected).\r\n\r\n```\r\nimport numpy as np\r\nfrom numpy import datetime64\r\nfrom pandas import DatetimeIndex\r\n\r\ndt = datetime64(\"2020-08-12T00:00:00.000000000\")\r\ndt_item = np.array(dt).item()\r\nindex = DatetimeIndex(data=[dt])\r\nprint(index.get_loc(dt))\r\nprint(index.get_loc(dt_item))\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35682", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35682/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35682/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35682/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35682", "id": 677363347, "node_id": "MDU6SXNzdWU2NzczNjMzNDc=", "number": 35682, "title": "QST: Such a behavior of DataFrameGroupBy.cumcount() is intended ??", "user": {"login": "itholic", "id": 44108233, "node_id": "MDQ6VXNlcjQ0MTA4MjMz", "avatar_url": "https://avatars1.githubusercontent.com/u/44108233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itholic", "html_url": "https://github.com/itholic", "followers_url": "https://api.github.com/users/itholic/followers", "following_url": "https://api.github.com/users/itholic/following{/other_user}", "gists_url": "https://api.github.com/users/itholic/gists{/gist_id}", "starred_url": "https://api.github.com/users/itholic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itholic/subscriptions", "organizations_url": "https://api.github.com/users/itholic/orgs", "repos_url": "https://api.github.com/users/itholic/repos", "events_url": "https://api.github.com/users/itholic/events{/privacy}", "received_events_url": "https://api.github.com/users/itholic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-12T03:58:20Z", "updated_at": "2020-08-17T14:54:06Z", "closed_at": "2020-08-13T07:56:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Question about pandas\r\n\r\nLet's say we have a `DataFrame` named by `pdf` like the below.\r\n\r\n```python\r\n>>> pdf = pd.DataFrame([['a'], ['a'], ['a'], ['b'], ['b'], ['a']], columns=list('A'))\r\n>>> pdf\r\n   A\r\n0  a\r\n1  a\r\n2  a\r\n3  b\r\n4  b\r\n5  a\r\n```\r\n\r\nFor above `pdf`, `GroupBy.cum~` functions seems not work, but raise `DataError`\r\n\r\n```python\r\n# GroupBy.cummax\r\n>>> pdf.groupby(\"A\").cummax()\r\nTraceback (most recent call last):\r\n...\r\npandas.core.base.DataError: No numeric types to aggregate\r\n\r\n# GroupBy.cummin\r\n>>> pdf.groupby(\"A\").cummin()\r\nTraceback (most recent call last):\r\n...\r\npandas.core.base.DataError: No numeric types to aggregate\r\n\r\n# GroupBy.cumprod\r\n>>> pdf.groupby(\"A\").cumprod() \r\nTraceback (most recent call last):\r\n...\r\npandas.core.base.DataError: No numeric types to aggregate\r\n\r\n# GroupBy.cumsum\r\n>>> pdf.groupby(\"A\").cumsum()\r\nTraceback (most recent call last):\r\n...\r\npandas.core.base.DataError: No numeric types to aggregate\r\n```\r\n\r\nAnd I thought that `GroupBy.cumcount()` also wouldn't work, but It's actually working like the below.\r\n\r\n```python\r\n>>> pdf.groupby(\"A\").cumcount()\r\n0    0\r\n1    1\r\n2    2\r\n3    0\r\n4    1\r\n5    3\r\ndtype: int64\r\n```\r\n\r\nWould someone let me know if Is it intended or unexpected behavior ?\r\n\r\nThanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35680", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35680/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35680/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35680/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35680", "id": 677260009, "node_id": "MDU6SXNzdWU2NzcyNjAwMDk=", "number": 35680, "title": "BUG: Different results from Series.replace with compiled regex", "user": {"login": "pLeBlanc93", "id": 12817527, "node_id": "MDQ6VXNlcjEyODE3NTI3", "avatar_url": "https://avatars0.githubusercontent.com/u/12817527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pLeBlanc93", "html_url": "https://github.com/pLeBlanc93", "followers_url": "https://api.github.com/users/pLeBlanc93/followers", "following_url": "https://api.github.com/users/pLeBlanc93/following{/other_user}", "gists_url": "https://api.github.com/users/pLeBlanc93/gists{/gist_id}", "starred_url": "https://api.github.com/users/pLeBlanc93/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pLeBlanc93/subscriptions", "organizations_url": "https://api.github.com/users/pLeBlanc93/orgs", "repos_url": "https://api.github.com/users/pLeBlanc93/repos", "events_url": "https://api.github.com/users/pLeBlanc93/events{/privacy}", "received_events_url": "https://api.github.com/users/pLeBlanc93/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}, {"id": 57522093, "node_id": "MDU6TGFiZWw1NzUyMjA5Mw==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Strings", "name": "Strings", "color": "5319e7", "default": false, "description": "String extension data type and string data"}, {"id": 1652721180, "node_id": "MDU6TGFiZWwxNjUyNzIxMTgw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/replace", "name": "replace", "color": "01a886", "default": false, "description": "replace method"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 2, "created_at": "2020-08-11T23:18:28Z", "updated_at": "2020-08-17T11:23:54Z", "closed_at": "2020-08-17T10:59:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [x] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n# Your code here\r\nimport re\r\nimport pandas as pd\r\n\r\nprint(pd.__version__)\r\n\r\ns = pd.Series(['a', 'aa', 'b'])\r\nregex = {'^a$': 1, '^b$': 2, '^aa$': 3}\r\nprint(s.replace(regex, regex=True)) \r\nprint(s.replace({re.compile(k): v for k,v in regex.items()}, regex=True))\r\n\r\n\r\n```\r\n\r\n#### Problem description\r\nThese two `.replace` calls are equivalent on pandas `1.0.5`. They are different on `1.1.0` and `master`.\r\n\r\n```\r\n1.2.0.dev0+79.g3c87b019b\r\n0    1\r\n1    3\r\n2    2\r\ndtype: int64\r\n0     a\r\n1    aa\r\n2     b\r\ndtype: object\r\n\r\n\r\n1.0.5\r\n0    1\r\n1    3\r\n2    2\r\ndtype: int64\r\n0    1\r\n1    3\r\n2    2\r\ndtype: int64\r\n```\r\n\r\n#### Expected Output\r\n\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.7.7.final.0\r\npython-bits      : 64\r\nOS               : Windows\r\nOS-release       : 10\r\nmachine          : AMD64\r\nprocessor        : Intel64 Family 6 Model 63 Stepping 2, GenuineIntel\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : None.None\r\n\r\npandas           : 1.0.5\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2.1\r\nsetuptools       : 49.3.1.post20200810\r\nCython           : 0.29.21\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : None\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nxlsxwriter       : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35679", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35679/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35679/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35679/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35679", "id": 677208170, "node_id": "MDU6SXNzdWU2NzcyMDgxNzA=", "number": 35679, "title": "BUG: DataFrame.to_pickle(bytes_io_buffer) is automatically closed internally ", "user": {"login": "le1nux", "id": 2804731, "node_id": "MDQ6VXNlcjI4MDQ3MzE=", "avatar_url": "https://avatars0.githubusercontent.com/u/2804731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/le1nux", "html_url": "https://github.com/le1nux", "followers_url": "https://api.github.com/users/le1nux/followers", "following_url": "https://api.github.com/users/le1nux/following{/other_user}", "gists_url": "https://api.github.com/users/le1nux/gists{/gist_id}", "starred_url": "https://api.github.com/users/le1nux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/le1nux/subscriptions", "organizations_url": "https://api.github.com/users/le1nux/orgs", "repos_url": "https://api.github.com/users/le1nux/repos", "events_url": "https://api.github.com/users/le1nux/events{/privacy}", "received_events_url": "https://api.github.com/users/le1nux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1625435109, "node_id": "MDU6TGFiZWwxNjI1NDM1MTA5", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/IO%20Pickle", "name": "IO Pickle", "color": "6c1cdb", "default": false, "description": "Pickle: read_pickle, to_pickle"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 2, "created_at": "2020-08-11T21:25:40Z", "updated_at": "2020-08-12T22:23:26Z", "closed_at": "2020-08-12T22:23:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n#### Code Sample\r\n\r\n```python\r\nimport pandas as pd\r\nimport io\r\n\r\n# create example DataFrame\r\nd = {'col1': [1, 2], 'col2': [3, 4]}\r\ndf = pd.DataFrame(data=d)\r\n\r\n# load dataframe into bytesIO\r\nbuffer = io.BytesIO()\r\ndf.to_pickle(path=buffer)\r\n\r\n# make sure buffer is still open\r\nassert not buffer.closed\r\n```\r\n\r\n#### Problem description\r\nInstead of dumping the binarized DataFrame on disk as e.g., by passing a file path or a file handle, I want to store its byte stream into an in memory bytesIO buffer, as shown above. Unfortunately, inside of `to_pickle` the bytesIO stream is already closed, thus rendering it useless. As far as I know the Python io API does not let you reopen a stream once it was closed. \r\n\r\n#### Expected Output\r\nIn my opinion it makes more sense to leave it to the user, when to close the buffer, e.g., by using a context manager:\r\n\r\n```python\r\nwith io.BytesIO() as f:\r\n    df.to_pickle(path=buffer)\r\n   # do something with f \r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35678", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35678/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35678/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35678/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35678", "id": 677178440, "node_id": "MDU6SXNzdWU2NzcxNzg0NDA=", "number": 35678, "title": "August 2020 Developer Meeting (August 12th)", "user": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2187005593, "node_id": "MDU6TGFiZWwyMTg3MDA1NTkz", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Community", "name": "Community", "color": "0bbec4", "default": false, "description": "Community topics (meetings, etc.)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-11T20:33:00Z", "updated_at": "2020-08-14T07:30:17Z", "closed_at": "2020-08-14T07:30:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The monthly dev meeting is Wednesday August 12th, at 18:00 UTC. Our calendar is at https://pandas.pydata.org/docs/development/meeting.html#calendar to check your local time.\r\n\r\nVideo Call: https://zoom.us/j/942410248\r\nMinutes: https://docs.google.com/document/u/1/d/1tGbTiYORHiSPgVMXawiweGJlBw5dOkVJLY-licoBmBU/edit?ouid=102771015311436394588&usp=docs_home&ths=true\r\n\r\nPlease add items you'd like to see discussed to the agenda.\r\n\r\nAll are welcome to attend.\r\n\r\ncc @pandas-dev/pandas-core @pandas-dev/pandas-triage ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35671", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35671/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35671/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35671/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35671", "id": 677007140, "node_id": "MDU6SXNzdWU2NzcwMDcxNDA=", "number": 35671, "title": "df[col].astype('interval') no longer works for interval string", "user": {"login": "xiaofanyang002", "id": 49573390, "node_id": "MDQ6VXNlcjQ5NTczMzkw", "avatar_url": "https://avatars1.githubusercontent.com/u/49573390?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiaofanyang002", "html_url": "https://github.com/xiaofanyang002", "followers_url": "https://api.github.com/users/xiaofanyang002/followers", "following_url": "https://api.github.com/users/xiaofanyang002/following{/other_user}", "gists_url": "https://api.github.com/users/xiaofanyang002/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiaofanyang002/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiaofanyang002/subscriptions", "organizations_url": "https://api.github.com/users/xiaofanyang002/orgs", "repos_url": "https://api.github.com/users/xiaofanyang002/repos", "events_url": "https://api.github.com/users/xiaofanyang002/events{/privacy}", "received_events_url": "https://api.github.com/users/xiaofanyang002/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-11T16:11:17Z", "updated_at": "2020-08-15T15:33:40Z", "closed_at": "2020-08-15T15:33:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "We used the below code to roundtrip pd.Interval values in 0.25.3, but it throws TypeError in 1.0.5:\r\n```\r\ndf = pd.DataFrame(data={'i': [pd.Interval(0, 2, closed='left')]})\r\ndf['i'] = df['i'].astype(str) \r\ndf['i'].astype('interval')\r\n# throws: TypeError: type <class 'str'> with value [0, 2) is not an interval\r\n```\r\nWe didn't use to_json/read_json because it is also not parsing pd.Interval back properly:\r\n```\r\ndf = pd.DataFrame(data={'i': [pd.Interval(0, 2, closed='left')]})\r\nvalue_json = df.to_json(orient='values')\r\npd.read_json(value_json, orient='values').values\r\n# returns: array([[{'closed': 'left', 'closed_right': False, 'left': 0, 'mid': 1.0, 'open_right': True, 'right': 2}]],\r\n      dtype=object)\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35663", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35663/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35663/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35663/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35663", "id": 676624209, "node_id": "MDU6SXNzdWU2NzY2MjQyMDk=", "number": 35663, "title": "BUG: Styler `cells_ids` fails on second render", "user": {"login": "attack68", "id": 24256554, "node_id": "MDQ6VXNlcjI0MjU2NTU0", "avatar_url": "https://avatars0.githubusercontent.com/u/24256554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/attack68", "html_url": "https://github.com/attack68", "followers_url": "https://api.github.com/users/attack68/followers", "following_url": "https://api.github.com/users/attack68/following{/other_user}", "gists_url": "https://api.github.com/users/attack68/gists{/gist_id}", "starred_url": "https://api.github.com/users/attack68/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/attack68/subscriptions", "organizations_url": "https://api.github.com/users/attack68/orgs", "repos_url": "https://api.github.com/users/attack68/repos", "events_url": "https://api.github.com/users/attack68/events{/privacy}", "received_events_url": "https://api.github.com/users/attack68/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 0, "created_at": "2020-08-11T06:39:47Z", "updated_at": "2020-08-14T12:36:10Z", "closed_at": "2020-08-14T12:36:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "issue #35588 addressed the issue of `cell_ids` failing.\r\n\r\nThis bug reports a failure on second render(), due to `ctx` object, as a `defaultdict`, having a key inserted when it is queried, which then impacts the programming logic the second time it is run.\r\n\r\nThe solution is to move the query within conditional a few lines above.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35660", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35660/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35660/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35660/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35660", "id": 676521002, "node_id": "MDU6SXNzdWU2NzY1MjEwMDI=", "number": 35660, "title": "BUG/CI: unreliable tests in `io\\parser\\test_common.py`", "user": {"login": "VirosaLi", "id": 7614606, "node_id": "MDQ6VXNlcjc2MTQ2MDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/7614606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VirosaLi", "html_url": "https://github.com/VirosaLi", "followers_url": "https://api.github.com/users/VirosaLi/followers", "following_url": "https://api.github.com/users/VirosaLi/following{/other_user}", "gists_url": "https://api.github.com/users/VirosaLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/VirosaLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VirosaLi/subscriptions", "organizations_url": "https://api.github.com/users/VirosaLi/orgs", "repos_url": "https://api.github.com/users/VirosaLi/repos", "events_url": "https://api.github.com/users/VirosaLi/events{/privacy}", "received_events_url": "https://api.github.com/users/VirosaLi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 48070600, "node_id": "MDU6TGFiZWw0ODA3MDYwMA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/CI", "name": "CI", "color": "a2bca7", "default": false, "description": "Related to Continuous Integration"}, {"id": 76939933, "node_id": "MDU6TGFiZWw3NjkzOTkzMw==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Unreliable%20Test", "name": "Unreliable Test", "color": "5319e7", "default": false, "description": "Unit tests that occasionally fail"}, {"id": 57186974, "node_id": "MDU6TGFiZWw1NzE4Njk3NA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Windows", "name": "Windows", "color": "fbca04", "default": false, "description": "Windows OS"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 0, "created_at": "2020-08-11T01:54:53Z", "updated_at": "2020-08-17T20:50:14Z", "closed_at": "2020-08-17T20:50:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Those two tests\r\n```bash\r\npandas\\tests\\io\\parser\\test_common.py:test_chunks_have_consistent_numerical_type\r\npandas\\tests\\io\\parser\\test_common.py:test_warn_if_chunks_have_mismatched_type\r\n```\r\nhave been producing ResourceWarning occasionally on Windows-py37-np16 and travis-37. I think they might happen on other builds as well. I just haven't seen them yet.\r\n\r\n```bash\r\nall_parsers = <pandas.tests.io.parser.conftest.PythonParser object at 0x0000016ADEAFB808>\r\n\r\n    def test_chunks_have_consistent_numerical_type(all_parsers):\r\n        parser = all_parsers\r\n        integers = [str(i) for i in range(499999)]\r\n        data = \"a\\n\" + \"\\n\".join(integers + [\"1.0\", \"2.0\"] + integers)\r\n    \r\n        # Coercions should work without warnings.\r\n        with tm.assert_produces_warning(None):\r\n>           result = parser.read_csv(StringIO(data))\r\n\r\npandas\\tests\\io\\parser\\test_common.py:1148: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <contextlib._GeneratorContextManager object at 0x0000016AA37A05C8>\r\ntype = None, value = None, traceback = None\r\n\r\n    def __exit__(self, type, value, traceback):\r\n        if type is None:\r\n            try:\r\n>               next(self.gen)\r\nE               AssertionError: Caused unexpected warning(s): [('ResourceWarning', ResourceWarning(\"unclosed <socket.socket fd=2972, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('10.1.0.4', 1650), raddr=('169.254.169.254', 80)>\"), 'D:\\\\a\\\\1\\\\s\\\\pandas\\\\io\\\\parsers.py', 3007)]\r\n\r\nC:\\Miniconda\\envs\\pandas-dev\\lib\\contextlib.py:119: AssertionError\r\n```\r\n\r\n```bash\r\nall_parsers = <pandas.tests.io.parser.conftest.PythonParser object at 0x000001F32E4A2748>\r\n\r\n    def test_warn_if_chunks_have_mismatched_type(all_parsers):\r\n        warning_type = None\r\n        parser = all_parsers\r\n        integers = [str(i) for i in range(499999)]\r\n        data = \"a\\n\" + \"\\n\".join(integers + [\"a\", \"b\"] + integers)\r\n    \r\n        # see gh-3866: if chunks are different types and can't\r\n        # be coerced using numerical types, then issue warning.\r\n        if parser.engine == \"c\" and parser.low_memory:\r\n            warning_type = DtypeWarning\r\n    \r\n        with tm.assert_produces_warning(warning_type):\r\n>           df = parser.read_csv(StringIO(data))\r\n\r\npandas\\tests\\io\\parser\\test_common.py:1167: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <contextlib._GeneratorContextManager object at 0x000001F3076E7948>\r\ntype = None, value = None, traceback = None\r\n\r\n    def __exit__(self, type, value, traceback):\r\n        if type is None:\r\n            try:\r\n>               next(self.gen)\r\nE               AssertionError: Caused unexpected warning(s): [('ResourceWarning', ResourceWarning(\"unclosed <socket.socket fd=6620, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('10.1.0.4', 1656), raddr=('169.254.169.254', 80)>\"), 'D:\\\\a\\\\1\\\\s\\\\pandas\\\\io\\\\parsers.py', 3007)]\r\n\r\nC:\\Miniconda\\envs\\pandas-dev\\lib\\contextlib.py:119: AssertionError\r\n```\r\n\r\nThose two tests don't fail everytime. And they are skipped for now.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35659", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35659/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35659/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35659/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35659", "id": 676463249, "node_id": "MDU6SXNzdWU2NzY0NjMyNDk=", "number": 35659, "title": "ENH: Making Pandas dataframe slicing syntax match R dataframe syntax.", "user": {"login": "jgbradley1", "id": 654554, "node_id": "MDQ6VXNlcjY1NDU1NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/654554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgbradley1", "html_url": "https://github.com/jgbradley1", "followers_url": "https://api.github.com/users/jgbradley1/followers", "following_url": "https://api.github.com/users/jgbradley1/following{/other_user}", "gists_url": "https://api.github.com/users/jgbradley1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgbradley1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgbradley1/subscriptions", "organizations_url": "https://api.github.com/users/jgbradley1/orgs", "repos_url": "https://api.github.com/users/jgbradley1/repos", "events_url": "https://api.github.com/users/jgbradley1/events{/privacy}", "received_events_url": "https://api.github.com/users/jgbradley1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76812, "node_id": "MDU6TGFiZWw3NjgxMg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Enhancement", "name": "Enhancement", "color": "4E9A06", "default": false, "description": null}, {"id": 2822098, "node_id": "MDU6TGFiZWwyODIyMDk4", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Indexing", "name": "Indexing", "color": "0b02e1", "default": false, "description": "Related to indexing on series/frames, not to indexes themselves"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 3, "created_at": "2020-08-10T22:52:14Z", "updated_at": "2020-08-11T17:22:11Z", "closed_at": "2020-08-10T23:58:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "I imagine the following request is popular enough that it has probably been asked before. I just couldn't find it. Feel free to close if the discussion has already occurred.\r\n\r\nConsider the following R example:\r\n```r\r\n# R code\r\n> df <- data.frame(A=c(0:4), B=c(\"str0\",\"str1\",\"str2\",\"str3\",\"str4\"), C=(1:5))\r\n> df\r\n  A    B C\r\n1 0 str0 1\r\n2 1 str1 2\r\n3 2 str2 3\r\n4 3 str3 4\r\n5 4 str4 5\r\n```\r\nThe equivalent Pandas syntax would be:\r\n```python\r\n# python code\r\n> df = pd.DataFrame({ \"A\":range(0,5), \"B\":[\"str\"+str(x) for x in range(0,5)], \"C\":range(1,6) })\r\n> df\r\n   A     B  C\r\n0  0  str0  1\r\n1  1  str1  2\r\n2  2  str2  3\r\n3  3  str3  4\r\n4  4  str4  5\r\n```\r\nNow when trying to slice a R dataframe, the syntax allows direct access with the brackets operator:\r\n```r\r\n# R code\r\n> df[1,]\r\n  A    B C\r\n1 0 str0 1\r\n```\r\nThe pandas equivalent would be:\r\n```python\r\n# python code\r\n> df.iloc[0,]\r\nA       0\r\nB    str0\r\nC       1\r\nName: 0, dtype: object\r\n```\r\n\r\nDisregarding the 0-index vs 1-index between the languages, I would like to propose adding a new slicing operation to the Pandas dataframe [`getitem()`](https://github.com/pandas-dev/pandas/blob/master/pandas/core/frame.py#L2904) that overloads the brackets operator and matches the behavior of R-style syntax. It would allow for cleaner and less-verbose code (especially when chaining multiple slice operations).\r\n\r\n#### API breaking implications\r\nThe API change would be a positive addition. No removal of current slicing operations (`iloc`, `loc`, etc.)\r\n\r\n#### Additional context\r\n\r\nThe following slicing examples will error out in Pandas whereas it would be valid slicing in R:\r\n```python\r\n# python code\r\n> df[0]\r\n> df[0, ]\r\n> df[0,0]\r\n> df[0, 1:2]\r\n```\r\nNote that calling `iloc` with the above commands would all succeed. What I'm suggesting is that the logic for `iloc` be copied/moved into Pandas dataframe `__getitem__()` function.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35657", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35657/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35657/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35657/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35657", "id": 676346737, "node_id": "MDU6SXNzdWU2NzYzNDY3Mzc=", "number": 35657, "title": "BUG: ValueError: cannot convert float NaN to integer - on dataframe.reset_index()", "user": {"login": "capelastegui", "id": 2239771, "node_id": "MDQ6VXNlcjIyMzk3NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/2239771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/capelastegui", "html_url": "https://github.com/capelastegui", "followers_url": "https://api.github.com/users/capelastegui/followers", "following_url": "https://api.github.com/users/capelastegui/following{/other_user}", "gists_url": "https://api.github.com/users/capelastegui/gists{/gist_id}", "starred_url": "https://api.github.com/users/capelastegui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/capelastegui/subscriptions", "organizations_url": "https://api.github.com/users/capelastegui/orgs", "repos_url": "https://api.github.com/users/capelastegui/repos", "events_url": "https://api.github.com/users/capelastegui/events{/privacy}", "received_events_url": "https://api.github.com/users/capelastegui/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 4, "created_at": "2020-08-10T18:58:43Z", "updated_at": "2020-08-14T01:50:52Z", "closed_at": "2020-08-14T01:50:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [X] I have checked that this issue has not already been reported.\r\n\r\n- [X] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n\r\n\r\n#### Code Sample\r\n\r\n```python\r\nimport pandas as pd\r\ndf = pd.DataFrame(\r\n    dict(c1=[10.], c2=['a'], c3=pd.to_datetime('2020-01-01')))\r\n# Triggering conditions: multiindex with date, empty dataframe\r\n\r\n# Multiindex without date works\r\ndf.set_index(['c1', 'c2']).head(0).reset_index()\r\n\r\n# Regular index with date also works\r\ndf.set_index(['c3']).head(0).reset_index()\r\n\r\n# Multiindex with date crashes...\r\ndf.set_index(['c2', 'c3']).head(0).reset_index()\r\n# >> ValueError: cannot convert float NaN to integer\r\n# This used to work on pandas 1.0.3, but breaks on pandas 1.1.0\r\n\r\n# Though the error doesn't trigger if the dataframe is empty before\r\n# calling set_index()\r\ndf.head(0).set_index(['c2', 'c3']).reset_index()\r\n\r\n# I originally observed the bug in a groupby call\r\ndf.head(0).groupby(['c2', 'c3'])[['c1']].sum().reset_index()\r\n# >> ValueError: cannot convert float NaN to integer\r\n# This used to work on pandas 1.0.3, but breaks on pandas 1.1.0\r\n```\r\n\r\n#### Problem description\r\n\r\nOn pandas 1.1.0, I'm getting a ValueError exception when calling dataframe.reset_index() under the following conditions:\r\n- Input dataframe is empty\r\n- Multiindex from multiple columns, at least one of which is a datetime\r\n\r\nThe exception message is `ValueError: cannot convert float NaN to integer`.\r\n\r\nError trace:\r\n```\r\nError\r\nTraceback (most recent call last):\r\n    df_out.reset_index()\r\n  File \"/Users/pec21/PycharmProjects/anp_voice_report/virtual/lib/python3.6/site-packages/pandas/core/frame.py\", line 4848, in reset_index\r\n    level_values = _maybe_casted_values(lev, lab)\r\n  File \"/Users/pec21/PycharmProjects/anp_voice_report/virtual/lib/python3.6/site-packages/pandas/core/frame.py\", line 4782, in _maybe_casted_values\r\n    fill_value, len(mask), dtype\r\n  File \"/Users/pec21/PycharmProjects/anp_voice_report/virtual/lib/python3.6/site-packages/pandas/core/dtypes/cast.py\", line 1554, in construct_1d_arraylike_from_scalar\r\n    subarr.fill(value)\r\nValueError: cannot convert float NaN to integer\r\n```\r\n\r\nThis error didn't happen on pandas 1.0.3 and earlier. I haven't tested any intermediate releases, nor the master branch.\r\n\r\n\r\n#### Expected Output\r\n\r\nNo exception is raised, returns an empty dataframe.\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.6.6.final.0\r\npython-bits      : 64\r\nOS               : Darwin\r\nOS-release       : 18.6.0\r\nVersion          : Darwin Kernel Version 18.6.0: Thu Apr 25 23:16:27 PDT 2019; root:xnu-4903.261.4~2/RELEASE_X86_64\r\nmachine          : x86_64\r\nprocessor        : i386\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : en_GB.UTF-8\r\npandas           : 1.1.0\r\nnumpy            : 1.17.4\r\npytz             : 2019.3\r\ndateutil         : 2.8.1\r\npip              : 20.0.2\r\nsetuptools       : 49.1.0\r\nCython           : None\r\npytest           : 5.3.4\r\nhypothesis       : None\r\nsphinx           : 2.3.1\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : 4.4.2\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : 2.8.4 (dt dec pq3 ext lo64)\r\njinja2           : 2.10.3\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : 4.8.1\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : 3.0.2\r\npandas_gbq       : None\r\npyarrow          : 0.15.1\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.3.3\r\nsqlalchemy       : 1.3.11\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35653", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35653/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35653/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35653/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35653", "id": 676202533, "node_id": "MDU6SXNzdWU2NzYyMDI1MzM=", "number": 35653, "title": "QST: How to select the week data from a given DataFrame?", "user": {"login": "Monsieurvishal", "id": 59202862, "node_id": "MDQ6VXNlcjU5MjAyODYy", "avatar_url": "https://avatars3.githubusercontent.com/u/59202862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Monsieurvishal", "html_url": "https://github.com/Monsieurvishal", "followers_url": "https://api.github.com/users/Monsieurvishal/followers", "following_url": "https://api.github.com/users/Monsieurvishal/following{/other_user}", "gists_url": "https://api.github.com/users/Monsieurvishal/gists{/gist_id}", "starred_url": "https://api.github.com/users/Monsieurvishal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Monsieurvishal/subscriptions", "organizations_url": "https://api.github.com/users/Monsieurvishal/orgs", "repos_url": "https://api.github.com/users/Monsieurvishal/repos", "events_url": "https://api.github.com/users/Monsieurvishal/events{/privacy}", "received_events_url": "https://api.github.com/users/Monsieurvishal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2020-08-10T14:59:18Z", "updated_at": "2020-08-10T16:40:57Z", "closed_at": "2020-08-10T16:40:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "Question about pandas \r\nFor the given DataFrame How do I select data between two weeks?\r\n\r\n\tDate\tOpen\tHigh\tLow\tClose\r\n0\t01-08-2019\t97.85\t98.45\t96.40\t97.25\r\n1\t02-08-2019\t97.15\t98.95\t96.75\t98.15\r\n2\t05-08-2019\t98.30\t98.70\t94.30\t95.65\r\n3\t06-08-2019\t95.75\t97.75\t95.20\t97.05\r\n4\t07-08-2019\t96.80\t97.70\t96.05\t96.90\r\n5\t08-08-2019\t97.40\t98.90\t96.55\t97.40\r\n6\t09-08-2019\t97.20\t98.10\t96.65\t97.30\r\n7\t12-08-2019\t97.20\t97.25\t93.40\t93.75\r\n8\t13-08-2019\t93.70\t96.60\t93.15\t96.35\r\n9\t14-08-2019\t95.85\t96.40\t94.00\t94.45\r\n\r\nAugust 01-08-2019 ,02-08-2019 is one week.\r\nAugust 05-08-2019, 06-08-2019, 07-08-2019, 08-08-2019, 09-08-2019 is second week\r\nI want data in dataframe should be grouped according to week.\r\n\r\n![august-2019-calendar](https://user-images.githubusercontent.com/59202862/89797048-0cf91480-db48-11ea-8a90-e7b96ca33f7e.png)\r\n\r\nI want to group the week data for whole year?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35648", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35648/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35648/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35648/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35648", "id": 675918658, "node_id": "MDU6SXNzdWU2NzU5MTg2NTg=", "number": 35648, "title": "BUG: Reading files fails when option use_inf_as_na is set to True", "user": {"login": "Khris777", "id": 7723080, "node_id": "MDQ6VXNlcjc3MjMwODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/7723080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Khris777", "html_url": "https://github.com/Khris777", "followers_url": "https://api.github.com/users/Khris777/followers", "following_url": "https://api.github.com/users/Khris777/following{/other_user}", "gists_url": "https://api.github.com/users/Khris777/gists{/gist_id}", "starred_url": "https://api.github.com/users/Khris777/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Khris777/subscriptions", "organizations_url": "https://api.github.com/users/Khris777/orgs", "repos_url": "https://api.github.com/users/Khris777/repos", "events_url": "https://api.github.com/users/Khris777/events{/privacy}", "received_events_url": "https://api.github.com/users/Khris777/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-10T07:05:20Z", "updated_at": "2020-08-10T08:44:01Z", "closed_at": "2020-08-10T08:43:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [ x] I have checked that this issue has not already been reported.\r\n\r\n- [ x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\npd.set_option(\"use_inf_as_na\", True)\r\npd.read_csv(some_csv_file)\r\n```\r\n\r\n#### Problem description\r\n\r\nWhen the option `use_inf_as_na` is set to `True` reading any csv-file fails with this error:\r\n\r\n```\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\io\\parsers.py\", line 686, in read_csv\r\n    return _read(filepath_or_buffer, kwds)\r\n\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\io\\parsers.py\", line 458, in _read\r\n    data = parser.read(nrows)\r\n\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\io\\parsers.py\", line 1201, in read\r\n    df = DataFrame(col_dict, columns=columns, index=index)\r\n\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\core\\frame.py\", line 467, in __init__\r\n    mgr = init_dict(data, index, columns, dtype=dtype)\r\n\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\core\\internals\\construction.py\", line 250, in init_dict\r\n    missing = arrays.isna()\r\n\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\core\\series.py\", line 4795, in isna\r\n    return super().isna()\r\n\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\core\\generic.py\", line 7109, in isna\r\n    return isna(self).__finalize__(self, method=\"isna\")\r\n\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\core\\dtypes\\missing.py\", line 124, in isna\r\n    return _isna(obj)\r\n\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\core\\dtypes\\missing.py\", line 157, in _isna\r\n    return _isna_ndarraylike(obj, inf_as_na=inf_as_na)\r\n\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\core\\dtypes\\missing.py\", line 218, in _isna_ndarraylike\r\n    result = _isna_string_dtype(values, dtype, inf_as_na=inf_as_na)\r\n\r\n  File \"C:\\Users\\My.Name\\AppData\\Local\\Continuum\\miniconda3\\envs\\main\\lib\\site-packages\\pandas\\core\\dtypes\\missing.py\", line 246, in _isna_string_dtype\r\n    vec = libmissing.isnaobj_old(values.ravel())\r\n\r\n  File \"pandas\\_libs\\missing.pyx\", line 160, in pandas._libs.missing.isnaobj_old\r\n\r\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\r\n```\r\n\r\nEDIT 1: Error also happens with `read_table()` and when feeding a `StringIO` object to `read_csv()`.\r\n\r\nEDIT 2: `read_excel()` fails as well.\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.7.8.final.0\r\npython-bits      : 64\r\nOS               : Windows\r\nOS-release       : 10\r\nVersion          : 10.0.19041\r\nmachine          : AMD64\r\nprocessor        : Intel64 Family 6 Model 79 Stepping 1, GenuineIntel\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en\r\nLOCALE           : None.None\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2.1\r\nsetuptools       : 49.2.1.post20200802\r\nCython           : 0.29.21\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : 3.1.2\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.3.1\r\nlxml.etree       : 4.5.2\r\nhtml5lib         : 1.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.17.0\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : None\r\nfsspec           : 0.8.0\r\nfastparquet      : 0.4.1\r\ngcsfs            : None\r\nmatplotlib       : 3.3.0\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : 3.0.4\r\npandas_gbq       : None\r\npyarrow          : 1.0.0\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : 1.3.18\r\ntables           : None\r\ntabulate         : 0.8.7\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : None\r\nnumba            : 0.50.1\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35642", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35642/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35642/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35642/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35642", "id": 675686341, "node_id": "MDU6SXNzdWU2NzU2ODYzNDE=", "number": 35642, "title": "BUG:Resample with groupby & agg()", "user": {"login": "BassKot", "id": 31469379, "node_id": "MDQ6VXNlcjMxNDY5Mzc5", "avatar_url": "https://avatars3.githubusercontent.com/u/31469379?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BassKot", "html_url": "https://github.com/BassKot", "followers_url": "https://api.github.com/users/BassKot/followers", "following_url": "https://api.github.com/users/BassKot/following{/other_user}", "gists_url": "https://api.github.com/users/BassKot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BassKot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BassKot/subscriptions", "organizations_url": "https://api.github.com/users/BassKot/orgs", "repos_url": "https://api.github.com/users/BassKot/repos", "events_url": "https://api.github.com/users/BassKot/events{/privacy}", "received_events_url": "https://api.github.com/users/BassKot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-09T11:50:34Z", "updated_at": "2020-08-11T11:08:40Z", "closed_at": "2020-08-11T11:08:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [ X] I have checked that this issue has not already been reported.\r\n\r\n- [ all versions] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\ndata = pd.DataFrame({\r\n    'cat': ['cat_1', 'cat_1', 'cat_2', 'cat_1', 'cat_2', 'cat_1', 'cat_2', 'cat_1'],\r\n    'num': [5,20,22,3,4,30,10,50],\r\n    'date': ['2019-2-1', '2018-02-03','2020-3-11','2019-2-2', '2019-2-2', '2018-12-4','2020-3-11', '2020-12-12']\r\n})\r\ndata['date'] = pd.to_datetime(data['date'])\r\naggreg = data.groupby('cat').resample('Y', on='date')\r\nsumm_ = aggreg.sum()\r\nagg_summ_ = aggreg.agg({'num': 'sum'})\r\nsumm_\r\nagg_summ_\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\nWhen I want aggregate all columns by sum, example with summ_ calculates normal, but if I do example with agg it calculates incorrect.\r\n\r\n#### Expected Output\r\nsumm_\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.7.4.final.0\r\npython-bits      : 64\r\nOS               : Darwin\r\nOS-release       : 19.6.0\r\nVersion          : Darwin Kernel Version 19.6.0: Sun Jul  5 00:43:10 PDT 2020; root:xnu-6153.141.1~9/RELEASE_X86_64\r\nmachine          : x86_64\r\nprocessor        : i386\r\nbyteorder        : little\r\nLC_ALL           : en_US.UTF-8\r\nLANG             : ru_RU.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.18.4\r\npytz             : 2019.3\r\ndateutil         : 2.8.0\r\npip              : 20.0.2\r\nsetuptools       : 41.4.0\r\nCython           : 0.29.13\r\npytest           : 5.2.1\r\nhypothesis       : None\r\nsphinx           : 2.2.0\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.2.1\r\nlxml.etree       : 4.4.1\r\nhtml5lib         : 1.0.1\r\npymysql          : 0.9.3\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.8.0\r\npandas_datareader: None\r\nbs4              : 4.8.0\r\nbottleneck       : 1.2.1\r\nfsspec           : 0.5.2\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.2.1\r\nnumexpr          : 2.7.0\r\nodfpy            : None\r\nopenpyxl         : 3.0.0\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.4.1\r\nsqlalchemy       : 1.3.9\r\ntables           : 3.5.2\r\ntabulate         : 0.8.7\r\nxarray           : 0.16.0\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nnumba            : 0.45.1\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35634", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35634/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35634/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35634/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35634", "id": 675565195, "node_id": "MDU6SXNzdWU2NzU1NjUxOTU=", "number": 35634, "title": "BUG: Pandas 1.1.0 apply function with axis=1 seems to mishandle the rows", "user": {"login": "arshad171", "id": 37022146, "node_id": "MDQ6VXNlcjM3MDIyMTQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/37022146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arshad171", "html_url": "https://github.com/arshad171", "followers_url": "https://api.github.com/users/arshad171/followers", "following_url": "https://api.github.com/users/arshad171/following{/other_user}", "gists_url": "https://api.github.com/users/arshad171/gists{/gist_id}", "starred_url": "https://api.github.com/users/arshad171/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arshad171/subscriptions", "organizations_url": "https://api.github.com/users/arshad171/orgs", "repos_url": "https://api.github.com/users/arshad171/repos", "events_url": "https://api.github.com/users/arshad171/events{/privacy}", "received_events_url": "https://api.github.com/users/arshad171/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 1, "created_at": "2020-08-08T18:08:39Z", "updated_at": "2020-08-10T13:21:13Z", "closed_at": "2020-08-10T13:13:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "### The functionality of the **apply(func, axis=1)** in the newly released pandas==1.1.0 is not working as expected.\r\n\r\nPandas seems to be overwriting all the rows in the data frame with the 1st row present. This is happening specifically when introducing a new column in the data frame when running **func** method on each of the rows.\r\n\r\nThis working in pandas==1.0.5, but seems to be a bug in pandas=1.10.\r\n\r\nI am attaching a sample script and the logs captured for pandas==1.0.5 and pandas==1.10.\r\n\r\n### Attachments:\r\n1. sample script to reproduce the issue (rename to .py before running) --> [script.txt](https://github.com/pandas-dev/pandas/files/5045977/script.txt)\r\n\r\n2. output 1 (pandas==1.0.5) - working as expected --> [out_pandas_1.0.5.log](https://github.com/pandas-dev/pandas/files/5045978/out_pandas_1.0.5.log)\r\n\r\n\r\n3. output 2 (pandas==1.1.0) - **buggy** --> [out_pandas_1.1.0.log](https://github.com/pandas-dev/pandas/files/5045980/out_pandas_1.1.0.log)\r\n\r\n\r\nAs you can see in the *out_pandas_1.1.0.log* log, after preprocessing the data frame using ``` df = df.apply(process_text, axis=1) ``` all the rows in the data frame have been overwritten with the 1st row.\r\n\r\nThis was not the case with pandas==1.0.5, check the **out_pandas_1.0.5.log** log.\r\n\r\n\r\n### Environment\r\n- OS: Ubuntu 20.04\r\n- Python: 3.7.7 (anaconda env)\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35631", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35631/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35631/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35631/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35631", "id": 675540135, "node_id": "MDU6SXNzdWU2NzU1NDAxMzU=", "number": 35631, "title": "skiprows function adding extra column in pandas", "user": {"login": "ajinkya976", "id": 54501149, "node_id": "MDQ6VXNlcjU0NTAxMTQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/54501149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajinkya976", "html_url": "https://github.com/ajinkya976", "followers_url": "https://api.github.com/users/ajinkya976/followers", "following_url": "https://api.github.com/users/ajinkya976/following{/other_user}", "gists_url": "https://api.github.com/users/ajinkya976/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajinkya976/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajinkya976/subscriptions", "organizations_url": "https://api.github.com/users/ajinkya976/orgs", "repos_url": "https://api.github.com/users/ajinkya976/repos", "events_url": "https://api.github.com/users/ajinkya976/events{/privacy}", "received_events_url": "https://api.github.com/users/ajinkya976/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}, {"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-08T15:12:20Z", "updated_at": "2020-08-08T15:24:19Z", "closed_at": "2020-08-08T15:24:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am new to python. I am trying to read excel files and merge into master excel.\r\n\r\nI want to skip first 3 rows in my excel which contains heading and just take rest of rows.\r\n\r\ni am using skiprows=3 in pd.read_excel() method, it is skipping first 3 rows but the problem is, it is including one extra column with name 2 in my excel.\r\n\r\nif i mention skiprows=2 then that extra column (2) is not coming. but empty row in excel is getting added with \"Unnamed\". if i mention skiprows=3 it is not adding \"Unamed\" row but adding extra column with name 2.\r\n\r\ncan someone please help me out in this. below is my code.\r\n\r\n```\r\nimport os\r\nimport pandas as pd\r\n\r\nif os.path.isfile('total_sales.xlsx'):\r\n    os.remove('total_sales.xlsx')\r\n\r\ncwd = os.path.abspath('')\r\nfiles = os.listdir(cwd)\r\n\r\ndf = pd.DataFrame() #create an empty dataframe df for storing the data for master spreadsheet\r\ncols = [0,1,2,3,4,6,7,8,9,10,11]\r\nfor file in files:\r\n    if file.endswith('.xlsx'):\r\n        df=df.append(pd.read_excel(file,skiprows=3,usecols=cols))\r\n\r\n\r\nprint(cwd)\r\nprint(df.head())\r\nprint(df.shape)\r\n\r\ndf.to_excel('total_sales.xlsx')\r\n\r\n\r\n```\r\n\r\nplease find below master excel with output.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Y3MNB.png", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35622", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35622/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35622/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35622/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35622", "id": 675495799, "node_id": "MDU6SXNzdWU2NzU0OTU3OTk=", "number": 35622, "title": "BUG: error: may be used uninitialized. In alpine", "user": {"login": "NikSays", "id": 9448754, "node_id": "MDQ6VXNlcjk0NDg3NTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/9448754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NikSays", "html_url": "https://github.com/NikSays", "followers_url": "https://api.github.com/users/NikSays/followers", "following_url": "https://api.github.com/users/NikSays/following{/other_user}", "gists_url": "https://api.github.com/users/NikSays/gists{/gist_id}", "starred_url": "https://api.github.com/users/NikSays/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NikSays/subscriptions", "organizations_url": "https://api.github.com/users/NikSays/orgs", "repos_url": "https://api.github.com/users/NikSays/repos", "events_url": "https://api.github.com/users/NikSays/events{/privacy}", "received_events_url": "https://api.github.com/users/NikSays/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 129350, "node_id": "MDU6TGFiZWwxMjkzNTA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Build", "name": "Build", "color": "75507B", "default": false, "description": "Library building on various platforms"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 3, "created_at": "2020-08-08T09:35:02Z", "updated_at": "2020-08-17T18:27:45Z", "closed_at": "2020-08-17T18:27:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [ x ] I have checked that this issue has not already been reported. (Not as a separate issue)\r\n\r\n- [ x ] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Problem description\r\nIn an alpine contarner, running `pip3 install pandas=1.1.0`, \r\nresults in error: \r\n```\r\n'__pyx_v_year' may be used uninitialized in this function`\r\n     7787 |             __pyx_v_year = (__pyx_v_year - 1);\r\n          |             ~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~\r\n    cc1: all warnings being treated as errors\r\n    error: command 'gcc' failed with exit status 1\r\n```\r\n\r\n#### Expected Output\r\n\r\nSuccessful install", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35620", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35620/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35620/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35620/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35620", "id": 675491372, "node_id": "MDU6SXNzdWU2NzU0OTEzNzI=", "number": 35620, "title": "CI: Linux py36_locale failures with pytest DeprecationWarning", "user": {"login": "simonjayhawkins", "id": 13159005, "node_id": "MDQ6VXNlcjEzMTU5MDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/13159005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonjayhawkins", "html_url": "https://github.com/simonjayhawkins", "followers_url": "https://api.github.com/users/simonjayhawkins/followers", "following_url": "https://api.github.com/users/simonjayhawkins/following{/other_user}", "gists_url": "https://api.github.com/users/simonjayhawkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonjayhawkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonjayhawkins/subscriptions", "organizations_url": "https://api.github.com/users/simonjayhawkins/orgs", "repos_url": "https://api.github.com/users/simonjayhawkins/repos", "events_url": "https://api.github.com/users/simonjayhawkins/events{/privacy}", "received_events_url": "https://api.github.com/users/simonjayhawkins/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 48070600, "node_id": "MDU6TGFiZWw0ODA3MDYwMA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/CI", "name": "CI", "color": "a2bca7", "default": false, "description": "Related to Continuous Integration"}, {"id": 127685, "node_id": "MDU6TGFiZWwxMjc2ODU=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Testing", "name": "Testing", "color": "C4A000", "default": false, "description": "Custom testing functions or related to the test suite"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 1, "created_at": "2020-08-08T09:01:27Z", "updated_at": "2020-08-19T17:42:48Z", "closed_at": "2020-08-19T17:42:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "tests using `async_mark` are failing cc @alimcmaster1 \r\n```\r\n=========================== short test summary info ============================\r\nERROR pandas/tests/arrays/categorical/test_warnings.py::TestCategoricalWarnings\r\nERROR pandas/tests/arrays/categorical/test_warnings.py::TestCategoricalWarnings\r\nERROR pandas/tests/frame/test_api.py::TestDataFrameMisc - pytest.PytestDeprec...\r\nERROR pandas/tests/frame/test_api.py::TestDataFrameMisc - pytest.PytestDeprec...\r\nERROR pandas/tests/indexes/test_base.py::TestIndex - pytest.PytestDeprecation...\r\nERROR pandas/tests/indexes/test_base.py::TestIndex - pytest.PytestDeprecation...\r\nERROR pandas/tests/resample/test_resampler_grouper.py - pytest.PytestDeprecat...\r\nERROR pandas/tests/resample/test_resampler_grouper.py - pytest.PytestDeprecat...\r\nERROR pandas/tests/series/test_api.py::TestSeriesMisc - pytest.PytestDeprecat...\r\nERROR pandas/tests/series/test_api.py::TestSeriesMisc - pytest.PytestDeprecat...\r\n= 71242 passed, 1936 skipped, 1024 xfailed, 156 warnings, 10 errors in 655.85s (0:10:55) =\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35618", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35618/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35618/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35618/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35618", "id": 675425653, "node_id": "MDU6SXNzdWU2NzU0MjU2NTM=", "number": 35618, "title": "tp_print is deprecated error", "user": {"login": "shyamsantoki", "id": 56479219, "node_id": "MDQ6VXNlcjU2NDc5MjE5", "avatar_url": "https://avatars2.githubusercontent.com/u/56479219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shyamsantoki", "html_url": "https://github.com/shyamsantoki", "followers_url": "https://api.github.com/users/shyamsantoki/followers", "following_url": "https://api.github.com/users/shyamsantoki/following{/other_user}", "gists_url": "https://api.github.com/users/shyamsantoki/gists{/gist_id}", "starred_url": "https://api.github.com/users/shyamsantoki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shyamsantoki/subscriptions", "organizations_url": "https://api.github.com/users/shyamsantoki/orgs", "repos_url": "https://api.github.com/users/shyamsantoki/repos", "events_url": "https://api.github.com/users/shyamsantoki/events{/privacy}", "received_events_url": "https://api.github.com/users/shyamsantoki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 129350, "node_id": "MDU6TGFiZWwxMjkzNTA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Build", "name": "Build", "color": "75507B", "default": false, "description": "Library building on various platforms"}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}, {"id": 258745163, "node_id": "MDU6TGFiZWwyNTg3NDUxNjM=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/IO%20SAS", "name": "IO SAS", "color": "5319e7", "default": false, "description": "SAS: read_sas"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-08T04:23:52Z", "updated_at": "2020-08-10T13:22:25Z", "closed_at": "2020-08-10T13:08:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "# tp_print is deprecated\r\nI'm getting ```tp_print is deprecated``` whenever I try to install Pandas on Termux.\r\nHere's few lines of error I'm getting\r\n```\r\n/data/data/com.termux/files/usr/include/python3.8/cpython/object.h:260:5: note: 'tp_print' has been explicitly marked deprecated he\r\n      Py_DEPRECATED(3.8) int (*tp_print)(PyObject *, FILE *, int);\r\n      ^\r\n  /data/data/com.termux/files/usr/include/python3.8/pyport.h:515:54: note: expanded from macro 'Py_DEPRECATED'\r\n  #define Py_DEPRECATED(VERSION_UNUSED) __attribute__((__deprecated__))\r\n                                                       ^\r\n  pandas/io/sas/sas.c:20655:3: error: 'tp_print' is deprecated [-Werror,-Wdeprecated-declarations]\r\n    0, /*tp_print*/\r\n    ^\r\n  /data/data/com.termux/files/usr/include/python3.8/cpython/object.h:260:5: note: 'tp_print' has been explicitly marked deprecated he\r\n      Py_DEPRECATED(3.8) int (*tp_print)(PyObject *, FILE *, int);\r\n      ^\r\n  /data/data/com.termux/files/usr/include/python3.8/pyport.h:515:54: note: expanded from macro 'Py_DEPRECATED'\r\n  #define Py_DEPRECATED(VERSION_UNUSED) __attribute__((__deprecated__))\r\n                                                       ^\r\n  5 errors generated.\r\n  building 'pandas._libs.json' extension\r\n  creating build/temp.linux-aarch64-3.8/pandas/_libs/src/ujson\r\n  creating build/temp.linux-aarch64-3.8/pandas/_libs/src/ujson/python\r\n  creating build/temp.linux-aarch64-3.8/pandas/_libs/src/ujson/lib\r\n  aarch64-linux-android-clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -fstack-protector-st\r\n  aarch64-linux-android-clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -fstack-protector-st\r\n  aarch64-linux-android-clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -fstack-protector-st\r\n  aarch64-linux-android-clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -fstack-protector-st\r\n  aarch64-linux-android-clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -fstack-protector-st\r\n  aarch64-linux-android-clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -fstack-protector-st\r\n  aarch64-linux-android-clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -fstack-protector-st\r\n  aarch64-linux-android-clang -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -fstack-protector-st\r\n  aarch64-linux-android-clang -shared -L/data/data/com.termux/files/usr/lib -Wl,-rpath=/data/data/com.termux/files/usr/lib -Wl,--enab\r\n  error: command 'aarch64-linux-android-clang' failed with exit status 1\r\n  ----------------------------------------\r\n  ERROR: Failed building wheel for pandas\r\nFailed to build pandas\r\n```\r\n\r\nHowever rolling back cython didn't work for me, I was still getting error. So I tried to rollback Pandas to 1.0.5 and it worked. So I think there's some bug in Pandas package from your side which results above error.\r\n\r\n```\r\npip list\r\nPackage            Version\r\n------------------ ---------\r\nappdirs            1.4.4\r\nargon2-cffi        20.1.0\r\nasv                0.4.2\r\nattrs              19.3.0\r\nbackcall           0.2.0\r\nblack              19.10b0\r\nbleach             3.1.5\r\ncertifi            2020.6.20\r\ncffi               1.14.1\r\nchardet            3.0.4\r\nclick              7.1.2\r\nCython             0.29.21\r\ndecorator          4.4.2\r\ndefusedxml         0.6.0\r\nentrypoints        0.3\r\nidna               2.10\r\nipykernel          5.3.4\r\nipython            7.17.0\r\nipython-genutils   0.2.0\r\nipywidgets         7.5.1\r\njedi               0.17.2\r\nJinja2             2.11.2\r\njsonschema         3.2.0\r\njupyter            1.0.0\r\njupyter-client     6.1.6\r\njupyter-console    6.1.0\r\njupyter-core       4.6.3\r\nlxml               4.5.2\r\nMarkupSafe         1.1.1\r\nmistune            0.8.4\r\nnbconvert          5.6.1\r\nnbformat           5.0.7\r\nnotebook           6.1.1\r\nnumpy              1.19.1\r\npackaging          20.4\r\npandas             1.0.5\r\npandocfilters      1.4.2\r\nparso              0.7.1\r\npathspec           0.8.0\r\npexpect            4.8.0\r\npickleshare        0.7.5\r\npip                20.2.1\r\nprometheus-client  0.8.0\r\nprompt-toolkit     3.0.5\r\nptyprocess         0.6.0\r\npycparser          2.20\r\nPygments           2.6.1\r\npymongo            3.11.0\r\npyparsing          2.4.7\r\npyrsistent         0.16.0\r\npython-dateutil    2.8.1\r\npytz               2020.1\r\npyzmq              19.0.2\r\nqtconsole          4.7.5\r\nQtPy               1.9.0\r\nregex              2020.7.14\r\nrequests           2.24.0\r\nSend2Trash         1.5.0\r\nsetuptools         49.2.1\r\nsix                1.15.0\r\nterminado          0.8.3\r\ntestpath           0.4.4\r\ntoml               0.10.1\r\ntornado            6.0.4\r\ntraitlets          4.3.3\r\ntyped-ast          1.4.1\r\nurllib3            1.25.10\r\nwcwidth            0.2.5\r\nwebencodings       0.5.1\r\nwheel              0.34.2\r\nwidgetsnbextension 3.5.1\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35611", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35611/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35611/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35611/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35611", "id": 675212832, "node_id": "MDU6SXNzdWU2NzUyMTI4MzI=", "number": 35611, "title": "ENH: Make top-level Pandas functions serializable", "user": {"login": "mrocklin", "id": 306380, "node_id": "MDQ6VXNlcjMwNjM4MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/306380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrocklin", "html_url": "https://github.com/mrocklin", "followers_url": "https://api.github.com/users/mrocklin/followers", "following_url": "https://api.github.com/users/mrocklin/following{/other_user}", "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions", "organizations_url": "https://api.github.com/users/mrocklin/orgs", "repos_url": "https://api.github.com/users/mrocklin/repos", "events_url": "https://api.github.com/users/mrocklin/events{/privacy}", "received_events_url": "https://api.github.com/users/mrocklin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1625435109, "node_id": "MDU6TGFiZWwxNjI1NDM1MTA5", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/IO%20Pickle", "name": "IO Pickle", "color": "6c1cdb", "default": false, "description": "Pickle: read_pickle, to_pickle"}, {"id": 986278782, "node_id": "MDU6TGFiZWw5ODYyNzg3ODI=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Tests", "name": "Needs Tests", "color": "cdea3c", "default": false, "description": "Unit test(s) needed to prevent regressions"}, {"id": 717120670, "node_id": "MDU6TGFiZWw3MTcxMjA2NzA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/good%20first%20issue", "name": "good first issue", "color": "0e8a16", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 5, "created_at": "2020-08-07T18:56:19Z", "updated_at": "2020-08-19T18:02:56Z", "closed_at": "2020-08-19T18:02:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```python\r\nimport pandas as pd\r\nimport pickle\r\npickle.dumps(pd.read_csv)\r\n```\r\n\r\n```python-traceback\r\nAttributeError: Can't pickle local object '_make_parser_function.<locals>.parser_f'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35609", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35609/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35609/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35609/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35609", "id": 675106043, "node_id": "MDU6SXNzdWU2NzUxMDYwNDM=", "number": 35609, "title": "BUG: Pandas merge DFs on index and column", "user": {"login": "carlosg-m", "id": 55836583, "node_id": "MDQ6VXNlcjU1ODM2NTgz", "avatar_url": "https://avatars2.githubusercontent.com/u/55836583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlosg-m", "html_url": "https://github.com/carlosg-m", "followers_url": "https://api.github.com/users/carlosg-m/followers", "following_url": "https://api.github.com/users/carlosg-m/following{/other_user}", "gists_url": "https://api.github.com/users/carlosg-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlosg-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlosg-m/subscriptions", "organizations_url": "https://api.github.com/users/carlosg-m/orgs", "repos_url": "https://api.github.com/users/carlosg-m/repos", "events_url": "https://api.github.com/users/carlosg-m/events{/privacy}", "received_events_url": "https://api.github.com/users/carlosg-m/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}, {"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-07T15:55:06Z", "updated_at": "2020-08-10T15:15:34Z", "closed_at": "2020-08-10T15:08:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n# Your code here\r\ndf = pd.DataFrame([0.5,0.6,6,6,7,12],index=[0,0,1,1,1,2], columns=['distance'])\r\n\r\nprint(df)\r\n\r\n   distance\r\n0       0.5\r\n0       0.6\r\n1       6.0\r\n1       6.0\r\n1       7.0\r\n2      12.0\r\n\r\nresult = df.merge(df.groupby(df.index)['distance'].min(), left_index=True, right_index=True, on='distance')\r\n\r\nprint(result)\r\n\r\n   distance\r\n0       0.5\r\n0       0.6\r\n1       6.0\r\n1       6.0\r\n1       7.0\r\n2      12.0\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\nMerging two DataFrames using left and right index and a column does not seem to be possible.\r\n\r\nI only have two options, reset the index on both DFs and merge on both columns which is slower, or create a multiindex which is unnecessary.\r\n\r\n#### Expected Output\r\n\r\n```\r\nresult = df.reset_index().merge(df.groupby(df.index)['distance'].min().reset_index(), on=['index','distance'])\r\n\r\nprint(result)\r\n\r\n   index  distance\r\n0      0       0.5\r\n1      1       6.0\r\n2      1       6.0\r\n3      2      12.0\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.6.9.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 4.19.112+\r\nVersion          : #1 SMP Thu Jul 23 08:00:38 PDT 2020\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.18.5\r\npytz             : 2018.9\r\ndateutil         : 2.8.1\r\npip              : 19.3.1\r\nsetuptools       : 49.2.0\r\nCython           : 0.29.21\r\npytest           : 3.6.4\r\nhypothesis       : None\r\nsphinx           : 1.8.5\r\nblosc            : None\r\nfeather          : 0.4.1\r\nxlsxwriter       : None\r\nlxml.etree       : 4.2.6\r\nhtml5lib         : 1.0.1\r\npymysql          : None\r\npsycopg2         : 2.7.6.1 (dt dec pq3 ext lo64)\r\njinja2           : 2.11.2\r\nIPython          : 5.5.0\r\npandas_datareader: None\r\nbs4              : 4.6.3\r\nbottleneck       : 1.3.2\r\nfsspec           : 0.8.0\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.2.2\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 2.5.9\r\npandas_gbq       : 0.11.0\r\npyarrow          : 0.14.1\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : 0.4.2\r\nscipy            : 1.4.1\r\nsqlalchemy       : 1.3.18\r\ntables           : 3.4.4\r\ntabulate         : 0.8.7\r\nxarray           : 0.15.1\r\nxlrd             : 1.1.0\r\nxlwt             : 1.3.0\r\nnumba            : 0.48.0\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35606", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35606/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35606/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35606/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35606", "id": 674999864, "node_id": "MDU6SXNzdWU2NzQ5OTk4NjQ=", "number": 35606, "title": "REGR: ValueError: cannot convert float NaN to integer - on dataframe.reset_index() in pandas 1.1.0", "user": {"login": "ndhansen", "id": 12735464, "node_id": "MDQ6VXNlcjEyNzM1NDY0", "avatar_url": "https://avatars0.githubusercontent.com/u/12735464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ndhansen", "html_url": "https://github.com/ndhansen", "followers_url": "https://api.github.com/users/ndhansen/followers", "following_url": "https://api.github.com/users/ndhansen/following{/other_user}", "gists_url": "https://api.github.com/users/ndhansen/gists{/gist_id}", "starred_url": "https://api.github.com/users/ndhansen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ndhansen/subscriptions", "organizations_url": "https://api.github.com/users/ndhansen/orgs", "repos_url": "https://api.github.com/users/ndhansen/repos", "events_url": "https://api.github.com/users/ndhansen/events{/privacy}", "received_events_url": "https://api.github.com/users/ndhansen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 71268330, "node_id": "MDU6TGFiZWw3MTI2ODMzMA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/MultiIndex", "name": "MultiIndex", "color": "207de5", "default": false, "description": null}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}, {"id": 211840, "node_id": "MDU6TGFiZWwyMTE4NDA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Timeseries", "name": "Timeseries", "color": "AFEEEE", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 5, "created_at": "2020-08-07T12:59:58Z", "updated_at": "2020-08-14T01:50:52Z", "closed_at": "2020-08-14T01:50:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nfrom pandas.core.dtypes.cast import construct_1d_arraylike_from_scalar\r\nfrom pandas.core.dtypes.missing import na_value_for_dtype\r\nimport numpy as np\r\n\r\ndtype = np.datetime64().dtype\r\nlength = 10\r\nworks_value = np.NaN\r\nfails_value = na_value_for_dtype(dtype)\r\n\r\n# works\r\nconstruct_1d_arraylike_from_scalar(works_value, length, dtype)\r\n\r\n# fails\r\nconstruct_1d_arraylike_from_scalar(fails_value, length, dtype)\r\n```\r\nResults in:\r\n```\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\n    construct_1d_arraylike_from_scalar(value, length, dtype)\r\n  File \"/usr/lib/python3.8/site-packages/pandas/core/dtypes/cast.py\", line 1453, in construct_1d_arraylike_from_scalar\r\n    subarr.fill(value)\r\nValueError: cannot convert float NaN to integer\r\n```\r\n\r\n#### Problem description\r\n\r\nThis is a problem was found when calling `reset_index` on a MultiIndex Dataframe with an index containing datetime information. The expected behaviour would be that it would return an array of NaTs, which ironically only happens if you pass it `np.NaN`.\r\nI'm not familiar with the source code of numpy, so I can only speculate on how to fix it, but I would assume we would need special handling for time values, so we fill time arrays with `np.NaN`s instead of `pandas._libs.tslibs.nattype.NaTType`s.\r\n\r\n#### Expected Output\r\n\r\n`array(['NaT', 'NaT', 'NaT', 'NaT', 'NaT', 'NaT', 'NaT', 'NaT', 'NaT', 'NaT'], dtype=datetime64)`\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.8.3.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.7.9-1-MANJARO\r\nmachine          : x86_64\r\nprocessor        : \r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_GB.UTF-8\r\nLOCALE           : en_GB.UTF-8\r\n\r\npandas           : 1.0.5\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0\r\nCython           : 0.29.21\r\npytest           : 5.4.3\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : 4.5.2\r\nhtml5lib         : 1.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: 0.10.0dev0\r\nbs4              : 4.9.1\r\nbottleneck       : 1.3.2\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : 4.5.2\r\nmatplotlib       : 3.3.0\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : 5.4.3\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.1\r\nsqlalchemy       : 1.3.17\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nxlsxwriter       : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35599", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35599/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35599/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35599/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35599", "id": 674879859, "node_id": "MDU6SXNzdWU2NzQ4Nzk4NTk=", "number": 35599, "title": "BUG: After sort_values() is executed, a large block of memory is not freed", "user": {"login": "wjsi", "id": 8284922, "node_id": "MDQ6VXNlcjgyODQ5MjI=", "avatar_url": "https://avatars1.githubusercontent.com/u/8284922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wjsi", "html_url": "https://github.com/wjsi", "followers_url": "https://api.github.com/users/wjsi/followers", "following_url": "https://api.github.com/users/wjsi/following{/other_user}", "gists_url": "https://api.github.com/users/wjsi/gists{/gist_id}", "starred_url": "https://api.github.com/users/wjsi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wjsi/subscriptions", "organizations_url": "https://api.github.com/users/wjsi/orgs", "repos_url": "https://api.github.com/users/wjsi/repos", "events_url": "https://api.github.com/users/wjsi/events{/privacy}", "received_events_url": "https://api.github.com/users/wjsi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-07T09:12:50Z", "updated_at": "2020-08-07T12:24:06Z", "closed_at": "2020-08-07T12:20:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python                                                                                                                                               \r\nimport psutil\r\nimport pandas as pd\r\n\r\nprint(psutil.Process().memory_info().rss)  # outputs 77533184\r\n\r\n# first execution\r\narrow_ser = pd.Series(['abcdefg'] * (10 * 1024 ** 2))\r\narrow_ser = arrow_ser.sort_values()  # same behavior as sort_values(inplace=True)\r\ndel arrow_ser\r\nprint(psutil.Process().memory_info().rss)  # outputs 686264320\r\n\r\n# second execution\r\narrow_ser = pd.Series(['abcdefg'] * (10 * 1024 ** 2))\r\narrow_ser = arrow_ser.sort_values()\r\ndel arrow_ser\r\nprint(psutil.Process().memory_info().rss)  # outputs 686456832\r\n```\r\n\r\n#### Problem description\r\n\r\nWhen calling ``sort_values()`` on dataframes or series, we discover that a large block of memory is allocated and not freed even if all related objects are deleted. When sort_values() is executed again, the size of allocated memory does not increase significantly. When the line of ``sort_values()`` is commented out, memory sizes are ok. We guess if there is a cache or memory pool when calling ``sort_values()``, but we cannot spot it.\r\n\r\nWe test ``sort_values()`` under 1.1.0, 1.0.5 and 0.24.1, and they share the same behavior. The test environment is an independent conda env without MKL, thus MKL buffers is not a problem.\r\n\r\n#### Expected Output\r\n\r\nThe memory shall be freed once the related object is deleted, or a method cleaning the caches is needed.\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.7.7.final.0\r\npython-bits      : 64\r\nOS               : Darwin\r\nOS-release       : 19.6.0\r\nVersion          : Darwin Kernel Version 19.6.0: Sun Jul  5 00:43:10 PDT 2020; root:xnu-6153.141.1~9/RELEASE_X86_64\r\nmachine          : x86_64\r\nprocessor        : i386\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : zh_CN.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0.post20200714\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : None\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35598", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35598/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35598/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35598/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35598", "id": 674861801, "node_id": "MDU6SXNzdWU2NzQ4NjE4MDE=", "number": 35598, "title": "BUG: interpolate gives a TypeError on empty dataframes", "user": {"login": "sanderland", "id": 48946947, "node_id": "MDQ6VXNlcjQ4OTQ2OTQ3", "avatar_url": "https://avatars2.githubusercontent.com/u/48946947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanderland", "html_url": "https://github.com/sanderland", "followers_url": "https://api.github.com/users/sanderland/followers", "following_url": "https://api.github.com/users/sanderland/following{/other_user}", "gists_url": "https://api.github.com/users/sanderland/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanderland/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanderland/subscriptions", "organizations_url": "https://api.github.com/users/sanderland/orgs", "repos_url": "https://api.github.com/users/sanderland/repos", "events_url": "https://api.github.com/users/sanderland/events{/privacy}", "received_events_url": "https://api.github.com/users/sanderland/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 57296398, "node_id": "MDU6TGFiZWw1NzI5NjM5OA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Algos", "name": "Algos", "color": "eb6420", "default": false, "description": "Non-arithmetic algos: value_counts, factorize, sorting, isin, clip, shift, diff"}, {"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 2822342, "node_id": "MDU6TGFiZWwyODIyMzQy", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Missing-data", "name": "Missing-data", "color": "d7e102", "default": false, "description": null}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 1, "created_at": "2020-08-07T08:42:21Z", "updated_at": "2020-08-17T19:32:54Z", "closed_at": "2020-08-17T19:32:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Already fixed in #35543, making an issue for linking/discussion.\r\n\r\n- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [x] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nfrom pandas import DataFrame\r\nDataFrame().interpolate()\r\n```\r\n    \"Cannot interpolate with all object-dtype columns \"\r\nTypeError: Cannot interpolate with all object-dtype columns in the DataFrame. Try setting at least one column to a numeric dtype.\r\n\r\n#### Problem description\r\nThis is a regression, 1.0.5 handles it fine.\r\n\r\nThe problem appeared due to checking `np.all(obj.dtypes == np.dtype(object))` since the all of an empty set is True\r\n\r\n#### Expected Output\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\npandas           : 1.1.0\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35589", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35589/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35589/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35589/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35589", "id": 674374346, "node_id": "MDU6SXNzdWU2NzQzNzQzNDY=", "number": 35589, "title": "BUG: `DataFrame.reset_index()` discards `MultiIndex` dtypes if `DataFrame` is empty", "user": {"login": "batterseapower", "id": 18488, "node_id": "MDQ6VXNlcjE4NDg4", "avatar_url": "https://avatars3.githubusercontent.com/u/18488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/batterseapower", "html_url": "https://github.com/batterseapower", "followers_url": "https://api.github.com/users/batterseapower/followers", "following_url": "https://api.github.com/users/batterseapower/following{/other_user}", "gists_url": "https://api.github.com/users/batterseapower/gists{/gist_id}", "starred_url": "https://api.github.com/users/batterseapower/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/batterseapower/subscriptions", "organizations_url": "https://api.github.com/users/batterseapower/orgs", "repos_url": "https://api.github.com/users/batterseapower/repos", "events_url": "https://api.github.com/users/batterseapower/events{/privacy}", "received_events_url": "https://api.github.com/users/batterseapower/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}, {"id": 307649777, "node_id": "MDU6TGFiZWwzMDc2NDk3Nzc=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Info", "name": "Needs Info", "color": "207de5", "default": false, "description": "Clarification about behavior needed to assess issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-06T14:50:31Z", "updated_at": "2020-08-06T15:48:20Z", "closed_at": "2020-08-06T15:48:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n- [x] I have confirmed this bug exists on the latest version of pandas. (tried on v1.0.5 -- the latest in Conda -- and checked the release notes for the new version to make sure they don't mention anything related)\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nx = pd.DataFrame.from_dict({\r\n    'A': pd.Categorical.from_codes([1], categories=['G', 'H']),\r\n    'B': np.array([0], dtype='i8'),\r\n})\r\n\r\nx.dtypes # category and int64\r\n\r\n# This is the bug:\r\nx.iloc[:0].set_index(['A', 'B']).reset_index().dtypes # float64 and float64\r\n\r\n# These cases all work correctly i.e. the dtypes are category and int64\r\nx.set_index(['A', 'B']).reset_index().dtypes\r\nx.set_index('A').reset_index().dtypes\r\nx.iloc[:0].set_index('A').reset_index().dtypes\r\n\r\n# This is CategoricalDtype as expected, so the MultiIndex construction is correct: it's just the `reset_index()` which is throwing away the info\r\nx.iloc[:0].set_index(['A', 'B']).index.get_level_values('A').dtype\r\n```\r\n\r\n#### Problem description\r\n\r\n`reset_index` shouldn't throw away dtype information in the special case where the `DataFrame` has zero rows. Sometimes it's hard to avoid throwing away info when you manipulate zero-element DataFrames, but in this case there is no reason to do it.\r\n\r\n#### Expected Output\r\n\r\ncategory and int64 dtypes from `reset_index` in all cases\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.8.5.final.0\r\npython-bits      : 64\r\nOS               : Windows\r\nOS-release       : 10\r\nmachine          : AMD64\r\nprocessor        : Intel64 Family 6 Model 63 Stepping 2, GenuineIntel\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : English_United Kingdom.936\r\n\r\npandas           : 1.0.5\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0.post20200714\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : 1.3.2\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nxlsxwriter       : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35586", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35586/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35586/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35586/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35586", "id": 674290285, "node_id": "MDU6SXNzdWU2NzQyOTAyODU=", "number": 35586, "title": "BUG: Pandas Styler cell_ids Arg", "user": {"login": "attack68", "id": 24256554, "node_id": "MDQ6VXNlcjI0MjU2NTU0", "avatar_url": "https://avatars0.githubusercontent.com/u/24256554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/attack68", "html_url": "https://github.com/attack68", "followers_url": "https://api.github.com/users/attack68/followers", "following_url": "https://api.github.com/users/attack68/following{/other_user}", "gists_url": "https://api.github.com/users/attack68/gists{/gist_id}", "starred_url": "https://api.github.com/users/attack68/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/attack68/subscriptions", "organizations_url": "https://api.github.com/users/attack68/orgs", "repos_url": "https://api.github.com/users/attack68/repos", "events_url": "https://api.github.com/users/attack68/events{/privacy}", "received_events_url": "https://api.github.com/users/attack68/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 57395487, "node_id": "MDU6TGFiZWw1NzM5NTQ4Nw==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/IO%20HTML", "name": "IO HTML", "color": "006b75", "default": false, "description": "read_html, to_html, Styler.apply, Styler.applymap"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 0, "created_at": "2020-08-06T12:52:49Z", "updated_at": "2020-08-07T21:35:22Z", "closed_at": "2020-08-07T21:35:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Pandas Styler has the following argument:\r\n\r\n> cell_ids: bool, default True\r\nIf True, each cell will have an id attribute in their HTML tag. The id takes the form T_<uuid>_row<num_row>_col<num_col> where <uuid> is the unique identifier, <num_row> is the row number and <num_col> is the column number.\r\n\r\nThis doesn't seem to work. \r\n\r\nConsider the example in the docs:\r\n\r\n```\r\nimport pandas as pd  # NOTE VERSION 1.1.0\r\nfrom pandas.io.formats.style import Styler\r\ndef highlight_max(s):\r\n    x = s == s.max()\r\n    x = x.replace(False, '')\r\n    x = x.replace(True, 'background-color: yellow; color: brown')\r\n    return x\r\ndf = pd.DataFrame(data=[[0,1], [1,0]])\r\ns = Styler(df, uuid='_', cell_ids=False)\r\ns.apply(highlight_max)\r\ns.render()\r\n```\r\nThis will still render `id` css tags for all cells even though it should have been ignored on some.\r\n\r\n#### Reason and Solution\r\nUpon render, within the code a `ctx` defaultdict object contains the properties for each cell:\r\n\r\n> ctx = defaultdict(<class 'list'>, {(1,0): ['background-color: yellow', 'color: brown'], (0,1): ['background-color: yellow', 'color: brown']})\r\n\r\nOn line 393 we have the condition:\r\n```\r\nif self.cell_ids or not (len(ctx[r, c]) == 1 and ctx[r, c][0] == \"\"):\r\n    row_dict[\"id\"] = \"_\".join(cs[1:])\r\n```\r\nThis fails because the `_update_ctx` function handles empty string by not adding to the `ctx` - previously I suspect it performed differently..\r\n\r\nWe should really change line 393 to:\r\n\r\n    if self.cell_ids or (r,c) in ctx:\r\n\r\nI added a PR for this..", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35580", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35580/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35580/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35580/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35580", "id": 673912827, "node_id": "MDU6SXNzdWU2NzM5MTI4Mjc=", "number": 35580, "title": "BUG:dtype=object columns with NaNs coerce integers to floats", "user": {"login": "ashtonteng", "id": 9942222, "node_id": "MDQ6VXNlcjk5NDIyMjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/9942222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashtonteng", "html_url": "https://github.com/ashtonteng", "followers_url": "https://api.github.com/users/ashtonteng/followers", "following_url": "https://api.github.com/users/ashtonteng/following{/other_user}", "gists_url": "https://api.github.com/users/ashtonteng/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashtonteng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashtonteng/subscriptions", "organizations_url": "https://api.github.com/users/ashtonteng/orgs", "repos_url": "https://api.github.com/users/ashtonteng/repos", "events_url": "https://api.github.com/users/ashtonteng/events{/privacy}", "received_events_url": "https://api.github.com/users/ashtonteng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-05T23:34:29Z", "updated_at": "2020-08-07T11:59:51Z", "closed_at": "2020-08-07T11:55:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\ndf = pd.DataFrame({'name': [np.nan, \"hi\"],\r\n                   'mask': [True, 4],\r\n                   'weapon': [5, np.nan]}).astype(object)\r\nprint(df) \r\n\"\"\"\r\nname  mask weapon\r\n0  NaN  True      5\r\n1   hi     4    NaN\r\n\"\"\" # everything prints out correctly\r\nprint(df.iloc[0].values) # [nan True 5.0] # during indexing, 5 gets coerced to 5.0\r\n# ultimately I want to be able to do df.to_csv(), and get unmodified data\r\n```\r\n#### Problem description\r\n\r\nI have a dataframe of mixed types, which I cast to dtype=object, and NaNs in certain grids. Printing out the dataframe works fine, but when I try indexing into specific rows, or exporting to_csv, the values in the columns with NaNs are quietly modified - integers become floats. I believe this is a bug because I would expect to_csv to produce a csv file that is similar to printing the dataframe, without data types being changed. I cannot cast the dataframe to type Int64, since I have other types in the dataframe as well.\r\n\r\n#### Expected Output\r\n\r\nInstead of [nan True 5.0], I should get [nan True 5]\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.7.8.final.0\r\npython-bits      : 64\r\nOS               : Darwin\r\nOS-release       : 19.6.0\r\nVersion          : Darwin Kernel Version 19.6.0: Sun Jul  5 00:43:10 PDT 2020; root:xnu-6153.141.1~9/RELEASE_X86_64\r\nmachine          : x86_64\r\nprocessor        : i386\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2.1\r\nsetuptools       : 49.2.0\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.3.0\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.2\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35577", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35577/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35577/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35577/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35577", "id": 673861051, "node_id": "MDU6SXNzdWU2NzM4NjEwNTE=", "number": 35577, "title": "ENH: write support for google cloud storage ", "user": {"login": "zyxue", "id": 527862, "node_id": "MDQ6VXNlcjUyNzg2Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/527862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyxue", "html_url": "https://github.com/zyxue", "followers_url": "https://api.github.com/users/zyxue/followers", "following_url": "https://api.github.com/users/zyxue/following{/other_user}", "gists_url": "https://api.github.com/users/zyxue/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyxue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyxue/subscriptions", "organizations_url": "https://api.github.com/users/zyxue/orgs", "repos_url": "https://api.github.com/users/zyxue/repos", "events_url": "https://api.github.com/users/zyxue/events{/privacy}", "received_events_url": "https://api.github.com/users/zyxue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76812, "node_id": "MDU6TGFiZWw3NjgxMg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Enhancement", "name": "Enhancement", "color": "4E9A06", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-05T21:33:12Z", "updated_at": "2020-08-06T14:20:44Z", "closed_at": "2020-08-06T11:48:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Is your feature request related to a problem?\r\n\r\nPandas can read from google cloud storage directly. I wonder if it's a good idea to support writing data frame to google cloud storage directly.\r\n\r\n#### Describe the solution you'd like\r\n\r\npd.to_parquet('gs://some-bucket/mydata.parquet')\r\n\r\n#### API breaking implications\r\n\r\nunaware \r\n\r\n#### Describe alternatives you've considered\r\n\r\nI've been writing custom functions like `write_df_to_gcs(df, gcs_uri, gcs_credentials)`, but I feel the better abstraction is to be inside `pd.to_parquet`, e.g. if to_parquet detects the path is a GCS URL, then write to GCS instead.\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35576", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35576/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35576/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35576/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35576", "id": 673798042, "node_id": "MDU6SXNzdWU2NzM3OTgwNDI=", "number": 35576, "title": "ENH: way to opt-in to StringDtype instead of object dtype in read_csv()", "user": {"login": "chrish42", "id": 632858, "node_id": "MDQ6VXNlcjYzMjg1OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/632858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrish42", "html_url": "https://github.com/chrish42", "followers_url": "https://api.github.com/users/chrish42/followers", "following_url": "https://api.github.com/users/chrish42/following{/other_user}", "gists_url": "https://api.github.com/users/chrish42/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrish42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrish42/subscriptions", "organizations_url": "https://api.github.com/users/chrish42/orgs", "repos_url": "https://api.github.com/users/chrish42/repos", "events_url": "https://api.github.com/users/chrish42/events{/privacy}", "received_events_url": "https://api.github.com/users/chrish42/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}, {"id": 76812, "node_id": "MDU6TGFiZWw3NjgxMg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Enhancement", "name": "Enhancement", "color": "4E9A06", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-05T19:38:07Z", "updated_at": "2020-08-05T20:01:23Z", "closed_at": "2020-08-05T19:42:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I got bit recently again by the mixed types DtypeWarning while processing a CSV file. I assume that at some point, when StringDtype is not experimental anymore, `read_csv()` will use that and won't need object dtype anymore, and so this potential problem source will go away.\r\n\r\nIn the meantime though, would it be possible to have an option in `read_csv()` to use StringDtype instead of the object dtype? Both for early adopters and people who want to try it out... and it would also be a nice migration path for when StringDtype is ready. Then, it would only be a matter of flipping the default for this switch. And for people who need to revert to object dtype for some reason, that would provide them a way to do that too at that time. Thoughts? Or is it still too soon for even experimental usage of StringDtype in `read_csv()`?\r\n\r\nI'd be willing to create a pull request for this (at last for the Python version of the CSV parser).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35574", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35574/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35574/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35574/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35574", "id": 673769628, "node_id": "MDU6SXNzdWU2NzM3Njk2Mjg=", "number": 35574, "title": "BUG: pd.to_timedelta() fails when arg is a Series with Int64 dtype", "user": {"login": "egoddard", "id": 3970088, "node_id": "MDQ6VXNlcjM5NzAwODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/3970088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/egoddard", "html_url": "https://github.com/egoddard", "followers_url": "https://api.github.com/users/egoddard/followers", "following_url": "https://api.github.com/users/egoddard/following{/other_user}", "gists_url": "https://api.github.com/users/egoddard/gists{/gist_id}", "starred_url": "https://api.github.com/users/egoddard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/egoddard/subscriptions", "organizations_url": "https://api.github.com/users/egoddard/orgs", "repos_url": "https://api.github.com/users/egoddard/repos", "events_url": "https://api.github.com/users/egoddard/events{/privacy}", "received_events_url": "https://api.github.com/users/egoddard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1817503692, "node_id": "MDU6TGFiZWwxODE3NTAzNjky", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/NA%20-%20MaskedArrays", "name": "NA - MaskedArrays", "color": "8cc645", "default": false, "description": "Related to pd.NA and nullable extension arrays"}, {"id": 211840, "node_id": "MDU6TGFiZWwyMTE4NDA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Timeseries", "name": "Timeseries", "color": "AFEEEE", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "egoddard", "id": 3970088, "node_id": "MDQ6VXNlcjM5NzAwODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/3970088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/egoddard", "html_url": "https://github.com/egoddard", "followers_url": "https://api.github.com/users/egoddard/followers", "following_url": "https://api.github.com/users/egoddard/following{/other_user}", "gists_url": "https://api.github.com/users/egoddard/gists{/gist_id}", "starred_url": "https://api.github.com/users/egoddard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/egoddard/subscriptions", "organizations_url": "https://api.github.com/users/egoddard/orgs", "repos_url": "https://api.github.com/users/egoddard/repos", "events_url": "https://api.github.com/users/egoddard/events{/privacy}", "received_events_url": "https://api.github.com/users/egoddard/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "egoddard", "id": 3970088, "node_id": "MDQ6VXNlcjM5NzAwODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/3970088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/egoddard", "html_url": "https://github.com/egoddard", "followers_url": "https://api.github.com/users/egoddard/followers", "following_url": "https://api.github.com/users/egoddard/following{/other_user}", "gists_url": "https://api.github.com/users/egoddard/gists{/gist_id}", "starred_url": "https://api.github.com/users/egoddard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/egoddard/subscriptions", "organizations_url": "https://api.github.com/users/egoddard/orgs", "repos_url": "https://api.github.com/users/egoddard/repos", "events_url": "https://api.github.com/users/egoddard/events{/privacy}", "received_events_url": "https://api.github.com/users/egoddard/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 3, "created_at": "2020-08-05T18:50:10Z", "updated_at": "2020-08-07T11:49:52Z", "closed_at": "2020-08-07T11:49:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "- [X] I have checked that this issue has not already been reported.\r\n\r\n- [X] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [X] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\n\r\n\r\nseries = pd.Series([pd.NA], dtype=\"Int64\")\r\n\r\npd.to_timedelta(series, errors=\"coerce\")\r\n```\r\n\r\n#### Problem description\r\n\r\nWhen converting a `Series` with an `Int64` dtype to a timedelta, `to_timedelta` fails with\r\n \r\n```python\r\nValueError: cannot convert to 'int64'-dtype NumPy array with missing values. Specify an appropriate 'na_value' for this dtype.\r\n```\r\n\r\nPassing a Python list containing a NA value works, as does passing an `Int64` Series that does not contain NA values. The functionality between these cases should be equivalent.\r\n\r\n\r\n#### Expected Output\r\n\r\n`pd.to_timedelta()` output returns a `timedelta64` Series containing NA values when the input is an `Int64` Series containg NA values:\r\n\r\n```python\r\n0   <NA>\r\ndtype: timedelta64[ns]\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : 3b6915ef9435b13ac5d8c19634270ae231f8e47c\r\npython           : 3.7.7.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.4.0-7634-generic\r\nVersion          : #38~1595345317~20.04~a8480ad-Ubuntu SMP Wed Jul 22 15:13:45 UTC \r\nmachine          : x86_64\r\nprocessor        : \r\nbyteorder        : little\r\nLC_ALL           : C.UTF-8\r\nLANG             : C.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.2.0.dev0+28.g3b6915ef9\r\nnumpy            : 1.18.5\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2.1\r\nsetuptools       : 45.2.0.post20200210\r\nCython           : 0.29.21\r\npytest           : 6.0.1\r\nhypothesis       : 5.23.11\r\nsphinx           : 3.1.1\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.3.1\r\nlxml.etree       : 4.4.1\r\nhtml5lib         : 1.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.17.0\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : 1.3.2\r\nfsspec           : 0.8.0\r\nfastparquet      : 0.4.1\r\ngcsfs            : 0.6.2\r\nmatplotlib       : 3.2.1\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 3.0.4\r\npandas_gbq       : None\r\npyarrow          : 0.16.0\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : 0.4.2\r\nscipy            : 1.5.2\r\nsqlalchemy       : 1.3.18\r\ntables           : 3.6.1\r\ntabulate         : 0.8.7\r\nxarray           : 0.16.0\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nnumba            : 0.50.1\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35570", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35570/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35570/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35570/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35570", "id": 673583103, "node_id": "MDU6SXNzdWU2NzM1ODMxMDM=", "number": 35570, "title": "Change the default of `check_freq` to `False` as it breaks existing code", "user": {"login": "MaxWinterstein", "id": 5927148, "node_id": "MDQ6VXNlcjU5MjcxNDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/5927148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaxWinterstein", "html_url": "https://github.com/MaxWinterstein", "followers_url": "https://api.github.com/users/MaxWinterstein/followers", "following_url": "https://api.github.com/users/MaxWinterstein/following{/other_user}", "gists_url": "https://api.github.com/users/MaxWinterstein/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaxWinterstein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaxWinterstein/subscriptions", "organizations_url": "https://api.github.com/users/MaxWinterstein/orgs", "repos_url": "https://api.github.com/users/MaxWinterstein/repos", "events_url": "https://api.github.com/users/MaxWinterstein/events{/privacy}", "received_events_url": "https://api.github.com/users/MaxWinterstein/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}, {"id": 127685, "node_id": "MDU6TGFiZWwxMjc2ODU=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Testing", "name": "Testing", "color": "C4A000", "default": false, "description": "Custom testing functions or related to the test suite"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2020-08-05T14:26:48Z", "updated_at": "2020-08-14T13:05:35Z", "closed_at": "2020-08-14T13:04:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "As already mentioned in https://github.com/pandas-dev/pandas/pull/34050 the default of `check_freq` was set to True, which leads to broken code / tests. \r\n\r\nI suggest to change it to `False` as it ensures existing code won't break.\r\n\r\n>k thanks. pls open an issue to change this to `check_freq=False`; I *think* this might break downstream, IIRC a comment by @jorisvandenbossche\r\n\r\n_Originally posted by @jreback in https://github.com/pandas-dev/pandas/pull/34050#issuecomment-626227446_", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35564", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35564/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35564/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35564/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35564", "id": 673423086, "node_id": "MDU6SXNzdWU2NzM0MjMwODY=", "number": 35564, "title": "BUG:df.sort_values() disturb the order of values among columns. ", "user": {"login": "yangyxt", "id": 40780228, "node_id": "MDQ6VXNlcjQwNzgwMjI4", "avatar_url": "https://avatars1.githubusercontent.com/u/40780228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yangyxt", "html_url": "https://github.com/yangyxt", "followers_url": "https://api.github.com/users/yangyxt/followers", "following_url": "https://api.github.com/users/yangyxt/following{/other_user}", "gists_url": "https://api.github.com/users/yangyxt/gists{/gist_id}", "starred_url": "https://api.github.com/users/yangyxt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yangyxt/subscriptions", "organizations_url": "https://api.github.com/users/yangyxt/orgs", "repos_url": "https://api.github.com/users/yangyxt/repos", "events_url": "https://api.github.com/users/yangyxt/events{/privacy}", "received_events_url": "https://api.github.com/users/yangyxt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 307649777, "node_id": "MDU6TGFiZWwzMDc2NDk3Nzc=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Info", "name": "Needs Info", "color": "207de5", "default": false, "description": "Clarification about behavior needed to assess issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-05T10:13:33Z", "updated_at": "2020-08-19T12:19:38Z", "closed_at": "2020-08-19T12:19:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [ ] I have checked that this issue has not already been reported.\r\ncheck\r\n- [ ] I have confirmed this bug exists on the latest version of pandas.\r\ncheck\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\ncheck\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n# Your code here\r\nanno_table.sort_values(by=['Denovo_status', 'CLNSIG', patient_gt_col, 'ExonicFunc.refGene', 'DANN_score'], ascending=False, inplace=True)\r\n    \r\n```\r\n\r\n#### Problem description\r\nI have two columns named \"Gene.refGene\" and \"AAChange.refGene\" the later one is the detailed description of the amino acid change caused by a variant on the gene. So it should strictly correspond to the former column I mentioned here. \r\n\r\nHowever, after the running the code pasted above, their correspondence become completely messed. \r\n[this should explain **why** the current behaviour is a problem and why the expected output is a better solution]\r\n\r\n#### Expected Output\r\nHere I prepare the sample code for you to re-generate the issue.\r\n[Archive.zip](https://github.com/pandas-dev/pandas/files/5027662/Archive.zip)\r\nPls de-compress the package and run the sh file. Keep them in the same folder.\r\n\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details> \r\n\r\n![image](https://user-images.githubusercontent.com/40780228/89400761-eb162100-d746-11ea-8c55-85910b690273.png)\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35560", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35560/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35560/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35560/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35560", "id": 673198502, "node_id": "MDU6SXNzdWU2NzMxOTg1MDI=", "number": 35560, "title": "BUG: series.where(boolean) works but df.where(boolean) does not", "user": {"login": "dycw", "id": 10572122, "node_id": "MDQ6VXNlcjEwNTcyMTIy", "avatar_url": "https://avatars0.githubusercontent.com/u/10572122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dycw", "html_url": "https://github.com/dycw", "followers_url": "https://api.github.com/users/dycw/followers", "following_url": "https://api.github.com/users/dycw/following{/other_user}", "gists_url": "https://api.github.com/users/dycw/gists{/gist_id}", "starred_url": "https://api.github.com/users/dycw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dycw/subscriptions", "organizations_url": "https://api.github.com/users/dycw/orgs", "repos_url": "https://api.github.com/users/dycw/repos", "events_url": "https://api.github.com/users/dycw/events{/privacy}", "received_events_url": "https://api.github.com/users/dycw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-05T02:12:32Z", "updated_at": "2020-08-05T11:34:46Z", "closed_at": "2020-08-05T11:26:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\n\r\nx = pd.Series(range(3), dtype=float)\r\nmask = pd.Series([True, False, nan], dtype=pd.BooleanDtype())\r\nprint(f\"x=\\n{x}\\n\\nmask=\\n{mask}\\n\\nx.where(mask)=\\n{x.where(mask)}\")\r\n\r\nx=\r\n0   0.00000\r\n1   1.00000\r\n2   2.00000\r\ndtype: float64\r\n\r\nmask=\r\n0     True\r\n1    False\r\n2     <NA>\r\ndtype: boolean\r\n\r\nx.where(mask)=\r\n0   0.00000\r\n1       nan\r\n2       nan\r\ndtype: float64\r\n```\r\n\r\n```python\r\nx_df = x.to_frame()\r\nmask_df = mask.to_frame()\r\nprint(f\"x_df=\\n{x_df}\\n\\nmask_df=\\n{mask_df}\")\r\nx_df.where(mask_df)\r\n\r\nx_df=\r\n        0\r\n0 0.00000\r\n1 1.00000\r\n2 2.00000\r\n\r\nmask_df=\r\n       0\r\n0   True\r\n1  False\r\n2   <NA>\r\n\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-9-7e122bb223a4> in <module>\r\n      2 mask_df = mask.to_frame()\r\n      3 print(f\"x_df=\\n{x_df}\\n\\nmask_df=\\n{mask_df}\")\r\n----> 4 x_df.where(mask_df)\r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/generic.py in where(self, cond, other, inplace, axis, level, errors, try_cast)\r\n   8990         \"\"\"\r\n   8991         other = com.apply_if_callable(other, self)\r\n-> 8992         return self._where(\r\n   8993             cond, other, inplace, axis, level, errors=errors, try_cast=try_cast\r\n   8994         )\r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/generic.py in _where(self, cond, other, inplace, axis, level, errors, try_cast)\r\n   8847 \r\n   8848         else:\r\n-> 8849             new_data = self._mgr.where(\r\n   8850                 other=other,\r\n   8851                 cond=cond,\r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/internals/managers.py in where(self, other, cond, align, errors, try_cast, axis)\r\n    511             other = extract_array(other, extract_numpy=True)\r\n    512 \r\n--> 513         return self.apply(\r\n    514             \"where\",\r\n    515             align_keys=align_keys,\r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/internals/managers.py in apply(self, f, align_keys, **kwargs)\r\n    394                 applied = b.apply(f, **kwargs)\r\n    395             else:\r\n--> 396                 applied = getattr(b, f)(**kwargs)\r\n    397             result_blocks = _extend_blocks(applied, result_blocks)\r\n    398 \r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/internals/blocks.py in where(self, other, cond, errors, try_cast, axis)\r\n   1299         import pandas.core.computation.expressions as expressions\r\n   1300 \r\n-> 1301         cond = _extract_bool_array(cond)\r\n   1302         assert not isinstance(other, (ABCIndexClass, ABCSeries, ABCDataFrame))\r\n   1303 \r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/internals/blocks.py in _extract_bool_array(mask)\r\n   2862 \r\n   2863     assert isinstance(mask, np.ndarray), type(mask)\r\n-> 2864     assert mask.dtype == bool, mask.dtype\r\n   2865     return mask\r\n\r\nAssertionError: object\r\n```\r\n\r\n#### Problem description\r\n\r\nIf the truthiness of `boolean` Series is defined, then it certainly should be for DataFrames.\r\n\r\n#### Expected Output\r\n\r\nEquivalent to doing this columnwise, i.e.:\r\n```python\r\nexpected = pd.concat([x.where(m) for (_, x), (_, m) in zip(x_df.items(), mask_df.items())], axis=1)\r\nprint(f\"expected=\\n{expected}\")\r\n\r\nexpected=\r\n        0\r\n0 0.00000\r\n1     nan\r\n2     nan\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.3.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.4.0-42-generic\r\nVersion          : #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_HK.UTF-8\r\nLOCALE           : en_HK.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0.post20200714\r\nCython           : None\r\npytest           : 6.0.1\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : 2.8.5 (dt dec pq3 ext lo64)\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.2.2\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : 1.3.18\r\ntables           : None\r\ntabulate         : 0.8.3\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35559", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35559/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35559/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35559/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35559", "id": 673189882, "node_id": "MDU6SXNzdWU2NzMxODk4ODI=", "number": 35559, "title": "BUG: A read-only DataFrame cannot be .diff()'ed", "user": {"login": "dycw", "id": 10572122, "node_id": "MDQ6VXNlcjEwNTcyMTIy", "avatar_url": "https://avatars0.githubusercontent.com/u/10572122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dycw", "html_url": "https://github.com/dycw", "followers_url": "https://api.github.com/users/dycw/followers", "following_url": "https://api.github.com/users/dycw/following{/other_user}", "gists_url": "https://api.github.com/users/dycw/gists{/gist_id}", "starred_url": "https://api.github.com/users/dycw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dycw/subscriptions", "organizations_url": "https://api.github.com/users/dycw/orgs", "repos_url": "https://api.github.com/users/dycw/repos", "events_url": "https://api.github.com/users/dycw/events{/privacy}", "received_events_url": "https://api.github.com/users/dycw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 57296398, "node_id": "MDU6TGFiZWw1NzI5NjM5OA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Algos", "name": "Algos", "color": "eb6420", "default": false, "description": "Non-arithmetic algos: value_counts, factorize, sorting, isin, clip, shift, diff"}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}], "state": "closed", "locked": false, "assignee": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 9, "created_at": "2020-08-05T01:46:19Z", "updated_at": "2020-08-14T14:35:21Z", "closed_at": "2020-08-14T14:35:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\ndata = np.ones(2, dtype=int)\r\ndata.flags.writeable = False\r\ndf = pd.DataFrame(data)\r\ndf.diff()\r\n\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-2-df60a870b020> in <module>\r\n      2 data.flags.writeable = False\r\n      3 df = pd.DataFrame(data)\r\n----> 4 df.diff()\r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/frame.py in diff(self, periods, axis)\r\n   7247             return self.T.diff(periods, axis=0).T\r\n   7248 \r\n-> 7249         new_data = self._mgr.diff(n=periods, axis=bm_axis)\r\n   7250         return self._constructor(new_data)\r\n   7251 \r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/internals/managers.py in diff(self, n, axis)\r\n    546 \r\n    547     def diff(self, n: int, axis: int) -> \"BlockManager\":\r\n--> 548         return self.apply(\"diff\", n=n, axis=axis)\r\n    549 \r\n    550     def interpolate(self, **kwargs) -> \"BlockManager\":\r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/internals/managers.py in apply(self, f, align_keys, **kwargs)\r\n    394                 applied = b.apply(f, **kwargs)\r\n    395             else:\r\n--> 396                 applied = getattr(b, f)(**kwargs)\r\n    397             result_blocks = _extend_blocks(applied, result_blocks)\r\n    398 \r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/internals/blocks.py in diff(self, n, axis)\r\n   1265     def diff(self, n: int, axis: int = 1) -> List[\"Block\"]:\r\n   1266         \"\"\" return block for the diff of the values \"\"\"\r\n-> 1267         new_values = algos.diff(self.values, n, axis=axis, stacklevel=7)\r\n   1268         return [self.make_block(values=new_values)]\r\n   1269 \r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/core/algorithms.py in diff(arr, n, axis, stacklevel)\r\n   1914         # TODO: can diff_2d dtype specialization troubles be fixed by defining\r\n   1915         #  out_arr inside diff_2d?\r\n-> 1916         algos.diff_2d(arr, out_arr, n, axis)\r\n   1917     else:\r\n   1918         # To keep mypy happy, _res_indexer is a list while res_indexer is\r\n\r\npandas/_libs/algos.pyx in pandas._libs.algos.diff_2d()\r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/_libs/algos.cpython-38-x86_64-linux-gnu.so in View.MemoryView.memoryview_cwrapper()\r\n\r\n~/miniconda3/envs/dts/lib/python3.8/site-packages/pandas/_libs/algos.cpython-38-x86_64-linux-gnu.so in View.MemoryView.memoryview.__cinit__()\r\n\r\nValueError: buffer source array is read-only\r\n```\r\n\r\n#### Problem description\r\n\r\n`df.diff()` does not seem like a data-mutating operation, at least not to me. My read is that `df.iloc[]` was given the same assessment in 2015 (#10043).\r\n\r\n#### Expected Output\r\n\r\n```\r\n        0\r\n0     nan\r\n1 0.00000\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n```\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.3.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.4.0-42-generic\r\nVersion          : #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_HK.UTF-8\r\nLOCALE           : en_HK.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0.post20200714\r\nCython           : None\r\npytest           : 6.0.1\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : 2.8.5 (dt dec pq3 ext lo64)\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.2.2\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : 1.3.18\r\ntables           : None\r\ntabulate         : 0.8.3\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\n```\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35558", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35558/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35558/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35558/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35558", "id": 673162151, "node_id": "MDU6SXNzdWU2NzMxNjIxNTE=", "number": 35558, "title": "BUG: Incompatible tolerance error in merge_asof with comaptible types.", "user": {"login": "jkibele", "id": 4845845, "node_id": "MDQ6VXNlcjQ4NDU4NDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/4845845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkibele", "html_url": "https://github.com/jkibele", "followers_url": "https://api.github.com/users/jkibele/followers", "following_url": "https://api.github.com/users/jkibele/following{/other_user}", "gists_url": "https://api.github.com/users/jkibele/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkibele/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkibele/subscriptions", "organizations_url": "https://api.github.com/users/jkibele/orgs", "repos_url": "https://api.github.com/users/jkibele/repos", "events_url": "https://api.github.com/users/jkibele/events{/privacy}", "received_events_url": "https://api.github.com/users/jkibele/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}, {"id": 13098779, "node_id": "MDU6TGFiZWwxMzA5ODc3OQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Reshaping", "name": "Reshaping", "color": "02d7e1", "default": false, "description": "Concat, Merge/Join, Stack/Unstack"}, {"id": 717120670, "node_id": "MDU6TGFiZWw3MTcxMjA2NzA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/good%20first%20issue", "name": "good first issue", "color": "0e8a16", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 5, "created_at": "2020-08-05T00:16:06Z", "updated_at": "2020-08-16T10:08:05Z", "closed_at": "2020-08-13T10:15:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [X ] I have checked that this issue has not already been reported.\r\n\r\n- [X ] I have confirmed this bug exists on the latest version of pandas.\r\nCrashes in 1.1.0, but works in 1.0.5\r\n\r\n- [X ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\n\r\ndr1 = pd.date_range(start='1/1/2020', end='2/1/2020')\r\ndr2 = pd.date_range(start='1/1/2020', end='1/20/2020', freq='2D') + pd.Timedelta(seconds=0.4)\r\n\r\ndf1 = pd.DataFrame({'val1': 'foo'}, index=pd.DatetimeIndex(dr1))\r\ndf2 = pd.DataFrame({'val2': 'bar'}, index=pd.DatetimeIndex(dr2))\r\n\r\ntd = pd.Timedelta(seconds=0.5)\r\npd.merge_asof(df2, df1, left_index=True, right_index=True, tolerance=td)\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\nWhen trying to use `merge_asof` in 1.1.0 (and in master), I get message about \"incompatible tolerance\" even though I'm using `pandas.DatetimeIndex` and `pandas.Timedelta` for the tolerance.\r\n\r\nWell, technically, I actually get `UnbondLocalError` because a local variable is referenced before assignment while trying to generate the error message, but it looks like the underlying problem is something to do with an incompatible tolerance error.\r\n\r\nHere's the traceback:\r\n\r\n<details>\r\n\r\n```python\r\n---------------------------------------------------------------------------\r\nUnboundLocalError                         Traceback (most recent call last)\r\n<ipython-input-4-c18851904e91> in <module>\r\n      1 td = pd.Timedelta(seconds=0.5)\r\n----> 2 pd.merge_asof(df2, df1, left_index=True, right_index=True, tolerance=td)\r\n\r\n~/miniconda3/envs/pandas_problem/lib/python3.8/site-packages/pandas/core/reshape/merge.py in merge_asof(left, right, on, left_on, right_on, left_index, right_index, by, left_by, right_by, suffixes, tolerance, allow_exact_matches, direction)\r\n    544     4 2016-05-25 13:30:00.048   AAPL   98.00       100     NaN     NaN\r\n    545     \"\"\"\r\n--> 546     op = _AsOfMerge(\r\n    547         left,\r\n    548         right,\r\n\r\n~/miniconda3/envs/pandas_problem/lib/python3.8/site-packages/pandas/core/reshape/merge.py in __init__(self, left, right, on, left_on, right_on, left_index, right_index, by, left_by, right_by, axis, suffixes, copy, fill_method, how, tolerance, allow_exact_matches, direction)\r\n   1571         self.direction = direction\r\n   1572 \r\n-> 1573         _OrderedMerge.__init__(\r\n   1574             self,\r\n   1575             left,\r\n\r\n~/miniconda3/envs/pandas_problem/lib/python3.8/site-packages/pandas/core/reshape/merge.py in __init__(self, left, right, on, left_on, right_on, left_index, right_index, axis, suffixes, copy, fill_method, how)\r\n   1465 \r\n   1466         self.fill_method = fill_method\r\n-> 1467         _MergeOperation.__init__(\r\n   1468             self,\r\n   1469             left,\r\n\r\n~/miniconda3/envs/pandas_problem/lib/python3.8/site-packages/pandas/core/reshape/merge.py in __init__(self, left, right, how, on, left_on, right_on, axis, left_index, right_index, sort, suffixes, copy, indicator, validate)\r\n    650             self.right_join_keys,\r\n    651             self.join_names,\r\n--> 652         ) = self._get_merge_keys()\r\n    653 \r\n    654         # validate the merge keys dtypes. We may need to coerce\r\n\r\n~/miniconda3/envs/pandas_problem/lib/python3.8/site-packages/pandas/core/reshape/merge.py in _get_merge_keys(self)\r\n   1667 \r\n   1668             msg = (\r\n-> 1669                 f\"incompatible tolerance {self.tolerance}, must be compat \"\r\n   1670                 f\"with type {repr(lk.dtype)}\"\r\n   1671             )\r\n\r\nUnboundLocalError: local variable 'lk' referenced before assignment\r\n```\r\n</details>\r\n\r\n#### Expected Output\r\n\r\nHere's what I get in version 1.0.4, and what I think I should get.\r\n\r\n```\r\n                         val2 val1\r\n2020-01-01 00:00:00.400  bar  foo\r\n2020-01-03 00:00:00.400  bar  foo\r\n2020-01-05 00:00:00.400  bar  foo\r\n2020-01-07 00:00:00.400  bar  foo\r\n2020-01-09 00:00:00.400  bar  foo\r\n2020-01-11 00:00:00.400  bar  foo\r\n2020-01-13 00:00:00.400  bar  foo\r\n2020-01-15 00:00:00.400  bar  foo\r\n2020-01-17 00:00:00.400  bar  foo\r\n2020-01-19 00:00:00.400  bar  foo\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : a4203cf8d440f33d50076166fad3b0577a3ef8fa\r\npython           : 3.8.5.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.4.0-7634-generic\r\nVersion          : #38~1595345317~20.04~a8480ad-Ubuntu SMP Wed Jul 22 15:13:45 UTC \r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.2.0.dev0+29.ga4203cf8d\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0.post20200714\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : None\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\n\r\n</details>\r\n\r\nI hope I did this right. Just trying to help. Thanks.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35557", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35557/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35557/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35557/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35557", "id": 673153438, "node_id": "MDU6SXNzdWU2NzMxNTM0Mzg=", "number": 35557, "title": "BUG: 1.1.0 breaks custom indexer support in groupby().rolling()", "user": {"login": "WhistleWhileYouWork", "id": 39565956, "node_id": "MDQ6VXNlcjM5NTY1OTU2", "avatar_url": "https://avatars3.githubusercontent.com/u/39565956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WhistleWhileYouWork", "html_url": "https://github.com/WhistleWhileYouWork", "followers_url": "https://api.github.com/users/WhistleWhileYouWork/followers", "following_url": "https://api.github.com/users/WhistleWhileYouWork/following{/other_user}", "gists_url": "https://api.github.com/users/WhistleWhileYouWork/gists{/gist_id}", "starred_url": "https://api.github.com/users/WhistleWhileYouWork/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WhistleWhileYouWork/subscriptions", "organizations_url": "https://api.github.com/users/WhistleWhileYouWork/orgs", "repos_url": "https://api.github.com/users/WhistleWhileYouWork/repos", "events_url": "https://api.github.com/users/WhistleWhileYouWork/events{/privacy}", "received_events_url": "https://api.github.com/users/WhistleWhileYouWork/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": {"login": "mroeschke", "id": 10647082, "node_id": "MDQ6VXNlcjEwNjQ3MDgy", "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mroeschke", "html_url": "https://github.com/mroeschke", "followers_url": "https://api.github.com/users/mroeschke/followers", "following_url": "https://api.github.com/users/mroeschke/following{/other_user}", "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}", "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions", "organizations_url": "https://api.github.com/users/mroeschke/orgs", "repos_url": "https://api.github.com/users/mroeschke/repos", "events_url": "https://api.github.com/users/mroeschke/events{/privacy}", "received_events_url": "https://api.github.com/users/mroeschke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mroeschke", "id": 10647082, "node_id": "MDQ6VXNlcjEwNjQ3MDgy", "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mroeschke", "html_url": "https://github.com/mroeschke", "followers_url": "https://api.github.com/users/mroeschke/followers", "following_url": "https://api.github.com/users/mroeschke/following{/other_user}", "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}", "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions", "organizations_url": "https://api.github.com/users/mroeschke/orgs", "repos_url": "https://api.github.com/users/mroeschke/repos", "events_url": "https://api.github.com/users/mroeschke/events{/privacy}", "received_events_url": "https://api.github.com/users/mroeschke/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 4, "created_at": "2020-08-04T23:52:11Z", "updated_at": "2020-08-12T22:14:31Z", "closed_at": "2020-08-12T22:14:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nclass SimpleIndexer(pd.api.indexers.BaseIndexer):\r\n    ''' Custom `Indexer` duplicating basic fixed length windowing '''\r\n    def get_window_bounds(self, num_values=0, min_periods=None, center=None, closed=None):\r\n        min_periods = self.window_size if min_periods is None else 0\r\n        end = np.arange(num_values, dtype=np.int64) + 1\r\n        start = end.copy() - self.window_size\r\n        #---- Clip to `min_periods`\r\n        start[start < 0] = min_periods\r\n        return (start, end)\r\n\r\nx = pd.DataFrame({'a': [1.0,2.0,3.0,4.0,5.0] * 3}, index=[0]*5+[1]*5+[2]*5)\r\nx\r\n\r\nOut: \r\n     a\r\n0  1.0\r\n0  2.0\r\n0  3.0\r\n0  4.0\r\n0  5.0\r\n1  1.0\r\n1  2.0\r\n1  3.0\r\n1  4.0\r\n1  5.0\r\n2  1.0\r\n2  2.0\r\n2  3.0\r\n2  4.0\r\n2  5.0\r\n\r\nx.groupby(x.index).rolling(SimpleIndexer(window_size=3), min_periods=1).sum()\r\n\r\nOut: \r\n       a\r\n0 0  1.0\r\n  0  2.0\r\n  0  3.0\r\n  0  4.0\r\n  0  5.0\r\n1 1  1.0\r\n  1  2.0\r\n  1  3.0\r\n  1  4.0\r\n  1  5.0\r\n2 2  1.0\r\n  2  2.0\r\n  2  3.0\r\n  2  4.0\r\n  2  5.0\r\n```\r\n\r\n#### Problem description\r\n\r\n`groupby().rolling()` does not use custom indexer supplied in `window=` likely as a result of #34052 where a `GroupbyRollingIndexer` is used instead.\r\n\r\nThe output data is always the same as the input regardless of the windowing function.\r\n\r\n1.0.5 does not have this behavior.\r\n\r\n#### Expected Output\r\n\r\n```python\r\nx.groupby(x.index).rolling(window=3, min_periods=1).sum()\r\n\r\nOut: \r\n        a\r\n0 0   1.0\r\n  0   3.0\r\n  0   6.0\r\n  0   9.0\r\n  0  12.0\r\n1 1   1.0\r\n  1   3.0\r\n  1   6.0\r\n  1   9.0\r\n  1  12.0\r\n2 2   1.0\r\n  2   3.0\r\n  2   6.0\r\n  2   9.0\r\n  2  12.0\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.2.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.3.0-59-generic\r\nVersion          : #53~18.04.1-Ubuntu SMP Thu Jun 4 14:58:26 UTC 2020\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2\r\nsetuptools       : 49.2.1.post20200802\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : 7.14.0\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.2.1\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : 0.17.0\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.4.1\r\nsqlalchemy       : None\r\ntables           : 3.6.1\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : 0.50.1\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35552", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35552/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35552/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35552/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35552", "id": 673013343, "node_id": "MDU6SXNzdWU2NzMwMTMzNDM=", "number": 35552, "title": "BUG: Segmentation fault in RollingGroupby.mean() with center=True and input with odd length", "user": {"login": "wfvining", "id": 2073227, "node_id": "MDQ6VXNlcjIwNzMyMjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/2073227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wfvining", "html_url": "https://github.com/wfvining", "followers_url": "https://api.github.com/users/wfvining/followers", "following_url": "https://api.github.com/users/wfvining/following{/other_user}", "gists_url": "https://api.github.com/users/wfvining/gists{/gist_id}", "starred_url": "https://api.github.com/users/wfvining/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wfvining/subscriptions", "organizations_url": "https://api.github.com/users/wfvining/orgs", "repos_url": "https://api.github.com/users/wfvining/repos", "events_url": "https://api.github.com/users/wfvining/events{/privacy}", "received_events_url": "https://api.github.com/users/wfvining/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}, {"id": 1121248195, "node_id": "MDU6TGFiZWwxMTIxMjQ4MTk1", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Segfault", "name": "Segfault", "color": "36ede0", "default": false, "description": "Non-Recoverable Error"}, {"id": 1045950827, "node_id": "MDU6TGFiZWwxMDQ1OTUwODI3", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Window", "name": "Window", "color": "d4c5f9", "default": false, "description": "rolling, ewma, expanding"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 1, "created_at": "2020-08-04T19:07:10Z", "updated_at": "2020-08-07T18:09:30Z", "closed_at": "2020-08-07T18:09:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\n\r\nseries = pd.Series(range(1, 5))\r\nseries.groupby(series).rolling(center=True, window=3).mean()\r\n```\r\n\r\n#### Problem description\r\n\r\nWith an odd-length series and `center=True`, `RollingGroupby.mean()` causes a segfault. If  `center=True` is not provided, or the input series has an even length, then there is no no segfault (example below).\r\n```python\r\nseries = pd.Series(range(1, 6))\r\nseries.groupby(series).rolling(center=True, window=3).mean()\r\n```\r\nOutputs:\r\n```\r\n1  0              NaN\r\n2  1              NaN\r\n3  2              NaN\r\n4  3              NaN\r\n5  4    1.474760e+250\r\ndtype: float64\r\n```\r\n\r\nThe series can be grouped in any way, but the example above seemed simplest.\r\n\r\n#### Expected Output\r\n\r\nShould output a Series.\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.7.7.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 4.18.0-25-generic\r\nVersion          : #26-Ubuntu SMP Mon Jun 24 09:32:08 UTC 2019\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0.post20200714\r\nCython           : None\r\npytest           : 6.0.1\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.2\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\n\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35549", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35549/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35549/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35549/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35549", "id": 672952531, "node_id": "MDU6SXNzdWU2NzI5NTI1MzE=", "number": 35549, "title": "BUG: Closed parameter in rolling function producing ValueError", "user": {"login": "nrcjea001", "id": 26452178, "node_id": "MDQ6VXNlcjI2NDUyMTc4", "avatar_url": "https://avatars1.githubusercontent.com/u/26452178?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrcjea001", "html_url": "https://github.com/nrcjea001", "followers_url": "https://api.github.com/users/nrcjea001/followers", "following_url": "https://api.github.com/users/nrcjea001/following{/other_user}", "gists_url": "https://api.github.com/users/nrcjea001/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrcjea001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrcjea001/subscriptions", "organizations_url": "https://api.github.com/users/nrcjea001/orgs", "repos_url": "https://api.github.com/users/nrcjea001/repos", "events_url": "https://api.github.com/users/nrcjea001/events{/privacy}", "received_events_url": "https://api.github.com/users/nrcjea001/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1045950827, "node_id": "MDU6TGFiZWwxMDQ1OTUwODI3", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Window", "name": "Window", "color": "d4c5f9", "default": false, "description": "rolling, ewma, expanding"}], "state": "closed", "locked": false, "assignee": {"login": "mroeschke", "id": 10647082, "node_id": "MDQ6VXNlcjEwNjQ3MDgy", "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mroeschke", "html_url": "https://github.com/mroeschke", "followers_url": "https://api.github.com/users/mroeschke/followers", "following_url": "https://api.github.com/users/mroeschke/following{/other_user}", "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}", "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions", "organizations_url": "https://api.github.com/users/mroeschke/orgs", "repos_url": "https://api.github.com/users/mroeschke/repos", "events_url": "https://api.github.com/users/mroeschke/events{/privacy}", "received_events_url": "https://api.github.com/users/mroeschke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mroeschke", "id": 10647082, "node_id": "MDQ6VXNlcjEwNjQ3MDgy", "avatar_url": "https://avatars0.githubusercontent.com/u/10647082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mroeschke", "html_url": "https://github.com/mroeschke", "followers_url": "https://api.github.com/users/mroeschke/followers", "following_url": "https://api.github.com/users/mroeschke/following{/other_user}", "gists_url": "https://api.github.com/users/mroeschke/gists{/gist_id}", "starred_url": "https://api.github.com/users/mroeschke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mroeschke/subscriptions", "organizations_url": "https://api.github.com/users/mroeschke/orgs", "repos_url": "https://api.github.com/users/mroeschke/repos", "events_url": "https://api.github.com/users/mroeschke/events{/privacy}", "received_events_url": "https://api.github.com/users/mroeschke/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 0, "created_at": "2020-08-04T17:20:50Z", "updated_at": "2020-08-10T13:13:31Z", "closed_at": "2020-08-10T13:13:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n# Your code here\r\ndf = pd.DataFrame({\"column1\": range(6), \r\n                   \"column2\": range(6), \r\n                   'group': 3*['A','B'], \r\n                   'date':pd.date_range(\"20190101\", periods=6)})\r\ndf.loc[:,'date']=df.loc[0,'date']\r\ndf\r\n### Output\r\n   column1  column2 group       date\r\n0        0        0     A 2019-01-01\r\n1        1        1     B 2019-01-01\r\n2        2        2     A 2019-01-01\r\n3        3        3     B 2019-01-01\r\n4        4        4     A 2019-01-01\r\n5        5        5     B 2019-01-01\r\n\r\ndf.groupby('group').rolling('1D',on='date',closed='left')['column1'].sum()\r\n### Output\r\nValueError: closed only implemented for datetimelike and offset based windows\r\n```\r\n\r\n#### Problem description\r\n\r\nClosed parameter not producing the result as it should. Only closed='both' is working.\r\n\r\nCurrent workaround as follows (but considerably slower):\r\n```\r\ndf.groupby('group').apply(lambda x: x.rolling('1D',on='date',closed='left')['column1'].sum())\r\n```\r\n\r\n#### Expected Output\r\n\r\n```\r\ngroup  date      \r\nA      2019-01-01    NaN\r\n       2019-01-01    0.0\r\n       2019-01-01    2.0\r\nB      2019-01-01    NaN\r\n       2019-01-01    1.0\r\n       2019-01-01    4.0\r\nName: column1, dtype: float64\r\n```\r\nName: column1, dtype: float64\r\n\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.5.final.0\r\npython-bits      : 64\r\nOS               : Windows\r\nOS-release       : 10\r\nVersion          : 10.0.18362\r\nmachine          : AMD64\r\nprocessor        : Intel64 Family 6 Model 142 Stepping 11, GenuineIntel\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : English_United States.1252\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.18.5\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2.1\r\nsetuptools       : 49.2.1.post20200802\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.17.0\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.3.0\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : 1.0.0\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : 0.48.0\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35544", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35544/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35544/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35544/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35544", "id": 672780990, "node_id": "MDU6SXNzdWU2NzI3ODA5OTA=", "number": 35544, "title": "BUG: series.truncate doesn't return the correct value in pandas 1.1.0", "user": {"login": "gabicca", "id": 33315687, "node_id": "MDQ6VXNlcjMzMzE1Njg3", "avatar_url": "https://avatars2.githubusercontent.com/u/33315687?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabicca", "html_url": "https://github.com/gabicca", "followers_url": "https://api.github.com/users/gabicca/followers", "following_url": "https://api.github.com/users/gabicca/following{/other_user}", "gists_url": "https://api.github.com/users/gabicca/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabicca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabicca/subscriptions", "organizations_url": "https://api.github.com/users/gabicca/orgs", "repos_url": "https://api.github.com/users/gabicca/repos", "events_url": "https://api.github.com/users/gabicca/events{/privacy}", "received_events_url": "https://api.github.com/users/gabicca/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 2822098, "node_id": "MDU6TGFiZWwyODIyMDk4", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Indexing", "name": "Indexing", "color": "0b02e1", "default": false, "description": "Related to indexing on series/frames, not to indexes themselves"}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 2, "created_at": "2020-08-04T13:10:48Z", "updated_at": "2020-08-07T11:39:32Z", "closed_at": "2020-08-07T11:39:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "- [Y] I have checked that this issue has not already been reported.\r\n\r\n- [Y] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\ndef test_truncate():\r\n    series = pd.Series([0.1], index=pd.DatetimeIndex(['2020-08-04']))\r\n    before = pd.Timestamp('2020-08-02')\r\n    after = pd.Timestamp('2020-08-04')\r\n\r\n    assert series.truncate(before=before, after=after).equals(series)\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\nThe above test passes in pandas 1.0.5 while fails in pandas 1.1.0. \r\n\r\nAfter diving into the code I found that *truncate* in pandas/core/generic.py changed as follows:\r\n```\r\nif ax.is_monotonic_decreasing:\r\n     before, after = after, before\r\n```\r\nthe above check was added to the method. ```ax.is_monotonic_decreasing``` returns true for 1-element series, (```ax.is_monotonic_increasing``` also returns true). When *before*, and *after* are given in the correct, increasing order (like in the test), the following check reverses them and the result of  truncate will be an empty series, instead of returning the input series which is the expected behaviour.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35541", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35541/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35541/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35541/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35541", "id": 672675539, "node_id": "MDU6SXNzdWU2NzI2NzU1Mzk=", "number": 35541, "title": "QST: ExtensionDtype with complex arguments", "user": {"login": "vnmabus", "id": 2364173, "node_id": "MDQ6VXNlcjIzNjQxNzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/2364173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnmabus", "html_url": "https://github.com/vnmabus", "followers_url": "https://api.github.com/users/vnmabus/followers", "following_url": "https://api.github.com/users/vnmabus/following{/other_user}", "gists_url": "https://api.github.com/users/vnmabus/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnmabus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnmabus/subscriptions", "organizations_url": "https://api.github.com/users/vnmabus/orgs", "repos_url": "https://api.github.com/users/vnmabus/repos", "events_url": "https://api.github.com/users/vnmabus/events{/privacy}", "received_events_url": "https://api.github.com/users/vnmabus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 849023693, "node_id": "MDU6TGFiZWw4NDkwMjM2OTM=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/ExtensionArray", "name": "ExtensionArray", "color": "6138b5", "default": false, "description": "Extending pandas with custom dtypes or arrays."}, {"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-04T10:12:41Z", "updated_at": "2020-08-07T21:15:32Z", "closed_at": "2020-08-07T21:15:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Question about pandas\r\n\r\nI am trying to add support to store columns of functional data in Pandas. This kind of data requires that the associated dtype store some information, such as the discretization points for discretized functions, which is not as simple as the arguments in other ExtensionDtypes (for example, in this case would be a numpy array). This presents several challenges:\r\n\r\n- The `ExtensionDtype` will not be hashable unless I take extra steps to make it so, hashing numpy arrays like in the Categorical dtype.\r\n- If the name of the dtype has to include the value of the arguments it would be unreadable.\r\n- `construct_from_string` should have to parse a lot of structured information (maybe possible using `eval`, but what is the point?). I would prefer that my `ExtensionDtype` could not be constructed from a string. However, at least one test require the dtype to be constructable from its name.\r\n\r\nWhat suggestions do you have to solve these kind of problems?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35538", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35538/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35538/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35538/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35538", "id": 672664228, "node_id": "MDU6SXNzdWU2NzI2NjQyMjg=", "number": 35538, "title": "Can't access multi-index names when iterating over rows", "user": {"login": "konstantinmiller", "id": 2629945, "node_id": "MDQ6VXNlcjI2Mjk5NDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/2629945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/konstantinmiller", "html_url": "https://github.com/konstantinmiller", "followers_url": "https://api.github.com/users/konstantinmiller/followers", "following_url": "https://api.github.com/users/konstantinmiller/following{/other_user}", "gists_url": "https://api.github.com/users/konstantinmiller/gists{/gist_id}", "starred_url": "https://api.github.com/users/konstantinmiller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/konstantinmiller/subscriptions", "organizations_url": "https://api.github.com/users/konstantinmiller/orgs", "repos_url": "https://api.github.com/users/konstantinmiller/repos", "events_url": "https://api.github.com/users/konstantinmiller/events{/privacy}", "received_events_url": "https://api.github.com/users/konstantinmiller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-04T09:54:26Z", "updated_at": "2020-08-04T12:32:57Z", "closed_at": "2020-08-04T12:32:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "When iterating over rows with either `iterrows()` or `itertuples()`, it is not possible to access index names if you have a multi-index.\r\n\r\nSo, I would expect something like that to work\r\n```\r\nimport pandas as pd\r\n\r\ndf = pd.DataFrame(\r\n    index=pd.MultiIndex(\r\n        names=['ind1'],\r\n        levels=[['a']],\r\n        codes=[[0]]\r\n    ),\r\n    data={'C': [42]})\r\n\r\nind, row = next(df.iterrows())\r\nrow.C\r\nind.ind1\r\n```\r\nHowever, since `ind` is not a named tuple, it throws an `AttributeError: 'tuple' object has no attribute 'ind1'`\r\n\r\nSame with `itertuples()`:\r\n```\r\nimport pandas as pd\r\n\r\ndf = pd.DataFrame(\r\n    index=pd.MultiIndex(\r\n        names=['ind1'],\r\n        levels=[['a']],\r\n        codes=[[0]]\r\n    ),\r\n    data={'C': [42]})\r\n\r\nrow = next(df.itertuples())\r\nind = row.Index\r\nrow.C\r\nind.ind1\r\n```\r\nthrows `AttributeError: 'tuple' object has no attribute 'ind1'`", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35531", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35531/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35531/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35531/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35531", "id": 672306607, "node_id": "MDU6SXNzdWU2NzIzMDY2MDc=", "number": 35531, "title": "QST:Adding NOT NULL Columns using to_sql to MSSQL database using Pandas SqlAlchemy", "user": {"login": "Menaz12", "id": 69168747, "node_id": "MDQ6VXNlcjY5MTY4NzQ3", "avatar_url": "https://avatars0.githubusercontent.com/u/69168747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Menaz12", "html_url": "https://github.com/Menaz12", "followers_url": "https://api.github.com/users/Menaz12/followers", "following_url": "https://api.github.com/users/Menaz12/following{/other_user}", "gists_url": "https://api.github.com/users/Menaz12/gists{/gist_id}", "starred_url": "https://api.github.com/users/Menaz12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Menaz12/subscriptions", "organizations_url": "https://api.github.com/users/Menaz12/orgs", "repos_url": "https://api.github.com/users/Menaz12/repos", "events_url": "https://api.github.com/users/Menaz12/events{/privacy}", "received_events_url": "https://api.github.com/users/Menaz12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}, {"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-03T19:55:03Z", "updated_at": "2020-08-04T14:33:00Z", "closed_at": "2020-08-04T14:33:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nI am trying to read table from SQL and writing to ORACLE using pandas.\r\nEverything works except the columns are created as NULL in Oracle.\r\nAny help is greatly appreciated.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35530", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35530/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35530/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35530/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35530", "id": 672290983, "node_id": "MDU6SXNzdWU2NzIyOTA5ODM=", "number": 35530, "title": "BUG: \"buffer source array is read-only\" with tz_convert_from_utc/DatetimeArray.date", "user": {"login": "lidavidm", "id": 327919, "node_id": "MDQ6VXNlcjMyNzkxOQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/327919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lidavidm", "html_url": "https://github.com/lidavidm", "followers_url": "https://api.github.com/users/lidavidm/followers", "following_url": "https://api.github.com/users/lidavidm/following{/other_user}", "gists_url": "https://api.github.com/users/lidavidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/lidavidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lidavidm/subscriptions", "organizations_url": "https://api.github.com/users/lidavidm/orgs", "repos_url": "https://api.github.com/users/lidavidm/repos", "events_url": "https://api.github.com/users/lidavidm/events{/privacy}", "received_events_url": "https://api.github.com/users/lidavidm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 211840, "node_id": "MDU6TGFiZWwyMTE4NDA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Timeseries", "name": "Timeseries", "color": "AFEEEE", "default": false, "description": null}, {"id": 60458168, "node_id": "MDU6TGFiZWw2MDQ1ODE2OA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Timezones", "name": "Timezones", "color": "5319e7", "default": false, "description": "Timezone data dtype"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 1, "created_at": "2020-08-03T19:25:16Z", "updated_at": "2020-08-06T15:11:22Z", "closed_at": "2020-08-06T15:11:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "- [X] I have checked that this issue has not already been reported.\r\nThere are similar issues with the same symptom\r\n- [X] I have confirmed this bug exists on the latest version of pandas.\r\nTested with Pandas 1.1.0\r\n- [X] (optional) I have confirmed this bug exists on the master branch of pandas.\r\nTested with bdcc5bffaadb7488474b65554c4e8e96a00aa4af\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pyarrow as pa\r\nimport pandas as pd\r\nimport pytz\r\nprint(\"PyArrow:\", pa.__version__)\r\nprint(\"Pandas:\", pd.__version__)\r\ntable = pa.table([\r\n    pa.array([\r\n        pd.Timestamp('2014-01-01'),\r\n    ], type=pa.timestamp(\"ns\"))\r\n], names=[\"time\"])\r\ndf = table.to_pandas(self_destruct=True, split_blocks=True)\r\ndf.set_index(\"time\", inplace=True)\r\ndf.index = df.index.tz_localize(pytz.utc)\r\n# These are OK\r\nprint(df.index.date)\r\nprint(df.index.tz_convert(\"America/New_York\"))\r\n# But not this\r\nprint(df.index.tz_convert(\"America/New_York\").date)\r\n```\r\n\r\n#### Problem description\r\n\r\nThe reproduction results in this exception:\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"repro.py\", line 18, in <module>\r\n    print(df.index.tz_convert(\"America/New_York\").date)\r\n  File \"/home/lidavidm/Code/twosigma/pandas/temp/venv/lib/python3.8/site-packages/pandas/core/indexes/extension.py\", line 54, in fget\r\n    result = getattr(self._data, name)\r\n  File \"/home/lidavidm/Code/twosigma/pandas/temp/venv/lib/python3.8/site-packages/pandas/core/arrays/datetimes.py\", line 1246, in date\r\n    timestamps = self._local_timestamps()\r\n  File \"/home/lidavidm/Code/twosigma/pandas/temp/venv/lib/python3.8/site-packages/pandas/core/arrays/datetimes.py\", line 731, in _local_timestamps\r\n    return tzconversion.tz_convert_from_utc(self.asi8, self.tz)\r\n  File \"pandas/_libs/tslibs/tzconversion.pyx\", line 407, in pandas._libs.tslibs.tzconversion.tz_convert_from_utc\r\n  File \"stringsource\", line 658, in View.MemoryView.memoryview_cwrapper\r\n  File \"stringsource\", line 349, in View.MemoryView.memoryview.__cinit__\r\nValueError: buffer source array is read-only\r\n```\r\nThe data is not being modified in place, so it should work with an immutable source array.\r\n\r\nThis is because `tz_convert_from_utc` and `_tz_convert_from_utc` are missing some `const` specifiers in Cython.\r\n\r\n#### Expected Output\r\n\r\nThe `.date` accessor should work as expected:\r\n```python\r\n[datetime.date(2013, 12, 31)]\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.3.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.7.9-arch1-1\r\nVersion          : #1 SMP PREEMPT Thu, 16 Jul 2020 19:34:49 +0000\r\nmachine          : x86_64\r\nprocessor        : \r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 47.1.1\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : 1.0.0\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : None\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35529", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35529/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35529/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35529/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35529", "id": 672228184, "node_id": "MDU6SXNzdWU2NzIyMjgxODQ=", "number": 35529, "title": "BUG: ValueError during floordiv of a series with timedelta type", "user": {"login": "galipremsagar", "id": 11664259, "node_id": "MDQ6VXNlcjExNjY0MjU5", "avatar_url": "https://avatars3.githubusercontent.com/u/11664259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/galipremsagar", "html_url": "https://github.com/galipremsagar", "followers_url": "https://api.github.com/users/galipremsagar/followers", "following_url": "https://api.github.com/users/galipremsagar/following{/other_user}", "gists_url": "https://api.github.com/users/galipremsagar/gists{/gist_id}", "starred_url": "https://api.github.com/users/galipremsagar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/galipremsagar/subscriptions", "organizations_url": "https://api.github.com/users/galipremsagar/orgs", "repos_url": "https://api.github.com/users/galipremsagar/repos", "events_url": "https://api.github.com/users/galipremsagar/events{/privacy}", "received_events_url": "https://api.github.com/users/galipremsagar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 47223669, "node_id": "MDU6TGFiZWw0NzIyMzY2OQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Numeric", "name": "Numeric", "color": "006b75", "default": false, "description": "Arithmetic, Comparison, Logical, and Reduction operations"}, {"id": 49597148, "node_id": "MDU6TGFiZWw0OTU5NzE0OA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Timedelta", "name": "Timedelta", "color": "5319e7", "default": false, "description": "Timedelta data type"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 0, "created_at": "2020-08-03T17:26:52Z", "updated_at": "2020-08-06T16:20:29Z", "closed_at": "2020-08-06T16:20:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n>>> import pandas as pd\r\n>>> sr = pd.Series([10, 20, 30], dtype='timedelta64[ns]')\r\n>>> sr\r\n0   00:00:00.000000\r\n1   00:00:00.000000\r\n2   00:00:00.000000\r\ndtype: timedelta64[ns]\r\n>>> sr = pd.Series([1000, 20, 30], dtype='timedelta64[ns]')\r\n>>> sr\r\n0   00:00:00.000001\r\n1   00:00:00.000000\r\n2   00:00:00.000000\r\ndtype: timedelta64[ns]\r\n>>> sr = pd.Series([1000, 222330, 30], dtype='timedelta64[ns]')\r\n>>> sr\r\n0   00:00:00.000001\r\n1   00:00:00.000222\r\n2   00:00:00.000000\r\ndtype: timedelta64[ns]\r\n>>> sr1 = pd.Series([1000, 222330, None], dtype='timedelta64[ns]')\r\n>>> sr1\r\n0   00:00:00.000001\r\n1   00:00:00.000222\r\n2               NaT\r\ndtype: timedelta64[ns]\r\n>>> sr / sr1\r\n0    1.0\r\n1    1.0\r\n2    NaN\r\ndtype: float64\r\n>>> sr // sr1\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/nvme/0/pgali/envs/cudfdev1/lib/python3.7/site-packages/pandas/core/ops/common.py\", line 64, in new_method\r\n    return method(self, other)\r\n  File \"/nvme/0/pgali/envs/cudfdev1/lib/python3.7/site-packages/pandas/core/ops/__init__.py\", line 503, in wrapper\r\n    result = arithmetic_op(lvalues, rvalues, op, str_rep)\r\n  File \"/nvme/0/pgali/envs/cudfdev1/lib/python3.7/site-packages/pandas/core/ops/array_ops.py\", line 193, in arithmetic_op\r\n    res_values = dispatch_to_extension_op(op, lvalues, rvalues)\r\n  File \"/nvme/0/pgali/envs/cudfdev1/lib/python3.7/site-packages/pandas/core/ops/dispatch.py\", line 125, in dispatch_to_extension_op\r\n    res_values = op(left, right)\r\n  File \"/nvme/0/pgali/envs/cudfdev1/lib/python3.7/site-packages/pandas/core/arrays/timedeltas.py\", line 637, in __floordiv__\r\n    result[mask] = np.nan\r\nValueError: cannot convert float NaN to integer\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\nWhen there is a `NaT` in either of the series, the result should ideally be of type `nullable` integer (`Int64`) to avoid this kind of `ValueError`\r\n\r\n#### Expected Output\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.7.6.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 4.15.0-76-generic\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.0.5\r\nnumpy            : 1.18.5\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.1.0.post20200704\r\nCython           : 0.29.21\r\npytest           : 5.4.3\r\nhypothesis       : 5.19.0\r\nsphinx           : 3.1.2\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : 0.17.1\r\npytables         : None\r\npytest           : 5.4.3\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : None\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nxlsxwriter       : None\r\nnumba            : 0.50.1\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35526", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35526/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35526/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35526/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35526", "id": 672040911, "node_id": "MDU6SXNzdWU2NzIwNDA5MTE=", "number": 35526, "title": "BUG: ", "user": {"login": "shadowbourne", "id": 18665030, "node_id": "MDQ6VXNlcjE4NjY1MDMw", "avatar_url": "https://avatars1.githubusercontent.com/u/18665030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shadowbourne", "html_url": "https://github.com/shadowbourne", "followers_url": "https://api.github.com/users/shadowbourne/followers", "following_url": "https://api.github.com/users/shadowbourne/following{/other_user}", "gists_url": "https://api.github.com/users/shadowbourne/gists{/gist_id}", "starred_url": "https://api.github.com/users/shadowbourne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shadowbourne/subscriptions", "organizations_url": "https://api.github.com/users/shadowbourne/orgs", "repos_url": "https://api.github.com/users/shadowbourne/repos", "events_url": "https://api.github.com/users/shadowbourne/events{/privacy}", "received_events_url": "https://api.github.com/users/shadowbourne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2020-08-03T12:27:36Z", "updated_at": "2020-08-03T12:45:13Z", "closed_at": "2020-08-03T12:44:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n# Your code here\r\nimport pandas as pd\r\ndef edit(row):\r\n    row[\"poo\"] = 9\r\n    return row\r\ndf = pd.DataFrame({\"foo\":[1,2,3,4],\"Hi\":[0,1,0,2]})\r\nprint(df.head())\r\nprint(df.apply(edit, axis=1))\r\n```\r\n\r\n#### Problem description\r\nReturns completely wrong output on my system, but anyone else's it seems fine.  (pandas 1.1.0, python 3.8.4 and 3.7.8)\r\n[this should explain **why** the current behaviour is a problem and why the expected output is a better solution]\r\n#### Bugged Output:\r\n   foo  Hi  poo\r\n0    1   0    9\r\n1    1   0    9\r\n2    1   0    9\r\n3    1   0    9\r\n#### Expected Output\r\n   foo  Hi  poo\r\n0    1   0    9\r\n1    2   1    9\r\n2    3   0    9\r\n3    4   2    9\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.7.8.final.0\r\npython-bits      : 64\r\nOS               : Windows\r\nOS-release       : 10\r\nVersion          : 10.0.18362\r\nmachine          : AMD64\r\nprocessor        : AMD64 Family 21 Model 2 Stepping 0, AuthenticAMD\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_GB.UTF-8\r\nLOCALE           : None.None\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 47.1.0\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : None\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\nNone\r\n[paste the output of ``pd.show_versions()`` here leaving a blank line after the details tag]\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35524", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35524/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35524/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35524/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35524", "id": 671872431, "node_id": "MDU6SXNzdWU2NzE4NzI0MzE=", "number": 35524, "title": "BUG:", "user": {"login": "kmadhavan2000", "id": 53900164, "node_id": "MDQ6VXNlcjUzOTAwMTY0", "avatar_url": "https://avatars2.githubusercontent.com/u/53900164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmadhavan2000", "html_url": "https://github.com/kmadhavan2000", "followers_url": "https://api.github.com/users/kmadhavan2000/followers", "following_url": "https://api.github.com/users/kmadhavan2000/following{/other_user}", "gists_url": "https://api.github.com/users/kmadhavan2000/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmadhavan2000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmadhavan2000/subscriptions", "organizations_url": "https://api.github.com/users/kmadhavan2000/orgs", "repos_url": "https://api.github.com/users/kmadhavan2000/repos", "events_url": "https://api.github.com/users/kmadhavan2000/events{/privacy}", "received_events_url": "https://api.github.com/users/kmadhavan2000/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2020-08-03T07:41:09Z", "updated_at": "2020-08-03T09:41:12Z", "closed_at": "2020-08-03T09:40:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [ ] I have checked that this issue has not already been reported.\r\n\r\n- [ ] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n# Your code here\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\n[this should explain **why** the current behaviour is a problem and why the expected output is a better solution]\r\n\r\n#### Expected Output\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\n[paste the output of ``pd.show_versions()`` here leaving a blank line after the details tag]\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35523", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35523/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35523/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35523/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35523", "id": 671867372, "node_id": "MDU6SXNzdWU2NzE4NjczNzI=", "number": 35523, "title": "ENH: Allow pd.Series to fill NA with a callable", "user": {"login": "ligz08", "id": 7464471, "node_id": "MDQ6VXNlcjc0NjQ0NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/7464471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ligz08", "html_url": "https://github.com/ligz08", "followers_url": "https://api.github.com/users/ligz08/followers", "following_url": "https://api.github.com/users/ligz08/following{/other_user}", "gists_url": "https://api.github.com/users/ligz08/gists{/gist_id}", "starred_url": "https://api.github.com/users/ligz08/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ligz08/subscriptions", "organizations_url": "https://api.github.com/users/ligz08/orgs", "repos_url": "https://api.github.com/users/ligz08/repos", "events_url": "https://api.github.com/users/ligz08/events{/privacy}", "received_events_url": "https://api.github.com/users/ligz08/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76812, "node_id": "MDU6TGFiZWw3NjgxMg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Enhancement", "name": "Enhancement", "color": "4E9A06", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-03T07:33:01Z", "updated_at": "2020-08-07T07:04:28Z", "closed_at": "2020-08-07T07:04:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Is your feature request related to a problem?\r\n\r\nI wanted to do Series additions/subtractions where two Series objects' index may not align. I was using the [`pd.Series.add()`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.add.html) function, which first aligns two Series' by their indices, and then do the adding at each index -- this is great. However, when dealing with NaNs generated at misaligned indices, I want to use a callable (e.g. a function or a class constructor) with a Series item's index and/or value as arguments to fill the NaNs. Right now Pandas.Series doesn't support such functionality, the `fill_value` argument for the  `pd.Series.add()` function can be a float number at best.\r\n\r\nExample:\r\n```python\r\nidx1 = [1,2,3]\r\nidx2 = [2,3,4]\r\ns1 = pd.Series((_**2 for _ in idx1), index=idx1, name='square')\r\ns2 = pd.Series((_**2 for _ in idx2), index=idx2, name='square')\r\n```\r\nHopefully with\r\n```python\r\nresult = s1.add(s2, fill_value=lambda idx, val: idx**2)\r\n```\r\nthe holes introduced when aligning `s1` and `s2` can be filled by calling the `lambda` function on the NA items in the Series, so eventually the `result` is effectively `pd.Series([1,4,9,16]) + pd.Series([1,4,9,16])`, and looks like \r\n```python\r\nresult\r\n>>>\r\n1     2\r\n2     8\r\n3    18\r\n4    32\r\n```\r\n\r\n#### Describe the solution you'd like\r\n\r\nWhenever a Series needs to fill NAs, e.g. `pd.Series.fillna()`, `pd.Series.align()`, `pd.Series.add()` etc, the `fill_value` argument should be able to accept a callable that takes two arguments `idx` and `val`, and call it with the Series' (index, value) pair as arguments to fill NAs.\r\n\r\n#### API breaking implications\r\n\r\nThis may break the API behavior in (imo a rare) case a user intentionally wants to put callable objects in a Series to fill NAs. For example:\r\n```python\r\ns = pd.Series([min, max, sum, np.nan])\r\nresult = s.fillna(max)\r\n```\r\nCurrent behavior\r\n```python\r\nresult\r\n>>>\r\n0    <built-in function min>\r\n1    <built-in function max>\r\n2    <built-in function sum>\r\n3    <built-in function max>\r\n```\r\n\r\nNew behavior after the proposed change:\r\n```python\r\nresult\r\n>>>\r\n0    <built-in function min>\r\n1    <built-in function max>\r\n2    <built-in function sum>\r\n3                          3\r\n```\r\nbecause at item 3, calling `max(3, np.nan)` results in `3`.\r\n\r\n#### Describe alternatives you've considered\r\n\r\nA workaround for `pd.Series.fillna()` but can use a callable to generate fill values is to create a `backup` Series separately with that callable, and use `pd.Series.mask()` instead. Suppose `func = lambda idx, val: idx**2`\r\n```python\r\nbackup = pd.Series((func(idx, val) for idx, val in s.items()), index=s.index)\r\nresult = s.mask(pd.isna, other=backup)\r\nresult\r\n>>>\r\n0    <built-in function min>\r\n1    <built-in function max>\r\n2    <built-in function sum>\r\n3                          9\r\n```\r\nAbove is just for the `pd.Series.fillna()` function, and `.add()` and `.align()` functions can use similar approaches, but obviously it gets quite tedious.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35521", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35521/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35521/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35521/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35521", "id": 671760921, "node_id": "MDU6SXNzdWU2NzE3NjA5MjE=", "number": 35521, "title": "pandas version 1.1.0 and 1.1.1 has a  issue", "user": {"login": "on55", "id": 45395475, "node_id": "MDQ6VXNlcjQ1Mzk1NDc1", "avatar_url": "https://avatars2.githubusercontent.com/u/45395475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/on55", "html_url": "https://github.com/on55", "followers_url": "https://api.github.com/users/on55/followers", "following_url": "https://api.github.com/users/on55/following{/other_user}", "gists_url": "https://api.github.com/users/on55/gists{/gist_id}", "starred_url": "https://api.github.com/users/on55/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/on55/subscriptions", "organizations_url": "https://api.github.com/users/on55/orgs", "repos_url": "https://api.github.com/users/on55/repos", "events_url": "https://api.github.com/users/on55/events{/privacy}", "received_events_url": "https://api.github.com/users/on55/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 307649777, "node_id": "MDU6TGFiZWwzMDc2NDk3Nzc=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Info", "name": "Needs Info", "color": "207de5", "default": false, "description": "Clarification about behavior needed to assess issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/76", "html_url": "https://github.com/pandas-dev/pandas/milestone/76", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/76/labels", "id": 5781056, "node_id": "MDk6TWlsZXN0b25lNTc4MTA1Ng==", "number": 76, "title": "1.1.2", "description": "on-merge: backport to 1.1.x", "creator": {"login": "simonjayhawkins", "id": 13159005, "node_id": "MDQ6VXNlcjEzMTU5MDA1", "avatar_url": "https://avatars0.githubusercontent.com/u/13159005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonjayhawkins", "html_url": "https://github.com/simonjayhawkins", "followers_url": "https://api.github.com/users/simonjayhawkins/followers", "following_url": "https://api.github.com/users/simonjayhawkins/following{/other_user}", "gists_url": "https://api.github.com/users/simonjayhawkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonjayhawkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonjayhawkins/subscriptions", "organizations_url": "https://api.github.com/users/simonjayhawkins/orgs", "repos_url": "https://api.github.com/users/simonjayhawkins/repos", "events_url": "https://api.github.com/users/simonjayhawkins/events{/privacy}", "received_events_url": "https://api.github.com/users/simonjayhawkins/received_events", "type": "User", "site_admin": false}, "open_issues": 23, "closed_issues": 7, "state": "open", "created_at": "2020-08-17T19:11:56Z", "updated_at": "2020-08-21T09:08:08Z", "due_on": "2020-09-06T07:00:00Z", "closed_at": null}, "comments": 11, "created_at": "2020-08-03T03:05:29Z", "updated_at": "2020-08-21T08:17:49Z", "closed_at": "2020-08-21T07:28:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "a program run ok with pandas 1.0.5,  but after upgrade to 1.1.0.  it fail.\r\ni found sometimes when I change one cell of dataframe value,  print(df) and it doesn't change.\r\nbut i use  ==, it says changed.\r\nfor example:  original  cell value is A, then i change cell value to B.   A=B\r\nprint df, it show still A\r\ndf.at(x, x) == B, it says TRUE.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35512", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35512/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35512/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35512/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35512", "id": 671325737, "node_id": "MDU6SXNzdWU2NzEzMjU3Mzc=", "number": 35512, "title": "BUG: Unexpected/undocumented behaviour of sum and mean aggregations on object dtypes", "user": {"login": "MJafarMashhadi", "id": 3872947, "node_id": "MDQ6VXNlcjM4NzI5NDc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3872947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MJafarMashhadi", "html_url": "https://github.com/MJafarMashhadi", "followers_url": "https://api.github.com/users/MJafarMashhadi/followers", "following_url": "https://api.github.com/users/MJafarMashhadi/following{/other_user}", "gists_url": "https://api.github.com/users/MJafarMashhadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/MJafarMashhadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MJafarMashhadi/subscriptions", "organizations_url": "https://api.github.com/users/MJafarMashhadi/orgs", "repos_url": "https://api.github.com/users/MJafarMashhadi/repos", "events_url": "https://api.github.com/users/MJafarMashhadi/events{/privacy}", "received_events_url": "https://api.github.com/users/MJafarMashhadi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-02T00:15:02Z", "updated_at": "2020-08-02T07:51:25Z", "closed_at": "2020-08-02T01:28:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "- [ ] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [x] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\n\r\n# Sum, looks kinda OK\r\n>>> pd.Series('a b c d'.split()).sum()\r\n'abcd'\r\n>>> pd.Series('1 2 3 4'.split()).sum()\r\n'1234'\r\n\r\n# Mean, inconsistent behaviour\r\n>>> pd.Series('a b c d'.split()).mean()\r\n...\r\nTypeError: Could not convert abcd to numeric\r\n>>> pd.Series('1 2 3 4'.split()).mean()\r\n308.5\r\n```\r\n\r\nI saw the last example in a #26927 comment, scanned the code to see what's wrong and eventually decided to open this issue.\r\n\r\n#### Problem description\r\n\r\nIMO When calculating the mean, data type conversion should either happen on each element of the series before applying sum or should happen in the end. Here, to calculate the mean of `['1', '2', '3', '4']`, first a `sum` concatenates all the elements keeping the dtype, then it's converted to float (1234) and then divided by 4 which results in 308.5. \r\n\r\n\r\n#### Expected Output\r\nI have 3 options in mind:\r\n\r\n1. an element-wise type conversion, which means:\r\n```python\r\n>>> pd.Series('a b c d'.split()).sum()  # and mean\r\nType Error\r\n>>> pd.Series('1 2 3 4'.split()).sum()\r\n10\r\n>>> pd.Series('1 2 3 4'.split()).mean()\r\n2.5\r\n```\r\n\r\n2. throwing an error in these cases or adding a note in docs for consequences of performing these aggregations on an object dtype. For example, considering that `np.sum(np.array('a b c d'.split()))` fails with a TypeError it's not intuitive that the same function in pandas performs a concatenation.\r\n\r\nhttps://github.com/pandas-dev/pandas/blob/d9fff2792bf16178d4e450fe7384244e50635733/pandas/core/generic.py#L10410\r\n\r\njust like what happens when dtype is explicitly set as 'string':\r\n```python\r\n>>> pd.Series('1 2 3 4'.split(), dtype='string').mean()\r\n...\r\nTypeError: Cannot perform reduction 'mean' with string dtype\r\n```\r\n\r\n3. No type conversions in the middle of calculating the mean: (It's not a good option IMHO for all the side effects it will have)\r\n```python\r\n>>> pd.Series('a b c d'.split()).sum()\r\n'abcd'  \r\n>>> pd.Series('a b c d'.split()).mean()\r\nTypeError while trying to compute 'abcd' / 4, but not because 'abcd' cannot be converted to a number, but bc a string cannot be divided by a number\r\n>>> pd.Series('1 2 3 4'.split()).sum()\r\n'1234'\r\n>>> pd.Series('1 2 3 4'.split()).mean()\r\nTypeError while trying to '1234' / 4\r\n```\r\n\r\n\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : 4014a60352b21e36ec390f361815e66f96ee783c\r\npython           : 3.8.3.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.3.0-40-generic\r\nVersion          : #32~18.04.1-Ubuntu SMP Mon Feb 3 14:05:59 UTC 2020\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_CA.UTF-8\r\nLOCALE           : en_CA.UTF-8\r\npandas           : 1.1.0.dev0+2171.g4014a6035\r\nnumpy            : 1.18.5\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 47.3.1.post20200616\r\nCython           : 0.29.20\r\npytest           : 5.4.3\r\nhypothesis       : 5.16.1\r\nsphinx           : 3.1.1\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.2.9\r\nlxml.etree       : 4.5.1\r\nhtml5lib         : 1.0.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.15.0\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : 1.3.2\r\nfsspec           : 0.7.4\r\nfastparquet      : 0.4.0\r\ngcsfs            : None\r\nmatplotlib       : 3.2.1\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 3.0.3\r\npandas_gbq       : None\r\npyarrow          : 0.17.1\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : 0.4.2\r\nscipy            : 1.4.1\r\nsqlalchemy       : 1.3.17\r\ntables           : 3.6.1\r\ntabulate         : 0.8.7\r\nxarray           : 0.15.1\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nnumba            : 0.48.0\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35511", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35511/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35511/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35511/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35511", "id": 671311234, "node_id": "MDU6SXNzdWU2NzEzMTEyMzQ=", "number": 35511, "title": "BUG: Unexpected behavior of sort_values", "user": {"login": "bhagyakjain", "id": 66256893, "node_id": "MDQ6VXNlcjY2MjU2ODkz", "avatar_url": "https://avatars1.githubusercontent.com/u/66256893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bhagyakjain", "html_url": "https://github.com/bhagyakjain", "followers_url": "https://api.github.com/users/bhagyakjain/followers", "following_url": "https://api.github.com/users/bhagyakjain/following{/other_user}", "gists_url": "https://api.github.com/users/bhagyakjain/gists{/gist_id}", "starred_url": "https://api.github.com/users/bhagyakjain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bhagyakjain/subscriptions", "organizations_url": "https://api.github.com/users/bhagyakjain/orgs", "repos_url": "https://api.github.com/users/bhagyakjain/repos", "events_url": "https://api.github.com/users/bhagyakjain/events{/privacy}", "received_events_url": "https://api.github.com/users/bhagyakjain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-01T23:53:04Z", "updated_at": "2020-08-02T15:31:20Z", "closed_at": "2020-08-02T15:31:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "df.sort_values(by=[col])  -\r\nIf column(=col) has some values occurring multiple times then it orders them randomly. Instead, it should inherit the order in the DataFrame for the rows having same value for column.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35508", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35508/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35508/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35508/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35508", "id": 671129564, "node_id": "MDU6SXNzdWU2NzExMjk1NjQ=", "number": 35508, "title": "BUG: DataFrame saved in Pickle under v1.1.0 cannot be read under v1.0.3 ", "user": {"login": "Alalalalaki", "id": 31154974, "node_id": "MDQ6VXNlcjMxMTU0OTc0", "avatar_url": "https://avatars0.githubusercontent.com/u/31154974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alalalalaki", "html_url": "https://github.com/Alalalalaki", "followers_url": "https://api.github.com/users/Alalalalaki/followers", "following_url": "https://api.github.com/users/Alalalalaki/following{/other_user}", "gists_url": "https://api.github.com/users/Alalalalaki/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alalalalaki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alalalalaki/subscriptions", "organizations_url": "https://api.github.com/users/Alalalalaki/orgs", "repos_url": "https://api.github.com/users/Alalalalaki/repos", "events_url": "https://api.github.com/users/Alalalalaki/events{/privacy}", "received_events_url": "https://api.github.com/users/Alalalalaki/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2020-08-01T19:26:11Z", "updated_at": "2020-08-02T07:42:22Z", "closed_at": "2020-08-01T19:54:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "I find any DataFrame saved in v1.1.0 by `to_pickle` is not readable under v1.0.3. Any functions on the DataFrame will throw `AttributeError: 'DataFrame' object has no attribute '_data'` or `RecursionError: maximum recursion depth exceeded while calling a Python object`.\r\n\r\nI use pip to install pandas.\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35499", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35499/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35499/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35499/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35499", "id": 670293102, "node_id": "MDU6SXNzdWU2NzAyOTMxMDI=", "number": 35499, "title": "BUG: pandas 1.1.0 MemoryError using .astype(\"string\") which worked using pandas 1.0.5", "user": {"login": "ldacey", "id": 12517855, "node_id": "MDQ6VXNlcjEyNTE3ODU1", "avatar_url": "https://avatars0.githubusercontent.com/u/12517855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ldacey", "html_url": "https://github.com/ldacey", "followers_url": "https://api.github.com/users/ldacey/followers", "following_url": "https://api.github.com/users/ldacey/following{/other_user}", "gists_url": "https://api.github.com/users/ldacey/gists{/gist_id}", "starred_url": "https://api.github.com/users/ldacey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ldacey/subscriptions", "organizations_url": "https://api.github.com/users/ldacey/orgs", "repos_url": "https://api.github.com/users/ldacey/repos", "events_url": "https://api.github.com/users/ldacey/events{/privacy}", "received_events_url": "https://api.github.com/users/ldacey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 8935311, "node_id": "MDU6TGFiZWw4OTM1MzEx", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Performance", "name": "Performance", "color": "a10c02", "default": false, "description": "Memory or execution speed performance"}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}, {"id": 57522093, "node_id": "MDU6TGFiZWw1NzUyMjA5Mw==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Strings", "name": "Strings", "color": "5319e7", "default": false, "description": "String extension data type and string data"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 9, "created_at": "2020-07-31T22:24:41Z", "updated_at": "2020-08-17T14:35:00Z", "closed_at": "2020-08-17T14:35:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\nI tried to pinpoint the specific row which causes the error. The column has HTML data like this:\r\n\r\n`\r\n'''<div class=\"comment\" dir=\"auto\"><p dir=\"auto\">Request <a href=\"/agent/tickets/test\" target=\"_blank\" rel=\"ticket\">#test</a> \"RE: **  M ...\" Last comment in request </a>:</p> <p dir=\"auto\"></p> <p dir=\"auto\">Thank you</p> <p dir=\"auto\">Stuff.</p> <p dir=\"auto\">We will keep you posted .</p> <p dir=\"auto\">Regards,</p> <p dir=\"auto\">Name</p></div>'''`\r\n \r\n\r\n```python\r\n\r\n#This fails (memory error below):\r\ndf['event_html_body'].astype(\"string\")\r\n\r\n#Filtering the dataframe to only convert rows which are not null for this field **works**\r\nx = df[~df.event_html_body.isnull()][['event_html_body']]\r\nx['event_html_body'].astype(\"string\")\r\n\r\n\r\n#Filling NAs with another value fails:\r\ndf['event_html_body'].fillna('-').astype(\"string\")\r\n```\r\n\r\n#### Problem description\r\nI have code which has been converting columns to the \"string\" dtype and this has worked up until pandas 1.1.0\r\n\r\nFor example, I tried to process a file which I successfully processed in April and it works when I use .astype(str), but it fails when I use .astype(\"string\") event though this worked in pandas 1.0.5.\r\n\r\nThe column does not **need** to be the new \"string\" type, but I wanted to raise this issue anyways.\r\n\r\nRows: 201368\r\nEmpty/null rows for the column in question: 189014 / 201368\r\n\r\nSo this column is quite sparse, and as I mentioned below if I filtered the nulls and then do .astype(\"string\") then it will run fine. I am not sure why this worked before (same server, 64 GB of RAM), and this file was previous processed as a \"string\" before the update.\r\n\r\nError: \r\n```\r\n\r\nMemoryError                               Traceback (most recent call last)\r\n<ipython-input-38-939f88862e64> in <module>\r\n----> 1 df['event_html_body'].astype(\"string\")\r\n\r\n/opt/conda/lib/python3.7/site-packages/pandas/core/generic.py in astype(self, dtype, copy, errors)\r\n   5535         else:\r\n   5536             # else, only a single dtype is given\r\n-> 5537             new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors,)\r\n   5538             return self._constructor(new_data).__finalize__(self, method=\"astype\")\r\n   5539 \r\n\r\n/opt/conda/lib/python3.7/site-packages/pandas/core/internals/managers.py in astype(self, dtype, copy, errors)\r\n    565         self, dtype, copy: bool = False, errors: str = \"raise\"\r\n    566     ) -> \"BlockManager\":\r\n--> 567         return self.apply(\"astype\", dtype=dtype, copy=copy, errors=errors)\r\n    568 \r\n    569     def convert(\r\n\r\n/opt/conda/lib/python3.7/site-packages/pandas/core/internals/managers.py in apply(self, f, align_keys, **kwargs)\r\n    394                 applied = b.apply(f, **kwargs)\r\n    395             else:\r\n--> 396                 applied = getattr(b, f)(**kwargs)\r\n    397             result_blocks = _extend_blocks(applied, result_blocks)\r\n    398 \r\n\r\n/opt/conda/lib/python3.7/site-packages/pandas/core/internals/blocks.py in astype(self, dtype, copy, errors)\r\n    588             vals1d = values.ravel()\r\n    589             try:\r\n--> 590                 values = astype_nansafe(vals1d, dtype, copy=True)\r\n    591             except (ValueError, TypeError):\r\n    592                 # e.g. astype_nansafe can fail on object-dtype of strings\r\n\r\n/opt/conda/lib/python3.7/site-packages/pandas/core/dtypes/cast.py in astype_nansafe(arr, dtype, copy, skipna)\r\n    911     # dispatch on extension dtype if needed\r\n    912     if is_extension_array_dtype(dtype):\r\n--> 913         return dtype.construct_array_type()._from_sequence(arr, dtype=dtype, copy=copy)\r\n    914 \r\n    915     if not isinstance(dtype, np.dtype):\r\n\r\n/opt/conda/lib/python3.7/site-packages/pandas/core/arrays/string_.py in _from_sequence(cls, scalars, dtype, copy)\r\n    215 \r\n    216         # convert to str, then to object to avoid dtype like '<U3', then insert na_value\r\n--> 217         result = np.asarray(result, dtype=str)\r\n    218         result = np.asarray(result, dtype=\"object\")\r\n    219         if has_nans:\r\n\r\n/opt/conda/lib/python3.7/site-packages/numpy/core/_asarray.py in asarray(a, dtype, order)\r\n     83 \r\n     84     \"\"\"\r\n---> 85     return array(a, dtype, copy=False, order=order)\r\n     86 \r\n     87 \r\n\r\nMemoryError: Unable to allocate array with shape (201368,) and data type <U131880\r\n```\r\n\r\n#### Expected Output\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.7.4.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.3.0-1028-azure\r\nVersion          : #29~18.04.1-Ubuntu SMP Fri Jun 5 14:32:34 UTC 2020\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : en_US.UTF-8\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.17.5\r\npytz             : 2019.3\r\ndateutil         : 2.8.1\r\npip              : 20.0.2\r\nsetuptools       : 45.2.0\r\nCython           : 0.29.14\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : 2.8.4 (dt dec pq3 ext lo64)\r\njinja2           : 2.10.3\r\nIPython          : 7.11.1\r\npandas_datareader: None\r\nbs4              : 4.8.2\r\nbottleneck       : None\r\nfsspec           : 0.6.2\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.1.2\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 3.0.4\r\npandas_gbq       : None\r\npyarrow          : 1.0.0\r\npytables         : None\r\npyxlsb           : 1.0.6\r\ns3fs             : None\r\nscipy            : 1.4.1\r\nsqlalchemy       : 1.3.13\r\ntables           : None\r\ntabulate         : 0.8.6\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : None\r\nnumba            : 0.48.0\r\n\r\n\r\n</details>\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35497", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35497/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35497/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35497/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35497", "id": 670128545, "node_id": "MDU6SXNzdWU2NzAxMjg1NDU=", "number": 35497, "title": "BUG: Issue with latest version (1.1.0) of pandas when imported ", "user": {"login": "rakekris", "id": 22142158, "node_id": "MDQ6VXNlcjIyMTQyMTU4", "avatar_url": "https://avatars3.githubusercontent.com/u/22142158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rakekris", "html_url": "https://github.com/rakekris", "followers_url": "https://api.github.com/users/rakekris/followers", "following_url": "https://api.github.com/users/rakekris/following{/other_user}", "gists_url": "https://api.github.com/users/rakekris/gists{/gist_id}", "starred_url": "https://api.github.com/users/rakekris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rakekris/subscriptions", "organizations_url": "https://api.github.com/users/rakekris/orgs", "repos_url": "https://api.github.com/users/rakekris/repos", "events_url": "https://api.github.com/users/rakekris/events{/privacy}", "received_events_url": "https://api.github.com/users/rakekris/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 307649777, "node_id": "MDU6TGFiZWwzMDc2NDk3Nzc=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Info", "name": "Needs Info", "color": "207de5", "default": false, "description": "Clarification about behavior needed to assess issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 8, "created_at": "2020-07-31T19:14:29Z", "updated_at": "2020-08-16T14:55:14Z", "closed_at": "2020-08-16T14:55:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [Y ] I have checked that this issue has not already been reported.\r\n\r\n- [ Y] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n# Your code here\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\n[this should explain **why** the current behaviour is a problem and why the expected output is a better solution]\r\n\r\nWe are using latest version of pandas in project .\r\n\r\nWe are getting following issue when we import pandas\r\n\r\n    import pandas as pd\r\n  File \"/usr/local/lib64/python3.6/site-packages/pandas/__init__.py\", line 22, in <module>\r\n    from pandas.compat.numpy import (\r\n  File \"/usr/local/lib64/python3.6/site-packages/pandas/compat/numpy/__init__.py\", line 21, in <module>\r\n    \"this version of pandas is incompatible with numpy < 1.15.4\\n\"\r\nImportError: this version of pandas is incompatible with numpy < 1.15.4\r\nyour numpy version is 1.14.5.\r\nPlease upgrade numpy to >= 1.15.4 to use this pandas version\r\n\r\n#### Expected Output\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\n[paste the output of ``pd.show_versions()`` here leaving a blank line after the details tag]\r\n\r\n1.1.0\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35495", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35495/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35495/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35495/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35495", "id": 669684061, "node_id": "MDU6SXNzdWU2Njk2ODQwNjE=", "number": 35495, "title": "DOC: pd.read_sql() connection disposal for str type connections ", "user": {"login": "AdamSpannbauer", "id": 16326083, "node_id": "MDQ6VXNlcjE2MzI2MDgz", "avatar_url": "https://avatars3.githubusercontent.com/u/16326083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdamSpannbauer", "html_url": "https://github.com/AdamSpannbauer", "followers_url": "https://api.github.com/users/AdamSpannbauer/followers", "following_url": "https://api.github.com/users/AdamSpannbauer/following{/other_user}", "gists_url": "https://api.github.com/users/AdamSpannbauer/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdamSpannbauer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdamSpannbauer/subscriptions", "organizations_url": "https://api.github.com/users/AdamSpannbauer/orgs", "repos_url": "https://api.github.com/users/AdamSpannbauer/repos", "events_url": "https://api.github.com/users/AdamSpannbauer/events{/privacy}", "received_events_url": "https://api.github.com/users/AdamSpannbauer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 134699, "node_id": "MDU6TGFiZWwxMzQ2OTk=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Docs", "name": "Docs", "color": "3465A4", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-31T10:47:13Z", "updated_at": "2020-08-01T17:05:55Z", "closed_at": "2020-08-01T17:05:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is in between a documentation issue and a general question.\r\n\r\n#### Location of the documentation\r\n\r\n[`pd.read_sql()`](https://github.com/pandas-dev/pandas/blob/v1.1.0/pandas/io/sql.py#L441-L443)\r\n\r\n#### Documentation problem\r\n\r\nThe documentation notes that if the `con` is a `SQLAlchemy connectable` that the user is responsible for disposing/closing.  The documentation doesn't note whether the connection is closed if the user provides a `str` to the `con` parameter.  In my quick search, I couldn't find a reference to `.dispose()`/`.close()` in the source code when the user provides a `str` type `con`.  Is this connection being closed? Is it being left up to garbage collection as noted in [SQLAlchemy docs](https://docs.sqlalchemy.org/en/13/core/connections.html#engine-disposal)?\r\n\r\n#### Suggested fix for documentation\r\n\r\nI think a note about connection closure for `str` type `con`s would be a nice addition.  Right now, if I'm understanding correctly, the connection is being garbage collected and the user needs to infer from the docs that they don't need to worry about an open connection.\r\n\r\nCurrent wording:\r\n\r\n> The user is responsible for engine disposal and connection closure for the SQLAlchemy connectable.\r\n\r\nPotential wording:\r\n\r\n> The user is responsible for engine disposal and connection closure for the SQLAlchemy connectable; str connections are closed automatically.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35493", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35493/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35493/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35493/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35493", "id": 669640174, "node_id": "MDU6SXNzdWU2Njk2NDAxNzQ=", "number": 35493, "title": "BUG: use_inf_as_na options raises value error for read_csv", "user": {"login": "mhaselsteiner", "id": 20536514, "node_id": "MDQ6VXNlcjIwNTM2NTE0", "avatar_url": "https://avatars3.githubusercontent.com/u/20536514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhaselsteiner", "html_url": "https://github.com/mhaselsteiner", "followers_url": "https://api.github.com/users/mhaselsteiner/followers", "following_url": "https://api.github.com/users/mhaselsteiner/following{/other_user}", "gists_url": "https://api.github.com/users/mhaselsteiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhaselsteiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhaselsteiner/subscriptions", "organizations_url": "https://api.github.com/users/mhaselsteiner/orgs", "repos_url": "https://api.github.com/users/mhaselsteiner/repos", "events_url": "https://api.github.com/users/mhaselsteiner/events{/privacy}", "received_events_url": "https://api.github.com/users/mhaselsteiner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 47229171, "node_id": "MDU6TGFiZWw0NzIyOTE3MQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/IO%20CSV", "name": "IO CSV", "color": "5319e7", "default": false, "description": null}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 2, "created_at": "2020-07-31T09:57:30Z", "updated_at": "2020-08-03T23:29:32Z", "closed_at": "2020-08-03T23:29:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n\r\n\r\n#### Code Sample to Reproduce Error\r\n\r\n```python\r\nimport pandas as pd\r\nimport numpy as np\r\npd.set_option('use_inf_as_na', True)\r\npd.DataFrame({'test_data':[1,3,4,np.nan]}).to_csv('test_data.csv', na_rep='NaN')\r\npd.read_csv('test_data.csv',sep=',' ,na_values='NaN')\r\n```\r\nCauses `ValueError`:\r\n```python-traceback\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/io/parsers.py\", line 686, in read_csv\r\n    return _read(filepath_or_buffer, kwds)\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/io/parsers.py\", line 458, in _read\r\n    data = parser.read(nrows)\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/io/parsers.py\", line 1201, in read\r\n    df = DataFrame(col_dict, columns=columns, index=index)\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/core/frame.py\", line 467, in __init__\r\n    mgr = init_dict(data, index, columns, dtype=dtype)\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/core/internals/construction.py\", line 250, in init_dict\r\n    missing = arrays.isna()\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/core/series.py\", line 4795, in isna\r\n    return super().isna()\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/core/generic.py\", line 7109, in isna\r\n    return isna(self).__finalize__(self, method=\"isna\")\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/core/dtypes/missing.py\", line 124, in isna\r\n    return _isna(obj)\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/core/dtypes/missing.py\", line 157, in _isna\r\n    return _isna_ndarraylike(obj, inf_as_na=inf_as_na)\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/core/dtypes/missing.py\", line 218, in _isna_ndarraylike\r\n    result = _isna_string_dtype(values, dtype, inf_as_na=inf_as_na)\r\n  File \"/home/lena/anaconda3/envs/pandas_pip2/lib/python3.8/site-packages/pandas/core/dtypes/missing.py\", line 246, in _isna_string_dtype\r\n    vec = libmissing.isnaobj_old(values.ravel())\r\n  File \"pandas/_libs/missing.pyx\", line 160, in pandas._libs.missing.isnaobj_old\r\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\r\n```\r\n\r\n#### Problem description\r\nNans are not recognized as expected anymore if pandas option `use_inf_as_na`is set to True. Occurred first after upgrading to pandas 1.1.0\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.5.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.4.0-42-generic\r\nVersion          : #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2\r\nsetuptools       : 49.2.0.post20200712\r\nCython           : None\r\npytest           : 6.0.1\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : 1.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.3.0\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.2\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\n\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35490", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35490/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35490/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35490/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35490", "id": 669618716, "node_id": "MDU6SXNzdWU2Njk2MTg3MTY=", "number": 35490, "title": "BUG: DataFrame.agg with multiple cum functions creates wrong result", "user": {"login": "qinxuye", "id": 357506, "node_id": "MDQ6VXNlcjM1NzUwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/357506?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qinxuye", "html_url": "https://github.com/qinxuye", "followers_url": "https://api.github.com/users/qinxuye/followers", "following_url": "https://api.github.com/users/qinxuye/following{/other_user}", "gists_url": "https://api.github.com/users/qinxuye/gists{/gist_id}", "starred_url": "https://api.github.com/users/qinxuye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qinxuye/subscriptions", "organizations_url": "https://api.github.com/users/qinxuye/orgs", "repos_url": "https://api.github.com/users/qinxuye/repos", "events_url": "https://api.github.com/users/qinxuye/events{/privacy}", "received_events_url": "https://api.github.com/users/qinxuye/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 697792067, "node_id": "MDU6TGFiZWw2OTc3OTIwNjc=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Apply", "name": "Apply", "color": "fbca04", "default": false, "description": "Apply, Aggregate, Transform"}, {"id": 77550281, "node_id": "MDU6TGFiZWw3NzU1MDI4MQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Blocker", "name": "Blocker", "color": "e11d21", "default": false, "description": "Blocking issue or pull request for an upcoming release"}, {"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 233160, "node_id": "MDU6TGFiZWwyMzMxNjA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Groupby", "name": "Groupby", "color": "729FCF", "default": false, "description": null}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 8, "created_at": "2020-07-31T09:33:45Z", "updated_at": "2020-08-14T20:59:10Z", "closed_at": "2020-08-14T20:59:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n# Your code here\r\nIn [1]: import pandas as pd                                                     \r\n\r\nIn [2]: df1 = pd.DataFrame({ \r\n   ...:     'a': [3, 4, 5, 3, 5, 4, 1, 2, 3], \r\n   ...:     'b': [1, 3, 4, 5, 6, 5, 4, 4, 4], \r\n   ...:     'c': list('aabaaddce'), \r\n   ...:     'd': [3, 4, 5, 3, 5, 4, 1, 2, 3], \r\n   ...:     'e': [1, 3, 4, 5, 6, 5, 4, 4, 4], \r\n   ...:     'f': list('aabaaddce'), \r\n   ...: })                                                                      \r\n\r\nIn [3]: df1.groupby('b').agg(['cummax', 'cumsum'])                              \r\nOut[3]: \r\n       a             d             e       \r\n  cummax cumsum cummax cumsum cummax cumsum\r\nb                                          \r\n1      4      4      4      4      3      3\r\n3      3      3      3      3      5      5\r\n4      5      5      5      5      6      6\r\n5      4      7      4      7      5     10\r\n6      5      6      5      6      4      8\r\n```\r\n\r\nCumulative functions should generate the DataFrame with the same length.\r\n\r\n#### Problem description\r\n\r\n[this should explain **why** the current behaviour is a problem and why the expected output is a better solution]\r\n\r\nIn pandas 1.0.5, the result is\r\n\r\n```python\r\nIn [1]: import pandas as pd                                                     \r\n\r\nIn [2]: df1 = pd.DataFrame({ \r\n   ...:     'a': [3, 4, 5, 3, 5, 4, 1, 2, 3], \r\n   ...:     'b': [1, 3, 4, 5, 6, 5, 4, 4, 4], \r\n   ...:     'c': list('aabaaddce'), \r\n   ...:     'd': [3, 4, 5, 3, 5, 4, 1, 2, 3], \r\n   ...:     'e': [1, 3, 4, 5, 6, 5, 4, 4, 4], \r\n   ...:     'f': list('aabaaddce'), \r\n   ...: })                                                                      \r\n\r\nIn [3]: df1.groupby('b').agg(['cummax', 'cumsum'])                              \r\nOut[3]: \r\n       a             d             e       \r\n  cummax cumsum cummax cumsum cummax cumsum\r\n0      3      3      3      3      1      1\r\n1      4      4      4      4      3      3\r\n2      5      5      5      5      4      4\r\n3      3      3      3      3      5      5\r\n4      5      5      5      5      6      6\r\n5      4      7      4      7      5     10\r\n6      5      6      5      6      4      8\r\n7      5      8      5      8      4     12\r\n8      5     11      5     11      4     16\r\n```\r\n\r\n#### Expected Output\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nIn [5]: pd.show_versions()                                                      \r\n/Users/qinxuye/miniconda3/envs/test_pandas_1.1/lib/python3.7/site-packages/setuptools/distutils_patch.py:26: UserWarning: Distutils was imported before Setuptools. This usage is discouraged and may exhibit undesirable behaviors or errors. Please use Setuptools' objects directly or at least import Setuptools first.\r\n  \"Distutils was imported before Setuptools. This usage is discouraged \"\r\n---------------------------------------------------------------------------\r\nImportError                               Traceback (most recent call last)\r\n<ipython-input-5-3d232a07e144> in <module>\r\n----> 1 pd.show_versions()\r\n\r\n~/miniconda3/envs/test_pandas_1.1/lib/python3.7/site-packages/pandas/util/_print_versions.py in show_versions(as_json)\r\n    104     \"\"\"\r\n    105     sys_info = _get_sys_info()\r\n--> 106     deps = _get_dependency_info()\r\n    107 \r\n    108     if as_json:\r\n\r\n~/miniconda3/envs/test_pandas_1.1/lib/python3.7/site-packages/pandas/util/_print_versions.py in _get_dependency_info()\r\n     82     for modname in deps:\r\n     83         mod = import_optional_dependency(\r\n---> 84             modname, raise_on_missing=False, on_version=\"ignore\"\r\n     85         )\r\n     86         result[modname] = _get_version(mod) if mod else None\r\n\r\n~/miniconda3/envs/test_pandas_1.1/lib/python3.7/site-packages/pandas/compat/_optional.py in import_optional_dependency(name, extra, raise_on_missing, on_version)\r\n     97     minimum_version = VERSIONS.get(name)\r\n     98     if minimum_version:\r\n---> 99         version = _get_version(module)\r\n    100         if distutils.version.LooseVersion(version) < minimum_version:\r\n    101             assert on_version in {\"warn\", \"raise\", \"ignore\"}\r\n\r\n~/miniconda3/envs/test_pandas_1.1/lib/python3.7/site-packages/pandas/compat/_optional.py in _get_version(module)\r\n     42 \r\n     43     if version is None:\r\n---> 44         raise ImportError(f\"Can't determine version for {module.__name__}\")\r\n     45     return version\r\n     46 \r\n\r\nImportError: Can't determine version for numba\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35488", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35488/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35488/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35488/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35488", "id": 669526998, "node_id": "MDU6SXNzdWU2Njk1MjY5OTg=", "number": 35488, "title": "BUG: Shift on DataFrame which has more than 1 block creates wrong result", "user": {"login": "qinxuye", "id": 357506, "node_id": "MDQ6VXNlcjM1NzUwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/357506?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qinxuye", "html_url": "https://github.com/qinxuye", "followers_url": "https://api.github.com/users/qinxuye/followers", "following_url": "https://api.github.com/users/qinxuye/following{/other_user}", "gists_url": "https://api.github.com/users/qinxuye/gists{/gist_id}", "starred_url": "https://api.github.com/users/qinxuye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qinxuye/subscriptions", "organizations_url": "https://api.github.com/users/qinxuye/orgs", "repos_url": "https://api.github.com/users/qinxuye/repos", "events_url": "https://api.github.com/users/qinxuye/events{/privacy}", "received_events_url": "https://api.github.com/users/qinxuye/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 49094459, "node_id": "MDU6TGFiZWw0OTA5NDQ1OQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Internals", "name": "Internals", "color": "fbca04", "default": false, "description": "Related to non-user accessible pandas implementation"}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 1, "created_at": "2020-07-31T07:49:59Z", "updated_at": "2020-08-07T11:45:49Z", "closed_at": "2020-08-07T11:45:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n# Your code here\r\nIn [1]: import pandas as pd                                                     \r\n\r\nIn [2]: import numpy as np                                                      \r\n\r\nIn [3]: df1 = pd.DataFrame(np.random.randint(1000, size=(5, 3)))                \r\n\r\nIn [4]: df2 = pd.DataFrame(np.random.randint(1000, size=(5, 2)))                \r\n\r\nIn [5]: df3 = pd.concat([df1, df2], axis=1)                                     \r\n\r\nIn [6]: df3                                                                     \r\nOut[6]: \r\n     0    1    2    0    1\r\n0   61  536  154  766  179\r\n1  484   18   15  787  766\r\n2  391  171  715  836  654\r\n3  914  969  765  824  950\r\n4  169  414  759   16  666\r\n\r\nIn [7]: len(df3._data.blocks)                                                   \r\nOut[7]: 2\r\n\r\nIn [9]: df3.shift(2, axis=1)                                                    \r\nOut[9]: \r\n    0   1      2   0   1\r\n0 NaN NaN   61.0 NaN NaN\r\n1 NaN NaN  484.0 NaN NaN\r\n2 NaN NaN  391.0 NaN NaN\r\n3 NaN NaN  914.0 NaN NaN\r\n4 NaN NaN  169.0 NaN NaN\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\n[this should explain **why** the current behaviour is a problem and why the expected output is a better solution]\r\n\r\nI guess `shift` is applied to both of the internal blocks.\r\n\r\n#### Expected Output\r\n\r\nI forced consolidate, the result is right.\r\n\r\n```\r\nIn [12]: df3._data._consolidate_inplace()                                       \r\n\r\nIn [13]: df3.shift(2, axis=1)                                                   \r\nOut[13]: \r\n    0   1      2      0      1\r\n0 NaN NaN   61.0  536.0  154.0\r\n1 NaN NaN  484.0   18.0   15.0\r\n2 NaN NaN  391.0  171.0  715.0\r\n3 NaN NaN  914.0  969.0  765.0\r\n4 NaN NaN  169.0  414.0  759.0\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nIn [14]: pd.show_versions()                                                     \r\n/Users/qinxuye/miniconda3/envs/test_pandas_1.1/lib/python3.7/site-packages/setuptools/distutils_patch.py:26: UserWarning: Distutils was imported before Setuptools. This usage is discouraged and may exhibit undesirable behaviors or errors. Please use Setuptools' objects directly or at least import Setuptools first.\r\n  \"Distutils was imported before Setuptools. This usage is discouraged \"\r\n---------------------------------------------------------------------------\r\nImportError                               Traceback (most recent call last)\r\n<ipython-input-14-3d232a07e144> in <module>\r\n----> 1 pd.show_versions()\r\n\r\n~/miniconda3/envs/test_pandas_1.1/lib/python3.7/site-packages/pandas/util/_print_versions.py in show_versions(as_json)\r\n    104     \"\"\"\r\n    105     sys_info = _get_sys_info()\r\n--> 106     deps = _get_dependency_info()\r\n    107 \r\n    108     if as_json:\r\n\r\n~/miniconda3/envs/test_pandas_1.1/lib/python3.7/site-packages/pandas/util/_print_versions.py in _get_dependency_info()\r\n     82     for modname in deps:\r\n     83         mod = import_optional_dependency(\r\n---> 84             modname, raise_on_missing=False, on_version=\"ignore\"\r\n     85         )\r\n     86         result[modname] = _get_version(mod) if mod else None\r\n\r\n~/miniconda3/envs/test_pandas_1.1/lib/python3.7/site-packages/pandas/compat/_optional.py in import_optional_dependency(name, extra, raise_on_missing, on_version)\r\n     97     minimum_version = VERSIONS.get(name)\r\n     98     if minimum_version:\r\n---> 99         version = _get_version(module)\r\n    100         if distutils.version.LooseVersion(version) < minimum_version:\r\n    101             assert on_version in {\"warn\", \"raise\", \"ignore\"}\r\n\r\n~/miniconda3/envs/test_pandas_1.1/lib/python3.7/site-packages/pandas/compat/_optional.py in _get_version(module)\r\n     42 \r\n     43     if version is None:\r\n---> 44         raise ImportError(f\"Can't determine version for {module.__name__}\")\r\n     45     return version\r\n     46 \r\n\r\nImportError: Can't determine version for numba\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35486", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35486/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35486/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35486/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35486", "id": 669391946, "node_id": "MDU6SXNzdWU2NjkzOTE5NDY=", "number": 35486, "title": "QST: is the new behavior of GroupByRolling in v1.1.0 intended?", "user": {"login": "itholic", "id": 44108233, "node_id": "MDQ6VXNlcjQ0MTA4MjMz", "avatar_url": "https://avatars1.githubusercontent.com/u/44108233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itholic", "html_url": "https://github.com/itholic", "followers_url": "https://api.github.com/users/itholic/followers", "following_url": "https://api.github.com/users/itholic/following{/other_user}", "gists_url": "https://api.github.com/users/itholic/gists{/gist_id}", "starred_url": "https://api.github.com/users/itholic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itholic/subscriptions", "organizations_url": "https://api.github.com/users/itholic/orgs", "repos_url": "https://api.github.com/users/itholic/repos", "events_url": "https://api.github.com/users/itholic/events{/privacy}", "received_events_url": "https://api.github.com/users/itholic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 233160, "node_id": "MDU6TGFiZWwyMzMxNjA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Groupby", "name": "Groupby", "color": "729FCF", "default": false, "description": null}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}, {"id": 1045950827, "node_id": "MDU6TGFiZWwxMDQ1OTUwODI3", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Window", "name": "Window", "color": "d4c5f9", "default": false, "description": "rolling, ewma, expanding"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 2, "created_at": "2020-07-31T04:13:37Z", "updated_at": "2020-08-06T17:45:20Z", "closed_at": "2020-08-06T17:45:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### Question about pandas\r\n\r\nLet's say we have a `DataFrame` like the below.\r\n\r\n```python\r\n>>> pdf = pd.DataFrame({\"a\": [1, 2, 3, 2], \"b\": [4.0, 2.0, 3.0, 1.0], \"c\": [10, 20, 30, 20]})\r\n>>> pdf\r\n   a    b   c\r\n0  1  4.0  10\r\n1  2  2.0  20\r\n2  3  3.0  30\r\n3  2  1.0  20\r\n```\r\n\r\nThen, when I use `GroupByRolling`, In the version of pandas <= 1.0.5 shows result as below.\r\n\r\n```python\r\n>>> pdf.groupby('a')[['b']].rolling(2).max()\r\n       b\r\na\r\n1 0  NaN\r\n3 2  NaN\r\n2 1  NaN\r\n  3  2.0\r\n```\r\n\r\nHowever, In the pandas 1.1.0, the result seems different from the previous version as below.\r\n\r\n```python\r\n>>> pdf.groupby('a')[['b']].rolling(2).max()\r\n       a    b     c\r\na\r\n1 0  NaN  NaN   NaN\r\n2 1  NaN  NaN   NaN\r\n  3  2.0  2.0  20.0\r\n3 2  NaN  NaN   NaN\r\n```\r\n\r\nCould someone let me know Is it intended? or unexpected behavior (maybe kind of bug) ?\r\n\r\nThanks :)", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35483", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35483/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35483/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35483/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35483", "id": 669235701, "node_id": "MDU6SXNzdWU2NjkyMzU3MDE=", "number": 35483, "title": "QST: is the new behavior of df.apply(my_func, axis=1) in v1.1.0 intended?", "user": {"login": "manihamidi", "id": 15459064, "node_id": "MDQ6VXNlcjE1NDU5MDY0", "avatar_url": "https://avatars2.githubusercontent.com/u/15459064?v=4", "gravatar_id": "", "url": "https://api.github.com/users/manihamidi", "html_url": "https://github.com/manihamidi", "followers_url": "https://api.github.com/users/manihamidi/followers", "following_url": "https://api.github.com/users/manihamidi/following{/other_user}", "gists_url": "https://api.github.com/users/manihamidi/gists{/gist_id}", "starred_url": "https://api.github.com/users/manihamidi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/manihamidi/subscriptions", "organizations_url": "https://api.github.com/users/manihamidi/orgs", "repos_url": "https://api.github.com/users/manihamidi/repos", "events_url": "https://api.github.com/users/manihamidi/events{/privacy}", "received_events_url": "https://api.github.com/users/manihamidi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2020-07-30T22:10:51Z", "updated_at": "2020-07-31T13:12:38Z", "closed_at": "2020-07-31T13:12:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have searched the [[pandas] tag](https://stackoverflow.com/questions/tagged/pandas) on StackOverflow for similar questions.\r\n\r\n- [x] I have asked my usage related question on [StackOverflow](https://stackoverflow.com).\r\n\r\n---\r\n\r\n#### Question about pandas\r\n\r\n\r\n\r\n\r\n```python\r\nimport pandas as pd\r\ndef test_func(row):\r\n    row['c'] = str(row['a']) + str(row['b'])\r\n    row['d'] = row['a'] + 1\r\n    return row\r\n\r\ndf = pd.DataFrame({'a': [1,2,3], 'b': ['i','j', 'k']})\r\ndf.apply(test_func, axis=1)\r\n```\r\n\r\nThe above code ran on pandas 1.1.0 returns:\r\n\r\n```\r\n   a  b   c  d\r\n0  1  i  1i  2\r\n1  1  i  1i  2\r\n2  1  i  1i  2\r\n```\r\nWhile in pandas 1.0.5 it returns:\r\n\r\n```\r\n   a   b    c  d\r\n0  1   i   1i  2\r\n1  2   j   2j  3\r\n2  3   k   3k  4\r\n```\r\n\r\n\r\nUsing python 3.8.3 and IPython 7.16.1. \r\n\r\n## The Question: \r\n\r\n:question: What is the right way of getting the v1.0.5  behavior in v1.1.0? \r\n\r\nI did see this release note but honestly can't figure out if this is an intended/unintended side effect of it: https://pandas.pydata.org/pandas-docs/stable/whatsnew/v1.1.0.html#apply-and-applymap-on-dataframe-evaluates-first-row-column-only-once\r\n\r\n\r\nthanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35480", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35480/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35480/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35480/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35480", "id": 668982753, "node_id": "MDU6SXNzdWU2Njg5ODI3NTM=", "number": 35480, "title": "BUG:weekofyear error,The last three days of 2008 are considered the first week", "user": {"login": "princelai", "id": 508885, "node_id": "MDQ6VXNlcjUwODg4NQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/508885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/princelai", "html_url": "https://github.com/princelai", "followers_url": "https://api.github.com/users/princelai/followers", "following_url": "https://api.github.com/users/princelai/following{/other_user}", "gists_url": "https://api.github.com/users/princelai/gists{/gist_id}", "starred_url": "https://api.github.com/users/princelai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/princelai/subscriptions", "organizations_url": "https://api.github.com/users/princelai/orgs", "repos_url": "https://api.github.com/users/princelai/repos", "events_url": "https://api.github.com/users/princelai/events{/privacy}", "received_events_url": "https://api.github.com/users/princelai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-30T17:09:09Z", "updated_at": "2020-08-04T11:19:12Z", "closed_at": "2020-07-30T19:01:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [Yes ] I have checked that this issue has not already been reported.\r\n\r\n- [ No] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\ny = pd.Series(pd.date_range(start='2008-12-27',periods=7,freq='D'))\r\ny.dt.isocalendar().week\r\n```\r\n\r\n#### Problem description\r\nThis is an obvious mistake, isn't it?\r\n|    | d                   |   w |\r\n|---:|:--------------------|----:|\r\n|  0 | 2008-12-27 00:00:00 |  52 |\r\n|  1 | 2008-12-28 00:00:00 |  52 |\r\n|  2 | 2008-12-29 00:00:00 |   1 |\r\n|  3 | 2008-12-30 00:00:00 |   1 |\r\n|  4 | 2008-12-31 00:00:00 |   1 |\r\n|  5 | 2009-01-01 00:00:00 |   1 |\r\n|  6 | 2009-01-02 00:00:00 |   1 |\r\n\r\n#### Expected Output\r\n|    | d                   |   w |\r\n|---:|:--------------------|----:|\r\n|  0 | 2008-12-27 00:00:00 |  52 |\r\n|  1 | 2008-12-28 00:00:00 |  52 |\r\n|  2 | 2008-12-29 00:00:00 |   52 |\r\n|  3 | 2008-12-30 00:00:00 |   52 |\r\n|  4 | 2008-12-31 00:00:00 |   52 |\r\n|  5 | 2009-01-01 00:00:00 |   1 |\r\n|  6 | 2009-01-02 00:00:00 |   1 |\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.3.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.4.53-1-MANJARO\r\nVersion          : #1 SMP PREEMPT Wed Jul 22 15:04:56 UTC 2020\r\nmachine          : x86_64\r\nprocessor        : \r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.2\r\nsetuptools       : 49.2.0\r\nCython           : 0.29.21\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : 4.5.2\r\nhtml5lib         : None\r\npymysql          : 0.10.0\r\npsycopg2         : 2.8.5 (dt dec pq3 ext lo64)\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.3.0\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 3.0.4\r\npandas_gbq       : None\r\npyarrow          : 1.0.0\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.2\r\nsqlalchemy       : 1.3.18\r\ntables           : 3.6.1\r\ntabulate         : 0.8.7\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : None\r\nnumba            : 0.50.1\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35479", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35479/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35479/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35479/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35479", "id": 668939597, "node_id": "MDU6SXNzdWU2Njg5Mzk1OTc=", "number": 35479, "title": "BUG: Nonintuitive behaviour when indexing with a constant boolean function", "user": {"login": "onnoeberhard", "id": 21868012, "node_id": "MDQ6VXNlcjIxODY4MDEy", "avatar_url": "https://avatars1.githubusercontent.com/u/21868012?v=4", "gravatar_id": "", "url": "https://api.github.com/users/onnoeberhard", "html_url": "https://github.com/onnoeberhard", "followers_url": "https://api.github.com/users/onnoeberhard/followers", "following_url": "https://api.github.com/users/onnoeberhard/following{/other_user}", "gists_url": "https://api.github.com/users/onnoeberhard/gists{/gist_id}", "starred_url": "https://api.github.com/users/onnoeberhard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/onnoeberhard/subscriptions", "organizations_url": "https://api.github.com/users/onnoeberhard/orgs", "repos_url": "https://api.github.com/users/onnoeberhard/repos", "events_url": "https://api.github.com/users/onnoeberhard/events{/privacy}", "received_events_url": "https://api.github.com/users/onnoeberhard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2020-07-30T16:29:25Z", "updated_at": "2020-07-30T20:46:41Z", "closed_at": "2020-07-30T20:46:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\nseries = pd.Series([1, 2, 3])\r\nx = series[lambda s: s > 2]    # Indexing with a boolean function, works like a charm\r\ny = series[lambda s: True]     # Indexing with a constant boolean function --> results in KeyError: True\r\n```\r\n\r\n#### Problem description\r\nI would expect `y` to be equal to `series` in this example, because the callable function passed to `__getitem__` returns True for all items in the Series. The same error arises when using a DataFrame. I know in this example, it seems like the function would be useless, because it would just return `series`, but in my use case the function that is passed to `__getitem__` is actually a 'filter' function argument, and it would be very convenient to just turn off the filter by passing `lambda df: True` as the filter function.\r\n\r\nA quick workaround I found useful is:\r\n```python\r\nimport numpy as np\r\ny = series[lambda s: np.full(len(s), True)]\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.3.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 5.3.0-1030-aws\r\nVersion          : #32~18.04.1-Ubuntu SMP Tue Jun 30 23:04:16 UTC 2020\r\nmachine          : x86_64\r\nprocessor        : \r\nbyteorder        : little\r\nLC_ALL           : en_US.UTF-8\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.0\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 47.1.1\r\nCython           : 0.29.21\r\npytest           : 5.4.3\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.2.9\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : 0.9.3\r\npsycopg2         : 2.8.5 (dt dec pq3 ext lo64)\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : None\r\nfsspec           : 0.7.4\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.2.2\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 3.0.4\r\npandas_gbq       : None\r\npyarrow          : 0.17.1\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : 0.4.2\r\nscipy            : 1.4.1\r\nsqlalchemy       : 1.3.13\r\ntables           : 3.6.1\r\ntabulate         : 0.8.7\r\nxarray           : 0.15.1\r\nxlrd             : 1.2.0\r\nxlwt             : None\r\nnumba            : 0.50.1\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35476", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35476/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35476/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35476/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35476", "id": 668752044, "node_id": "MDU6SXNzdWU2Njg3NTIwNDQ=", "number": 35476, "title": "BUG: Bug with Alpine installation", "user": {"login": "AminovE99", "id": 32329685, "node_id": "MDQ6VXNlcjMyMzI5Njg1", "avatar_url": "https://avatars0.githubusercontent.com/u/32329685?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AminovE99", "html_url": "https://github.com/AminovE99", "followers_url": "https://api.github.com/users/AminovE99/followers", "following_url": "https://api.github.com/users/AminovE99/following{/other_user}", "gists_url": "https://api.github.com/users/AminovE99/gists{/gist_id}", "starred_url": "https://api.github.com/users/AminovE99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AminovE99/subscriptions", "organizations_url": "https://api.github.com/users/AminovE99/orgs", "repos_url": "https://api.github.com/users/AminovE99/repos", "events_url": "https://api.github.com/users/AminovE99/events{/privacy}", "received_events_url": "https://api.github.com/users/AminovE99/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 129350, "node_id": "MDU6TGFiZWwxMjkzNTA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Build", "name": "Build", "color": "75507B", "default": false, "description": "Library building on various platforms"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-30T13:53:11Z", "updated_at": "2020-08-08T09:04:03Z", "closed_at": "2020-07-30T15:59:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [ ] I have checked that this issue has not already been reported.\r\n\r\n- [ ] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n# Your code here\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\nI work on frappe framework and I have `docker-erpnext` to deploy application.\r\nWhen I tried to install pandas library on my linux (alpine) system, I received error:\r\n\r\nhttps://travis-ci.org/github/Monogramm/docker-erpnext/jobs/713250724#L4417\r\n\r\nBy the way, this library can be installed on debian and debian-slim, but cannot be installed on alpine.\r\n\r\nI already checked problem #7512 but it did not helped to me.\r\n\r\n#### Expected Output\r\nPandas should be installed\r\n\r\n#### Output of ``pd.show_versions()``\r\n`pandas==0.24.2`\r\nversion of python: 3.7\r\n<details>\r\n\r\n[paste the output of ``pd.show_versions()`` here leaving a blank line after the details tag]\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35472", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35472/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35472/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35472/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35472", "id": 668210353, "node_id": "MDU6SXNzdWU2NjgyMTAzNTM=", "number": 35472, "title": "ENH: Method on pd.Period to find the nth weekday in a period. ", "user": {"login": "smithto1", "id": 3813175, "node_id": "MDQ6VXNlcjM4MTMxNzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3813175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smithto1", "html_url": "https://github.com/smithto1", "followers_url": "https://api.github.com/users/smithto1/followers", "following_url": "https://api.github.com/users/smithto1/following{/other_user}", "gists_url": "https://api.github.com/users/smithto1/gists{/gist_id}", "starred_url": "https://api.github.com/users/smithto1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smithto1/subscriptions", "organizations_url": "https://api.github.com/users/smithto1/orgs", "repos_url": "https://api.github.com/users/smithto1/repos", "events_url": "https://api.github.com/users/smithto1/events{/privacy}", "received_events_url": "https://api.github.com/users/smithto1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76812, "node_id": "MDU6TGFiZWw3NjgxMg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Enhancement", "name": "Enhancement", "color": "4E9A06", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-29T22:28:44Z", "updated_at": "2020-07-30T05:57:18Z", "closed_at": "2020-07-30T05:57:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### Is your feature request related to a problem?\r\n\r\nIt should be easy to find the nth weekday of period (usually a month). This kind of operation comes up all the time in financial contracts (i.e. futures and options expiring on the 3rd Wed of the month) and other use-cases (i.e. US election dates).\r\n\r\n#### Describe the solution you'd like\r\n\r\nAdd an `nth_weekday` method to the `pd.Period` object to handle this operation. It could then be extended to the `PeriodArray`. \r\n\r\n`nth_weekday` should work forward and backwards with Pythonic-indexing (n=0 gives you date of first weekday, n=-1 gives you date of last weekday) \r\n\r\n`nth_weekday` should have a flag to to enforce that the returned date has to be inside the period, or if you let it go outside the period bounds. It should default to enforcing the period bounds. \r\n\r\n#### API breaking implications\r\n\r\nThis will add a new method to the `pd.Period`  and the `PeriodArray`. Proposed name is `nth_weekday` but that can be changed. It shouldn't have any other impact on the API. \r\n\r\n#### Describe alternatives you've considered\r\n\r\nA general search of the internet did not find any convenient solution for this in all of Python. These looked like the best solutions available, and they're not great:\r\nhttps://stackoverflow.com/questions/11883058/nth-weekday-calculation-in-python-whats-wrong-with-this-code\r\nhttps://stackoverflow.com/questions/61106105/python-how-to-find-the-nth-weekday-of-the-year\r\n\r\n#### Additional context\r\n\r\nBelow is a quick mock-up of the method (unoptimised, undocumented, but illustrates the functionality). \r\n\r\n```python\r\n\r\nimport pandas as pd\r\n\r\nclass Period_(pd.Period):\r\n    def nth_weekday(self, n:int, weekday:int, within_period:bool=True) -> pd.Timestamp :\r\n        \r\n        assert weekday >= 0\r\n        assert weekday <= 6\r\n        \r\n        if n >= 0:\r\n            diff = weekday - self.start_time.weekday()\r\n            diff += 7 if diff < 0 else 0            \r\n            diff = diff + n * 7\r\n            \r\n            res = self.start_time + pd.Timedelta(days=diff)\r\n            \r\n            if within_period:\r\n                if res > self.end_time:\r\n                    res = pd.NaT\r\n            return res\r\n        \r\n        if n < 0:\r\n            diff = weekday - self.end_time.weekday()\r\n            diff -= 7 if diff > 0 else 0\r\n            diff = diff + (n+1) * 7\r\n            \r\n            res = self.end_time.normalize() + pd.Timedelta(days=diff)\r\n            \r\n            if within_period:\r\n                if res < self.start_time:\r\n                    res = pd.NaT\r\n            return res\r\n```\r\n\r\nSome examples of use: \r\n```\r\n# third Wednesday\r\nPeriod_('2020-09', 'M').nth_weekday(n=2, weekday=2)\r\n\r\n# first Friday\r\nPeriod_('2020-09', 'M').nth_weekday(n=0, weekday=4)\r\n\r\n# last Monday\r\nPeriod_('2020-09', 'M').nth_weekday(n=-1, weekday=0)\r\n\r\n# sixth Tuesday --> returns NaT when within_period=True \r\nPeriod_('2020-09', 'M').nth_weekday(n=6, weekday=1)\r\n\r\n# sixth Tuesday --> returns a date in the next month if user explicitly \r\n# specifies within_period=False\r\nPeriod_('2020-09', 'M').nth_weekday(n=6, weekday=1, within_period=False)\r\n\r\n```\r\n\r\nSome details would need to be ironed out on how to handle frequencies less than one day (i.e. an Hour). The mock example has some protection because `within_period` defaults to `True`, so any op that goes to a different day (not the day the hour occurrs on), it will return `NaT`. \r\n\r\n```\r\n# Trying to shift from a smaller freq can return NaT\r\nPeriod_('2020-01-01 15:00', 'H').nth_weekday(n=0, weekday=3)\r\n\r\nPeriod_('2020-01-01 15:00', 'H').nth_weekday(n=1, weekday=2)\r\n```\r\n\r\nThe mock still needs handling of corner cases: if you ask for the `n=0` instance of the day that the hour occurs on, you get the start_time back (rather than `NaT`). Will need to put in some thought for handling these corner cases. \r\n\r\n```\r\n# This hour period occurs on a Wed. If I ask for the n=0 Wed of that Period, it gives me the start_time back. \r\nPeriod_('2020-01-01 15:00', 'H').nth_weekday(n=0, weekday=2)\r\n```\r\n\r\nI'm happy to work on this but wanted to raise an issue for discussion in case there already exists such a function somewhere (couldn't find one in the pandas docs) or if it has already been proposed and decided against. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35463", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35463/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35463/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35463/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35463", "id": 667943015, "node_id": "MDU6SXNzdWU2Njc5NDMwMTU=", "number": 35463, "title": "Question/bug: How to get rid of \"0 days\" in timedelta64[s]", "user": {"login": "pllim", "id": 2090236, "node_id": "MDQ6VXNlcjIwOTAyMzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/2090236?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pllim", "html_url": "https://github.com/pllim", "followers_url": "https://api.github.com/users/pllim/followers", "following_url": "https://api.github.com/users/pllim/following{/other_user}", "gists_url": "https://api.github.com/users/pllim/gists{/gist_id}", "starred_url": "https://api.github.com/users/pllim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pllim/subscriptions", "organizations_url": "https://api.github.com/users/pllim/orgs", "repos_url": "https://api.github.com/users/pllim/repos", "events_url": "https://api.github.com/users/pllim/events{/privacy}", "received_events_url": "https://api.github.com/users/pllim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 13101118, "node_id": "MDU6TGFiZWwxMzEwMTExOA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Output-Formatting", "name": "Output-Formatting", "color": "ededed", "default": false, "description": "__repr__ of pandas objects, to_string"}, {"id": 49597148, "node_id": "MDU6TGFiZWw0OTU5NzE0OA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Timedelta", "name": "Timedelta", "color": "5319e7", "default": false, "description": "Timedelta data type"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-07-29T15:40:00Z", "updated_at": "2020-07-30T16:22:12Z", "closed_at": "2020-07-30T16:19:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas. -- I can't tell if this is a feature or a bug.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\n>>> import pandas as pd\r\n>>> import numpy as np\r\n>>> dt = pd.Series(np.array([1, 300], dtype='timedelta64[s]')) \r\n>>> df = pd.DataFrame({'dt': dt})\r\n```\r\n```python\r\n>>> pd.__version__\r\n'1.0.5'\r\n>>> df\r\n        dt\r\n0 00:00:01\r\n1 00:05:00\r\n```\r\n```python\r\n>>> pd.__version__\r\n'1.1.0'\r\n>>> df\r\n               dt\r\n0 0 days 00:00:01\r\n1 0 days 00:05:00\r\n```\r\n\r\n#### Problem description\r\n\r\n\"0 days\" started to appear when DataFrame contains `timedelta64[s]`.\r\n\r\n#### Expected Output\r\n\r\nSee \"Code Sample\" for `pandas` 1.0.5.\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\nSee \"Code Sample\" for `pandas` 1.1.0.\r\n\r\n#### Further readings\r\n\r\nastropy/astropy#10608 and astropy/astropy#10609", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35462", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35462/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35462/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35462/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35462", "id": 667930415, "node_id": "MDU6SXNzdWU2Njc5MzA0MTU=", "number": 35462, "title": "BUG: dataframe.apply() loops on first row when applied method attempts to modify the row", "user": {"login": "nicolasrozain", "id": 16897168, "node_id": "MDQ6VXNlcjE2ODk3MTY4", "avatar_url": "https://avatars2.githubusercontent.com/u/16897168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nicolasrozain", "html_url": "https://github.com/nicolasrozain", "followers_url": "https://api.github.com/users/nicolasrozain/followers", "following_url": "https://api.github.com/users/nicolasrozain/following{/other_user}", "gists_url": "https://api.github.com/users/nicolasrozain/gists{/gist_id}", "starred_url": "https://api.github.com/users/nicolasrozain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nicolasrozain/subscriptions", "organizations_url": "https://api.github.com/users/nicolasrozain/orgs", "repos_url": "https://api.github.com/users/nicolasrozain/repos", "events_url": "https://api.github.com/users/nicolasrozain/events{/privacy}", "received_events_url": "https://api.github.com/users/nicolasrozain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 697792067, "node_id": "MDU6TGFiZWw2OTc3OTIwNjc=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Apply", "name": "Apply", "color": "fbca04", "default": false, "description": "Apply, Aggregate, Transform"}, {"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 5, "created_at": "2020-07-29T15:21:58Z", "updated_at": "2020-08-11T00:01:58Z", "closed_at": "2020-08-11T00:01:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "With pandas 1.1.0 on Python 3.6.8:\r\n\r\n```\r\n>>> import pandas as pd\r\n>>> df = pd.DataFrame({'a': list(range(0,100)), 'b': list(range(100,200))})\r\n>>> def func(row):\r\n...     row.loc['a'] += 1\r\n...     return row\r\n... \r\n>>> df\r\n     a    b\r\n0    0  100\r\n1    1  101\r\n2    2  102\r\n3    3  103\r\n4    4  104\r\n..  ..  ...\r\n95  95  195\r\n96  96  196\r\n97  97  197\r\n98  98  198\r\n99  99  199\r\n[100 rows x 2 columns]\r\n>>> df.apply(func, axis=1)\r\n      a    b\r\n0   100  100\r\n1   100  100\r\n2   100  100\r\n3   100  100\r\n4   100  100\r\n..  ...  ...\r\n95  100  100\r\n96  100  100\r\n97  100  100\r\n98  100  100\r\n99  100  100\r\n[100 rows x 2 columns]\r\n>>> df\r\n      a    b\r\n0   100  100\r\n1     1  101\r\n2     2  102\r\n3     3  103\r\n4     4  104\r\n..  ...  ...\r\n95   95  195\r\n96   96  196\r\n97   97  197\r\n98   98  198\r\n99   99  199\r\n[100 rows x 2 columns]\r\n>>> pd.show_versions()\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.6.8.final.0\r\npython-bits      : 64\r\nOS               : Windows\r\nOS-release       : 10\r\nVersion          : 10.0.17763\r\nmachine          : AMD64\r\nprocessor        : Intel64 Family 6 Model 142 Stepping 10, GenuineIntel\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : None.None\r\npandas           : 1.1.0\r\nnumpy            : 1.18.2\r\npytz             : 2019.3\r\ndateutil         : 2.8.1\r\npip              : 20.0.2\r\nsetuptools       : 42.0.2\r\nCython           : None\r\npytest           : 5.4.1\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : 4.5.0\r\nhtml5lib         : 1.0.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : 1.3.2\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.2.1\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 2.5.14\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.3.3\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nnumba            : None\r\n```\r\n\r\nWith pandas 1.0.5:\r\n```\r\n>>> import pandas as pd\r\n>>> df = pd.DataFrame({'a': list(range(0,100)), 'b': list(range(100,200))})\r\n>>> def func(row):\r\n...     row.loc['a'] += 1\r\n...     return row\r\n... \r\n>>> df\r\n     a    b\r\n0    0  100\r\n1    1  101\r\n2    2  102\r\n3    3  103\r\n4    4  104\r\n..  ..  ...\r\n95  95  195\r\n96  96  196\r\n97  97  197\r\n98  98  198\r\n99  99  199\r\n[100 rows x 2 columns]\r\n>>> df.apply(func, axis=1)\r\n      a    b\r\n0     1  100\r\n1     2  101\r\n2     3  102\r\n3     4  103\r\n4     5  104\r\n..  ...  ...\r\n95   96  195\r\n96   97  196\r\n97   98  197\r\n98   99  198\r\n99  100  199\r\n[100 rows x 2 columns]\r\n>>> df\r\n      a    b\r\n0     1  100\r\n1     2  101\r\n2     3  102\r\n3     4  103\r\n4     5  104\r\n..  ...  ...\r\n95   96  195\r\n96   97  196\r\n97   98  197\r\n98   99  198\r\n99  100  199\r\n[100 rows x 2 columns]\r\n>>> pd.show_versions()\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.6.8.final.0\r\npython-bits      : 64\r\nOS               : Windows\r\nOS-release       : 10\r\nmachine          : AMD64\r\nprocessor        : Intel64 Family 6 Model 142 Stepping 10, GenuineIntel\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : None.None\r\npandas           : 1.0.5\r\nnumpy            : 1.18.2\r\npytz             : 2019.3\r\ndateutil         : 2.8.1\r\npip              : 20.0.2\r\nsetuptools       : 42.0.2\r\nCython           : None\r\npytest           : 5.4.1\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : 4.5.0\r\nhtml5lib         : 1.0.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : 1.3.2\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : 4.5.0\r\nmatplotlib       : 3.2.1\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 2.5.14\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : 5.4.1\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.3.3\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nxlsxwriter       : None\r\nnumba            : None\r\n```\r\n\r\nI expected the behavior of 1.0.5 in 1.1.0, did I misunderstood the apply method?\r\nThank you for your help.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35457", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35457/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35457/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35457/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35457", "id": 667834512, "node_id": "MDU6SXNzdWU2Njc4MzQ1MTI=", "number": 35457, "title": "BUG: Empty dataframe with `.astype` raises Exception", "user": {"login": "eliasmistler", "id": 26224290, "node_id": "MDQ6VXNlcjI2MjI0Mjkw", "avatar_url": "https://avatars0.githubusercontent.com/u/26224290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eliasmistler", "html_url": "https://github.com/eliasmistler", "followers_url": "https://api.github.com/users/eliasmistler/followers", "following_url": "https://api.github.com/users/eliasmistler/following{/other_user}", "gists_url": "https://api.github.com/users/eliasmistler/gists{/gist_id}", "starred_url": "https://api.github.com/users/eliasmistler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eliasmistler/subscriptions", "organizations_url": "https://api.github.com/users/eliasmistler/orgs", "repos_url": "https://api.github.com/users/eliasmistler/repos", "events_url": "https://api.github.com/users/eliasmistler/events{/privacy}", "received_events_url": "https://api.github.com/users/eliasmistler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}, {"id": 13098779, "node_id": "MDU6TGFiZWwxMzA5ODc3OQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Reshaping", "name": "Reshaping", "color": "02d7e1", "default": false, "description": "Concat, Merge/Join, Stack/Unstack"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2020-07-29T13:12:49Z", "updated_at": "2020-07-29T13:54:37Z", "closed_at": "2020-07-29T13:53:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [X] I have checked that this issue has not already been reported.\r\n\r\n- [X] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\n\r\npd.DataFrame([]).astype({})\r\n```\r\n\r\n#### Problem description\r\n\r\nI've got some generic code handling a large number of DataFrames, and among other things, forcing the data types of certain columns. Some of these DataFrames can be empty - however, that should not stop the calculations.\r\n\r\nMy expectation would be that I can run any operation that is conceptually a `nop` on a DataFrame without causing an issue. In this case, I can run `.astype({})` on any DataFrame (empty or not) that has columns - so far, so good. However, on a DataFrame with 0 columns, the function fails with a `ValueError`: \"No objects to concatenate\"\r\n\r\n#### Expected Output\r\n\r\nEmpty DataFrame\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.7.4.final.0\r\npython-bits      : 64\r\nOS               : Darwin\r\nOS-release       : 19.5.0\r\nmachine          : x86_64\r\nprocessor        : i386\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : en_GB.UTF-8\r\npandas           : 1.0.4\r\nnumpy            : 1.18.5\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 19.3.1\r\nsetuptools       : 42.0.2\r\nCython           : None\r\npytest           : 5.4.3\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : 7.15.0\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : 5.4.3\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : None\r\nsqlalchemy       : 1.3.17\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nxlsxwriter       : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35455", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35455/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35455/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35455/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35455", "id": 667809198, "node_id": "MDU6SXNzdWU2Njc4MDkxOTg=", "number": 35455, "title": "REGR: DataFrame.to_numpy(dtype=str) raises RuntimeError in pandas 1.1.0", "user": {"login": "aciba90", "id": 22963691, "node_id": "MDQ6VXNlcjIyOTYzNjkx", "avatar_url": "https://avatars3.githubusercontent.com/u/22963691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aciba90", "html_url": "https://github.com/aciba90", "followers_url": "https://api.github.com/users/aciba90/followers", "following_url": "https://api.github.com/users/aciba90/following{/other_user}", "gists_url": "https://api.github.com/users/aciba90/gists{/gist_id}", "starred_url": "https://api.github.com/users/aciba90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aciba90/subscriptions", "organizations_url": "https://api.github.com/users/aciba90/orgs", "repos_url": "https://api.github.com/users/aciba90/repos", "events_url": "https://api.github.com/users/aciba90/events{/privacy}", "received_events_url": "https://api.github.com/users/aciba90/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 31404521, "node_id": "MDU6TGFiZWwzMTQwNDUyMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Dtypes", "name": "Dtypes", "color": "e102d8", "default": false, "description": null}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 3, "created_at": "2020-07-29T12:33:12Z", "updated_at": "2020-08-08T09:43:11Z", "closed_at": "2020-08-08T09:43:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x ] I have checked that this issue has not already been reported.\r\n\r\n- [x ] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\n\r\ndf = pd.DataFrame(data=[[pd.Timestamp('2011-07-03 00:00:00'), 6628480.0]])\r\nprint(df.to_numpy(dtype=str))\r\n```\r\n\r\n#### Problem description\r\n\r\nI try to convert the DataFrame to a Numpy array with dtype equal to str and I got the next error.\r\n\r\n```python-traceback\r\nTraceback (most recent call last):\r\n  File \"/main.py\", line 4, in <module>\r\n    df.to_numpy(dtype=str)\r\n  File \"/venv/lib/python3.7/site-packages/pandas/core/frame.py\", line 1371, in to_numpy\r\n    transpose=self._AXIS_REVERSED, dtype=dtype, copy=copy, na_value=na_value\r\n  File \"/venv/lib/python3.7/site-packages/pandas/core/internals/managers.py\", line 826, in as_array\r\n    arr = self._interleave(dtype=dtype, na_value=na_value)\r\n  File \"/venv/lib/python3.7/site-packages/pandas/core/internals/managers.py\", line 864, in _interleave\r\n    result[rl.indexer] = arr\r\nRuntimeError: The string provided for NumPy ISO datetime formatting was too short, with length 1\r\n```\r\n\r\n#### Expected Output\r\n```python\r\n[['2011-07-03 00:00:00' '6628480.0']]\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.7.6.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 4.19.104-microsoft-standard\r\nVersion          : #1 SMP Wed Feb 19 06:37:35 UTC 2020\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : C.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 19.2.3\r\nsetuptools       : 41.2.0\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfsspec           : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : None\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35448", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35448/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35448/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35448/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35448", "id": 667658200, "node_id": "MDU6SXNzdWU2Njc2NTgyMDA=", "number": 35448, "title": "BUG: unique() casts  type `pd.Timestamp` to `numpy.datetime64`", "user": {"login": "SebastianoX", "id": 67270366, "node_id": "MDQ6VXNlcjY3MjcwMzY2", "avatar_url": "https://avatars3.githubusercontent.com/u/67270366?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SebastianoX", "html_url": "https://github.com/SebastianoX", "followers_url": "https://api.github.com/users/SebastianoX/followers", "following_url": "https://api.github.com/users/SebastianoX/following{/other_user}", "gists_url": "https://api.github.com/users/SebastianoX/gists{/gist_id}", "starred_url": "https://api.github.com/users/SebastianoX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SebastianoX/subscriptions", "organizations_url": "https://api.github.com/users/SebastianoX/orgs", "repos_url": "https://api.github.com/users/SebastianoX/repos", "events_url": "https://api.github.com/users/SebastianoX/events{/privacy}", "received_events_url": "https://api.github.com/users/SebastianoX/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 35818298, "node_id": "MDU6TGFiZWwzNTgxODI5OA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/API%20Design", "name": "API Design", "color": "AD7FA8", "default": false, "description": null}, {"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 10, "created_at": "2020-07-29T08:35:47Z", "updated_at": "2020-07-29T09:40:33Z", "closed_at": "2020-07-29T09:04:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Code Sample:\r\n\r\n```python\r\nimport pandas as pd\r\n\r\n\r\ndf = pd.DataFrame({\"date\": [\"2019-02-10\", \"2019-02-10\", \"2019-02-11\"]})\r\ndf[\"date\"] = pd.to_datetime(df[\"date\"])\r\n\r\nprint(\"Type before the for cycle:\")\r\nprint(type(df[\"date\"][0]))  # pandas._libs.tslibs.timestamps.Timestamp\r\n\r\nfor day in df[\"date\"].unique(): \r\n    print(\"Type in the loop:\")\r\n    print(type(day))  # here is a numpy.datetime64\r\n```\r\n\r\nwhich returns:\r\n\r\n```\r\nType before the for cycle:\r\n<class 'pandas._libs.tslibs.timestamps.Timestamp'>\r\nType in the loop:\r\n<class 'numpy.datetime64'>\r\nType in the loop:\r\n<class 'numpy.datetime64'>\r\n```\r\n\r\n#### Problem description\r\n\r\nThe function `unique()` should not cast the data type.\r\n\r\n#### Expected Output\r\n\r\ntypes of `df_target[\"date\"].unique()` should be the same as in ` set(df_target[\"date\"].to_list())`. E.g.\r\n\r\n\r\n```python\r\nimport pandas as pd\r\n\r\n\r\ndf = pd.DataFrame({\"date\": [\"2019-02-10\", \"2019-02-10\", \"2019-02-11\"]})\r\ndf[\"date\"] = pd.to_datetime(df[\"date\"])\r\n\r\nprint(\"Type before the for cycle:\")\r\nprint(type(df[\"date\"][0])) \r\n\r\nfor day in set(df[\"date\"].to_list()): \r\n    print(\"Type in the loop:\")\r\n    print(type(day))\r\n```\r\n\r\nReturning:\r\n```\r\nType before the for cycle:\r\n<class 'pandas._libs.tslibs.timestamps.Timestamp'>\r\nType in the loop:\r\n<class 'pandas._libs.tslibs.timestamps.Timestamp'>\r\nType in the loop:\r\n<class 'pandas._libs.tslibs.timestamps.Timestamp'>\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n```\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.7.7.final.0\r\npython-bits      : 64\r\nOS               : Darwin\r\nOS-release       : 19.5.0\r\nmachine          : x86_64\r\nprocessor        : i386\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_GB.UTF-8\r\nLOCALE           : en_GB.UTF-8\r\n\r\npandas           : 1.0.5\r\nnumpy            : 1.19.0\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 47.3.1\r\nCython           : None\r\npytest           : 5.4.1\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : None\r\nmatplotlib       : 3.2.2\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : 5.4.1\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.2\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nxlsxwriter       : None\r\nnumba            : None\r\n```\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35446", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35446/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35446/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35446/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35446", "id": 667576892, "node_id": "MDU6SXNzdWU2Njc1NzY4OTI=", "number": 35446, "title": "BUG: pd.testing.assert_frame_equal(..., check_exact=True) raises assertion error if any columns are not numeric", "user": {"login": "ivirshup", "id": 8238804, "node_id": "MDQ6VXNlcjgyMzg4MDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/8238804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivirshup", "html_url": "https://github.com/ivirshup", "followers_url": "https://api.github.com/users/ivirshup/followers", "following_url": "https://api.github.com/users/ivirshup/following{/other_user}", "gists_url": "https://api.github.com/users/ivirshup/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivirshup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivirshup/subscriptions", "organizations_url": "https://api.github.com/users/ivirshup/orgs", "repos_url": "https://api.github.com/users/ivirshup/repos", "events_url": "https://api.github.com/users/ivirshup/events{/privacy}", "received_events_url": "https://api.github.com/users/ivirshup/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}, {"id": 127685, "node_id": "MDU6TGFiZWwxMjc2ODU=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Testing", "name": "Testing", "color": "C4A000", "default": false, "description": "Custom testing functions or related to the test suite"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 6, "created_at": "2020-07-29T06:08:13Z", "updated_at": "2020-08-10T13:30:13Z", "closed_at": "2020-08-10T13:30:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\na = pd.DataFrame({\"a\": list(\"bc\"), \"b\": [1, 2]})\r\npd.testing.assert_frame_equal(a, a.copy(), check_exact=True)\r\n```\r\n\r\n```pytb\r\n   ...: a = pd.DataFrame({\"a\": list(\"bc\"), \"b\": [1, 2]}) \r\n   ...: pd.testing.assert_frame_equal(a, a.copy(), check_exact=True)                                                               \r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-2-bac78c400991> in <module>\r\n      1 import pandas as pd\r\n      2 a = pd.DataFrame({\"a\": list(\"bc\"), \"b\": [1, 2]})\r\n----> 3 pd.testing.assert_frame_equal(a, a.copy(), check_exact=True)\r\n\r\n    [... skipping hidden 2 frame]\r\n\r\nAssertionError: check_exact may only be used with numeric Series\r\n```\r\n\r\n#### Problem description\r\n\r\nPreviously, the example above would not have thrown an error. It makes it a less useful function if I have to start subdividing dataframes by types just to check that they are equal. Presumably check_exact should either have no effect if called on a non-numeric `Series` or `assert_frame_equal` should not pass `check_exact=True` if the series to be compared isn't numeric.\r\n\r\nIt looks like this was introduced recently, in https://github.com/pandas-dev/pandas/commit/08c65973643b73e877133d1a7391de7092f4b267\r\n\r\n#### Expected Output\r\n\r\nI expected it to work like it did previously, and not throw an error. [Here's an example of test failures this is causing](https://travis-ci.org/github/theislab/anndata/jobs/712782637).\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\n```\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : d9fff2792bf16178d4e450fe7384244e50635733\r\npython           : 3.8.5.final.0\r\npython-bits      : 64\r\nOS               : Darwin\r\nOS-release       : 19.5.0\r\nVersion          : Darwin Kernel Version 19.5.0: Tue May 26 20:41:44 PDT 2020; root:xnu-6153.121.2~2/RELEASE_X86_64\r\nmachine          : x86_64\r\nprocessor        : i386\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.1.0\r\nnumpy            : 1.19.0\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0\r\nCython           : None\r\npytest           : 5.4.3\r\nhypothesis       : None\r\nsphinx           : 3.1.2\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfsspec           : 0.7.4\r\nfastparquet      : None\r\ngcsfs            : None\r\nmatplotlib       : 3.3.0\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : 0.17.1\r\npytables         : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.1\r\nsqlalchemy       : 1.3.18\r\ntables           : 3.6.1\r\ntabulate         : None\r\nxarray           : 0.16.0\r\nxlrd             : 1.2.0\r\nxlwt             : None\r\nnumba            : 0.50.1\r\n```\r\n\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35442", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35442/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35442/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35442/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35442", "id": 667462327, "node_id": "MDU6SXNzdWU2Njc0NjIzMjc=", "number": 35442, "title": "BUG: 'something' in pd.Series does not return the True when the object is contained.", "user": {"login": "soerendip", "id": 3391614, "node_id": "MDQ6VXNlcjMzOTE2MTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/3391614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/soerendip", "html_url": "https://github.com/soerendip", "followers_url": "https://api.github.com/users/soerendip/followers", "following_url": "https://api.github.com/users/soerendip/following{/other_user}", "gists_url": "https://api.github.com/users/soerendip/gists{/gist_id}", "starred_url": "https://api.github.com/users/soerendip/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/soerendip/subscriptions", "organizations_url": "https://api.github.com/users/soerendip/orgs", "repos_url": "https://api.github.com/users/soerendip/repos", "events_url": "https://api.github.com/users/soerendip/events{/privacy}", "received_events_url": "https://api.github.com/users/soerendip/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-29T00:25:27Z", "updated_at": "2020-07-29T00:33:01Z", "closed_at": "2020-07-29T00:32:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```python\r\nimport pandas as pd\r\ndf = pd.DataFrame(['Test', '123'])\r\n'test' in df[0]\r\n> False\r\n```\r\nI am not sure if this made on purpose, but I think this should return True. False seems a bit strange. Is there a good reason for this? ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35439", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35439/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35439/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35439/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35439", "id": 667401325, "node_id": "MDU6SXNzdWU2Njc0MDEzMjU=", "number": 35439, "title": "BUG: output of df.to_string depends on whether columns is a CategoricalIndex or not", "user": {"login": "topper-123", "id": 26364415, "node_id": "MDQ6VXNlcjI2MzY0NDE1", "avatar_url": "https://avatars1.githubusercontent.com/u/26364415?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topper-123", "html_url": "https://github.com/topper-123", "followers_url": "https://api.github.com/users/topper-123/followers", "following_url": "https://api.github.com/users/topper-123/following{/other_user}", "gists_url": "https://api.github.com/users/topper-123/gists{/gist_id}", "starred_url": "https://api.github.com/users/topper-123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topper-123/subscriptions", "organizations_url": "https://api.github.com/users/topper-123/orgs", "repos_url": "https://api.github.com/users/topper-123/repos", "events_url": "https://api.github.com/users/topper-123/events{/privacy}", "received_events_url": "https://api.github.com/users/topper-123/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1218227310, "node_id": "MDU6TGFiZWwxMjE4MjI3MzEw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Index", "name": "Index", "color": "e99695", "default": false, "description": "Related to the Index class or subclasses"}, {"id": 13101118, "node_id": "MDU6TGFiZWwxMzEwMTExOA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Output-Formatting", "name": "Output-Formatting", "color": "ededed", "default": false, "description": "__repr__ of pandas objects, to_string"}, {"id": 32815646, "node_id": "MDU6TGFiZWwzMjgxNTY0Ng==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Regression", "name": "Regression", "color": "e11d21", "default": false, "description": "Functionality that used to work in a prior pandas version"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75", "html_url": "https://github.com/pandas-dev/pandas/milestone/75", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/75/labels", "id": 5640672, "node_id": "MDk6TWlsZXN0b25lNTY0MDY3Mg==", "number": 75, "title": "1.1.1", "description": "on-merge: backport to 1.1.x", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 109, "state": "closed", "created_at": "2020-07-10T13:54:44Z", "updated_at": "2020-08-21T08:34:54Z", "due_on": "2020-08-22T07:00:00Z", "closed_at": "2020-08-21T08:34:54Z"}, "comments": 2, "created_at": "2020-07-28T21:44:34Z", "updated_at": "2020-08-03T23:48:55Z", "closed_at": "2020-08-03T23:48:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The output of ``df.to_string`` is different if the columns is a ``CategoricalIndex`` rather than a normal ``Index``:\r\n\r\n```python\r\n>>> data = [[4, 2], [3, 2], [4, 3]]\r\n>>> cols = [\"aaaaaaaaa\", \"b\"]\r\n>>>  pd.DataFrame(data, columns=cols)\r\n   aaaaaaaaa  b\r\n0          4  2\r\n1          3  2\r\n2          4  3\r\n>>> pd.DataFrame(data, columns=pd.CategoricalIndex(cols))\r\n   aaaaaaaaa  b\r\n0          4          2\r\n1          3          2\r\n2          4          3\r\n```\r\n\r\nWe can see that the width of the \"b\" column depends on the width of the \"a\" column, if the columns are a ``CategoricalIndex``.\r\n\r\nThese two examples should return the same repr.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35438", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35438/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35438/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35438/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35438", "id": 667330187, "node_id": "MDU6SXNzdWU2NjczMzAxODc=", "number": 35438, "title": "DOC: Can't find mention of DataFrame accepting namedtuples as input", "user": {"login": "sjvrijn", "id": 8833517, "node_id": "MDQ6VXNlcjg4MzM1MTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/8833517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjvrijn", "html_url": "https://github.com/sjvrijn", "followers_url": "https://api.github.com/users/sjvrijn/followers", "following_url": "https://api.github.com/users/sjvrijn/following{/other_user}", "gists_url": "https://api.github.com/users/sjvrijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjvrijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjvrijn/subscriptions", "organizations_url": "https://api.github.com/users/sjvrijn/orgs", "repos_url": "https://api.github.com/users/sjvrijn/repos", "events_url": "https://api.github.com/users/sjvrijn/events{/privacy}", "received_events_url": "https://api.github.com/users/sjvrijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 134699, "node_id": "MDU6TGFiZWwxMzQ2OTk=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Docs", "name": "Docs", "color": "3465A4", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 1, "created_at": "2020-07-28T19:54:08Z", "updated_at": "2020-08-05T02:27:23Z", "closed_at": "2020-08-05T02:27:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#### Location of the documentation\r\n\r\nUser guide ['Intro to data structures'](https://pandas.pydata.org/docs/dev/user_guide/dsintro.html#dataframe)\r\n(alternatively [`DataFrame` API docs](https://pandas.pydata.org/docs/dev/reference/api/pandas.DataFrame.html?highlight=dataframe#pandas.DataFrame))\r\n\r\n#### Documentation problem\r\n\r\nI recently only found out through a [StackOverflow answer](https://stackoverflow.com/a/51173794/) that the `DataFrame` constructor can take a list of namedtuples and automatically infers column names from it. Until then I had only found the [`DataFrame.from_records`](https://pandas.pydata.org/docs/dev/reference/api/pandas.DataFrame.from_records.html#pandas.DataFrame.from_records) constructor, which manually requires specifying `columns=Namedtuple._fields`.\r\n\r\nAfter searching the documentation for [namedtuple](https://pandas.pydata.org/docs/dev/search.html?q=namedtuple), I haven't been able to find an explicit mention of constructors accepting namedtuples, while there is apparently explicit code in the constructor to deal with them nicely. Currently it only finds mentions where internal functions return rows as namedtuples.\r\n\r\nIn contrast, searching for e.g. ['dataclass'](https://pandas.pydata.org/docs/dev/search.html?q=dataclass) finds [an explicit paragraph](https://pandas.pydata.org/docs/dev/user_guide/dsintro.html?highlight=dataclass#from-a-list-of-dataclasses) listing the option.\r\n\r\n#### Suggested fix for documentation\r\n\r\nI would propose adding an explicit mention and/or example somewhere that these kinds of inputs are accepted/encouraged, such that they can be easily found when searching for the 'namedtuple' keyword.\r\n\r\nI can write a similar paragraph as for dataclasses in the intro to data structures, if that is indeed the right place for this.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35433", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35433/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35433/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35433/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35433", "id": 666853042, "node_id": "MDU6SXNzdWU2NjY4NTMwNDI=", "number": 35433, "title": "BUG: A change between Python version 3.6.0 and 3.6.1 causes an apply lambda function with selective column processing to check every column", "user": {"login": "DeeeeLAN", "id": 12877032, "node_id": "MDQ6VXNlcjEyODc3MDMy", "avatar_url": "https://avatars0.githubusercontent.com/u/12877032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DeeeeLAN", "html_url": "https://github.com/DeeeeLAN", "followers_url": "https://api.github.com/users/DeeeeLAN/followers", "following_url": "https://api.github.com/users/DeeeeLAN/following{/other_user}", "gists_url": "https://api.github.com/users/DeeeeLAN/gists{/gist_id}", "starred_url": "https://api.github.com/users/DeeeeLAN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DeeeeLAN/subscriptions", "organizations_url": "https://api.github.com/users/DeeeeLAN/orgs", "repos_url": "https://api.github.com/users/DeeeeLAN/repos", "events_url": "https://api.github.com/users/DeeeeLAN/events{/privacy}", "received_events_url": "https://api.github.com/users/DeeeeLAN/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33", "html_url": "https://github.com/pandas-dev/pandas/milestone/33", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/33/labels", "id": 997544, "node_id": "MDk6TWlsZXN0b25lOTk3NTQ0", "number": 33, "title": "No action", "description": "A milestone for closed or open issues for which there is no action needed (eg not a bug, just a question / discussion, nothing to resolve, wontfix, etc).\r\n\r\n", "creator": {"login": "jorisvandenbossche", "id": 1020496, "node_id": "MDQ6VXNlcjEwMjA0OTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1020496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorisvandenbossche", "html_url": "https://github.com/jorisvandenbossche", "followers_url": "https://api.github.com/users/jorisvandenbossche/followers", "following_url": "https://api.github.com/users/jorisvandenbossche/following{/other_user}", "gists_url": "https://api.github.com/users/jorisvandenbossche/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorisvandenbossche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorisvandenbossche/subscriptions", "organizations_url": "https://api.github.com/users/jorisvandenbossche/orgs", "repos_url": "https://api.github.com/users/jorisvandenbossche/repos", "events_url": "https://api.github.com/users/jorisvandenbossche/events{/privacy}", "received_events_url": "https://api.github.com/users/jorisvandenbossche/received_events", "type": "User", "site_admin": false}, "open_issues": 8, "closed_issues": 2103, "state": "open", "created_at": "2015-02-26T19:29:05Z", "updated_at": "2020-08-18T13:26:51Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2020-07-28T07:59:50Z", "updated_at": "2020-07-28T10:43:26Z", "closed_at": "2020-07-28T10:29:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\n\r\ntest = pd.DataFrame([\r\n  [1, {'c': 1}],\r\n  [2, {'c': 2}],\r\n  [3, {'c': 3}],\r\n  [4, {'c': 4}],\r\n  [5, {'c': 5}]\r\n], columns=['A', 'B'])\r\n\r\nprint(test[['A', 'B']].apply(lambda x: x.nlargest(2, keep='all') if x.name in ['A'] else x.apply(lambda y: y['c']).nsmallest(2, keep='all')))\r\n```\r\n\r\n#### Problem description\r\n\r\nOn and after Python version 3.6.1, the above code crashes with the error: `TypeError: Cannot use method 'nlargest' with dtype object`. This happens because the `apply(lambda x` function is applying to both columns, even though the `if/else` check should only apply it to the specified column. I am not certain if this is a bug in Python itself, or if python changed and Pandas needs to update to match. I am starting here, though, because I believe the issue will be identified (and fixed if necessary) quicker. On previous versions, the following output is produced: \r\n\r\n#### Expected Output\r\n```\r\n>>> test[['A', 'B']].apply(lambda x: x.nlargest(2, keep='all') if x.name in ['A'] else x.apply(lambda y: y['c']).nsmallest(2, keep='all'))\r\n     A    B\r\n0  NaN  1.0\r\n1  NaN  2.0\r\n3  4.0  NaN\r\n4  5.0  NaN\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\n```\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.6.1.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 4.9.0-11-amd64\r\nmachine          : x86_64\r\nprocessor        : \r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : en_US.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.0.5\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : None\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : None\r\npandas_datareader: None\r\nbs4              : None\r\nbottleneck       : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : None\r\nmatplotlib       : None\r\nnumexpr          : None\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : None\r\nsqlalchemy       : None\r\ntables           : None\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : None\r\nxlwt             : None\r\nxlsxwriter       : None\r\nnumba            : None\r\n```\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35431", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35431/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35431/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35431/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35431", "id": 666750053, "node_id": "MDU6SXNzdWU2NjY3NTAwNTM=", "number": 35431, "title": "BUG: index_col in read_csv ignores dtype", "user": {"login": "metazoic", "id": 39023576, "node_id": "MDQ6VXNlcjM5MDIzNTc2", "avatar_url": "https://avatars3.githubusercontent.com/u/39023576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metazoic", "html_url": "https://github.com/metazoic", "followers_url": "https://api.github.com/users/metazoic/followers", "following_url": "https://api.github.com/users/metazoic/following{/other_user}", "gists_url": "https://api.github.com/users/metazoic/gists{/gist_id}", "starred_url": "https://api.github.com/users/metazoic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metazoic/subscriptions", "organizations_url": "https://api.github.com/users/metazoic/orgs", "repos_url": "https://api.github.com/users/metazoic/repos", "events_url": "https://api.github.com/users/metazoic/events{/privacy}", "received_events_url": "https://api.github.com/users/metazoic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}, {"id": 47229171, "node_id": "MDU6TGFiZWw0NzIyOTE3MQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/IO%20CSV", "name": "IO CSV", "color": "5319e7", "default": false, "description": null}, {"id": 1218227310, "node_id": "MDU6TGFiZWwxMjE4MjI3MzEw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Index", "name": "Index", "color": "e99695", "default": false, "description": "Related to the Index class or subclasses"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-07-28T04:28:49Z", "updated_at": "2020-07-29T03:38:10Z", "closed_at": "2020-07-28T10:09:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\nIf `index.csv` contains:\r\n```\r\nid,key\r\n00,11\r\n22,33\r\n```\r\nthen\r\n```python\r\ndf = pandas.read_csv('index.csv', dtype=str, index_col='id')\r\ndf.index.dtype\r\n```\r\nresults in\r\n```\r\ndtype('int64')\r\n```\r\n\r\n#### Problem description\r\n\r\nThis does not result in an index of strings.\r\n\r\n#### Expected Output\r\n\r\nBy contrast,\r\n```python\r\ndf = pandas.read_csv('index.csv', dtype=str)\r\ndf.set_index('id', inplace=True)\r\ndf.index.dtype\r\n```\r\nresults in\r\n```\r\ndtype('O')\r\n```\r\nas intended.\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\n```\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.7.7.final.0\r\npython-bits      : 64\r\nOS               : Darwin\r\nOS-release       : 18.7.0\r\nmachine          : x86_64\r\nprocessor        : i386\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : None.UTF-8\r\n \r\npandas           : 1.0.5\r\nnumpy            : 1.18.5\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0.post20200714\r\nCython           : 0.29.21\r\npytest           : 5.4.3\r\nhypothesis       : None\r\nsphinx           : 3.1.2\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.2.9\r\nlxml.etree       : 4.5.2\r\nhtml5lib         : 1.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : 1.3.2\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : 4.5.2\r\nmatplotlib       : 3.2.2\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 3.0.4\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : 5.4.3\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : 1.3.18\r\ntables           : 3.4.4\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nxlsxwriter       : 1.2.9\r\nnumba            : 0.50.1\r\n```\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35430", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35430/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35430/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35430/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35430", "id": 666743357, "node_id": "MDU6SXNzdWU2NjY3NDMzNTc=", "number": 35430, "title": "BUG: parse_dates in read_csv fails silently", "user": {"login": "metazoic", "id": 39023576, "node_id": "MDQ6VXNlcjM5MDIzNTc2", "avatar_url": "https://avatars3.githubusercontent.com/u/39023576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metazoic", "html_url": "https://github.com/metazoic", "followers_url": "https://api.github.com/users/metazoic/followers", "following_url": "https://api.github.com/users/metazoic/following{/other_user}", "gists_url": "https://api.github.com/users/metazoic/gists{/gist_id}", "starred_url": "https://api.github.com/users/metazoic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metazoic/subscriptions", "organizations_url": "https://api.github.com/users/metazoic/orgs", "repos_url": "https://api.github.com/users/metazoic/repos", "events_url": "https://api.github.com/users/metazoic/events{/privacy}", "received_events_url": "https://api.github.com/users/metazoic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 34444536, "node_id": "MDU6TGFiZWwzNDQ0NDUzNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Usage%20Question", "name": "Usage Question", "color": "0052cc", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-28T04:16:43Z", "updated_at": "2020-07-29T09:43:57Z", "closed_at": "2020-07-28T08:43:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\nIf `timestamp.csv` contains the following:\r\n```\r\ntimestamp\r\n11:22:33.44\r\n11:22:33:44\r\n```\r\nthen\r\n```python\r\ndf = pandas.read_csv('timestamp.csv', parse_dates=['timestamp'])\r\ndf.timestamp.dtype\r\n```\r\nresults in\r\n```\r\ndtype('O')\r\n```\r\nbecause of the malformed timestamp.\r\n\r\n#### Problem description\r\n\r\nThis is a problem because the silent fail does not alert to the malformed timestamp.\r\n\r\n#### Expected Output\r\n\r\nBy contrast,\r\n```python\r\npandas.to_datetime(df.timestamp)\r\n```\r\nresults in an explicit error\r\n```python\r\nParserError: Unknown string format: 11:22:33:44\r\n```\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\n```\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.7.7.final.0\r\npython-bits      : 64\r\nOS               : Darwin\r\nOS-release       : 18.7.0\r\nmachine          : x86_64\r\nprocessor        : i386\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : None\r\nLOCALE           : None.UTF-8\r\n \r\npandas           : 1.0.5\r\nnumpy            : 1.18.5\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.1.1\r\nsetuptools       : 49.2.0.post20200714\r\nCython           : 0.29.21\r\npytest           : 5.4.3\r\nhypothesis       : None\r\nsphinx           : 3.1.2\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : 1.2.9\r\nlxml.etree       : 4.5.2\r\nhtml5lib         : 1.1\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : 2.11.2\r\nIPython          : 7.16.1\r\npandas_datareader: None\r\nbs4              : 4.9.1\r\nbottleneck       : 1.3.2\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : 4.5.2\r\nmatplotlib       : 3.2.2\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : 3.0.4\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : 5.4.3\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.0\r\nsqlalchemy       : 1.3.18\r\ntables           : 3.4.4\r\ntabulate         : None\r\nxarray           : None\r\nxlrd             : 1.2.0\r\nxlwt             : 1.3.0\r\nxlsxwriter       : 1.2.9\r\nnumba            : 0.50.1\r\n```\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35426", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35426/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35426/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35426/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35426", "id": 666183589, "node_id": "MDU6SXNzdWU2NjYxODM1ODk=", "number": 35426, "title": "CI/COMPAT: read_stata failing in numpy dev pipeline", "user": {"login": "AlexKirko", "id": 23253999, "node_id": "MDQ6VXNlcjIzMjUzOTk5", "avatar_url": "https://avatars1.githubusercontent.com/u/23253999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlexKirko", "html_url": "https://github.com/AlexKirko", "followers_url": "https://api.github.com/users/AlexKirko/followers", "following_url": "https://api.github.com/users/AlexKirko/following{/other_user}", "gists_url": "https://api.github.com/users/AlexKirko/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlexKirko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlexKirko/subscriptions", "organizations_url": "https://api.github.com/users/AlexKirko/orgs", "repos_url": "https://api.github.com/users/AlexKirko/repos", "events_url": "https://api.github.com/users/AlexKirko/events{/privacy}", "received_events_url": "https://api.github.com/users/AlexKirko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 48070600, "node_id": "MDU6TGFiZWw0ODA3MDYwMA==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/CI", "name": "CI", "color": "a2bca7", "default": false, "description": "Related to Continuous Integration"}, {"id": 76865106, "node_id": "MDU6TGFiZWw3Njg2NTEwNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Compat", "name": "Compat", "color": "0052cc", "default": false, "description": "Related to pandas compatibility with other libraries"}, {"id": 104865385, "node_id": "MDU6TGFiZWwxMDQ4NjUzODU=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/IO%20Stata", "name": "IO Stata", "color": "5319e7", "default": false, "description": "Stata: read_stata, to_stata"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-07-27T10:34:35Z", "updated_at": "2020-08-01T09:34:51Z", "closed_at": "2020-08-01T09:34:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "- [X] I have checked that this issue has not already been reported.\r\n\r\n- [X] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [X] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\n#### Problem description\r\n\r\nLooks like a change in numpy broke our `read_stata` code, so now we have a bunch of `read_stata` test errors popping up during CI in the numpy_dev pipeline. Maybe this [Numpy PR](https://github.com/numpy/numpy/pull/16943) somehow broke things? I don't think any other PR merged during the last 24 hours could have possibly done so, although I might be missing something.\r\n\r\nError example:\r\n```\r\npandas/tests/io/test_stata.py:52: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\npandas/io/stata.py:1928: in read_stata\r\n    data = reader.read()\r\npandas/io/stata.py:1646: in read\r\n    cols_ = np.where(self.dtyplist)[0]\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nargs = ([<class 'numpy.int8'>, <class 'numpy.int16'>, <class 'numpy.int32'>, <class 'numpy.float32'>, <class 'numpy.float64'>, <class 'numpy.float32'>, ...],)\r\nkwargs = {}\r\nrelevant_args = ([<class 'numpy.int8'>, <class 'numpy.int16'>, <class 'numpy.int32'>, <class 'numpy.float32'>, <class 'numpy.float64'>, <class 'numpy.float32'>, ...], None, None)\r\n\r\n>   ???\r\nE   ValueError: invalid __array_struct__\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35423", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35423/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35423/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35423/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35423", "id": 666144923, "node_id": "MDU6SXNzdWU2NjYxNDQ5MjM=", "number": 35423, "title": "TST: Add test for `GroupBy.describe()` with duplicate columns", "user": {"login": "smithto1", "id": 3813175, "node_id": "MDQ6VXNlcjM4MTMxNzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3813175?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smithto1", "html_url": "https://github.com/smithto1", "followers_url": "https://api.github.com/users/smithto1/followers", "following_url": "https://api.github.com/users/smithto1/following{/other_user}", "gists_url": "https://api.github.com/users/smithto1/gists{/gist_id}", "starred_url": "https://api.github.com/users/smithto1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smithto1/subscriptions", "organizations_url": "https://api.github.com/users/smithto1/orgs", "repos_url": "https://api.github.com/users/smithto1/repos", "events_url": "https://api.github.com/users/smithto1/events{/privacy}", "received_events_url": "https://api.github.com/users/smithto1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 697792067, "node_id": "MDU6TGFiZWw2OTc3OTIwNjc=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Apply", "name": "Apply", "color": "fbca04", "default": false, "description": "Apply, Aggregate, Transform"}, {"id": 233160, "node_id": "MDU6TGFiZWwyMzMxNjA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Groupby", "name": "Groupby", "color": "729FCF", "default": false, "description": null}, {"id": 127685, "node_id": "MDU6TGFiZWwxMjc2ODU=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Testing", "name": "Testing", "color": "C4A000", "default": false, "description": "Custom testing functions or related to the test suite"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73", "html_url": "https://github.com/pandas-dev/pandas/milestone/73", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/milestones/73/labels", "id": 5479819, "node_id": "MDk6TWlsZXN0b25lNTQ3OTgxOQ==", "number": 73, "title": "1.2", "description": "", "creator": {"login": "jreback", "id": 953992, "node_id": "MDQ6VXNlcjk1Mzk5Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/953992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jreback", "html_url": "https://github.com/jreback", "followers_url": "https://api.github.com/users/jreback/followers", "following_url": "https://api.github.com/users/jreback/following{/other_user}", "gists_url": "https://api.github.com/users/jreback/gists{/gist_id}", "starred_url": "https://api.github.com/users/jreback/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jreback/subscriptions", "organizations_url": "https://api.github.com/users/jreback/orgs", "repos_url": "https://api.github.com/users/jreback/repos", "events_url": "https://api.github.com/users/jreback/events{/privacy}", "received_events_url": "https://api.github.com/users/jreback/received_events", "type": "User", "site_admin": false}, "open_issues": 49, "closed_issues": 133, "state": "open", "created_at": "2020-05-29T23:47:32Z", "updated_at": "2020-08-21T00:11:52Z", "due_on": "2020-11-29T08:00:00Z", "closed_at": null}, "comments": 0, "created_at": "2020-07-27T09:44:59Z", "updated_at": "2020-08-03T23:13:38Z", "closed_at": "2020-08-03T23:13:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "- [x] I have checked that this issue has not already been reported.\r\n\r\n- [x] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [x] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n---\r\n\r\nWhile working on #35314 I made a change that broke `GroupBy.apply` if you called it on a DataFrame with duplicate columns; however, this break as not caught by any test. Was just caught on inpsection: https://github.com/pandas-dev/pandas/pull/35314#discussion_r460000612\r\n\r\nThis issue is just to add a test for this case to ensure it works and doesn't break again in the future. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35422", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35422/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35422/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35422/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35422", "id": 666135725, "node_id": "MDU6SXNzdWU2NjYxMzU3MjU=", "number": 35422, "title": "Using loc[] or at[] to add rows doesn't work with an IntervalIndex doesn't work", "user": {"login": "konstantinmiller", "id": 2629945, "node_id": "MDQ6VXNlcjI2Mjk5NDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/2629945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/konstantinmiller", "html_url": "https://github.com/konstantinmiller", "followers_url": "https://api.github.com/users/konstantinmiller/followers", "following_url": "https://api.github.com/users/konstantinmiller/following{/other_user}", "gists_url": "https://api.github.com/users/konstantinmiller/gists{/gist_id}", "starred_url": "https://api.github.com/users/konstantinmiller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/konstantinmiller/subscriptions", "organizations_url": "https://api.github.com/users/konstantinmiller/orgs", "repos_url": "https://api.github.com/users/konstantinmiller/repos", "events_url": "https://api.github.com/users/konstantinmiller/events{/privacy}", "received_events_url": "https://api.github.com/users/konstantinmiller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 40153326, "node_id": "MDU6TGFiZWw0MDE1MzMyNg==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Duplicate", "name": "Duplicate", "color": "009800", "default": false, "description": "Duplicate issue or pull request"}, {"id": 2822098, "node_id": "MDU6TGFiZWwyODIyMDk4", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Indexing", "name": "Indexing", "color": "0b02e1", "default": false, "description": "Related to indexing on series/frames, not to indexes themselves"}, {"id": 150096370, "node_id": "MDU6TGFiZWwxNTAwOTYzNzA=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Interval", "name": "Interval", "color": "009800", "default": false, "description": "Interval data type"}, {"id": 307649777, "node_id": "MDU6TGFiZWwzMDc2NDk3Nzc=", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Info", "name": "Needs Info", "color": "207de5", "default": false, "description": "Clarification about behavior needed to assess issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-27T09:31:18Z", "updated_at": "2020-07-27T13:13:01Z", "closed_at": "2020-07-27T13:12:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that a data frame with an `IntervalIndex` won't let you use `loc[]` or `at[]` to add rows.\r\n\r\nI would expect the following to work:\r\n```\r\ndf = pd.DataFrame(index=pd.IntervalIndex(closed='left', dtype='interval[int64]',\r\n                                         data=[pd.Interval(0, 1, closed='left')]),\r\n                  data={'a': [42]})\r\ndf.at[pd.Interval(2, 3, closed='left'), 'a'] = 43\r\n```\r\n\r\nHowever, it throws a confusing error\r\n```\r\nAttributeError: 'pandas._libs.interval.IntervalTree' object has no attribute 'set_value'\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/pandas-dev/pandas/issues/35413", "repository_url": "https://api.github.com/repos/pandas-dev/pandas", "labels_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35413/labels{/name}", "comments_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35413/comments", "events_url": "https://api.github.com/repos/pandas-dev/pandas/issues/35413/events", "html_url": "https://github.com/pandas-dev/pandas/issues/35413", "id": 665666953, "node_id": "MDU6SXNzdWU2NjU2NjY5NTM=", "number": 35413, "title": "BUG: When plotting a pandas dataframe year is wrong", "user": {"login": "smeznaric", "id": 28095296, "node_id": "MDQ6VXNlcjI4MDk1Mjk2", "avatar_url": "https://avatars0.githubusercontent.com/u/28095296?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smeznaric", "html_url": "https://github.com/smeznaric", "followers_url": "https://api.github.com/users/smeznaric/followers", "following_url": "https://api.github.com/users/smeznaric/following{/other_user}", "gists_url": "https://api.github.com/users/smeznaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/smeznaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smeznaric/subscriptions", "organizations_url": "https://api.github.com/users/smeznaric/orgs", "repos_url": "https://api.github.com/users/smeznaric/repos", "events_url": "https://api.github.com/users/smeznaric/events{/privacy}", "received_events_url": "https://api.github.com/users/smeznaric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 76811, "node_id": "MDU6TGFiZWw3NjgxMQ==", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Bug", "name": "Bug", "color": "e10c02", "default": false, "description": null}, {"id": 1954720290, "node_id": "MDU6TGFiZWwxOTU0NzIwMjkw", "url": "https://api.github.com/repos/pandas-dev/pandas/labels/Needs%20Triage", "name": "Needs Triage", "color": "0052cc", "default": false, "description": "Issue that has not been reviewed by a pandas team member"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-07-25T21:55:56Z", "updated_at": "2020-08-05T13:02:39Z", "closed_at": "2020-07-29T13:10:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "- [ x] I have checked that this issue has not already been reported.\r\n\r\n- [x ] I have confirmed this bug exists on the latest version of pandas.\r\n\r\n- [ ] (optional) I have confirmed this bug exists on the master branch of pandas.\r\n\r\n\r\n---\r\n\r\n**Note**: Please read [this guide](https://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports) detailing how to provide the necessary information for us to reproduce your bug.\r\n\r\n#### Code Sample, a copy-pastable example\r\n\r\n```python\r\nimport pandas as pd\r\nimport matplotlib.pyplot as plt\r\n\r\n# Save the attached file somewhere and open it as follows\r\nfile_name = 'your_path'\r\ndf = pd.read_csv(file_name, index_col = 'date', parse_dates = True)\r\ndf.plot()\r\n\r\nplt.show()\r\n\r\n```\r\n\r\n#### Problem description\r\n\r\nThe year is displayed as in 3900s. See picture:\r\n\r\n![image](https://user-images.githubusercontent.com/28095296/88466980-e68d7500-cec9-11ea-9155-3400112e7c01.png)\r\n\r\nI have noticed a few things:\r\n\r\n- Generating random data and keeping the index the same does not resolve the issue\r\n- Trying to recreate the index from scratch but using the same date does not resolve the issue\r\n- Plotting using plotly backend resolves the issue\r\n- Doing df.to_period('D').plot() also seems to resolve the issue\r\n\r\n\r\n#### Expected Output\r\n\r\nYear should not be in 3900s.\r\n\r\n#### Output of ``pd.show_versions()``\r\n\r\n<details>\r\n\r\nINSTALLED VERSIONS\r\n------------------\r\ncommit           : None\r\npython           : 3.8.2.final.0\r\npython-bits      : 64\r\nOS               : Linux\r\nOS-release       : 4.19.104-microsoft-standard\r\nmachine          : x86_64\r\nprocessor        : x86_64\r\nbyteorder        : little\r\nLC_ALL           : None\r\nLANG             : C.UTF-8\r\nLOCALE           : en_US.UTF-8\r\n\r\npandas           : 1.0.5\r\nnumpy            : 1.19.1\r\npytz             : 2020.1\r\ndateutil         : 2.8.1\r\npip              : 20.0.2\r\nsetuptools       : 44.0.0\r\nCython           : None\r\npytest           : None\r\nhypothesis       : None\r\nsphinx           : None\r\nblosc            : None\r\nfeather          : None\r\nxlsxwriter       : None\r\nlxml.etree       : 4.5.2\r\nhtml5lib         : None\r\npymysql          : None\r\npsycopg2         : None\r\njinja2           : None\r\nIPython          : 7.16.1\r\npandas_datareader: 0.9.0\r\nbs4              : None\r\nbottleneck       : None\r\nfastparquet      : None\r\ngcsfs            : None\r\nlxml.etree       : 4.5.2\r\nmatplotlib       : 3.3.0\r\nnumexpr          : 2.7.1\r\nodfpy            : None\r\nopenpyxl         : None\r\npandas_gbq       : None\r\npyarrow          : None\r\npytables         : None\r\npytest           : None\r\npyxlsb           : None\r\ns3fs             : None\r\nscipy            : 1.5.2\r\nsqlalchemy       : None\r\ntables           : 3.6.1\r\ntabulate         : None\r\nxarray           : 0.16.0\r\nxlrd             : None\r\nxlwt             : None\r\nxlsxwriter       : None\r\nnumba            : None\r\n\r\n</details>\r\n", "performed_via_github_app": null, "score": 1.0}]}