{"total_count": 3, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/12", "repository_url": "https://api.github.com/repos/newrelic/newrelic-python-agent", "labels_url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/12/comments", "events_url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/12/events", "html_url": "https://github.com/newrelic/newrelic-python-agent/issues/12", "id": 678874805, "node_id": "MDU6SXNzdWU2Nzg4NzQ4MDU=", "number": 12, "title": "Installation fails if `setuptools_scm<3.2.0` is installed", "user": {"login": "MattFisher", "id": 70594, "node_id": "MDQ6VXNlcjcwNTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/70594?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MattFisher", "html_url": "https://github.com/MattFisher", "followers_url": "https://api.github.com/users/MattFisher/followers", "following_url": "https://api.github.com/users/MattFisher/following{/other_user}", "gists_url": "https://api.github.com/users/MattFisher/gists{/gist_id}", "starred_url": "https://api.github.com/users/MattFisher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MattFisher/subscriptions", "organizations_url": "https://api.github.com/users/MattFisher/orgs", "repos_url": "https://api.github.com/users/MattFisher/repos", "events_url": "https://api.github.com/users/MattFisher/events{/privacy}", "received_events_url": "https://api.github.com/users/MattFisher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 286276478, "node_id": "MDU6TGFiZWwyODYyNzY0Nzg=", "url": "https://api.github.com/repos/newrelic/newrelic-python-agent/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-14T03:46:46Z", "updated_at": "2020-08-17T17:22:18Z", "closed_at": "2020-08-17T17:22:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "[NOTE]: # ( ^^ Provide a general summary of the issue in the title above. ^^ )\r\n\r\n**Description**\r\n\r\nInstalling `newrelic==5.16.0.145` fails if a version of `setuptools_scm` is installed that does not support the `git_describe_command` option introduced in [v3.2.0](https://github.com/pypa/setuptools_scm/blob/master/CHANGELOG.rst#v320)\r\n\r\nIn our use case, it's not clear what's causing this old version to be installed, so it's not obvious where to rectify the problem.\r\n\r\nChanging `setup_requires` in `setup.py` to `['setuptools_scm>=3.2.0'],` should hopefully work.\r\n\r\n```\r\n> pip install setuptools_scm==3.1.0\r\nCollecting setuptools_scm==3.1.0\r\n  Downloading setuptools_scm-3.1.0-py2.py3-none-any.whl (23 kB)\r\nInstalling collected packages: setuptools-scm\r\nSuccessfully installed setuptools-scm-3.1.0\r\n\r\n> pip --no-cache-dir install newrelic==5.16.0.145\r\n\r\nCollecting newrelic==5.16.0.145\r\n  Downloading newrelic-5.16.0.145.tar.gz (548 kB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 548 kB 8.2 MB/s \r\n    ERROR: Command errored out with exit status 1:\r\n     command: /{...}/bin/python3.6 -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/private/var/folders/c5/03fzs2ld3z18vnhg06wj8kzc0000gn/T/pip-install-iz2r6kus/newrelic/setup.py'\"'\"'; __file__='\"'\"'/private/var/folders/c5/03fzs2ld3z18vnhg06wj8kzc0000gn/T/pip-install-iz2r6kus/newrelic/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' egg_info --egg-base /private/var/folders/c5/03fzs2ld3z18vnhg06wj8kzc0000gn/T/pip-pip-egg-info-50pfyx8a\r\n         cwd: /private/var/folders/c5/03fzs2ld3z18vnhg06wj8kzc0000gn/T/pip-install-iz2r6kus/newrelic/\r\n    Complete output (23 lines):\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 1, in <module>\r\n      File \"/private/var/folders/c5/03fzs2ld3z18vnhg06wj8kzc0000gn/T/pip-install-iz2r6kus/newrelic/setup.py\", line 239, in <module>\r\n        run_setup(with_extensions=True)\r\n      File \"/private/var/folders/c5/03fzs2ld3z18vnhg06wj8kzc0000gn/T/pip-install-iz2r6kus/newrelic/setup.py\", line 208, in run_setup\r\n        _run_setup()\r\n      File \"/private/var/folders/c5/03fzs2ld3z18vnhg06wj8kzc0000gn/T/pip-install-iz2r6kus/newrelic/setup.py\", line 194, in _run_setup\r\n        setup(**kwargs_tmp)\r\n      File \"/{...}/lib/python3.6/site-packages/setuptools/__init__.py\", line 163, in setup\r\n        return distutils.core.setup(**attrs)\r\n      File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/core.py\", line 108, in setup\r\n        _setup_distribution = dist = klass(attrs)\r\n      File \"/{...}/lib/python3.6/site-packages/setuptools/dist.py\", line 430, in __init__\r\n        k: v for k, v in attrs.items()\r\n      File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/dist.py\", line 281, in __init__\r\n        self.finalize_options()\r\n      File \"/{...}/lib/python3.6/site-packages/setuptools/dist.py\", line 721, in finalize_options\r\n        ep(self)\r\n      File \"/{...}/lib/python3.6/site-packages/setuptools/dist.py\", line 728, in _finalize_setup_keywords\r\n        ep.load()(self, ep.name, value)\r\n      File \"/{...}/lib/python3.6/site-packages/setuptools_scm/integration.py\", line 23, in version_keyword\r\n        dist.metadata.version = get_version(**value)\r\n    TypeError: get_version() got an unexpected keyword argument 'git_describe_command'\r\n    ----------------------------------------\r\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\r\n\r\n```\r\n\r\n**Expected Behavior**\r\nInstall should complete successfully, or give a useful error message.\r\n\r\n**Steps to Reproduce**\r\nIn a new virtualenv,\r\n`pip install setuptools_scm==3.1.0`\r\n`pip install newrelic==5.16.0.145`\r\n\r\n**Your Environment**\r\nObserved on macOS 10.15.5 and Ubuntu 16.04 using Python 3.6\r\nInstall succeeds with `setuptools_scm` not installed, or `setuptools_scm>=3.2.0` installed, or when installing `newrelic<=5.16.0.145`.\r\nInstall fails for `newrelic==5.16.0.145` with `setuptools_scm<3.2.0` installed.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/11", "repository_url": "https://api.github.com/repos/newrelic/newrelic-python-agent", "labels_url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/11/comments", "events_url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/11/events", "html_url": "https://github.com/newrelic/newrelic-python-agent/issues/11", "id": 676505788, "node_id": "MDU6SXNzdWU2NzY1MDU3ODg=", "number": 11, "title": "Documentation example does not match actual API", "user": {"login": "MarkAWard", "id": 3188305, "node_id": "MDQ6VXNlcjMxODgzMDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3188305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkAWard", "html_url": "https://github.com/MarkAWard", "followers_url": "https://api.github.com/users/MarkAWard/followers", "following_url": "https://api.github.com/users/MarkAWard/following{/other_user}", "gists_url": "https://api.github.com/users/MarkAWard/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkAWard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkAWard/subscriptions", "organizations_url": "https://api.github.com/users/MarkAWard/orgs", "repos_url": "https://api.github.com/users/MarkAWard/repos", "events_url": "https://api.github.com/users/MarkAWard/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkAWard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 286276478, "node_id": "MDU6TGFiZWwyODYyNzY0Nzg=", "url": "https://api.github.com/repos/newrelic/newrelic-python-agent/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-11T01:05:13Z", "updated_at": "2020-08-12T20:01:51Z", "closed_at": "2020-08-12T20:01:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Description**\r\nThe Example provided in the docs [here](https://docs.newrelic.com/docs/agents/python-agent/python-agent-api/addcustomparameters-python-agent-api) does not match the actual required parameter type. The Parameters says one must pass a list of tuples yet the Example given passes a dict, which would raise `exceptions:ValueError: too many values to unpack`. Unfortunately, we have fallen victim to writing our code based off of the example more times than I would like to admit.\r\n\r\n**Expected Behavior**\r\n1. A valid example such as:\r\n```\r\n@newrelic.agent.background_task()\r\ndef send_request(): \r\n\tresponse = requests.post('http://URL_path', headers=headers, data=data) \r\n\tnewrelic.agent.add_custom_parameters([\r\n                ('url_path_status_code', response.status_code),\r\n        ]) \r\n```\r\n2. Potentially, a misuse of the SDK does no totally fail code execution but could notify the user of the error loudly. Similar to how the logging module is implemented:\r\n```\r\nIn [8]: def dont_kill_my_code(): \r\n   ...:     logger.info(\"bad data %d\", \"not a digit\") \r\n   ...:     print(\"I made it here still\") \r\n   ...:                                                                                                                                                                                                     \r\n\r\nIn [9]: dont_kill_my_code()                                                                                                                                                                                 \r\n--- Logging error ---\r\nTraceback (most recent call last):\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/logging/__init__.py\", line 1081, in emit\r\n    msg = self.format(record)\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/logging/__init__.py\", line 925, in format\r\n    return fmt.format(record)\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/logging/__init__.py\", line 664, in format\r\n    record.message = record.getMessage()\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/logging/__init__.py\", line 369, in getMessage\r\n    msg = msg % self.args\r\nTypeError: %d format: a number is required, not str\r\nCall stack:\r\n  File \"/Users/markward/anaconda2/envs/pollen/bin/ipython\", line 11, in <module>\r\n    sys.exit(start_ipython())\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/IPython/__init__.py\", line 126, in start_ipython\r\n    return launch_new_instance(argv=argv, **kwargs)\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/traitlets/config/application.py\", line 664, in launch_instance\r\n    app.start()\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/IPython/terminal/ipapp.py\", line 356, in start\r\n    self.shell.mainloop()\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/IPython/terminal/interactiveshell.py\", line 563, in mainloop\r\n    self.interact()\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/IPython/terminal/interactiveshell.py\", line 554, in interact\r\n    self.run_cell(code, store_history=True)\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/IPython/core/interactiveshell.py\", line 2866, in run_cell\r\n    result = self._run_cell(\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/IPython/core/interactiveshell.py\", line 2895, in _run_cell\r\n    return runner(coro)\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/IPython/core/async_helpers.py\", line 68, in _pseudo_sync_runner\r\n    coro.send(None)\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/IPython/core/interactiveshell.py\", line 3071, in run_cell_async\r\n    has_raised = await self.run_ast_nodes(code_ast.body, cell_name,\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/IPython/core/interactiveshell.py\", line 3263, in run_ast_nodes\r\n    if (await self.run_code(code, result,  async_=asy)):\r\n  File \"/Users/markward/anaconda2/envs/pollen/lib/python3.8/site-packages/IPython/core/interactiveshell.py\", line 3343, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-9-405f0f64a064>\", line 1, in <module>\r\n    dont_kill_my_code()\r\n  File \"<ipython-input-8-45cf361c5300>\", line 2, in dont_kill_my_code\r\n    logger.info(\"bad data %d\", \"not a digit\")\r\nMessage: 'bad data %d'\r\nArguments: ('not a digit',)\r\nI made it here still\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/2", "repository_url": "https://api.github.com/repos/newrelic/newrelic-python-agent", "labels_url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/2/comments", "events_url": "https://api.github.com/repos/newrelic/newrelic-python-agent/issues/2/events", "html_url": "https://github.com/newrelic/newrelic-python-agent/issues/2", "id": 654421779, "node_id": "MDU6SXNzdWU2NTQ0MjE3Nzk=", "number": 2, "title": "commit history and permalinks broken?", "user": {"login": "spyoungtech", "id": 15212758, "node_id": "MDQ6VXNlcjE1MjEyNzU4", "avatar_url": "https://avatars2.githubusercontent.com/u/15212758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spyoungtech", "html_url": "https://github.com/spyoungtech", "followers_url": "https://api.github.com/users/spyoungtech/followers", "following_url": "https://api.github.com/users/spyoungtech/following{/other_user}", "gists_url": "https://api.github.com/users/spyoungtech/gists{/gist_id}", "starred_url": "https://api.github.com/users/spyoungtech/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spyoungtech/subscriptions", "organizations_url": "https://api.github.com/users/spyoungtech/orgs", "repos_url": "https://api.github.com/users/spyoungtech/repos", "events_url": "https://api.github.com/users/spyoungtech/events{/privacy}", "received_events_url": "https://api.github.com/users/spyoungtech/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-10T00:10:19Z", "updated_at": "2020-07-10T09:04:56Z", "closed_at": "2020-07-10T09:04:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have some permalinks to this repo that are now broken due to recent changes. For example this link is now a 404: https://github.com/newrelic/newrelic-python-agent/blob/v5.10.0.138/newrelic/newrelic/core/data_collector.py\r\n\r\nThe history of commits seems to also have been force-pushed over. This breaks git mirroring into our downstream custom version of this package. Additionally, all the useful git history is now gone. The oldest commit is now only 27 days ago? So when we experience issues between older versions, we cannot see the commits that happened between versions...", "performed_via_github_app": null, "score": 1.0}]}