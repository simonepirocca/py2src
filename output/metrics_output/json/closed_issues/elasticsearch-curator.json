{"total_count": 711, "incomplete_results": false, "items": [{"url": "https://api.github.com/repos/elastic/curator/issues/1546", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1546/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1546/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1546/events", "html_url": "https://github.com/elastic/curator/issues/1546", "id": 648061578, "node_id": "MDU6SXNzdWU2NDgwNjE1Nzg=", "number": 1546, "title": "curator error run as cronjob.", "user": {"login": "rizvaughan", "id": 37185071, "node_id": "MDQ6VXNlcjM3MTg1MDcx", "avatar_url": "https://avatars1.githubusercontent.com/u/37185071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rizvaughan", "html_url": "https://github.com/rizvaughan", "followers_url": "https://api.github.com/users/rizvaughan/followers", "following_url": "https://api.github.com/users/rizvaughan/following{/other_user}", "gists_url": "https://api.github.com/users/rizvaughan/gists{/gist_id}", "starred_url": "https://api.github.com/users/rizvaughan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rizvaughan/subscriptions", "organizations_url": "https://api.github.com/users/rizvaughan/orgs", "repos_url": "https://api.github.com/users/rizvaughan/repos", "events_url": "https://api.github.com/users/rizvaughan/events{/privacy}", "received_events_url": "https://api.github.com/users/rizvaughan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-30T10:29:49Z", "updated_at": "2020-06-30T14:40:47Z", "closed_at": "2020-06-30T14:40:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\nI have two nodes where I cleanup old elasticsearch indices using curator. I have a cronjob which runs at midnight and cleanup old indices. While there aren't any problems with one node, the second node gives me the following errors.\r\n`/usr/src/script/curator/es_kibana-prod-indices_cleanup.yml: line 1: ---: command not found\r\n/usr/src/script/curator/es_kibana-prod-indices_cleanup.yml: line 2: actions:: command not found\r\n/usr/src/script/curator/es_kibana-prod-indices_cleanup.yml: line 3: 1:: command not found\r\n/usr/src/script/curator/es_kibana-prod-indices_cleanup.yml: line 4: action:: command not found\r\n/usr/src/script/curator/es_kibana-prod-indices_cleanup.yml: line 5: description:: command not found\r\n/usr/src/script/curator/es_kibana-prod-indices_cleanup.yml: line 6: syntax error near unexpected token `('\r\n/usr/src/script/curator/es_kibana-prod-indices_cleanup.yml: line 6: `      Delete indices older than 31 days (based on index name), for logstash-'`\r\nHere is my es_kibana-prod-indices_cleanup.yml file:\r\n`---\r\n\r\nactions:\r\n\r\n  1:\r\n    action: delete_indices  \r\n\r\n    description: >-  \r\n      Delete indices older than 31 days (based on index name), for logstash-\r\n      prefixed indices. Ignore the error if the filter does not result in an\r\n      actionable list of indices (ignore_empty_list) and exit cleanly.  \r\n\r\n    options:  \r\n\r\n      ignore_empty_list: True  \r\n\r\n      timeout_override:  \r\n\r\n      continue_if_exception: False  \r\n\r\n      disable_action: False  \r\n\r\n    filters:  \r\n\r\n    - filtertype: age  \r\n\r\n      source: name  \r\n\r\n      direction: older  \r\n\r\n      timestring: '%Y.%m.%d'  \r\n\r\n      unit: days  \r\n\r\n      unit_count: 31  \r\n\r\n      exclude:`  \r\n\r\nand my config file is:\r\n\r\n`---\r\n\r\nclient:\r\n\r\n  hosts:\r\n\r\n    - https://vpc-xxxxxxxxx.es.amazonaws.com\r\n\r\n  port: 9200\r\n\r\n  url_prefix:\r\n\r\n  use_ssl: False\r\n\r\n  certificate:\r\n\r\n  client_cert:\r\n\r\n  client_key:\r\n\r\n  ssl_no_validate: False\r\n\r\n  http_auth:\r\n\r\n  timeout: 30\r\n\r\n  master_only: False\r\n\r\n\r\n\r\nlogging:\r\n\r\n  loglevel: INFO\r\n\r\n  logfile:\r\n\r\n  logformat: default\r\n\r\n  blacklist: ['elasticsearch', 'urllib3']`\r\n\r\nThe settings is exactly the same for my other node where curator does what it's supposed to do. The strange thing is, if I run it manually, it gets executed without any issues but in crontab it doesn't. The file permissions etc are all similar in both cases.\r\nCould somebody tell me what's going on, what am I doing wrong?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1532", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1532/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1532/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1532/events", "html_url": "https://github.com/elastic/curator/issues/1532", "id": 588492491, "node_id": "MDU6SXNzdWU1ODg0OTI0OTE=", "number": 1532, "title": "Failed installation on centos8 container", "user": {"login": "crossbill", "id": 22098277, "node_id": "MDQ6VXNlcjIyMDk4Mjc3", "avatar_url": "https://avatars1.githubusercontent.com/u/22098277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crossbill", "html_url": "https://github.com/crossbill", "followers_url": "https://api.github.com/users/crossbill/followers", "following_url": "https://api.github.com/users/crossbill/following{/other_user}", "gists_url": "https://api.github.com/users/crossbill/gists{/gist_id}", "starred_url": "https://api.github.com/users/crossbill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crossbill/subscriptions", "organizations_url": "https://api.github.com/users/crossbill/orgs", "repos_url": "https://api.github.com/users/crossbill/repos", "events_url": "https://api.github.com/users/crossbill/events{/privacy}", "received_events_url": "https://api.github.com/users/crossbill/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-26T15:07:06Z", "updated_at": "2020-03-27T11:39:55Z", "closed_at": "2020-03-27T11:39:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Have tried all methods \r\n \r\n pip3 install elasticsearch-curator\r\n python setup.py install \r\n pip install elasticsearch-curator-5.8.1.tar.gz\r\n\r\nAll throwing the same error below\r\n\r\nERROR:\r\n\r\nBuilding wheels for collected packages: elasticsearch-curator\r\n  Building wheel for elasticsearch-curator (setup.py) ... error\r\n  ERROR: Command errored out with exit status 1:\r\n   command: /var/lib/awx/venv/ansible/bin/python3 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-req-build-mofl7a4_/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-req-build-mofl7a4_/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' bdist_wheel -d /tmp/pip-wheel-lce0m02w --python-tag cp36\r\n       cwd: /tmp/pip-req-build-mofl7a4_/\r\n  Complete output (74 lines):\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  creating build\r\n  creating build/lib\r\n  creating build/lib/curator\r\n  copying curator/actions.py -> build/lib/curator\r\n  copying curator/cli.py -> build/lib/curator\r\n  copying curator/singletons.py -> build/lib/curator\r\n  copying curator/logtools.py -> build/lib/curator\r\n  copying curator/config_utils.py -> build/lib/curator\r\n  copying curator/indexlist.py -> build/lib/curator\r\n  copying curator/snapshotlist.py -> build/lib/curator\r\n  copying curator/__main__.py -> build/lib/curator\r\n  copying curator/repomgrcli.py -> build/lib/curator\r\n  copying curator/exceptions.py -> build/lib/curator\r\n  copying curator/_version.py -> build/lib/curator\r\n  copying curator/utils.py -> build/lib/curator\r\n  copying curator/__init__.py -> build/lib/curator\r\n  copying curator/curator_cli.py -> build/lib/curator\r\n  running egg_info\r\n  writing elasticsearch_curator.egg-info/PKG-INFO\r\n  writing dependency_links to elasticsearch_curator.egg-info/dependency_links.txt\r\n  writing entry points to elasticsearch_curator.egg-info/entry_points.txt\r\n  writing requirements to elasticsearch_curator.egg-info/requires.txt\r\n  writing top-level names to elasticsearch_curator.egg-info/top_level.txt\r\n  reading manifest file 'elasticsearch_curator.egg-info/SOURCES.txt'\r\n  reading manifest template 'MANIFEST.in'\r\n  warning: no files found matching 'Changelog.rst'\r\n  warning: no previously-included files matching '__pycache__' found under directory '*'\r\n  warning: no previously-included files matching '*.py[co]' found under directory '*'\r\n  warning: no previously-included files matching '*.pyc' found under directory 'curator'\r\n  warning: no previously-included files matching '*.pyo' found under directory 'curator'\r\n  warning: no previously-included files matching '*.pyc' found under directory 'docs'\r\n  warning: no previously-included files matching '*.pyo' found under directory 'docs'\r\n  warning: no previously-included files matching '*.pyc' found under directory 'test'\r\n  warning: no previously-included files matching '*.pyo' found under directory 'test'\r\n  no previously-included directories found matching 'docs/_build'\r\n  no previously-included directories found matching 'docs/asciidoc/html_docs'\r\n  writing manifest file 'elasticsearch_curator.egg-info/SOURCES.txt'\r\n  creating build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/__init__.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/alias.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/allocation.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/close.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/delete.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/forcemerge.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/freeze.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/object_class.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/open_indices.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/replicas.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/restore.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/rollover.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/show.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/shrink.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/snapshot.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/unfreeze.py -> build/lib/curator/cli_singletons\r\n  copying curator/cli_singletons/utils.py -> build/lib/curator/cli_singletons\r\n  creating build/lib/curator/defaults\r\n  copying curator/defaults/__init__.py -> build/lib/curator/defaults\r\n  copying curator/defaults/client_defaults.py -> build/lib/curator/defaults\r\n  copying curator/defaults/filter_elements.py -> build/lib/curator/defaults\r\n  copying curator/defaults/filtertypes.py -> build/lib/curator/defaults\r\n  copying curator/defaults/option_defaults.py -> build/lib/curator/defaults\r\n  copying curator/defaults/settings.py -> build/lib/curator/defaults\r\n  creating build/lib/curator/validators\r\n  copying curator/validators/__init__.py -> build/lib/curator/validators\r\n  copying curator/validators/actions.py -> build/lib/curator/validators\r\n  copying curator/validators/config_file.py -> build/lib/curator/validators\r\n  copying curator/validators/filters.py -> build/lib/curator/validators\r\n  copying curator/validators/options.py -> build/lib/curator/validators\r\n  copying curator/validators/schemacheck.py -> build/lib/curator/validators\r\n  running build_exe\r\n  error: [Errno 2] No such file or directory: 'run_curator.py'\r\n  ----------------------------------------\r\n  ERROR: Failed building wheel for elasticsearch-curator\r\n  Running setup.py clean for elasticsearch-curator\r\nFailed to build elasticsearch-curator\r\nInstalling collected packages: elasticsearch-curator\r\n    Running setup.py install for elasticsearch-curator ... error\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /var/lib/awx/venv/ansible/bin/python3 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-req-build-mofl7a4_/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-req-build-mofl7a4_/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record /tmp/pip-record-_md0j6qh/install-record.txt --single-version-externally-managed --compile --install-headers /var/lib/awx/venv/ansible/include/site/python3.6/elasticsearch-curator\r\n         cwd: /tmp/pip-req-build-mofl7a4_/\r\n    Complete output (6 lines):\r\n    usage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]\r\n       or: setup.py --help [cmd1 cmd2 ...]\r\n       or: setup.py --help-commands\r\n       or: setup.py cmd --help\r\n\r\n    error: option --single-version-externally-managed not recognized\r\n    ----------------------------------------\r\nERROR: Command errored out with exit status 1: /var/lib/awx/venv/ansible/bin/python3 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-req-build-mofl7a4_/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-req-build-mofl7a4_/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record /tmp/pip-record-_md0j6qh/install-record.txt --single-version-externally-managed --compile --install-headers /var/lib/awx/venv/ansible/include/site/python3.6/elasticsearch-curator Check the logs for full command output.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1524", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1524/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1524/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1524/events", "html_url": "https://github.com/elastic/curator/issues/1524", "id": 576993142, "node_id": "MDU6SXNzdWU1NzY5OTMxNDI=", "number": 1524, "title": "Cannot create index with curator 5.8.1 on Elasticsearch 7.1", "user": {"login": "mbonanata", "id": 11680417, "node_id": "MDQ6VXNlcjExNjgwNDE3", "avatar_url": "https://avatars2.githubusercontent.com/u/11680417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbonanata", "html_url": "https://github.com/mbonanata", "followers_url": "https://api.github.com/users/mbonanata/followers", "following_url": "https://api.github.com/users/mbonanata/following{/other_user}", "gists_url": "https://api.github.com/users/mbonanata/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbonanata/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbonanata/subscriptions", "organizations_url": "https://api.github.com/users/mbonanata/orgs", "repos_url": "https://api.github.com/users/mbonanata/repos", "events_url": "https://api.github.com/users/mbonanata/events{/privacy}", "received_events_url": "https://api.github.com/users/mbonanata/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-06T15:11:43Z", "updated_at": "2020-03-06T17:00:24Z", "closed_at": "2020-03-06T17:00:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Cannot create index with curator 5.8.1 on Elasticsearch 7.1. The same scenario with Easticsearch 6.8 works just fine.\r\n\r\n### Expected Behavior\r\nCreate new index with name prefix cloud-logs- and suffix tomorrow date.\r\n\r\n### Actual Behavior\r\nError creating index\r\n\r\n## Context (Environment)\r\nRunning curator on EKS (AWS) version 1.14\r\nAWS Elasticsearch service version 7.1 (empty, no other indexes, only one for kibana)\r\nCurator image: bobrik/curator:5.8.1\r\n\r\nI will attach curator output logs with error and Elasticsearch indexes list. Also yaml files used to deploy it in EKS\r\n[curator-create-index-error.log](https://github.com/elastic/curator/files/4298944/curator-create-index-error.log)\r\n[elastic-indexes-list.log](https://github.com/elastic/curator/files/4298945/elastic-indexes-list.log)\r\n[k8s-curator-config.yaml.log](https://github.com/elastic/curator/files/4298948/k8s-curator-config.yaml.log)\r\n[k8s-curator-create-index.yaml.log](https://github.com/elastic/curator/files/4298949/k8s-curator-create-index.yaml.log)\r\n[k8s-curator-create-index-config.yaml.log](https://github.com/elastic/curator/files/4298950/k8s-curator-create-index-config.yaml.log)\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1519", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1519/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1519/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1519/events", "html_url": "https://github.com/elastic/curator/issues/1519", "id": 572713104, "node_id": "MDU6SXNzdWU1NzI3MTMxMDQ=", "number": 1519, "title": "ECS log format", "user": {"login": "m1keil", "id": 1589008, "node_id": "MDQ6VXNlcjE1ODkwMDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1589008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m1keil", "html_url": "https://github.com/m1keil", "followers_url": "https://api.github.com/users/m1keil/followers", "following_url": "https://api.github.com/users/m1keil/following{/other_user}", "gists_url": "https://api.github.com/users/m1keil/gists{/gist_id}", "starred_url": "https://api.github.com/users/m1keil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m1keil/subscriptions", "organizations_url": "https://api.github.com/users/m1keil/orgs", "repos_url": "https://api.github.com/users/m1keil/repos", "events_url": "https://api.github.com/users/m1keil/events{/privacy}", "received_events_url": "https://api.github.com/users/m1keil/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-28T12:00:57Z", "updated_at": "2020-03-13T15:24:34Z", "closed_at": "2020-03-13T15:24:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Curator currently support JSON format but not in the Elastic Common Schema (ECS) format. I've added it to my own fork and wonder if that's a PR you would like to see here?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1518", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1518/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1518/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1518/events", "html_url": "https://github.com/elastic/curator/issues/1518", "id": 568253551, "node_id": "MDU6SXNzdWU1NjgyNTM1NTE=", "number": 1518, "title": "delete_indices not working return error \"due to empty list: <class 'curator.exceptions.NoIndices'>\"", "user": {"login": "bittu664", "id": 28609215, "node_id": "MDQ6VXNlcjI4NjA5MjE1", "avatar_url": "https://avatars2.githubusercontent.com/u/28609215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bittu664", "html_url": "https://github.com/bittu664", "followers_url": "https://api.github.com/users/bittu664/followers", "following_url": "https://api.github.com/users/bittu664/following{/other_user}", "gists_url": "https://api.github.com/users/bittu664/gists{/gist_id}", "starred_url": "https://api.github.com/users/bittu664/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bittu664/subscriptions", "organizations_url": "https://api.github.com/users/bittu664/orgs", "repos_url": "https://api.github.com/users/bittu664/repos", "events_url": "https://api.github.com/users/bittu664/events{/privacy}", "received_events_url": "https://api.github.com/users/bittu664/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-20T12:05:03Z", "updated_at": "2020-02-24T13:26:26Z", "closed_at": "2020-02-24T13:26:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Same problem here, I want to delete indices but not work it returns Skipping action \"delete_indices\" due to empty list: <class 'curator.exceptions.NoIndices'> I am also added this parameter \r\n``` allow_ilm_indices: true```  but it won't work for me. for your kind information, I am using EFK stack (opendistro elasticsearch & kibana , Fluentd)\r\n\r\n![finall](https://user-images.githubusercontent.com/28609215/74932212-45286180-5407-11ea-830b-10add7f31a5a.png)\r\n\r\nHere is my configuration:-\r\n`` curator.yaml ```\r\n\r\n```\r\n---\r\nclient:\r\n  hosts:\r\n    - localhost\r\n  port: 9200\r\n  url_prefix: \r\n  use_ssl: False\r\n  certificate:\r\n  client_cert:\r\n  client_key:\r\n  ssl_no_validate: False\r\n  http_auth: admin:admin\r\n  timeout: 3600\r\n  master_only: False\r\n  \r\n\r\nlogging:\r\n  loglevel: INFO\r\n  logfile:\r\n  logformat: default\r\n  blacklist: ['elasticsearch', 'urllib3'] \r\n```\r\n\r\n``` delfinal.yaml ```\r\n\r\n```\r\n\r\nactions:\r\n  1:\r\n    action: delete_indices\r\n    description: >-\r\n      Delete indices older than 45 days (based on index name), for kube\r\n      prefixed indices. Ignore the error if the filter does not result in an\r\n      actionable list of indices (ignore_empty_list) and exit cleanly.\r\n    options:\r\n      ignore_empty_list: True\r\n      disable_action: False\r\n      allow_ilm_indices: true\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: kube\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y.%m.%d'\r\n      unit: days\r\n      unit_count: 45\r\n```\r\n\r\nWhen I am checking my kube pattern indices it is still there. so how to delete my indices which is older than 30 days or a **specific indices**", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1517", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1517/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1517/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1517/events", "html_url": "https://github.com/elastic/curator/issues/1517", "id": 567572899, "node_id": "MDU6SXNzdWU1Njc1NzI4OTk=", "number": 1517, "title": "Failed to complete action: create_index already exists.", "user": {"login": "bittu664", "id": 28609215, "node_id": "MDQ6VXNlcjI4NjA5MjE1", "avatar_url": "https://avatars2.githubusercontent.com/u/28609215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bittu664", "html_url": "https://github.com/bittu664", "followers_url": "https://api.github.com/users/bittu664/followers", "following_url": "https://api.github.com/users/bittu664/following{/other_user}", "gists_url": "https://api.github.com/users/bittu664/gists{/gist_id}", "starred_url": "https://api.github.com/users/bittu664/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bittu664/subscriptions", "organizations_url": "https://api.github.com/users/bittu664/orgs", "repos_url": "https://api.github.com/users/bittu664/repos", "events_url": "https://api.github.com/users/bittu664/events{/privacy}", "received_events_url": "https://api.github.com/users/bittu664/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-19T13:33:36Z", "updated_at": "2020-02-21T07:14:31Z", "closed_at": "2020-02-21T07:14:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using curator version ``` curator, version 5.8.1 ```  I am trying to create indices but it shows me this error  !\r\n``` ERROR     Failed to complete action: create_index.  <class 'curator.exceptions.FailedExecution'>: Index <web-app2-metrics-{now/M-1M{YYYY.MM}}> already exists. ```\r\n![already](https://user-images.githubusercontent.com/28609215/74838566-ccaf9b00-5349-11ea-8bb7-432c84b5f22c.png)\r\n\r\n what's going wrong am I writing the wrong script?  if yes then what's the correct method or script. Here is my configurations as follows:-\r\n\r\n``` curator ./create-indices.yaml --config ./curator.yaml ```\r\n\r\n``` curator.yaml ```\r\n\r\n``` \r\n---\r\nclient:\r\n  hosts:\r\n    - localhost\r\n  port: 9200\r\n  url_prefix: \r\n  use_ssl: False\r\n  certificate:\r\n  client_cert:\r\n  client_key:\r\n  ssl_no_validate: False\r\n  http_auth: admin:admin\r\n  timeout: 3600\r\n  master_only: False\r\n  \r\n\r\nlogging:\r\n  loglevel: INFO\r\n  logfile:\r\n  logformat: default\r\n  blacklist: ['elasticsearch', 'urllib3']\r\n```\r\n \r\n\r\n``` create-indices.yaml ```\r\n\r\n```\r\n---\r\nactions:\r\n  create_web-app3-metrics:\r\n    action: create_index\r\n    description: \"Create Index with Last Months Date in Month Format - web-app3-metrics-2017.11\"\r\n    options:\r\n      name: '<web-app2-metrics-{now/M-1M{YYYY.MM}}>'\r\n      extra_settings:\r\n        settings:\r\n          number_of_shards: 5\r\n          number_of_replicas: 2\r\n        continue_if_exception: True\r\n        disable_action: False\r\n\r\n  create_web-app4-metrics:\r\n    action: create_index\r\n    description: \"Create Index with Daily Format 12 Hours from Now - web-app4-metrics-2017.12.05\"\r\n    options:\r\n      name: '<web-app2-metrics-{now/d{YYYY.MM.dd|+12:00}}>'\r\n      extra_settings:\r\n        settings:\r\n          number_of_shards: 5\r\n          number_of_replicas: 2\r\n        continue_if_exception: True\r\n        disable_action: False\r\n  \r\n```\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1516", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1516/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1516/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1516/events", "html_url": "https://github.com/elastic/curator/issues/1516", "id": 566894688, "node_id": "MDU6SXNzdWU1NjY4OTQ2ODg=", "number": 1516, "title": "Error: TransportError(503, u'master_not_discovered_exception', None)", "user": {"login": "bittu664", "id": 28609215, "node_id": "MDQ6VXNlcjI4NjA5MjE1", "avatar_url": "https://avatars2.githubusercontent.com/u/28609215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bittu664", "html_url": "https://github.com/bittu664", "followers_url": "https://api.github.com/users/bittu664/followers", "following_url": "https://api.github.com/users/bittu664/following{/other_user}", "gists_url": "https://api.github.com/users/bittu664/gists{/gist_id}", "starred_url": "https://api.github.com/users/bittu664/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bittu664/subscriptions", "organizations_url": "https://api.github.com/users/bittu664/orgs", "repos_url": "https://api.github.com/users/bittu664/repos", "events_url": "https://api.github.com/users/bittu664/events{/privacy}", "received_events_url": "https://api.github.com/users/bittu664/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-18T13:31:22Z", "updated_at": "2020-02-19T12:18:36Z", "closed_at": "2020-02-19T12:18:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to delete my 10 days Kubernetes logs, so when I applying this configuration it shows me this error. I am using this version  ``` curator, version 5.8.1 ```\r\n\r\n```  curator ./delete_indices.yml --config ./curator.yaml   ```\r\n\r\n\r\n![curator2](https://user-images.githubusercontent.com/28609215/74740192-69a60180-5280-11ea-83f3-4faa765d0e86.png)\r\n\r\nMy configuration is :- \r\n```curator.yaml ```\r\n\r\n```\r\n---\r\nclient:\r\n  hosts:\r\n    - 192.89.03.01\r\n  port: 9200\r\n  url_prefix:\r\n  use_ssl: False\r\n  certificate:\r\n  client_cert:\r\n  client_key:\r\n  ssl_no_validate: False\r\n  http_auth: abc:abc\r\n  timeout: 3600\r\n  master_only: False\r\n\r\nlogging:\r\n  loglevel: INFO\r\n  logfile:\r\n  logformat: default\r\n  blacklist: ['elasticsearch', 'urllib3']\r\n```\r\n\r\n \r\n``` delete_indices.yml ```\r\n\r\n```\r\n---\r\nactions:\r\n  1:\r\n    action: delete_indices\r\n    description: >-\r\n      Delete indices older than 45 days (based on index name), for logstash-\r\n      prefixed indices. Ignore the error if the filter does not result in an\r\n      actionable list of indices (ignore_empty_list) and exit cleanly.\r\n    options:\r\n      ignore_empty_list: True\r\n      timeout_override:\r\n      continue_if_exception: False\r\n      disable_action: False\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: kube*-\r\n      exclude:\r\n    - filtertype:  age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y.%m.%d'\r\n      unit: days\r\n      unit_count: 10\r\n      exclude:\r\n```\r\n\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1513", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1513/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1513/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1513/events", "html_url": "https://github.com/elastic/curator/issues/1513", "id": 564776167, "node_id": "MDU6SXNzdWU1NjQ3NzYxNjc=", "number": 1513, "title": "curator snapshot doesn't include all indices", "user": {"login": "linkwrt", "id": 61019577, "node_id": "MDQ6VXNlcjYxMDE5NTc3", "avatar_url": "https://avatars3.githubusercontent.com/u/61019577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linkwrt", "html_url": "https://github.com/linkwrt", "followers_url": "https://api.github.com/users/linkwrt/followers", "following_url": "https://api.github.com/users/linkwrt/following{/other_user}", "gists_url": "https://api.github.com/users/linkwrt/gists{/gist_id}", "starred_url": "https://api.github.com/users/linkwrt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linkwrt/subscriptions", "organizations_url": "https://api.github.com/users/linkwrt/orgs", "repos_url": "https://api.github.com/users/linkwrt/repos", "events_url": "https://api.github.com/users/linkwrt/events{/privacy}", "received_events_url": "https://api.github.com/users/linkwrt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-13T15:50:59Z", "updated_at": "2020-02-14T14:27:59Z", "closed_at": "2020-02-13T22:13:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "**backup using:**\r\ncurator - not working\r\ncurator_cli - works\r\n\r\n_All indices are included only when snapshot is done with curator_cli._\r\n\r\nCLI example, all indices are included.\r\n\r\n```shell\r\ncurator_cli \\\r\n--config ~/.curator/curator.yml \\\r\nsnapshot \\\r\n--repository elasticsearch_backup_repo \\\r\n--filter_list '{\"filtertype\":\"none\"}'\r\n```\r\n\r\n\r\nUsing curator command with action.yml //  only indices with prefix . are included in snapshot\r\nExample for action.yml\r\n\r\n```yaml\r\nactions:\r\n  1:\r\n    action: snapshot\r\n    description: >-\r\n      Snapshot indices.\r\n      Wait for the snapshot to complete.  Do not skip\r\n      the repository filesystem access check.  Use the other options to create\r\n      the snapshot.\r\n    # name of the repository path given while registering the bkp folder\r\n    options:\r\n      repository: elasticsearch_backup_repo\r\n\r\n    # Leaving name blank will result in the default 'curator-%Y%m%d%H%M%S'\r\n      name: mybkp-%Y%m%d%H%M%S\r\n      ignore_unavailable: False\r\n      include_global_state: True\r\n      partial: False\r\n      wait_for_completion: True\r\n      skip_repo_fs_check: False\r\n      disable_action: False\r\n    filters:\r\n      - filtertype: pattern\r\n        kind: regex\r\n        value: \"^(.*).*$\"\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1493", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1493/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1493/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1493/events", "html_url": "https://github.com/elastic/curator/issues/1493", "id": 535046217, "node_id": "MDU6SXNzdWU1MzUwNDYyMTc=", "number": 1493, "title": "Schema Error on Filters with Valid Data Type", "user": {"login": "corey-hammerton", "id": 1977052, "node_id": "MDQ6VXNlcjE5NzcwNTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1977052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corey-hammerton", "html_url": "https://github.com/corey-hammerton", "followers_url": "https://api.github.com/users/corey-hammerton/followers", "following_url": "https://api.github.com/users/corey-hammerton/following{/other_user}", "gists_url": "https://api.github.com/users/corey-hammerton/gists{/gist_id}", "starred_url": "https://api.github.com/users/corey-hammerton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corey-hammerton/subscriptions", "organizations_url": "https://api.github.com/users/corey-hammerton/orgs", "repos_url": "https://api.github.com/users/corey-hammerton/repos", "events_url": "https://api.github.com/users/corey-hammerton/events{/privacy}", "received_events_url": "https://api.github.com/users/corey-hammerton/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-12-09T16:34:31Z", "updated_at": "2019-12-10T15:04:27Z", "closed_at": "2019-12-09T18:03:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "## To submit a bug or report an issue\r\nUsing the following action file named reindex.yaml:\r\n\r\n```\r\n---\r\nactions:\r\n  1:\r\n    action: reindex\r\n    options:\r\n      max_wait: -1\r\n      wait_for_completion: true\r\n      wait_interval: 9\r\n      request_body:\r\n        source:\r\n          index: mm-group-metrics-2019-11-*\r\n        dest:\r\n          index: mm-group-metrics-2019-11\r\n  2:\r\n    action: delete_indices\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: regex\r\n      value: '^mm-group-metrics-2019-11-'\r\n```\r\n\r\nCurator is complaining about a Schema error with the following message:\r\n\r\n`2019-12-09 16:28:54,045 ERROR     Schema error: expected list for dictionary value @ data['filters']`\r\n\r\n### Expected Behavior\r\nExpected behaviour is running `curator --dry-run reindex.yaml` should execute without issue. It's a dry run and should output log messages about what it would attempt to do.\r\n\r\n### Actual Behavior\r\n<!--- Tell us what happens instead of the expected behavior -->\r\nExecuting `curator --dry-run reindex.yaml` outputs only the following log line:\r\n\r\n`2019-12-09 16:28:54,045 ERROR     Schema error: expected list for dictionary value @ data['filters']\r\n`\r\n\r\n### Steps to Reproduce the Problem\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n  1. Install Curator 5.7.6 via YUM\r\n  2. Create the reindex.yaml file\r\n  3. Execute `curator --dry-run reindex.yaml`\r\n\r\n### Specifications\r\n\r\n  - Version: 5.7.6\r\n  - Platform: CentOS 7\r\n  - Subsystem:\r\n\r\n\r\n## Context (Environment)\r\nWe are attempting to reindex logs from a daily pattern to a monthly pattern through Curator. It's not possible to implement a data retention policy.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1490", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1490/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1490/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1490/events", "html_url": "https://github.com/elastic/curator/issues/1490", "id": 532433490, "node_id": "MDU6SXNzdWU1MzI0MzM0OTA=", "number": 1490, "title": "Skipping action \"delete_indices\" due to empty list: <class 'curator.exceptions.NoIndices'>", "user": {"login": "marouen10", "id": 3728463, "node_id": "MDQ6VXNlcjM3Mjg0NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3728463?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marouen10", "html_url": "https://github.com/marouen10", "followers_url": "https://api.github.com/users/marouen10/followers", "following_url": "https://api.github.com/users/marouen10/following{/other_user}", "gists_url": "https://api.github.com/users/marouen10/gists{/gist_id}", "starred_url": "https://api.github.com/users/marouen10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marouen10/subscriptions", "organizations_url": "https://api.github.com/users/marouen10/orgs", "repos_url": "https://api.github.com/users/marouen10/repos", "events_url": "https://api.github.com/users/marouen10/events{/privacy}", "received_events_url": "https://api.github.com/users/marouen10/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-04T03:54:50Z", "updated_at": "2020-02-20T12:07:07Z", "closed_at": "2019-12-04T15:52:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear all,\r\n\r\nI tried to use curator to delete indices for Elasticsearch \"older than 10 days\", but I always get Skipping action \"delete_indices\" due to empty list: <class 'curator.exceptions.NoIndices'>.\r\n\r\n\r\n\r\ncurator --config /etc/curator/curator.config /etc/curator/del-old-logs.yml\r\n2019-12-04 03:47:17,361 INFO      Preparing Action ID: 1, \"delete_indices\"\r\n2019-12-04 03:47:17,361 INFO      Creating client object and testing connection\r\n2019-12-04 03:47:17,364 INFO      Instantiating client object\r\n2019-12-04 03:47:17,365 INFO      Testing client connectivity\r\n2019-12-04 03:47:17,368 INFO      Successfully created Elasticsearch client object with provided settings\r\n2019-12-04 03:47:17,369 INFO      Trying Action ID: 1, \"delete_indices\": Delete indices older than 90 days (based on index name), for logstash- prefixed indices. Ignore the error if the filter does not result in an actionable list of indices (ignore_empty_list) and exit cleanly.\r\n2019-12-04 03:47:17,396 INFO      Skipping action \"delete_indices\" due to empty list: <class 'curator.exceptions.NoIndices'>\r\n2019-12-04 03:47:17,396 INFO      Action ID: 1, \"delete_indices\" completed.\r\n2019-12-04 03:47:17,397 INFO      Job completed.\r\nHere the del-old-logs.yml settings:\r\n\r\nactions:\r\n  1:\r\n    action: delete_indices\r\n    description: >-\r\n      Delete indices older than 90 days (based on index name), for logstash-\r\n      prefixed indices. Ignore the error if the filter does not result in an\r\n      actionable list of indices (ignore_empty_list) and exit cleanly.\r\n    options:\r\n      ignore_empty_list: True\r\n      timeout_override:\r\n      continue_if_exception: False\r\n      disable_action: False\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: logstash-\r\n      exclude:\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y.%m.%d'\r\n      unit: days\r\n      unit_count: 10\r\n      exclude:\r\n\r\n\r\n\r\n\r\nThe logstash indexes are still displayed and not deleted.\r\n\r\ncurator_cli show_indices\r\n2019-12-04 03:46:59,848 INFO      Instantiating client object\r\n2019-12-04 03:46:59,849 INFO      Testing client connectivity\r\n2019-12-04 03:46:59,853 INFO      Successfully created Elasticsearch client object with provided settings\r\n.kibana_1\r\n.kibana_task_manager\r\nlogstash-2019.10.04-000001\r\nlogstash-2019.11.03-000002\r\nlogstash-2019.12.03-000003\r\n\r\n\r\n\r\ncurl -XGET 'localhost:9200/_cat/indices?v&pretty'\r\nhealth status index                              uuid                   pri rep docs.count docs.deleted store.size pri.store.size\r\ngreen  open   .kibana_task_manager               X7EUsto6S7eFI64VfP3oOw   1   0          2            0     31.3kb         31.3kb\r\nyellow open   logstash-2019.11.03-000002         cQ2U8JC3RZ2sQXNtrWGesQ   1   1  228373323            0       32gb           32gb\r\nyellow open   logstash-2019.12.03-000003         pv927GgbSBeRtq3oZxDFbw   1   1    7864141            0      1.1gb          1.1gb\r\nyellow open   logstash-2019.10.04-000001         V2XZ370dQJ6wg43J36kfCA   1   1  219073641            0     27.2gb         27.2gb\r\ngreen  open   .kibana_1                          n4wwHCrIRma2kOVel_juBg   1   0        707           14    417.1kb        417.1kb\r\n\r\n\r\n\r\nDo you know the root cause ?\r\nThank you in advance\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1489", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1489/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1489/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1489/events", "html_url": "https://github.com/elastic/curator/issues/1489", "id": 526367942, "node_id": "MDU6SXNzdWU1MjYzNjc5NDI=", "number": 1489, "title": "Curator not removing the indices \"curator.exceptions.NoIndices\"", "user": {"login": "vasanthchellappa", "id": 58020634, "node_id": "MDQ6VXNlcjU4MDIwNjM0", "avatar_url": "https://avatars3.githubusercontent.com/u/58020634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vasanthchellappa", "html_url": "https://github.com/vasanthchellappa", "followers_url": "https://api.github.com/users/vasanthchellappa/followers", "following_url": "https://api.github.com/users/vasanthchellappa/following{/other_user}", "gists_url": "https://api.github.com/users/vasanthchellappa/gists{/gist_id}", "starred_url": "https://api.github.com/users/vasanthchellappa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vasanthchellappa/subscriptions", "organizations_url": "https://api.github.com/users/vasanthchellappa/orgs", "repos_url": "https://api.github.com/users/vasanthchellappa/repos", "events_url": "https://api.github.com/users/vasanthchellappa/events{/privacy}", "received_events_url": "https://api.github.com/users/vasanthchellappa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-21T05:07:21Z", "updated_at": "2019-11-22T02:47:51Z", "closed_at": "2019-11-22T02:34:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "When i run curator to delete the indices, throwing me no indices error. I assume i did found the error, but i don't how to resolve the same. Kindly help me on this, here is the config.\r\n\r\nactions:\r\n1:\r\naction: delete_indices\r\ndescription: >-\r\nDelete indices older than 3 days (based on index name), for logstash-\r\nprefixed indices. Ignore the error if the filter does not result in an\r\nactionable list of indices (ignore_empty_list) and exit cleanly.\r\noptions:\r\nignore_empty_list: True\r\ntimeout_override:\r\ncontinue_if_exception: False\r\ndisable_action: False\r\nfilters:\r\n- filtertype: pattern\r\nkind: prefix\r\nvalue: packetbeat-7.4.0-\r\nexclude:\r\n- filtertype: age\r\nsource: name\r\ndirection: older\r\ntimestring: '%Y.%m.%d'\r\nunit: days\r\nunit_count: 3\r\nexclude:\r\n\r\nyellow open packetbeat-7.4.0-2019.10.10-000002 E35rY8gsSwmtCIVynO6UwA 1 1 140115654 0 50.3gb 50.3gb\r\nyellow open filebeat-7.2.0-2019.09.22-000003 KMLGoW2oTACXgGWFfNoiZw 1 1 35392252 0 33.8gb 33.8gb\r\nyellow open packetbeat-7.4.0-2019.10.12-000004 2Qfcl9TfSjGaaZVESTXNww 1 1 141749339 0 50.1gb 50.1gb\r\nyellow open filebeat-7.2.0-2019.10.22-000004 SszNt_e3SVyDxU0aPLnKZw 1 1 30526827 0 27.5gb 27.5gb\r\nyellow open packetbeat-7.4.0-2019.10.08-000001 biESpWH4ReakGkGEEFeALA 1 1 138264429 0 50gb 50gb\r\n\r\nAs per my knowledge, till packetbeat-7.4.0-2019.10.10 curator reading after that -00002 didn't read by curator, i think.\r\n\r\nPlease help me with this.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1479", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1479/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1479/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1479/events", "html_url": "https://github.com/elastic/curator/issues/1479", "id": 513785811, "node_id": "MDU6SXNzdWU1MTM3ODU4MTE=", "number": 1479, "title": "Add Freeze action to docs", "user": {"login": "sastorsl", "id": 12235187, "node_id": "MDQ6VXNlcjEyMjM1MTg3", "avatar_url": "https://avatars3.githubusercontent.com/u/12235187?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sastorsl", "html_url": "https://github.com/sastorsl", "followers_url": "https://api.github.com/users/sastorsl/followers", "following_url": "https://api.github.com/users/sastorsl/following{/other_user}", "gists_url": "https://api.github.com/users/sastorsl/gists{/gist_id}", "starred_url": "https://api.github.com/users/sastorsl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sastorsl/subscriptions", "organizations_url": "https://api.github.com/users/sastorsl/orgs", "repos_url": "https://api.github.com/users/sastorsl/repos", "events_url": "https://api.github.com/users/sastorsl/events{/privacy}", "received_events_url": "https://api.github.com/users/sastorsl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-29T09:16:20Z", "updated_at": "2020-03-09T21:25:15Z", "closed_at": "2020-03-09T21:25:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Add Freeze action to the documentation for Curator.\r\nFreeze action has been added to Curator in PR #1454 / issue #1399 \r\nIt is however not documented as pr https://www.elastic.co/guide/en/elasticsearch/client/curator/current/actions.html\r\n\r\n### Expected Behavior\r\nThe new action to freeze should be documented.\r\n\r\n### Actual Behavior\r\nDocs are missing.\r\n\r\n### Steps to Reproduce the Problem\r\nN/A\r\n\r\n### Specifications\r\n  - Version: 5.8.1\r\n\r\n## Context (Environment)\r\nN/A\r\n\r\n## Detailed Description\r\nN/A", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1478", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1478/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1478/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1478/events", "html_url": "https://github.com/elastic/curator/issues/1478", "id": 513504505, "node_id": "MDU6SXNzdWU1MTM1MDQ1MDU=", "number": 1478, "title": "Compatibility matrix is slightly confusing", "user": {"login": "nerophon", "id": 4341829, "node_id": "MDQ6VXNlcjQzNDE4Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/4341829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nerophon", "html_url": "https://github.com/nerophon", "followers_url": "https://api.github.com/users/nerophon/followers", "following_url": "https://api.github.com/users/nerophon/following{/other_user}", "gists_url": "https://api.github.com/users/nerophon/gists{/gist_id}", "starred_url": "https://api.github.com/users/nerophon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nerophon/subscriptions", "organizations_url": "https://api.github.com/users/nerophon/orgs", "repos_url": "https://api.github.com/users/nerophon/repos", "events_url": "https://api.github.com/users/nerophon/events{/privacy}", "received_events_url": "https://api.github.com/users/nerophon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 186818252, "node_id": "MDU6TGFiZWwxODY4MTgyNTI=", "url": "https://api.github.com/repos/elastic/curator/labels/Documentation", "name": "Documentation", "color": "009800", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-28T19:16:05Z", "updated_at": "2020-03-12T15:48:39Z", "closed_at": "2020-03-12T15:48:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "The compatibility matrix here: https://www.elastic.co/guide/en/elasticsearch/client/curator/5.x/version-compatibility.html\r\n\r\nShows that Curator 5 is compatible with ES 7. However, a customer running Curator 5.6 found that it was not compatible with ES 7.2.\r\n\r\nObviously this is because ES 7.2 (or indeed any 7.x) didn't exist when Curator 5.6 was released. However, the Matrix seems to suggest that ANY Curator 5 will work with ES 7.x. Now, if I change the docs version to Curator 5.6, then the ES 7.x column disappears, so it's correct. But a Google search tends to take you to the latest doc, so I can understand how the customer made the mistake.\r\n\r\nI propose, therefore, a slight change to the rows of the table, to create a delineation between 5.6- and 5.7+. Or something similar.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1467", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1467/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1467/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1467/events", "html_url": "https://github.com/elastic/curator/issues/1467", "id": 492203080, "node_id": "MDU6SXNzdWU0OTIyMDMwODA=", "number": 1467, "title": "filtertype: count does not work", "user": {"login": "hulkk", "id": 24830359, "node_id": "MDQ6VXNlcjI0ODMwMzU5", "avatar_url": "https://avatars3.githubusercontent.com/u/24830359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hulkk", "html_url": "https://github.com/hulkk", "followers_url": "https://api.github.com/users/hulkk/followers", "following_url": "https://api.github.com/users/hulkk/following{/other_user}", "gists_url": "https://api.github.com/users/hulkk/gists{/gist_id}", "starred_url": "https://api.github.com/users/hulkk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hulkk/subscriptions", "organizations_url": "https://api.github.com/users/hulkk/orgs", "repos_url": "https://api.github.com/users/hulkk/repos", "events_url": "https://api.github.com/users/hulkk/events{/privacy}", "received_events_url": "https://api.github.com/users/hulkk/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-11T12:20:35Z", "updated_at": "2019-09-11T15:31:07Z", "closed_at": "2019-09-11T15:31:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "## filtertype: count does not work\r\n<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n### Expected Behavior\r\nFiltertype: count should work as per documentation and limit the count of indices https://www.elastic.co/guide/en/elasticsearch/client/curator/current/filtertype_count.html\r\n\r\n### Actual Behavior\r\nNo matter what number is defined in the filtertype count, all indices are returned.\r\n\r\n### Steps to Reproduce the Problem\r\n1. Have multiple indices in elasticsearch cluster\r\n2. Use filtertype: count in curator action file\r\n\r\n```\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: testing_\r\n    - filtertype: count\r\n      count: 5\r\n```\r\n\r\n### Specifications\r\n  - Version: Curator 5.7.6\r\n  - Version: Elasticsearch 5.6.15\r\n  - Platform: CentOS 7.x\r\n\r\n## Context (Environment)\r\nWe have a large Elasticsearch cluster with dozens of nodes and tens of terabytes of data. Shared filesystem is used for snapshots. Because Elasticsearch doesn't support throttle for shared filesystem repository we try to limit the number of indices that are backed up simultaneously.\r\n\r\nE.g. first step in action file is for backing up the first 10 indices\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1464", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1464/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1464/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1464/events", "html_url": "https://github.com/elastic/curator/issues/1464", "id": 488992396, "node_id": "MDU6SXNzdWU0ODg5OTIzOTY=", "number": 1464, "title": "Dockerfile build from master has issues with pip requests module", "user": {"login": "titpetric", "id": 233360, "node_id": "MDQ6VXNlcjIzMzM2MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/233360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/titpetric", "html_url": "https://github.com/titpetric", "followers_url": "https://api.github.com/users/titpetric/followers", "following_url": "https://api.github.com/users/titpetric/following{/other_user}", "gists_url": "https://api.github.com/users/titpetric/gists{/gist_id}", "starred_url": "https://api.github.com/users/titpetric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/titpetric/subscriptions", "organizations_url": "https://api.github.com/users/titpetric/orgs", "repos_url": "https://api.github.com/users/titpetric/repos", "events_url": "https://api.github.com/users/titpetric/events{/privacy}", "received_events_url": "https://api.github.com/users/titpetric/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-09-04T07:35:05Z", "updated_at": "2020-08-05T12:00:28Z", "closed_at": "2019-11-19T19:46:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Actual Behavior\r\n\r\n```\r\n2019-09-04 07:25:48,007 INFO      Preparing Action ID: 1, \"delete_indices\"\r\n2019-09-04 07:25:48,007 INFO      Creating client object and testing connection\r\n2019-09-04 07:25:48,010 INFO      Instantiating client object\r\n2019-09-04 07:25:48,010 ERROR     Unable to connect to Elasticsearch cluster. Error: Please install requests to use RequestsHttpConnection.\r\n2019-09-04 07:25:48,010 CRITICAL  Curator cannot proceed. Exiting.\r\n```\r\n\r\n### Expected Behavior\r\n\r\nNo error.\r\n\r\n## Detailed Description\r\n\r\nI've created a docker image based of the master branch, and used two samples to provide `/.curator/curator.yml` ([src](https://github.com/elastic/curator/blob/master/examples/curator.yml)) and pass a single action to curator ([src](https://github.com/elastic/curator/blob/master/examples/actions/delete_indices.yml) - enabled as per docs). Running the container however produces an error, and doesn't complete succesfully.\r\n\r\nI'm not particularly sure why this is happening, as the `/curator/lib/requests` location exists in the resulting docker image.\r\n\r\n~~~\r\n/curator $ find | grep req\r\n./lib/requests\r\n./lib/requests/_internal_utils.pyc\r\n./lib/requests/certs.pyc\r\n./lib/requests/status_codes.pyc\r\n./lib/requests/hooks.pyc\r\n./lib/requests/adapters.pyc\r\n./lib/requests/models.pyc\r\n./lib/requests/__version__.pyc\r\n./lib/requests/exceptions.pyc\r\n./lib/requests/cookies.pyc\r\n./lib/requests/packages.pyc\r\n./lib/requests/structures.pyc\r\n./lib/requests/api.pyc\r\n./lib/requests/__init__.pyc\r\n./lib/requests/compat.pyc\r\n./lib/requests/utils.pyc\r\n./lib/requests/auth.pyc\r\n./lib/requests/sessions.pyc\r\n~~~", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1463", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1463/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1463/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1463/events", "html_url": "https://github.com/elastic/curator/issues/1463", "id": 488262481, "node_id": "MDU6SXNzdWU0ODgyNjI0ODE=", "number": 1463, "title": "Trying to run Curator on Amazon Linux 2 ", "user": {"login": "pmcevoy", "id": 1713058, "node_id": "MDQ6VXNlcjE3MTMwNTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1713058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmcevoy", "html_url": "https://github.com/pmcevoy", "followers_url": "https://api.github.com/users/pmcevoy/followers", "following_url": "https://api.github.com/users/pmcevoy/following{/other_user}", "gists_url": "https://api.github.com/users/pmcevoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmcevoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmcevoy/subscriptions", "organizations_url": "https://api.github.com/users/pmcevoy/orgs", "repos_url": "https://api.github.com/users/pmcevoy/repos", "events_url": "https://api.github.com/users/pmcevoy/events{/privacy}", "received_events_url": "https://api.github.com/users/pmcevoy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-02T16:30:58Z", "updated_at": "2019-09-03T11:56:49Z", "closed_at": "2019-09-03T08:45:26Z", "author_association": "NONE", "active_lock_reason": null, "body": " ## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nTrying to run simple Curator commands with `curator action.yml` or `curator_cli`\r\n\r\n\r\n### Actual Behavior\r\n<!--- Tell us what happens instead of the expected behavior -->\r\nSeeing this in logs and cli output:\r\n```\r\n2019-09-02 15:48:34,564 DEBUG              curator.utils             get_client:813  Attempting to verify SSL certificate.\r\n2019-09-02 15:48:34,571 DEBUG              curator.utils             get_client:855  Failed to import a module: /opt/elasticsearch-curator/lib/_posixsubprocess.cpython-36m-x86_64-linux-gnu.so: undefined symbol: _Py_set_inheritable_async_safe\r\n```\r\n\r\n### Steps to Reproduce the Problem\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n  1. Spin up an AWS Amazon Linux 2 instance (eg `amzn2-ami-hvm-2.0.20190618-x86_64-gp2`)\r\n  1. Follow instructions here for enabling the `yum` repo: https://www.elastic.co/guide/en/elasticsearch/client/curator/current/yum-repository.html\r\n  1. I've tried a simple `curator_cli show_indices` (using a valid `.curator/curator.yml` file) and get the attached curator_cli.log\r\n\r\n### Specifications\r\n  - Version: Curator 5.7.6-1\r\n  - Platform: Amazon Linux 2, 20190618\r\n\r\n## Context (Environment)\r\nHave not been able to get curator to run\r\n\r\n## Detailed Description\r\n<!--- Provide a detailed description of the change or addition you are proposing -->\r\nGiven that Amazon Linux 2 does not ship with python3 (I know...)  I have installed that using `yum install python3` and with this result. \r\n```\r\n[ec2-user@ip-10-85-8-182 ~]$ sudo yum list installed | grep python3\r\npython3.x86_64                        3.7.4-1.amzn2.0.1              @amzn2-core\r\npython3-libs.x86_64                   3.7.4-1.amzn2.0.1              @amzn2-core\r\npython3-pip.noarch                    9.0.3-1.amzn2.0.1              @amzn2-core\r\npython3-setuptools.noarch             38.4.0-3.amzn2.0.6             @amzn2-core\r\n```\r\n\r\ncurator.yml\r\n```\r\nclient:\r\n  hosts:\r\n    - vpc-ding-XXXXXXXXXXXXXXXXXXX.eu-west-1.es.amazonaws.com\r\n  port: 443\r\n  url_prefix:\r\n  use_ssl: True\r\n  aws_region: eu-west-1\r\n  aws_sign_request: True\r\n  certificate:\r\n  client_cert:\r\n  client_key:\r\n  ssl_no_validate: false\r\n  http_auth:\r\n  timeout: 30\r\n  master_only: False\r\n\r\nlogging:\r\n  loglevel: DEBUG\r\n  logfile:\r\n  logformat: default\r\n  blacklist: []\r\n```\r\n\r\n[curator_cli.log](https://github.com/elastic/curator/files/3566652/curator_cli.log)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1450", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1450/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1450/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1450/events", "html_url": "https://github.com/elastic/curator/issues/1450", "id": 479889870, "node_id": "MDU6SXNzdWU0Nzk4ODk4NzA=", "number": 1450, "title": "YAMLLoadWarning: calling yaml.load()", "user": {"login": "vincesesto", "id": 3631111, "node_id": "MDQ6VXNlcjM2MzExMTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/3631111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vincesesto", "html_url": "https://github.com/vincesesto", "followers_url": "https://api.github.com/users/vincesesto/followers", "following_url": "https://api.github.com/users/vincesesto/following{/other_user}", "gists_url": "https://api.github.com/users/vincesesto/gists{/gist_id}", "starred_url": "https://api.github.com/users/vincesesto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vincesesto/subscriptions", "organizations_url": "https://api.github.com/users/vincesesto/orgs", "repos_url": "https://api.github.com/users/vincesesto/repos", "events_url": "https://api.github.com/users/vincesesto/events{/privacy}", "received_events_url": "https://api.github.com/users/vincesesto/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-12T23:13:44Z", "updated_at": "2019-08-12T23:17:18Z", "closed_at": "2019-08-12T23:17:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Expected Behavior\r\nScript should not warn about loading YAML file\r\n\r\n### Actual Behavior\r\nWe are getting the following error when running:\r\n \r\n/usr/local/lib/python3.7/site-packages/curator/utils.py:53: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details\r\n \r\nThe problem is this line:\r\n \r\n   try:\r\n        return yaml.load(read_file(path))\r\n    except yaml.scanner.ScannerError as err:    except yaml.scanner.ScannerError as err:\r\n \r\nAs discussed on the page linked in the error this problem needs to be changed to something like:\r\n \r\nreturn yaml.load(read_file(path), Loader=yaml.FullLoader)\r\n \r\nor:\r\n \r\nreturn yaml.load(read_file(path), Loader=yaml.SafeLoader)\r\n\r\n### Steps to Reproduce the Problem\r\nRun the script\r\n\r\n### Specifications\r\n\r\n  - Version: Latest\r\n  - Platform: Linux\r\n  - Subsystem: Python\r\n\r\n\r\n## Context (Environment)\r\nThis is effecting us cause we are seeing:\r\nThe problem is this line:\r\n \r\n   try:\r\n        return yaml.load(read_file(path))\r\n    except yaml.scanner.ScannerError as err:    except yaml.scanner.ScannerError as err:\r\n \r\nAs discussed on the page linked in the error this problem needs to be changed to something like:\r\n \r\nreturn yaml.load(read_file(path), Loader=yaml.FullLoader)\r\n \r\nor:\r\n \r\nreturn yaml.load(read_file(path), Loader=yaml.SafeLoader)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1449", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1449/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1449/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1449/events", "html_url": "https://github.com/elastic/curator/issues/1449", "id": 479643625, "node_id": "MDU6SXNzdWU0Nzk2NDM2MjU=", "number": 1449, "title": "Remote end closed connection without response curator", "user": {"login": "ep4sh", "id": 19505042, "node_id": "MDQ6VXNlcjE5NTA1MDQy", "avatar_url": "https://avatars0.githubusercontent.com/u/19505042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ep4sh", "html_url": "https://github.com/ep4sh", "followers_url": "https://api.github.com/users/ep4sh/followers", "following_url": "https://api.github.com/users/ep4sh/following{/other_user}", "gists_url": "https://api.github.com/users/ep4sh/gists{/gist_id}", "starred_url": "https://api.github.com/users/ep4sh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ep4sh/subscriptions", "organizations_url": "https://api.github.com/users/ep4sh/orgs", "repos_url": "https://api.github.com/users/ep4sh/repos", "events_url": "https://api.github.com/users/ep4sh/events{/privacy}", "received_events_url": "https://api.github.com/users/ep4sh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803251, "node_id": "MDU6TGFiZWw1MjgwMzI1MQ==", "url": "https://api.github.com/repos/elastic/curator/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-12T13:23:28Z", "updated_at": "2019-08-14T15:18:33Z", "closed_at": "2019-08-14T15:18:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "## To submit a bug or report an issue\r\n<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n### Expected Behavior\r\n```\r\n2019-01-09 11:10:06,701 INFO      All indices appear to have been restored.\r\n2019-01-09 11:10:06,702 INFO      Action ID: <22>, \"restore\" completed.\r\n```\r\n### Actual Behavior\r\n```\r\n2019-08-02 03:39:05,457 INFO      Restoring indices \"['applicationlog-trace-2019.01.01']\" from snapshot: logs-weeks-13_2018.12.31_2019.01.09\r\n2019-08-02 03:43:16,676 ERROR     Failed to complete action: restore.  <class 'curator.exceptions.FailedExecution'>: Exception encountered.  Rerun with loglevel DEBUG and/or check Elasticsearch logs for more information. Exception: ConnectionError(('Connection aborted.', RemoteDisconnected('Remote end closed connection without response',))) caused by: ProtocolError(('Connection aborted.', RemoteDisconnected('Remote end closed connection without response',)))\r\n```\r\n### Steps to Reproduce the Problem\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n  1. \r\n```\r\ncurator --config curator.yml restore.yml\r\n```\r\n  2. In the restore.py :\r\n```\r\nclient = es.Elasticsearch([{'host': HOST, 'port': 443, 'use_ssl': True, 'ssl-no-validate': False, 'timeout': 600}])\r\n```\r\n  3. In the config.yml :\r\n```\r\nclient:\r\n  hosts: bla-bla.bla.com\r\n  port: 443\r\n  url_prefix:\r\n  use_ssl: True\r\n  ssl_no_validate: False\r\n  timeout: 30\r\n \r\nlogging:\r\n  loglevel: INFO\r\n  logformat: default\r\n  blacklist: ['elasticsearch', 'urllib3']\r\n```\r\n### Specifications\r\n\r\nCentos 7.6\r\nvirualenv 3\r\nelasticsearch         7.0.2    \r\nelasticsearch-curator 5.7.6\r\n\r\n## Context (Environment)\r\n\r\n\r\n## Detailed Description\r\nMy ES host bla-bla.bla.com working and response all the requests. \r\n4 months ago my restore script worked fine, but I have no changes by this time (checked via git)\r\nPossible changes are versions of the **elasticsearch** and **elasticsearch**-curator packages, but the same time snapshot creating with curator works fine (with similar settings)\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1440", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1440/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1440/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1440/events", "html_url": "https://github.com/elastic/curator/issues/1440", "id": 475876329, "node_id": "MDU6SXNzdWU0NzU4NzYzMjk=", "number": 1440, "title": "Env var for http_auth seems to fail to evaluate?", "user": {"login": "jordansissel", "id": 131818, "node_id": "MDQ6VXNlcjEzMTgxOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/131818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jordansissel", "html_url": "https://github.com/jordansissel", "followers_url": "https://api.github.com/users/jordansissel/followers", "following_url": "https://api.github.com/users/jordansissel/following{/other_user}", "gists_url": "https://api.github.com/users/jordansissel/gists{/gist_id}", "starred_url": "https://api.github.com/users/jordansissel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jordansissel/subscriptions", "organizations_url": "https://api.github.com/users/jordansissel/orgs", "repos_url": "https://api.github.com/users/jordansissel/repos", "events_url": "https://api.github.com/users/jordansissel/events{/privacy}", "received_events_url": "https://api.github.com/users/jordansissel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-01T20:33:56Z", "updated_at": "2020-02-06T20:42:00Z", "closed_at": "2020-02-06T20:42:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A config:\r\n\r\n```\r\nclient:\r\n  # ...\r\n  http_auth: ${CURATOR}\r\n```\r\n\r\n### Expected Behavior\r\n\r\nI believe ${CURATOR} should be evaluated from the env var in the config.\r\n\r\n### Actual Behavior\r\n\r\n```\r\n2019-08-01 20:08:27,485 INFO      Preparing Action ID: 1, \"snapshot\"\r\n/usr/local/lib/python3.6/site-packages/curator/utils.py:53: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\r\n  return yaml.load(read_file(path))\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/site-packages/curator/utils.py\", line 899, in get_client\r\n    check_version(client)\r\n...\r\n  File \"/usr/local/lib/python3.6/site-packages/elasticsearch/connection/base.py\", line 178, in _raise_error\r\n    status_code, error_message, additional_info\r\nelasticsearch.exceptions.AuthenticationException: AuthenticationException(401, 'security_exception', 'invalid basic authentication header value')\r\n```\r\n\r\n### Steps to Reproduce the Problem\r\n\r\nset `config.http_auth: ${VAR}` in config.\r\n\r\n### Specifications\r\n\r\n  - Version: Curator 5.7\r\n  - Platform: Linux, GKE\r\n  - Subsystem: \r\n\r\n\r\n## Context (Environment)\r\n\r\nTrying to pass in credentials via env var.\r\n\r\n```\r\n% kubectl describe cronjob curator\r\n    Environment:\r\n      CURATOR:  <set to the key 'auth' in secret 'curator-creds'>  Optional: false\r\n    Mounts:\r\n      /etc/curator/actions from curator-actions (rw)\r\n      /etc/curator/config from curator-config (rw)\r\n  Volumes:\r\n   curator-config:\r\n    Type:      ConfigMap (a volume populated by a ConfigMap)\r\n    Name:      curator-config.yml\r\n\r\n% kubectl get -o json configmap curator-config.yml | jq -r '.data[\"config.yml\"]' | egrep 'client:|http_auth:'\r\nclient:\r\n  http_auth: ${CURATOR}\r\n\r\n% kubectl get -o json secret curator-creds | jq -r .data.auth | base64 -d; echo\r\ncurator:redacted\r\n```\r\n\r\nSeems like everything should line up, but it's not evaluating ${CURATOR}", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1434", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1434/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1434/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1434/events", "html_url": "https://github.com/elastic/curator/issues/1434", "id": 469619132, "node_id": "MDU6SXNzdWU0Njk2MTkxMzI=", "number": 1434, "title": "Curator Job shows completion even if curator is not able to reach ElasticSearch", "user": {"login": "prashant407", "id": 53031674, "node_id": "MDQ6VXNlcjUzMDMxNjc0", "avatar_url": "https://avatars0.githubusercontent.com/u/53031674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashant407", "html_url": "https://github.com/prashant407", "followers_url": "https://api.github.com/users/prashant407/followers", "following_url": "https://api.github.com/users/prashant407/following{/other_user}", "gists_url": "https://api.github.com/users/prashant407/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashant407/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashant407/subscriptions", "organizations_url": "https://api.github.com/users/prashant407/orgs", "repos_url": "https://api.github.com/users/prashant407/repos", "events_url": "https://api.github.com/users/prashant407/events{/privacy}", "received_events_url": "https://api.github.com/users/prashant407/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-18T07:46:34Z", "updated_at": "2019-07-22T05:09:44Z", "closed_at": "2019-07-19T13:20:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nWe are using ELK in Kubernetes platform. If curator fails to reach elasticsearch ( due to incorrect hostname etc), it is expected to fail but curator job shows completion status without showing any error.\r\n\r\n### Expected Behavior\r\nIf curator fails to delete indices due to connectivity issues, the curator container should fail.\r\n\r\nRelated error log message is available\r\nCurator shows these logs in DEBUG mode.\r\n```\r\n2019-07-17 09:26:10,825 INFO                 curator.cli                    run:151  Preparing Action ID: 1, \"delete_indices\"\r\n2019-07-17 09:26:10,825 DEBUG              curator.utils             get_client:807  kwargs = {'certificate': '/etc/elasticsearch-curator/certs/root-ca.pem', 'hosts': ['elasticsearch1'], 'http_auth': 'admin:admin', 'master_only': False, 'port': 9200, 'ssl_no_validate': True, 'url_prefix': '', 'use_ssl': False, 'aws_key': None, 'client_key': None, 'client_cert': None, 'aws_sign_request': False, 'aws_token': None, 'aws_secret_key': None, 'timeout': 60}\r\n2019-07-17 09:26:10,829 DEBUG              curator.utils             get_client:884  Not using \"requests_aws4auth\" python module to connect\r\n```\r\n\r\n\r\n[root@vm-XX-XX-XX-XX abc-efkc]# kubectl get jobs -n prashant\r\nNAME                          COMPLETIONS   DURATION   AGE\r\necu-curator-1563432960   1/1           16s        6m1s\r\necu-curator-1563433080   1/1           18s        3m59s\r\necu-curator-1563433200   1/1           17s        113s\r\n\r\n\r\n### Steps to Reproduce the Problem\r\n\r\n1. deploy a chart with elasticsearch and curator. Configure incorrect hostname of elasticsearch in curator configuration.\r\nfor ex:- If service name of elasticsearch is elasticsearch, use elasticsearch1 in curator\r\n2. create indices with previous dates\r\n3. check the job status of curator\r\n\r\n### Specifications\r\n  - Version: 5.7.6\r\n  - Platform: Kubernetes\r\n\r\n## Context\r\nIf curator fails, it prints the issue in logs. But, the container still succeeds and as a result, kubernetes job also becomes successful. There should be a better way to notify the user about failure in index deletions.\r\n \r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1431", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1431/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1431/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1431/events", "html_url": "https://github.com/elastic/curator/issues/1431", "id": 467442353, "node_id": "MDU6SXNzdWU0Njc0NDIzNTM=", "number": 1431, "title": "Shrink action's _check_space should only count primary shards", "user": {"login": "joulaud", "id": 48206448, "node_id": "MDQ6VXNlcjQ4MjA2NDQ4", "avatar_url": "https://avatars0.githubusercontent.com/u/48206448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joulaud", "html_url": "https://github.com/joulaud", "followers_url": "https://api.github.com/users/joulaud/followers", "following_url": "https://api.github.com/users/joulaud/following{/other_user}", "gists_url": "https://api.github.com/users/joulaud/gists{/gist_id}", "starred_url": "https://api.github.com/users/joulaud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joulaud/subscriptions", "organizations_url": "https://api.github.com/users/joulaud/orgs", "repos_url": "https://api.github.com/users/joulaud/repos", "events_url": "https://api.github.com/users/joulaud/events{/privacy}", "received_events_url": "https://api.github.com/users/joulaud/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-07-12T14:24:07Z", "updated_at": "2019-07-18T04:55:04Z", "closed_at": "2019-07-18T04:55:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "## To submit a bug or report an issue\r\nShrink action should not move all replicas on the same node.\r\n\r\n### Expected Behavior\r\nWhen doing shrink of an index of 400Gio with 1 replica (thus totaling 800Gio for all shards including replicas) we should be able shrink if one node have 800Gi of disk (one copy of the initial index for 400Gio without the replica and one copy of the shrinked index for 400Gio).\r\n\r\n### Actual Behavior\r\nShrink fails because it wants to move all replicas on the same node needing twice the disk space (1600Gio) and I have no node with enough disk space.\r\n\r\nThe error is :\r\n```\r\n2019-07-12 00:36:19,699 INFO      Trying Action ID: 6, \"shrink\": Shrink myindex indices on the node with the most available space. Delete source index after successful shrink, then reroute the shrunk index with the provided parameters.\r\n2019-07-12 00:36:20,097 INFO      Source index: myindex-2019.07.10 -- Target index: myindex-2019.07.10-shrink\r\n2019-07-12 00:36:23,028 INFO      Skipping node \"elasticmaster-1\": non-data node\r\n2019-07-12 00:36:23,920 INFO      Skipping node \"elasticmaster-2\": non-data node\r\n2019-07-12 00:36:24,944 INFO      Skipping node \"elasticmaster-0\": non-data node\r\n2019-07-12 00:36:27,711 ERROR     Failed to complete action: shrink.  <class 'curator.exceptions.FailedExecution'>: Exception encountered.  Rerun with loglevel DEBUG and/or check Elasticsearch logs for more information. Exception: Insufficient space available for 2x the size of index \"myindex-2019.07.10\", shrinking will exceed space available. Required: 1802523296994, available: 1683553423360\r\n```\r\n\r\n### Steps to Reproduce the Problem\r\n  1. make an index with 5 shards and 1 replica (10 shards total)\r\n  1. try to shrink the index with\u00a0:\r\n      ```yaml\r\n     options:\r\n       disable_action: false\r\n       ignore_empty_list: true\r\n       shrink_node: DETERMINISTIC\r\n       node_filters:\r\n         permit_masters: false\r\n         exclude_nodes:\r\n         - not_this_node\r\n       number_of_shards: 1\r\n       number_of_replicas: 0\r\n       shrink_prefix: null\r\n       shrink_suffix: -shrink\r\n       delete_after: true\r\n       wait_for_active_shards: 1\r\n       extra_settings:\r\n         settings:\r\n           index.codec: best_compression\r\n       wait_for_completion: true\r\n       wait_interval: 9\r\n       max_wait: -1\r\n     ```\r\n  1. wait for error\r\n\r\n### Specifications\r\n\r\n  - Version: curator, version 5.4.1\r\nwith elasticsearch 6.5.4", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1429", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1429/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1429/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1429/events", "html_url": "https://github.com/elastic/curator/issues/1429", "id": 467170245, "node_id": "MDU6SXNzdWU0NjcxNzAyNDU=", "number": 1429, "title": "Alias action fails entire action list when empty list returned, despite warn_if_no_indices and ignore_empty_list settings", "user": {"login": "bar0n36", "id": 30456919, "node_id": "MDQ6VXNlcjMwNDU2OTE5", "avatar_url": "https://avatars1.githubusercontent.com/u/30456919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bar0n36", "html_url": "https://github.com/bar0n36", "followers_url": "https://api.github.com/users/bar0n36/followers", "following_url": "https://api.github.com/users/bar0n36/following{/other_user}", "gists_url": "https://api.github.com/users/bar0n36/gists{/gist_id}", "starred_url": "https://api.github.com/users/bar0n36/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bar0n36/subscriptions", "organizations_url": "https://api.github.com/users/bar0n36/orgs", "repos_url": "https://api.github.com/users/bar0n36/repos", "events_url": "https://api.github.com/users/bar0n36/events{/privacy}", "received_events_url": "https://api.github.com/users/bar0n36/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 161908979, "node_id": "MDU6TGFiZWwxNjE5MDg5Nzk=", "url": "https://api.github.com/repos/elastic/curator/labels/cannot_replicate", "name": "cannot_replicate", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "untergeek", "id": 1020383, "node_id": "MDQ6VXNlcjEwMjAzODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1020383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untergeek", "html_url": "https://github.com/untergeek", "followers_url": "https://api.github.com/users/untergeek/followers", "following_url": "https://api.github.com/users/untergeek/following{/other_user}", "gists_url": "https://api.github.com/users/untergeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/untergeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untergeek/subscriptions", "organizations_url": "https://api.github.com/users/untergeek/orgs", "repos_url": "https://api.github.com/users/untergeek/repos", "events_url": "https://api.github.com/users/untergeek/events{/privacy}", "received_events_url": "https://api.github.com/users/untergeek/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "untergeek", "id": 1020383, "node_id": "MDQ6VXNlcjEwMjAzODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1020383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untergeek", "html_url": "https://github.com/untergeek", "followers_url": "https://api.github.com/users/untergeek/followers", "following_url": "https://api.github.com/users/untergeek/following{/other_user}", "gists_url": "https://api.github.com/users/untergeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/untergeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untergeek/subscriptions", "organizations_url": "https://api.github.com/users/untergeek/orgs", "repos_url": "https://api.github.com/users/untergeek/repos", "events_url": "https://api.github.com/users/untergeek/events{/privacy}", "received_events_url": "https://api.github.com/users/untergeek/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-07-12T00:59:08Z", "updated_at": "2019-08-02T03:28:26Z", "closed_at": "2019-08-02T03:28:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Summary\r\nWhen passing an action list to Curator containing 'Alias' actions, in the event an Alias action filter returns an empty list of indices, the entire action list is failed, rather than just that Alias action. The documentation for both ignore_empty_list and warn_if_no_indices reads that that action should fail, not the entire action list.\r\nEven with ignore_empty_list and warn_if_no_indices set to True, the action and the entire action list fails with the error (incorrect):\r\nFailed to complete action: alias.  <class 'curator.exceptions.ActionError'>: No \"add\" or \"remove\" operations\r\n\r\n**warn_if_no_indices** description:\r\nThis setting specifies whether or not the alias action should continue with a warning or return immediately in the event that the filters in the add or remove section result in an empty index list.\r\n\r\n**ignore_empty_list** description:\r\nWhen the ignore_empty_list option is set to True, the action will exit with an INFO level log message indicating such. If ignore_empty_list is set to False, an ERROR level message will be logged, and Curator will exit with code 1.\r\n\r\n# Expected Behavior\r\nWith either of these values set to True, the Action should exit with a Warning, and the action list should continue on to the next item.\r\n\r\n# Actual Behavior\r\nAs soon as an Alias action with an empty list is encountered, the entire action list fails with an 'Failed to complete action: alias.  <class 'curator.exceptions.ActionError'>: No \"add\" or \"remove\" operations' error\r\n\r\n# Steps to Reproduce the Problem\r\nContents of file 'Action-Alias.yml'\r\n```\r\n# Remove logs-active alias from indices older than X days\r\n  1:\r\n    action: alias\r\n    description: >-\r\n      Remove active alias from logs indices\r\n    options:\r\n      name: logs-active\r\n      ignore_empty_list: True\r\n      disable_action: False\r\n      warn_if_no_indices: (true or false)\r\n    remove:\r\n      filters:\r\n      - filtertype: pattern\r\n        kind: prefix\r\n        value: logs-20\r\n      - filtertype: age\r\n        source: name\r\n        direction: older\r\n        timestring: '%Y.%m.%d'\r\n        unit: days\r\n        unit_count: 5\r\n\r\n# Remove metrics-active alias from indices older than X days\r\n  2:\r\n    action: alias\r\n    description: >-\r\n      Remove active alias from metrics indices\r\n    options:\r\n      name: metrics-active\r\n      ignore_empty_list: True\r\n      disable_action: False\r\n      warn_if_no_indices: (true or false)\r\n    remove:\r\n      filters:\r\n      - filtertype: pattern\r\n        kind: prefix\r\n        value: metrics-20\r\n      - filtertype: age\r\n        source: name\r\n        direction: older\r\n        timestring: '%Y.%m.%d'\r\n        unit: days\r\n        unit_count: 5\r\n```\r\nExecute the action file via command such as:\r\n/usr/bin/curator --config hostConnection.yml Action-Alias.yml\r\n\r\nOutput:\r\n2019-07-12 10:42:02,710 INFO      Preparing Action ID: 1, \"alias\"\r\n2019-07-12 10:42:02,849 INFO      Trying Action ID: 1, \"alias\": Remove active alias from logs indices\r\n2019-07-12 10:42:04,849 INFO      Updating aliases...\r\n2019-07-12 10:42:04,849 ERROR     Failed to complete action: alias.  <class 'curator.exceptions.ActionError'>: No \"add\" or \"remove\" operations\r\n\r\n\r\n# Specifications\r\n  - Version: 5.6\r\n  - Platform: RHEL 6\r\n\r\n# Impact of Issue\r\nDue to this issue I have had to introduce the catch all option 'continue_if_exception: True' to my Action file to allow it to continue. This is not desirable as I would rather if there was a significant failure the curator job failed completely.\r\n\r\n# Proposal:\r\nEnsure that both ignore_empty_list and warn_if_no_indices options are honoured by Curator.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1424", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1424/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1424/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1424/events", "html_url": "https://github.com/elastic/curator/issues/1424", "id": 466283785, "node_id": "MDU6SXNzdWU0NjYyODM3ODU=", "number": 1424, "title": "elasticsearch 7.2.0 is compatible with curator 5.7?", "user": {"login": "TheBags", "id": 2011000, "node_id": "MDQ6VXNlcjIwMTEwMDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/2011000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TheBags", "html_url": "https://github.com/TheBags", "followers_url": "https://api.github.com/users/TheBags/followers", "following_url": "https://api.github.com/users/TheBags/following{/other_user}", "gists_url": "https://api.github.com/users/TheBags/gists{/gist_id}", "starred_url": "https://api.github.com/users/TheBags/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TheBags/subscriptions", "organizations_url": "https://api.github.com/users/TheBags/orgs", "repos_url": "https://api.github.com/users/TheBags/repos", "events_url": "https://api.github.com/users/TheBags/events{/privacy}", "received_events_url": "https://api.github.com/users/TheBags/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-10T12:35:37Z", "updated_at": "2019-07-10T15:19:26Z", "closed_at": "2019-07-10T15:19:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've installed an ELK 7.2 and I found it is not compatible with Curator (5.5.4).\r\n\r\nIs the 5.7 version of curator compatible with elasticsearch 7.2.0?\r\n\r\nTnx,\r\nTheBags", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1423", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1423/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1423/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1423/events", "html_url": "https://github.com/elastic/curator/issues/1423", "id": 466150424, "node_id": "MDU6SXNzdWU0NjYxNTA0MjQ=", "number": 1423, "title": "delete action\uff1bwhy?", "user": {"login": "k-kyle", "id": 22738676, "node_id": "MDQ6VXNlcjIyNzM4Njc2", "avatar_url": "https://avatars1.githubusercontent.com/u/22738676?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-kyle", "html_url": "https://github.com/k-kyle", "followers_url": "https://api.github.com/users/k-kyle/followers", "following_url": "https://api.github.com/users/k-kyle/following{/other_user}", "gists_url": "https://api.github.com/users/k-kyle/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-kyle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-kyle/subscriptions", "organizations_url": "https://api.github.com/users/k-kyle/orgs", "repos_url": "https://api.github.com/users/k-kyle/repos", "events_url": "https://api.github.com/users/k-kyle/events{/privacy}", "received_events_url": "https://api.github.com/users/k-kyle/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-10T07:39:56Z", "updated_at": "2019-07-11T04:49:26Z", "closed_at": "2019-07-11T04:49:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "404 always appears when deleting, and needs to be executed multiple times.\r\n-------------------------------------------------------------------------------------\r\nERROR     Failed to complete action: delete_indices.  <class 'curator.exceptions.FailedExecution'>: Exception encountered.  Rerun with loglevel DEBUG and/or check Elasticsearch logs for more information. Exception: NotFoundError(404, u'index_not_found_exception', u'no such index')", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1421", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1421/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1421/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1421/events", "html_url": "https://github.com/elastic/curator/issues/1421", "id": 464623999, "node_id": "MDU6SXNzdWU0NjQ2MjM5OTk=", "number": 1421, "title": "Curator is throwing   \"get_client:884  Not using \"requests_aws4auth\" python module to connect.\"", "user": {"login": "abhilashkot", "id": 52566526, "node_id": "MDQ6VXNlcjUyNTY2NTI2", "avatar_url": "https://avatars0.githubusercontent.com/u/52566526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abhilashkot", "html_url": "https://github.com/abhilashkot", "followers_url": "https://api.github.com/users/abhilashkot/followers", "following_url": "https://api.github.com/users/abhilashkot/following{/other_user}", "gists_url": "https://api.github.com/users/abhilashkot/gists{/gist_id}", "starred_url": "https://api.github.com/users/abhilashkot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abhilashkot/subscriptions", "organizations_url": "https://api.github.com/users/abhilashkot/orgs", "repos_url": "https://api.github.com/users/abhilashkot/repos", "events_url": "https://api.github.com/users/abhilashkot/events{/privacy}", "received_events_url": "https://api.github.com/users/abhilashkot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803251, "node_id": "MDU6TGFiZWw1MjgwMzI1MQ==", "url": "https://api.github.com/repos/elastic/curator/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-07-05T12:43:40Z", "updated_at": "2019-07-19T13:23:11Z", "closed_at": "2019-07-19T13:23:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "My config file :\r\nclient:\r\n  hosts:\r\n    - 192.168.xx.xx\r\n  port: 9200\r\n  url_prefix:\r\n  use_ssl: true\r\n  certificate: S:\\Elastic\\Config\\certificate-bundle\\client-ca.cer\r\n  client_cert: S:\\Elastic\\Config\\certificate-bundle\\client.cer\r\n  client_key: S:\\Elastic\\Config\\certificate-bundle\\client.key\r\n  ssl_no_validate: false\r\n  http_auth:\r\n  timeout: 300\r\n  master_only: False\r\n\r\n\r\nlogging:\r\n  loglevel: DEBUG\r\n  logfile: test\r\n  logformat: default\r\n  blacklist: ['elasticsearch', 'urllib3']\r\n\r\nAction file:\r\n---\r\nactions:\r\n  1:\r\n    action: delete_indices\r\n    description: >-\r\n\r\n    options:\r\n      ignore_empty_list: True\r\n      timeout_override:\r\n      continue_if_exception: False\r\n      disable_action: False\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: logapp-\r\n      exclude:\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y.%W'\r\n      unit: days\r\n      unit_count: 30\r\n      exclude:\r\n\r\nElastic search yml:\r\n\r\nbootstrap.memory_lock: true\r\ncluster.name: ClusterI4\r\nhttp.port: 9200\r\nnetwork.host: 172.20.xx.xx\r\nnode.data: false\r\nnode.ingest: true\r\nnode.master: true\r\ncluster.remote.connect: true\r\nnode.name: MasterNode\r\npath.data: S:\\Elastic\\Data\r\npath.logs: S:\\Elastic\\Logs\r\ntransport.tcp.port: 9300\r\nxpack.license.self_generated.type: basic\r\nxpack.security.enabled: true\r\ndiscovery.zen.ping.unicast.hosts: [\"172.20.xx.xx\",\"172.20.xx.xx\",\"172.20.xx.xx\"]\r\nxpack.monitoring.collection.enabled: true\r\nxpack.security.transport.ssl.enabled: true\r\nxpack.security.transport.ssl.verification_mode: certificate\r\nxpack.security.transport.ssl.keystore.path: S:\\Elastic\\Config\\certificate-bundle\\elastic-stack-ca.p12\r\nxpack.security.transport.ssl.truststore.path: S:\\Elastic\\Config\\certificate-bundle\\elastic-stack-ca.p12\r\n\r\nDebug error:\r\n2019-07-05 13:29:14,740 DEBUG                curator.cli                    run:108  Client and logging options validated.\r\n2019-07-05 13:29:14,740 DEBUG                curator.cli                    run:112  default_timeout = 300\r\n2019-07-05 13:29:14,740 DEBUG                curator.cli                    run:116  action_file: C:\\curator-5.7.6-amd64\\delete_indices.yml\r\n2019-07-05 13:29:14,756 DEBUG                curator.cli                    run:118  action_config: {'actions': {1: {'action': 'delete_indices', 'description': '', 'options': {'ignore_empty_list': True, 'timeout_override': None, 'continue_if_exception': False, 'disable_action': False}, 'filters': [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'illumeo_-', 'exclude': None}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y.%W', 'unit': 'days', 'unit_count': 30, 'exclude': None}]}}}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'actions': <class 'dict'>}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:27   \"Actions File\" config: {'actions': {1: {'action': 'delete_indices', 'description': '', 'options': {'ignore_empty_list': True, 'timeout_override': None, 'continue_if_exception': False, 'disable_action': False}, 'filters': [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'illumeo_-', 'exclude': None}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y.%W', 'unit': 'days', 'unit_count': 30, 'exclude': None}]}}}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'action': Any(In(['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']), msg=\"action must be one of ['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']\")}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:27   \"action type\" config: {'action': 'delete_indices', 'description': '', 'options': {'ignore_empty_list': True, 'timeout_override': None, 'continue_if_exception': False, 'disable_action': False}, 'filters': [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'illumeo_-', 'exclude': None}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y.%W', 'unit': 'days', 'unit_count': 30, 'exclude': None}]}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'action': Any(In(['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']), msg=\"action must be one of ['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']\"), 'description': Any(<class 'str'>, <class 'str'>, msg=None), 'options': <class 'dict'>, 'filters': <class 'list'>}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:27   \"structure\" config: {'action': 'delete_indices', 'description': '', 'options': {'ignore_empty_list': True, 'timeout_override': None, 'continue_if_exception': False, 'disable_action': False}, 'filters': [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'illumeo_-', 'exclude': None}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y.%W', 'unit': 'days', 'unit_count': 30, 'exclude': None}]}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'allow_ilm_indices': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x0000006B8E86AAE8>, msg=None), msg=None), 'continue_if_exception': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x0000006B8E86AC80>, msg=None), msg=None), 'disable_action': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x0000006B8E86AE18>, msg=None), msg=None), 'ignore_empty_list': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x0000006B8E86E048>, msg=None), msg=None), 'timeout_override': Any(Coerce(int, msg=None), None, msg=None)}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:27   \"options\" config: {'ignore_empty_list': True, 'continue_if_exception': False, 'disable_action': False}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: <function Filters.<locals>.f at 0x0000006B8E851EA0>\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filters\" config: [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'illumeo_-', 'exclude': None}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y.%W', 'unit': 'days', 'unit_count': 30, 'exclude': None}]\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'filtertype': Any(In(['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']), msg=\"filtertype must be one of ['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']\"), 'kind': Any('prefix', 'suffix', 'timestring', 'regex', msg=None), 'value': Any(<class 'str'>, msg=None), 'exclude': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x0000006B8E822488>, msg=None), msg=None)}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filter\" config: {'filtertype': 'pattern', 'kind': 'prefix', 'value': 'illumeo_-'}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.filters                      f:48   Filter #0: {'filtertype': 'pattern', 'kind': 'prefix', 'value': 'illumeo_-', 'exclude': False}\r\n2019-07-05 13:29:14,756 DEBUG     curator.defaults.filtertypes                    age:55   AGE FILTER = [{'direction': Any('older', 'younger', msg=None)}, {'unit': Any('seconds', 'minutes', 'hours', 'days', 'weeks', 'months', 'years', msg=None)}, {'unit_count': Coerce(int, msg=None)}, {'unit_count_pattern': Any(<class 'str'>, msg=None)}, {'epoch': Any(Coerce(int, msg=None), None, msg=None)}, {'exclude': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x0000006B8E86A620>, msg=None), msg=None)}, {'source': Any('name', 'creation_date', 'field_stats', msg=None)}, {'stats_result': Any('min_value', 'max_value', msg=None)}, {'timestring': Any(<class 'str'>, msg=None)}]\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'filtertype': Any(In(['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']), msg=\"filtertype must be one of ['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']\"), 'direction': Any('older', 'younger', msg=None), 'unit': Any('seconds', 'minutes', 'hours', 'days', 'weeks', 'months', 'years', msg=None), 'unit_count': Coerce(int, msg=None), 'unit_count_pattern': Any(<class 'str'>, msg=None), 'epoch': Any(Coerce(int, msg=None), None, msg=None), 'exclude': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x0000006B8E86A620>, msg=None), msg=None), 'source': Any('name', 'creation_date', 'field_stats', msg=None), 'stats_result': Any('min_value', 'max_value', msg=None), 'timestring': Any(<class 'str'>, msg=None)}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filter\" config: {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y.%W', 'unit': 'days', 'unit_count': 30}\r\n2019-07-05 13:29:14,756 DEBUG     curator.validators.filters                      f:48   Filter #1: {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y.%W', 'unit': 'days', 'unit_count': 30, 'exclude': False, 'stats_result': 'min_value', 'epoch': None}\r\n2019-07-05 13:29:14,756 DEBUG                curator.cli                    run:121  Full list of actions: {1: {'action': 'delete_indices', 'description': '', 'options': {'ignore_empty_list': True, 'continue_if_exception': False, 'disable_action': False, 'timeout_override': None, 'allow_ilm_indices': False}, 'filters': [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'illumeo_-', 'exclude': False}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y.%W', 'unit': 'days', 'unit_count': 30, 'exclude': False, 'stats_result': 'min_value', 'epoch': None}]}}\r\n2019-07-05 13:29:14,756 DEBUG                curator.cli                    run:126  action_disabled = False\r\n2019-07-05 13:29:14,756 DEBUG                curator.cli                    run:130  continue_if_exception = False\r\n2019-07-05 13:29:14,756 DEBUG                curator.cli                    run:132  timeout_override = None\r\n2019-07-05 13:29:14,756 DEBUG                curator.cli                    run:134  ignore_empty_list = True\r\n2019-07-05 13:29:14,756 DEBUG                curator.cli                    run:136  allow_ilm_indices = False\r\n2019-07-05 13:29:14,756 INFO                 curator.cli                    run:151  Preparing Action ID: 1, \"delete_indices\"\r\n2019-07-05 13:29:14,756 DEBUG              curator.utils             get_client:807  kwargs = {'hosts': ['192.168.xx.xx'], 'port': 9200, 'use_ssl': True, 'certificate': 'S:\\\\Elastic\\\\Config\\\\certificate-bundle\\\\cacert.pem', 'client_cert': 'S:\\\\Elastic\\\\Config\\\\certificate-bundle\\\\client.cer', 'client_key': 'S:\\\\Elastic\\\\Config\\\\certificate-bundle\\\\client.key', 'ssl_no_validate': False, 'master_only': False, 'aws_token': None, 'http_auth': None, 'aws_key': None, 'url_prefix': '', 'aws_secret_key': None, 'aws_sign_request': False, 'timeout': 300}\r\n2019-07-05 13:29:14,756 DEBUG              curator.utils             get_client:813  Attempting to verify SSL certificate.\r\n2019-07-05 13:29:14,756 DEBUG              curator.utils             get_client:884  Not using \"requests_aws4auth\" python module to connect.\r\n\r\n\"Not using \"requests_aws4auth\" python module to connect. \"what does this mean?\r\n\r\nNote: for wlastic search i am using ca.p12 certificate, the above error is because of this?\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1419", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1419/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1419/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1419/events", "html_url": "https://github.com/elastic/curator/issues/1419", "id": 463060007, "node_id": "MDU6SXNzdWU0NjMwNjAwMDc=", "number": 1419, "title": "Sync with inBackground doesnt complete if curator client is closed", "user": {"login": "shiveshr", "id": 13659022, "node_id": "MDQ6VXNlcjEzNjU5MDIy", "avatar_url": "https://avatars2.githubusercontent.com/u/13659022?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shiveshr", "html_url": "https://github.com/shiveshr", "followers_url": "https://api.github.com/users/shiveshr/followers", "following_url": "https://api.github.com/users/shiveshr/following{/other_user}", "gists_url": "https://api.github.com/users/shiveshr/gists{/gist_id}", "starred_url": "https://api.github.com/users/shiveshr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shiveshr/subscriptions", "organizations_url": "https://api.github.com/users/shiveshr/orgs", "repos_url": "https://api.github.com/users/shiveshr/repos", "events_url": "https://api.github.com/users/shiveshr/events{/privacy}", "received_events_url": "https://api.github.com/users/shiveshr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803250, "node_id": "MDU6TGFiZWw1MjgwMzI1MA==", "url": "https://api.github.com/repos/elastic/curator/labels/invalid", "name": "invalid", "color": "e6e6e6", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-02T07:10:41Z", "updated_at": "2019-07-02T18:22:26Z", "closed_at": "2019-07-02T18:22:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "## For usage questions and help\r\nPlease create a topic at https://discuss.elastic.co/c/elasticsearch\r\n\r\nPerhaps a topic there already has an answer for you!\r\n\r\n## To submit a bug or report an issue\r\n\r\nCalling sync with a callback on a closed client doesnt fail synchronously. Nor is the callback invoked with failure details. \r\n\r\n```\r\nclient.close();\r\nclient.sync().inBackground(callback, executor).forPath(path);\r\n```\r\n### Expected Behavior\r\nCallback should be called with IllegalStateException or any other appropriate failure. But the callback should be invoked just like it is for all other types of calls. \r\n\r\n### Actual Behavior\r\nThe callback is never called. Neither is the call to invoke sync failed synchronously. \r\n\r\n### Steps to Reproduce the Problem\r\n\r\n```\r\nclient.close();\r\nclient.sync().inBackground(callback, executor).forPath(path);\r\n```\r\n\r\n### Specifications\r\n\r\n  - Version: 4.0.1\r\n  - Platform: linux\r\n  - Subsystem: ubuntu\r\n\r\n\r\n## Context (Environment)\r\nMy application make asynchronous calls to zookeeper using curator and registers a callback. \r\nDuring shutdown curator client could be shutdown while other modules still use the client. \r\nTheir calls into curator should fail if it is shutdown. All other calls fail except `sync`. \r\n \r\n## Detailed Description\r\n<!--- Provide a detailed description of the change or addition you are proposing -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1418", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1418/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1418/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1418/events", "html_url": "https://github.com/elastic/curator/issues/1418", "id": 460791703, "node_id": "MDU6SXNzdWU0NjA3OTE3MDM=", "number": 1418, "title": "ILM policy + allow_ilm_indices + rollover issue", "user": {"login": "krisATelastic", "id": 28517957, "node_id": "MDQ6VXNlcjI4NTE3OTU3", "avatar_url": "https://avatars0.githubusercontent.com/u/28517957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/krisATelastic", "html_url": "https://github.com/krisATelastic", "followers_url": "https://api.github.com/users/krisATelastic/followers", "following_url": "https://api.github.com/users/krisATelastic/following{/other_user}", "gists_url": "https://api.github.com/users/krisATelastic/gists{/gist_id}", "starred_url": "https://api.github.com/users/krisATelastic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/krisATelastic/subscriptions", "organizations_url": "https://api.github.com/users/krisATelastic/orgs", "repos_url": "https://api.github.com/users/krisATelastic/repos", "events_url": "https://api.github.com/users/krisATelastic/events{/privacy}", "received_events_url": "https://api.github.com/users/krisATelastic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-26T06:47:50Z", "updated_at": "2019-07-19T11:22:10Z", "closed_at": "2019-07-19T11:22:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Issue\r\nWhen using the rollover function of Curator against indices within a cluster, it seems to ignore the `allow_ilm_indices` when the `options.name` is an alias and will roll the index behind that alias regardless\r\n\r\n### Expected Behavior\r\nIf the indices within that alias that are being rolled are tied to an ILM policy, do not rollover\r\n\r\n### Actual Behavior\r\nI found in testing that omitting the `allow_ilm_indices` setting or even setting to false, the rollover job will still roll my test Metricbeat index which is tied to an ILM policy;\r\n_GET metricbeat-6.7.1-*/_settings_\r\n```\r\n{\r\n  \"metricbeat-6.7.1-2019.06.26-000001\" : {\r\n    \"settings\" : {\r\n      \"index\" : {\r\n        \"lifecycle\" : {\r\n          \"name\" : \"beats-default-policy\",\r\n          \"rollover_alias\" : \"metricbeat-6.7.1\"\r\n        },\r\n...\r\n}\r\n```\r\nAfter executing the action job\r\n```\r\n2019-06-26 06:27:11,840 INFO      Preparing Action ID: 1, \"rollover\"\r\n2019-06-26 06:27:11,849 INFO      Trying Action ID: 1, \"rollover\": Rollover the index associated with index 'metricbeats-system'\r\n2019-06-26 06:27:11,852 INFO      Performing index rollover\r\n2019-06-26 06:27:12,018 INFO      Old index metricbeat-6.7.1-2019.06.26-000001 rolled over to new index metricbeat-6.7.1-2019.06.26-000002\r\n2019-06-26 06:27:12,018 INFO      Action ID: 1, \"rollover\" completed.\r\n2019-06-26 06:27:12,018 INFO      Job completed.\r\n```\r\n_action.yml_\r\n```\r\n---\r\nactions:\r\n  1:\r\n    action: rollover\r\n    description: Rollover the index associated with index 'metricbeats-system'\r\n    options:\r\n      continue_if_exception: true\r\n      name: metricbeat-6.7.1\r\n      conditions:\r\n        max_docs: 18000000\r\n        max_size: 1m\r\n```\r\n### Steps to Reproduce the Problem\r\n1. Build Elasticsearch cluster, with any form of data source, Metricbeat is easy as it ties to ILM\r\n2. Configure metricbeat with ILM policy, simpler just to use `metricbeat setup -e`...\r\n\r\n### Specifications\r\n\r\n  - Version: `6.7.1`\r\n  - Platform: `Ubuntu 18.04 LTS`\r\n  - Subsystem:\r\n\r\n## Detailed Description\r\nReporting this issue as it may affect other users migrating over to ILM who may be using aliases and rollover policies also, it may affect them too. Either a docs tweak or a code change would most likely help avoid any issues with clashing policies.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1417", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1417/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1417/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1417/events", "html_url": "https://github.com/elastic/curator/issues/1417", "id": 460298340, "node_id": "MDU6SXNzdWU0NjAyOTgzNDA=", "number": 1417, "title": "curator 5.6.0 deletes indices newer than unit_count", "user": {"login": "ayushmathur86", "id": 11223489, "node_id": "MDQ6VXNlcjExMjIzNDg5", "avatar_url": "https://avatars0.githubusercontent.com/u/11223489?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ayushmathur86", "html_url": "https://github.com/ayushmathur86", "followers_url": "https://api.github.com/users/ayushmathur86/followers", "following_url": "https://api.github.com/users/ayushmathur86/following{/other_user}", "gists_url": "https://api.github.com/users/ayushmathur86/gists{/gist_id}", "starred_url": "https://api.github.com/users/ayushmathur86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ayushmathur86/subscriptions", "organizations_url": "https://api.github.com/users/ayushmathur86/orgs", "repos_url": "https://api.github.com/users/ayushmathur86/repos", "events_url": "https://api.github.com/users/ayushmathur86/events{/privacy}", "received_events_url": "https://api.github.com/users/ayushmathur86/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-25T08:59:45Z", "updated_at": "2019-07-18T04:41:20Z", "closed_at": "2019-07-18T04:41:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Elastic Stack version: 6.2.3\r\nCurator Version : 5.6.0\r\n\r\nWe have configured curator to delete the indices which are older than 14 days where indices are rolled on daily basis.\r\nThe configuration looks like:\r\n```\r\naction: delete_indices\r\n    description: \"Delete \\\"security\\\" indices older than 14 days,(ignore_empty_list) and exit cleanly.\"\r\n    filters: \r\n      - \r\n        exclude: ~\r\n        filtertype: pattern\r\n        kind: prefix\r\n        value: security\r\n      - \r\n        direction: older\r\n        exclude: ~\r\n        filtertype: age\r\n        source: name\r\n        timestring: \"%Y.%m.%d\"\r\n        unit: days\r\n        unit_count: 14\r\n    options: \r\n      continue_if_exception: false\r\n      disable_action: false\r\n      ignore_empty_list: true\r\n      timeout_override: ~\r\n```\r\nHowever, it has been noticed several times that curator is also deleting the newer indices. \r\nFor 24th June midnight run, the output was:\r\n```\r\n2019-06-25 00:04:46,739 INFO      Trying Action ID: 15, \"delete_indices\": Delete \"security\" indices older than 14 days,(ignore_empty_list) and exit cleanly.\r\n--\r\n\u00a0 | 2019-06-25 00:04:58,935 INFO      Deleting selected indices: [u'security-logging.ec2.2019.06.10', u'security-logging.ec2.2019.06.11', u'security-logging.ec2.2019.06.09', u'security-logging.ec2.2019.06.08', u'security-logging.ec2.2018.06.22', u'security-logging.ec2.2018.06.23', u'security-logging.ec2.2018.06.21', u'security-logging.ec2.2018.06.24', u'security-logging.ec2.2018.06.25']\r\n\u00a0 | 2019-06-25 00:04:58,935 INFO      ---deleting index security-logging.ec2.2019.06.10\r\n\u00a0 | 2019-06-25 00:04:58,936 INFO      ---deleting index security-logging.ec2.2019.06.11\r\n\u00a0 | 2019-06-25 00:04:58,936 INFO      ---deleting index security-logging.ec2.2019.06.09\r\n\u00a0 | 2019-06-25 00:04:58,936 INFO      ---deleting index security-logging.ec2.2019.06.08\r\n\u00a0 | 2019-06-25 00:04:58,936 INFO      ---deleting index security-logging.ec2.2018.06.22\r\n\u00a0 | 2019-06-25 00:04:58,936 INFO      ---deleting index security-logging.ec2.2018.06.23\r\n\u00a0 | 2019-06-25 00:04:58,936 INFO      ---deleting index security-logging.ec2.2018.06.21\r\n\u00a0 | 2019-06-25 00:04:58,936 INFO      ---deleting index security-logging.ec2.2018.06.24\r\n\u00a0 | 2019-06-25 00:04:58,936 INFO      ---deleting index security-logging.ec2.2018.06.25\r\n\u00a0 | 2019-06-25 00:05:01,089 INFO      Action ID: 15, \"delete_indices\" completed.\r\n\u00a0 | 2019-06-25 00:05:01,089 INFO      Job completed.\r\n```\r\nwhere I was not expecting indices dated from 21st June onwards to be deleted.\r\nHas someone else experienced such issue ? How did you resolve this ?\r\n\r\nThanks in advance.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1413", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1413/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1413/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1413/events", "html_url": "https://github.com/elastic/curator/issues/1413", "id": 452233089, "node_id": "MDU6SXNzdWU0NTIyMzMwODk=", "number": 1413, "title": "No error message when basic auth is missing", "user": {"login": "rfalke", "id": 1261007, "node_id": "MDQ6VXNlcjEyNjEwMDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/1261007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rfalke", "html_url": "https://github.com/rfalke", "followers_url": "https://api.github.com/users/rfalke/followers", "following_url": "https://api.github.com/users/rfalke/following{/other_user}", "gists_url": "https://api.github.com/users/rfalke/gists{/gist_id}", "starred_url": "https://api.github.com/users/rfalke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rfalke/subscriptions", "organizations_url": "https://api.github.com/users/rfalke/orgs", "repos_url": "https://api.github.com/users/rfalke/repos", "events_url": "https://api.github.com/users/rfalke/events{/privacy}", "received_events_url": "https://api.github.com/users/rfalke/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-04T22:19:57Z", "updated_at": "2019-08-08T02:38:22Z", "closed_at": "2019-08-08T02:38:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "## To submit a bug or report an issue\r\n\r\nAfter enabling security in the elasticsearch cluster I expected that running curator without any config file changes produce an error message. But it doesn't.\r\n\r\n### Expected Behavior\r\nAn error message.\r\n\r\n### Actual Behavior\r\n```\r\n$ curator --config /etc/curator-config.yml /etc/curator-actions.yml\r\n2019-06-04 22:13:14,892 INFO      Preparing Action ID: 1, \"delete_indices\"\r\n$\r\n```\r\n\r\nAfter I add a line `http_auth: \"FOO:BAR\"` I get:\r\n\r\n```\r\n$ curator --config /etc/curator-config.yml /etc/curator-actions.yml\r\n2019-06-04 22:14:22,781 INFO      Preparing Action ID: 1, \"delete_indices\"\r\n2019-06-04 22:14:22,808 INFO      Trying Action ID: 1, \"delete_indices\": delete logstash- after 60 days\r\n2019-06-04 22:14:23,926 INFO      Skipping action \"delete_indices\" due to empty list: <class 'curator.exceptions.NoIndices'>\r\n2019-06-04 22:14:23,926 INFO      Action ID: 1, \"delete_indices\" completed.\r\n...\r\n2019-06-04 22:14:25,048 INFO      Job completed.\r\n$\r\n```\r\n\r\n### Steps to Reproduce the Problem\r\n\r\nRunning the bad case with DEBUG:\r\n```\r\n...\r\n2019-06-04 22:16:27,688 INFO                 curator.cli                    run:146  Preparing Action ID: 1, \"delete_indices\"\r\n2019-06-04 22:16:27,688 DEBUG              curator.utils             get_client:802  kwargs = {'hosts': ['127.0.0.1'], 'port': 9200, 'use_ssl': False, 'ssl_no_validate': False, 'master_only': False, 'client_cert': None, 'http_auth': None, 'aws_secret_key': None, 'aws_token': None, 'certificate': None, 'aws_sign_request': False, 'client_key': None, 'aws_key': None, 'url_prefix': '', 'timeout': 240}\r\n2019-06-04 22:16:27,704 DEBUG              curator.utils             get_client:879  Not using \"requests_aws4auth\" python module to connect.\r\n$\r\n```\r\n\r\nThe good case:\r\n```\r\n...\r\n2019-06-04 22:16:10,938 INFO                 curator.cli                    run:146  Preparing Action ID: 1, \"delete_indices\"\r\n2019-06-04 22:16:10,938 DEBUG              curator.utils             get_client:802  kwargs = {'hosts': ['127.0.0.1'], 'port': 9200, 'use_ssl': False, 'ssl_no_validate': False, 'http_auth': 'elastic:kCZ3EdprDvu4t1EsYdNo', 'master_only': False, 'client_cert': None, 'url_prefix': '', 'aws_sign_request': False, 'aws_token': None, 'aws_key': None, 'aws_secret_key': None, 'certificate': None, 'client_key': None, 'timeout': 240}\r\n2019-06-04 22:16:10,948 DEBUG              curator.utils             get_client:879  Not using \"requests_aws4auth\" python module to connect.\r\n2019-06-04 22:16:10,993 DEBUG              curator.utils          check_version:688  Detected Elasticsearch version 6.7.1\r\n2019-06-04 22:16:10,993 DEBUG                curator.cli                    run:161  client is <class 'elasticsearch.client.Elasticsearch'>\r\n...\r\n```\r\n\r\n### Specifications\r\n\r\n```\r\n$ curator --version\r\ncurator, version 5.6.0\r\n$ uname -s -r -v -m -p -i -p\r\nLinux 4.15.0-1045-azure #49-Ubuntu SMP Mon May 13 16:30:09 UTC 2019 x86_64 x86_64 x86_64\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1412", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1412/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1412/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1412/events", "html_url": "https://github.com/elastic/curator/issues/1412", "id": 452219633, "node_id": "MDU6SXNzdWU0NTIyMTk2MzM=", "number": 1412, "title": "Close action fails when index has unassigned shards", "user": {"login": "psypuff", "id": 5609637, "node_id": "MDQ6VXNlcjU2MDk2Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5609637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psypuff", "html_url": "https://github.com/psypuff", "followers_url": "https://api.github.com/users/psypuff/followers", "following_url": "https://api.github.com/users/psypuff/following{/other_user}", "gists_url": "https://api.github.com/users/psypuff/gists{/gist_id}", "starred_url": "https://api.github.com/users/psypuff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psypuff/subscriptions", "organizations_url": "https://api.github.com/users/psypuff/orgs", "repos_url": "https://api.github.com/users/psypuff/repos", "events_url": "https://api.github.com/users/psypuff/events{/privacy}", "received_events_url": "https://api.github.com/users/psypuff/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-04T21:37:29Z", "updated_at": "2019-07-21T11:22:31Z", "closed_at": "2019-07-21T11:22:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Expected Behavior\r\nClose action should be able to close indices with unassigned shards.\r\n\r\n### Actual Behavior\r\nClose action fails closing indices with unassigned shards.\r\n\r\n### Steps to Reproduce the Problem\r\n  1. Spin up a cluster with at least 2 data nodes\r\n  1. Create an index\r\n  1. Terminate a data node containing at least one of its shards (make the index go red)\r\n  1. Invoke Curator's close action on the index\r\n\r\n### Specifications\r\n\r\n  - Version: 5.4.1 (By looking at the code it seem to also affect the latest, 5.7.6 as of today, but haven't tested yet)\r\n  - Platform: Docker on Ubuntu 18.04\r\n  - Subsystem: Python 2.7\r\n\r\n\r\n## Context (Environment)\r\nWe use Curator for periodically restoring prod data on another cluster, the flow consists of 3 actions - close -> restore -> open (in case the restore fails and the index is left closed). Normally it works well, once every now and then a node gets terminated and we're left with unassigned shards (not an issue, intentionally not using replicas here), as we're constantly restoring the data we expect the restore flow to work in this case as well but we find ourselves manually closing indices each time it happens.\r\n\r\n## Detailed Description\r\nThe `_close` API has no issues with unassigned shards, the actual part that fails is the `_flush` [API call right before that](https://github.com/elastic/curator/blob/master/curator/actions.py#L307). Obviously, in most cases, one would want to flush before closing an index, but the current implementation renders Curator's ability to restore pretty useless where it's most needed (e.g. data loss).\r\n2 suggestions on how to overcome this issue:\r\n1. Make the `_flush` API call optional via a `--skip-flush` flag.\r\n2. Check for unassigned shards for each index and avoid flushing those.\r\n\r\nAnyway - the `_flush` API is not an integral part of the `_close` API so it's kinda weird to enforce it in Curator's close action IMO", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1409", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1409/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1409/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1409/events", "html_url": "https://github.com/elastic/curator/issues/1409", "id": 451846857, "node_id": "MDU6SXNzdWU0NTE4NDY4NTc=", "number": 1409, "title": "ReadonlyREST plugin for Elasticsearch requires X-Api-key header to be set", "user": {"login": "vetler", "id": 1216, "node_id": "MDQ6VXNlcjEyMTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/1216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vetler", "html_url": "https://github.com/vetler", "followers_url": "https://api.github.com/users/vetler/followers", "following_url": "https://api.github.com/users/vetler/following{/other_user}", "gists_url": "https://api.github.com/users/vetler/gists{/gist_id}", "starred_url": "https://api.github.com/users/vetler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vetler/subscriptions", "organizations_url": "https://api.github.com/users/vetler/orgs", "repos_url": "https://api.github.com/users/vetler/repos", "events_url": "https://api.github.com/users/vetler/events{/privacy}", "received_events_url": "https://api.github.com/users/vetler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-04T07:49:08Z", "updated_at": "2019-06-11T19:28:12Z", "closed_at": "2019-06-11T19:28:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Expected Behavior\r\nReadonlyREST plugin requires X-Api-key to be set to the correct value, it should be possible to set this.\r\n\r\n### Actual Behavior\r\nIt is not possible to configure Curator to set the X-Api-key header when accessing Elasticsearch.\r\n\r\n### Steps to Reproduce the Problem\r\n  1. Run Elasticsearch with ReadonlyREST enabled and API key required to access Elasticsearch\r\n  1. Try to run Curator\r\n  1. It fails, because Curator can't set the X-Api-key header with the required API key\r\n\r\n## Context (Environment)\r\nExample readonlyrest configuration (set in elasticsearch.yml:\r\n```\r\nreadonlyrest:\r\n  access_control_rules:\r\n    - name: \"api key\"\r\n      type: allow\r\n      api_keys: [\"foo\"]\r\n```\r\n\r\n## Detailed Description\r\nI propose adding an api_key setting in the config file.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1408", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1408/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1408/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1408/events", "html_url": "https://github.com/elastic/curator/issues/1408", "id": 448868047, "node_id": "MDU6SXNzdWU0NDg4NjgwNDc=", "number": 1408, "title": "Curator Stop itself without reason apparent ", "user": {"login": "Theoooooo", "id": 33425208, "node_id": "MDQ6VXNlcjMzNDI1MjA4", "avatar_url": "https://avatars1.githubusercontent.com/u/33425208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Theoooooo", "html_url": "https://github.com/Theoooooo", "followers_url": "https://api.github.com/users/Theoooooo/followers", "following_url": "https://api.github.com/users/Theoooooo/following{/other_user}", "gists_url": "https://api.github.com/users/Theoooooo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Theoooooo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Theoooooo/subscriptions", "organizations_url": "https://api.github.com/users/Theoooooo/orgs", "repos_url": "https://api.github.com/users/Theoooooo/repos", "events_url": "https://api.github.com/users/Theoooooo/events{/privacy}", "received_events_url": "https://api.github.com/users/Theoooooo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-27T13:50:43Z", "updated_at": "2019-05-31T07:23:25Z", "closed_at": "2019-05-28T01:06:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Upgrade my elasticsearch cluster from 6.7.0 to 7.1.0. Since, i wasn't able to do maintenance of my indices with Curator. The logs of curator just stop at \"Preparing Action ID: 1, \"delete_indices\"\" and there is no error output by curator\r\n\r\n### Expected Behavior\r\nCurator use the http auth provided and delete every indices i configure in the action file and output the logs to the log_file i configured\r\n\r\n### Actual Behavior\r\nCurator start his action and stop at the first Action ID and exit without any explicit error\r\n\r\n### Steps to Reproduce the Problem\r\nJust upgrade my ES cluster from 6.7.0 to 7.1.0 and then after i wasn't able to use Curator.\r\n\r\n### Specifications\r\n\r\n  - Version: 5.6.0\r\n  - Platform: CentOS 7\r\n\r\n## Context (Environment)\r\nI got a 3 nodes elasticsearch cluster with multiple users around it. I create a specific user account with many rights to do the maintenance of my indexes.\r\n\r\n## Detailed Description\r\nI provide you the config files and the logs outputed by Curator : \r\n\r\naction.yml : \r\n```\r\nactions:\r\n  1:\r\n    action: delete_indices\r\n    description: \"OPTIONAL DESCRIPTION\"\r\n    options:\r\n      continue_if_exception: True\r\n      disable_action: False\r\n      ignore_empty_list: True\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: sonicwall\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y-%m-%d'\r\n      unit: days\r\n      unit_count: 20\r\n```\r\n\r\ncurator.yml : \r\n``` \r\nclient:\r\n  hosts:\r\n    - 172.31.18.211\r\n  port: 9200\r\n  url_prefix:\r\n  use_ssl: False\r\n  certificate:\r\n  client_cert:\r\n  client_key:\r\n  ssl_no_validate: True\r\n  http_auth: mylog:mypassword\r\n  timeout: 30\r\n  master_only: False\r\n\r\nlogging:\r\n  loglevel: DEBUG\r\n  logfile:\r\n  logformat: default\r\n  blacklist: ['elasticsearch', 'urllib3']\r\n```\r\n\r\nlogs : \r\n```curator --config /etc/curator/curator.yml /etc/curator/actions.yml\r\n2019-05-27 15:40:07,995 DEBUG                curator.cli                    run:108  Client and logging options validated.\r\n2019-05-27 15:40:07,996 DEBUG                curator.cli                    run:112  default_timeout = 30\r\n2019-05-27 15:40:07,996 DEBUG                curator.cli                    run:116  action_file: /etc/curator/actions.yml\r\n2019-05-27 15:40:08,007 DEBUG                curator.cli                    run:118  action_config: {'actions': {1: {'action': 'delete_indices', 'description': 'OPTIONAL DESCRIPTION', 'options': {'continue_if_exception': True, 'disable_action': False, 'ignore_empty_list': True}, 'filters': [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'sonicwall'}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y-%m-%d', 'unit': 'days', 'unit_count': 20}]}}}\r\n2019-05-27 15:40:08,008 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'actions': <class 'dict'>}\r\n2019-05-27 15:40:08,008 DEBUG     curator.validators.SchemaCheck               __init__:27   \"Actions File\" config: {'actions': {1: {'action': 'delete_indices', 'description': 'OPTIONAL DESCRIPTION', 'options': {'continue_if_exception': True, 'disable_action': False, 'ignore_empty_list': True}, 'filters': [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'sonicwall'}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y-%m-%d', 'unit': 'days', 'unit_count': 20}]}}}\r\n2019-05-27 15:40:08,009 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'action': Any(In(['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']), msg=\"action must be one of ['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']\")}\r\n2019-05-27 15:40:08,009 DEBUG     curator.validators.SchemaCheck               __init__:27   \"action type\" config: {'action': 'delete_indices', 'description': 'OPTIONAL DESCRIPTION', 'options': {'continue_if_exception': True, 'disable_action': False, 'ignore_empty_list': True}, 'filters': [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'sonicwall'}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y-%m-%d', 'unit': 'days', 'unit_count': 20}]}\r\n2019-05-27 15:40:08,014 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'action': Any(In(['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']), msg=\"action must be one of ['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']\"), 'description': Any(<class 'str'>, <class 'str'>, msg=None), 'options': <class 'dict'>, 'filters': <class 'list'>}\r\n2019-05-27 15:40:08,014 DEBUG     curator.validators.SchemaCheck               __init__:27   \"structure\" config: {'action': 'delete_indices', 'description': 'OPTIONAL DESCRIPTION', 'options': {'continue_if_exception': True, 'disable_action': False, 'ignore_empty_list': True}, 'filters': [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'sonicwall'}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y-%m-%d', 'unit': 'days', 'unit_count': 20}]}\r\n2019-05-27 15:40:08,024 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'allow_ilm_indices': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f5c56c5d1e0>, msg=None), msg=None), 'continue_if_exception': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f5c56c5d378>, msg=None), msg=None), 'disable_action': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f5c56c5d510>, msg=None), msg=None), 'ignore_empty_list': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f5c56c5d6a8>, msg=None), msg=None), 'timeout_override': Any(Coerce(int, msg=None), None, msg=None)}\r\n2019-05-27 15:40:08,029 DEBUG     curator.validators.SchemaCheck               __init__:27   \"options\" config: {'continue_if_exception': True, 'disable_action': False, 'ignore_empty_list': True}\r\n2019-05-27 15:40:08,029 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: <function Filters.<locals>.f at 0x7f5c56c499d8>\r\n2019-05-27 15:40:08,029 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filters\" config: [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'sonicwall'}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y-%m-%d', 'unit': 'days', 'unit_count': 20}]\r\n2019-05-27 15:40:08,031 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'filtertype': Any(In(['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']), msg=\"filtertype must be one of ['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']\"), 'kind': Any('prefix', 'suffix', 'timestring', 'regex', msg=None), 'value': Any(<class 'str'>, msg=None), 'exclude': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f5c56c49400>, msg=None), msg=None)}\r\n2019-05-27 15:40:08,031 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filter\" config: {'filtertype': 'pattern', 'kind': 'prefix', 'value': 'sonicwall'}\r\n2019-05-27 15:40:08,031 DEBUG     curator.validators.filters                      f:48   Filter #0: {'filtertype': 'pattern', 'kind': 'prefix', 'value': 'sonicwall', 'exclude': False}\r\n2019-05-27 15:40:08,032 DEBUG     curator.defaults.filtertypes                    age:55   AGE FILTER = [{'direction': Any('older', 'younger', msg=None)}, {'unit': Any('seconds', 'minutes', 'hours', 'days', 'weeks', 'months', 'years', msg=None)}, {'unit_count': Coerce(int, msg=None)}, {'unit_count_pattern': Any(<class 'str'>, msg=None)}, {'epoch': Any(Coerce(int, msg=None), None, msg=None)}, {'exclude': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f5c56c45158>, msg=None), msg=None)}, {'source': Any('name', 'creation_date', 'field_stats', msg=None)}, {'stats_result': Any('min_value', 'max_value', msg=None)}, {'timestring': Any(<class 'str'>, msg=None)}]\r\n2019-05-27 15:40:08,033 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'filtertype': Any(In(['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']), msg=\"filtertype must be one of ['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']\"), 'direction': Any('older', 'younger', msg=None), 'unit': Any('seconds', 'minutes', 'hours', 'days', 'weeks', 'months', 'years', msg=None), 'unit_count': Coerce(int, msg=None), 'unit_count_pattern': Any(<class 'str'>, msg=None), 'epoch': Any(Coerce(int, msg=None), None, msg=None), 'exclude': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f5c56c45158>, msg=None), msg=None), 'source': Any('name', 'creation_date', 'field_stats', msg=None), 'stats_result': Any('min_value', 'max_value', msg=None), 'timestring': Any(<class 'str'>, msg=None)}\r\n2019-05-27 15:40:08,034 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filter\" config: {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y-%m-%d', 'unit': 'days', 'unit_count': 20}\r\n2019-05-27 15:40:08,034 DEBUG     curator.validators.filters                      f:48   Filter #1: {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y-%m-%d', 'unit': 'days', 'unit_count': 20, 'epoch': None, 'exclude': False, 'stats_result': 'min_value'}\r\n2019-05-27 15:40:08,035 DEBUG                curator.cli                    run:121  Full list of actions: {1: {'action': 'delete_indices', 'description': 'OPTIONAL DESCRIPTION', 'options': {'continue_if_exception': True, 'disable_action': False, 'ignore_empty_list': True, 'allow_ilm_indices': False, 'timeout_override': None}, 'filters': [{'filtertype': 'pattern', 'kind': 'prefix', 'value': 'sonicwall', 'exclude': False}, {'filtertype': 'age', 'source': 'name', 'direction': 'older', 'timestring': '%Y-%m-%d', 'unit': 'days', 'unit_count': 20, 'epoch': None, 'exclude': False, 'stats_result': 'min_value'}]}}\r\n2019-05-27 15:40:08,035 DEBUG                curator.cli                    run:126  action_disabled = False\r\n2019-05-27 15:40:08,035 DEBUG                curator.cli                    run:130  continue_if_exception = True\r\n2019-05-27 15:40:08,035 DEBUG                curator.cli                    run:132  timeout_override = None\r\n2019-05-27 15:40:08,035 DEBUG                curator.cli                    run:134  ignore_empty_list = True\r\n2019-05-27 15:40:08,036 DEBUG                curator.cli                    run:136  allow_ilm_indices = False\r\n2019-05-27 15:40:08,036 INFO                 curator.cli                    run:151  Preparing Action ID: 1, \"delete_indices\"\r\n2019-05-27 15:40:08,036 DEBUG              curator.utils             get_client:807  kwargs = {'hosts': ['172.31.18.211'], 'port': 9200, 'use_ssl': False, 'ssl_no_validate': True, 'http_auth': 'mylog:mypassword', 'master_only': False, 'client_key': None, 'url_prefix': '', 'client_cert': None, 'certificate': None, 'aws_token': None, 'aws_key': None, 'aws_secret_key': None, 'aws_sign_request': False, 'timeout': 30}\r\n2019-05-27 15:40:08,051 DEBUG              curator.utils             get_client:884  Not using \"requests_aws4auth\" python module to connect.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1407", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1407/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1407/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1407/events", "html_url": "https://github.com/elastic/curator/issues/1407", "id": 448649948, "node_id": "MDU6SXNzdWU0NDg2NDk5NDg=", "number": 1407, "title": "Please pin pyyaml  to 3.13 until the pyyaml 5.1 fixes are done for python 3.7 support", "user": {"login": "bryder", "id": 361660, "node_id": "MDQ6VXNlcjM2MTY2MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/361660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bryder", "html_url": "https://github.com/bryder", "followers_url": "https://api.github.com/users/bryder/followers", "following_url": "https://api.github.com/users/bryder/following{/other_user}", "gists_url": "https://api.github.com/users/bryder/gists{/gist_id}", "starred_url": "https://api.github.com/users/bryder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bryder/subscriptions", "organizations_url": "https://api.github.com/users/bryder/orgs", "repos_url": "https://api.github.com/users/bryder/repos", "events_url": "https://api.github.com/users/bryder/events{/privacy}", "received_events_url": "https://api.github.com/users/bryder/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-27T03:27:14Z", "updated_at": "2019-09-25T17:33:47Z", "closed_at": "2019-09-25T17:33:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "pyyaml-3.12 will not build the c extensions when using python 3.7 so I can not build curator using python 3.7.\r\n\r\npyyaml-3.13 added support for python-3.7 but curator is pinned to 3.12 at the moment.\r\n\r\n[reference to changes in pyyaml](https://pyyaml.org/wiki/PyYAML)\r\n\r\nThis relates to #1368 \r\n\r\n### Expected Behavior\r\n\r\npyyaml-3.13 should be the requirement so curator can be used  with python 3.7\r\n\r\n### Actual Behavior\r\n\r\nI can not build curator using python 3.7 if the requirements are respected \r\n\r\n### Steps to Reproduce the Problem\r\n\r\nI use an internal build system behind a firewall so can't easily show the steps here.\r\n\r\nI suspect installing python 3.7 and building with pip will show the error when trying to build pyyaml-3.12 which emit the same errors I've been getting but unfortunately I can't do that from where I am.\r\n\r\n### Specifications\r\n\r\n  - Version: curator 5.7.6\r\n  - Platform: ubuntu 16.04/18.04, Python 3.7.3\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1406", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1406/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1406/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1406/events", "html_url": "https://github.com/elastic/curator/issues/1406", "id": 448555645, "node_id": "MDU6SXNzdWU0NDg1NTU2NDU=", "number": 1406, "title": "Snapshot stuck in INIT - elasticsearch 2.4.6", "user": {"login": "timm088", "id": 8890118, "node_id": "MDQ6VXNlcjg4OTAxMTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8890118?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timm088", "html_url": "https://github.com/timm088", "followers_url": "https://api.github.com/users/timm088/followers", "following_url": "https://api.github.com/users/timm088/following{/other_user}", "gists_url": "https://api.github.com/users/timm088/gists{/gist_id}", "starred_url": "https://api.github.com/users/timm088/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timm088/subscriptions", "organizations_url": "https://api.github.com/users/timm088/orgs", "repos_url": "https://api.github.com/users/timm088/repos", "events_url": "https://api.github.com/users/timm088/events{/privacy}", "received_events_url": "https://api.github.com/users/timm088/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-26T11:10:23Z", "updated_at": "2019-05-26T20:54:41Z", "closed_at": "2019-05-26T20:54:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've done a fair bit of searching and I can't come up with a fix here\r\n\r\nA curator snapshot in our cluster has become stuck (around 7TB of data).\r\n\r\nAbout the \r\n\r\n- ES 2.4.6\r\n- Running on AWS with the cloud plugin\r\n\r\nHere's what I have tried so far\r\n\r\n- delete API (obviously doesnt work, job is in progress still)\r\n- rolling restart of all nodes, no change\r\n- replaced all nodes with new nodes (data and master), no change\r\n- checked for failed shards on the data nodes, there are none\r\n\r\nI am now at a loss, and I am unable to snapshot the indices... Any help?", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1403", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1403/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1403/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1403/events", "html_url": "https://github.com/elastic/curator/issues/1403", "id": 444315339, "node_id": "MDU6SXNzdWU0NDQzMTUzMzk=", "number": 1403, "title": "Unable to complete action \"close\".  No actionable items in list: <class 'curator.exceptions.NoIndices'>", "user": {"login": "GlamorCodius", "id": 50228132, "node_id": "MDQ6VXNlcjUwMjI4MTMy", "avatar_url": "https://avatars0.githubusercontent.com/u/50228132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GlamorCodius", "html_url": "https://github.com/GlamorCodius", "followers_url": "https://api.github.com/users/GlamorCodius/followers", "following_url": "https://api.github.com/users/GlamorCodius/following{/other_user}", "gists_url": "https://api.github.com/users/GlamorCodius/gists{/gist_id}", "starred_url": "https://api.github.com/users/GlamorCodius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GlamorCodius/subscriptions", "organizations_url": "https://api.github.com/users/GlamorCodius/orgs", "repos_url": "https://api.github.com/users/GlamorCodius/repos", "events_url": "https://api.github.com/users/GlamorCodius/events{/privacy}", "received_events_url": "https://api.github.com/users/GlamorCodius/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-15T08:55:05Z", "updated_at": "2019-05-16T22:00:55Z", "closed_at": "2019-05-16T22:00:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm relatively new to elasticsearch and curator (I'm still learning). I was following the following elastic search documentation: https://www.elastic.co/guide/en/elasticsearch/client/curator/current/index.html\r\n\r\nI just want to close all the indices that are older than 1 day. However, for some reason it's not working. I will share my config.yml as well as my action file and the output of the DEBUG. As a final note, I didn't change much from what the elastic.co documentation specified I should do.\r\n\r\nConfig.yml:\r\n\r\n`client:`\r\n  `hosts:`\r\n    `- 127.0.0.1`\r\n  `port: 9200`\r\n  `url_prefix:`\r\n  `use_ssl: False`\r\n  `certificate:`\r\n  `client_cert:`\r\n  `client_key:`\r\n  `ssl_no_validate: False`\r\n  `http_auth:`\r\n  `timeout: 30`\r\n  `master_only: False`\r\n\r\n`logging:`\r\n  `loglevel: DEBUG #INFO`\r\n  `logfile:`\r\n  `logformat: default`\r\n  `blacklist: ['elasticsearch', 'urllib3']`\r\n\r\ncloseactionfile.yml:\r\n\r\n`actions:`\r\n  `1:`\r\n    `action: close`\r\n    `description: >-`\r\n     `Close indices older than 1 day (based on index name), for packetbeat-`\r\n     `prefixed indices.`\r\n    `options:`\r\n      `delete_aliases: False`\r\n      `disable_action: False`\r\n    `filters:`\r\n    `- filtertype: pattern`\r\n      `kind: prefix`\r\n      `value: packetbeat-`\r\n    `- filtertype: age`\r\n      `source: name`\r\n      `direction: older`\r\n      `timestring: '%Y.%m.%d'`\r\n      `unit: days`\r\n      `unit_count: 1`\r\n\r\nI will be putting in a file the output of the DEBUG when I run the following command on my terminal `curator --config /Users/johnsmith/Desktop/ELK/config.yml /Users/johnsmith/Desktop/ELK/closeactionfile.yml`\r\n[DEBUG output.txt](https://github.com/elastic/curator/files/3181732/DEBUG.output.txt)\r\n\r\nIf someone can tell me what I did wrong it would be very appreciated thank you!\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1402", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1402/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1402/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1402/events", "html_url": "https://github.com/elastic/curator/issues/1402", "id": 443258879, "node_id": "MDU6SXNzdWU0NDMyNTg4Nzk=", "number": 1402, "title": "allow_ilm_indices not documented well enough", "user": {"login": "tomsommer", "id": 149171, "node_id": "MDQ6VXNlcjE0OTE3MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/149171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomsommer", "html_url": "https://github.com/tomsommer", "followers_url": "https://api.github.com/users/tomsommer/followers", "following_url": "https://api.github.com/users/tomsommer/following{/other_user}", "gists_url": "https://api.github.com/users/tomsommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomsommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomsommer/subscriptions", "organizations_url": "https://api.github.com/users/tomsommer/orgs", "repos_url": "https://api.github.com/users/tomsommer/repos", "events_url": "https://api.github.com/users/tomsommer/events{/privacy}", "received_events_url": "https://api.github.com/users/tomsommer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 186818252, "node_id": "MDU6TGFiZWwxODY4MTgyNTI=", "url": "https://api.github.com/repos/elastic/curator/labels/Documentation", "name": "Documentation", "color": "009800", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "untergeek", "id": 1020383, "node_id": "MDQ6VXNlcjEwMjAzODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1020383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untergeek", "html_url": "https://github.com/untergeek", "followers_url": "https://api.github.com/users/untergeek/followers", "following_url": "https://api.github.com/users/untergeek/following{/other_user}", "gists_url": "https://api.github.com/users/untergeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/untergeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untergeek/subscriptions", "organizations_url": "https://api.github.com/users/untergeek/orgs", "repos_url": "https://api.github.com/users/untergeek/repos", "events_url": "https://api.github.com/users/untergeek/events{/privacy}", "received_events_url": "https://api.github.com/users/untergeek/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "untergeek", "id": 1020383, "node_id": "MDQ6VXNlcjEwMjAzODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1020383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untergeek", "html_url": "https://github.com/untergeek", "followers_url": "https://api.github.com/users/untergeek/followers", "following_url": "https://api.github.com/users/untergeek/following{/other_user}", "gists_url": "https://api.github.com/users/untergeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/untergeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untergeek/subscriptions", "organizations_url": "https://api.github.com/users/untergeek/orgs", "repos_url": "https://api.github.com/users/untergeek/repos", "events_url": "https://api.github.com/users/untergeek/events{/privacy}", "received_events_url": "https://api.github.com/users/untergeek/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-05-13T08:03:50Z", "updated_at": "2019-05-16T22:00:18Z", "closed_at": "2019-05-16T22:00:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "The change in #1218 is not documented well enough, or at all. \r\n\r\nThere should be a big fat warning on many pages in the documentation (maybe even in the Lifecycle documentation/UI?) that enabling Lifecycle Management will render Curator useless.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1401", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1401/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1401/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1401/events", "html_url": "https://github.com/elastic/curator/issues/1401", "id": 443181440, "node_id": "MDU6SXNzdWU0NDMxODE0NDA=", "number": 1401, "title": "Curator applies ILM filter and removes actionable items", "user": {"login": "rolandjitsu", "id": 1479737, "node_id": "MDQ6VXNlcjE0Nzk3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1479737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rolandjitsu", "html_url": "https://github.com/rolandjitsu", "followers_url": "https://api.github.com/users/rolandjitsu/followers", "following_url": "https://api.github.com/users/rolandjitsu/following{/other_user}", "gists_url": "https://api.github.com/users/rolandjitsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/rolandjitsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rolandjitsu/subscriptions", "organizations_url": "https://api.github.com/users/rolandjitsu/orgs", "repos_url": "https://api.github.com/users/rolandjitsu/repos", "events_url": "https://api.github.com/users/rolandjitsu/events{/privacy}", "received_events_url": "https://api.github.com/users/rolandjitsu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-05-13T02:35:41Z", "updated_at": "2019-10-17T12:01:48Z", "closed_at": "2019-05-13T07:40:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "## For usage questions and help\r\nPlease create a topic at https://discuss.elastic.co/c/elasticsearch\r\n\r\nPerhaps a topic there already has an answer for you!\r\n\r\n## To submit a bug or report an issue\r\n<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n### Expected Behavior\r\n<!--- Tell us what should happen -->\r\nCurator should be able to run snapshot actions on indices that have an ILM policy applied.\r\n\r\n### Actual Behavior\r\n<!--- Tell us what happens instead of the expected behavior -->\r\nCurator applies some ILM filter and results in:\r\n```\r\nNo actionable items in list: <class 'curator.exceptions.NoIndices'>\r\n```\r\n\r\n### Steps to Reproduce the Problem\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n  1. Create some index and attach an ILM policy to it\r\n  2. Use the following actions:\r\n```yml\r\n--\r\n# Remember, leave a key empty if there is no value.  None will be a string,\r\n# not a Python \"NoneType\"\r\nactions:\r\n  1:\r\n    action: snapshot\r\n    description: Do some snapshots\r\n    options:\r\n      repository: folkvangr\r\n      name: 'cpu-%Y%m%d%H%M%S'\r\n      ignore_unavailable: False\r\n      include_global_state: True\r\n      partial: False\r\n      wait_for_completion: True\r\n      skip_repo_fs_check: False\r\n      disable_action: False\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: regex\r\n      value: '^(cpu|disk|memory).*$'\r\n```\r\n  3. Run Curator with the actions above\r\n\r\n### Specifications\r\n\r\n  - Version: 5.7.6\r\n  - Platform: Ubuntu 18.04 LTS\r\n  - Subsystem:\r\n\r\n\r\n## Context (Environment)\r\n<!--- How has this issue affected you? What are you trying to accomplish? -->\r\n<!--- Providing context helps us come up with a solution that is most useful in the real world -->\r\nIt looks to me like indexes with an ILM policy are filtered out. I hope that this is not intentional, because if it is, how else would I backup indexes?\r\n\r\n<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n## Detailed Description\r\n<!--- Provide a detailed description of the change or addition you are proposing -->\r\n\r\nCheck the following logs for more info:\r\n```\r\n2019-05-13 02:30:42,934 DEBUG                curator.cli                    run:108  Client and logging options validated.\r\n2019-05-13 02:30:42,934 DEBUG                curator.cli                    run:112  default_timeout = 30\r\n2019-05-13 02:30:42,934 DEBUG                curator.cli                    run:116  action_file: .curator/actions.yml\r\n2019-05-13 02:30:42,938 DEBUG                curator.cli                    run:118  action_config: {'actions': {1: {'action': 'snapshot', 'description': \"Snapshot indices older than 1 day (based on index creation_date) and younger than 30 days, with the default snapshot name pattern of 'curator-%Y%m%d%H%M%S'.  Wait for the snapshot to complete.  Do not skip the repository filesystem access check.  Use the other options to create the snapshot.\", 'options': {'repository': 'folkvangr', 'name': 'cpu-%Y%m%d%H%M%S', 'ignore_unavailable': False, 'include_global_state': True, 'partial': False, 'wait_for_completion': True, 'skip_repo_fs_check': False, 'disable_action': False}, 'filters': [{'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$'}]}}}\r\n2019-05-13 02:30:42,938 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'actions': <class 'dict'>}\r\n2019-05-13 02:30:42,938 DEBUG     curator.validators.SchemaCheck               __init__:27   \"Actions File\" config: {'actions': {1: {'action': 'snapshot', 'description': \"Snapshot indices older than 1 day (based on index creation_date) and younger than 30 days, with the default snapshot name pattern of 'curator-%Y%m%d%H%M%S'.  Wait for the snapshot to complete.  Do not skip the repository filesystem access check.  Use the other options to create the snapshot.\", 'options': {'repository': 'folkvangr', 'name': 'cpu-%Y%m%d%H%M%S', 'ignore_unavailable': False, 'include_global_state': True, 'partial': False, 'wait_for_completion': True, 'skip_repo_fs_check': False, 'disable_action': False}, 'filters': [{'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$'}]}}}\r\n2019-05-13 02:30:42,939 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'action': Any(In(['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']), msg=\"action must be one of ['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']\")}\r\n2019-05-13 02:30:42,939 DEBUG     curator.validators.SchemaCheck               __init__:27   \"action type\" config: {'action': 'snapshot', 'description': \"Snapshot indices older than 1 day (based on index creation_date) and younger than 30 days, with the default snapshot name pattern of 'curator-%Y%m%d%H%M%S'.  Wait for the snapshot to complete.  Do not skip the repository filesystem access check.  Use the other options to create the snapshot.\", 'options': {'repository': 'folkvangr', 'name': 'cpu-%Y%m%d%H%M%S', 'ignore_unavailable': False, 'include_global_state': True, 'partial': False, 'wait_for_completion': True, 'skip_repo_fs_check': False, 'disable_action': False}, 'filters': [{'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$'}]}\r\n2019-05-13 02:30:42,939 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'action': Any(In(['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']), msg=\"action must be one of ['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']\"), 'description': Any(<class 'str'>, <class 'str'>, msg=None), 'options': <class 'dict'>, 'filters': <class 'list'>}\r\n2019-05-13 02:30:42,939 DEBUG     curator.validators.SchemaCheck               __init__:27   \"structure\" config: {'action': 'snapshot', 'description': \"Snapshot indices older than 1 day (based on index creation_date) and younger than 30 days, with the default snapshot name pattern of 'curator-%Y%m%d%H%M%S'.  Wait for the snapshot to complete.  Do not skip the repository filesystem access check.  Use the other options to create the snapshot.\", 'options': {'repository': 'folkvangr', 'name': 'cpu-%Y%m%d%H%M%S', 'ignore_unavailable': False, 'include_global_state': True, 'partial': False, 'wait_for_completion': True, 'skip_repo_fs_check': False, 'disable_action': False}, 'filters': [{'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$'}]}\r\n2019-05-13 02:30:42,942 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'allow_ilm_indices': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7fd1266f61e0>, msg=None), msg=None), 'continue_if_exception': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7fd1266f6378>, msg=None), msg=None), 'disable_action': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7fd1266f6510>, msg=None), msg=None), 'ignore_empty_list': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7fd1266f66a8>, msg=None), msg=None), 'timeout_override': Any(Coerce(int, msg=None), None, msg=None), 'repository': Any(<class 'str'>, msg=None), 'name': Any(<class 'str'>, msg=None), 'ignore_unavailable': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7fd1267542f0>, msg=None), msg=None), 'include_global_state': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7fd126754400>, msg=None), msg=None), 'partial': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7fd126754bf8>, msg=None), msg=None), 'wait_for_completion': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7fd126754b70>, msg=None), msg=None), 'wait_interval': Any(All(Coerce(int, msg=None), Range(min=1, max=30, min_included=True, max_included=True, msg=None), msg=None), None, msg=None), 'max_wait': Any(-1, Coerce(int, msg=None), None, msg=None), 'skip_repo_fs_check': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7fd126754a60>, msg=None), msg=None)}\r\n2019-05-13 02:30:42,943 DEBUG     curator.validators.SchemaCheck               __init__:27   \"options\" config: {'repository': 'folkvangr', 'name': 'cpu-%Y%m%d%H%M%S', 'ignore_unavailable': False, 'include_global_state': True, 'partial': False, 'wait_for_completion': True, 'skip_repo_fs_check': False, 'disable_action': False}\r\n2019-05-13 02:30:42,943 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: <function Filters.<locals>.f at 0x7fd12675f2f0>\r\n2019-05-13 02:30:42,943 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filters\" config: [{'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$'}]\r\n2019-05-13 02:30:42,943 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'filtertype': Any(In(['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']), msg=\"filtertype must be one of ['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']\"), 'kind': Any('prefix', 'suffix', 'timestring', 'regex', msg=None), 'value': Any(<class 'str'>, msg=None), 'exclude': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7fd12675fc80>, msg=None), msg=None)}\r\n2019-05-13 02:30:42,943 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filter\" config: {'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$'}\r\n2019-05-13 02:30:42,943 DEBUG     curator.validators.filters                      f:48   Filter #0: {'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$', 'exclude': False}\r\n2019-05-13 02:30:42,943 DEBUG                curator.cli                    run:121  Full list of actions: {1: {'action': 'snapshot', 'description': \"Snapshot indices older than 1 day (based on index creation_date) and younger than 30 days, with the default snapshot name pattern of 'curator-%Y%m%d%H%M%S'.  Wait for the snapshot to complete.  Do not skip the repository filesystem access check.  Use the other options to create the snapshot.\", 'options': {'repository': 'folkvangr', 'name': 'cpu-%Y%m%d%H%M%S', 'ignore_unavailable': False, 'include_global_state': True, 'partial': False, 'wait_for_completion': True, 'skip_repo_fs_check': False, 'disable_action': False, 'allow_ilm_indices': False, 'max_wait': -1, 'timeout_override': 21600, 'continue_if_exception': False, 'wait_interval': 9, 'ignore_empty_list': False}, 'filters': [{'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$', 'exclude': False}]}}\r\n2019-05-13 02:30:42,943 DEBUG                curator.cli                    run:126  action_disabled = False\r\n2019-05-13 02:30:42,944 DEBUG                curator.cli                    run:130  continue_if_exception = False\r\n2019-05-13 02:30:42,944 DEBUG                curator.cli                    run:132  timeout_override = 21600\r\n2019-05-13 02:30:42,944 DEBUG                curator.cli                    run:134  ignore_empty_list = False\r\n2019-05-13 02:30:42,944 DEBUG                curator.cli                    run:136  allow_ilm_indices = False\r\n2019-05-13 02:30:42,944 INFO                 curator.cli                    run:151  Preparing Action ID: 1, \"snapshot\"\r\n2019-05-13 02:30:42,944 DEBUG              curator.utils             get_client:807  kwargs = {'hosts': ['127.0.0.1'], 'port': 9200, 'use_ssl': False, 'ssl_no_validate': False, 'master_only': True, 'http_auth': None, 'client_cert': None, 'client_key': None, 'aws_key': None, 'aws_sign_request': False, 'url_prefix': '', 'aws_secret_key': None, 'certificate': None, 'aws_token': None, 'timeout': 21600}\r\n2019-05-13 02:30:42,947 DEBUG              curator.utils             get_client:884  Not using \"requests_aws4auth\" python module to connect.\r\n2019-05-13 02:30:42,952 DEBUG              curator.utils          check_version:693  Detected Elasticsearch version 7.0.1\r\n2019-05-13 02:30:42,958 DEBUG                curator.cli                    run:166  client is <class 'elasticsearch.client.Elasticsearch'>\r\n2019-05-13 02:30:42,958 INFO                 curator.cli                    run:172  Trying Action ID: 1, \"snapshot\": Snapshot indices older than 1 day (based on index creation_date) and younger than 30 days, with the default snapshot name pattern of 'curator-%Y%m%d%H%M%S'.  Wait for the snapshot to complete.  Do not skip the repository filesystem access check.  Use the other options to create the snapshot.\r\n2019-05-13 02:30:42,959 DEBUG                curator.cli         process_action:44   Configuration dictionary: {'action': 'snapshot', 'description': \"Snapshot indices older than 1 day (based on index creation_date) and younger than 30 days, with the default snapshot name pattern of 'curator-%Y%m%d%H%M%S'.  Wait for the snapshot to complete.  Do not skip the repository filesystem access check.  Use the other options to create the snapshot.\", 'options': {'repository': 'folkvangr', 'name': 'cpu-%Y%m%d%H%M%S', 'ignore_unavailable': False, 'include_global_state': True, 'partial': False, 'wait_for_completion': True, 'skip_repo_fs_check': False, 'max_wait': -1, 'wait_interval': 9}, 'filters': [{'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$', 'exclude': False}, {'filtertype': 'ilm'}]}\r\n2019-05-13 02:30:42,959 DEBUG                curator.cli         process_action:45   kwargs: {'master_timeout': 300, 'dry_run': True}\r\n2019-05-13 02:30:42,959 DEBUG                curator.cli         process_action:50   opts: {'repository': 'folkvangr', 'name': 'cpu-%Y%m%d%H%M%S', 'ignore_unavailable': False, 'include_global_state': True, 'partial': False, 'wait_for_completion': True, 'skip_repo_fs_check': False, 'max_wait': -1, 'wait_interval': 9}\r\n2019-05-13 02:30:42,959 DEBUG                curator.cli         process_action:62   Action kwargs: {'repository': 'folkvangr', 'name': 'cpu-%Y%m%d%H%M%S', 'ignore_unavailable': False, 'include_global_state': True, 'partial': False, 'wait_for_completion': True, 'skip_repo_fs_check': False, 'max_wait': -1, 'wait_interval': 9}\r\n2019-05-13 02:30:42,959 DEBUG                curator.cli         process_action:91   Running \"SNAPSHOT\"\r\n2019-05-13 02:30:42,959 DEBUG          curator.indexlist          __get_indices:65   Getting all indices\r\n2019-05-13 02:30:42,965 DEBUG              curator.utils            get_indices:648  Detected Elasticsearch version 7.0.1\r\n2019-05-13 02:30:42,965 DEBUG              curator.utils            get_indices:650  All indices: ['encoder-000001', '.monitoring-kibana-7-2019.05.13', 'disk-000001', 'cpu-000001', 'gpu-000001', 'net-000001', 'power-scan-000001', 'sfp-000001', 'pastri-000001', '.monitoring-kibana-7-2019.05.11', 'beacon-000001', 'memory-000001', '.monitoring-kibana-7-2019.05.12', 'edfa-000001', '.monitoring-es-7-2019.05.11', '.kibana_1', '.monitoring-es-7-2019.05.12', 'ps-000001', '.monitoring-es-7-2019.05.13', '.kibana_task_manager']\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for encoder-000001\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for .monitoring-kibana-7-2019.05.13\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for disk-000001\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for cpu-000001\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for gpu-000001\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for net-000001\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for power-scan-000001\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for sfp-000001\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for pastri-000001\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for .monitoring-kibana-7-2019.05.11\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for beacon-000001\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for memory-000001\r\n2019-05-13 02:30:42,965 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for .monitoring-kibana-7-2019.05.12\r\n2019-05-13 02:30:42,966 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for edfa-000001\r\n2019-05-13 02:30:42,966 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for .monitoring-es-7-2019.05.11\r\n2019-05-13 02:30:42,966 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for .kibana_1\r\n2019-05-13 02:30:42,966 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for .monitoring-es-7-2019.05.12\r\n2019-05-13 02:30:42,966 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for ps-000001\r\n2019-05-13 02:30:42,966 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for .monitoring-es-7-2019.05.13\r\n2019-05-13 02:30:42,966 DEBUG          curator.indexlist     __build_index_info:80   Building preliminary index metadata for .kibana_task_manager\r\n2019-05-13 02:30:42,966 DEBUG          curator.indexlist          _get_metadata:177  Getting index metadata\r\n2019-05-13 02:30:42,966 DEBUG          curator.indexlist       empty_list_check:226  Checking for empty list\r\n2019-05-13 02:30:42,995 DEBUG          curator.indexlist       _get_index_stats:117  Getting index stats\r\n2019-05-13 02:30:42,995 DEBUG          curator.indexlist       empty_list_check:226  Checking for empty list\r\n2019-05-13 02:30:42,995 DEBUG          curator.indexlist           working_list:237  Generating working list of indices\r\n2019-05-13 02:30:42,995 DEBUG          curator.indexlist           working_list:237  Generating working list of indices\r\n2019-05-13 02:30:43,002 DEBUG          curator.indexlist     iterate_over_stats:126  Index: gpu-000001  Size: 3.3MB  Docs: 22750\r\n2019-05-13 02:30:43,002 DEBUG          curator.indexlist     iterate_over_stats:126  Index: .kibana_task_manager  Size: 59.2KB  Docs: 4\r\n2019-05-13 02:30:43,002 DEBUG          curator.indexlist     iterate_over_stats:126  Index: net-000001  Size: 15.9MB  Docs: 91118\r\n2019-05-13 02:30:43,002 DEBUG          curator.indexlist     iterate_over_stats:126  Index: edfa-000001  Size: 1.1KB  Docs: 0\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: .monitoring-es-7-2019.05.11  Size: 205.8MB  Docs: 255676\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: encoder-000001  Size: 246.7MB  Docs: 4706260\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: .kibana_1  Size: 77.1KB  Docs: 14\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: sfp-000001  Size: 1.1KB  Docs: 0\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: pastri-000001  Size: 1.1KB  Docs: 0\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: .monitoring-kibana-7-2019.05.13  Size: 580.6KB  Docs: 1808\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: .monitoring-kibana-7-2019.05.12  Size: 4.3MB  Docs: 17278\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: .monitoring-kibana-7-2019.05.11  Size: 2.9MB  Docs: 11102\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: .monitoring-es-7-2019.05.12  Size: 298.0MB  Docs: 436918\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: memory-000001  Size: 3.7MB  Docs: 22920\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: .monitoring-es-7-2019.05.13  Size: 39.2MB  Docs: 49068\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: ps-000001  Size: 3.3MB  Docs: 22686\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: power-scan-000001  Size: 1.1KB  Docs: 0\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: cpu-000001  Size: 12.5MB  Docs: 23236\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: beacon-000001  Size: 1.1KB  Docs: 0\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist     iterate_over_stats:126  Index: disk-000001  Size: 3.3MB  Docs: 23144\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist        iterate_filters:1214 Iterating over a list of filters\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist        iterate_filters:1220 All filters: [{'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$', 'exclude': False}, {'filtertype': 'ilm'}]\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist        iterate_filters:1222 Top of the loop: ['encoder-000001', '.monitoring-kibana-7-2019.05.13', 'disk-000001', 'cpu-000001', 'gpu-000001', 'net-000001', 'power-scan-000001', 'sfp-000001', 'pastri-000001', '.monitoring-kibana-7-2019.05.11', 'beacon-000001', 'memory-000001', '.monitoring-kibana-7-2019.05.12', 'edfa-000001', '.monitoring-es-7-2019.05.11', '.kibana_1', '.monitoring-es-7-2019.05.12', 'ps-000001', '.monitoring-es-7-2019.05.13', '.kibana_task_manager']\r\n2019-05-13 02:30:43,003 DEBUG          curator.indexlist        iterate_filters:1223 Un-parsed filter args: {'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$', 'exclude': False}\r\n2019-05-13 02:30:43,005 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'aliases': Any(<class 'list'>, <class 'str'>, msg=None), 'allocation_type': Any(<class 'str'>, msg=None), 'count': Coerce(int, msg=None), 'date_from': Any(None, <class 'str'>, msg=None), 'date_from_format': Any(None, <class 'str'>, msg=None), 'date_to': Any(None, <class 'str'>, msg=None), 'date_to_format': Any(None, <class 'str'>, msg=None), 'direction': Any(<class 'str'>, msg=None), 'disk_space': <class 'float'>, 'epoch': Any(Coerce(int, msg=None), None, msg=None), 'exclude': Any(None, <class 'bool'>, <class 'int'>, <class 'str'>, msg=None), 'field': Any(None, <class 'str'>, msg=None), 'intersect': Any(None, <class 'bool'>, <class 'int'>, <class 'str'>, msg=None), 'key': Any(<class 'str'>, msg=None), 'kind': Any(<class 'str'>, msg=None), 'max_num_segments': Coerce(int, msg=None), 'number_of_shards': Coerce(int, msg=None), 'pattern': Any(<class 'str'>, msg=None), 'period_type': Any(<class 'str'>, msg=None), 'reverse': Any(None, <class 'bool'>, <class 'int'>, <class 'str'>, msg=None), 'range_from': Coerce(int, msg=None), 'range_to': Coerce(int, msg=None), 'shard_filter_behavior': Any(<class 'str'>, msg=None), 'source': Any(<class 'str'>, msg=None), 'state': Any(<class 'str'>, msg=None), 'stats_result': Any(None, <class 'str'>, msg=None), 'timestring': Any(None, <class 'str'>, msg=None), 'threshold_behavior': Any(<class 'str'>, msg=None), 'unit': Any(<class 'str'>, msg=None), 'unit_count': Coerce(int, msg=None), 'unit_count_pattern': Any(<class 'str'>, msg=None), 'use_age': <function Boolean at 0x7fd12672dea0>, 'value': Any(<class 'int'>, <class 'float'>, <class 'bool'>, <class 'str'>, msg=None), 'week_starts_on': Any(None, <class 'str'>, msg=None), 'filtertype': Any(In(['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']), msg=\"filtertype must be one of ['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']\")}\r\n2019-05-13 02:30:43,005 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filter\" config: {'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$', 'exclude': False}\r\n2019-05-13 02:30:43,005 DEBUG          curator.indexlist        iterate_filters:1230 Parsed filter args: {'filtertype': 'pattern', 'kind': 'regex', 'value': '^(cpu|disk|memory).*$', 'exclude': False}\r\n2019-05-13 02:30:43,005 DEBUG          curator.indexlist        iterate_filters:1239 Filter args: {'kind': 'regex', 'value': '^(cpu|disk|memory).*$', 'exclude': False}\r\n2019-05-13 02:30:43,005 DEBUG          curator.indexlist        iterate_filters:1240 Pre-instance: ['encoder-000001', '.monitoring-kibana-7-2019.05.13', 'disk-000001', 'cpu-000001', 'gpu-000001', 'net-000001', 'power-scan-000001', 'sfp-000001', 'pastri-000001', '.monitoring-kibana-7-2019.05.11', 'beacon-000001', 'memory-000001', '.monitoring-kibana-7-2019.05.12', 'edfa-000001', '.monitoring-es-7-2019.05.11', '.kibana_1', '.monitoring-es-7-2019.05.12', 'ps-000001', '.monitoring-es-7-2019.05.13', '.kibana_task_manager']\r\n2019-05-13 02:30:43,005 DEBUG          curator.indexlist        filter_by_regex:429  Filtering indices by regex\r\n2019-05-13 02:30:43,005 DEBUG          curator.indexlist       empty_list_check:226  Checking for empty list\r\n2019-05-13 02:30:43,005 DEBUG          curator.indexlist           working_list:237  Generating working list of indices\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: encoder-000001\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist       __not_actionable:39   Index encoder-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: .monitoring-kibana-7-2019.05.13\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist       __not_actionable:39   Index .monitoring-kibana-7-2019.05.13 is not actionable, removing from list.\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: disk-000001\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist           __actionable:35   Index disk-000001 is actionable and remains in the list.\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: cpu-000001\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist           __actionable:35   Index cpu-000001 is actionable and remains in the list.\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: gpu-000001\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist       __not_actionable:39   Index gpu-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: net-000001\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist       __not_actionable:39   Index net-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: power-scan-000001\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist       __not_actionable:39   Index power-scan-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: sfp-000001\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist       __not_actionable:39   Index sfp-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: pastri-000001\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist       __not_actionable:39   Index pastri-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: .monitoring-kibana-7-2019.05.11\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist       __not_actionable:39   Index .monitoring-kibana-7-2019.05.11 is not actionable, removing from list.\r\n2019-05-13 02:30:43,006 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: beacon-000001\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist       __not_actionable:39   Index beacon-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: memory-000001\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist           __actionable:35   Index memory-000001 is actionable and remains in the list.\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: .monitoring-kibana-7-2019.05.12\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist       __not_actionable:39   Index .monitoring-kibana-7-2019.05.12 is not actionable, removing from list.\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: edfa-000001\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist       __not_actionable:39   Index edfa-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: .monitoring-es-7-2019.05.11\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist       __not_actionable:39   Index .monitoring-es-7-2019.05.11 is not actionable, removing from list.\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: .kibana_1\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist       __not_actionable:39   Index .kibana_1 is not actionable, removing from list.\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: .monitoring-es-7-2019.05.12\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist       __not_actionable:39   Index .monitoring-es-7-2019.05.12 is not actionable, removing from list.\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: ps-000001\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist       __not_actionable:39   Index ps-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: .monitoring-es-7-2019.05.13\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist       __not_actionable:39   Index .monitoring-es-7-2019.05.13 is not actionable, removing from list.\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        filter_by_regex:450  Filter by regex: Index: .kibana_task_manager\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist       __not_actionable:39   Index .kibana_task_manager is not actionable, removing from list.\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        iterate_filters:1242 Post-instance: ['disk-000001', 'cpu-000001', 'memory-000001']\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        iterate_filters:1222 Top of the loop: ['disk-000001', 'cpu-000001', 'memory-000001']\r\n2019-05-13 02:30:43,007 DEBUG          curator.indexlist        iterate_filters:1223 Un-parsed filter args: {'filtertype': 'ilm'}\r\n2019-05-13 02:30:43,009 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'aliases': Any(<class 'list'>, <class 'str'>, msg=None), 'allocation_type': Any(<class 'str'>, msg=None), 'count': Coerce(int, msg=None), 'date_from': Any(None, <class 'str'>, msg=None), 'date_from_format': Any(None, <class 'str'>, msg=None), 'date_to': Any(None, <class 'str'>, msg=None), 'date_to_format': Any(None, <class 'str'>, msg=None), 'direction': Any(<class 'str'>, msg=None), 'disk_space': <class 'float'>, 'epoch': Any(Coerce(int, msg=None), None, msg=None), 'exclude': Any(None, <class 'bool'>, <class 'int'>, <class 'str'>, msg=None), 'field': Any(None, <class 'str'>, msg=None), 'intersect': Any(None, <class 'bool'>, <class 'int'>, <class 'str'>, msg=None), 'key': Any(<class 'str'>, msg=None), 'kind': Any(<class 'str'>, msg=None), 'max_num_segments': Coerce(int, msg=None), 'number_of_shards': Coerce(int, msg=None), 'pattern': Any(<class 'str'>, msg=None), 'period_type': Any(<class 'str'>, msg=None), 'reverse': Any(None, <class 'bool'>, <class 'int'>, <class 'str'>, msg=None), 'range_from': Coerce(int, msg=None), 'range_to': Coerce(int, msg=None), 'shard_filter_behavior': Any(<class 'str'>, msg=None), 'source': Any(<class 'str'>, msg=None), 'state': Any(<class 'str'>, msg=None), 'stats_result': Any(None, <class 'str'>, msg=None), 'timestring': Any(None, <class 'str'>, msg=None), 'threshold_behavior': Any(<class 'str'>, msg=None), 'unit': Any(<class 'str'>, msg=None), 'unit_count': Coerce(int, msg=None), 'unit_count_pattern': Any(<class 'str'>, msg=None), 'use_age': <function Boolean at 0x7fd126723b70>, 'value': Any(<class 'int'>, <class 'float'>, <class 'bool'>, <class 'str'>, msg=None), 'week_starts_on': Any(None, <class 'str'>, msg=None), 'filtertype': Any(In(['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']), msg=\"filtertype must be one of ['age', 'alias', 'allocated', 'closed', 'count', 'empty', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'shards', 'space', 'state']\")}\r\n2019-05-13 02:30:43,009 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filter\" config: {'filtertype': 'ilm'}\r\n2019-05-13 02:30:43,009 DEBUG          curator.indexlist        iterate_filters:1230 Parsed filter args: {'filtertype': 'ilm'}\r\n2019-05-13 02:30:43,009 DEBUG          curator.indexlist             filter_ilm:1176 Filtering indices with index.lifecycle.name\r\n2019-05-13 02:30:43,012 DEBUG          curator.indexlist       __not_actionable:39   Index memory-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,012 DEBUG          curator.indexlist            __excludify:58   Removed from actionable list: memory-000001 has index.lifecycle.name default\r\n2019-05-13 02:30:43,012 DEBUG          curator.indexlist       __not_actionable:39   Index disk-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,012 DEBUG          curator.indexlist            __excludify:58   Removed from actionable list: disk-000001 has index.lifecycle.name default\r\n2019-05-13 02:30:43,012 DEBUG          curator.indexlist       __not_actionable:39   Index cpu-000001 is not actionable, removing from list.\r\n2019-05-13 02:30:43,012 DEBUG          curator.indexlist            __excludify:58   Removed from actionable list: cpu-000001 has index.lifecycle.name default\r\n2019-05-13 02:30:43,012 DEBUG          curator.indexlist       empty_list_check:226  Checking for empty list\r\n2019-05-13 02:30:43,012 ERROR                curator.cli                    run:185  Unable to complete action \"snapshot\".  No actionable items in list: <class 'curator.exceptions.NoIndices'>\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1399", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1399/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1399/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1399/events", "html_url": "https://github.com/elastic/curator/issues/1399", "id": 442359493, "node_id": "MDU6SXNzdWU0NDIzNTk0OTM=", "number": 1399, "title": "Request: add support to freeze indexes", "user": {"login": "Daniel314", "id": 1891142, "node_id": "MDQ6VXNlcjE4OTExNDI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1891142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Daniel314", "html_url": "https://github.com/Daniel314", "followers_url": "https://api.github.com/users/Daniel314/followers", "following_url": "https://api.github.com/users/Daniel314/following{/other_user}", "gists_url": "https://api.github.com/users/Daniel314/gists{/gist_id}", "starred_url": "https://api.github.com/users/Daniel314/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Daniel314/subscriptions", "organizations_url": "https://api.github.com/users/Daniel314/orgs", "repos_url": "https://api.github.com/users/Daniel314/repos", "events_url": "https://api.github.com/users/Daniel314/events{/privacy}", "received_events_url": "https://api.github.com/users/Daniel314/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-05-09T17:57:34Z", "updated_at": "2019-08-27T20:01:58Z", "closed_at": "2019-08-27T20:01:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nLooking through the Curator CLI options, I do not see any any way to freeze ES indexes using Curator.  I am creating this \"issue\" to request that support be added to Curator to freeze ES indexes.\r\n\r\nThe ES documentation reference for this is: https://www.elastic.co/guide/en/elasticsearch/reference/6.6/freeze-index-api.html\r\nAt a minimum, the basic/free version of X-pack must be installed to utilize frozen indexes.\r\n\r\nThank you,\r\n\r\n      - Daniel\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1398", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1398/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1398/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1398/events", "html_url": "https://github.com/elastic/curator/issues/1398", "id": 442073892, "node_id": "MDU6SXNzdWU0NDIwNzM4OTI=", "number": 1398, "title": "Action list longer than 9 actions (single digits) does not work", "user": {"login": "bar0n36", "id": 30456919, "node_id": "MDQ6VXNlcjMwNDU2OTE5", "avatar_url": "https://avatars1.githubusercontent.com/u/30456919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bar0n36", "html_url": "https://github.com/bar0n36", "followers_url": "https://api.github.com/users/bar0n36/followers", "following_url": "https://api.github.com/users/bar0n36/following{/other_user}", "gists_url": "https://api.github.com/users/bar0n36/gists{/gist_id}", "starred_url": "https://api.github.com/users/bar0n36/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bar0n36/subscriptions", "organizations_url": "https://api.github.com/users/bar0n36/orgs", "repos_url": "https://api.github.com/users/bar0n36/repos", "events_url": "https://api.github.com/users/bar0n36/events{/privacy}", "received_events_url": "https://api.github.com/users/bar0n36/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 161908979, "node_id": "MDU6TGFiZWwxNjE5MDg5Nzk=", "url": "https://api.github.com/repos/elastic/curator/labels/cannot_replicate", "name": "cannot_replicate", "color": "fbca04", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-05-09T06:41:12Z", "updated_at": "2019-08-07T01:15:41Z", "closed_at": "2019-08-06T23:01:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "When you provide an action list with greater than 9 actions (get to double digits), or you start the action numbering with a leading zero (01, 02 etc), curator fails to register the actions in the action file, until you get to an action where the first digit is 1.\r\n\r\n### Expected Behavior\r\nCurator should parse the action number, regardless of the number of digits.\r\n\r\n### Actual Behavior\r\nFor a file list longer than 9, Curator will only register action 1/the last action (say we had 13 actions, the 13th action will be the only one parsed)\r\n\r\n### Steps to Reproduce the Problem\r\n1. Create an action file with a significant number of actions >9\r\n2. Attempt to execute the action list\r\n3. The only action that will execute is the last action with a leading 1\r\nNOTE: I would expect that if there were 29 actions, Action 19 would execute, as would action 29, but I have not had chance to fully replicate this scenario\r\n\r\n### Specifications\r\n\r\n  - Version: 5.6\r\n  - Platform: RHEL 6.9\r\n  - Subsystem: Python 2.6.6\r\n\r\n## Proposal\r\nCurator should handle X number of Actions being listed in the action file.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1394", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1394/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1394/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1394/events", "html_url": "https://github.com/elastic/curator/issues/1394", "id": 440823656, "node_id": "MDU6SXNzdWU0NDA4MjM2NTY=", "number": 1394, "title": "Update urllib3 and requests to address recent CVEs", "user": {"login": "cburgess", "id": 1141414, "node_id": "MDQ6VXNlcjExNDE0MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1141414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cburgess", "html_url": "https://github.com/cburgess", "followers_url": "https://api.github.com/users/cburgess/followers", "following_url": "https://api.github.com/users/cburgess/following{/other_user}", "gists_url": "https://api.github.com/users/cburgess/gists{/gist_id}", "starred_url": "https://api.github.com/users/cburgess/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cburgess/subscriptions", "organizations_url": "https://api.github.com/users/cburgess/orgs", "repos_url": "https://api.github.com/users/cburgess/repos", "events_url": "https://api.github.com/users/cburgess/events{/privacy}", "received_events_url": "https://api.github.com/users/cburgess/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-05-06T18:20:21Z", "updated_at": "2019-05-06T18:51:27Z", "closed_at": "2019-05-06T18:51:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Detailed Description\r\nWe need to urllib3 >= 1.24.2 and requests >= 2.20.0 to address the\r\nfollowing CVEs.\r\n\r\nurllib3:\r\n[CVE-2018-20060](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2018-20060) CVSS3 Score: 9.8 Fixed: >= 1.23\r\n[CVE-2019-11324](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2019-11324) CVSS3 Score: 7.5 Fixed: >= 1.24.2\r\n\r\nrequests:\r\n[CVE-2018-18074](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2018-18074) CVSS3 Score: 9.8 Fixed: >= 2.20.0\r\n\r\nWe currently ship urllib3 1.22 and request 2.18.4. This mostly the result of recent changes that were merged to attempt to address version computability issues with urllib3, requests, and boto. Newer versions are now out that are available that address the above CVEs and are compatible with each other.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1392", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1392/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1392/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1392/events", "html_url": "https://github.com/elastic/curator/issues/1392", "id": 438045937, "node_id": "MDU6SXNzdWU0MzgwNDU5Mzc=", "number": 1392, "title": "Action rollover fails for missing alias during upgrade", "user": {"login": "hyadav5", "id": 19660244, "node_id": "MDQ6VXNlcjE5NjYwMjQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/19660244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hyadav5", "html_url": "https://github.com/hyadav5", "followers_url": "https://api.github.com/users/hyadav5/followers", "following_url": "https://api.github.com/users/hyadav5/following{/other_user}", "gists_url": "https://api.github.com/users/hyadav5/gists{/gist_id}", "starred_url": "https://api.github.com/users/hyadav5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hyadav5/subscriptions", "organizations_url": "https://api.github.com/users/hyadav5/orgs", "repos_url": "https://api.github.com/users/hyadav5/repos", "events_url": "https://api.github.com/users/hyadav5/events{/privacy}", "received_events_url": "https://api.github.com/users/hyadav5/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-28T11:25:19Z", "updated_at": "2019-04-30T07:05:05Z", "closed_at": "2019-04-30T07:05:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Elastic Curator: 5.4.1\r\n\r\nRan into an upgrade scenario problem:\r\n\r\nHere is the case:\r\n\r\n> 1) We have logging deployment where we use elasticsearch for storage and curator for index management. We have 2 versions of our product 0.5 and 0.75\r\n> 2) In 0.5 deployed on customer site. We have indexes a,b,c with \r\n> action: create_index\r\n> action: alias (associate this with index created above)\r\n> action: rollover (with some max_age setting say 1d)\r\n> 3) Now the problem starts. Now we want to upgrade 0.75 in customer site.\r\n> 4) 0.75 have new index \"catalog\". During upgrade scenario we just rollover the previous indexes.\r\n> 5) Our rollover is failing complaing that alias for \"catalog\" is not found.\r\n\r\n=========================\r\n\r\nInstall and Alias action that runs during \"INSTALL\"\r\n\r\n```\r\n      6:\r\n        action: create_index\r\n        description: \"Create the metrics index as named, with the specified extra settings.\"\r\n        options:\r\n          name: \"<metrics-{now{yyyy-MM-dd't'HH.mm.ss}}-000001>\"\r\n          continue_if_exception: True\r\n          disable_action: False\r\n          extra_settings:\r\n            settings:\r\n              number_of_shards: 3\r\n              number_of_replicas: 1\r\n              refresh_interval: 20s\r\n      .....\r\n      13:\r\n         action: alias\r\n         description: \"Associate metrics alias for an index .\"\r\n         options:\r\n           name: metrics\r\n           warn_if_no_indices: True\r\n           continue_if_exception: True\r\n           disable_action: False\r\n         remove:\r\n           filters:\r\n           - filtertype: pattern\r\n             kind: prefix\r\n             value: metrics-\r\n         add:\r\n           filters:\r\n           - filtertype: pattern\r\n             kind: prefix\r\n             value: metrics-\r\n           - filtertype: count\r\n             count: 1\r\n             use_age: True\r\n             source: creation_date\r\n             exclude: False\r\n```\r\n\r\n=========================\r\n\r\nRollover action that runs during \"UPGRADE\"\r\n```\r\n      6:\r\n        action: rollover\r\n        description: \"Rollover the index associated with alias metrics\"\r\n        options:\r\n          disable_action: False\r\n          name: metrics\r\n          new_index: \"<metrics-{now{yyyy-MM-dd't'HH.mm.ss}}>\"\r\n          conditions:\r\n            max_age: 1s\r\n          extra_settings:\r\n            index.number_of_shards: 3\r\n            index.number_of_replicas: 1\r\n            index.refresh_interval: 20s\r\n      7:\r\n        action: rollover\r\n        description: \"Rollover the index associated with alias catalog\"\r\n        options:\r\n          disable_action: False\r\n          name: catalog\r\n          new_index: \"<catalog-{now{yyyy-MM-dd't'HH.mm.ss}}>\"\r\n          conditions:\r\n            max_age: 1s\r\n          extra_settings:\r\n            index.number_of_shards: 3\r\n            index.number_of_replicas: 1\r\n            index.refresh_interval: 20s\r\n```\r\n\r\n=========================\r\n\r\nError:\r\n```\r\n2019-04-27 14:54:47,397 INFO      Trying Action ID: 6, \"rollover\": Rollover the index associated with alias lrsemetrics\r\n2019-04-27 14:54:47,398 INFO      \"<lrsemetrics-{now{yyyy-MM-dd't'HH.mm.ss}}>\" is using Elasticsearch date math.\r\n2019-04-27 14:54:47,400 INFO      Performing index rollover\r\n2019-04-27 14:54:47,904 INFO      Action ID: 6, \"rollover\" completed.\r\n\r\n2019-04-27 14:54:47,908 INFO      Trying Action ID: 7, \"rollover\": Rollover the index associated with alias catalog\r\n2019-04-27 14:54:47,908 INFO      \"<catalog-{now{yyyy-MM-dd't'HH.mm.ss}}>\" is using Elasticsearch date math.\r\n2019-04-27 14:54:47,910 ERROR     alias \"catalog\" not found.\r\n2019-04-27 14:54:47,910 ERROR     Failed to complete action: rollover.  <class 'ValueError'>: Unable to perform index rollover with alias \"catalog\". See previous logs for more details.\r\n```\r\n\r\n=========================\r\n\r\nMy questions are:\r\n1) Do we have any setting in **\"action: alias\"**, like create alias if not exist. Dont error out if alias is already existing.\r\nOr\r\n2) Do we have any setting in **\"action: rollover\"**, like create alias if not exist before rollover. Dont error out if alias is already existing.\r\n3) Will the above **\"action: rollover\"** fails if their is no index corresponding to the alias, or it will just create new index and associate alias with it.\r\n\r\nIn general, how the upgrade is handled in case of new index in new version.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1389", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1389/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1389/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1389/events", "html_url": "https://github.com/elastic/curator/issues/1389", "id": 437148971, "node_id": "MDU6SXNzdWU0MzcxNDg5NzE=", "number": 1389, "title": "ILM filter not using working_list", "user": {"login": "tiempososcuros", "id": 31760469, "node_id": "MDQ6VXNlcjMxNzYwNDY5", "avatar_url": "https://avatars0.githubusercontent.com/u/31760469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiempososcuros", "html_url": "https://github.com/tiempososcuros", "followers_url": "https://api.github.com/users/tiempososcuros/followers", "following_url": "https://api.github.com/users/tiempososcuros/following{/other_user}", "gists_url": "https://api.github.com/users/tiempososcuros/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiempososcuros/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiempososcuros/subscriptions", "organizations_url": "https://api.github.com/users/tiempososcuros/orgs", "repos_url": "https://api.github.com/users/tiempososcuros/repos", "events_url": "https://api.github.com/users/tiempososcuros/events{/privacy}", "received_events_url": "https://api.github.com/users/tiempososcuros/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803247, "node_id": "MDU6TGFiZWw1MjgwMzI0Nw==", "url": "https://api.github.com/repos/elastic/curator/labels/bug", "name": "bug", "color": "ff0040", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "untergeek", "id": 1020383, "node_id": "MDQ6VXNlcjEwMjAzODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1020383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untergeek", "html_url": "https://github.com/untergeek", "followers_url": "https://api.github.com/users/untergeek/followers", "following_url": "https://api.github.com/users/untergeek/following{/other_user}", "gists_url": "https://api.github.com/users/untergeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/untergeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untergeek/subscriptions", "organizations_url": "https://api.github.com/users/untergeek/orgs", "repos_url": "https://api.github.com/users/untergeek/repos", "events_url": "https://api.github.com/users/untergeek/events{/privacy}", "received_events_url": "https://api.github.com/users/untergeek/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "untergeek", "id": 1020383, "node_id": "MDQ6VXNlcjEwMjAzODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1020383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untergeek", "html_url": "https://github.com/untergeek", "followers_url": "https://api.github.com/users/untergeek/followers", "following_url": "https://api.github.com/users/untergeek/following{/other_user}", "gists_url": "https://api.github.com/users/untergeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/untergeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untergeek/subscriptions", "organizations_url": "https://api.github.com/users/untergeek/orgs", "repos_url": "https://api.github.com/users/untergeek/repos", "events_url": "https://api.github.com/users/untergeek/events{/privacy}", "received_events_url": "https://api.github.com/users/untergeek/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-04-25T11:29:15Z", "updated_at": "2019-04-26T16:15:33Z", "closed_at": "2019-04-26T16:15:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Expected Behavior\r\nCurator run correctly whitout errors when there are no indexes to eliminate.\r\n\r\n### Actual Behavior\r\nCurator displays an error message when there are no indexes to eliminate.\r\n\r\n### Steps to Reproduce the Problem\r\n\r\n> [root@elasticsearch-node1 ~]# curator /root/.curator/action.yml\r\n> 2019-04-25 12:14:05,311 INFO      Preparing Action ID: 1, \"delete_indices\"\r\n> 2019-04-25 12:14:05,326 INFO      Trying Action ID: 1, \"delete_indices\": Delete indices older than 3\r\n> months (based on index name). Ignore the error if the filter does not result in an actionable list of indices (ignore_empty_list) and exit cleanly.\r\n> 2019-04-25 12:14:05,409 ERROR     Failed to complete action: delete_indices.  <class 'ValueError'>: list.remove(x): x not in list\r\n\r\n### Specifications\r\nCentOS Linux release 7.6.1810 (Core)\r\nCurator 5.7.3\r\n\r\nFile curator.yml\r\n\r\n> client:\r\n>   hosts: [ \"elasticsearch-node1:9200\", \"elasticsearch-node2:9200\" ]\r\n>   url_prefix:\r\n>   use_ssl: False\r\n>   certificate:\r\n>   client_cert:\r\n>   client_key:\r\n>   ssl_no_validate: False\r\n>   http_auth:\r\n>   timeout: 30\r\n>   master_only: False\r\n> \r\n> logging:\r\n>   loglevel: INFO\r\n>   logfile:\r\n>   logformat: default\r\n>   blacklist: ['elasticsearch', 'urllib3']\r\n\r\nFile action.yml\r\n\r\n> actions:\r\n>   1:\r\n>     action: delete_indices\r\n>     description: >-\r\n>       Delete indices older than 3 months (based on index name). Ignore the error if the filter\r\n>       does not result in an actionable list of indices (ignore_empty_list) and exit cleanly.\r\n>     options:\r\n>       ignore_empty_list: True\r\n>     filters:\r\n>     - filtertype: age\r\n>       source: name\r\n>       direction: older\r\n>       timestring: '%Y.%m.%d'\r\n>       unit: months\r\n>       unit_count: 3", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1385", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1385/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1385/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1385/events", "html_url": "https://github.com/elastic/curator/issues/1385", "id": 436927643, "node_id": "MDU6SXNzdWU0MzY5Mjc2NDM=", "number": 1385, "title": "pip install fails when installing urllib3 dependency", "user": {"login": "yurishkuro", "id": 3523016, "node_id": "MDQ6VXNlcjM1MjMwMTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/3523016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yurishkuro", "html_url": "https://github.com/yurishkuro", "followers_url": "https://api.github.com/users/yurishkuro/followers", "following_url": "https://api.github.com/users/yurishkuro/following{/other_user}", "gists_url": "https://api.github.com/users/yurishkuro/gists{/gist_id}", "starred_url": "https://api.github.com/users/yurishkuro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yurishkuro/subscriptions", "organizations_url": "https://api.github.com/users/yurishkuro/orgs", "repos_url": "https://api.github.com/users/yurishkuro/repos", "events_url": "https://api.github.com/users/yurishkuro/events{/privacy}", "received_events_url": "https://api.github.com/users/yurishkuro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-24T22:05:49Z", "updated_at": "2019-04-24T23:34:28Z", "closed_at": "2019-04-24T23:34:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "## To submit a bug or report an issue\r\n\r\nThis Dockerfile stopped working today:\r\n```\r\nFROM python:3-alpine\r\nRUN pip install elasticsearch elasticsearch-curator\r\n...\r\n```\r\n\r\n### Expected Behavior\r\n\r\n`pip install` used to work fine yesterday.\r\n\r\n### Actual Behavior\r\n\r\n```\r\nSearching for urllib3>=1.21.1\r\n    Reading https://pypi.org/simple/urllib3/\r\n    Downloading https://files.pythonhosted.org/packages/c0/1f/516c14fd47ced1a2e2882edd776241c5b707ffc9051cd372843579829994/urllib3-1.25.1-py2.py3-none-any.whl#sha256=a9645efd62b9fc1c7cad8ed93e162aad4c6bfd90e143966ddd4099b78cd244be\r\n    Best match: urllib3 1.25.1\r\n    Processing urllib3-1.25.1-py2.py3-none-any.whl\r\n    Installing urllib3-1.25.1-py2.py3-none-any.whl to /tmp/pip-install-l6fu_uma/elasticsearch-curator/.eggs\r\n    writing requirements to /tmp/pip-install-l6fu_uma/elasticsearch-curator/.eggs/urllib3-1.25.1-py3.7.egg/EGG-INFO/requires.txt\r\n\r\n    Installed /tmp/pip-install-l6fu_uma/elasticsearch-curator/.eggs/urllib3-1.25.1-py3.7.egg\r\n    Traceback (most recent call last):\r\n      File \"/tmp/pip-install-l6fu_uma/elasticsearch-curator/setup.py\", line 37, in <module>\r\n        from cx_Freeze import setup, Executable\r\n    ModuleNotFoundError: No module named 'cx_Freeze'\r\n\r\n    During handling of the above exception, another exception occurred:\r\n\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 1, in <module>\r\n      File \"/tmp/pip-install-l6fu_uma/elasticsearch-curator/setup.py\", line 173, in <module>\r\n        tests_require = [\"mock\", \"nose\", \"coverage\", \"nosexcover\"]\r\n      File \"/usr/local/lib/python3.7/site-packages/setuptools/__init__.py\", line 128, in setup\r\n        _install_setup_requires(attrs)\r\n      File \"/usr/local/lib/python3.7/site-packages/setuptools/__init__.py\", line 123, in _install_setup_requires\r\n        dist.fetch_build_eggs(dist.setup_requires)\r\n      File \"/usr/local/lib/python3.7/site-packages/setuptools/dist.py\", line 514, in fetch_build_eggs\r\n        replace_conflicting=True,\r\n      File \"/usr/local/lib/python3.7/site-packages/pkg_resources/__init__.py\", line 779, in resolve\r\n        raise VersionConflict(dist, req).with_context(dependent_req)\r\n    pkg_resources.ContextualVersionConflict: (urllib3 1.25.1 (/tmp/pip-install-l6fu_uma/elasticsearch-curator/.eggs/urllib3-1.25.1-py3.7.egg), Requirement.parse('urllib3<1.25,>=1.21.1'), {'requests'})\r\n```\r\n\r\n### Steps to Reproduce the Problem\r\n  1. create the above Dockerfile\r\n  1. `docker build`\r\n\r\n### Specifications\r\n\r\n  - Version: latest\r\n  - Platform: Linux\r\n\r\n\r\n## Context (Environment)\r\n\r\nBreaking Jaeger CI build: https://github.com/jaegertracing/jaeger/issues/1494\r\n\r\n## Detailed Description\r\n\r\nLooks like a conflict in some dependency versions.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1382", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1382/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1382/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1382/events", "html_url": "https://github.com/elastic/curator/issues/1382", "id": 436403395, "node_id": "MDU6SXNzdWU0MzY0MDMzOTU=", "number": 1382, "title": "Feature request: Change empty index list errors to use stderr", "user": {"login": "chrisregnier", "id": 6164475, "node_id": "MDQ6VXNlcjYxNjQ0NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/6164475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chrisregnier", "html_url": "https://github.com/chrisregnier", "followers_url": "https://api.github.com/users/chrisregnier/followers", "following_url": "https://api.github.com/users/chrisregnier/following{/other_user}", "gists_url": "https://api.github.com/users/chrisregnier/gists{/gist_id}", "starred_url": "https://api.github.com/users/chrisregnier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chrisregnier/subscriptions", "organizations_url": "https://api.github.com/users/chrisregnier/orgs", "repos_url": "https://api.github.com/users/chrisregnier/repos", "events_url": "https://api.github.com/users/chrisregnier/events{/privacy}", "received_events_url": "https://api.github.com/users/chrisregnier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-23T21:42:56Z", "updated_at": "2019-04-23T21:51:57Z", "closed_at": "2019-04-23T21:51:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "While doing a show_indices on an empty list I obviously get an error and the log message about \"Singleton action not performed: empty index list\". Adding the `--ignore_empty_list` option allows the command to exit with 0, but it still prints the message on stdout. This makes scripting certain things harder because I now can't take the output w/o having to parse it for specific error messages as well.  \r\nError messages should probably go to stderr so it can be redirected and output in this case should just be an empty string, which is what I would expect if I tried to filter an empty list.\r\n\r\nI couldn't see a `--quiet` option or a way to drop debug logs either, so I'd like to request that all debugs or errors are send to stderr please.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1380", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1380/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1380/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1380/events", "html_url": "https://github.com/elastic/curator/issues/1380", "id": 433271974, "node_id": "MDU6SXNzdWU0MzMyNzE5NzQ=", "number": 1380, "title": "Elasticsearch version 7.0.0 incompatible with version of Curator (5.6.0)", "user": {"login": "tiempososcuros", "id": 31760469, "node_id": "MDQ6VXNlcjMxNzYwNDY5", "avatar_url": "https://avatars0.githubusercontent.com/u/31760469?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiempososcuros", "html_url": "https://github.com/tiempososcuros", "followers_url": "https://api.github.com/users/tiempososcuros/followers", "following_url": "https://api.github.com/users/tiempososcuros/following{/other_user}", "gists_url": "https://api.github.com/users/tiempososcuros/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiempososcuros/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiempososcuros/subscriptions", "organizations_url": "https://api.github.com/users/tiempososcuros/orgs", "repos_url": "https://api.github.com/users/tiempososcuros/repos", "events_url": "https://api.github.com/users/tiempososcuros/events{/privacy}", "received_events_url": "https://api.github.com/users/tiempososcuros/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 590817828, "node_id": "MDU6TGFiZWw1OTA4MTc4Mjg=", "url": "https://api.github.com/repos/elastic/curator/labels/KNOWN%20ISSUE", "name": "KNOWN ISSUE", "color": "d96f3f", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-04-15T13:07:00Z", "updated_at": "2019-04-25T16:42:54Z", "closed_at": "2019-04-24T21:39:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Expected Behavior\r\nCurator run correctly\r\n\r\n### Actual Behavior\r\nCurator displays an error message indicating that it is incompatible with the latest version of Elasticsearch\r\n\r\n### Steps to Reproduce the Problem\r\nLogin root user\r\n`curator --config /root/.curator/curator.yml --dry-run /root/.curator/action.yml`\r\n\r\n### Specifications\r\nCentOS Linux release 7.6.1810 (Core)\r\nCurator 5.6.0\r\n\r\nFile curator.yml\r\n\r\n>client:\r\n  hosts: [ \"elasticsearch-node1:9200\", \"elasticsearch-node2:9200\" ]\r\n  url_prefix:\r\n  use_ssl: False\r\n  certificate:\r\n  client_cert:\r\n  client_key:\r\n  ssl_no_validate: False\r\n  http_auth:\r\n  timeout: 30\r\n  master_only: False\r\nlogging:\r\n  loglevel: INFO\r\n  logfile:\r\n  logformat: default\r\n  blacklist: ['elasticsearch', 'urllib3']> \r\n\r\n\r\nFile action.yml\r\n> actions:\r\n  1:\r\n    action: delete_indices\r\n    description: >-\r\n      Delete indices older than 3 months (based on index name). Ignore the error if the filter\r\n      does not result in an actionable list of indices (ignore_empty_list) and exit cleanly.\r\n    options:\r\n      ignore_empty_list: True\r\n    filters:\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y.%m.%d'\r\n      unit: months\r\n      unit_count: 3> ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1378", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1378/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1378/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1378/events", "html_url": "https://github.com/elastic/curator/issues/1378", "id": 430217593, "node_id": "MDU6SXNzdWU0MzAyMTc1OTM=", "number": 1378, "title": "Fixes #1375 (shrink fails from lack of copy_settings)", "user": {"login": "genevera", "id": 12733137, "node_id": "MDQ6VXNlcjEyNzMzMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/12733137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/genevera", "html_url": "https://github.com/genevera", "followers_url": "https://api.github.com/users/genevera/followers", "following_url": "https://api.github.com/users/genevera/following{/other_user}", "gists_url": "https://api.github.com/users/genevera/gists{/gist_id}", "starred_url": "https://api.github.com/users/genevera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/genevera/subscriptions", "organizations_url": "https://api.github.com/users/genevera/orgs", "repos_url": "https://api.github.com/users/genevera/repos", "events_url": "https://api.github.com/users/genevera/events{/privacy}", "received_events_url": "https://api.github.com/users/genevera/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-08T01:20:33Z", "updated_at": "2019-04-08T01:23:30Z", "closed_at": "2019-04-08T01:23:30Z", "author_association": "NONE", "active_lock_reason": null, "body": null, "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1377", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1377/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1377/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1377/events", "html_url": "https://github.com/elastic/curator/issues/1377", "id": 430217355, "node_id": "MDU6SXNzdWU0MzAyMTczNTU=", "number": 1377, "title": "fix bug", "user": {"login": "bitlyvera", "id": 37309757, "node_id": "MDQ6VXNlcjM3MzA5NzU3", "avatar_url": "https://avatars2.githubusercontent.com/u/37309757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bitlyvera", "html_url": "https://github.com/bitlyvera", "followers_url": "https://api.github.com/users/bitlyvera/followers", "following_url": "https://api.github.com/users/bitlyvera/following{/other_user}", "gists_url": "https://api.github.com/users/bitlyvera/gists{/gist_id}", "starred_url": "https://api.github.com/users/bitlyvera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bitlyvera/subscriptions", "organizations_url": "https://api.github.com/users/bitlyvera/orgs", "repos_url": "https://api.github.com/users/bitlyvera/repos", "events_url": "https://api.github.com/users/bitlyvera/events{/privacy}", "received_events_url": "https://api.github.com/users/bitlyvera/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-08T01:18:57Z", "updated_at": "2019-04-08T01:24:29Z", "closed_at": "2019-04-08T01:24:29Z", "author_association": "NONE", "active_lock_reason": null, "body": null, "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1376", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1376/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1376/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1376/events", "html_url": "https://github.com/elastic/curator/issues/1376", "id": 430216729, "node_id": "MDU6SXNzdWU0MzAyMTY3Mjk=", "number": 1376, "title": "Fixes #1375", "user": {"login": "genevera", "id": 12733137, "node_id": "MDQ6VXNlcjEyNzMzMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/12733137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/genevera", "html_url": "https://github.com/genevera", "followers_url": "https://api.github.com/users/genevera/followers", "following_url": "https://api.github.com/users/genevera/following{/other_user}", "gists_url": "https://api.github.com/users/genevera/gists{/gist_id}", "starred_url": "https://api.github.com/users/genevera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/genevera/subscriptions", "organizations_url": "https://api.github.com/users/genevera/orgs", "repos_url": "https://api.github.com/users/genevera/repos", "events_url": "https://api.github.com/users/genevera/events{/privacy}", "received_events_url": "https://api.github.com/users/genevera/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-08T01:14:40Z", "updated_at": "2019-04-08T01:17:43Z", "closed_at": "2019-04-08T01:17:43Z", "author_association": "NONE", "active_lock_reason": null, "body": null, "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1367", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1367/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1367/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1367/events", "html_url": "https://github.com/elastic/curator/issues/1367", "id": 422210651, "node_id": "MDU6SXNzdWU0MjIyMTA2NTE=", "number": 1367, "title": "Environment variable substitution doesn't work", "user": {"login": "igajsin", "id": 8049166, "node_id": "MDQ6VXNlcjgwNDkxNjY=", "avatar_url": "https://avatars0.githubusercontent.com/u/8049166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igajsin", "html_url": "https://github.com/igajsin", "followers_url": "https://api.github.com/users/igajsin/followers", "following_url": "https://api.github.com/users/igajsin/following{/other_user}", "gists_url": "https://api.github.com/users/igajsin/gists{/gist_id}", "starred_url": "https://api.github.com/users/igajsin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igajsin/subscriptions", "organizations_url": "https://api.github.com/users/igajsin/orgs", "repos_url": "https://api.github.com/users/igajsin/repos", "events_url": "https://api.github.com/users/igajsin/events{/privacy}", "received_events_url": "https://api.github.com/users/igajsin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-03-18T13:14:02Z", "updated_at": "2019-08-01T14:22:23Z", "closed_at": "2019-03-18T13:54:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there. I have curator version 5.6.0 and I try to use env variables. There are my config:\r\n\r\n---\r\nclient:\r\n  hosts:\r\n    - ${ES_HOST}\r\n  port: ${ES_PORT:9200}\r\n  ...\r\nand my variables:\r\n~ $ env\r\nES_HOST=11.22.33.44\r\n\r\nAnd I expect than when running curator it substitute data to a config like\r\n\r\n---\r\nclient:\r\n  hosts:\r\n    - 11.22.33.44\r\n  port: 9200\r\n\r\nand will work with that config. Instead, I've got:\r\n\r\ncurator --dry-run --config ./curator.yml clean.yml \r\n/usr/local/lib/python3.7/site-packages/curator/utils.py:53: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\r\n  return yaml.load(read_file(path))\r\nSchema error: not a valid value for dictionary value @ data['client']['port']\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/validators/schemacheck.py\", line 57, in result\r\n    return self.schema(self.config)\r\n  File \"/usr/local/lib/python3.7/site-packages/voluptuous/schema_builder.py\", line 267, in __call__\r\n    return self._compiled([], data)\r\n  File \"/usr/local/lib/python3.7/site-packages/voluptuous/schema_builder.py\", line 589, in validate_dict\r\n    return base_validate(path, iteritems(data), out)\r\n  File \"/usr/local/lib/python3.7/site-packages/voluptuous/schema_builder.py\", line 427, in validate_mapping\r\n    raise er.MultipleInvalid(errors)\r\nvoluptuous.error.MultipleInvalid: not a valid value for dictionary value @ data['client']['port']\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/curator\", line 10, in <module>\r\n    sys.exit(cli())\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/cli.py\", line 213, in cli\r\n    run(config, action_file, dry_run)\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/cli.py\", line 106, in run\r\n    client_args = process_config(config)\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/config_utils.py\", line 37, in process_config\r\n    config = test_config(yaml_file)\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/config_utils.py\", line 20, in test_config\r\n    'Client Configuration', 'full configuration dictionary').result()\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/validators/schemacheck.py\", line 69, in result\r\n    self.test_what, self.location, self.badvalue, self.error)\r\ncurator.exceptions.ConfigurationError: Configuration: Client Configuration: Location: full configuration dictionary: Bad Value: \"{'hosts': ['${ES_HOST}'], 'port': '${ES_PORT:9200}', 'use_ssl': False, 'ssl_no_validate': False, 'timeout': 30, 'master_only': False}\", not a valid value for dictionary value @ data['client']['port']. Check configuration file.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1366", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1366/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1366/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1366/events", "html_url": "https://github.com/elastic/curator/issues/1366", "id": 420043592, "node_id": "MDU6SXNzdWU0MjAwNDM1OTI=", "number": 1366, "title": "Unable to delete snapshots", "user": {"login": "Tonysykes", "id": 9152394, "node_id": "MDQ6VXNlcjkxNTIzOTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/9152394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tonysykes", "html_url": "https://github.com/Tonysykes", "followers_url": "https://api.github.com/users/Tonysykes/followers", "following_url": "https://api.github.com/users/Tonysykes/following{/other_user}", "gists_url": "https://api.github.com/users/Tonysykes/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tonysykes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tonysykes/subscriptions", "organizations_url": "https://api.github.com/users/Tonysykes/orgs", "repos_url": "https://api.github.com/users/Tonysykes/repos", "events_url": "https://api.github.com/users/Tonysykes/events{/privacy}", "received_events_url": "https://api.github.com/users/Tonysykes/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-12T15:15:39Z", "updated_at": "2019-08-02T06:24:46Z", "closed_at": "2019-08-02T06:24:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "We have created a curator job that runs on AWS lambda, once triggered it creates snapshot of the kibana index (using the .kibana alias) and then deletes snapshots older the the most recent 8.\r\n\r\n### Actual Behavior\r\nWhen lambda executes the delete snapshot action we get the following error in the cloudwatch logs;\r\nFailed to complete action: delete_snapshots. <class 'TypeError'>: '<' not supported between instances of 'NoneType' and 'int'\r\n\r\n\r\nI have this working locally (not AWS)  without an issue on ES 6.6.1, curator 5.6, python 3.6. I cannot upgrade the Production system to ES 6.6.1 until our next next update schedule (A few months away). I don't see how the ES version would cause this error though.\r\n\r\n### Specifications\r\n  - Version: 5.6\r\n  - Platform: AWS Lambda\r\n  - ES 6.5.4\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1363", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1363/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1363/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1363/events", "html_url": "https://github.com/elastic/curator/issues/1363", "id": 414506569, "node_id": "MDU6SXNzdWU0MTQ1MDY1Njk=", "number": 1363, "title": "Kibana filtertype is not catching some Kibana indices", "user": {"login": "ismael-hasan", "id": 10942273, "node_id": "MDQ6VXNlcjEwOTQyMjcz", "avatar_url": "https://avatars1.githubusercontent.com/u/10942273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ismael-hasan", "html_url": "https://github.com/ismael-hasan", "followers_url": "https://api.github.com/users/ismael-hasan/followers", "following_url": "https://api.github.com/users/ismael-hasan/following{/other_user}", "gists_url": "https://api.github.com/users/ismael-hasan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ismael-hasan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ismael-hasan/subscriptions", "organizations_url": "https://api.github.com/users/ismael-hasan/orgs", "repos_url": "https://api.github.com/users/ismael-hasan/repos", "events_url": "https://api.github.com/users/ismael-hasan/events{/privacy}", "received_events_url": "https://api.github.com/users/ismael-hasan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 186818252, "node_id": "MDU6TGFiZWwxODY4MTgyNTI=", "url": "https://api.github.com/repos/elastic/curator/labels/Documentation", "name": "Documentation", "color": "009800", "default": false, "description": null}, {"id": 52803247, "node_id": "MDU6TGFiZWw1MjgwMzI0Nw==", "url": "https://api.github.com/repos/elastic/curator/labels/bug", "name": "bug", "color": "ff0040", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-02-26T09:17:12Z", "updated_at": "2019-07-12T17:39:31Z", "closed_at": "2019-07-12T17:39:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Expected Behavior\r\nKibana filtertype should cover most of the possibilities for kibana indices (`.kibana*`?)\r\n\r\n### Actual Behavior\r\nKibana filtertype only covers `.kibana`, `.kibana-5` and `.kibana-6` - https://github.com/elastic/curator/blob/v5.6.0/curator/indexlist.py#L653-L671 . \r\n\r\nAs part of successive upgrades in Kibana needing reindexing the indices, the cluster may end up with an index name for Kibana not included in the previous list and a `.kibana` alias pointing to it.\r\n\r\n### Steps to Reproduce the Problem\r\n  1. Install Elasticsearch (trial) and Kibana, 6.4\r\n  2. Upgrade to 6.5 which includes spaces\r\n  3. Kibana index is re-indexed into a new one that is not included in the previous indices names list, and therefore, it will not be caught by the kibana filtertype. \r\n\r\n## Context (Environment)\r\nIf we have an action to delete indices older than X days (filtertype `age`, source `creation_date`) in which we are excluding the kibana filtertype, if the index name is not one of the 3 names stated in the code the delete action can remove the Kibana index. \r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1362", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1362/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1362/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1362/events", "html_url": "https://github.com/elastic/curator/issues/1362", "id": 414043355, "node_id": "MDU6SXNzdWU0MTQwNDMzNTU=", "number": 1362, "title": "Snapshot action not starting but delete snapshot is working fine", "user": {"login": "rmorandell-pgum", "id": 46994680, "node_id": "MDQ6VXNlcjQ2OTk0Njgw", "avatar_url": "https://avatars0.githubusercontent.com/u/46994680?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmorandell-pgum", "html_url": "https://github.com/rmorandell-pgum", "followers_url": "https://api.github.com/users/rmorandell-pgum/followers", "following_url": "https://api.github.com/users/rmorandell-pgum/following{/other_user}", "gists_url": "https://api.github.com/users/rmorandell-pgum/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmorandell-pgum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmorandell-pgum/subscriptions", "organizations_url": "https://api.github.com/users/rmorandell-pgum/orgs", "repos_url": "https://api.github.com/users/rmorandell-pgum/repos", "events_url": "https://api.github.com/users/rmorandell-pgum/events{/privacy}", "received_events_url": "https://api.github.com/users/rmorandell-pgum/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-02-25T10:48:14Z", "updated_at": "2019-02-25T16:03:14Z", "closed_at": "2019-02-25T16:03:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "About the elastic API I have no problems to make snapshot and restore it. Also on the CLI via a CURL it works flawlessly.\r\nEven deleting the snapshot works without problems via the curator. But if I want to take a snapshot into my FS repo via the curator, the curator starts the actionFile but then shows no output. Also no error message. The log level is set to \"DEBUG\".\r\n\r\nHere the YML for the delete and the LOG to it ...\r\n\r\n**delete snapshot YML WORKING**\r\n\r\n```\r\n---\r\n# Remember, leave a key empty if there is no value.  None will be a string,\r\n# not a Python \"NoneType\"\r\n#\r\n# Also remember that all examples have 'disable_action' set to True.  If you\r\n# want to use this action as a template, be sure to set this to False after\r\n# copying it.\r\nactions:\r\n  1:\r\n    action: delete_snapshots\r\n    description: >-\r\n      Delete snapshots from the selected repository older than 2 days\r\n      (based on creation_date), for 'snapshot' prefixed snapshots.\r\n    options:\r\n      repository: kibana_backup\r\n      disable_action: False\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: snapshot\r\n    - filtertype: age\r\n      source: creation_date\r\n      direction: older\r\n      unit: minutes\r\n      unit_count: 1\r\n```\r\n**Log**\r\n\r\n...\r\n2019-02-25 11:30:22,143 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filter\" config: {'filtertype': 'age', 'source': 'creation_date', 'direction': 'older', 'unit': 'minutes', 'unit_count': 1, 'exclude': False, 'epoch': None, 'timestring': None}\r\n2019-02-25 11:30:22,143 DEBUG       curator.snapshotlist        iterate_filters:514  Parsed filter args: {'filtertype': 'age', 'source': 'creation_date', 'direction': 'older', 'unit': 'minutes', 'unit_count': 1, 'exclude': False, 'epoch': None, 'timestring': None}\r\n2019-02-25 11:30:22,143 DEBUG       curator.snapshotlist        iterate_filters:523  Filter args: {'source': 'creation_date', 'direction': 'older', 'unit': 'minutes', 'unit_count': 1, 'exclude': False, 'epoch': None, 'timestring': None}\r\n2019-02-25 11:30:22,143 DEBUG       curator.snapshotlist        iterate_filters:524  Pre-instance: ['snapshot_20190225']\r\n2019-02-25 11:30:22,143 DEBUG       curator.snapshotlist          filter_by_age:265  Starting filter_by_age\r\n2019-02-25 11:30:22,143 DEBUG       curator.snapshotlist          filter_by_age:268  Point of Reference: 1551090562\r\n2019-02-25 11:30:22,143 DEBUG       curator.snapshotlist           __actionable:44   Snapshot snapshot_20190225 is actionable and remains in the list.\r\n2019-02-25 11:30:22,143 DEBUG       curator.snapshotlist            __excludify:69   Remains in actionable list: Snapshot \"snapshot_20190225\" age (1551088917), direction: \"older\", point of reference, (1551090562)\r\n2019-02-25 11:30:22,143 DEBUG       curator.snapshotlist        iterate_filters:526  Post-instance: ['snapshot_20190225']\r\n2019-02-25 11:30:22,143 INFO      curator.actions.delete_snapshots             do_dry_run:978  DRY-RUN MODE.  No changes will be made.\r\n2019-02-25 11:30:22,144 INFO      curator.actions.delete_snapshots             do_dry_run:986  DRY-RUN: delete_snapshot: snapshot_20190225 with arguments: {'repository': 'kibana_backup', 'retry_interval': 120, 'retry_count': 3}\r\n2019-02-25 11:30:22,144 INFO                 curator.cli                    run:196  Action ID: 1, \"delete_snapshots\" completed.\r\n2019-02-25 11:30:22,144 INFO                 curator.cli                    run:197  Job completed.\r\n\r\n**And here is the yml actionfile for the snapshot that do nothing**\r\n```\r\n# Remember, leave a key empty if there is no value.  None will be a string,\r\n# not a Python \"NoneType\"\r\n#\r\n# Also remember that all examples have 'disable_action' set to True.  If you\r\n# want to use this action as a template, be sure to set this to False after\r\n# copying it.\r\nactions:\r\n  1:\r\n    action: snapshot\r\n    description: >-\r\n      Snapshot selected indices to 'repository' with the snapshot name or name\r\n      pattern in 'name'.  Use all other options as assigned\r\n    options:\r\n      repository: kibana_backup\r\n      name: 'kibana-%Y%m%d%H%M%S'\r\n      ignore_unavailable: False\r\n      include_global_state: True\r\n      partial: False\r\n      wait_for_completion: True\r\n      skip_repo_fs_check: False\r\n      timeout_override:\r\n      continue_if_exception: True\r\n      disable_action: False\r\n    filters:\r\n    - filtertype: pattern\r\n     kind: prefix\r\n     value: .kibana\r\n     exclude: False\r\n```\r\n\r\n**And here the log**\r\n\r\n2019-02-25 11:35:07,789 DEBUG                curator.cli                    run:108  Client and logging options validated.\r\n2019-02-25 11:35:07,789 DEBUG                curator.cli                    run:112  default_timeout = 30\r\n2019-02-25 11:35:07,789 DEBUG                curator.cli                    run:116  action_file: /etc/curator/snapshot_kibana.yml\r\n\r\nI also tried to use a regex. But nothing changes\r\n\r\n    - filtertype: pattern\r\n     kind: regex\r\n     value: '^\\.kibana.*$'\r\n     exclude: False\r\n\r\n**curator.yml**\r\n\r\n```\r\n---\r\n# Remember, leave a key empty if there is no value.  None will be a string,\r\n# not a Python \"NoneType\"\r\nclient:\r\n  hosts:\r\n    - 127.0.0.1\r\n  port: 9200\r\n  url_prefix:\r\n  use_ssl: False\r\n  certificate:\r\n  client_cert:\r\n  client_key:\r\n  aws_key:\r\n  aws_secret_key:\r\n  aws_region:\r\n  ssl_no_validate: False\r\n  http_auth:\r\n  timeout: 30\r\n  master_only: False\r\n\r\nlogging:\r\n  loglevel: DEBUG\r\n  logfile:\r\n  logformat: default\r\n  blacklist: []\r\n#  blacklist: ['elasticsearch', 'urllib3']\r\n```\r\n\r\n**Specifications**\r\n\r\n  - Version: 5.6.0\r\n  - Platform: CentOS7\r\n  - Elasticsearch: 6.5.4\r\n  -minimum_wire_compatibility_version\" : \"5.6.0\"\r\n   -minimum_index_compatibility_version\" : \"5.0.0\"\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1360", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1360/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1360/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1360/events", "html_url": "https://github.com/elastic/curator/issues/1360", "id": 410148530, "node_id": "MDU6SXNzdWU0MTAxNDg1MzA=", "number": 1360, "title": "Curator reporting error and crashes in restore with \"large\" number of indices", "user": {"login": "breml", "id": 6205217, "node_id": "MDQ6VXNlcjYyMDUyMTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/6205217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/breml", "html_url": "https://github.com/breml", "followers_url": "https://api.github.com/users/breml/followers", "following_url": "https://api.github.com/users/breml/following{/other_user}", "gists_url": "https://api.github.com/users/breml/gists{/gist_id}", "starred_url": "https://api.github.com/users/breml/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/breml/subscriptions", "organizations_url": "https://api.github.com/users/breml/orgs", "repos_url": "https://api.github.com/users/breml/repos", "events_url": "https://api.github.com/users/breml/events{/privacy}", "received_events_url": "https://api.github.com/users/breml/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-02-14T06:29:35Z", "updated_at": "2019-08-13T23:06:40Z", "closed_at": "2019-08-13T23:06:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While restoring ~280 indices (full restore) with curator, the task is submitted to elasticsearch and then curator reports the following error and quits afterwards.\r\n\r\n```\r\n2019-02-13 07:17:38,507 ERROR                curator.cli                    run:184  Failed to complete action: restore.  <class 'curator.exceptions.FailedExecution'>: Exception encountered.  Rerun with loglevel DEBUG and/or check Elasticsearch logs for more information. Exception: Unable to obtain recovery information for specified indices. Error: TransportError(400, 'too_long_frame_exception', 'An HTTP line is larger than 4096 bytes.')\r\n```\r\n\r\nThe restore operation is executed by elasticsearch successfully but curator fails to wait for completion of the task.\r\n\r\nsee also https://github.com/elastic/curator/issues/1224#issuecomment-463077090\r\n\r\n### Expected Behavior\r\n\r\nCurator restores all indices from snapshot and waits for completion of the operation without error\r\n\r\n### Steps to Reproduce the Problem\r\n\r\nRestore \"large\" amount of indices with a single restore action in curator.\r\n\r\n### Specifications\r\n\r\n  - Version: cruator 5.5.1\r\n  - Platform: Linux\r\n\r\n## Context (Environment)\r\n\r\nThis \"large\" restore was part of a task to build up an second test environment for development and test purposes where the full backup from the first environment was restored.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1357", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1357/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1357/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1357/events", "html_url": "https://github.com/elastic/curator/issues/1357", "id": 402754625, "node_id": "MDU6SXNzdWU0MDI3NTQ2MjU=", "number": 1357, "title": "ERROR Schema error: 'str' object has no attribute 'items'", "user": {"login": "samcro1967", "id": 2319445, "node_id": "MDQ6VXNlcjIzMTk0NDU=", "avatar_url": "https://avatars0.githubusercontent.com/u/2319445?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samcro1967", "html_url": "https://github.com/samcro1967", "followers_url": "https://api.github.com/users/samcro1967/followers", "following_url": "https://api.github.com/users/samcro1967/following{/other_user}", "gists_url": "https://api.github.com/users/samcro1967/gists{/gist_id}", "starred_url": "https://api.github.com/users/samcro1967/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samcro1967/subscriptions", "organizations_url": "https://api.github.com/users/samcro1967/orgs", "repos_url": "https://api.github.com/users/samcro1967/repos", "events_url": "https://api.github.com/users/samcro1967/events{/privacy}", "received_events_url": "https://api.github.com/users/samcro1967/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 590817828, "node_id": "MDU6TGFiZWw1OTA4MTc4Mjg=", "url": "https://api.github.com/repos/elastic/curator/labels/KNOWN%20ISSUE", "name": "KNOWN ISSUE", "color": "d96f3f", "default": false, "description": null}, {"id": 52803248, "node_id": "MDU6TGFiZWw1MjgwMzI0OA==", "url": "https://api.github.com/repos/elastic/curator/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-24T15:16:18Z", "updated_at": "2019-01-24T16:44:53Z", "closed_at": "2019-01-24T15:35:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to delete indices from elasticsearch.\r\n\r\nRunning curator_cli --host localhost show_indices --verbose --header produces the following:\r\n\r\nC:\\Program Files\\elasticsearch-curator>curator_cli --host localhost show_indices --verbose --header\r\nIndex               State     Size      Docs Pri Rep   Creation Timestamp\r\n.kibana_1            open    5.2KB         1   1   0 2018-12-13T22:10:10Z\r\ntelegraf-2018.12.13  open  103.8MB   1105152   5   1 2018-12-13T22:09:42Z\r\ntelegraf-2018.12.14  open    1.5GB  16806115   5   1 2018-12-14T00:00:00Z\r\n...\r\n\r\nRunning the following curator_cli --host localhost delete_indices --filter_list <back_slash>\"'{\"filtertype\":\"age\",\"source\":\"name\",\"timestring\":\"%Y.%m.%d\",\"unit\":\"days\",\"unit_count\":30,\"direction\":\"older\"}<back_slash>\" produces the following:\r\n\r\nC:\\Program Files\\elasticsearch-curator>curator_cli --host localhost delete_indices --filter_list '\\\"'{\"filtertype\":\"age\",\"source\":\"name\",\"timestring\":\"%Y.%m.%d\",\"unit\":\"days\",\"unit_count\":1,\"direction\":\"older\"}'\\\"\r\n2019-01-24 09:08:50,031 ERROR     Schema error: 'str' object has no attribute 'items'\r\n2019-01-24 09:08:50,032 CRITICAL  Unable to parse filters: Configuration: filters: Location: show_indices singleton action \"filters\": Bad Value: \"None\", 'str' object has no attribute 'items'. Check configuration file.\r\n\r\nI am encapsulating the filter type in quotes and escaping the outer quotes with back slashes.  Without doing that, I get invalid filter type error message I believe due to the Windows command line interpreter special characters.  I believe the correct filter type string is being passed to curator_cli.exe by doing this.\r\n\r\n  - Version: elasticsearch-curator-5.6.0-amd64.msi\r\n  - Platform: Microsoft Windows [Version 10.0.17134.523]\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1354", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1354/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1354/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1354/events", "html_url": "https://github.com/elastic/curator/issues/1354", "id": 401925921, "node_id": "MDU6SXNzdWU0MDE5MjU5MjE=", "number": 1354, "title": "regex in pattern filter only matches against start of string", "user": {"login": "matthewdupre", "id": 9053570, "node_id": "MDQ6VXNlcjkwNTM1NzA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9053570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewdupre", "html_url": "https://github.com/matthewdupre", "followers_url": "https://api.github.com/users/matthewdupre/followers", "following_url": "https://api.github.com/users/matthewdupre/following{/other_user}", "gists_url": "https://api.github.com/users/matthewdupre/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewdupre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewdupre/subscriptions", "organizations_url": "https://api.github.com/users/matthewdupre/orgs", "repos_url": "https://api.github.com/users/matthewdupre/repos", "events_url": "https://api.github.com/users/matthewdupre/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewdupre/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-22T19:50:36Z", "updated_at": "2019-01-24T01:15:19Z", "closed_at": "2019-01-24T01:15:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Expected Behavior\r\nhttps://www.elastic.co/guide/en/elasticsearch/client/curator/current/filtertype_pattern.html#_regex suggests I can use a regex pattern to match anywhere in a string - for example use the pattern \"y\" to match an index name \"xyz\".\r\n\r\n### Actual Behavior\r\nregex only ever matches when the pattern starts at the beginning of the index name: for example index \"xyz\" matches \"x\" but not \"y\".\r\n\r\n### Detailed Description\r\nThis happens because https://github.com/elastic/curator/blob/5.6/curator/indexlist.py#L451 (same in master at time of writing) uses the Python match() call, not search().  match() only evaluates the regex from the start of the string.\r\n\r\n### Workarounds / Impact\r\nIt's confusing that this isn't clearly documented as a limitation.\r\n\r\nYou can work around this in some cases by inserting \".*\" or equivalent at the beginning of the regex.  Unfortunately, I want to be able to pull the regex from an environment variable, but that doesn't support being combined with another string.  Overall, I want to be able to match indices with name \"<constant text>.${environment variable}.*\", which is currently impossible.  I think I'm going to have to add a startup wrapper to modify the environment variable and add .* to it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1353", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1353/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1353/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1353/events", "html_url": "https://github.com/elastic/curator/issues/1353", "id": 401745988, "node_id": "MDU6SXNzdWU0MDE3NDU5ODg=", "number": 1353, "title": "No actionable items in list with Forcemerge", "user": {"login": "gauchoux", "id": 23196279, "node_id": "MDQ6VXNlcjIzMTk2Mjc5", "avatar_url": "https://avatars0.githubusercontent.com/u/23196279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gauchoux", "html_url": "https://github.com/gauchoux", "followers_url": "https://api.github.com/users/gauchoux/followers", "following_url": "https://api.github.com/users/gauchoux/following{/other_user}", "gists_url": "https://api.github.com/users/gauchoux/gists{/gist_id}", "starred_url": "https://api.github.com/users/gauchoux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gauchoux/subscriptions", "organizations_url": "https://api.github.com/users/gauchoux/orgs", "repos_url": "https://api.github.com/users/gauchoux/repos", "events_url": "https://api.github.com/users/gauchoux/events{/privacy}", "received_events_url": "https://api.github.com/users/gauchoux/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-01-22T12:39:49Z", "updated_at": "2019-01-23T13:49:54Z", "closed_at": "2019-01-23T13:49:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nSo I am trying to forcemerge old indexes, older than 5 days, with a certain pattern but I won't get it to work as I keep getting a message saying `Unable to complete action \"forcemerge\".  No actionable items in list: <class 'curator.exceptions.NoIndices'>`\r\n\r\nI can't find where I could have done a mistake and strangely all the indexes are removed at the `_get_segment_counts` stage but I don't have any filters that require to have the amount of segments.\r\n\r\nI am using curator 5.6 and a 5.6.8 AWS Elasticsearch cluster\r\n\r\nHere is my config file\r\n[config.txt](https://github.com/elastic/curator/files/2782770/config.txt)\r\n\r\nMy action file\r\n[ForceMergeOldLogs.txt](https://github.com/elastic/curator/files/2782767/ForceMergeOldLogs.txt)\r\n\r\nMy Debug Level Log File\r\n[log.txt](https://github.com/elastic/curator/files/2782761/log.txt)\r\n\r\nThanks in advance for your help.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1352", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1352/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1352/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1352/events", "html_url": "https://github.com/elastic/curator/issues/1352", "id": 401227806, "node_id": "MDU6SXNzdWU0MDEyMjc4MDY=", "number": 1352, "title": "Add ignore `resource_already_exists_exception` option to Create Index Action", "user": {"login": "breml", "id": 6205217, "node_id": "MDQ6VXNlcjYyMDUyMTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/6205217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/breml", "html_url": "https://github.com/breml", "followers_url": "https://api.github.com/users/breml/followers", "following_url": "https://api.github.com/users/breml/following{/other_user}", "gists_url": "https://api.github.com/users/breml/gists{/gist_id}", "starred_url": "https://api.github.com/users/breml/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/breml/subscriptions", "organizations_url": "https://api.github.com/users/breml/orgs", "repos_url": "https://api.github.com/users/breml/repos", "events_url": "https://api.github.com/users/breml/events{/privacy}", "received_events_url": "https://api.github.com/users/breml/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-01-21T07:38:01Z", "updated_at": "2019-08-29T16:24:55Z", "closed_at": "2019-08-08T17:42:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If curator executes a _Create Index_ action for an index, that already exists a `resource_already_exists_exception` exception is returned and curator exit with status code `1`. With the option `continue_if_exception: true` all exceptions can be ignored (and the status code is `0`).\r\n\r\nFor the _Create Index_ action I would prefere to be able to just ignore the `resource_already_exists_exception` exception as I am describing a state (I would like to have this index) and I am fine with having no error, if this index already exists.\r\n\r\nThis would be similar to `ignore_empty_list: true` for other actions.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1344", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1344/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1344/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1344/events", "html_url": "https://github.com/elastic/curator/issues/1344", "id": 396622295, "node_id": "MDU6SXNzdWUzOTY2MjIyOTU=", "number": 1344, "title": "Regression: restoring with wildcards doesn't succeed cleanly", "user": {"login": "ctong-ttc", "id": 43888913, "node_id": "MDQ6VXNlcjQzODg4OTEz", "avatar_url": "https://avatars1.githubusercontent.com/u/43888913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ctong-ttc", "html_url": "https://github.com/ctong-ttc", "followers_url": "https://api.github.com/users/ctong-ttc/followers", "following_url": "https://api.github.com/users/ctong-ttc/following{/other_user}", "gists_url": "https://api.github.com/users/ctong-ttc/gists{/gist_id}", "starred_url": "https://api.github.com/users/ctong-ttc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ctong-ttc/subscriptions", "organizations_url": "https://api.github.com/users/ctong-ttc/orgs", "repos_url": "https://api.github.com/users/ctong-ttc/repos", "events_url": "https://api.github.com/users/ctong-ttc/events{/privacy}", "received_events_url": "https://api.github.com/users/ctong-ttc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-07T19:41:51Z", "updated_at": "2019-01-07T22:32:57Z", "closed_at": "2019-01-07T22:32:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "## To submit a bug\r\n\r\nI attempted to restore a days worth of logs by submitting a restore with ['index_*_2018.12.31'] as my list of indices. According to https://github.com/elastic/curator/issues/989, this should behave properly. It does the restore, but does not exit cleanly.\r\n\r\n### Expected Behavior\r\n\r\nAll the indices with the name **index_<*anything that existed that day*>_2018.12.31** would be restored and it would not try to restore an index with the name **index_*_2018.12.31**, and then complain when it cannot find said index.\r\n\r\n### Actual Behavior\r\nIt tried to restore an index with the name **index_*_2018.12.31** and complained when it couldn't find it. Here is the relevant log:\r\n\r\n    2019-01-07 09:59:28,682 ERROR     Some of the indices do not appear to have been restored. Missing: ['index_*_2018.12.31']\r\n    2019-01-07 09:59:28,682 ERROR     Failed to complete action: restore.  <class 'curator.exceptions.FailedExecution'>: Exception encountered.  Rerun with loglevel DEBUG and/or check Elasticsearch logs for more information. Exception: Some of the indices do not appear to have been restored. Missing: ['index_*_2018.12.31']\r\n\r\n### Steps to Reproduce the Problem\r\n\r\n  1. Attempt to restore a set of indices with a wildcard.\r\n  1. Read the log after restoration is complete\r\n\r\n### Specifications\r\n\r\n  - Version: Curator 5.5.4, Elasticsearch 6.5.4\r\n  - Platform: Ubuntu", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1343", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1343/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1343/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1343/events", "html_url": "https://github.com/elastic/curator/issues/1343", "id": 396547396, "node_id": "MDU6SXNzdWUzOTY1NDczOTY=", "number": 1343, "title": "Environment variable substitution expects only one colon in the string ", "user": {"login": "osigida", "id": 6461608, "node_id": "MDQ6VXNlcjY0NjE2MDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/6461608?v=4", "gravatar_id": "", "url": "https://api.github.com/users/osigida", "html_url": "https://github.com/osigida", "followers_url": "https://api.github.com/users/osigida/followers", "following_url": "https://api.github.com/users/osigida/following{/other_user}", "gists_url": "https://api.github.com/users/osigida/gists{/gist_id}", "starred_url": "https://api.github.com/users/osigida/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/osigida/subscriptions", "organizations_url": "https://api.github.com/users/osigida/orgs", "repos_url": "https://api.github.com/users/osigida/repos", "events_url": "https://api.github.com/users/osigida/events{/privacy}", "received_events_url": "https://api.github.com/users/osigida/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 590817828, "node_id": "MDU6TGFiZWw1OTA4MTc4Mjg=", "url": "https://api.github.com/repos/elastic/curator/labels/KNOWN%20ISSUE", "name": "KNOWN ISSUE", "color": "d96f3f", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-07T16:07:04Z", "updated_at": "2019-01-07T16:27:12Z", "closed_at": "2019-01-07T16:27:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Environment variable substitution expects only one colon per string\r\n\r\nIn curator config file I can define only one colon if there is a environment variable substitution \r\nfollowing examples won't work and fail with exception\r\n\r\n```\r\nclient:\r\n  hosts:\r\n    - ${ELASTIC_SEARCH_HOST:logstash.host.com}:${ELASTIC_SEARCH_PORT:80}\r\n    - ${ELASTIC_SEARCH_HOST:logstash.host.com:80}\r\n    - ${ELASTIC_SEARCH_HOST:logstash.host.com}:80\r\n```\r\nnote: curator configuration allows to define host together with a port\r\n\r\nException:\r\n```\r\nFile \"/usr/local/lib/python3.7/site-packages/curator/utils.py\", line 45, in single_constructor \r\nenvvar, default = proto.split(':')\r\nValueError: too many values to unpack (expected 2)\r\n```\r\n\r\nCurator version: 5.6", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1342", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1342/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1342/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1342/events", "html_url": "https://github.com/elastic/curator/issues/1342", "id": 396290050, "node_id": "MDU6SXNzdWUzOTYyOTAwNTA=", "number": 1342, "title": "Rollover does not consider `is_write_index` on alias", "user": {"login": "memelet", "id": 22981, "node_id": "MDQ6VXNlcjIyOTgx", "avatar_url": "https://avatars3.githubusercontent.com/u/22981?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memelet", "html_url": "https://github.com/memelet", "followers_url": "https://api.github.com/users/memelet/followers", "following_url": "https://api.github.com/users/memelet/following{/other_user}", "gists_url": "https://api.github.com/users/memelet/gists{/gist_id}", "starred_url": "https://api.github.com/users/memelet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memelet/subscriptions", "organizations_url": "https://api.github.com/users/memelet/orgs", "repos_url": "https://api.github.com/users/memelet/repos", "events_url": "https://api.github.com/users/memelet/events{/privacy}", "received_events_url": "https://api.github.com/users/memelet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803249, "node_id": "MDU6TGFiZWw1MjgwMzI0OQ==", "url": "https://api.github.com/repos/elastic/curator/labels/feature_request", "name": "feature_request", "color": "84b6eb", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-06T20:11:19Z", "updated_at": "2019-04-30T03:32:55Z", "closed_at": "2019-04-30T03:32:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nWhen an alias points to multiple indices, but only one has `is_write_index:true`, curator still emits an error. This behavior is different than the rollover api, which will rollover the index where the alias has the attribute `is_write_index:true`.\r\n\r\nIt seems that rollable_alias (https://github.com/elastic/curator/blob/59a030c4c83f4e2ce15a1f70b7c70020fef21158/curator/utils.py#L78) does not consider `is_write_index`\r\n\r\n### Specifications\r\n  - Version: es 6.5.4, curator 5.6.0\r\n  - Platform: ubuntu\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1340", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1340/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1340/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1340/events", "html_url": "https://github.com/elastic/curator/issues/1340", "id": 395862557, "node_id": "MDU6SXNzdWUzOTU4NjI1NTc=", "number": 1340, "title": "forcemerge exits code 1 when index list empty", "user": {"login": "waxie", "id": 1637342, "node_id": "MDQ6VXNlcjE2MzczNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/1637342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waxie", "html_url": "https://github.com/waxie", "followers_url": "https://api.github.com/users/waxie/followers", "following_url": "https://api.github.com/users/waxie/following{/other_user}", "gists_url": "https://api.github.com/users/waxie/gists{/gist_id}", "starred_url": "https://api.github.com/users/waxie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waxie/subscriptions", "organizations_url": "https://api.github.com/users/waxie/orgs", "repos_url": "https://api.github.com/users/waxie/repos", "events_url": "https://api.github.com/users/waxie/events{/privacy}", "received_events_url": "https://api.github.com/users/waxie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-04T09:37:36Z", "updated_at": "2019-01-04T15:04:15Z", "closed_at": "2019-01-04T15:01:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n## To submit a bug or report an issue\r\n\r\ncurator_cli exits with return code 1 if force merge runs with empty index list\r\n\r\ncurator version: 5.6.0\r\n\r\n`2019-01-04 09:32:03,994 CRITICAL  Failed to complete action: forcemerge.  <class 'curator.exceptions.NoIndices'>: index_list object is empty.`\r\n\r\n### Expected Behavior\r\n\r\nTo exit 0\r\n\r\n### Actual Behavior\r\n\r\nProcess exits with return code 1\r\n\r\n### Steps to Reproduce the Problem\r\n\r\n  1. Run curator_cli with arguments that result in empty index list\r\n \r\n### Specifications\r\n\r\n  - Version: 5.6.0\r\n  - Platform: Ubuntu\r\n  - Subsystem: Docker\r\n\r\n\r\n## Context (Environment)\r\n\r\nThis is a problem, because if you run curator in docker in a container orchestration engine, the scheduler will think the job has failed and keep restarting it (based on exit code 1) and never succeed.\r\n\r\n## Detailed Description\r\n\r\nSee also: https://github.com/elastic/curator/issues/1245 which was closed with no resolution", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1339", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1339/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1339/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1339/events", "html_url": "https://github.com/elastic/curator/issues/1339", "id": 395858393, "node_id": "MDU6SXNzdWUzOTU4NTgzOTM=", "number": 1339, "title": "Unable to create client connection to Elasticsearch", "user": {"login": "thomasryck", "id": 37658138, "node_id": "MDQ6VXNlcjM3NjU4MTM4", "avatar_url": "https://avatars1.githubusercontent.com/u/37658138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasryck", "html_url": "https://github.com/thomasryck", "followers_url": "https://api.github.com/users/thomasryck/followers", "following_url": "https://api.github.com/users/thomasryck/following{/other_user}", "gists_url": "https://api.github.com/users/thomasryck/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasryck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasryck/subscriptions", "organizations_url": "https://api.github.com/users/thomasryck/orgs", "repos_url": "https://api.github.com/users/thomasryck/repos", "events_url": "https://api.github.com/users/thomasryck/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasryck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1151465439, "node_id": "MDU6TGFiZWwxMTUxNDY1NDM5", "url": "https://api.github.com/repos/elastic/curator/labels/not%20curator", "name": "not curator", "color": "b7e57e", "default": false, "description": "The problem is not with Curator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-01-04T09:21:41Z", "updated_at": "2019-01-08T08:27:55Z", "closed_at": "2019-01-08T08:27:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am building a docker image from alpine containing curator and cron but when I test it on my local ES, I got the following error : \r\n\r\n## Error\r\n\r\n> C:\\Users\\tryck\\Documents\\Docker>docker run dockerfile\r\n> crond: crond (busybox 1.26.2) started, log level 8\r\n> crond: USER root pid  10 cmd /usr/bin/curator  --config /usr/share/curator/config/curator.yml /usr/share/curator/config/delete_log_files_curator.yml\r\n> 2019-01-04 09:19:01,008 INFO      Preparing Action ID: 1, \"delete_indices\"\r\n> Traceback (most recent call last):\r\n>   File \"/usr/bin/curator\", line 11, in <module>\r\n>     sys.exit(cli())\r\n>   File \"/usr/lib/python2.7/site-packages/click/core.py\", line 722, in __call__\r\n>     return self.main(*args, **kwargs)\r\n>   File \"/usr/lib/python2.7/site-packages/click/core.py\", line 697, in main\r\n>     rv = self.invoke(ctx)\r\n>   File \"/usr/lib/python2.7/site-packages/click/core.py\", line 895, in invoke\r\n>     return ctx.invoke(self.callback, **ctx.params)\r\n>   File \"/usr/lib/python2.7/site-packages/click/core.py\", line 535, in invoke\r\n>     return callback(*args, **kwargs)\r\n>   File \"/usr/lib/python2.7/site-packages/curator/cli.py\", line 213, in cli\r\n>     run(config, action_file, dry_run)\r\n>   File \"/usr/lib/python2.7/site-packages/curator/cli.py\", line 160, in run\r\n>     client = get_client(**client_args)\r\n>   File \"/usr/lib/python2.7/site-packages/curator/utils.py\", line 906, in get_client\r\n>     'Error: {0}'.format(e)\r\n> elasticsearch.exceptions.ElasticsearchException: Unable to create client connection to Elasticsearch.  Error: ConnectionError(<urllib3.connection.HTTPConnection object at 0x7eff8de9e710>: Failed to establish a new connection: [Errno 111] Connection refused) caused by: NewConnectionError(<urllib3.connection.HTTPConnection object at 0x7eff8de9e710>: Failed to establish a new connection: [Errno 111] Connection refused)\r\n\r\nLooking at the other issues, i checked my ES and curator version and it seems ok :\r\n\r\n  - Elasticsearch: 6.5.4\r\n  - Curator : 5.6.0\r\n  - Running in Docker (Linux container) \r\n\r\nES is running on the default configuration 127.0.0.1:9200\r\n\r\nThis is my dockerfile:\r\n\r\n> FROM alpine:3.6\r\n> \r\n> RUN apk --update add python py-pip && \\\r\n>     pip install -U elasticsearch-curator && \\\r\n>     pip install -U requests-aws4auth && \\\r\n>      rm -rf /var/cache/apk/*\r\n> \r\n> ADD entrypoint.sh /entrypoint.sh\r\n> \r\n> WORKDIR /usr/share/curator\r\n> COPY config ./config\r\n> \r\n> RUN chmod +x /entrypoint.sh\r\n> \r\n> #run every minute\r\n> ENV CRON */1  *  *  * *\r\n> ENV ES_HOST 127.0.0.1\r\n> ENV CONFIG_FILE /usr/share/curator/config/curator.yml\r\n> ENV COMMAND /usr/share/curator/config/delete_log_files_curator.yml\r\n> ENV UNIT_COUNT 1\r\n> \r\n> \r\n> ENTRYPOINT [\"/entrypoint.sh\"]\r\n\r\nMy curator.yml is the default one.\r\n\r\nAnd my delete_log_files_curator.yml is:\r\n\r\n> actions:\r\n>   1:\r\n>     action: delete_indices\r\n>     description: >-\r\n>       Delete indices.  Find which to delete by first limiting the list to gelf-\r\n>       prefixed indices. Then further filter those to prevent deletion of anything\r\n>       less than X days old.\r\n>     options:\r\n>       continue_if_exception: False\r\n>       disable_action: False\r\n>     filters:\r\n>     - filtertype: pattern\r\n>       kind: prefix\r\n>       value: gelf-\r\n>     - filtertype: age\r\n>       source: creation_date\r\n>       direction: older\r\n>       unit: days\r\n>       unit_count: ${UNIT_COUNT:1}\r\n> \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1337", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1337/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1337/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1337/events", "html_url": "https://github.com/elastic/curator/issues/1337", "id": 395512293, "node_id": "MDU6SXNzdWUzOTU1MTIyOTM=", "number": 1337, "title": "Error executing delete_indices when scheduled", "user": {"login": "holiiveira", "id": 4368491, "node_id": "MDQ6VXNlcjQzNjg0OTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/4368491?v=4", "gravatar_id": "", "url": "https://api.github.com/users/holiiveira", "html_url": "https://github.com/holiiveira", "followers_url": "https://api.github.com/users/holiiveira/followers", "following_url": "https://api.github.com/users/holiiveira/following{/other_user}", "gists_url": "https://api.github.com/users/holiiveira/gists{/gist_id}", "starred_url": "https://api.github.com/users/holiiveira/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/holiiveira/subscriptions", "organizations_url": "https://api.github.com/users/holiiveira/orgs", "repos_url": "https://api.github.com/users/holiiveira/repos", "events_url": "https://api.github.com/users/holiiveira/events{/privacy}", "received_events_url": "https://api.github.com/users/holiiveira/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-03T09:55:01Z", "updated_at": "2019-01-03T18:30:32Z", "closed_at": "2019-01-03T18:30:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Expected Behavior\r\nDelete indexes according to configured parameters.\r\n\r\n### Actual Behavior\r\nError executing the command when executed by cron. (scheduled)\r\n\r\nLast part of the log:\r\n\r\n```\r\n2019-01-03 01:00:02,870 DEBUG          curator.indexlist          _get_metadata:177  Getting index metadata\r\n2019-01-03 01:00:02,870 DEBUG          curator.indexlist       empty_list_check:226  Checking for empty list\r\n2019-01-03 01:00:23,064 DEBUG          curator.indexlist       _get_index_stats:117  Getting index stats\r\n2019-01-03 01:00:23,064 DEBUG          curator.indexlist       empty_list_check:226  Checking for empty list\r\n2019-01-03 01:00:23,064 DEBUG          curator.indexlist           working_list:237  Generating working list of indices\r\n2019-01-03 01:00:23,064 DEBUG          curator.indexlist           working_list:237  Generating working list of indices\r\n2019-01-03 01:00:23,074 ERROR                curator.cli                    run:186  Failed to complete action: delete_indices.  <class 'KeyError'>: 'indices'\r\n```\r\n\r\n### Steps to Reproduce the Problem\r\n1. Configure curator.yml (default)\r\n2. Configure file with actions to be executed, for example:\r\n\r\n```\r\nactions:\r\n  1:\r\n    action: delete_indices\r\n    options:\r\n      ignore_empty_list: True\r\n      disable_action: False\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: pro-\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%d.%m.%Y'\r\n      unit: days\r\n      unit_count: 30\r\n```\r\n\r\n\r\n3. Create script to run curator by cron (scheduled), example:\r\n\r\n`curator ${DIR_BASE}/${JOB}.yml --config ${DIR_BASE}/${CONFIG} > ${LOG_BASE}/${JOB}_${DATIM}.log`\r\n\r\n### Specifications\r\n\r\n  - Version: 5.6.0\r\n  - Platform: Ubuntu 18.04 LTS\r\n\r\n### Comments\r\n\r\nIf you run the same script by bash, without scheduling, it works normally.\r\nThe problem only occurs when it is run by scheduling.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1336", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1336/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1336/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1336/events", "html_url": "https://github.com/elastic/curator/issues/1336", "id": 395345028, "node_id": "MDU6SXNzdWUzOTUzNDUwMjg=", "number": 1336, "title": "Curator exposes password in plain text in debug logs", "user": {"login": "jkelastic", "id": 25088052, "node_id": "MDQ6VXNlcjI1MDg4MDUy", "avatar_url": "https://avatars3.githubusercontent.com/u/25088052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkelastic", "html_url": "https://github.com/jkelastic", "followers_url": "https://api.github.com/users/jkelastic/followers", "following_url": "https://api.github.com/users/jkelastic/following{/other_user}", "gists_url": "https://api.github.com/users/jkelastic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkelastic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkelastic/subscriptions", "organizations_url": "https://api.github.com/users/jkelastic/orgs", "repos_url": "https://api.github.com/users/jkelastic/repos", "events_url": "https://api.github.com/users/jkelastic/events{/privacy}", "received_events_url": "https://api.github.com/users/jkelastic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803247, "node_id": "MDU6TGFiZWw1MjgwMzI0Nw==", "url": "https://api.github.com/repos/elastic/curator/labels/bug", "name": "bug", "color": "ff0040", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-01-02T18:59:24Z", "updated_at": "2019-02-01T06:11:09Z", "closed_at": "2019-02-01T06:11:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n### Expected Behavior \r\nPassword should be encrypted or excluded\r\n<!--- Tell us what should happen -->\r\n\r\n### Actual Behavior\r\nPassword shown in debug mode in plain text\r\n<!--- Tell us what happens instead of the expected behavior -->\r\n\r\n### Steps to Reproduce the Problem\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n  1. Run Curator in debug mode \r\n  2. \r\n\r\nWhile running curator in debug mode, its logging the password (used for the http basic auth) into log file, both curator.cli and curator.validators.SchemaCheck are logging clear text password. This is a security concern.\r\n\r\n2018-12-19 17:58:06,182 DEBUG curator.cli run:121 Full list of actions: {1: {'action': 'reindex', 'description': 'Reindex index1 into index2', 'options': {'....., 'username': '', 'password': 'plaintext password is logged here'}, 'index': 'trans-e3-2017-07'}, 'dest': {'index': 'trans-remote_slice'}}, ...\r\n2018-12-19 17:58:06,177 DEBUG curator.validators.SchemaCheck init:27 \"action type\" config: {'description': 'Reindex index1 into index2', 'action': 'reindex', 'options': {'wait_interval': 30, 'max_wait': -1, 'slices': 3, 'request_body': {'source': {'remote': {'..., 'plaintext password is logged here'}, 'index': 'trans-e3-2017-07'}, 'dest': {'index': 'trans-remote_slice'}}}, 'filters': [{'filtertype': 'none'}]}\r\n\r\n\r\n### Specifications\r\n\r\n  - Version: ES 5.6\r\n  - Platform: Windows 7\r\n  - Subsystem:\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1335", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1335/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1335/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1335/events", "html_url": "https://github.com/elastic/curator/issues/1335", "id": 395303765, "node_id": "MDU6SXNzdWUzOTUzMDM3NjU=", "number": 1335, "title": "Correctly report task runtime in seconds", "user": {"login": "jkelastic", "id": 25088052, "node_id": "MDQ6VXNlcjI1MDg4MDUy", "avatar_url": "https://avatars3.githubusercontent.com/u/25088052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkelastic", "html_url": "https://github.com/jkelastic", "followers_url": "https://api.github.com/users/jkelastic/followers", "following_url": "https://api.github.com/users/jkelastic/following{/other_user}", "gists_url": "https://api.github.com/users/jkelastic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkelastic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkelastic/subscriptions", "organizations_url": "https://api.github.com/users/jkelastic/orgs", "repos_url": "https://api.github.com/users/jkelastic/repos", "events_url": "https://api.github.com/users/jkelastic/events{/privacy}", "received_events_url": "https://api.github.com/users/jkelastic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803247, "node_id": "MDU6TGFiZWw1MjgwMzI0Nw==", "url": "https://api.github.com/repos/elastic/curator/labels/bug", "name": "bug", "color": "ff0040", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-02T16:30:25Z", "updated_at": "2019-09-24T17:10:29Z", "closed_at": "2019-09-24T17:10:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Expected Behavior\r\nPrint the full time in nanos without 0. The correct time is 32663955100000003 nanos.\r\n<!--- Tell us what should happen -->\r\n\r\n### Actual Behavior\r\nPrint the time as 0.32663955100000003\r\n<!--- Tell us what happens instead of the expected behavior -->\r\n\r\n### Steps to Reproduce the Problem\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug. Include code to reproduce, if relevant -->\r\n  1. Run Curator for reindexing\r\n  2.  Its adding a \"0.\" while printing run time in nanos.\r\n\r\n  For example, here the actual time was 326639551 nano seconds, but the curator added \"0.\" before that which is wrong.\r\n\r\nrunning_time_in_nanos = 0.32663955100000003\r\n\r\n### Specifications\r\n\r\n  - Version: Curator 5.6\r\n  - Platform: Windows 7\r\n  - Subsystem:\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1334", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1334/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1334/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1334/events", "html_url": "https://github.com/elastic/curator/issues/1334", "id": 394543369, "node_id": "MDU6SXNzdWUzOTQ1NDMzNjk=", "number": 1334, "title": "Continue forcemerge  for other indexes in list even if it times out for one index.", "user": {"login": "keshrisohit", "id": 8883974, "node_id": "MDQ6VXNlcjg4ODM5NzQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/8883974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keshrisohit", "html_url": "https://github.com/keshrisohit", "followers_url": "https://api.github.com/users/keshrisohit/followers", "following_url": "https://api.github.com/users/keshrisohit/following{/other_user}", "gists_url": "https://api.github.com/users/keshrisohit/gists{/gist_id}", "starred_url": "https://api.github.com/users/keshrisohit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keshrisohit/subscriptions", "organizations_url": "https://api.github.com/users/keshrisohit/orgs", "repos_url": "https://api.github.com/users/keshrisohit/repos", "events_url": "https://api.github.com/users/keshrisohit/events{/privacy}", "received_events_url": "https://api.github.com/users/keshrisohit/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-28T04:20:03Z", "updated_at": "2018-12-28T04:38:24Z", "closed_at": "2018-12-28T04:38:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "If forcemerge timesout for one index it does not process other index in list.It would be nice that it can continue and process the force merge for other indexes.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1328", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1328/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1328/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1328/events", "html_url": "https://github.com/elastic/curator/issues/1328", "id": 390328481, "node_id": "MDU6SXNzdWUzOTAzMjg0ODE=", "number": 1328, "title": "SSL_UNKOWN error on RedHat 7.5", "user": {"login": "hueyg", "id": 43451712, "node_id": "MDQ6VXNlcjQzNDUxNzEy", "avatar_url": "https://avatars2.githubusercontent.com/u/43451712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hueyg", "html_url": "https://github.com/hueyg", "followers_url": "https://api.github.com/users/hueyg/followers", "following_url": "https://api.github.com/users/hueyg/following{/other_user}", "gists_url": "https://api.github.com/users/hueyg/gists{/gist_id}", "starred_url": "https://api.github.com/users/hueyg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hueyg/subscriptions", "organizations_url": "https://api.github.com/users/hueyg/orgs", "repos_url": "https://api.github.com/users/hueyg/repos", "events_url": "https://api.github.com/users/hueyg/events{/privacy}", "received_events_url": "https://api.github.com/users/hueyg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-12-12T17:22:03Z", "updated_at": "2019-09-25T17:35:00Z", "closed_at": "2019-09-25T17:35:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "## For usage questions and help\r\nPlease create a topic at https://discuss.elastic.co/c/elasticsearch\r\n\r\nPerhaps a topic there already has an answer for you!\r\n\r\n## To submit a bug or report an issue\r\n<!--- Provide a general summary of the issue in the Title above -->\r\nRan into problem where curator was simply ending when attempted to run.  DEBUG option seemed to show it ending sometime after certificate verification but no returned errors at this level.  I emptied the blacklist option and received the following errors:\r\n\r\n File \"/usr/local/lib/python3.6/ssl.py\", line 689, in do_handshake\r\nssl.SSLError: [SSL: UNKNOWN_PROTOCOL] unknown protocol (_ssl.c:847)\r\n\r\nReading post from others I attempted the following:\r\n\r\ncurl --cacert /etc/pki/tls/certs/logstash-forwarder.crt https://localhost:9200\r\n\r\n       curl: (35) SSL received a record that exceeded the maximum permissible length.\r\n\r\nFollowing up on that error I found several reports of this on the RedHat forums related to various other products which I assume all have to do with how SSL is handled with the included python libraries.  The workaround was to use http:// in the url instead of https:// and sure enough that resolved my curl error above.\r\n\r\nI don't know if it is possible to change this in curator without changing source code so my fix for now is to use curator without SSL and this workaround has resolved my initial problem with curator although I would not consider it a permanent fix.\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1324", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1324/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1324/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1324/events", "html_url": "https://github.com/elastic/curator/issues/1324", "id": 387654341, "node_id": "MDU6SXNzdWUzODc2NTQzNDE=", "number": 1324, "title": "Weekly Index Creation Problem", "user": {"login": "32328254", "id": 16772833, "node_id": "MDQ6VXNlcjE2NzcyODMz", "avatar_url": "https://avatars0.githubusercontent.com/u/16772833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/32328254", "html_url": "https://github.com/32328254", "followers_url": "https://api.github.com/users/32328254/followers", "following_url": "https://api.github.com/users/32328254/following{/other_user}", "gists_url": "https://api.github.com/users/32328254/gists{/gist_id}", "starred_url": "https://api.github.com/users/32328254/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/32328254/subscriptions", "organizations_url": "https://api.github.com/users/32328254/orgs", "repos_url": "https://api.github.com/users/32328254/repos", "events_url": "https://api.github.com/users/32328254/events{/privacy}", "received_events_url": "https://api.github.com/users/32328254/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1151465439, "node_id": "MDU6TGFiZWwxMTUxNDY1NDM5", "url": "https://api.github.com/repos/elastic/curator/labels/not%20curator", "name": "not curator", "color": "b7e57e", "default": false, "description": "The problem is not with Curator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-05T08:59:45Z", "updated_at": "2019-03-08T13:18:56Z", "closed_at": "2018-12-05T15:20:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "  - Version:curator5.6.0\r\n  - Platform:centos\r\n  - system:Centos7.2\r\n  - Elasticesearch Version:5.6.12\r\n\r\nlocal_time\uff1a2018-12-05:16:50\r\n\r\nactions:\r\n    action: create_index\r\n    description: \"create next week after new time-based index for test-commit\"\r\n    options:\r\n        continue_if_exception: True\r\n        name: '<test-commit-{now/w+4w{YYYY-ww}}>'\r\n\r\nreal result\uff1atest-commit-2018-01\r\nexpect result is test-commit-2019-01\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1322", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1322/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1322/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1322/events", "html_url": "https://github.com/elastic/curator/issues/1322", "id": 385719715, "node_id": "MDU6SXNzdWUzODU3MTk3MTU=", "number": 1322, "title": "Curator not working with ElasticSearch 6.4.2", "user": {"login": "3h4x", "id": 6998565, "node_id": "MDQ6VXNlcjY5OTg1NjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/6998565?v=4", "gravatar_id": "", "url": "https://api.github.com/users/3h4x", "html_url": "https://github.com/3h4x", "followers_url": "https://api.github.com/users/3h4x/followers", "following_url": "https://api.github.com/users/3h4x/following{/other_user}", "gists_url": "https://api.github.com/users/3h4x/gists{/gist_id}", "starred_url": "https://api.github.com/users/3h4x/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/3h4x/subscriptions", "organizations_url": "https://api.github.com/users/3h4x/orgs", "repos_url": "https://api.github.com/users/3h4x/repos", "events_url": "https://api.github.com/users/3h4x/events{/privacy}", "received_events_url": "https://api.github.com/users/3h4x/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-11-29T12:45:02Z", "updated_at": "2018-12-04T09:37:42Z", "closed_at": "2018-12-04T09:37:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to rotate indexes on cloud.elastic.co ES cluster.\r\nCurator version 5.6.0\r\n\r\nOn port 9243 it's returning:\r\n```\r\n2018-11-29 13:16:25,647 DEBUG                curator.cli                    run:126  action_disabled = False\r\n2018-11-29 13:16:25,648 DEBUG                curator.cli                    run:130  continue_if_exception = False\r\n2018-11-29 13:16:25,648 DEBUG                curator.cli                    run:132  timeout_override = None\r\n2018-11-29 13:16:25,648 DEBUG                curator.cli                    run:134  ignore_empty_list = True\r\n2018-11-29 13:16:25,648 DEBUG                curator.cli                    run:136  allow_ilm_indices = False\r\n2018-11-29 13:16:25,648 INFO                 curator.cli                    run:146  Preparing Action ID: 1, \"delete_indices\"\r\n2018-11-29 13:16:25,648 DEBUG              curator.utils             get_client:802  kwargs = {'hosts': ['x:9243'], 'use_ssl': True, 'ssl_no_validate': False, 'http_auth': 'auth', 'master_only': False, '>\r\n2018-11-29 13:16:25,648 DEBUG              curator.utils             get_client:808  Attempting to verify SSL certificate.\r\n2018-11-29 13:16:25,654 DEBUG              curator.utils             get_client:877  \"requests_aws4auth\" module present, but not used.\r\nTraceback (most recent call last):\r\n  File \"/Users/x/lib/python3.6/site-packages/elasticsearch/serializer.py\", line 77, in loads\r\n    deserializer = self.serializers[mimetype]\r\nKeyError: 'text/html'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/x/lib/python3.6/site-packages/curator/utils.py\", line 899, in get_client\r\n    check_version(client)\r\n  File \"/Users/x/lib/python3.6/site-packages/curator/utils.py\", line 685, in check_version\r\n    version_number = get_version(client)\r\n  File \"/Users/x/lib/python3.6/site-packages/curator/utils.py\", line 658, in get_version\r\n    version = client.info()['version']['number']\r\n  File \"/Users/x/lib/python3.6/site-packages/elasticsearch/client/utils.py\", line 76, in _wrapped\r\n    return func(*args, params=params, **kwargs)\r\n  File \"/Users/x/lib/python3.6/site-packages/elasticsearch/client/__init__.py\", line 241, in info\r\n    return self.transport.perform_request('GET', '/', params=params)\r\n  File \"/Users/x/lib/python3.6/site-packages/elasticsearch/transport.py\", line 345, in perform_request\r\n    data = self.deserializer.loads(data, headers_response.get('content-type'))\r\n  File \"/Users/x/lib/python3.6/site-packages/elasticsearch/serializer.py\", line 79, in loads\r\n    raise SerializationError('Unknown mimetype, unable to deserialize: %s' % mimetype)\r\nelasticsearch.exceptions.SerializationError: Unknown mimetype, unable to deserialize: text/html\r\n```\r\nAnd on 9200 port\r\n```\r\n2018-11-29 13:33:09,365 DEBUG              curator.utils             get_client:808  Attempting to verify SSL certificate.\r\n2018-11-29 13:33:09,385 DEBUG              curator.utils             get_client:877  \"requests_aws4auth\" module present, but not used.\r\nTraceback (most recent call last):\r\n  File \"/Users/x/lib/python3.6/site-packages/urllib3/contrib/pyopenssl.py\", line 441, in wrap_socket\r\n    cnx.do_handshake()\r\n  File \"/Users/x/lib/python3.6/site-packages/OpenSSL/SSL.py\", line 1907, in do_handshake\r\n    self._raise_ssl_error(self._ssl, result)\r\n  File \"/Users/x/lib/python3.6/site-packages/OpenSSL/SSL.py\", line 1639, in _raise_ssl_error\r\n    _raise_current_error()\r\n  File \"/Users/x/lib/python3.6/site-packages/OpenSSL/_util.py\", line 54, in exception_from_error_queue\r\n    raise exception_type(errors)\r\nOpenSSL.SSL.Error: [('SSL routines', 'ssl3_get_record', 'wrong version number')]\r\n```\r\n\r\nWe also have cluster on ES 5.5.2 and everything works well with it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1320", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1320/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1320/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1320/events", "html_url": "https://github.com/elastic/curator/issues/1320", "id": 383805929, "node_id": "MDU6SXNzdWUzODM4MDU5Mjk=", "number": 1320, "title": "Retry snapshot action ", "user": {"login": "mrtmexx", "id": 1191885, "node_id": "MDQ6VXNlcjExOTE4ODU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1191885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrtmexx", "html_url": "https://github.com/mrtmexx", "followers_url": "https://api.github.com/users/mrtmexx/followers", "following_url": "https://api.github.com/users/mrtmexx/following{/other_user}", "gists_url": "https://api.github.com/users/mrtmexx/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrtmexx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrtmexx/subscriptions", "organizations_url": "https://api.github.com/users/mrtmexx/orgs", "repos_url": "https://api.github.com/users/mrtmexx/repos", "events_url": "https://api.github.com/users/mrtmexx/events{/privacy}", "received_events_url": "https://api.github.com/users/mrtmexx/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-23T12:22:49Z", "updated_at": "2018-11-26T13:20:41Z", "closed_at": "2018-11-26T13:20:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "In the action of removing snapshots, there is a re-try implementation if there are processes that create snapshots.\r\n\r\nThere is a lack of the same functionality when creating a snapshot. I would like the curator not to give an error `cannot snapshot while a snapshot deletion is in-progress` or error `cannot snapshot while a snapshot creation is in-progress` when create the snapshot, but wait some time and try again create the snapshot", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1318", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1318/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1318/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1318/events", "html_url": "https://github.com/elastic/curator/issues/1318", "id": 382994530, "node_id": "MDU6SXNzdWUzODI5OTQ1MzA=", "number": 1318, "title": "one delete indices action delete other indices", "user": {"login": "like-inspur", "id": 18571465, "node_id": "MDQ6VXNlcjE4NTcxNDY1", "avatar_url": "https://avatars3.githubusercontent.com/u/18571465?v=4", "gravatar_id": "", "url": "https://api.github.com/users/like-inspur", "html_url": "https://github.com/like-inspur", "followers_url": "https://api.github.com/users/like-inspur/followers", "following_url": "https://api.github.com/users/like-inspur/following{/other_user}", "gists_url": "https://api.github.com/users/like-inspur/gists{/gist_id}", "starred_url": "https://api.github.com/users/like-inspur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/like-inspur/subscriptions", "organizations_url": "https://api.github.com/users/like-inspur/orgs", "repos_url": "https://api.github.com/users/like-inspur/repos", "events_url": "https://api.github.com/users/like-inspur/events{/privacy}", "received_events_url": "https://api.github.com/users/like-inspur/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-21T07:48:40Z", "updated_at": "2020-05-01T06:45:05Z", "closed_at": "2020-05-01T06:45:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "My ES environment now only has logstash prefix indices, and doesn't have audit prefix indices. I want to config two delete indices action, but found that delete audit prefix indices delete logstash prefix indices. \r\n\r\nMy curator version is 5.5.4 and action_file.yml is like this:\r\n```\r\n    actions:\r\n      1:\r\n        action: delete_indices\r\n        description: \"Clean up common log by deleting old indices\"\r\n        options:\r\n          ignore_empty_list: True\r\n          timeout_override: 600\r\n          continue_if_exception: True\r\n          disable_action: False\r\n        filters:\r\n        - filtertype: pattern\r\n          kind: prefix\r\n          value: logstash-\r\n        filters:\r\n        - filtertype: age\r\n          source: name\r\n          direction: older\r\n          timestring: '%Y.%m.%d'\r\n          unit: days\r\n          unit_count: 14\r\n      2:\r\n        action: delete_indices\r\n        description: \"Clean up audit log by deleting old indices\"\r\n        options:\r\n          ignore_empty_list: True\r\n          timeout_override: 600\r\n          continue_if_exception: True\r\n          disable_action: False\r\n        filters:\r\n        - filtertype: pattern\r\n          kind: prefix\r\n          value: audit-\r\n        filters:\r\n        - filtertype: age\r\n          source: name\r\n          direction: older\r\n          timestring: '%Y.%m.%d'\r\n          unit: days\r\n          unit_count: 7\r\n```\r\ncurator executation log is like this:\r\n```\r\n2018-11-21 08:00:10,617 INFO      Preparing Action ID: 1, \"delete_indices\"\r\n2018-11-21 08:00:10,626 INFO      Trying Action ID: 1, \"delete_indices\": Clean up common log by deleting old indices\r\n2018-11-21 08:00:11,951 INFO      Skipping action \"delete_indices\" due to empty list: <class 'curator.exceptions.NoIndices'>\r\n2018-11-21 08:00:11,951 INFO      Action ID: 1, \"delete_indices\" completed.\r\n2018-11-21 08:00:11,951 INFO      Preparing Action ID: 2, \"delete_indices\"\r\n2018-11-21 08:00:11,953 INFO      Trying Action ID: 2, \"delete_indices\": Clean up audit log by deleting old indices\r\n2018-11-21 08:00:11,975 INFO      Deleting selected indices: [u'logstash-2018.11.14']\r\n2018-11-21 08:00:11,975 INFO      ---deleting index logstash-2018.11.14\r\n2018-11-21 08:00:12,201 INFO      Action ID: 2, \"delete_indices\" completed.\r\n2018-11-21 08:00:12,201 INFO      Job completed.\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1317", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1317/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1317/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1317/events", "html_url": "https://github.com/elastic/curator/issues/1317", "id": 382108045, "node_id": "MDU6SXNzdWUzODIxMDgwNDU=", "number": 1317, "title": "Curator should not exit with an error when delete_indices has nothing to delete", "user": {"login": "kciredor", "id": 1121650, "node_id": "MDQ6VXNlcjExMjE2NTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1121650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kciredor", "html_url": "https://github.com/kciredor", "followers_url": "https://api.github.com/users/kciredor/followers", "following_url": "https://api.github.com/users/kciredor/following{/other_user}", "gists_url": "https://api.github.com/users/kciredor/gists{/gist_id}", "starred_url": "https://api.github.com/users/kciredor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kciredor/subscriptions", "organizations_url": "https://api.github.com/users/kciredor/orgs", "repos_url": "https://api.github.com/users/kciredor/repos", "events_url": "https://api.github.com/users/kciredor/events{/privacy}", "received_events_url": "https://api.github.com/users/kciredor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-19T08:39:20Z", "updated_at": "2018-11-19T13:59:35Z", "closed_at": "2018-11-19T13:57:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "## To submit a bug or report an issue\r\nWe have a cleanup cronjob that removes all indices older than 14 days, except for those starting with a . like .kibana:\r\n\r\n`curator_cli --host foo delete_indices --filter_list '[{\"filtertype\":\"age\",\"source\":\"creation_date\",\"direction\":\"older\",\"unit\":\"days\",\"unit_count\":14},{\"filtertype\":\"pattern\",\"kind\":\"regex\",\"value\":\"^\\\\..*\",\"exclude\":true}]'`\r\n\r\n### Expected Behavior\r\nWhen running the cleanup job on a cluster which has no data older than 14 days, curator will exit with an error, because there's nothing to delete.\r\n\r\n### Actual Behavior\r\nIf there's nothing to do, that is just fine, it's should not result in an error.\r\n\r\n### Steps to Reproduce the Problem\r\nRun the curator_cli command I have mentioned before on a cluster without indices older than 14 days.\r\n\r\n### Specifications\r\n  - Version: ES 6.3.0, curator@30fe0410 (which fixed the '_' vs '-' bug parameter parser bug)\r\n  - Platform: ES: Linux; Curator: alpine 3.8 container running in k8s cron\r\n  - Subsystem:\r\n\r\n## Context (Environment)\r\nThe error makes our cronjob fail and an alert being sent out. This should only happen upon actual errors. If there's nothing to delete, there's nothing to delete, which is fine.\r\n\r\n## Detailed Description\r\nMy suggestion would be not to error out when Curator's filters result in an empty list. If this would raise concerns about backwards compatibility, adding an opt-in flag would be the way to go.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1314", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1314/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1314/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1314/events", "html_url": "https://github.com/elastic/curator/issues/1314", "id": 380032201, "node_id": "MDU6SXNzdWUzODAwMzIyMDE=", "number": 1314, "title": "\u7528pip\u4e0b\u8f7d\u4e0b\u6765\u7684\uff0c\u672c\u8eab\u6ca1\u6709\u81ea\u5e26yml\u914d\u7f6e\u6587\u4ef6\uff0c\u67e5\u770b\u547d\u4ee4\u884c\uff0c\u4e5f\u6ca1\u6709\u751f\u6210\u547d\u4ee4\u7684\u547d\u4ee4", "user": {"login": "17721524631", "id": 35061684, "node_id": "MDQ6VXNlcjM1MDYxNjg0", "avatar_url": "https://avatars1.githubusercontent.com/u/35061684?v=4", "gravatar_id": "", "url": "https://api.github.com/users/17721524631", "html_url": "https://github.com/17721524631", "followers_url": "https://api.github.com/users/17721524631/followers", "following_url": "https://api.github.com/users/17721524631/following{/other_user}", "gists_url": "https://api.github.com/users/17721524631/gists{/gist_id}", "starred_url": "https://api.github.com/users/17721524631/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/17721524631/subscriptions", "organizations_url": "https://api.github.com/users/17721524631/orgs", "repos_url": "https://api.github.com/users/17721524631/repos", "events_url": "https://api.github.com/users/17721524631/events{/privacy}", "received_events_url": "https://api.github.com/users/17721524631/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-11-13T02:36:21Z", "updated_at": "2018-11-13T12:07:31Z", "closed_at": "2018-11-13T12:07:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "\u7528pip\u4e0b\u8f7d\u4e0b\u6765\u7684\uff0c\u672c\u8eab\u6ca1\u6709\u81ea\u5e26yml\u914d\u7f6e\u6587\u4ef6\uff0c\u67e5\u770b\u547d\u4ee4\u884c\uff0c\u4e5f\u6ca1\u6709\u751f\u6210\u547d\u4ee4\u7684\u547d\u4ee4\r\n\r\nwindows\u73af\u5883    \u4f5c\u8005\u5927\u5927\u5e2e\u5fd9\u770b\u770b\u600e\u4e48\u56de\u4e8b\uff1f", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1313", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1313/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1313/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1313/events", "html_url": "https://github.com/elastic/curator/issues/1313", "id": 379881391, "node_id": "MDU6SXNzdWUzNzk4ODEzOTE=", "number": 1313, "title": "Have rollover action show whether conditions were met", "user": {"login": "untergeek", "id": 1020383, "node_id": "MDQ6VXNlcjEwMjAzODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1020383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untergeek", "html_url": "https://github.com/untergeek", "followers_url": "https://api.github.com/users/untergeek/followers", "following_url": "https://api.github.com/users/untergeek/following{/other_user}", "gists_url": "https://api.github.com/users/untergeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/untergeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untergeek/subscriptions", "organizations_url": "https://api.github.com/users/untergeek/orgs", "repos_url": "https://api.github.com/users/untergeek/repos", "events_url": "https://api.github.com/users/untergeek/events{/privacy}", "received_events_url": "https://api.github.com/users/untergeek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803249, "node_id": "MDU6TGFiZWw1MjgwMzI0OQ==", "url": "https://api.github.com/repos/elastic/curator/labels/feature_request", "name": "feature_request", "color": "84b6eb", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "untergeek", "id": 1020383, "node_id": "MDQ6VXNlcjEwMjAzODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1020383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untergeek", "html_url": "https://github.com/untergeek", "followers_url": "https://api.github.com/users/untergeek/followers", "following_url": "https://api.github.com/users/untergeek/following{/other_user}", "gists_url": "https://api.github.com/users/untergeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/untergeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untergeek/subscriptions", "organizations_url": "https://api.github.com/users/untergeek/orgs", "repos_url": "https://api.github.com/users/untergeek/repos", "events_url": "https://api.github.com/users/untergeek/events{/privacy}", "received_events_url": "https://api.github.com/users/untergeek/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "untergeek", "id": 1020383, "node_id": "MDQ6VXNlcjEwMjAzODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1020383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untergeek", "html_url": "https://github.com/untergeek", "followers_url": "https://api.github.com/users/untergeek/followers", "following_url": "https://api.github.com/users/untergeek/following{/other_user}", "gists_url": "https://api.github.com/users/untergeek/gists{/gist_id}", "starred_url": "https://api.github.com/users/untergeek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untergeek/subscriptions", "organizations_url": "https://api.github.com/users/untergeek/orgs", "repos_url": "https://api.github.com/users/untergeek/repos", "events_url": "https://api.github.com/users/untergeek/events{/privacy}", "received_events_url": "https://api.github.com/users/untergeek/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-12T17:33:31Z", "updated_at": "2018-11-15T04:46:53Z", "closed_at": "2018-11-15T04:46:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently, rollover will just say, \"finished,\" whether it rolled over or not. It should be trivial to parse the output and see if a rollover happened, and report this in the INFO log output.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1311", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1311/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1311/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1311/events", "html_url": "https://github.com/elastic/curator/issues/1311", "id": 379772122, "node_id": "MDU6SXNzdWUzNzk3NzIxMjI=", "number": 1311, "title": "Curator shouldn't die when there is no data to delete", "user": {"login": "IngaFeick", "id": 9050786, "node_id": "MDQ6VXNlcjkwNTA3ODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/9050786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IngaFeick", "html_url": "https://github.com/IngaFeick", "followers_url": "https://api.github.com/users/IngaFeick/followers", "following_url": "https://api.github.com/users/IngaFeick/following{/other_user}", "gists_url": "https://api.github.com/users/IngaFeick/gists{/gist_id}", "starred_url": "https://api.github.com/users/IngaFeick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IngaFeick/subscriptions", "organizations_url": "https://api.github.com/users/IngaFeick/orgs", "repos_url": "https://api.github.com/users/IngaFeick/repos", "events_url": "https://api.github.com/users/IngaFeick/events{/privacy}", "received_events_url": "https://api.github.com/users/IngaFeick/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-11-12T13:17:01Z", "updated_at": "2018-11-12T16:17:04Z", "closed_at": "2018-11-12T16:16:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "## To submit a bug or report an issue\r\nI am running curator in Docker. The first action in my config is trying to delete data for which there are currently no indices in my elasticsearch. Curator considers this an error and executes the same action repeatedly, then dies without processing the rest of my actions.yml.\r\n\r\n### Expected Behavior\r\nI expect curator to log that the action didn't delete data, and then proceed with the other actions.\r\n\r\n### Actual Behavior\r\nCurator repeatedly tried to perform the \"faulty\" action no. 1 and then exited, without processing the remaining actions (actions 2 + 3). \r\n\r\n### Steps to Reproduce the Problem\r\n\r\nactions.yaml:\r\n```\r\nactions:\r\n  1:\r\n    action: delete_indices\r\n    description: delete indices older than 30 days (based on index name)\r\n    options:\r\n      timeout_override:\r\n      continue_if_exception: False\r\n    filters:\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y.%m.%d'\r\n      unit: days\r\n      unit_count: 30\r\n      exclude:\r\n    - filtertype: pattern \r\n      kind: prefix \r\n      value: some-index-i-want-to-keep\r\n      exclude: True\r\n\r\n  2:\r\n    action: delete_indices\r\n    description: delete indices older than 2 months. This one's for the indices with month based names. \r\n    options:\r\n      timeout_override:\r\n      continue_if_exception: False\r\n    filters:\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y.%m'\r\n      unit: months\r\n      unit_count: 2\r\n  3:\r\n    action: delete_indices\r\n    description: delete foobar indices older than 3 days.\r\n    options:\r\n      timeout_override:\r\n      continue_if_exception: False\r\n    filters:\r\n    - filtertype: age\r\n      source: creation_date\r\n      direction: older\r\n      unit: days\r\n      unit_count: 3\r\n    - filtertype: pattern \r\n      kind: prefix \r\n      value: foobar\r\n\r\n\r\n```\r\nconfig.yml:\r\n```\r\n\r\nclient:\r\n  hosts:\r\n    - 10.2.3.226\r\n  port: 9200\r\n  url_prefix:\r\n  use_ssl: False\r\n  certificate:\r\n  client_cert:\r\n  client_key:\r\n  ssl_no_validate: False\r\n  http_auth:\r\n  timeout: 30\r\n  master_only: False\r\n\r\nlogging:\r\n  loglevel: INFO\r\n  logformat: default\r\n  blacklist: ['elasticsearch', 'urllib3']\r\n\r\n```\r\n\r\n### Specifications\r\n\r\n  - Version: 5.5.4\r\n  - Platform: Linux\r\n  - Subsystem: Debian\r\n\r\n\r\n## Detailed Description\r\nCurator got stuck in this loop: \r\n```\r\n\r\n2018-11-12 12:52:05,702 INFO Preparing Action ID: 1, \"delete_indices\" \r\n2018-11-12 12:52:05,712 INFO Trying Action ID: 1, \"delete_indices\": delete indices older than 30 days (based on index name) 2018-11-12 12:52:17,250 ERROR Unable to complete action \"delete_indices\". No actionable items in list: <class 'curator.exceptions.NoIndices'> \r\n2018-11-12 12:52:41,261 INFO Preparing Action ID: 1, \"delete_indices\" \r\n2018-11-12 12:52:41,271 INFO Trying Action ID: 1, \"delete_indices\": delete indices older than 30 days (based on index name) 2018-11-12 12:52:48,612 ERROR Unable to complete action \"delete_indices\". No actionable items in list: <class 'curator.exceptions.NoIndices'> \r\n2018-11-12 12:53:10,402 INFO Preparing Action ID: 1, \"delete_indices\" \r\n2018-11-12 12:53:10,412 INFO Trying Action ID: 1, \"delete_indices\": delete indices older than 30 days (based on index name) \r\n2018-11-12 12:53:18,500 ERROR Unable to complete action \"delete_indices\". No actionable items in list: <class 'curator.exceptions.NoIndices'> \r\n2018-11-12 12:53:42,567 INFO Preparing Action ID: 1, \"delete_indices\" \r\n2018-11-12 12:53:42,576 INFO Trying Action ID: 1, \"delete_indices\": delete indices older than 30 days (based on index name) \r\n2018-11-12 12:53:49,621 ERROR Unable to complete action \"delete_indices\". No actionable items in list: <class 'curator.exceptions.NoIndices'> \r\n```\r\n\r\nand then died without any further logs.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1309", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1309/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1309/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1309/events", "html_url": "https://github.com/elastic/curator/issues/1309", "id": 377880869, "node_id": "MDU6SXNzdWUzNzc4ODA4Njk=", "number": 1309, "title": "curator_cli report KeyError: u'show-indices'", "user": {"login": "wwyhy", "id": 83105, "node_id": "MDQ6VXNlcjgzMTA1", "avatar_url": "https://avatars1.githubusercontent.com/u/83105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wwyhy", "html_url": "https://github.com/wwyhy", "followers_url": "https://api.github.com/users/wwyhy/followers", "following_url": "https://api.github.com/users/wwyhy/following{/other_user}", "gists_url": "https://api.github.com/users/wwyhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/wwyhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wwyhy/subscriptions", "organizations_url": "https://api.github.com/users/wwyhy/orgs", "repos_url": "https://api.github.com/users/wwyhy/repos", "events_url": "https://api.github.com/users/wwyhy/events{/privacy}", "received_events_url": "https://api.github.com/users/wwyhy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-06T14:51:01Z", "updated_at": "2018-11-06T14:56:35Z", "closed_at": "2018-11-06T14:56:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "when show the indices, i got there is no command \"show-indices\", but form the \"curator_cli --help\",\r\nwe can see the command. please help on this.\r\n\r\n1. installed curator by pip\r\n2. version: curator_cli, version 5.5.4\r\n3. ```\r\n# curator_cli --host x.x.x.x --port 9200 show-indices --verbose\r\n2018-11-06 14:47:39,139 CRITICAL  Action must be one of ['snapshot', 'create_index', 'index_settings', 'rollover', 'forcemerge', 'cluster_routing', 'replicas', 'delete_indices', 'allocation', 'alias', 'restore', 'close', 'delete_snapshots', 'open', 'shrink', 'reindex']\r\nTraceback (most recent call last):\r\n  File \"/bin/curator_cli\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/lib/python2.7/site-packages/curator/curator_cli.py\", line 8, in main\r\n    cli(obj={})\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 764, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 717, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 1137, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 956, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 555, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/lib64/python2.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/curator/cli_singletons/show.py\", line 21, in show_indices\r\n    action = cli_action(ctx.info_name, ctx.obj['config']['client'], {'allow_ilm_indices': allow_ilm_indices}, filter_list, ignore_empty_list)\r\n  File \"/usr/lib/python2.7/site-packages/curator/cli_singletons/object_class.py\", line 52, in __init__\r\n    self.check_options(option_dict)\r\n  File \"/usr/lib/python2.7/site-packages/curator/cli_singletons/object_class.py\", line 103, in check_options\r\n    options.get_schema(self.action),\r\n  File \"/usr/lib/python2.7/site-packages/curator/validators/options.py\", line 144, in get_schema\r\n    for each in action_specific(action):\r\n  File \"/usr/lib/python2.7/site-packages/curator/validators/options.py\", line 129, in action_specific\r\n    return options[action]\r\nKeyError: u'show-indices'\r\n\r\n\r\n```\r\n4. \r\n```\r\n# curator_cli --help\r\nUsage: curator_cli [OPTIONS] COMMAND [ARGS]...\r\n\r\nOptions:\r\n  --config PATH       Path to configuration file. Default: ~/.curator/curator.yml\r\n  --host TEXT         Elasticsearch host.\r\n  --url_prefix TEXT   Elasticsearch http url prefix.\r\n  --port TEXT         Elasticsearch port.\r\n  --use_ssl           Connect to Elasticsearch through SSL.\r\n  --certificate TEXT  Path to certificate to use for SSL validation.\r\n  --client-cert TEXT  Path to file containing SSL certificate for client auth.\r\n  --client-key TEXT   Path to file containing SSL key for client auth.\r\n  --ssl-no-validate   Do not validate SSL certificate\r\n  --http_auth TEXT    Use Basic Authentication ex: user:pass\r\n  --timeout INTEGER   Connection timeout in seconds.\r\n  --master-only       Only operate on elected master node.\r\n  --dry-run           Do not perform any changes.\r\n  --loglevel TEXT     Log level\r\n  --logfile TEXT      log file\r\n  --logformat TEXT    Log output format [default|logstash|json].\r\n  --version           Show the version and exit.\r\n  --help              Show this message and exit.\r\n\r\nCommands:\r\n  alias             Add/Remove Indices to/from Alias\r\n  allocation        Shard Routing Allocation\r\n  close             Close Indices\r\n  delete-indices    Delete Indices\r\n  delete-snapshots  Delete Snapshots\r\n  forcemerge        forceMerge Indices (reduce segment count)\r\n  open              Open Indices\r\n  replicas          Change Replica Count\r\n  restore           Restore Indices\r\n  rollover          Rollover Index associated with Alias\r\n  show-indices      Show Indices\r\n  show-snapshots    Show Snapshots\r\n  shrink            Shrink Indices to --number_of_shards\r\n  snapshot          Snapshot Indices\r\n```", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1304", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1304/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1304/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1304/events", "html_url": "https://github.com/elastic/curator/issues/1304", "id": 375398528, "node_id": "MDU6SXNzdWUzNzUzOTg1Mjg=", "number": 1304, "title": "PIP upgrade breaks curator_cli show_incides, delete_indices and other commands", "user": {"login": "salomatu", "id": 703508, "node_id": "MDQ6VXNlcjcwMzUwOA==", "avatar_url": "https://avatars3.githubusercontent.com/u/703508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salomatu", "html_url": "https://github.com/salomatu", "followers_url": "https://api.github.com/users/salomatu/followers", "following_url": "https://api.github.com/users/salomatu/following{/other_user}", "gists_url": "https://api.github.com/users/salomatu/gists{/gist_id}", "starred_url": "https://api.github.com/users/salomatu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salomatu/subscriptions", "organizations_url": "https://api.github.com/users/salomatu/orgs", "repos_url": "https://api.github.com/users/salomatu/repos", "events_url": "https://api.github.com/users/salomatu/events{/privacy}", "received_events_url": "https://api.github.com/users/salomatu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803248, "node_id": "MDU6TGFiZWw1MjgwMzI0OA==", "url": "https://api.github.com/repos/elastic/curator/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-30T09:41:54Z", "updated_at": "2018-10-30T11:38:47Z", "closed_at": "2018-10-30T11:38:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Problem description\r\nUpgrading elasticsearch_curator with pip may suddenly make many of the commands unusable with counter-intuitive error messages: commands that existed previously do not seem to exist with the same name, but neither does it work with the \"new name\" proposed by the help text.\r\n\r\n### Quick analysis & hypothesis\r\nIn the style of pip, upgrade result in installing the latest versions of any dependency marked only with \">=\". In this case it seems Click (depended to version >= 6.7) has introduced some breaking changes in their latest version (7.0), rendering the curator_cli unusable: some command names have been mangled and their respective functionalities cannot be accessed.\r\n\r\nFirst indication of trouble can be seen in the help printout:\r\n```\r\n$ curator_cli --help\r\n[...]\r\n  show-indices      Show Indices\r\n  show-snapshots    Show Snapshots\r\n[...]\r\n```\r\nAll underscores in the commands have been replaced with a hyphen. e.g. show_indices -> show-indices.\r\nHowever, neither form will actually work.\r\n\r\n### Expected Behavior\r\n`$ curator_cli show_indices`\r\nIndices are listed.\r\n\r\n### Actual Behavior\r\n```\r\n$ curator_cli show_indices\r\nError: No such command \"show_indices\".\r\n```\r\n\r\n```\r\n$ curator_cli show-indices\r\n2018-10-30 09:54:53,280 CRITICAL  Action must be one of ['snapshot', 'create_index', 'index_settings', 'rollover', 'forcemerge', 'cluster_routing', 'replicas', 'delete_indices', 'allocation', 'alias', 'restore', 'close', 'delete_snapshots', 'open', 'shrink', 'reindex']\r\nTraceback (most recent call last):\r\n  File \"/bin/curator_cli\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/lib/python2.7/site-packages/curator/curator_cli.py\", line 8, in main\r\n    cli(obj={})\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 764, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 717, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 1137, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 956, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 555, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/lib64/python2.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/curator/cli_singletons/show.py\", line 20, in show_indices\r\n    action = cli_action(ctx.info_name, ctx.obj['config']['client'], {}, filter_list, ignore_empty_list)\r\n  File \"/usr/lib/python2.7/site-packages/curator/cli_singletons/object_class.py\", line 52, in __init__\r\n    self.check_options(option_dict)\r\n  File \"/usr/lib/python2.7/site-packages/curator/cli_singletons/object_class.py\", line 94, in check_options\r\n    options.get_schema(self.action),\r\n  File \"/usr/lib/python2.7/site-packages/curator/validators/options.py\", line 143, in get_schema\r\n    for each in action_specific(action):\r\n  File \"/usr/lib/python2.7/site-packages/curator/validators/options.py\", line 129, in action_specific\r\n    return options[action]\r\nKeyError: u'show-indices'\r\n```\r\n\r\n### Steps to Reproduce the Problem\r\n`pip install --upgrade elasticsearch-curator`\r\n\r\n### Specifications\r\n  - Version:  elasticsearch-curator==5.5.4\r\n  - Platform: Centos7 x86_64\r\n  - Subsystem: tested with both python2.7 and python3.6\r\n\r\n## Workaround\r\nI was able to restore normal operation by downgrading Click:\r\n`pip install --upgrade click==6.7`\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1297", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1297/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1297/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1297/events", "html_url": "https://github.com/elastic/curator/issues/1297", "id": 373392793, "node_id": "MDU6SXNzdWUzNzMzOTI3OTM=", "number": 1297, "title": "Reindex fails if source is empty when using REINDEX_SELECTION with ignore_empty_list: True", "user": {"login": "BenjaminDebotte", "id": 4532729, "node_id": "MDQ6VXNlcjQ1MzI3Mjk=", "avatar_url": "https://avatars1.githubusercontent.com/u/4532729?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BenjaminDebotte", "html_url": "https://github.com/BenjaminDebotte", "followers_url": "https://api.github.com/users/BenjaminDebotte/followers", "following_url": "https://api.github.com/users/BenjaminDebotte/following{/other_user}", "gists_url": "https://api.github.com/users/BenjaminDebotte/gists{/gist_id}", "starred_url": "https://api.github.com/users/BenjaminDebotte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BenjaminDebotte/subscriptions", "organizations_url": "https://api.github.com/users/BenjaminDebotte/orgs", "repos_url": "https://api.github.com/users/BenjaminDebotte/repos", "events_url": "https://api.github.com/users/BenjaminDebotte/events{/privacy}", "received_events_url": "https://api.github.com/users/BenjaminDebotte/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-24T09:38:30Z", "updated_at": "2018-10-30T14:35:45Z", "closed_at": "2018-10-30T14:35:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Context\r\n\r\nI'm using `elasticsearch-curator` to reindex several daily indices before yesterday into a weekly index. \r\nFor this matter we have a task defined as this:\r\n\r\n```YAML\r\n  12:\r\n    description: >-\r\n      Reindex all previous daily 'dummy-test-index' indices starting yesterday to weekly index\r\n    action: reindex\r\n    options:\r\n      ignore_empty_list: True # Doesn't work here. Curator will fail. Need to be fixed.\r\n      wait_for_completion: True\r\n      wait_interval: 9\r\n      max_wait: -1\r\n      request_body:\r\n        source:\r\n          index: REINDEX_SELECTION\r\n        dest:\r\n          index: \"<dummy-test-index-{now/d{xxxx:'w'ww}}>\"\r\n    filters:\r\n      - filtertype: pattern\r\n        kind: regex\r\n        value: '^dummy-test-index-\\d{4}\\.\\d{2}\\.\\d{2}$'\r\n      - filtertype: kibana\r\n        exclude: True\r\n      - filtertype: age\r\n        source: name\r\n        direction: older\r\n        timestring: '%Y.%m.%d'\r\n        unit: days\r\n        unit_count: 1\r\n```\r\n\r\n\r\n### Expected Behavior\r\nI would expect Elasticsearch-curator to carry-on if no indices is provided in `REINDEX_SELECTION`. `continue_if_exception` is not an option here as the operation is critical. Right now it just stops to cure on the first empty action.\r\n\r\n### Actual Behavior\r\n\r\n#### JSON Log output\r\n```JSON\r\n{\r\n    \"@timestamp\": \"2018-10-24T09:34:59.078Z\",\r\n    \"function\": \"run\",\r\n    \"linenum\": 146,\r\n    \"loglevel\": \"INFO\",\r\n    \"message\": \"Preparing Action ID: 12, \\\"reindex\\\"\",\r\n    \"name\": \"curator.cli\"\r\n} {\r\n    \"@timestamp\": \"2018-10-24T09:34:59.087Z\",\r\n    \"function\": \"run\",\r\n    \"linenum\": 167,\r\n    \"loglevel\": \"INFO\",\r\n    \"message\": \"Trying Action ID: 12, \\\"reindex\\\": Reindex all previous daily 'dummy-test-index' indices starting yesterday to weekly index\",\r\n    \"name\": \"curator.cli\"\r\n} {\r\n    \"@timestamp\": \"2018-10-24T09:34:59.316Z\",\r\n    \"function\": \"run\",\r\n    \"linenum\": 186,\r\n    \"loglevel\": \"ERROR\",\r\n    \"message\": \"Failed to complete action: reindex.  <class 'curator.exceptions.FailedExecution'>: Exception encountered.  Rerun with loglevel DEBUG and/or check Elasticsearch logs for more information. Exception: Source index must be list of actual indices. It must not be an empty list.\",\r\n    \"name\": \"curator.cli\"\r\n}\r\n```\r\n\r\n### Steps to Reproduce the Problem\r\n  1. Create any reindex task, with an existing destination and `ignore_empty_list: True`\r\n  2. Provide filters which will resolve to empty\r\n  3. Curator will fail with `Source index must be list of actual indices. It must not be an empty list` message.\r\n\r\n### Specifications\r\n\r\n  - Version: Elasticsearch-curator 5.5.4 from pip\r\n  - Running in docker image `alpine:3.4` over Centos 6", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1295", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1295/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1295/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1295/events", "html_url": "https://github.com/elastic/curator/issues/1295", "id": 373200590, "node_id": "MDU6SXNzdWUzNzMyMDA1OTA=", "number": 1295, "title": "Curator delete crashes if encountering an old timestamp", "user": {"login": "rsteneteg", "id": 36709673, "node_id": "MDQ6VXNlcjM2NzA5Njcz", "avatar_url": "https://avatars3.githubusercontent.com/u/36709673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsteneteg", "html_url": "https://github.com/rsteneteg", "followers_url": "https://api.github.com/users/rsteneteg/followers", "following_url": "https://api.github.com/users/rsteneteg/following{/other_user}", "gists_url": "https://api.github.com/users/rsteneteg/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsteneteg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsteneteg/subscriptions", "organizations_url": "https://api.github.com/users/rsteneteg/orgs", "repos_url": "https://api.github.com/users/rsteneteg/repos", "events_url": "https://api.github.com/users/rsteneteg/events{/privacy}", "received_events_url": "https://api.github.com/users/rsteneteg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-23T21:04:34Z", "updated_at": "2018-10-30T01:55:39Z", "closed_at": "2018-10-30T01:55:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Expected Behavior\r\nCurator delete should not crash when trying to clean up indices\r\n\r\n### Actual Behavior\r\nCurator starts up and exits before any indices has been cleaned up with this error `Unusually formatted epoch timestamp. Should be 10, 13, or more digits`\r\n\r\nWe are running a curator job that runs this filter to look for old indices\r\n```\r\n- filtertype: age\r\n      source: field_stats\r\n      direction: older\r\n      unit: days\r\n      unit_count: 14\r\n      field: '@timestamp'\r\n      stats_result: max_value\r\n```\r\nHowever some host was started with an incorrect timestamp (year 1988), creating documents with a 12 digit timestamp, which was then set as the min_value for the index field_stats.\r\n\r\n### Specifications\r\n\r\n  - Version: ES 5.6.6, Curator 5.5.4\r\n\r\n## Context (Environment)\r\nWe do index rollovers and deletions of indices older than 14 days. When a host sent in some docs with a very old timestamp from year 1988, Curator would crash complaining about a 12 digit timestamp, causing no indices to be deleted. With no old indices deleted we started growing in disk usage. Once the bad host was fixed, we tried to exclude the two indices we got with 12 digit timestamps but Curator runs the fix_epoch function on all indices at startup so exclude did not work.\r\n\r\n## Detailed Description\r\nI don't have the context for why 12 digit timestamps are not allowed in the first place, but I have created a code fix to allow it.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1285", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1285/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1285/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1285/events", "html_url": "https://github.com/elastic/curator/issues/1285", "id": 369158772, "node_id": "MDU6SXNzdWUzNjkxNTg3NzI=", "number": 1285, "title": "Invalid Request with Long URL", "user": {"login": "Careidas77", "id": 2297975, "node_id": "MDQ6VXNlcjIyOTc5NzU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2297975?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Careidas77", "html_url": "https://github.com/Careidas77", "followers_url": "https://api.github.com/users/Careidas77/followers", "following_url": "https://api.github.com/users/Careidas77/following{/other_user}", "gists_url": "https://api.github.com/users/Careidas77/gists{/gist_id}", "starred_url": "https://api.github.com/users/Careidas77/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Careidas77/subscriptions", "organizations_url": "https://api.github.com/users/Careidas77/orgs", "repos_url": "https://api.github.com/users/Careidas77/repos", "events_url": "https://api.github.com/users/Careidas77/events{/privacy}", "received_events_url": "https://api.github.com/users/Careidas77/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-11T14:49:32Z", "updated_at": "2018-10-12T07:30:46Z", "closed_at": "2018-10-12T07:30:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using Curator 5.5 to try to delete old indices. This is my action file:\r\n\r\n> 1:\r\n    action: delete_indices\r\n    description: >-\r\n      Delete indices [...].\r\n    options:\r\n      ignore_empty_list: True\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: whatever-\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y.%m.%d'\r\n      unit: days\r\n      unit_count: 45\r\n\r\nI get this error when executing that says:\r\n\r\n`ERROR     Failed to complete action: delete_indices.  <class 'KeyError'>: 'indices'`\r\n\r\nI removed the black-listed applications to see more of what's going on, and can see that there are some requests resulting in a `400`, like:\r\n\r\n`GET http://127.0.0.1:9200/very,long,list,of,very,many,different,indices [status:400 request:0.000s]`\r\n\r\nIf I copy the request and run it elsewhere, I get the same result. If I shorten the list of indices in the request though, it's OK.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1283", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1283/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1283/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1283/events", "html_url": "https://github.com/elastic/curator/issues/1283", "id": 368144311, "node_id": "MDU6SXNzdWUzNjgxNDQzMTE=", "number": 1283, "title": "elasticsearch-curator fails to work with >=elasticsearch-py-5.5.2,<6.0.0", "user": {"login": "hydrapolic", "id": 3277373, "node_id": "MDQ6VXNlcjMyNzczNzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/3277373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hydrapolic", "html_url": "https://github.com/hydrapolic", "followers_url": "https://api.github.com/users/hydrapolic/followers", "following_url": "https://api.github.com/users/hydrapolic/following{/other_user}", "gists_url": "https://api.github.com/users/hydrapolic/gists{/gist_id}", "starred_url": "https://api.github.com/users/hydrapolic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hydrapolic/subscriptions", "organizations_url": "https://api.github.com/users/hydrapolic/orgs", "repos_url": "https://api.github.com/users/hydrapolic/repos", "events_url": "https://api.github.com/users/hydrapolic/events{/privacy}", "received_events_url": "https://api.github.com/users/hydrapolic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-09T10:31:23Z", "updated_at": "2018-10-10T10:50:16Z", "closed_at": "2018-10-10T10:50:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello,\r\nelasticsearch-curator-5.5.4 fails to work with elasticsearch-py-5.5.2 (albeit it should according to https://github.com/elastic/curator/blob/master/setup.py#L25):\r\nres = ['elasticsearch>=5.5.2,!=6.0.0,<7.0.0' ]\r\n\r\n````\r\n$ curator\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python-exec/python2.7/curator\", line 6, in <module>\r\n    from pkg_resources import load_entry_point\r\n  File \"/usr/lib64/python2.7/site-packages/pkg_resources/__init__.py\", line 3098, in <module>\r\n    @_call_aside\r\n  File \"/usr/lib64/python2.7/site-packages/pkg_resources/__init__.py\", line 3082, in _call_aside\r\n    f(*args, **kwargs)\r\n  File \"/usr/lib64/python2.7/site-packages/pkg_resources/__init__.py\", line 3111, in _initialize_master_working_set\r\n    working_set = WorkingSet._build_master()\r\n  File \"/usr/lib64/python2.7/site-packages/pkg_resources/__init__.py\", line 573, in _build_master\r\n    ws.require(__requires__)\r\n  File \"/usr/lib64/python2.7/site-packages/pkg_resources/__init__.py\", line 891, in require\r\n    needed = self.resolve(parse_requirements(requirements))\r\n  File \"/usr/lib64/python2.7/site-packages/pkg_resources/__init__.py\", line 777, in resolve\r\n    raise DistributionNotFound(req, requirers)\r\npkg_resources.DistributionNotFound: The 'elasticsearch!=6.0.0,<7.0.0,>=5.5.2' distribution was not found and is required by elasticsearch-curator\r\n````\r\n\r\nSince elasticsearch-py-5.5.2 the package was renamed from elasticsearch to elasticsearch5:\r\nhttps://github.com/elastic/elasticsearch-py/commit/f20a73e3f36a54ba47530d8f53f5e3029fe20fcc\r\n\r\nelasticsearch-py-6.0.0+ is named elasticsearch so it works with those versions.\r\n\r\nDownstream issue: https://bugs.gentoo.org/667526\r\n\r\nThanks", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1281", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1281/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1281/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1281/events", "html_url": "https://github.com/elastic/curator/issues/1281", "id": 367086048, "node_id": "MDU6SXNzdWUzNjcwODYwNDg=", "number": 1281, "title": "curator_cli 5 doesn't support show_indices and show_snapshots anymore ?", "user": {"login": "tobymaro", "id": 22294369, "node_id": "MDQ6VXNlcjIyMjk0MzY5", "avatar_url": "https://avatars3.githubusercontent.com/u/22294369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tobymaro", "html_url": "https://github.com/tobymaro", "followers_url": "https://api.github.com/users/tobymaro/followers", "following_url": "https://api.github.com/users/tobymaro/following{/other_user}", "gists_url": "https://api.github.com/users/tobymaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tobymaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tobymaro/subscriptions", "organizations_url": "https://api.github.com/users/tobymaro/orgs", "repos_url": "https://api.github.com/users/tobymaro/repos", "events_url": "https://api.github.com/users/tobymaro/events{/privacy}", "received_events_url": "https://api.github.com/users/tobymaro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-10-05T07:09:09Z", "updated_at": "2018-10-05T10:12:31Z", "closed_at": "2018-10-05T10:12:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "## To submit a bug or report an issue\r\n\r\ncurator_cli show-indices doesn't work anymore . The same for show-snapshots.\r\n\r\n\r\n\r\n### Expected Behavior\r\ncurator_cli show-indices - should return list of available indices \r\n\r\n### Actual Behavior\r\n]# curator_cli show-indices\r\n2018-10-05 07:03:41,289 CRITICAL  Action must be one of ['snapshot', 'create_index', 'index_settings', 'rollover', 'forcemerge', 'cluster_routing', 'replicas', 'delete_indices', 'allocation', 'alias', 'restore', 'close', 'delete_snapshots', 'open', 'shrink', 'reindex']\r\nTraceback (most recent call last):\r\n  File \"/bin/curator_cli\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/lib/python2.7/site-packages/curator/curator_cli.py\", line 8, in main\r\n    cli(obj={})\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 764, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 717, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 1137, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 956, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/lib64/python2.7/site-packages/click/core.py\", line 555, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/lib64/python2.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/curator/cli_singletons/show.py\", line 21, in show_indices\r\n    action = cli_action(ctx.info_name, ctx.obj['config']['client'], {'allow_ilm_indices': allow_ilm_indices}, filter_list, ignore_empty_list)\r\n  File \"/usr/lib/python2.7/site-packages/curator/cli_singletons/object_class.py\", line 52, in __init__\r\n    self.check_options(option_dict)\r\n  File \"/usr/lib/python2.7/site-packages/curator/cli_singletons/object_class.py\", line 103, in check_options\r\n    options.get_schema(self.action),\r\n  File \"/usr/lib/python2.7/site-packages/curator/validators/options.py\", line 144, in get_schema\r\n    for each in action_specific(action):\r\n  File \"/usr/lib/python2.7/site-packages/curator/validators/options.py\", line 129, in action_specific\r\n    return options[action]\r\nKeyError: u'show-indices'\r\n\r\n### Steps to Reproduce the Problem\r\ncurator_cli show-indices \r\n\r\n### Specifications\r\n\r\n  - Version: curator_cli 5.5.4\r\n  - Platform: Centos 7\r\n  - Subsystem: systemd\r\n  - Python: 2.7\r\n  - Elasticsearch 6.4\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1279", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1279/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1279/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1279/events", "html_url": "https://github.com/elastic/curator/issues/1279", "id": 366240144, "node_id": "MDU6SXNzdWUzNjYyNDAxNDQ=", "number": 1279, "title": "Some CLI actions do not work with latest Click version", "user": {"login": "Andrewsville", "id": 506715, "node_id": "MDQ6VXNlcjUwNjcxNQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/506715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Andrewsville", "html_url": "https://github.com/Andrewsville", "followers_url": "https://api.github.com/users/Andrewsville/followers", "following_url": "https://api.github.com/users/Andrewsville/following{/other_user}", "gists_url": "https://api.github.com/users/Andrewsville/gists{/gist_id}", "starred_url": "https://api.github.com/users/Andrewsville/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Andrewsville/subscriptions", "organizations_url": "https://api.github.com/users/Andrewsville/orgs", "repos_url": "https://api.github.com/users/Andrewsville/repos", "events_url": "https://api.github.com/users/Andrewsville/events{/privacy}", "received_events_url": "https://api.github.com/users/Andrewsville/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 590817828, "node_id": "MDU6TGFiZWw1OTA4MTc4Mjg=", "url": "https://api.github.com/repos/elastic/curator/labels/KNOWN%20ISSUE", "name": "KNOWN ISSUE", "color": "d96f3f", "default": false, "description": null}, {"id": 52803247, "node_id": "MDU6TGFiZWw1MjgwMzI0Nw==", "url": "https://api.github.com/repos/elastic/curator/labels/bug", "name": "bug", "color": "ff0040", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-03T09:05:55Z", "updated_at": "2018-11-08T05:18:33Z", "closed_at": "2018-10-10T10:50:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "In version 7 authors of Click have changed the auto-naming logic so that it [replaces underscores with dashes](https://github.com/pallets/click/commit/5d1df0e042b2f8b0dee8f6dd9ce74edce331a950). This change makes show_* CLI actions impossible to use.\r\n\r\n### Expected Behavior\r\n\r\n`curator_cli show_snapshots --repository=repo` outputs a list of snapshots.\r\n\r\n### Actual Behavior\r\n\r\n`curator_cli show_snapshots` output:\r\n\r\n```\r\nUsage: curator_cli [OPTIONS] COMMAND [ARGS]...\r\nTry \"curator_cli --help\" for help.\r\n\r\nError: No such command \"show_snapshots\".\r\n```\r\n\r\n(Because of the mentioned change in click) curator_cli forces you to think that the actions are actually called show-* but the internal logic of Curator expects them to be called show_* making them impossible to use.\r\n\r\n### Specifications\r\n\r\n  - Version: 5.5.4\r\n  - Platform: Linux\r\n  - Subsystem: Python 3.7 Alpine based Docker image\r\n\r\n\r\n## Detailed Description\r\n\r\n`curator_cli --help` output snippet:\r\n\r\n```\r\nUsage: curator_cli [OPTIONS] COMMAND [ARGS]...\r\n\r\n...\r\n  show-indices      Show Indices\r\n  show-snapshots    Show Snapshots\r\n...\r\n```\r\n\r\nIt correctly outputs action names with dashes (that does not match documentation, though). However trying to use them, you hit a dead end:\r\n\r\n`curator_cli show-snapshots` outputs that the `--repository` option is needed. That is correct:\r\n\r\n```\r\nUsage: curator_cli show-snapshots [OPTIONS]\r\nTry \"curator_cli show-snapshots --help\" for help.\r\n\r\nError: Missing option \"--repository\".\r\n```\r\n\r\nBut providing it you get an error you can't really fix:\r\n\r\n```\r\n2018-10-03 07:54:32,856 CRITICAL  Action must be one of ['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/curator_cli\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/curator_cli.py\", line 8, in main\r\n    cli(obj={})\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 764, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 717, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1137, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 956, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 555, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/cli_singletons/show.py\", line 82, in show_snapshots\r\n    action = cli_action(ctx.info_name, ctx.obj['config']['client'], {}, filter_list, ignore_empty_list, repository=repository)\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/cli_singletons/object_class.py\", line 52, in __init__\r\n    self.check_options(option_dict)\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/cli_singletons/object_class.py\", line 103, in check_options\r\n    options.get_schema(self.action),\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/validators/options.py\", line 144, in get_schema\r\n    for each in action_specific(action):\r\n  File \"/usr/local/lib/python3.7/site-packages/curator/validators/options.py\", line 129, in action_specific\r\n    return options[action]\r\nKeyError: 'show-snapshots'\r\n\r\n```\r\n\r\n---\r\n\r\nThere are three (?) ways to fix that:\r\n\r\n1. Introduce an upper version limit to Click.\r\n2. Increase the minimal required version of Click to 7 and make Curator think there are dashes in action names, not underscores.\r\n3. Provide explicit command names.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1276", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1276/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1276/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1276/events", "html_url": "https://github.com/elastic/curator/issues/1276", "id": 361860401, "node_id": "MDU6SXNzdWUzNjE4NjA0MDE=", "number": 1276, "title": "curator.utils.rollable_alias falsely reports aliases with multiple indices as rollable", "user": {"login": "Battleroid", "id": 1740742, "node_id": "MDQ6VXNlcjE3NDA3NDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1740742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Battleroid", "html_url": "https://github.com/Battleroid", "followers_url": "https://api.github.com/users/Battleroid/followers", "following_url": "https://api.github.com/users/Battleroid/following{/other_user}", "gists_url": "https://api.github.com/users/Battleroid/gists{/gist_id}", "starred_url": "https://api.github.com/users/Battleroid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Battleroid/subscriptions", "organizations_url": "https://api.github.com/users/Battleroid/orgs", "repos_url": "https://api.github.com/users/Battleroid/repos", "events_url": "https://api.github.com/users/Battleroid/events{/privacy}", "received_events_url": "https://api.github.com/users/Battleroid/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-09-19T17:57:07Z", "updated_at": "2018-11-16T15:29:13Z", "closed_at": "2018-11-16T02:06:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "## To submit a bug or report an issue\r\nIf you have an alias that points to multiple indices the helper function `rollable_alias` falsely reports the alias as rollable.\r\n\r\n### Expected Behavior\r\nShould not report it as rollable.\r\n\r\n### Actual Behavior\r\nIt reports it as rollable.\r\n\r\n## Context (Environment)\r\nWe use the `rollable_alias` func to determine which aliases are rollable to automate rollover requests for our clusters. ", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1262", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1262/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1262/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1262/events", "html_url": "https://github.com/elastic/curator/issues/1262", "id": 354502718, "node_id": "MDU6SXNzdWUzNTQ1MDI3MTg=", "number": 1262, "title": "Cannot connect to elasticsearch using SSL/TLS. Attempting to verify SSL certificate", "user": {"login": "tbennett6421", "id": 6843296, "node_id": "MDQ6VXNlcjY4NDMyOTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/6843296?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tbennett6421", "html_url": "https://github.com/tbennett6421", "followers_url": "https://api.github.com/users/tbennett6421/followers", "following_url": "https://api.github.com/users/tbennett6421/following{/other_user}", "gists_url": "https://api.github.com/users/tbennett6421/gists{/gist_id}", "starred_url": "https://api.github.com/users/tbennett6421/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tbennett6421/subscriptions", "organizations_url": "https://api.github.com/users/tbennett6421/orgs", "repos_url": "https://api.github.com/users/tbennett6421/repos", "events_url": "https://api.github.com/users/tbennett6421/events{/privacy}", "received_events_url": "https://api.github.com/users/tbennett6421/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-08-27T22:33:48Z", "updated_at": "2018-08-29T12:54:43Z", "closed_at": "2018-08-29T12:54:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Expected Behavior\r\n<!--- Tell us what should happen -->\r\nCurator should take the certificate parameter and use that certificate to validate the certificate presented by elasticsearch.\r\n\r\n### Actual Behavior\r\nrunning the following `curator --config curator.yml action.yml` normally presents the following output\r\n`2018-08-27 17:18:53,451 INFO      Preparing Action ID: 1, \"forcemerge\"`\r\n\r\nwith options `blacklist []` and `loglevel: DEBUG` set in `curator.yml` I get the following backtrace\r\n```\r\n2018-08-27 17:15:38,249 INFO                 curator.cli                    run:146  Preparing Action ID: 1, \"forcemerge\"\r\n2018-08-27 17:15:38,249 DEBUG              curator.utils             get_client:803  kwargs = {'hosts': ['m1.example.com'], 'port': 9200, 'use_ssl': True, 'certificate': '/etc/ssl/certs/sub_ca.pem', 'ssl_no_validate': False, 'http_auth': 'admin:pass', 'master_only': False, 'aws_key': None, 'client_cert': None, 'url_prefix': '', 'client_key': None, 'aws_secret_key': None, 'aws_sign_request': False, 'aws_token': None, 'timeout': 21600}\r\n2018-08-27 17:15:38,249 DEBUG              curator.utils             get_client:809  Attempting to verify SSL certificate.\r\n2018-08-27 17:15:38,254 DEBUG              curator.utils             get_client:880  Not using \"requests_aws4auth\" python module to connect.\r\n2018-08-27 17:15:38,255 DEBUG         urllib3.util.retry               from_int:200  Converted retries value: False -> Retry(total=False, connect=None, read=None, redirect=0, status=None)\r\n2018-08-27 17:15:38,255 DEBUG     urllib3.connectionpool              _new_conn:824  Starting new HTTPS connection (1): m1.example.com\r\n2018-08-27 17:15:38,273 WARNING            elasticsearch       log_request_fail:97   GET https://m1.example.com:9200/ [status:N/A request:0.019s]\r\nTraceback (most recent call last):\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 601, in urlopen\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 346, in _make_request\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 850, in _validate_conn\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/connection.py\", line 326, in connect\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/util/ssl_.py\", line 329, in ssl_wrap_socket\r\n  File \"/usr/local/lib/python3.6/ssl.py\", line 407, in wrap_socket\r\n  File \"/usr/local/lib/python3.6/ssl.py\", line 814, in __init__\r\n  File \"/usr/local/lib/python3.6/ssl.py\", line 1068, in do_handshake\r\n  File \"/usr/local/lib/python3.6/ssl.py\", line 689, in do_handshake\r\nssl.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:833)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/elasticsearch/connection/http_urllib3.py\", line 166, in perform_request\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 639, in urlopen\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/util/retry.py\", line 333, in increment\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/packages/six.py\", line 685, in reraise\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 601, in urlopen\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 346, in _make_request\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/connectionpool.py\", line 850, in _validate_conn\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/connection.py\", line 326, in connect\r\n  File \"/home/buh/.local/lib/python3.6/site-packages/urllib3/util/ssl_.py\", line 329, in ssl_wrap_socket\r\n  File \"/usr/local/lib/python3.6/ssl.py\", line 407, in wrap_socket\r\n  File \"/usr/local/lib/python3.6/ssl.py\", line 814, in __init__\r\n  File \"/usr/local/lib/python3.6/ssl.py\", line 1068, in do_handshake\r\n  File \"/usr/local/lib/python3.6/ssl.py\", line 689, in do_handshake\r\nurllib3.exceptions.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:833)\r\n2018-08-27 17:15:38,278 DEBUG              elasticsearch       log_request_fail:105  > None\r\n2018-08-27 17:15:38,279 WARNING            elasticsearch              mark_dead:148  Connection <Urllib3HttpConnection: https://m1.example.com:9200> has failed for 1 times in a row, putting on 60 second timeout.\r\n```\r\n\r\nThe user I'm running curator as has access to `/etc/ssl/certs/sub_ca.pem` and can read the contents of it. I'm not sure that curator is actually accessing that certificate file\r\n\r\n### curator.yml\r\n```\r\n---\r\nclient:\r\n  hosts:\r\n    - m1.example.com\r\n  port: 9200\r\n  url_prefix:\r\n  use_ssl: True\r\n  certificate: '/etc/ssl/certs/sub_ca.pem'\r\n  client_cert:\r\n  client_key:\r\n  ssl_no_validate: False\r\n  http_auth: 'admin:pass'\r\n  timeout: 30\r\n  master_only: False\r\n\r\nlogging:\r\n  loglevel: INFO\r\n  logfile:\r\n  logformat: default\r\n  blacklist: []\r\n```\r\n### action.yml\r\n```\r\n---\r\nactions:\r\n  1:\r\n    action: forcemerge\r\n    description: \"Apply ForceMerge to all vuln-whisperer indexs\"\r\n    options:\r\n        max_num_segments: 1\r\n        delay: 120\r\n        ignore_empty_list: True\r\n        continue_if_exception: False\r\n        disable_action: False\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: logstash-vuln*\r\n```\r\n\r\n### Specifications\r\nI'm using the binary version of curator\r\n$> curator --version\r\n`curator, version 5.5.4`\r\n\r\n## Context (Environment)\r\n* Setting `ssl_no_validate: True` works as a workaround\r\n* We are using the latest patched Ubuntu 16.04 server", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1261", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1261/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1261/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1261/events", "html_url": "https://github.com/elastic/curator/issues/1261", "id": 353630619, "node_id": "MDU6SXNzdWUzNTM2MzA2MTk=", "number": 1261, "title": "Curator fails on Elasticsearch 6.4", "user": {"login": "Iril", "id": 1112004, "node_id": "MDQ6VXNlcjExMTIwMDQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/1112004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Iril", "html_url": "https://github.com/Iril", "followers_url": "https://api.github.com/users/Iril/followers", "following_url": "https://api.github.com/users/Iril/following{/other_user}", "gists_url": "https://api.github.com/users/Iril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Iril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Iril/subscriptions", "organizations_url": "https://api.github.com/users/Iril/orgs", "repos_url": "https://api.github.com/users/Iril/repos", "events_url": "https://api.github.com/users/Iril/events{/privacy}", "received_events_url": "https://api.github.com/users/Iril/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-24T03:26:47Z", "updated_at": "2018-08-29T12:55:40Z", "closed_at": "2018-08-29T12:55:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Expected Behavior\r\nCurator should show me the indices for my elasticsearch ( 6.4 )\r\n\r\n### Actual Behavior\r\n$ curator_cli show_indices --verbose\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/curator_cli\", line 11, in <module>\r\n    load_entry_point('elasticsearch-curator==4.2.5', 'console_scripts', 'curator_cli')()\r\n  File \"/usr/lib/python2.7/dist-packages/curator/curator_cli.py\", line 5, in main\r\n    cli(obj={})\r\n  File \"/usr/lib/python2.7/dist-packages/click/core.py\", line 716, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/lib/python2.7/dist-packages/click/core.py\", line 696, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/lib/python2.7/dist-packages/click/core.py\", line 1060, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/lib/python2.7/dist-packages/click/core.py\", line 889, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/lib/python2.7/dist-packages/click/core.py\", line 534, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/lib/python2.7/dist-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/lib/python2.7/dist-packages/curator/singletons.py\", line 532, in show_indices_singleton\r\n    client = get_client(**c_args)\r\n  File \"/usr/lib/python2.7/dist-packages/curator/utils.py\", line 603, in get_client\r\n    'Error: {0}'.format(e)\r\nelasticsearch.exceptions.ElasticsearchException: Unable to create client connection to Elasticsearch.  Error: Elasticsearch version 6.4.0 incompatible with this version of Curator (6.4.0)\r\n\r\n\r\n### Steps to Reproduce the Problem\r\n  1. Install elastic / kibana / logstash / curator from : https://www.elastic.co/guide/en/logstash/current/installing-logstash.html\r\n  1. create a .curator directory and install a curator.yml as per\r\n$ cat .curator/curator.yml\r\n# Remember, leave a key empty if there is no value.  None will be a string,\r\n## not a Python \"NoneType\"\r\n\r\nclient:\r\n  hosts:\r\n    - localhost\r\n  port: 9200\r\n  url_prefix:\r\n  use_ssl: False\r\n  certificate:\r\n  client_cert:\r\n  client_key:\r\n  ssl_no_validate: False\r\n  http_auth:\r\n  timeout: 30\r\n  master_only: False\r\n\r\nlogging:\r\n  loglevel: DEBUG\r\n  logfile: /home/fred/logs\r\n  logformat: default\r\n  blacklist: ['elasticsearch', 'urllib3']\r\n\r\n  1. run show_indices\r\n$ curator_cli show_indices --verbose\r\n\r\n### Specifications\r\n\r\n  - Version: Elasticsearch 6.4 \r\n  - curator_cli --version\r\ncurator_cli, version 4.2.5\r\n  - Platform: Debian 9 Stretch\r\n\r\n\r\n\r\n## Context (Environment)\r\n<!--- How has this issue affected you? What are you trying to accomplish? -->\r\n<!--- Providing context helps us come up with a solution that is most useful in the real world -->\r\n\r\n<!--- Provide a general summary of the issue in the Title above -->\r\n\r\n## Detailed Description\r\n<!--- Provide a detailed description of the change or addition you are proposing -->\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1260", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1260/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1260/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1260/events", "html_url": "https://github.com/elastic/curator/issues/1260", "id": 353282869, "node_id": "MDU6SXNzdWUzNTMyODI4Njk=", "number": 1260, "title": "Reindex on ElasticSearch fails but Curator continues to execute script", "user": {"login": "wiesniak", "id": 4369754, "node_id": "MDQ6VXNlcjQzNjk3NTQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4369754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wiesniak", "html_url": "https://github.com/wiesniak", "followers_url": "https://api.github.com/users/wiesniak/followers", "following_url": "https://api.github.com/users/wiesniak/following{/other_user}", "gists_url": "https://api.github.com/users/wiesniak/gists{/gist_id}", "starred_url": "https://api.github.com/users/wiesniak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wiesniak/subscriptions", "organizations_url": "https://api.github.com/users/wiesniak/orgs", "repos_url": "https://api.github.com/users/wiesniak/repos", "events_url": "https://api.github.com/users/wiesniak/events{/privacy}", "received_events_url": "https://api.github.com/users/wiesniak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803247, "node_id": "MDU6TGFiZWw1MjgwMzI0Nw==", "url": "https://api.github.com/repos/elastic/curator/labels/bug", "name": "bug", "color": "ff0040", "default": true, "description": null}, {"id": 52803249, "node_id": "MDU6TGFiZWw1MjgwMzI0OQ==", "url": "https://api.github.com/repos/elastic/curator/labels/feature_request", "name": "feature_request", "color": "84b6eb", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-08-23T08:46:58Z", "updated_at": "2018-11-06T05:14:01Z", "closed_at": "2018-11-06T05:14:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Curator performs reindex and ES fails, but Curator continues execution.\r\n\r\n### Expected Behavior\r\nCurator should break process and exit with error when error occurs during reindex operation.\r\n\r\n### Actual Behavior\r\nCurator continues processing, executing next steps.\r\n\r\n### Steps to Reproduce the Problem\r\n1. Create test index:\r\n```\r\nactions:\r\n  1:\r\n    action: create_index\r\n    description: Create the test index\r\n    options:\r\n      name: test_index\r\n      extra_settings:\r\n        settings:\r\n          number_of_shards: 5\r\n          number_of_replicas: 1\r\n        mappings:\r\n          testindexmodel:\r\n            properties:\r\n              testId:\r\n                type: keyword\r\n              price:\r\n                index: false\r\n                type: float\r\n      disable_action: False\r\n```\r\n2. Load data\r\n```\r\nPUT test_index/testindexmodel/1\r\n{\r\n    \"testId\" : \"1\",\r\n    \"price\" : 123.4\r\n}\r\n\r\nPUT test_index/testindexmodel/2\r\n{\r\n    \"testId\" : \"2\",\r\n    \"price\" : 123.4,\r\n    \"count\" : 223\r\n}\r\nPUT test_index/testindexmodel/3\r\n{\r\n  \"testId\": \"3\",\r\n  \"price\": 245.7\r\n}\r\n```\r\n3. Execute upgrade script\r\n```\r\nactions:\r\n  1:\r\n    action: create_index\r\n    description: Create the test index\r\n    options:\r\n      name: test_index_new\r\n      extra_settings:\r\n        settings:\r\n          number_of_shards: 5\r\n          number_of_replicas: 1\r\n        mappings:\r\n          testindexmodel:\r\n            properties:\r\n              testId:\r\n                type: keyword\r\n              price:\r\n                index: false\r\n                type: float\r\n              count:\r\n                index: false\r\n                type: byte\r\n      disable_action: False\r\n  2:\r\n    description: Copy data to the new index\r\n    action: reindex\r\n    options:\r\n      disable_action: False\r\n      continue_if_exception: False\r\n      wait_interval: 9\r\n      max_wait: -1\r\n      request_body:\r\n        source:\r\n          index: test_index\r\n        dest:\r\n          index: test_index_new\r\n    filters:\r\n    - filtertype: none\r\n  3:\r\n    action: delete_indices\r\n    description: Delete obsolete index\r\n    options:\r\n      timeout_override: 300\r\n      continue_if_exception: False\r\n    filters:\r\n      - filtertype: pattern\r\n        kind: regex\r\n        value: '^test_index$'\r\n```\r\n4. Validate documents count - one should be missing.\r\n\r\n### Specifications\r\n\r\n  - Version: curator-5.5.4-amd64, ElasticSearch: 6.2.2\r\n  - Platform: Curator was run on Windows 10 Pro, 10.0.17134, ES is deployed on Debian 8\r\n\r\n\r\n## Context (Environment)\r\nTrying to update index with new fields.\r\n\r\n## Detailed Description\r\nI have an index with specified structure and filled with about 300k documents. During development, index was filled with about 10 documents that had one property not presented in index mapping (it had values like 150, 225, 250).\r\nThen I created script that \"officially\" added that property (of byte type) into mapping. Script created new index with new mapping, copied documents and deleted old index (thats a simplified scenario, but it does not matter here). Script executed successfully, but then I noticed that new index lacks a lot of documents.\r\nWhen I rerun that script with DEBUG logging level I spotted that during reindex error occured, but Curator continued with next steps. Error details:\r\n```\r\n2018-08-23 09:37:27,702 INFO               elasticsearch    log_request_success:83   GET [ES URL]/_tasks/8vBUrfIaQKifX0tqTUUbzg%3A1867459 [status:200 request:0.143s]\r\n2018-08-23 09:37:27,702 DEBUG              elasticsearch    log_request_success:85   > None\r\n2018-08-23 09:37:27,702 DEBUG              elasticsearch    log_request_success:86   < {\"completed\":true,\"task\":{\"node\":\"8vBUrfIaQKifX0tqTUUbzg\",\"id\":1867459,\"type\":\"transport\",\"action\":\"indices:data/write/reindex\",\"status\":{\r\n  \"total\" : 3,\r\n  \"updated\" : 0,\r\n  \"created\" : 2,\r\n  \"deleted\" : 0,\r\n  \"batches\" : 1,\r\n  \"version_conflicts\" : 0,\r\n  \"noops\" : 0,\r\n  \"retries\" : {\r\n    \"bulk\" : 0,\r\n    \"search\" : 0\r\n  },\r\n  \"throttled_millis\" : 0,\r\n  \"requests_per_second\" : -1.0,\r\n  \"throttled_until_millis\" : 0\r\n},\"description\":\"reindex from [test_index] to [test_index_new]\",\"start_time_in_millis\":1535009846497,\"running_time_in_nanos\":70501857,\"cancellable\":true,\"headers\":{}},\"response\":{\r\n  \"took\" : 70,\r\n  \"timed_out\" : false,\r\n  \"total\" : 3,\r\n  \"updated\" : 0,\r\n  \"created\" : 2,\r\n  \"deleted\" : 0,\r\n  \"batches\" : 1,\r\n  \"version_conflicts\" : 0,\r\n  \"noops\" : 0,\r\n  \"retries\" : {\r\n    \"bulk\" : 0,\r\n    \"search\" : 0\r\n  },\r\n  \"throttled_millis\" : 0,\r\n  \"requests_per_second\" : -1.0,\r\n  \"throttled_until_millis\" : 0,\r\n  \"failures\" : [\r\n    {\r\n      \"index\" : \"test_index_new\",\r\n      \"type\" : \"testindexmodel\",\r\n      \"id\" : \"2\",\r\n      \"cause\" : {\r\n        \"type\" : \"mapper_parsing_exception\",\r\n        \"reason\" : \"failed to parse [count]\",\r\n        \"caused_by\" : {\r\n          \"type\" : \"illegal_argument_exception\",\r\n          \"reason\" : \"Value [223] is out of range for a byte\"\r\n        }\r\n      },\r\n      \"status\" : 400\r\n    }\r\n  ]\r\n}}\r\n2018-08-23 09:37:27,703 DEBUG              curator.utils             task_check:1645 running_time_in_nanos = 0.070501857\r\n2018-08-23 09:37:27,703 INFO               curator.utils             task_check:1653 Task \"reindex from [test_index] to [test_index_new]\" completed at 2018-08-23T09:37:26Z.\r\n2018-08-23 09:37:27,703 DEBUG              curator.utils            wait_for_it:1754 Response: True\r\n2018-08-23 09:37:27,704 DEBUG              curator.utils            wait_for_it:1759 Action \"reindex\" finished executing (may or may not have been successful)\r\n2018-08-23 09:37:27,704 DEBUG              curator.utils            wait_for_it:1777 Result: True\r\n```\r\nI don't expect ES to succeed with faulty data, but I'd be happier if Curator could fail here instead of dropping original index as I specified in my upgrade script.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1258", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1258/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1258/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1258/events", "html_url": "https://github.com/elastic/curator/issues/1258", "id": 350941094, "node_id": "MDU6SXNzdWUzNTA5NDEwOTQ=", "number": 1258, "title": "Support wait_for_completion on forcemerge action?", "user": {"login": "rolodato", "id": 829698, "node_id": "MDQ6VXNlcjgyOTY5OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/829698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rolodato", "html_url": "https://github.com/rolodato", "followers_url": "https://api.github.com/users/rolodato/followers", "following_url": "https://api.github.com/users/rolodato/following{/other_user}", "gists_url": "https://api.github.com/users/rolodato/gists{/gist_id}", "starred_url": "https://api.github.com/users/rolodato/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rolodato/subscriptions", "organizations_url": "https://api.github.com/users/rolodato/orgs", "repos_url": "https://api.github.com/users/rolodato/repos", "events_url": "https://api.github.com/users/rolodato/events{/privacy}", "received_events_url": "https://api.github.com/users/rolodato/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-08-15T19:46:27Z", "updated_at": "2018-08-17T14:53:48Z", "closed_at": "2018-08-17T14:53:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm running curator on AWS Lambda and it works great. I'd like to run `forcemerge` periodically but this operation can take a really long time to finish on large indices. Setting an absurdly high value won't work because AWS-managed Elasticsearch has a hard timeout on how long requests can run, and even if this were possible, Lambda hard-limits requests to 5 minute durations.\r\n\r\nWould it make sense to support `wait_for_completion` on `forcemerge` to improve this situation? Thanks!", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1257", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1257/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1257/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1257/events", "html_url": "https://github.com/elastic/curator/issues/1257", "id": 350378951, "node_id": "MDU6SXNzdWUzNTAzNzg5NTE=", "number": 1257, "title": "Action: index_settings and option: ignore_unavailable: True (doesn't work)", "user": {"login": "srolskyi", "id": 31102861, "node_id": "MDQ6VXNlcjMxMTAyODYx", "avatar_url": "https://avatars1.githubusercontent.com/u/31102861?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srolskyi", "html_url": "https://github.com/srolskyi", "followers_url": "https://api.github.com/users/srolskyi/followers", "following_url": "https://api.github.com/users/srolskyi/following{/other_user}", "gists_url": "https://api.github.com/users/srolskyi/gists{/gist_id}", "starred_url": "https://api.github.com/users/srolskyi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srolskyi/subscriptions", "organizations_url": "https://api.github.com/users/srolskyi/orgs", "repos_url": "https://api.github.com/users/srolskyi/repos", "events_url": "https://api.github.com/users/srolskyi/events{/privacy}", "received_events_url": "https://api.github.com/users/srolskyi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-14T10:57:46Z", "updated_at": "2018-08-14T15:14:13Z", "closed_at": "2018-08-14T15:14:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "My action.yml:\r\n\r\n```\r\n    action: index_settings\r\n    description: >-\r\n      Set my-index indices older than 2 month to be read only (block writes)\r\n    options:\r\n      disable_action: False\r\n      index_settings:\r\n        index:\r\n          blocks:\r\n            write: True\r\n      ignore_unavailable: True\r\n      preserve_existing: False\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: 'my-index\\.'\r\n      exclude:\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y-%m'\r\n      unit: months\r\n      unit_count: 2\r\n```\r\nSo, option **ignore_unavailable: True** doesn't work, because I really don't have index: my-index.2018-06\r\nI read the doc:\r\n\r\n> When the ignore_unavailable option is **False** and an index is missing, or if the request is to apply a static setting and the index is opened, the index setting request will fail. The ignore_unavailable option allows these indices to be skipped, when set to **True**.\r\n\r\nIf I understood correctly it's mean that if index doesn't exist (missing) action will be skipped. But I got an error:\r\n```\r\n{\"@timestamp\": \"2018-08-14T10:38:32.326Z\", \"function\": \"run\", \"linenum\": 146, \"loglevel\": \"INFO\", \"message\": \"Preparing Action ID: 402, \\\"index_settings\\\"\", \"name\": \"curator.cli\"}\r\n{\"@timestamp\": \"2018-08-14T10:38:32.341Z\", \"function\": \"run\", \"linenum\": 167, \"loglevel\": \"INFO\", \"message\": \"Trying Action ID: 402, \\\"index_settings\\\": Set my-index indices older than 2 month to be read only (block writes)\", \"name\": \"curator.cli\"}\r\n{\"@timestamp\": \"2018-08-14T10:38:32.403Z\", \"function\": \"run\", \"linenum\": 180, \"loglevel\": \"ERROR\", \"message\": \"Unable to complete action \\\"index_settings\\\".  No actionable items in list: <class 'curator.exceptions.NoIndices'>\", \"name\": \"curator.cli\"}\r\n```\r\nand the next action was skipped. Maybe am I missing something? I want next rule: if an index doesn't exist, skipped this actions, and try to next action.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1255", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1255/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1255/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1255/events", "html_url": "https://github.com/elastic/curator/issues/1255", "id": 348889800, "node_id": "MDU6SXNzdWUzNDg4ODk4MDA=", "number": 1255, "title": "Curator finding indicies that it should have already deleted", "user": {"login": "jfreedman0", "id": 9111838, "node_id": "MDQ6VXNlcjkxMTE4Mzg=", "avatar_url": "https://avatars1.githubusercontent.com/u/9111838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jfreedman0", "html_url": "https://github.com/jfreedman0", "followers_url": "https://api.github.com/users/jfreedman0/followers", "following_url": "https://api.github.com/users/jfreedman0/following{/other_user}", "gists_url": "https://api.github.com/users/jfreedman0/gists{/gist_id}", "starred_url": "https://api.github.com/users/jfreedman0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jfreedman0/subscriptions", "organizations_url": "https://api.github.com/users/jfreedman0/orgs", "repos_url": "https://api.github.com/users/jfreedman0/repos", "events_url": "https://api.github.com/users/jfreedman0/events{/privacy}", "received_events_url": "https://api.github.com/users/jfreedman0/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-08-08T20:59:11Z", "updated_at": "2018-08-09T13:09:47Z", "closed_at": "2018-08-09T13:09:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "We have curator set up to delete logstash indices older than 3 days. It's been running daily as a Kubernetes cron job for around 3 weeks. I believe it's working since we're not seeing logs older than 3 days in Kibana, however the curator logs consistently show that it's successfully deleting indicies that are around a month old! I've been trying to dig into the source to determine what might be causing this, but haven't found an explanation yet.\r\n\r\n### Expected Behavior\r\nCurator logs should show that it's deleted indices from the past 3 days.\r\n\r\n### Actual Behavior\r\nCurator logs show that it's deleted indices from more than 3 days ago, even though it successfully ran the night before. I expected to see it delete only indices from 8/4-8/6 when run on 8/7, however this is the log from the run on 8/7:\r\n\r\n```\r\n2018-08-08 01:01:09,106 INFO      Deleting selected indices: [u'logstash-2018.07.30', u'logstash-2018.07.31', u'logstash-2018.07.03', u'logstash-2018.07.02', u'logstash-2018.07.05', u'logstash-2018.07.04', u'logstash-2018.07.07', u'logstash-2018.07.06', u'logstash-2018.07.09', u'logstash-2018.07.08', u'logstash-2018.08.04', u'logstash-2018.08.05', u'logstash-2018.08.01', u'logstash-2018.08.02', u'logstash-2018.08.03', u'logstash-2018.07.29', u'logstash-2018.07.28', u'logstash-2018.07.27', u'logstash-2018.07.26', u'logstash-2018.07.25', u'logstash-2018.07.24', u'logstash-2018.07.23', u'logstash-2018.07.22', u'logstash-2018.07.21', u'logstash-2018.07.20', u'logstash-2018.07.16', u'logstash-2018.07.17', u'logstash-2018.07.14', u'logstash-2018.07.15', u'logstash-2018.07.12', u'logstash-2018.07.13', u'logstash-2018.07.10', u'logstash-2018.07.11', u'logstash-2018.07.18', u'logstash-2018.07.19']\r\n2018-08-08 01:01:09,106 INFO      ---deleting index logstash-2018.07.30\r\n2018-08-08 01:01:09,106 INFO      ---deleting index logstash-2018.07.31\r\n2018-08-08 01:01:09,106 INFO      ---deleting index logstash-2018.07.03\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.02\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.05\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.04\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.07\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.06\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.09\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.08\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.08.04\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.08.05\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.08.01\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.08.02\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.08.03\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.29\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.28\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.27\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.26\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.25\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.24\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.23\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.22\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.21\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.20\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.16\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.17\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.14\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.15\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.12\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.13\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.10\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.11\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.18\r\n2018-08-08 01:01:09,107 INFO      ---deleting index logstash-2018.07.19\r\n```\r\n\r\n### Steps to Reproduce the Problem\r\n```\r\nactions:\r\n  1:\r\n    action: delete_indices\r\n    description: >-\r\n      Delete indices older than 3 days (based on index name), for logstash-\r\n      prefixed indices. Ignore the error if the filter does not result in an\r\n      actionable list of indices (ignore_empty_list) and exit cleanly.\r\n    options:\r\n      ignore_empty_list: True\r\n      disable_action: False\r\n    filters:\r\n    - filtertype: pattern\r\n      kind: prefix\r\n      value: logstash-\r\n    - filtertype: age\r\n      source: name\r\n      direction: older\r\n      timestring: '%Y.%m.%d'\r\n      unit: days\r\n      unit_count: 3\r\n```\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1254", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1254/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1254/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1254/events", "html_url": "https://github.com/elastic/curator/issues/1254", "id": 348498412, "node_id": "MDU6SXNzdWUzNDg0OTg0MTI=", "number": 1254, "title": "Runtime in log output", "user": {"login": "danielkasen", "id": 31549908, "node_id": "MDQ6VXNlcjMxNTQ5OTA4", "avatar_url": "https://avatars1.githubusercontent.com/u/31549908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielkasen", "html_url": "https://github.com/danielkasen", "followers_url": "https://api.github.com/users/danielkasen/followers", "following_url": "https://api.github.com/users/danielkasen/following{/other_user}", "gists_url": "https://api.github.com/users/danielkasen/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielkasen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielkasen/subscriptions", "organizations_url": "https://api.github.com/users/danielkasen/orgs", "repos_url": "https://api.github.com/users/danielkasen/repos", "events_url": "https://api.github.com/users/danielkasen/events{/privacy}", "received_events_url": "https://api.github.com/users/danielkasen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-07T21:43:59Z", "updated_at": "2018-08-07T21:52:38Z", "closed_at": "2018-08-07T21:52:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Not sure if this is possible, but is there a way to add the runtime to the output in the log? It would be helpful if I could log the time that a forcemerge action takes (assuming I'm waiting for completion).", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1253", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1253/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1253/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1253/events", "html_url": "https://github.com/elastic/curator/issues/1253", "id": 348424848, "node_id": "MDU6SXNzdWUzNDg0MjQ4NDg=", "number": 1253, "title": "Grooming not deleting data with timestring '%Y.%m.%d.%H'", "user": {"login": "bamb00", "id": 486660, "node_id": "MDQ6VXNlcjQ4NjY2MA==", "avatar_url": "https://avatars1.githubusercontent.com/u/486660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bamb00", "html_url": "https://github.com/bamb00", "followers_url": "https://api.github.com/users/bamb00/followers", "following_url": "https://api.github.com/users/bamb00/following{/other_user}", "gists_url": "https://api.github.com/users/bamb00/gists{/gist_id}", "starred_url": "https://api.github.com/users/bamb00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bamb00/subscriptions", "organizations_url": "https://api.github.com/users/bamb00/orgs", "repos_url": "https://api.github.com/users/bamb00/repos", "events_url": "https://api.github.com/users/bamb00/events{/privacy}", "received_events_url": "https://api.github.com/users/bamb00/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 161908979, "node_id": "MDU6TGFiZWwxNjE5MDg5Nzk=", "url": "https://api.github.com/repos/elastic/curator/labels/cannot_replicate", "name": "cannot_replicate", "color": "fbca04", "default": false, "description": null}, {"id": 1017597370, "node_id": "MDU6TGFiZWwxMDE3NTk3Mzcw", "url": "https://api.github.com/repos/elastic/curator/labels/configuration", "name": "configuration", "color": "98e244", "default": false, "description": "Configuration issue"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2018-08-07T17:53:49Z", "updated_at": "2018-08-17T01:26:26Z", "closed_at": "2018-08-17T01:26:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "## For usage questions and help\r\nPlease create a topic at https://discuss.elastic.co/c/elasticsearch\r\n\r\nPerhaps a topic there already has an answer for you!\r\n\r\n## To submit a bug or report an issue\r\nGrooming is not deleting data correctly with timestring set at %Y.%m.%d.%H\r\n\r\n### Expected Behavior\r\nAfter an hours has passed the grooming logs show deleting empty indices \r\n\r\n### Actual Behavior\r\n\r\n       2018-08-07 17:43:00,787 INFO      Preparing Action ID: 1, \"delete_indices\"\r\n       2018-08-07 17:43:00,807 INFO      Trying Action ID: 1, \"delete_indices\": Clean up ES by deleting \r\n       logstash indices\r\n       2018-08-07 17:43:01,009 INFO      Skipping action \"delete_indices\" due to empty list: &lt;class \r\n       'curator.exceptions.NoIndices'&gt;\r\n       2018-08-07 17:43:01,010 INFO      Action ID: 1, \"delete_indices\" completed.\r\n       2018-08-07 17:43:01,010 INFO      Action ID: 2: \"delete_indices\" not performed because \r\n       \"disable_action\" is set to True\r\n       2018-08-07 17:43:01,010 INFO      Job completed.\r\n\r\n### Steps to Reproduce the Problem\r\n\r\n      1:\r\n        action: delete_indices\r\n        description: \"Clean up ES by deleting logstash indices\"\r\n        options:\r\n          timeout_override:\r\n          ignore_empty_list: True\r\n          continue_if_exception: False\r\n          disable_action: False\r\n        filters:\r\n        - filtertype: age\r\n          source: name\r\n          direction: older\r\n          timestring: '%Y.%m.%d.%H'\r\n          unit: hours\r\n          unit_count: 1\r\n          field:\r\n          stats_result:\r\n          epoch:\r\n          exclude: False\r\n        - filtertype: space\r\n          disk_space: .01\r\n          use_age: True\r\n          source: creation_date\r\n        - filtertype: pattern\r\n          kind: prefix\r\n          value: logstash-\r\n        - filtertype: closed\r\n          exclude: true\r\n\r\n### Specifications\r\n\r\n  - Version: 5.5\r\n  - Platform: CentOS 7.5\r\n  - Subsystem:", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1252", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1252/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1252/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1252/events", "html_url": "https://github.com/elastic/curator/issues/1252", "id": 348257727, "node_id": "MDU6SXNzdWUzNDgyNTc3Mjc=", "number": 1252, "title": "delete documents in indices which are older than 1day", "user": {"login": "manojchandrabss", "id": 11938466, "node_id": "MDQ6VXNlcjExOTM4NDY2", "avatar_url": "https://avatars3.githubusercontent.com/u/11938466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/manojchandrabss", "html_url": "https://github.com/manojchandrabss", "followers_url": "https://api.github.com/users/manojchandrabss/followers", "following_url": "https://api.github.com/users/manojchandrabss/following{/other_user}", "gists_url": "https://api.github.com/users/manojchandrabss/gists{/gist_id}", "starred_url": "https://api.github.com/users/manojchandrabss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/manojchandrabss/subscriptions", "organizations_url": "https://api.github.com/users/manojchandrabss/orgs", "repos_url": "https://api.github.com/users/manojchandrabss/repos", "events_url": "https://api.github.com/users/manojchandrabss/events{/privacy}", "received_events_url": "https://api.github.com/users/manojchandrabss/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-07T10:18:09Z", "updated_at": "2018-08-07T14:57:12Z", "closed_at": "2018-08-07T14:57:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Team,\r\n\r\ni want my python 3 script to delete documents in indices which are older than 1day. But my script is deleting complete indices.\r\n\r\npyth version: 3.6 - > lambda function\r\nAWS ES -> 6.2\r\n\r\nindex_list = curator.IndexList(es)\r\n\r\n# Filters by age, anything with a time stamp older than 30 days in the index name.\r\n#index_list.filter_by_age(source='name', direction='older', timestring='%Y.%m.%d', unit='minutes', unit_count=30)\r\n\r\n# Filters by naming prefix.\r\n# index_list.filter_by_regex(kind='prefix', value='my-logs-2017')\r\n\r\n# Filters by age, anything created more than one month ago.\r\n#index_list.filter_by_age(source='creation_date', direction='older', unit='minutes', unit_count=7)\r\n   # Delete all indices in the filtered list.\r\ncurator.DeleteIndices(index_list).do_action()\r\n\r\n\r\nI want to delete documents in Elasticsearch indices which are 1 day old", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1251", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1251/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1251/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1251/events", "html_url": "https://github.com/elastic/curator/issues/1251", "id": 347963397, "node_id": "MDU6SXNzdWUzNDc5NjMzOTc=", "number": 1251, "title": "Filter by count excludes despite exclude=False when at least one index does not match the pattern", "user": {"login": "epellizzer", "id": 1165804, "node_id": "MDQ6VXNlcjExNjU4MDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1165804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/epellizzer", "html_url": "https://github.com/epellizzer", "followers_url": "https://api.github.com/users/epellizzer/followers", "following_url": "https://api.github.com/users/epellizzer/following{/other_user}", "gists_url": "https://api.github.com/users/epellizzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/epellizzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/epellizzer/subscriptions", "organizations_url": "https://api.github.com/users/epellizzer/orgs", "repos_url": "https://api.github.com/users/epellizzer/repos", "events_url": "https://api.github.com/users/epellizzer/events{/privacy}", "received_events_url": "https://api.github.com/users/epellizzer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-08-06T15:06:46Z", "updated_at": "2018-08-07T19:52:03Z", "closed_at": "2018-08-07T19:52:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI'm desperately trying to explicitly select the last index of a sequence (`index-000001`, `index-000002`, ...), and the best filter for that is `count`. However, the 'inclusion' behavior that I need here does not work.\r\n\r\nAfter digging into the code, I realized the following line in the `filter_by_count` method, which is executed when at least one index does not match the provided pattern (which is almost always the case), overwrites the parameter `exclude` and the 'include' behavior is lost.\r\n\r\nhttps://github.com/elastic/curator/blob/5fdcc337625c6a7e9aeeb90de625b54b92cbbcb7/curator/indexlist.py#L943\r\n\r\nDo you see any workaround I could use for my situation? I'd like to avoid selecting by age, which is kind of uncertain depending on when the action will be executed.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1250", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1250/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1250/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1250/events", "html_url": "https://github.com/elastic/curator/issues/1250", "id": 346575554, "node_id": "MDU6SXNzdWUzNDY1NzU1NTQ=", "number": 1250, "title": "Output log segmentation support", "user": {"login": "Gourds", "id": 13073660, "node_id": "MDQ6VXNlcjEzMDczNjYw", "avatar_url": "https://avatars3.githubusercontent.com/u/13073660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gourds", "html_url": "https://github.com/Gourds", "followers_url": "https://api.github.com/users/Gourds/followers", "following_url": "https://api.github.com/users/Gourds/following{/other_user}", "gists_url": "https://api.github.com/users/Gourds/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gourds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gourds/subscriptions", "organizations_url": "https://api.github.com/users/Gourds/orgs", "repos_url": "https://api.github.com/users/Gourds/repos", "events_url": "https://api.github.com/users/Gourds/events{/privacy}", "received_events_url": "https://api.github.com/users/Gourds/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-08-01T12:20:03Z", "updated_at": "2018-08-20T01:55:54Z", "closed_at": "2018-08-20T01:55:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Whether the log output can add a time-division function.like this\r\n```xml\r\nlogging:\r\n  loglevel: INFO\r\n  logfile: /data/curator-log/curator-%Y-%m-%d.log\r\n  logformat: default\r\n  blacklist: ['elasticsearch', 'urllib3']\r\n```\r\n\r\n\r\n### My Env\r\n\r\n  - System: docker\r\n  - Version: v5.5.4\r\n\r\n\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1249", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1249/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1249/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1249/events", "html_url": "https://github.com/elastic/curator/issues/1249", "id": 346113906, "node_id": "MDU6SXNzdWUzNDYxMTM5MDY=", "number": 1249, "title": "exit code 0 (success) despite schema error", "user": {"login": "passing", "id": 8142186, "node_id": "MDQ6VXNlcjgxNDIxODY=", "avatar_url": "https://avatars0.githubusercontent.com/u/8142186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/passing", "html_url": "https://github.com/passing", "followers_url": "https://api.github.com/users/passing/followers", "following_url": "https://api.github.com/users/passing/following{/other_user}", "gists_url": "https://api.github.com/users/passing/gists{/gist_id}", "starred_url": "https://api.github.com/users/passing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/passing/subscriptions", "organizations_url": "https://api.github.com/users/passing/orgs", "repos_url": "https://api.github.com/users/passing/repos", "events_url": "https://api.github.com/users/passing/events{/privacy}", "received_events_url": "https://api.github.com/users/passing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803248, "node_id": "MDU6TGFiZWw1MjgwMzI0OA==", "url": "https://api.github.com/repos/elastic/curator/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-31T09:48:44Z", "updated_at": "2018-08-29T12:56:34Z", "closed_at": "2018-08-29T12:56:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "using curator version 5.5.4, we had rolled out a configuration by accident with the following content:\r\n``` \r\n  1-logstash-access-misc-1:\r\n    action: rollover\r\n    description: rollover index logstash-access-misc\r\n    options:\r\n      name: logstash-access-misc-write\r\n      conditions:\r\n        max_docs: 10gb\r\n      continue_if_exception: True\r\n      extra_settings:\r\n        index.number_of_shards: 1\r\n```\r\n\r\nsince this is wrong (max_docs needs to be changed to max_size), curator exits without doing any action:\r\n```\r\n{\"@timestamp\": \"2018-07-31T09:44:26.142Z\", \"function\": \"result\", \"linenum\": 65, \"loglevel\": \"ERROR\", \"message\": \"Schema error: expected int for dictionary value @ data['conditions']['max_docs']\", \"name\": \"curator.validators.SchemaCheck\"}\r\n```\r\n\r\nunfortunately, curator doesn't exit with exit code 1 as described in the documentation:\r\nhttps://www.elastic.co/guide/en/elasticsearch/client/curator/5.5/exit-codes.html\r\nbecause of this, the test (dry-run) done in our deployment pipeline did not block the release.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1248", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1248/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1248/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1248/events", "html_url": "https://github.com/elastic/curator/issues/1248", "id": 343976553, "node_id": "MDU6SXNzdWUzNDM5NzY1NTM=", "number": 1248, "title": "Curator not closing other indices if one of them, in the action, fails to be closed", "user": {"login": "Erni", "id": 725315, "node_id": "MDQ6VXNlcjcyNTMxNQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/725315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Erni", "html_url": "https://github.com/Erni", "followers_url": "https://api.github.com/users/Erni/followers", "following_url": "https://api.github.com/users/Erni/following{/other_user}", "gists_url": "https://api.github.com/users/Erni/gists{/gist_id}", "starred_url": "https://api.github.com/users/Erni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Erni/subscriptions", "organizations_url": "https://api.github.com/users/Erni/orgs", "repos_url": "https://api.github.com/users/Erni/repos", "events_url": "https://api.github.com/users/Erni/events{/privacy}", "received_events_url": "https://api.github.com/users/Erni/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 52803249, "node_id": "MDU6TGFiZWw1MjgwMzI0OQ==", "url": "https://api.github.com/repos/elastic/curator/labels/feature_request", "name": "feature_request", "color": "84b6eb", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-07-24T10:25:56Z", "updated_at": "2019-08-27T19:59:10Z", "closed_at": "2019-08-27T19:59:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Version**: 5.5.2\r\n\r\nCurator tries to _flush/sync the indexes before closing them, however if one of the indices in an `action` fails, the whole `action` fails and the other indexes are not closed.\r\n\r\nPlease see [this code block](https://github.com/elastic/curator/blob/v5.5.4/curator/actions.py#L292-L312) from the Close action:\r\n```\r\n        try:\r\n            index_lists = utils.chunk_index_list(self.index_list.indices)\r\n            for l in index_lists:\r\n                if self.delete_aliases:\r\n                    self.loggit.info(\r\n                        'Deleting aliases from indices before closing.')\r\n                    self.loggit.debug('Deleting aliases from: {0}'.format(l))\r\n                    try:\r\n                        self.client.indices.delete_alias(\r\n                            index=utils.to_csv(l), name='_all')\r\n                    except Exception as e:\r\n                        self.loggit.warn(\r\n                            'Some indices may not have had aliases.  Exception:'\r\n                            ' {0}'.format(e)\r\n                        )\r\n                self.client.indices.flush_synced(\r\n                    index=utils.to_csv(l), ignore_unavailable=True)\r\n                self.client.indices.close(\r\n                    index=utils.to_csv(l), ignore_unavailable=True)\r\n        except Exception as e:\r\n            utils.report_failure(e)\r\n```\r\nElasticsearch has a 4K character limit for a URL request. Since API calls are URL requests, this translates into a limit of 4K long URLs like `CLOSE index1,index2,index3,index4...indexN`. Curator sends in batches allowing up to 3K for comma separated indices. This is the `utils.chunk_index_list` part of the code, which yields a list of lists (or an array of arrays, if you prefer) of indices which will not exceed this limit. Curator then iterates over each of these lists in the limited batches.\r\n\r\nThe close action sends a batch of index names to the synced flush API call (`self.client.indices.flush_synced`), then immediately after that sends the same batch to the close API call (`self.client.indices.close`). There is no sequential behaviour (synced flush index1, close index1; synced flush index2, close index2; etc). An entire batch goes in, and currently, if a single index comes back as not successfully sync-flushed, it will not even attempt the close step at all because the exception occurs within the same `try` block.\r\n\r\nBecause of this, the feature request will add a flag, which will necessitate another `try` block around the synced flush code. If the flag is set to ignore failures, it will simply continue with the close statement. The default behaviour will remain, though it will probably log an error that the synced flush failed, with the results of that failure on its own, rather than as part of the final exception block.", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1246", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1246/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1246/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1246/events", "html_url": "https://github.com/elastic/curator/issues/1246", "id": 342738308, "node_id": "MDU6SXNzdWUzNDI3MzgzMDg=", "number": 1246, "title": "Curator 5.5.4 not working for AWS Elasticsearch Service 5.3 and 5.5", "user": {"login": "jpdoria", "id": 22461427, "node_id": "MDQ6VXNlcjIyNDYxNDI3", "avatar_url": "https://avatars0.githubusercontent.com/u/22461427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jpdoria", "html_url": "https://github.com/jpdoria", "followers_url": "https://api.github.com/users/jpdoria/followers", "following_url": "https://api.github.com/users/jpdoria/following{/other_user}", "gists_url": "https://api.github.com/users/jpdoria/gists{/gist_id}", "starred_url": "https://api.github.com/users/jpdoria/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jpdoria/subscriptions", "organizations_url": "https://api.github.com/users/jpdoria/orgs", "repos_url": "https://api.github.com/users/jpdoria/repos", "events_url": "https://api.github.com/users/jpdoria/events{/privacy}", "received_events_url": "https://api.github.com/users/jpdoria/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 287489550, "node_id": "MDU6TGFiZWwyODc0ODk1NTA=", "url": "https://api.github.com/repos/elastic/curator/labels/help%20wanted", "name": "help wanted", "color": "21a86b", "default": true, "description": ""}, {"id": 491851874, "node_id": "MDU6TGFiZWw0OTE4NTE4NzQ=", "url": "https://api.github.com/repos/elastic/curator/labels/more_info_required", "name": "more_info_required", "color": "00BFFF", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-19T13:54:16Z", "updated_at": "2018-11-05T11:36:45Z", "closed_at": "2018-11-05T11:36:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "`show_indices` doesn't work properly even though I was able to list using `_cat/indices` API.\r\n\r\n### Expected Behavior\r\n`show_indices` should display the list of indices from AWS Elasticsearch Service.\r\n\r\n### Actual Behavior\r\nNo output returned. Exit code is 0. Nothing happened.\r\n\r\n### Steps to Reproduce the Problem\r\n  1. Install `curator` using the steps from this [documentation](https://www.elastic.co/guide/en/elasticsearch/client/curator/current/yum-repository.html)\r\n  1. Run `curator_cli --host <AWS_ES_DOMAIN> --port 80 show_indices --loglevel INFO`\r\n  1. Run `curator_cli --host <AWS_ES_DOMAIN> --port 443 show_indices --loglevel INFO`\r\n\r\n### Specifications\r\n\r\n  - AWS Elasticsearch Service 5.3 and 5.5\r\n  - Curator 5.5.4\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1245", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1245/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1245/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1245/events", "html_url": "https://github.com/elastic/curator/issues/1245", "id": 342700438, "node_id": "MDU6SXNzdWUzNDI3MDA0Mzg=", "number": 1245, "title": "Failed to complete action: forcemerge.  <class 'curator.exceptions.NoIndices'>: index_list object is empty", "user": {"login": "krishnabigdata", "id": 6593263, "node_id": "MDQ6VXNlcjY1OTMyNjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/6593263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/krishnabigdata", "html_url": "https://github.com/krishnabigdata", "followers_url": "https://api.github.com/users/krishnabigdata/followers", "following_url": "https://api.github.com/users/krishnabigdata/following{/other_user}", "gists_url": "https://api.github.com/users/krishnabigdata/gists{/gist_id}", "starred_url": "https://api.github.com/users/krishnabigdata/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/krishnabigdata/subscriptions", "organizations_url": "https://api.github.com/users/krishnabigdata/orgs", "repos_url": "https://api.github.com/users/krishnabigdata/repos", "events_url": "https://api.github.com/users/krishnabigdata/events{/privacy}", "received_events_url": "https://api.github.com/users/krishnabigdata/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-19T12:06:16Z", "updated_at": "2018-09-11T16:37:31Z", "closed_at": "2018-09-11T16:37:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here is my command to force merge the index by hourly.\r\n\r\n`curator_cli --host $elasticsearch_host--timeout 21600 forcemerge --ignore_empty_list --delay 10 --max_num_segments 1 --filter_list '[{\"filtertype\":\"age\",\"source\":\"name\",\"timestring\":\"%Y.%m.%d.%H\",\"direction\":\"older\",\"unit\":\"hours\",\"unit_count\":1}]'`\r\n\r\neven though I use **_--ignore_empty_list_** option still I receive the below error if there is no index exist for the hour.\r\n\r\n_**CRITICAL  Failed to complete action: forcemerge.  <class 'curator.exceptions.NoIndices'>: index_list object is empty**_\r\n\r\n\r\n**Versions:**\r\nCurator: **5.5.4**\r\nElasticsearch: **6.2.4**\r\n\r\nPlease let me know if you need any more details\r\n", "performed_via_github_app": null, "score": 1.0}, {"url": "https://api.github.com/repos/elastic/curator/issues/1244", "repository_url": "https://api.github.com/repos/elastic/curator", "labels_url": "https://api.github.com/repos/elastic/curator/issues/1244/labels{/name}", "comments_url": "https://api.github.com/repos/elastic/curator/issues/1244/comments", "events_url": "https://api.github.com/repos/elastic/curator/issues/1244/events", "html_url": "https://github.com/elastic/curator/issues/1244", "id": 340515212, "node_id": "MDU6SXNzdWUzNDA1MTUyMTI=", "number": 1244, "title": "Restore action stuck during startup", "user": {"login": "guidoilbaldo", "id": 6077718, "node_id": "MDQ6VXNlcjYwNzc3MTg=", "avatar_url": "https://avatars2.githubusercontent.com/u/6077718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guidoilbaldo", "html_url": "https://github.com/guidoilbaldo", "followers_url": "https://api.github.com/users/guidoilbaldo/followers", "following_url": "https://api.github.com/users/guidoilbaldo/following{/other_user}", "gists_url": "https://api.github.com/users/guidoilbaldo/gists{/gist_id}", "starred_url": "https://api.github.com/users/guidoilbaldo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guidoilbaldo/subscriptions", "organizations_url": "https://api.github.com/users/guidoilbaldo/orgs", "repos_url": "https://api.github.com/users/guidoilbaldo/repos", "events_url": "https://api.github.com/users/guidoilbaldo/events{/privacy}", "received_events_url": "https://api.github.com/users/guidoilbaldo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 457012526, "node_id": "MDU6TGFiZWw0NTcwMTI1MjY=", "url": "https://api.github.com/repos/elastic/curator/labels/Issue%20Resolved", "name": "Issue Resolved", "color": "0FFF08", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-12T07:11:52Z", "updated_at": "2018-07-17T17:59:57Z", "closed_at": "2018-07-17T17:59:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Description\r\nWe're trying to restore snapshots taken from a on-premise ES cluster to a cluster running on EC2 instances. To store snapshots, we use a NFS share distributed between the 2 different clusters.\r\n\r\n### Expected Behavior\r\nCurator should (or at least try to) restore the snapshots we stored in the NFS repository, but seems stuck during startup.\r\n\r\n### Actual Behavior\r\nWe manually launch curator on ES master node (it's currently installed there) with the following command:\r\n`curator --config /etc/elasticsearch/curator/curator.yaml /etc/elasticsearch/curator/restore.yml`\r\n\r\nOn our logs, we can only see the following:\r\n\r\n`2018-07-12 06:52:12,854 DEBUG                curator.cli                    run:108  Client and logging options validated.\r\n2018-07-12 06:52:12,854 DEBUG                curator.cli                    run:112  default_timeout = 30\r\n2018-07-12 06:52:12,854 DEBUG                curator.cli                    run:116  action_file: /etc/elasticsearch/curator/restore.yml\r\n2018-07-12 06:52:12,857 DEBUG                curator.cli                    run:118  action_config: {'actions': {1: {'action': 'restore', 'description': 'Restore all indices related to review database.', 'options': {'repository': 'betasearch_backup', 'name': 'backup_bs_notices_20180710234204', 'indices': ['notices'], 'wait_for_completion': True, 'max_wait': 3600, 'include_global_state': False, 'extra_settings': {'index_settings': {'number_of_replicas': 0}}}, 'filters': [{'filtertype': 'state', 'state': 'SUCCESS', 'exclude': None}]}}}\r\n2018-07-12 06:52:12,858 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'actions': <class 'dict'>}\r\n2018-07-12 06:52:12,858 DEBUG     curator.validators.SchemaCheck               __init__:27   \"Actions File\" config: {'actions': {1: {'action': 'restore', 'description': 'Restore all indices related to review database.', 'options': {'repository': 'betasearch_backup', 'name': 'backup_bs_notices_20180710234204', 'indices': ['notices'], 'wait_for_completion': True, 'max_wait': 3600, 'include_global_state': False, 'extra_settings': {'index_settings': {'number_of_replicas': 0}}}, 'filters': [{'filtertype': 'state', 'state': 'SUCCESS', 'exclude': None}]}}}\r\n2018-07-12 06:52:12,858 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'action': Any(In(['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']), msg=\"action must be one of ['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']\")}\r\n2018-07-12 06:52:12,858 DEBUG     curator.validators.SchemaCheck               __init__:27   \"action type\" config: {'action': 'restore', 'description': 'Restore all indices related to review database.', 'options': {'repository': 'betasearch_backup', 'name': 'backup_bs_notices_20180710234204', 'indices': ['notices'], 'wait_for_completion': True, 'max_wait': 3600, 'include_global_state': False, 'extra_settings': {'index_settings': {'number_of_replicas': 0}}}, 'filters': [{'filtertype': 'state', 'state': 'SUCCESS', 'exclude': None}]}\r\n2018-07-12 06:52:12,858 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'action': Any(In(['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']), msg=\"action must be one of ['alias', 'allocation', 'close', 'cluster_routing', 'create_index', 'delete_indices', 'delete_snapshots', 'forcemerge', 'index_settings', 'open', 'reindex', 'replicas', 'restore', 'rollover', 'shrink', 'snapshot']\"), 'description': Any(<class 'str'>, <class 'str'>, msg=None), 'options': <class 'dict'>, 'filters': <class 'list'>}\r\n2018-07-12 06:52:12,858 DEBUG     curator.validators.SchemaCheck               __init__:27   \"structure\" config: {'action': 'restore', 'description': 'Restore all indices related to review database.', 'options': {'repository': 'betasearch_backup', 'name': 'backup_bs_notices_20180710234204', 'indices': ['notices'], 'wait_for_completion': True, 'max_wait': 3600, 'include_global_state': False, 'extra_settings': {'index_settings': {'number_of_replicas': 0}}}, 'filters': [{'filtertype': 'state', 'state': 'SUCCESS', 'exclude': None}]}\r\n2018-07-12 06:52:12,861 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'allow_ilm_indices': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f737232de18>, msg=None), msg=None), 'continue_if_exception': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f7365920158>, msg=None), msg=None), 'disable_action': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f7365920378>, msg=None), msg=None), 'ignore_empty_list': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f7365920488>, msg=None), msg=None), 'timeout_override': Any(Coerce(int, msg=None), None, msg=None), 'repository': Any(<class 'str'>, msg=None), 'name': Any(<class 'str'>, msg=None), 'indices': Any(None, <class 'list'>, msg=None), 'ignore_unavailable': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f73658c2488>, msg=None), msg=None), 'include_aliases': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f73658c2620>, msg=None), msg=None), 'include_global_state': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f73658c27b8>, msg=None), msg=None), 'partial': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f73658c2950>, msg=None), msg=None), 'rename_pattern': Any(<class 'str'>, msg=None), 'rename_replacement': Any(<class 'str'>, msg=None), 'extra_settings': <class 'dict'>, 'wait_for_completion': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f73658c2d08>, msg=None), msg=None), 'wait_interval': Any(All(Coerce(int, msg=None), Range(min=1, max=30, min_included=True, max_included=True, msg=None), msg=None), None, msg=None), 'max_wait': Any(-1, Coerce(int, msg=None), None, msg=None), 'skip_repo_fs_check': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f73658c6158>, msg=None), msg=None)}\r\n2018-07-12 06:52:12,861 DEBUG     curator.validators.SchemaCheck               __init__:27   \"options\" config: {'repository': 'betasearch_backup', 'name': 'backup_bs_notices_20180710234204', 'indices': ['notices'], 'wait_for_completion': True, 'max_wait': 3600, 'include_global_state': False, 'extra_settings': {'index_settings': {'number_of_replicas': 0}}}\r\n2018-07-12 06:52:12,861 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: <function Filters.<locals>.f at 0x7f7365920f28>\r\n2018-07-12 06:52:12,861 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filters\" config: [{'filtertype': 'state', 'state': 'SUCCESS', 'exclude': None}]\r\n2018-07-12 06:52:12,862 DEBUG     curator.validators.SchemaCheck               __init__:26   Schema: {'filtertype': Any(In(['age', 'alias', 'allocated', 'closed', 'count', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'space', 'state']), msg=\"filtertype must be one of ['age', 'alias', 'allocated', 'closed', 'count', 'forcemerged', 'ilm', 'kibana', 'none', 'opened', 'pattern', 'period', 'space', 'state']\"), 'state': Any('SUCCESS', 'PARTIAL', 'FAILED', 'IN_PROGRESS', msg=None), 'exclude': Any(<class 'bool'>, All(Any(<class 'str'>, msg=None), <function Boolean at 0x7f73658bc0d0>, msg=None), msg=None)}\r\n2018-07-12 06:52:12,862 DEBUG     curator.validators.SchemaCheck               __init__:27   \"filter\" config: {'filtertype': 'state', 'state': 'SUCCESS'}\r\n2018-07-12 06:52:12,862 DEBUG     curator.validators.filters                      f:48   Filter #0: {'filtertype': 'state', 'state': 'SUCCESS', 'exclude': False}\r\n2018-07-12 06:52:12,862 DEBUG                curator.cli                    run:121  Full list of actions: {1: {'action': 'restore', 'description': 'Restore all indices related to review database.', 'options': {'repository': 'betasearch_backup', 'name': 'backup_bs_notices_20180710234204', 'indices': ['notices'], 'wait_for_completion': True, 'max_wait': 3600, 'include_global_state': False, 'extra_settings': {'index_settings': {'number_of_replicas': 0}}, 'timeout_override': 21600, 'skip_repo_fs_check': False, 'ignore_empty_list': False, 'ignore_unavailable': False, 'include_aliases': False, 'disable_action': False, 'wait_interval': 9, 'continue_if_exception': False, 'partial': False, 'allow_ilm_indices': False}, 'filters': [{'filtertype': 'state', 'state': 'SUCCESS', 'exclude': False}]}}\r\n2018-07-12 06:52:12,862 DEBUG                curator.cli                    run:126  action_disabled = False\r\n2018-07-12 06:52:12,862 DEBUG                curator.cli                    run:130  continue_if_exception = False\r\n2018-07-12 06:52:12,862 DEBUG                curator.cli                    run:132  timeout_override = 21600\r\n2018-07-12 06:52:12,862 DEBUG                curator.cli                    run:134  ignore_empty_list = False\r\n2018-07-12 06:52:12,862 DEBUG                curator.cli                    run:136  allow_ilm_indices = False\r\n2018-07-12 06:52:12,862 INFO                 curator.cli                    run:146  Preparing Action ID: 1, \"restore\"\r\n2018-07-12 06:52:12,862 DEBUG              curator.utils             get_client:803  kwargs = {'hosts': ['ad-eslb01:9200'], 'use_ssl': False, 'ssl_no_validate': False, 'master_only': False, 'url_prefix': '', 'aws_token': None, 'aws_sign_request': False, 'http_auth': None, 'aws_key': None, 'certificate': None, 'client_key': None, 'aws_secret_key': None, 'client_cert': None, 'port': 9200, 'timeout': 21600}\r\n2018-07-12 06:52:12,867 DEBUG              curator.utils             get_client:880  Not using \"requests_aws4auth\" python module to connect.`\r\n\r\n### Steps to Reproduce the Problem\r\n  1. We took several incremental snapshots of indices on our on-premise cluster and saved them in a shared NFS filesystem (configured with path.repo on elasticsearch)\r\n  2. We mounted the same NFS share on a brand new cluster running in cloud, with the intention to restore snapshots there. The repo is correctly seen by ES in the new cluster\r\n`GET _snapshot/betasearch_backup/_all\r\n{\r\n  \"snapshots\": [\r\n    {\r\n      \"snapshot\": \"backup_bs_2016\",\r\n      \"uuid\": \"vk-TSn64StySBLYb6zK0aQ\",\r\n      \"version_id\": 5040099,\r\n      \"version\": \"5.4.0\",\r\n      \"indices\": [\r\n        \"ad_states_2016\",\r\n        \"blocket_2016.ads_20180301\",\r\n        \"blocket_2016.notices\"\r\n      ],\r\n      \"state\": \"SUCCESS\",\r\n      \"start_time\": \"2018-06-19T07:12:36.090Z\",\r\n      \"start_time_in_millis\": 1529392356090,\r\n      \"end_time\": \"2018-06-19T08:12:29.944Z\",\r\n      \"end_time_in_millis\": 1529395949944,\r\n      \"duration_in_millis\": 3593854,\r\n      \"failures\": [],\r\n      \"shards\": {\r\n        \"total\": 24,\r\n        \"failed\": 0,\r\n        \"successful\": 24\r\n      }\r\n    },\r\n...`\r\n  3. On our master node, we installed curator via RPM and provided a simple restore file to try and restore snapshots\r\n`actions:\r\n  1:\r\n    action: restore\r\n    description: Restore all indices related to review database.\r\n    options:\r\n      repository: betasearch_backup\r\n      name:\r\n      indices: ['notices']\r\n      wait_for_completion: True\r\n      max_wait: 3600\r\n      include_global_state: False\r\n      extra_settings:\r\n        index_settings:\r\n          number_of_replicas: 0\r\n    filters:\r\n    - filtertype: state\r\n      state: SUCCESS\r\n      exclude:`\r\n\r\nWe added include_global_state: False because this new cluster has only 1 master (the old one has 3)\r\n\r\n### Specifications\r\n\r\n  - Version: 5.5.4 installed via RPM\r\n  - Platform: CentOS Linux release 7.3.1611 (Core)\r\n  - Subsystem: AWS EC2\r\n\r\n\r\n## Context (Environment)\r\nWe are only able to restore snapshots using ES API. For example, this request works:\r\n`POST _snapshot/betasearch_backup/backup_bs_notices_20180627150319/_restore?wait_for_completion=true\r\n{\r\n  \"indices\": \"notices\",\r\n  \"ignore_unavailable\": true,\r\n  \"include_global_state\": false,\r\n  \"index_settings\": {\r\n    \"number_of_replicas\":0\r\n  },\r\n  \"ignore_index_settings\": [\r\n    \"index.routing.allocation.require._id\"\r\n  ]\r\n}`\r\n\r\nWe would like to use curator because it's easier to schedule it on our master node (maybe via Jenkins) and because it will take care of all incremental snapshots.", "performed_via_github_app": null, "score": 1.0}]}